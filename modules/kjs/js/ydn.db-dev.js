(function(){function k(a){throw a;}var m=void 0,p=!0,r=null,s=!1;function aa(){return function(){}}function w(a){return function(){return this[a]}}function ba(a){return function(){return a}}var x,y=this;function ca(a){a=a.split(".");for(var b=y,c;c=a.shift();)if(b[c]!=r)b=b[c];else return r;return b}
function fa(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function z(a){return a!==m}function A(a){return"array"==fa(a)}function B(a){var b=fa(a);return"array"==b||"object"==b&&"number"==typeof a.length}function C(a){return"string"==typeof a}function ga(a){return"boolean"==typeof a}function E(a){return"number"==typeof a}function ia(a){return"function"==fa(a)}function F(a){var b=typeof a;return"object"==b&&a!=r||"function"==b}function ja(a){return a[ka]||(a[ka]=++la)}
var ka="closure_uid_"+(1E9*Math.random()>>>0),la=0;function ma(a,b,c){return a.call.apply(a.bind,arguments)}function na(a,b,c){a||k(Error());if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}
function oa(a,b,c){oa=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ma:na;return oa.apply(r,arguments)}function qa(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=Array.prototype.slice.call(arguments);b.unshift.apply(b,c);return a.apply(this,b)}}var ra=Date.now||function(){return+new Date};
function G(a,b){var c=a.split("."),d=y;!(c[0]in d)&&d.execScript&&d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&z(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}function H(a,b){function c(){}c.prototype=b.prototype;a.z=b.prototype;a.prototype=new c};function sa(a){Error.captureStackTrace?Error.captureStackTrace(this,sa):this.stack=Error().stack||"";a&&(this.message=String(a))}H(sa,Error);sa.prototype.name="CustomError";function ta(a,b){for(var c=1;c<arguments.length;c++){var d=String(arguments[c]).replace(/\$/g,"$$$$");a=a.replace(/\%s/,d)}return a}function ua(a,b){return a.replace(/(\r\n|\r|\n)/g,b?"<br />":"<br>")}function va(a){if(!wa.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(xa,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(ya,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(za,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(Aa,"&quot;"));return a}var xa=/&/g,ya=/</g,za=/>/g,Aa=/\"/g,wa=/[&<>\"]/;
function Ba(a){return ua(a.replace(/  /g," &#160;"),m)}function Ca(a,b){for(var c=b.length,d=0;d<c;d++){var e=1==c?b:b.charAt(d);if(a.charAt(0)==e&&a.charAt(a.length-1)==e)return a.substring(1,a.length-1)}return a}var Da={"\x00":"\\0","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\x0B":"\\x0B",'"':'\\"',"\\":"\\\\"},Ea={"'":"\\'"};
function Fa(a){a=String(a);if(a.quote)return a.quote();for(var b=['"'],c=0;c<a.length;c++){var d=a.charAt(c),e=d.charCodeAt(0),f=b,g=c+1,h;if(!(h=Da[d])){if(!(31<e&&127>e))if(d in Ea)d=Ea[d];else if(d in Da)d=Ea[d]=Da[d];else{e=d;h=d.charCodeAt(0);if(31<h&&127>h)e=d;else{if(256>h){if(e="\\x",16>h||256<h)e+="0"}else e="\\u",4096>h&&(e+="0");e+=h.toString(16).toUpperCase()}d=Ea[d]=e}h=d}f[g]=h}b.push('"');return b.join("")};function Ga(a,b){b.unshift(a);sa.call(this,ta.apply(r,b));b.shift()}H(Ga,sa);Ga.prototype.name="AssertionError";function Ha(a,b){k(new Ga("Failure"+(a?": "+a:""),Array.prototype.slice.call(arguments,1)))};var Ia=Array.prototype,Ja=Ia.indexOf?function(a,b,c){return Ia.indexOf.call(a,b,c)}:function(a,b,c){c=c==r?0:0>c?Math.max(0,a.length+c):c;if(C(a))return!C(b)||1!=b.length?-1:a.indexOf(b,c);for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},Ka=Ia.forEach?function(a,b,c){Ia.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=C(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},La=Ia.map?function(a,b,c){return Ia.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),f=C(a)?
a.split(""):a,g=0;g<d;g++)g in f&&(e[g]=b.call(c,f[g],g,a));return e};function Ma(a,b){if(a.reduce)return a.reduce(b,0);var c=0;Ka(a,function(d,e){c=b.call(m,c,d,e,a)});return c}var Na=Ia.some?function(a,b,c){return Ia.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=C(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return p;return s};function Oa(a,b){var c=Qa(a,b,m);return 0>c?r:C(a)?a.charAt(c):a[c]}
function Qa(a,b,c){for(var d=a.length,e=C(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return f;return-1}function Ra(a){if(!A(a))for(var b=a.length-1;0<=b;b--)delete a[b];a.length=0}function Sa(a,b){var c=Ja(a,b),d;(d=0<=c)&&Ia.splice.call(a,c,1);return d}function Ta(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]}function Ua(a,b,c){return 2>=arguments.length?Ia.slice.call(a,b):Ia.slice.call(a,b,c)}
function Va(a,b){if(!B(a)||!B(b)||a.length!=b.length)return s;for(var c=a.length,d=Wa,e=0;e<c;e++)if(!d(a[e],b[e]))return s;return p}function Wa(a,b){return a===b};function Xa(a,b){for(var c in a)b.call(m,a[c],c,a)}function Ya(a,b){for(var c=B(b),d=c?b:arguments,c=c?0:1;c<d.length&&!(a=a[d[c]],!z(a));c++);return a}var Za="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function $a(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<Za.length;f++)c=Za[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};var ab="StopIteration"in y?y.StopIteration:Error("StopIteration");function bb(){}bb.prototype.a=function(){k(ab)};bb.prototype.ma=function(){return this};function cb(a){if(a instanceof bb)return a;if("function"==typeof a.ma)return a.ma(s);if(B(a)){var b=0,c=new bb;c.a=function(){for(;;){b>=a.length&&k(ab);if(b in a)return a[b++];b++}};return c}k(Error("Not implemented"))}
function db(a,b,c){if(B(a))try{Ka(a,b,c)}catch(d){d!==ab&&k(d)}else{a=cb(a);try{for(;;)b.call(c,a.a(),m,a)}catch(e){e!==ab&&k(e)}}}function eb(a){if(B(a))return Ta(a);a=cb(a);var b=[];db(a,function(a){b.push(a)});return b};function fb(a,b){this.c={};this.a=[];var c=arguments.length;if(1<c){c%2&&k(Error("Uneven number of arguments"));for(var d=0;d<c;d+=2)gb(this,arguments[d],arguments[d+1])}else if(a){var e;if(a instanceof fb)e=a.ea(),d=a.ab();else{var c=[],f=0;for(e in a)c[f++]=e;e=c;c=[];f=0;for(d in a)c[f++]=a[d];d=c}for(c=0;c<e.length;c++)gb(this,e[c],d[c])}}x=fb.prototype;x.q=0;x.bb=0;x.Ca=w("q");x.ab=function(){hb(this);for(var a=[],b=0;b<this.a.length;b++)a.push(this.c[this.a[b]]);return a};
x.ea=function(){hb(this);return this.a.concat()};x.clear=function(){this.c={};this.bb=this.q=this.a.length=0};function hb(a){if(a.q!=a.a.length){for(var b=0,c=0;b<a.a.length;){var d=a.a[b];Object.prototype.hasOwnProperty.call(a.c,d)&&(a.a[c++]=d);b++}a.a.length=c}if(a.q!=a.a.length){for(var e={},c=b=0;b<a.a.length;)d=a.a[b],Object.prototype.hasOwnProperty.call(e,d)||(a.a[c++]=d,e[d]=1),b++;a.a.length=c}}
function gb(a,b,c){Object.prototype.hasOwnProperty.call(a.c,b)||(a.q++,a.a.push(b),a.bb++);a.c[b]=c}x.Ba=function(){return new fb(this)};x.ma=function(a){hb(this);var b=0,c=this.a,d=this.c,e=this.bb,f=this,g=new bb;g.a=function(){for(;;){e!=f.bb&&k(Error("The map has changed since the iterator was created"));b>=c.length&&k(ab);var g=c[b++];return a?g:d[g]}};return g};var ib,jb,kb,lb;function mb(){return y.navigator?y.navigator.userAgent:r}lb=kb=jb=ib=s;var nb;if(nb=mb()){var ob=y.navigator;ib=0==nb.indexOf("Opera");jb=!ib&&-1!=nb.indexOf("MSIE");kb=!ib&&-1!=nb.indexOf("WebKit");lb=!ib&&!kb&&"Gecko"==ob.product}var pb=ib,qb=jb,rb=lb,sb=kb;function tb(){var a=y.document;return a?a.documentMode:m}var ub;
a:{var vb="",wb;if(pb&&y.opera)var xb=y.opera.version,vb="function"==typeof xb?xb():xb;else if(rb?wb=/rv\:([^\);]+)(\)|;)/:qb?wb=/MSIE\s+([^\);]+)(\)|;)/:sb&&(wb=/WebKit\/(\S+)/),wb)var yb=wb.exec(mb()),vb=yb?yb[1]:"";if(qb){var zb=tb();if(zb>parseFloat(vb)){ub=String(zb);break a}}ub=vb}var Ab={};
function Bb(a){var b;if(!(b=Ab[a])){b=0;for(var c=String(ub).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),d=String(a).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),e=Math.max(c.length,d.length),f=0;0==b&&f<e;f++){var g=c[f]||"",h=d[f]||"",l=/(\d*)(\D*)/g,n=/(\d*)(\D*)/g;do{var q=l.exec(g)||["","",""],t=n.exec(h)||["","",""];if(0==q[0].length&&0==t[0].length)break;b=((0==q[1].length?0:parseInt(q[1],10))<(0==t[1].length?0:parseInt(t[1],10))?-1:(0==q[1].length?0:parseInt(q[1],10))>(0==t[1].length?
0:parseInt(t[1],10))?1:0)||((0==q[2].length)<(0==t[2].length)?-1:(0==q[2].length)>(0==t[2].length)?1:0)||(q[2]<t[2]?-1:q[2]>t[2]?1:0)}while(0==b)}b=Ab[a]=0<=b}return b}var Cb=y.document,Db=!Cb||!qb?m:tb()||("CSS1Compat"==Cb.compatMode?parseInt(ub,10):5);function Eb(a){return Gb(a||arguments.callee.caller,[])}
function Gb(a,b){var c=[];if(0<=Ja(b,a))c.push("[...circular reference...]");else if(a&&50>b.length){c.push(Ib(a)+"(");for(var d=a.arguments,e=0;e<d.length;e++){0<e&&c.push(", ");var f;f=d[e];switch(typeof f){case "object":f=f?"object":"null";break;case "string":break;case "number":f=String(f);break;case "boolean":f=f?"true":"false";break;case "function":f=(f=Ib(f))?f:"[fn]";break;default:f=typeof f}40<f.length&&(f=f.substr(0,40)+"...");c.push(f)}b.push(a);c.push(")\n");try{c.push(Gb(a.caller,b))}catch(g){c.push("[exception trying to get caller]\n")}}else a?
c.push("[...long stack...]"):c.push("[end]");return c.join("")}function Ib(a){if(Jb[a])return Jb[a];a=String(a);if(!Jb[a]){var b=/function ([^\(]+)/.exec(a);Jb[a]=b?b[1]:"[Anonymous]"}return Jb[a]}var Jb={};function Kb(a,b,c,d,e){"number"==typeof e||Lb++;this.g=d||ra();this.f=a;this.e=b;this.d=c;delete this.c;delete this.a}Kb.prototype.c=r;Kb.prototype.a=r;var Lb=0;function Mb(a){this.f=a}Mb.prototype.d=r;Mb.prototype.c=r;Mb.prototype.e=r;Mb.prototype.a=r;function Nb(a,b){this.name=a;this.value=b}Nb.prototype.toString=w("name");var Ob=new Nb("SHOUT",1200),Pb=new Nb("SEVERE",1E3),Qb=new Nb("WARNING",900),Rb=new Nb("INFO",800),Sb=new Nb("CONFIG",700),Tb=new Nb("FINE",500),Ub=new Nb("FINER",400),Vb=new Nb("FINEST",300),Wb=[new Nb("OFF",Infinity),Ob,Pb,Qb,Rb,Sb,Tb,Ub,Vb,new Nb("ALL",0)],Xb=r;Mb.prototype.getName=w("f");
function Yb(a){if(a.c)return a.c;if(a.d)return Yb(a.d);Ha("Root logger has no level set.");return r}Mb.prototype.log=function(a,b,c){if(a.value>=Yb(this).value){a=this.g(a,b,c);b="log:"+a.e;y.console&&(y.console.timeStamp?y.console.timeStamp(b):y.console.markTimeline&&y.console.markTimeline(b));y.msWriteProfilerMark&&y.msWriteProfilerMark(b);for(b=this;b;){c=b;var d=a;if(c.a)for(var e=0,f=m;f=c.a[e];e++)f(d);b=b.d}}};
Mb.prototype.g=function(a,b,c){var d=new Kb(a,String(b),this.f);if(c){d.c=c;var e;var f=arguments.callee.caller;try{var g;var h=ca("window.location.href");if(C(c))g={message:c,name:"Unknown error",lineNumber:"Not available",fileName:h,stack:"Not available"};else{var l,n,q=s;try{l=c.lineNumber||c.Yc||"Not available"}catch(t){l="Not available",q=p}try{n=c.fileName||c.filename||c.sourceURL||y.$googDebugFname||h}catch(v){n="Not available",q=p}g=q||!c.lineNumber||!c.fileName||!c.stack?{message:c.message,
name:c.name,lineNumber:l,fileName:n,stack:c.stack||"Not available"}:c}e="Message: "+va(g.message)+'\nUrl: <a href="view-source:'+g.fileName+'" target="_new">'+g.fileName+"</a>\nLine: "+g.lineNumber+"\n\nBrowser stack:\n"+va(g.stack+"-> ")+"[end]\n\nJS stack traversal:\n"+va(Eb(f)+"-> ")}catch(u){e="Exception trying to expose exception! You win, we lose. "+u}d.a=e}return d};function $b(a,b){a.log(Pb,b,m)}function J(a,b){a.log(Qb,b,m)}function ac(a,b){a.log(Tb,b,m)}function K(a,b){a.log(Ub,b,m)}
function L(a,b){a.log(Vb,b,m)}var bc={},cc=r;function dc(){cc||(cc=new Mb(""),bc[""]=cc,cc.c=Sb)}function ec(){dc();return cc}function M(a){dc();var b;if(!(b=bc[a])){b=new Mb(a);var c=a.lastIndexOf("."),d=a.substr(c+1),c=M(a.substr(0,c));c.e||(c.e={});c.e[d]=b;b.d=c;bc[a]=b}return b};function fc(a){return function(){k(a)}};/*
 Portions of this code are from MochiKit, received by
 The Closure Authors under the MIT license. All other code is Copyright
 2005-2009 The Closure Authors. All Rights Reserved.
*/
function N(a,b){this.d=[];this.Ga=a;this.j=b||r}x=N.prototype;x.W=s;x.Da=s;x.xb=s;x.tc=s;x.Ob=s;x.yb=0;function gc(a,b){if(a.W)a.c instanceof N&&gc(a.c);else{if(a.a){var c=a.a;delete a.a;b?gc(c,b):(c.yb--,0>=c.yb&&gc(c))}a.Ga?a.Ga.call(a.j,a):a.Ob=p;a.W||a.o(new hc)}}x.$b=function(a,b){this.xb=s;ic(this,a,b)};function ic(a,b,c){a.W=p;a.c=c;a.Da=!b;jc(a)}function kc(a){a.W&&(a.Ob||k(new lc),a.Ob=s)}function O(a,b){kc(a);ic(a,p,b)}x.o=function(a){kc(this);ic(this,s,a)};
x.U=function(a,b){return this.B(a,r,b)};x.Yb=function(a,b){return this.B(r,a,b)};x.sc=function(a,b){return this.B(a,a,b)};x.B=function(a,b,c){this.d.push([a,b,c]);this.W&&jc(this);return this};function mc(a){return Na(a.d,function(a){return ia(a[1])})}
function jc(a){a.g&&(a.W&&mc(a))&&(y.clearTimeout(a.g),delete a.g);a.a&&(a.a.yb--,delete a.a);for(var b=a.c,c=s,d=s;a.d.length&&!a.xb;){var e=a.d.shift(),f=e[0],g=e[1],e=e[2];if(f=a.Da?g:f)try{var h=f.call(e||a.j,b);z(h)&&(a.Da=a.Da&&(h==b||h instanceof Error),a.c=b=h);b instanceof N&&(d=p,a.xb=p)}catch(l){b=l,a.Da=p,mc(a)||(c=p)}}a.c=b;d&&(b.B(oa(a.$b,a,p),oa(a.$b,a,s)),b.tc=p);c&&(a.g=y.setTimeout(fc(b),0))}function nc(a){var b=new N;O(b,a);return b}
function oc(a){Error.captureStackTrace?Error.captureStackTrace(this,oc):this.stack=Error().stack||"";a&&(this.message=String(a))}H(oc,Error);function lc(){oc.call(this)}H(lc,oc);lc.prototype.message="Deferred has already fired";lc.prototype.name="AlreadyCalledError";function hc(){oc.call(this)}H(hc,oc);hc.prototype.message="Deferred was canceled";hc.prototype.name="CanceledError";function pc(){return new N}var qc={READ_ONLY:"readonly",READ_WRITE:"readwrite",VERSION_CHANGE:"versionchange"},rc=y.IDBRequest&&"LOADING"in y.IDBRequest?y.IDBTransaction:y.webkitIDBRequest&&"LOADING"in y.webkitIDBRequest&&1===y.webkitIDBTransaction.READ_WRITE?y.webkitIDBTransaction:qc,P=rc.READ_ONLY,Q=rc.READ_WRITE,sc=rc.VERSION_CHANGE;function tc(a,b){return a?b?"prevunique":"prev":b?"nextunique":"next"};function uc(a,b){var c,d;2==arguments.length&&C(arguments[1])?(c=p,d=arguments[1].split(".")):d=(c=B(b))?b:arguments;for(c=c?0:1;c<d.length&&!(a=a[d[c]],!z(a));c++);return a}var vc={};
function wc(a){var b=[a];a=new xc;for(var c=0,d,e;(e=b.pop())!==m;){0===c%4&&12<c+4&&(a.write(c),c=0);d=typeof e;if(e instanceof Array)if(c+=4,0<e.length){b.push(vc);for(d=e.length;d--;)b.push(e[d]);continue}else a.write(c);else if("number"===d)c+=1,a.write(c),yc(a,e);else if(e instanceof Date)c+=2,a.write(c),yc(a,e.valueOf());else if("string"===d){c+=3;a.write(c);c=a;for(d=0;d<e.length;d++){var f=e.charCodeAt(d);126>=f?c.write(f+1):16510>=f?(f-=127,c.write(128|f>>8,f&255)):c.write(192|f>>10,f>>2|
255,(f|3)<<6)}c.write(0)}else if(e===vc)a.write(0);else return"";c=0}for(b=a.a.length;"00"===a.a[--b];);a.a.length=++b;return a.toString()}function zc(a){for(var b=[],c=b,d=[],e,f,g=new Ac(a);Bc(g)!=r;)if(0===g.a)c=d.pop();else{if(g.a===r)break;do{e=g.a/4|0;a=g.a%4;for(var h=0;h<e;h++)f=[],c.push(f),d.push(c),c=f;if(0===a&&12<g.a+4)Bc(g);else break}while(1);1===a?c.push(Cc(g)):2===a?c.push(new Date(Cc(g))):3===a?c.push(Dc(g)):0===a&&(c=d.pop())}return b[0]}
function yc(a,b){var c,d,e;c=b;var f=e=d=0;if(0!==c)if(isFinite(c)){0>c&&(d=1,c=-c);f=0;if(2.2250738585072014E-308<=c){for(e=c;1>e;)f--,e*=2;for(;2<=e;)f++,e/=2;e=f+1023}f=e?Math.floor(4503599627370496*(c/Math.pow(2,f)-1)):Math.floor(c/4.9E-324)}else e=2047,isNaN(c)?f=0x8000000000000:-Infinity===c&&(d=1);c=d;d=e;e=f;c&&(e=0xfffffffffffff-e,d=2047-d);a.write((c?0:128)|d>>4);a.write((d&15)<<4|0|e/281474976710656);e%=281474976710656;c=0|e/4294967296;a.write(c>>8,c&255);e%=4294967296;c=0|e/65536;a.write(c>>
8,c&255);c=e%65536;a.write(c>>8,c&255)}function Cc(a){var b=Bc(a)|0,c=b>>7?s:p,d=c?-1:1,e=(b&127)<<4,b=Bc(a)|0,e=e+(b>>4);c&&(e=2047-e);for(var b=[c?15-(b&15):b&15],f=6;f--;)b.push(c?255-(Bc(a)|0):Bc(a)|0);a=0;for(f=7;f--;)a=a/256+b[f];a/=16;return 0===a&&0===e?0:(a+1)*Math.pow(2,e-1023)*d}
function Dc(a){for(var b=[],c=0,d=0,e=0,f,g;;){f=Bc(a);if(0===f||f==r)break;0===c?(g=f>>6,2>g&&!isNaN(f)?b.push(String.fromCharCode(f-1)):(c=g,d=f<<10,e++)):2===c?(b.push(String.fromCharCode(d+f+127)),c=d=e=0):2===e?(d+=f<<2,e++):(b.push(String.fromCharCode(d|f>>6)),c=d=e=0)}return b.join("")}function Ac(a){this.a=r;this.c=a;this.d=this.c.length-1;this.index=-1}function Bc(a){return a.a=a.index<a.d?parseInt(a.c[++a.index]+a.c[++a.index],16):r}function xc(){this.a=[];this.c=m}
xc.prototype.write=function(a){for(var b=0;b<arguments.length;b++)this.c=arguments[b].toString(16),this.a.push(2===this.c.length?this.c:this.c="0"+this.c)};xc.prototype.toString=function(){return this.a.length?this.a.join(""):""};function Ec(a,b){var c=wc(a),d=wc(b);return c>d?1:c==d?0:-1};function Fc(){0!=Gc&&(Hc[ja(this)]=this)}var Gc=0,Hc={};Fc.prototype.Ga=s;Fc.prototype.X=function(){if(!this.Ga&&(this.Ga=p,this.qa(),0!=Gc)){var a=ja(this);delete Hc[a]}};Fc.prototype.qa=function(){if(this.gb)for(;this.gb.length;)this.gb.shift()()};var Ic=!qb||qb&&9<=Db,Jc=qb&&!Bb("9");!sb||Bb("528");rb&&Bb("1.9b")||qb&&Bb("8")||pb&&Bb("9.5")||sb&&Bb("528");rb&&!Bb("8")||qb&&Bb("9");function Kc(a,b){this.type=a;this.a=this.target=b}Kc.prototype.X=aa();Kc.prototype.c=s;Kc.prototype.e=p;Kc.prototype.Cb=function(){this.e=s};function Lc(a){Lc[" "](a);return a}Lc[" "]=aa();function Mc(a,b){a&&Nc(this,a,b)}H(Mc,Kc);x=Mc.prototype;x.target=r;x.clientX=0;x.clientY=0;x.ac=r;function Nc(a,b,c){var d=a.type=b.type;Kc.call(a,d);a.target=b.target||b.srcElement;a.a=c;if((c=b.relatedTarget)&&rb)try{Lc(c.nodeName)}catch(e){}a.clientX=b.clientX!==m?b.clientX:b.pageX;a.clientY=b.clientY!==m?b.clientY:b.pageY;a.ac=b;b.defaultPrevented&&a.Cb();delete a.c}
x.Cb=function(){Mc.z.Cb.call(this);var a=this.ac;if(a.preventDefault)a.preventDefault();else if(a.returnValue=s,Jc)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};var Oc="closure_listenable_"+(1E6*Math.random()|0),Pc=0;function Qc(a,b,c,d,e,f){this.fa=a;this.a=b;this.src=c;this.type=d;this.capture=!!e;this.cb=f;this.key=++Pc;this.M=this.na=s}Qc.prototype.handleEvent=function(a){return this.fa.call(this.cb||this.src,a)};var Rc={},Sc={},Tc={},Uc={};
function Vc(a,b,c,d,e){if(A(b))for(var f=0;f<b.length;f++)Vc(a,b[f],c,d,e);else if(c=Wc(c),a&&a[Oc]){f=c;c=a.f[b]||(a.f[b]=[]);var g=Xc(c,f,d,e);-1<g?(a=c[g],a.na=s):(a=new Qc(f,r,a,b,!!d,e),a.na=s,c.push(a))}else a:{b||k(Error("Invalid event type"));d=!!d;var h=Sc;b in h||(h[b]={q:0,S:0});h=h[b];d in h||(h[d]={q:0,S:0},h.q++);h=h[d];f=ja(a);h.S++;if(h[f])for(var g=h[f],l=0;l<g.length;l++){if(h=g[l],h.fa==c&&h.cb==e){if(h.M)break;g[l].na=s;break a}}else g=h[f]=[],h.q++;l=Yc();h=new Qc(c,l,a,b,d,e);
h.na=s;l.src=a;l.fa=h;g.push(h);Tc[f]||(Tc[f]=[]);Tc[f].push(h);a.addEventListener?a.addEventListener(b,l,d):a.attachEvent(b in Uc?Uc[b]:Uc[b]="on"+b,l);Rc[h.key]=h}}function Yc(){var a=Zc,b=Ic?function(c){return a.call(b.src,b.fa,c)}:function(c){c=a.call(b.src,b.fa,c);if(!c)return c};return b}
function $c(a,b,c,d,e){if(A(b))for(var f=0;f<b.length;f++)$c(a,b[f],c,d,e);else if(c=Wc(c),a&&a[Oc])b in a.f&&(a=a.f[b],c=Xc(a,c,d,e),-1<c&&(e=a[c],delete Rc[e.key],e.M=p,Ia.splice.call(a,c,1)));else{d=!!d;a:{f=Sc;if(b in f&&(f=f[b],d in f&&(f=f[d],a=ja(a),f[a]))){a=f[a];break a}a=r}if(a)for(f=0;f<a.length;f++)if(a[f].fa==c&&a[f].capture==d&&a[f].cb==e){ad(a[f]);break}}}
function ad(a){if(!E(a)&&a&&!a.M){var b=a.src;if(b&&b[Oc])bd(b,a);else{var c=a.type,d=a.a,e=a.capture;b.removeEventListener?b.removeEventListener(c,d,e):b.detachEvent&&b.detachEvent(c in Uc?Uc[c]:Uc[c]="on"+c,d);b=ja(b);Tc[b]&&(d=Tc[b],Sa(d,a),0==d.length&&delete Tc[b]);a.M=p;if(d=Sc[c][e][b])d.fc=p,cd(c,e,b,d);delete Rc[a.key]}}}
function cd(a,b,c,d){if(!d.hb&&d.fc){for(var e=0,f=0;e<d.length;e++)d[e].M?d[e].a.src=r:(e!=f&&(d[f]=d[e]),f++);d.length=f;d.fc=s;0==f&&(delete Sc[a][b][c],Sc[a][b].q--,0==Sc[a][b].q&&(delete Sc[a][b],Sc[a].q--),0==Sc[a].q&&delete Sc[a])}}function dd(a,b,c,d,e){var f=1;b=ja(b);if(a[b]){var g=--a.S,h=a[b];h.hb?h.hb++:h.hb=1;try{for(var l=h.length,n=0;n<l;n++){var q=h[n];q&&!q.M&&(f&=ed(q,e)!==s)}}finally{a.S=Math.max(g,a.S),h.hb--,cd(c,d,b,h)}}return Boolean(f)}
function ed(a,b){a.na&&ad(a);return a.handleEvent(b)}
function Zc(a,b){if(a.M)return p;var c=a.type,d=Sc;if(!(c in d))return p;var d=d[c],e,f;if(!Ic){e=b||ca("window.event");var g=p in d,h=s in d;if(g){if(0>e.keyCode||e.returnValue!=m)return p;a:{var l=s;if(0==e.keyCode)try{e.keyCode=-1;break a}catch(n){l=p}if(l||e.returnValue==m)e.returnValue=p}}l=new Mc;Nc(l,e,this);e=p;try{if(g){for(var q=[],t=l.a;t;t=t.parentNode)q.push(t);f=d[p];f.S=f.q;for(var v=q.length-1;!l.c&&0<=v&&f.S;v--)l.a=q[v],e&=dd(f,q[v],c,p,l);if(h){f=d[s];f.S=f.q;for(v=0;!l.c&&v<q.length&&
f.S;v++)l.a=q[v],e&=dd(f,q[v],c,s,l)}}else e=ed(a,l)}finally{q&&(q.length=0)}return e}c=new Mc(b,this);return e=ed(a,c)}var fd="__closure_events_fn_"+(1E9*Math.random()>>>0);function Wc(a){return ia(a)?a:a[fd]||(a[fd]=function(b){return a.handleEvent(b)})};function gd(){Fc.call(this);this.f={};this.yc=this}H(gd,Fc);gd.prototype[Oc]=p;gd.prototype.k=r;gd.prototype.Bb=function(a,b,c,d){Vc(this,a,b,c,d)};gd.prototype.removeEventListener=function(a,b,c,d){$c(this,a,b,c,d)};
function hd(a,b){var c,d=a.k;if(d)for(c=[];d;d=d.k)c.push(d);var d=a.yc,e=b,f=e.type||e;if(C(e))e=new Kc(e,d);else if(e instanceof Kc)e.target=e.target||d;else{var g=e,e=new Kc(f,d);$a(e,g)}var g=p,h;if(c)for(var l=c.length-1;!e.c&&0<=l;l--)h=e.a=c[l],g=id(h,f,p,e)&&g;e.c||(h=e.a=d,g=id(h,f,p,e)&&g,e.c||(g=id(h,f,s,e)&&g));if(c)for(l=0;!e.c&&l<c.length;l++)h=e.a=c[l],g=id(h,f,s,e)&&g}
gd.prototype.qa=function(){gd.z.qa.call(this);var a=0,b;for(b in this.f){for(var c=this.f[b],d=0;d<c.length;d++)++a,delete Rc[c[d].key],c[d].M=p;c.length=0}this.k=r};function bd(a,b){var c=b.type;c in a.f&&Sa(a.f[c],b)&&(delete Rc[b.key],b.M=p)}function id(a,b,c,d){if(!(b in a.f))return p;var e=p;b=Ta(a.f[b]);for(var f=0;f<b.length;++f){var g=b[f];g&&(!g.M&&g.capture==c)&&(g.na&&bd(a,g),e=g.handleEvent(d)!==s&&e)}return e&&d.e!=s}
function Xc(a,b,c,d){for(var e=0;e<a.length;++e){var f=a[e];if(f.fa==b&&f.capture==!!c&&f.cb==d)return e}return-1};function jd(a,b,c){ia(a)?c&&(a=oa(a,c)):a&&"function"==typeof a.handleEvent?a=oa(a.handleEvent,a):k(Error("Invalid listener argument"));2147483647<b||y.setTimeout(a,b||0)};function kd(a,b,c,d,e,f){N.call(this,e,f);this.f=a;this.e=[];this.k=!!b;this.ta=!!c;this.gb=!!d;for(b=this.X=0;b<a.length;b++)a[b].B(oa(this.s,this,b,p),oa(this.s,this,b,s));0==a.length&&!this.k&&O(this,this.e)}H(kd,N);kd.prototype.s=function(a,b,c){this.X++;this.e[a]=[b,c];this.W||(this.k&&b?O(this,[a,c]):this.ta&&!b?this.o(c):this.X==this.f.length&&O(this,this.e));this.gb&&!b&&(c=r);return c};kd.prototype.o=function(a){kd.z.o.call(this,a);for(a=0;a<this.f.length;a++)gc(this.f[a])};G("ydn.async.all",function(a){for(var b=[],c,d=0;c=a[d];d++){var e=new N;c.success(qa(function(a,b){O(a,b)},e));c.error(qa(function(a,b){a.o(b)},e));b[d]=e}return new kd(b)});function ld(a,b,c){var d;F(a)?(d=a.store,b=a.id,a.parent!=r&&(c=new ld(a.parent))):z(b)?d=a:(d=a.lastIndexOf("^|"),b=a,0<d&&(b=a.substr(d),c=new ld(a.substring(0,d))),b=b.split("^:"),d=b[0],b=b[1],z(b)||k(Error("Invalid key value: "+a)));this.a=d;this.id=b;this.parent=c||r}x=ld.prototype;x.toJSON=function(){var a={store:this.a,id:this.id};this.parent&&(a.parent=this.parent.toJSON());return a};x.valueOf=function(){return(this.parent?this.parent.valueOf()+"^|":"")+this.a+"^:"+this.id};
x.toString=function(){return this.valueOf().replace("^|","|").replace("^:",":")};x.Oc=w("a");x.uc=w("id");x.Nc=w("parent");function md(a){if(B(a)){for(var b=[],c=0,d=a.length;c<d;c++)b[c]=a[c];return b}return a};function R(a,b,c,d){this.lower=a;this.upper=b;this.lowerOpen=!!c;this.upperOpen=!!d;ia(Object.freeze)&&Object.freeze(this)}R.prototype.lower=m;R.prototype.upper=m;R.prototype.toJSON=function(){return nd(this)};function od(a,b,c,d){return new R(a,b,c,d)}function pd(a,b){return new R(m,a,m,!!b)}function qd(a,b){return new R(a,m,!!b,m)}function rd(a){var b;A(a)?(b=Ta(a),b.push("\uffff")):C(a)?b=a+"\uffff":k(new T);return od(a,b,s,p)}
function nd(a){a=a||{};return{lower:a.lower,upper:a.upper,lowerOpen:a.lowerOpen,upperOpen:a.upperOpen}}function sd(a){return a!=r?a.upper!=r&&a.lower!=r?td.bound(a.lower,a.upper,!!a.lowerOpen,!!a.upperOpen):a.upper!=r?td.upperBound(a.upper,a.upperOpen):a.lower!=r?td.lowerBound(a.lower,a.lowerOpen):r:r}
function ud(a){if(a instanceof R)return"";if(a!=r){if(F(a)){for(var b in a)if(a.hasOwnProperty(b)&&!(0<=Ja(["lower","upper","lowerOpen","upperOpen"],b)))return'invalid attribute "'+b+'" in key range object';return""}return"key range must be an object"}return""}
R.prototype.wb=function(a){var b=this.lower,c=this.upper,d=this.lowerOpen,e=this.upperOpen;if(a.lower!=r&&(this.lower==r||a.lower>=this.lower))b=a.lower,d=a.lowerOpen||this.lowerOpen;if(a.upper!=r&&(this.upper==r||a.upper<=this.upper))c=a.upper,e=a.upperOpen||this.upperOpen;return od(b,c,d,e)};function vd(a){if(!a)return"";var b=a.lowerOpen?" (":" [";a.lower!=r&&(b+=a.lower+", ");a.upper!=r&&(b+=a.upper);return b+=a.upperOpen?")":"]"}
function wd(a,b,c,d,e){if(c)if(!c.lowerOpen&&!c.upperOpen&&c.lower!=r&&c.upper!=r&&0===U(c.lower,c.upper))d.push(a+" = ?"),e.push(xd(c.lower,b));else{if(c.lower!=r){var f=c.lowerOpen?" > ":" >= ";d.push(a+f+"?");e.push(xd(c.lower,b))}c.upper!=r&&(f=c.upperOpen?" < ":" <= ",d.push(a+f+"?"),e.push(xd(c.upper,b)))}}
function yd(a,b,c,d){var e,f,g,h;if("^"==a)return rd(b);"<"==a||"<="==a?(e=b,g="<"==a):">"==a||">="==a?(f=b,h=">"==a):"="==a||"=="==a?e=f=b:k(new T("invalid op: "+a));"<"==c||"<="==c?(e=d,g="<"==c):">"==c||">="==c?(f=d,h=">"==c):z(c)&&k(new T("invalid op2: "+c));return od(f,e,h,g)}var td=y.IDBKeyRange||y.webkitIDBKeyRange||R;function T(a){sa.call(this,a);this.name="ydn.error.ArgumentException"}H(T,sa);function zd(a){sa.call(this,a);this.name="ydn.error.NotSupportedException"}H(zd,sa);function Ad(a){sa.call(this,a);this.name="ydn.error.NotImplementedException"}H(Ad,sa);function Bd(a){sa.call(this,a);this.name="ydn.error.InvalidOperationException"}H(Bd,sa);
function Cd(a){Error.captureStackTrace?Error.captureStackTrace(this,Cd):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.InternalError"}H(Cd,Error);Cd.prototype.name="ydn.error.InternalError";function Dd(a,b,c,d,e){z(e)||(e=A(a)?a.join(", "):a);a!=r&&(!C(a)&&!B(a))&&k(new T("index keyPath for "+e+" must be a string or array, but "+a+" is "+typeof a));A(a)&&Object.freeze&&Object.freeze(a);!z(a)&&z(e)&&(a=e);this.keyPath=a;this.e=B(this.keyPath);this.name=e;this.type=Ed(b);z(b)&&(z(this.type)||k(new T("type invalid in index: "+this.name)),A(this.keyPath)&&k(new T('composite key for store "'+this.name+'" must not specified type')));this.unique=!!c;this.multiEntry=!!d;this.f=C(this.type)?
this.type:Fd;this.c=C(e)?e:A(a)?this.keyPath.join(","):a;this.a=Fa(this.c);this.d=!this.e&&!this.multiEntry?this.keyPath.split("."):r}function Gd(a,b){if(b!=r){if(B(a.keyPath)){for(var c=[],d=0,e=a.keyPath.length;d<e;d++){var f=uc(b,a.keyPath[d]);c[d]=f}return c}return uc(b,a.keyPath)}}function Hd(a,b,c){for(var d=0;d<a.d.length;d++)d==a.d.length-1?b[a.d[d]]=c:F(b[a.d[d]])||(b[a.d[d]]={})}var Fd="TEXT";function xd(a,b){if("DATE"==b){if(a instanceof Date)return+a}else return z(b)?a:wc(a)}
function Id(a,b){return"DATE"==b?new Date(a):z(b)?a:zc(a)}var Jd=["BLOB","DATE","INTEGER","NUMERIC",Fd];function Ed(a){if(C(a))return a=Ja(Jd,a),Jd[a]}Dd.prototype.getName=w("name");Dd.prototype.toJSON=function(){return{name:this.name,keyPath:this.keyPath,type:this.type,unique:this.unique,multiEntry:this.multiEntry}};Dd.prototype.Ba=function(){var a=A(this.keyPath)?Ta(this.keyPath):this.keyPath;return new Dd(a,this.type,this.unique,this.multiEntry,this.name)};
function Kd(a,b){return a==r&&b==r?r:a!=r?b!=r?B(a)&&B(b)?Va(a,b)?r:"expect: "+a+", but: "+b:Ld(a,b)?r:"expect: "+a+", but: "+b:"keyPath: "+a+" no longer defined":"newly define "+b}Dd.prototype.hint=function(a){if(!a)return this;var b=A(this.keyPath)?Ta(this.keyPath):this.keyPath,c=this.type;!z(a.type)&&"TEXT"==c&&(c=m);return new Dd(b,c,this.unique,this.multiEntry,a.name)};function Md(a,b,c,d,e,f,g){this.name=a;C(this.name)||k(new T("store name must be a string"));this.keyPath=z(b)?b:r;this.e=B(this.keyPath);this.keyPath!==r&&(!C(this.keyPath)&&!this.e)&&k(new T("keyPath must be a string or array"));this.autoIncrement=c;var h;d!=r&&(h=Ed(d),z(h)||k(new T('type "'+d+'" for primary key in store "'+this.name+'" is invalid.')),this.e&&k(new T('composite key for store "'+this.name+'" must not specified type')));this.type=h!=r?h:this.autoIncrement?"INTEGER":m;this.d=C(this.keyPath)?
this.keyPath.split("."):[];this.indexes=e||[];this.da=!!f;this.nc=!!g;this.f=C(this.type)?this.type:Fd;this.c=A(this.keyPath)?this.keyPath.join(","):C(this.keyPath)?this.keyPath:"_ROWID_";this.a=Fa(this.c)}x=Md.prototype;x.da=s;x.nc=s;x.toJSON=function(){for(var a=[],b=0;b<this.indexes.length;b++)a.push(this.indexes[b].toJSON());return{name:this.name,keyPath:this.keyPath,autoIncrement:this.autoIncrement,type:this.type,indexes:a}};
function Nd(a){var b="name keyPath autoIncrement type indexes dispatchEvents fixed Sync".split(" "),c;for(c in a)a.hasOwnProperty(c)&&-1==Ja(b,c)&&k(new T('Unknown attribute "'+c+'"'));b=[];c=a.indexes||[];if(A(c))for(var d=0;d<c.length;d++){var e;e=c[d];var f=["name","unique","type","keyPath","multiEntry"],g=m;for(g in e)e.hasOwnProperty(g)&&-1==Ja(f,g)&&k(new T("Unknown field: "+g+" in "+V(e)));e=new Dd(e.keyPath,e.type,e.unique,e.multiEntry,e.name);z(e.keyPath)&&e.keyPath===a.keyPath||b.push(e)}return new Md(a.name,
a.keyPath,a.autoIncrement,"undefined"===a.type||"null"===a.type?m:a.type,b,a.dispatchEvents,a.fixed)}function Od(a,b,c,d,e,f,g){a=Pd(a,b,c,d,e,f,g);b="";0!=c&&(b+="SELECT "+a.select);b+=" FROM "+a.pa;a.n&&(b+=" WHERE "+a.n);a.group&&(b+=" GROUP BY "+a.group);a.Y&&(b+=" ORDER BY "+a.Y);return b}
function Pd(a,b,c,d,e,f,g){var h={select:"",pa:"",n:"",group:"",Y:""},l=a.c,n=a.a,q=r;d!==l&&C(d)&&(q=Qd(a,d));var t=!!q,v=d||l,u=Fa(v),D=t?q.type:a.type,I=t&&q.multiEntry;h.pa=Rd(a);3===c?h.select="COUNT("+n+")":1===c?(h.select=n,d!=r&&d!=l&&(h.select+=", "+u)):h.select="*";d=g?"DISTINCT ":"";l=[];I?(I=Fa("ydn.db.me:"+a.getName()+":"+q.getName()),h.select=3===c?"COUNT("+d+I+"."+u+")":1===c?Rd(a)+"."+n+", "+I+"."+u:Rd(a)+".*, "+I+"."+u+" AS "+v,h.pa=I+" INNER JOIN "+Rd(a)+" USING ("+n+")",e!=r&&(wd(I+
"."+u,D,e,l,b),0<l.length&&(h.n=h.n?h.n+(" AND "+l.join(" AND ")):l.join(" AND ")))):e!=r&&(wd(u,D,e,l,b),0<l.length&&(h.n=h.n?h.n+(" AND "+l.join(" AND ")):l.join(" AND ")));t&&(!q.unique&&g)&&(h.group=u);a=f?"DESC":"ASC";h.Y=u+" "+a;t&&(h.Y+=", "+n+" "+a);return h}x.Ba=function(){return Nd(this.toJSON())};x.index=function(a){return this.indexes[a]||r};function Qd(a,b){return Oa(a.indexes,function(a){return a.name==b})}
function Sd(a,b){for(var c=0;c<a.indexes.length;c++)if(!Kd(a.indexes[c].keyPath,b))return a.indexes[c];return r}function Td(a,b){return b==a.keyPath?p:Na(a.indexes,function(a){return a.name==b})}function Rd(a){return Fa(a.name)}
x.hint=function(a){if(!a)return this;var b=this.autoIncrement,c=A(this.keyPath)?Ta(this.keyPath):this.keyPath,d=this.type,e=La(this.indexes,function(a){return a.Ba()});!z(a.type)&&"TEXT"==d&&(d=m);A(a.keyPath)&&(C(c)&&c==a.keyPath.join(","))&&(c=Ta(a.keyPath));for(var f=0,g=a.indexes.length;f<g;f++)if(a.indexes[f].e)for(var h=a.indexes[f].getName(),l=e.length-1;0<=l;l--)if(0<=h.indexOf(e[l].getName())){e[l]=a.indexes[f].Ba();break}for(f=0;f<e.length;f++)(g=Qd(a,e[f].getName()))&&(e[f]=e[f].hint(g));
return new Md(a.name,c,b,d,e)};x.getName=w("name");function Ud(a){return!!a.keyPath}function Vd(a,b,c){if(!a.keyPath&&c!=r)return c;if(a.e){c=[];for(var d=0;d<a.keyPath.length;d++)c.push(uc(b,a.keyPath[d]));return c}if(a.keyPath)return Ya(b,a.d)}function Wd(a,b,c){for(var d=0;d<a.d.length;d++){var e=a.d[d];if(d==a.d.length-1){b[e]=c;break}z(b[e])||(b[e]={});b=b[e]}}
function Xd(a,b,c){var d=[],e=[];c=z(c)?c:Vd(a,b);z(c)&&(e.push(a.a),d.push(xd(c,a.type)));for(var f=0;f<a.indexes.length;f++){var g=a.indexes[f];if(!g.multiEntry&&!(g.name===a.keyPath||"_default_"==g.name)){var h=Gd(g,b);h!=r&&(d.push(xd(h,g.type)),e.push(g.a))}}a.nc||(d.push(V(b)),e.push("_default_"));a=[];for(f=d.length-1;0<=f;f--)a[f]="?";return{Zb:e,hc:a,A:d,key:c}}
function Yd(a,b){if(!b)return"missing store: "+a.name;if(a.name!=b.name)return"store name, expect: "+a.name+", but: "+b.name;var c=Kd(a.keyPath,b.keyPath);if(c)return"keyPath, "+c;if(z(a.autoIncrement)&&z(b.autoIncrement)&&a.autoIncrement!=b.autoIncrement)return"autoIncrement, expect:  "+a.autoIncrement+", but: "+b.autoIncrement;if(a.indexes.length!=b.indexes.length)return"indexes length, expect:  "+a.indexes.length+", but: "+b.indexes.length;if(z(a.type)&&z(b.type)&&(B(a.type)?!Va(a.type,b.type):
a.type!=b.type))return"data type, expect:  "+a.type+", but: "+b.type;for(c=0;c<a.indexes.length;c++){var d=Qd(b,a.indexes[c].name),e;e=a.indexes[c];if(d)if(e.name!=d.name)e="name, expect: "+e.name+", but: "+d.name;else{var f=Kd(e.keyPath,d.keyPath);e=f?"keyPath, "+f:e.unique!=r&&d.unique!=r&&e.unique!=d.unique?"unique, expect: "+e.unique+", but: "+d.unique:e.multiEntry!=r&&d.multiEntry!=r&&e.multiEntry!=d.multiEntry?"multiEntry, expect: "+e.multiEntry+", but: "+d.multiEntry:z(e.type)&&z(d.type)&&
(B(e.type)?!Va(e.type,d.type):e.type!=d.type)?"data type, expect: "+e.type+", but: "+d.type:""}else e="no index for "+e.name;if(0<e.length)return'index "'+a.indexes[c].name+'" '+e}return""};function Zd(a,b){var c,d=b;if(F(a)){c=["version","stores"];for(var e in a)a.hasOwnProperty(e)&&-1==Ja(c,e)&&k(new T("Unknown field: "+e+" in schema."));c=a.version;d=[];e=a.stores||[];A(e)||k(new T("stores must be array"));for(var f=0;f<e.length;f++){var g=Nd(e[f]);-1!=Qa(d,function(a){return a.name==g.name})&&k(new T('duplicate store name "'+g.name+'".'));d.push(g)}}else C(a)?c=0==a.length?m:parseFloat(a):E(a)&&(c=a);z(c)&&((!E(c)||0>c)&&k(new T("Invalid version: "+c+" ("+a+")")),isNaN(c)&&(c=m));
z(b)&&(!A(b)||0<b.length&&!(b[0]instanceof Md))&&k(new T("stores"));this.version=c;this.ra=!z(this.version);this.stores=d||[]}x=Zd.prototype;x.toJSON=function(){var a=La(this.stores,function(a){return a.toJSON()}),b={};b.stores=a;z(this.version)&&(b.version=this.version);return b};x.ra=s;x.H=ba(s);function $d(a){return La(a.stores,function(a){return a.name})}x.ia=function(a){return this.stores[a]||r};x.count=function(){return this.stores.length};
function W(a,b){return Oa(a.stores,function(a){return a.name==b})}function ae(a,b){return Na(a.stores,function(a){return a.name==b})}function be(a,b,c){if(!b||a.stores.length!=b.stores.length)return"Number of store: "+a.stores.length+" vs "+b.stores.length;for(var d=0;d<a.stores.length;d++){var e=W(b,a.stores[d].name),e=e&&c?e.hint(a.stores[d]):e,e=Yd(a.stores[d],e);if(0<e.length)return'store: "'+a.stores[d].name+'" '+e}return""};function ce(a){Error.captureStackTrace?Error.captureStackTrace(this,ce):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.ArgumentException"}H(ce,Error);function de(a){Error.captureStackTrace?Error.captureStackTrace(this,de):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.NotSupportedException"}H(ce,Error);de.prototype.name="ydn.error.NotSupportedException";
function ee(a){Error.captureStackTrace?Error.captureStackTrace(this,ee):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.NotImplementedException"}H(ee,Error);function fe(a){Error.captureStackTrace?Error.captureStackTrace(this,fe):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.InternalError"}H(fe,Error);fe.prototype.name="ydn.InternalError";
function ge(a){Error.captureStackTrace?Error.captureStackTrace(this,ge):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.ConstraintError"}H(ge,Error);ge.prototype.name="ydn.error.ConstraintError";function he(a){Error.captureStackTrace?Error.captureStackTrace(this,he):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.InvalidOperationException"}H(ce,Error);
function ie(a){Error.captureStackTrace?Error.captureStackTrace(this,ie):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.InvalidOperationError"}H(ie,Error);function je(a){a=String(a);if(/^\s*$/.test(a)?0:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x0a-\x1f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,"")))try{return eval("("+a+")")}catch(b){}k(Error("Invalid JSON string: "+a))}function ke(){}
function le(a,b,c){switch(typeof b){case "string":me(b,c);break;case "number":c.push(isFinite(b)&&!isNaN(b)?b:"null");break;case "boolean":c.push(b);break;case "undefined":c.push("null");break;case "object":if(b==r){c.push("null");break}if(A(b)){var d=b.length;c.push("[");for(var e="",f=0;f<d;f++)c.push(e),le(a,b[f],c),e=",";c.push("]");break}c.push("{");d="";for(e in b)Object.prototype.hasOwnProperty.call(b,e)&&(f=b[e],"function"!=typeof f&&(c.push(d),me(e,c),c.push(":"),le(a,f,c),d=","));c.push("}");
break;case "function":break;default:k(Error("Unknown type: "+typeof b))}}var ne={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\x0B":"\\u000b"},oe=/\uffff/.test("\uffff")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g;function me(a,b){b.push('"',a.replace(oe,function(a){if(a in ne)return ne[a];var b=a.charCodeAt(0),e="\\u";16>b?e+="000":256>b?e+="00":4096>b&&(e+="0");return ne[a]=e+b.toString(16)}),'"')};M("ydn");var pe="undefined"!=typeof y.JSON;function qe(a){return!C(a)||/^[\s\xa0]*$/.test(a)?{}:pe?JSON.parse(a):je(a)}function re(a){var b;try{b=V(a)}catch(c){b=""}return b?b.substr(0,70)+(70<b.length?"...":""):""}function V(a){if(pe)a=JSON.stringify(a);else{var b=[];le(new ke,a,b);a=b.join("")}return a};function se(a,b){z(a)&&5242880<a&&J(this.b,"storage size request ignored, use Quota Management API instead");this.p=r;this.Na=b||NaN}
se.prototype.wa=function(a,b){function c(a,c,d){K(e.b,(d?"changing":"upgrading")+" version to "+a.version+" from "+g);for(d=0;d<b.stores.length;d++)te(e,a,c,b.stores[d]);c=a.objectStoreNames;var f=c.length;for(d=0;d<f;d++)ae(b,c[d])||(a.deleteObjectStore(c[d]),K(e.b,"store: "+c[d]+" deleted."))}function d(a,b){f.W?J(e.b,"database already set."):z(b)?(J(e.b,b?b.message:"Error received."),e.p=r,f.o(b)):(e.p=a,e.p.onabort=function(a){J(e.b,e+": onabort - "+a.message)},e.p.onerror=function(a){J(e.b,e+
": onerror - "+a.message)},e.p.onversionchange=function(a){L(e.b,e+": onversionchange to: "+a.version);e.p&&(e.p.onabort=r,e.p.onblocked=r,e.p.onerror=r,e.p.onversionchange=r,e.p.close(),e.p=r,ia(e.e)&&e.e())},O(f,parseFloat(g)))}var e=this,f=new N,g=m,h=b.version;K(e.b,"Opening database: "+a+" ver: "+(b.ra?"auto":h));var l;l=z(h)?ue.open(a,h):ue.open(a);l.onsuccess=function(f){var h=f.target.result;z(g)||(g=h.version);K(e.b,"Database: "+h.name+", ver: "+h.version+" opened.");if(b.ra)e.L(function(f){if(b.H())for(var g=
0;g<f.stores.length;g++)ae(b,f.stores[g].getName())||ve(b,f.stores[g].Ba());f=be(b,f);if(0<f.length){K(e.b,"Schema change require for difference in "+f);var l=E(h.version)?h.version+1:1;if("IDBOpenDBRequest"in y){h.close();var n=ue.open(a,l);n.onupgradeneeded=function(a){a=a.target.result;K(e.b,"re-open for version "+a.version);c(a,n.transaction,s)};n.onsuccess=function(a){d(a.target.result)};n.onerror=function(){K(e.b,e+": fail.");d(r)}}else{var t=h.setVersion(l+"");t.a=function(a){J(e.b,"migrating from "+
h.version+" to "+l+" failed.");d(r,a)};t.onsuccess=function(){t.transaction.oncomplete=S;c(h,t.transaction,p)};var S=function(){var b=ue.open(a);b.onsuccess=function(a){a=a.target.result;K(e.b,e+": OK.");d(a)};b.onerror=function(){K(e.b,e+": fail.");d(r)}};t.transaction!=r&&(t.transaction.oncomplete=S)}}else d(h)},m,h);else if(b.version>h.version){var l=h.setVersion(b.version);l.a=function(a){J(e.b,"migrating from "+h.version+" to "+b.version+" failed.");d(r,a)};l.onsuccess=function(){c(h,l.transaction,
p)}}else b.version==h.version?K(e.b,"database version "+h.version+" ready to go"):J(e.b,"connected database version "+h.version+" is higher than requested version."),e.L(function(a){a=be(b,a);0<a.length?(K(e.b,a),d(r,new ge("different schema: "+a))):d(h)},m,h)};l.onupgradeneeded=function(a){a=a.target.result;g=NaN;K(e.b,"upgrade needed for version "+a.version);c(a,l.transaction,s)};l.onerror=function(c){$b(e.b,"opening database "+a+":"+b.version+" failed.");d(r,c)};l.onblocked=function(c){$b(e.b,
"database "+a+" "+b.version+" block, close other connections.");d(r,c)};E(this.Na)&&!isNaN(this.Na)&&jd(function(){"done"!=l.readyState&&($b(e.b,e+": database state is still "+l.readyState),d(r,new we("connection timeout after "+e.Na)))},this.Na);return f};var ue=y.indexedDB||y.mozIndexedDB||y.webkitIndexedDB||y.moz_indexedDB||y.msIndexedDB;x=se.prototype;x.Na=18E4;x.ka=ba("indexeddb");x.Tb=function(){return this.p||r};x.Ra=function(){return!!this.p};x.b=M("ydn.db.con.IndexedDb");x.p=r;
x.nb=function(){return this.p?parseFloat(this.p.version):m};
x.L=function(a,b,c){c=c||this.p;if(z(b)){if(b===r){if(0==c.objectStoreNames.length){a(new Zd(c.version));return}k(new fe)}c=b.db}else{b=[];for(var d=c.objectStoreNames.length-1;0<=d;d--)b[d]=c.objectStoreNames[d];if(0==b.length){a(new Zd(c.version));return}b=c.transaction(b,P)}for(var e=c.objectStoreNames,f=[],g=e.length,d=0;d<g;d++){for(var h=b.objectStore(e[d]),l=[],n=0,q=h.indexNames.length;n<q;n++){var t=h.index(h.indexNames[n]);l[n]=new Dd(t.keyPath,m,t.unique,t.multiEntry,t.name)}f[d]=new Md(h.name,
h.keyPath,h.autoIncrement,m,l)}b=new Zd(c.version,f);a(b)};
function te(a,b,c,d){function e(){var a={autoIncrement:!!d.autoIncrement};d.keyPath!=r&&(a.keyPath=d.keyPath);try{return b.createObjectStore(d.getName(),a)}catch(c){"InvalidAccessError"==c.name&&k(new xe("creating store for "+d.getName()+" of keyPath: "+d.keyPath+" and autoIncrement: "+d.autoIncrement)),"ConstraintError"==c.name&&k(new ge("creating store for "+d.getName())),k(c)}}L(a.b,"Creating Object Store for "+d.getName()+" keyPath: "+d.keyPath);if(b.objectStoreNames.contains(d.getName()))if(c=
c.objectStore(d.getName()),(d.keyPath||"")!=(c.keyPath||""))b.deleteObjectStore(d.getName()),J(a.b,"store: "+d.getName()+" deleted due to keyPath change."),c=e();else if(ga(c.autoIncrement)&&ga(d.autoIncrement)&&c.autoIncrement!=d.autoIncrement)b.deleteObjectStore(d.getName()),J(a.b,"store: "+d.getName()+" deleted due to autoIncrement change."),c=e();else{for(var f=c.indexNames,g=0,h=0,l=0;l<d.indexes.length;l++){var n=d.indexes[l];if(!f.contains(n.name)){if(n.unique||n.multiEntry){var q={unique:n.unique,
multiEntry:n.multiEntry};c.createIndex(n.name,n.keyPath,q)}else c.createIndex(n.name,n.keyPath);g++}}for(l=0;l<f.length;l++)Td(d,f[l])||(c.deleteIndex(f[l]),h++);L(a.b,"Updated store: "+c.name+", "+g+" index created, "+h+" index deleted.")}else{c=e();for(l=0;l<d.indexes.length;l++)n=d.indexes[l],L(a.b,"Creating index: "+n.name+" multiEntry: "+n.multiEntry),n.unique||n.multiEntry?(q={unique:n.unique,multiEntry:n.multiEntry},c.createIndex(n.name,n.keyPath,q)):c.createIndex(n.name,n.keyPath);L(a.b,"Created store: "+
c.name+" keyPath: "+c.keyPath)}}x.Ya=function(a,b,c,d){var e=this.p;if(!b){b=[];for(var f=e.objectStoreNames.length-1;0<=f;f--)b[f]=e.objectStoreNames[f]}0==b.length?a(r):(b=e.transaction(b,c),b.oncomplete=function(a){d("complete",a)},b.onerror=function(a){d("error",a)},b.onabort=function(a){d("abort",a)},a(b),a=r)};x.mb=function(){this.p.close()};x.toString=function(){return"IndexedDB:"+(this.p?this.p.name+":"+this.p.version:"")};function ye(a){Error.captureStackTrace?Error.captureStackTrace(this,ye):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ConstraintError"}H(ye,Error);ye.prototype.name="ConstraintError";function ze(a){Error.captureStackTrace?Error.captureStackTrace(this,ze):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.db.InvalidKeyException"}H(ze,Error);
function Ae(a){Error.captureStackTrace?Error.captureStackTrace(this,Ae):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.db.VersionError"}H(Ae,Error);Ae.prototype.name="ydn.db.VersionError";function Be(a){Error.captureStackTrace?Error.captureStackTrace(this,Be):this.stack=Error().stack||"";a&&(this.message=String(a))}H(Be,Error);Be.prototype.name="ydn.db.InternalError";
function Ce(a){Error.captureStackTrace?Error.captureStackTrace(this,Ce):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="InvalidStateError"}H(Ce,Error);function xe(a){Error.captureStackTrace?Error.captureStackTrace(this,xe):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="InvalidAccessError"}H(xe,Error);function De(a){Error.captureStackTrace?Error.captureStackTrace(this,De):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="NotFoundError"}
H(De,Error);De.prototype.name="NotFoundError";function Ee(a){Error.captureStackTrace?Error.captureStackTrace(this,Ee):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="DataCloneError"}H(Ee,Error);function Fe(a,b){Error.captureStackTrace?Error.captureStackTrace(this,Fe):this.stack=Error().stack||"";b&&(this.message=String(b));this.message+=" :"+a.message+" ["+a.code+"]";this.name="SQLError"}H(Fe,Error);
function Ge(a,b){Error.captureStackTrace?Error.captureStackTrace(this,Ge):this.stack=Error().stack||"";b&&(this.message=String(b));this.message+=" :"+a.message;this.name="SecurityError"}H(Ge,Error);function He(a){Error.captureStackTrace?Error.captureStackTrace(this,He):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.db.SqlParseError"}H(He,Error);
function we(a){Error.captureStackTrace?Error.captureStackTrace(this,we):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.db.TimeoutError"}H(we,Error);function Ie(a){this.a=z(a)?a:4194304}x=Ie.prototype;
x.wa=function(a,b){function c(b,c){var f=b.version?parseInt(b.version,10):0,f=c.ra?isNaN(f)?1:f+1:c.version;L(e.b,a+": changing version from "+b.version+" to "+f);var g=s,h=0;b.changeVersion(b.version,f+"",function(a){e.L(function(b){g=p;for(var d=0;d<c.count();d++){var f=W(b,c.ia(d).getName()),f=f?f.hint(c.ia(d)):r;Je(e,a,c.ia(d),function(a){a&&h++},f)}if(c instanceof Ke)for(d=0;d<b.count();d++)f=b.ia(d),ae(c,f.getName())||ve(c,f)},a,b)},function(a){k(a)},function(){if(g){var f=".";h!=c.stores.length&&
(f=" but unexpected stores exists.");L(e.b,a+":"+b.version+" ready"+f);d(b)}else J(e.b,a+": changing version voided.")})}function d(a,b){z(b)?(e.v=r,g.o(b)):(e.v=a,O(g,parseFloat(f)))}var e=this,f=NaN,g=new N,h=r;try{h=y.openDatabase(a,"",a,this.a)}catch(l){"SECURITY_ERR"==l.name?(J(this.b,"SECURITY_ERR for opening "+a),h=r,this.Ub=new Ge(l)):k(l)}if(h){var f=h.version,n="database "+a+(0==h.version.length?"":" version "+h.version);b.version!=r&&b.version==h.version?(ac(e.b,"Existing "+n+" opened as requested."),
d(h)):this.L(function(a){(a=be(b,a,p))?(0==h.version.length?ac(e.b,"New "+n+" created."):b.ra?ac(e.b,"Existing "+n+" opened and schema change for "+a):ac(e.b,"Existing "+n+" opened and  schema change to version "+b.version+" for "+a),c(h,b)):(ac(e.b,"Existing "+n+" with same schema opened."),d(h))},r,h)}else d(r,this.Ub);return g};x.ka=ba("websql");x.Ub=r;x.v=r;x.Tb=function(){return this.v||r};x.b=M("ydn.db.con.WebSql");
function Le(a){var b=a.f,c="CREATE TABLE IF NOT EXISTS "+Rd(a)+" (",d=a.a,c=c+(d+" "+b+" PRIMARY KEY ");a.autoIncrement&&(c+=" AUTOINCREMENT ");for(var c=c+" ,_default_ BLOB",e=[],f=[d],g=0,h=a.indexes.length;g<h;g++){var l=a.index(g),n="";if(l.multiEntry)n=l.unique?" UNIQUE ":"",l="CREATE TABLE IF NOT EXISTS "+Fa("ydn.db.me:"+a.getName()+":"+l.getName())+" ("+d+" "+b+", "+l.a+" "+l.f+n+")",e.push(l);else{l.unique&&(n=" UNIQUE ");var q=l.a;-1==f.indexOf(q)&&(c+=", "+q+" "+l.f+n,f.push(q))}}e.push(c+
");");return e}x.nb=function(){return this.v?parseFloat(this.v.version):m};
x.L=function(a,b,c){function d(a,b){k(b)}function e(b,c){if(c&&c.rows){for(var d=0;d<c.rows.length;d++){var e=c.rows.item(d);if("__WebKitDatabaseInfoTable__"!=e.name&&"sqlite_sequence"!=e.name&&"table"==e.type){var v="sql"in e?e.sql:m;L(f.b,"Parsing table schema from SQL: "+v);for(var u=v.substr(v.indexOf("("),v.lastIndexOf(")")).match(/(?:"[^"]*"|[^,])+/g),D=m,I,v=[],da=s,S=s,ha=0;ha<u.length;ha++){var ea=u[ha].match(/\w+|"[^"]+"/g),Pa=La(ea,function(a){return a.toUpperCase()}),pa=Ca(ea[0],'"'),
ea=Ed(Pa[1]);if(-1!=Pa.indexOf("PRIMARY")&&-1!=Pa.indexOf("KEY"))C(pa)&&(!/^[\s\xa0]*$/.test(pa)&&"_ROWID_"!=pa)&&(D=pa),I=ea,-1!=Pa.indexOf("AUTOINCREMENT")&&(da=p);else if("_default_"==pa)S=p;else{var Fb="UNIQUE"==Pa[2],Pa=new Dd(pa,ea,Fb);v.push(Pa)}}if(0==e.name.lastIndexOf("ydn.db.me:",0))if((u=e.name.split(":"))&&3<=u.length){var fg=u[1],D=Qa(h,function(a){return a.getName()===fg}),u=new Dd(u[2],ea,Fb,p);0<=D?(ha=h[D],v.push(u),h[D]=new Md(ha.getName(),ha.keyPath,da,I,v,m,!S)):h.push(new Md(fg,
m,s,m,[u]))}else J(f.b,'Invalid multiEntry store name "'+e.name+'"');else u=Qa(h,function(a){return a.getName()===e.name}),0<=u?(ha=h[u].index(0),v.push(ha),h[u]=new Md(e.name,D,da,I,v,m,!S)):(v=new Md(e.name,D,da,I,v,m,!S),h.push(v))}}d=new Zd(g,h);a(d)}}var f=this,g=(c=c||this.v)&&c.version?parseFloat(c.version):m,g=isNaN(g)?m:g,h=[];b?b.executeSql("SELECT * FROM sqlite_master",[],e,d):c.readTransaction(function(b){f.L(a,b,c)},function(a){$b(f.b,"opening tx: "+a.message);k(a)},e)};
function Je(a,b,c,d,e){function f(a){b.executeSql(a,[],function(){g++;g==h.length&&(d(p),d=r)},function(b,e){g++;g==h.length&&(d(s),d=r);k(new Fe(e,"SQLError creating table: "+c.name+" "+e.message+' for executing "'+a))})}var g=0,h=Le(c),l="Create";if(e){e=Yd(c,e);if(0==e.length){L(a.b,"same table "+c.name+" exists.");d(p);d=r;return}l="Modify";J(a.b,"table: "+c.name+" has changed by "+e+" additionallly TABLE ALTERATION is not implemented, dropping old table.");h.unshift("DROP TABLE IF EXISTS "+Fa(c.name))}L(a.b,
l+" table: "+c.name+": "+h.join(";"));for(a=0;a<h.length;a++)f(h[a])}x.Ra=function(){return!!this.v};x.mb=aa();x.Ya=function(a,b,c,d){function e(a){L(h.b,h+": Tx "+c+" request cause error.");d("error",a)}function f(){d("complete",{type:"complete"})}function g(b){a(b)}var h=this;this.v===r&&(a(r),d("error",this.Ub));c==P?this.v.readTransaction(g,e,f):c==sc?this.v.changeVersion(this.v.version,this.v.version+1+"",g,e,f):this.v.transaction(g,e,f)};
function Me(a){function b(){c.b.log(Rb,"all tables in "+a+" deleted.",m)}var c=new Ie,d=new Ke;K(c.b,"deleting websql database: "+a);d=c.wa(a,d);d.U(function(){c.Ya(function(b){b.executeSql('SELECT * FROM sqlite_master WHERE type = "table"',[],function(d,g){if(g&&g.rows){for(var h=g.rows.length,l=0,n=0;n<h;n++){var q=g.rows.item(n);"__WebKitDatabaseInfoTable__"==q.name||"sqlite_sequence"==q.name||(l++,L(c.b,"deleting table: "+q.name),b.executeSql("DROP TABLE "+q.name))}K(c.b,l+' tables deleted from "'+
a+'"')}},function(a,b){k(b)})},[],Q,b)});d.Yb(function(){J(c.b,"Connecting "+a+" failed.")})}x.toString=function(){return"WebSql:"+(this.v?":"+this.v.version:"")};function Ne(a,b,c){a=["ydn.db",a];z(b)&&(a.push(b),z(c)&&(a.push(c),z(m)&&a.push(wc(m))));return a.join("^|")};function Oe(a){this.C=a||Pe}function Pe(a,b){return String(a)<String(b)?-1:String(a)>String(b)?1:0}x=Oe.prototype;x.u=r;x.C=r;x.R=r;x.Q=r;
function Qe(a,b){if(a.u==r)a.u=new Re(b),a.R=a.u,a.Q=a.u;else{var c=r;Se(a,function(a){var e=r;0<this.C(a.value,b)?(e=a.left,a.left==r&&(c=new Re(b,a),a.left=c,a==this.R&&(this.R=c))):0>this.C(a.value,b)&&(e=a.right,a.right==r&&(c=new Re(b,a),a.right=c,a==this.Q&&(this.Q=c)));return e});c&&(Se(a,function(a){a.count++;return a.parent},c.parent),Te(a,c.parent))}}function Ue(a,b){Se(a,function(a){var d=r;0<this.C(a.value,b)?d=a.left:0>this.C(a.value,b)?d=a.right:Ve(this,a);return d})}
x.clear=function(){this.Q=this.R=this.u=r};x.contains=function(a){var b=s;Se(this,function(c){var d=r;0<this.C(c.value,a)?d=c.left:0>this.C(c.value,a)?d=c.right:b=p;return d});return b};x.Ca=function(){return this.u?this.u.count:0};x.ab=function(){var a=[];$e(this,function(b){a.push(b)});return a};
function $e(a,b){if(a.u){var c,d=c=af(a);for(c=c.left?c.left:c;d!=r;)if(d.left!=r&&d.left!=c&&d.right!=c)d=d.left;else{if(d.right!=c&&b(d.value))break;var e=d,d=d.right!=r&&d.right!=c?d.right:d.parent;c=e}}}function Se(a,b,c){for(c=c?c:a.u;c&&c!=r;)c=b.call(a,c)}
function Te(a,b){Se(a,function(a){var b=a.left?a.left.height:0,e=a.right?a.right.height:0;1<b-e?(a.left.right&&(!a.left.left||a.left.left.height<a.left.right.height)&&bf(this,a.left),cf(this,a)):1<e-b&&(a.right.left&&(!a.right.right||a.right.right.height<a.right.left.height)&&cf(this,a.right),bf(this,a));b=a.left?a.left.height:0;e=a.right?a.right.height:0;a.height=Math.max(b,e)+1;return a.parent},b)}
function bf(a,b){df(b)?(b.parent.left=b.right,b.right.parent=b.parent):ef(b)?(b.parent.right=b.right,b.right.parent=b.parent):(a.u=b.right,a.u.parent=r);var c=b.right;b.right=b.right.left;b.right!=r&&(b.right.parent=b);c.left=b;b.parent=c;c.count=b.count;b.count-=(c.right?c.right.count:0)+1}
function cf(a,b){df(b)?(b.parent.left=b.left,b.left.parent=b.parent):ef(b)?(b.parent.right=b.left,b.left.parent=b.parent):(a.u=b.left,a.u.parent=r);var c=b.left;b.left=b.left.right;b.left!=r&&(b.left.parent=b);c.right=b;b.parent=c;c.count=b.count;b.count-=(c.left?c.left.count:0)+1}
function Ve(a,b){if(b.left!=r||b.right!=r){var c=r,d;if(b.left!=r){d=ff(a,b.left);Se(a,function(a){a.count--;return a.parent},d);if(d!=b.left){if(d.parent.right=d.left)d.left.parent=d.parent;d.left=b.left;d.left.parent=d;c=d.parent}d.parent=b.parent;d.right=b.right;d.right&&(d.right.parent=d);b==a.Q&&(a.Q=d)}else{d=af(a,b.right);Se(a,function(a){a.count--;return a.parent},d);if(d!=b.right){if(d.parent.left=d.right)d.right.parent=d.parent;d.right=b.right;d.right.parent=d;c=d.parent}d.parent=b.parent;
d.left=b.left;d.left&&(d.left.parent=d);b==a.R&&(a.R=d)}d.count=b.count;df(b)?b.parent.left=d:ef(b)?b.parent.right=d:a.u=d;Te(a,c?c:d)}else Se(a,function(a){a.count--;return a.parent},b.parent),df(b)?(b.parent.left=r,b==a.R&&(a.R=b.parent),Te(a,b.parent)):ef(b)?(b.parent.right=r,b==a.Q&&(a.Q=b.parent),Te(a,b.parent)):a.clear()}function af(a,b){if(!b)return a.R;var c=b;Se(a,function(a){var b=r;a.left&&(b=c=a.left);return b},b);return c}
function ff(a,b){if(!b)return a.Q;var c=b;Se(a,function(a){var b=r;a.right&&(b=c=a.right);return b},b);return c}function Re(a,b){this.value=a;this.parent=b?b:r;this.count=1}Re.prototype.left=r;Re.prototype.right=r;Re.prototype.height=1;function ef(a){return!!a.parent&&a.parent.right==a}function df(a){return!!a.parent&&a.parent.left==a};function gf(a){this.C=a||Pe}H(gf,Oe);function hf(a,b,c){if(a.u){var d;if(c instanceof Re)d=c;else if(c){if(Se(a,function(a){var b=r;0<this.C(a.value,c)?(b=a.left,d=a):0>this.C(a.value,c)?b=a.right:d=a;return b}),!d)return}else d=af(a);a=d;for(var e=d.left?d.left:d;a!=r;)if(a.left!=r&&a.left!=e&&a.right!=e)a=a.left;else{if(a.right!=e&&b(a))return;var f=a;a=a.right!=r&&a.right!=e?a.right:a.parent;e=f}b(r)}}
function jf(a,b,c){if(a.u){var d;if(c instanceof Re)d=c;else if(c){if(Se(a,oa(function(a){var b=r;0<this.C(a.value,c)?b=a.left:(0>this.C(a.value,c)&&(b=a.right),d=a);return b},a)),!d)return}else d=ff(a);a=d;for(var e=d.right?d.right:d;a!=r;)if(a.right!=r&&a.right!=e&&a.left!=e)a=a.right;else{if(a.left!=e&&b(a))return;var f=a;a=a.left!=r&&a.left!=e?a.left:a.parent;e=f}b(r)}};function X(a,b){this.key=a;this.a=b}X.prototype.toString=function(){return"ydn.db.con.simple.Node:"+this.key+(this.a!=r?":"+this.a:"")};function kf(a,b){var c=U(a.key,b.key);return 0===c?a.a!=r?b.a!=r?U(a.a,b.a):1:b.a!=r?-1:0:c};function lf(a,b,c){this.g=a;this.d=b;this.e=c;this.a={};a=this.e.keyPath;this.c=A(a)?a.join(","):a||"_ROWID_";this.a[this.c]=r;this.f=Ne(this.g,this.e.getName(),this.c)+"^|"}
function mf(a,b){var c=b||a.c;if(!a.a[c]){a.a[c]=new gf(kf);for(var d=a.d.length,e=0;e<d;e++){var f=a.d.key(e);if(f!==r&&0==f.lastIndexOf(a.f,0)){var g=zc(f.substr(a.f.length));if(c==a.c)Qe(a.a[c],new X(g));else{var h=a.d.getItem(f);if(h!==r)if(f=Qd(a.e,c),h=qe(h),h=Gd(f,h),f.multiEntry){if(A(h))for(f=0;f<h.length;f++)Qe(a.a[c],new X(h[f],g))}else Qe(a.a[c],new X(h,g))}}}}return a.a[c]}
function nf(a,b,c){for(var d in a.a){var e=a.a[d];if(e)if(d==a.c)Ue(e,new X(b));else{var f=Qd(a.e,d),f=uc(c,f.keyPath);Ue(e,new X(b,f))}}}function of(a){for(var b in a.a){var c=a.a[b];c&&c.clear()}a.a={}}
function pf(a,b,c,d){if(b==r&&(a.e.keyPath&&(b=Vd(a.e,c)),a.e.autoIncrement&&b==r)){b=a.f+wc(m);var e=qe(a.d.getItem(b));e.key_count||(e.key_count=0);e.key_count++;a.d.setItem(b,V(e));b=e.key_count}if(d)if(a.a[a.c]){if(a.a[a.c].contains(wc(b)))return r}else if(a.d.getItem(a.f+wc(b))!==r)return r;a.d.setItem(a.f+wc(b),V(c));d=b;for(var f in a.a)if(e=a.a[f])if(f==a.c)Qe(e,new X(d));else{var g=Qd(a.e,f),g=uc(c,g.keyPath);g!=r&&Qe(e,new X(d,g))}return b}
function qf(a,b){var c=a.f+wc(b),d=a.d.getItem(c);if(d===r)return 0;a.d.removeItem(c);c=qe(d);nf(a,b,c);return 1}lf.prototype.clear=function(){of(this);rf(this)};function sf(a,b){var c=a.d.getItem(a.f+wc(b)),d=m;if(c!==r)for(var d=qe(c),c=0,e=a.e.indexes.length;c<e;c++){var f=a.e.index(c);if("DATE"==f.type){var g=Gd(f,d);g&&Hd(f,d,new Date(g))}}return d;k("impl")}lf.prototype.getName=function(){return this.e.getName()};
function tf(a,b,c){b=b||a.c;a=mf(a,b);var d=r,e=r,f=0,g=s,h=s;c!=r&&(c.lower!=r&&(d=new X(c.lower)),c.upper!=r&&(e=new X(c.upper)),g=c.lowerOpen,h=c.upperOpen);hf(a,function(a){if(a!=r&&(a=a.value,!g||!(d!=r&&0==U(a.key,d.key)))){if(e!=r&&(a=U(a.key,e.key),1===a||0===a&&h))return p;f++}},d);return f}
function rf(a,b){var c=mf(a,a.c),d=r,e=r,f=0,g=[],h=[],l=s,n=s;b!=r&&(b.lower!=r&&(d=new X(b.lower)),b.upper!=r&&(e=new X(b.upper)),l=b.lowerOpen,n=b.upperOpen);hf(c,function(b){if(b!=r&&(b=b.value,!l||!(d!=r&&0==kf(b,d)))){if(e!=r){var c=kf(b,e);if(1===c||0===c&&n)return p}var c=a.f+wc(b.key),v=a.d.getItem(c);v!==r&&(a.d.removeItem(c),f++,10>g.length&&(g.push(b.key),h.push(qe(v))))}},d);if(10>g.length)for(c=0;c<g.length;c++)nf(a,g[c],h[c]);else of(a);return f}
function uf(a,b,c,d,e,f,g,h){function l(c){if(c&&(D++,!(D<g))){var d=c.value;if(e){if(da&&u!=r&&0==U(d.key,u.key))return;if(v!=r&&(c=U(d.key,v.key),-1===c||0===c&&I))return p}else{if(I&&v!=r&&0==U(d.key,v.key))return;if(u!=r&&(c=U(d.key,u.key),1===c||0===c&&da))return p}c=d.key;if(!h||q!=r&&U(q,c))d=t?d.a:c,b?n.push(d):(d=sf(a,d),n.push(d));q=c;if(z(f)&&n.length>=f)return p}}var n=[],q;c=c||a.c;var t=c!=a.c;c=mf(a,c);var v=r,u=r;z(g)||(g=0);var D=-1,I=s,da=s;d!=r&&(d.lower!=r&&(v=t&&e?new X(d.lower,
"\uffff"):new X(d.lower)),d.upper!=r&&(u=t&&!e?new X(d.upper,"\uffff"):new X(d.upper)),I=d.lowerOpen,da=d.upperOpen);e?jf(c,l,u):hf(c,l,v);return n}lf.prototype.ea=function(a,b,c,d,e){return uf(this,p,a,b,c,d,e)};lf.prototype.toString=function(){return"ydn.db.con.simple.Store:"+this.g+":"+this.e.getName()};function vf(a,b){this.h=a;this.a=b}function wf(a,b,c){jd(function(){b.call(c,this.h)},0,a);return function(){a.a("complete",r);a.a=r;a.h=r}};function xf(){this.clear()}x=xf.prototype;x.Va=function(){return this};x.setItem=function(a,b){z(this.a[a])||(this.keys.push(a.toString()),this.length=this.keys.length);this.a[a]=b};x.getItem=function(a){return z(this.a[a])?this.a[a]:r};x.removeItem=function(a){delete this.a[a];Sa(this.keys,a.toString());this.length=this.keys.length};x.length=0;x.key=function(a){a=this.keys[a];return z(a)?this.a[a]:r};x.clear=function(){this.a={};this.keys=[];this.length=0};function yf(a){this.f=a||new xf;this.c=NaN}x=yf.prototype;x.b=M("ydn.db.con.SimpleStorage");x.nb=w("c");
x.wa=function(a,b){function c(a,b){jd(function(){b?(K(d.b,d+" opening fail"),e.o(b)):(K(d.b,d+" version "+d.nb()+" open"),O(e,a))})}var d=this,e=new N;this.h=this.f.Va(a);this.ca=a;this.a=b;this.d={};var f=Ne(this.ca);this.c=NaN;var g=qe(this.h.getItem(f));z(g.version)&&!E(g.version)&&(g.version=NaN);if(g)if(g=new Zd(g),be(this.a,g))if(!this.a.ra&&!isNaN(g.version)&&this.a.version>g.version)c(NaN,new Ae("existing version "+g.version+" is larger than "+this.a.version));else{var h=this.a.version;this.c=
z(h)?h:g.version+1;for(h=0;h<this.a.count();h++)var l=this.a.ia(h);if(this.a instanceof Ke)for(h=0;h<g.count();h++)l=g.ia(h),ve(this.a,l);h=this.a.toJSON();h.version=this.c||NaN;this.h.setItem(f,V(h));c(g.version||NaN)}else{for(h=0;h<this.a.count();h++)l=this.a.ia(h);this.c=g.version||NaN;c(this.c)}else g=b.toJSON(),this.c=1,g.version=this.c,this.h.setItem(f,V(g)),c(NaN);return e};x.Ra=function(){return!!this.ca};x.Tb=function(){return this.h||r};x.ka=ba("memory");x.mb=aa();
x.Ya=function(a,b,c,d){a(new vf(this,function(a,b){d(a,b)}))};x.L=function(a){jd(function(){var b=Ne(this.ca),b=this.h.getItem(b),b=new Zd(b);a(b)},0,this)};function zf(a,b){var c=W(a.a,b);c?a.d[b]||(a.d[b]=new lf(a.ca,a.h,c)):k(new Cd('store name "'+b+'" not found.'));return a.d[b]}x.toString=function(){return"SimpleStorage:"+this.ka()+":"+(this.ca+":"+this.c)};function Af(){yf.call(this,this)}H(Af,yf);Af.prototype.Va=function(){return window.localStorage};Af.prototype.ka=ba("localstorage");function Bf(a){var b=new Af,c=new Ke;b.wa(a,c);b.L(function(a){for(var c=0;c<a.stores.length;c++)zf(b,a.stores[c].name).clear()})}function Cf(){yf.call(this,this)}H(Cf,yf);Cf.prototype.Va=function(){return window.sessionStorage};Cf.prototype.ka=ba("sessionstorage");
function Df(a){var b=new Cf,c=new Ke;b.wa(a,c);b.L(function(a){for(var c=0;c<a.stores.length;c++)zf(b,a.stores[c].name).clear()})};var U=ue&&ue.cmp?oa(ue.cmp,ue):Ec;function Ef(a,b,c,d){this.a=a;this.c=[];this.d=[];this.g=[];this.q=0;this.Ab=this.I=s;b&&(this.c=Ta(b.c),this.d=Ta(b.d));c!=r&&(this.c[0]=c);d!=r&&(this.d[0]=d);this.e=function(){k(new Cd)};this.f=function(){k(new Cd)};0<this.a.length&&Ff(this)}x=Ef.prototype;x.q=0;x.I=s;x.Ab=s;x.b=M("ydn.db.Cursor");
function Gf(a,b){b.D=function(c,e,f){c==r&&(L(a.b,"cursor "+b+" finished."),a.I=p);a.c[0]=c;a.d[0]=e;a.g[0]=f;a.q++;a.I?(L(a.b,a+" DONE."),a.e(),Hf(a)):(L(a.b,a+" new cursor position {"+(a.d[0]!=r?a.c[0]+", "+a.d[0]:a.c[0])+"}"),a.e(a.c[0]))};b.Ja=function(b){a.f(b);Hf(a);a.I=p};var c=a.d[0]!=r?", "+a.d[0]:"",c=a.c[0]!=r?" resume from {"+a.c[0]+c+"}":"";L(a.b,b+c+" opening");b.xa(a.c[0],a.d[0])}
function If(a){function b(b){var f=a.a[b];f.D=function(l,q,t){d++;l==r&&(L(a.b,"cursor "+f+" finished."),a.I=p);a.c[b]=l;a.d[b]=q;a.g[b]=t;e[b]=!f.c?l:q;if(d==c){d=0;if(a.I)a.q++,L(a.b,a+" DONE."),a.e(),Hf(a);else if(l=e.reduce(function(a,b){return a===r?b:1==U(b,a)?b:a},r),0==U(l,e[0]))L(a.b,a+" new cursor position {"+(a.d[0]!=r?a.c[0]+", "+a.d[0]:a.c[0])+"}"),a.e(a.c[0]);else for(q=0;q<c;q++)-1==U(e[q],l)?(t=a.a[q],!t.c?t.la(l):t.Sa(l)):d++;Ra(e)}};f.Ja=function(b){a.f(b);Hf(a);a.I=p;d=0};var l=
a.d[b]!=r?", "+a.d[b]:"",l=a.c[b]!=r?" resume from {"+a.c[b]+l+"}":"";L(a.b,f+l+" opening");f.xa(a.c[b],a.d[b])}for(var c=a.a.length,d=0,e=[],f=0;f<c;f++)b(f)}function Ff(a){var b=a.a.length;1==b?Gf(a,a.a[0]):1<b?If(a):k(new Cd("no cursors"))}x.Ca=w("q");x.jc=function(a){return this.c[a||0]};x.N=function(a){a=a||0;return this.a[a].c?this.d[a]:this.c[a]};x.aa=function(a){a=a||0;return!this.a[a].Fa?this.g[a]:this.N(a)};x.advance=function(a){for(var b=0;b<this.a.length;b++)this.a[b].advance(a)};
x.update=function(a,b){return this.a[b||0].update(a)};x.clear=function(a){return this.a[a||0].clear()};function Jf(a){a.Ab=p;L(a.b,a+": exit");Hf(a);for(var b=0;b<a.a.length;b++)a.a[b].X();L(a.b,a+" disposed");Ra(a.g);Ra(a.a)}function Hf(a){a.d=La(a.d,function(a){if(a!=r)return md(a)});a.c=La(a.c,function(a){if(a!=r)return md(a)})}
x.toString=function(){for(var a="[",b=0;b<this.c.length;b++)0<b&&(a+=" "),this.a[b]?a+=this.a[b].toString():(a+="cursor~{"+this.c[b],a=this.d[b]!=r?a+(";"+this.d[b]+"}"):a+"}");return"Cursor "+(a+"]")};function Kf(a,b,c,d,e){if(!(b instanceof R)){var f;C(b)&&z(c)?f=yd(b,c,d,e):b!=r?b instanceof R?f=b:F(b)?f=new R(b.lower,b.upper,b.lowerOpen,b.upperOpen):k(new T("Invalid key range: "+b+" of type "+typeof b)):f=r;b=f}this.a=b;this.ja=a}Kf.prototype.ja="";Kf.prototype.wb=function(a){if(this.ja!=a.ja)return r;a=this.a!=r&&a.a!=r?this.a.wb(a.a):this.a||a.a;return new Kf(this.ja,a)};function Y(a,b,c,d,e,f,g){C(a)||k(new TypeError("store name"));this.K=a;this.f=b;this.k=g;this.e=!!this.f;this.a=z(f)?f:!!C(this.f);ga(this.a)||k(new TypeError("key_only"));z(d)&&!ga(d)&&k(new TypeError("reverse"));z(e)&&!ga(e)&&k(new TypeError("unique"));a="next";d&&e?a="prevunique":d?a="prev":e&&(a="nextunique");this.g=a;(d=ud(c))&&k(new T("Invalid key range: "+d));this.d=sd(c);this.c=r}Y.prototype.a=p;
function Lf(a,b,c){3<arguments.length&&k(new T("too many argument"));Y.call(this,a,m,b,c,m,p)}H(Lf,Y);function Mf(a,b,c,d,e){C(b)||k(new T("index name must be string"));Y.call(this,a,b,c,d,e,p)}H(Mf,Y);function Nf(a,b,c){3<arguments.length&&k(new T("too many argument"));Y.call(this,a,m,b,c,m,s)}H(Nf,Y);function Of(a,b,c,d,e){C(b)||k(new T("index name must be string"));Y.call(this,a,b,c,d,e,s)}H(Of,Y);x=Y.prototype;x.bc=function(){return this.c?this.c.I?"done":this.c.Ab?"rest":"busy":"init"};x.b=M("ydn.db.Iterator");
x.Jc=w("K");x.P=w("f");x.xc=w("d");x.Hc=function(){return this.d?this.d instanceof td?this.d:td.bound(this.d.lower,this.d.upper,this.d.lowerOpen,this.d.upperOpen):r};x.Kc=w("a");x.wc=w("e");x.toJSON=function(){return{store:this.K,index:this.f,keyRange:this.d?nd(this.d):r,direction:this.g}};x.toString=function(){var a=z(this.k)?":"+this.k.join(","):z(this.f)?":"+this.f:"",a=a+vd(this.d),b=this.e?"Index":"",b=b+(this.a?"Key":"Value");return b+"Iterator:"+this.K+a};
x.Gc=function(){return this.c?this.c.jc():m};x.Ic=function(){return this.c?this.c.N():m};x.Cc=function(a,b){var c=new Y(this.K,this.f,this.d,this.Qb(),this.lb(),this.a,this.k);c.c=new Ef([],r,a,b);return c};x.Mc=function(a,b){var c=new Y(this.K,this.f,this.d,!this.Qb(),this.lb(),this.a,this.k);a!=r&&(c.c=new Ef([],r,a,b));return c};x.count=function(){return this.c?this.c.Ca():NaN};
x.stores=function(){var a=[this.K];if(this.j)for(var b=0;b<this.j.length;b++)0<=Ja(a,this.j[b].a)||a.push(this.j[b].a);return a};x.Qb=function(){return"prev"===this.g||"prevunique"===this.g};x.lb=function(){return"nextunique"===this.g||"prevunique"===this.g};
function Pf(a,b,c,d,e){var f=e||2;e=[d.c(b,c,a.K,a.k||a.f,a.d,a.g,a.a,f)];for(var g=0,h=a.j?a.j.length:0;g<h;g++){var l=a.j[g];if(l.c&&l.value!=r){var n;n=!a.e?td.only(l.value):sd(rd([l.value]));l=d.c(b,c,l.a,l.c,n,a.g,a.a,f);e.push(l)}}b="";a.c&&(b=" by resuming "+a.c);a.c=new Ef(e,a.c);L(a.b,c+" "+a+" created "+a.c+b);return a.c}x.Lc=function(){"busy"==this.bc()&&k(new ie("busy"));this.c=r};function Qf(a,b){this.ca=a;this.a=b}Qf.prototype.b=M("ydn.db.crud.req.RequestExecutor");Qf.prototype.ca="";Qf.prototype.toString=ba("RequestExecutor");Qf.prototype.P=function(a,b){return(A(b)?Sd(a,b):Qd(a,b)).getName()};G("ydn.db.con.IStorage.prototype.transaction",aa().prototype.transaction);function Rf(a,b,c,d){"transaction"in a?(this.j=a,this.e=this.g=r):"objectStore"in a?(this.j=r,this.g=a.db,this.e=a,this.e.db.objectStoreNames.contains(b)||k(new ce('store "'+b+'" not in transaction.'))):k(new ce("storage instance require."));this.k=b;this.s=c;this.X=d;this.c=[];this.a=0;this.f=s}Rf.prototype.b=M("ydn.db.con.IdbCursorStream");Rf.prototype.f=s;Rf.prototype.c=[];
function Sf(a,b){a.a++;b.onsuccess=function(b){if(b=b.target.result){if(ia(a.X)){var d=b.value;a.X(b.primaryKey,a.s!=r?d[a.s]:d)}else J(a.b,"sink gone, dropping value for: "+b.primaryKey);if(b&&0<a.c.length)b["continue"](a.c.shift());else a.a--,0==a.a&&a.V&&a.V()}};b.onerror=function(){J(a.b,"seeking fail. "+("error"in b?b.error.name+":"+b.error.message:""));a.a--;0==a.a&&a.V&&a.V()}}function Tf(a,b){0==a.c.length&&0==a.a?b():a.V=b}
function Uf(a){if(!a.f){var b=function(b,c){a.e=r;"complete"!==b&&J(a.b,c.name+":"+c.message);L(a.b,a+" transaction "+b)},c=function(b){var c=a.c.shift();L(a.b,a+" transaction started for "+c);b=b.objectStore(a.k);Sf(a,b.openCursor(c))};a.e?(L(a.b,a+" using existing tx."),c(a.e)):a.g?(L(a.b,a+" creating tx from IDBDatabase."),a.d=a.g.transaction([a.k],P),a.d.oncomplete=function(a){b("complete",a)},a.d.onerror=function(a){b("error",a)},a.d.onabort=function(a){b("abort",a)}):a.j?(L(a.b,a+" creating tx from ydn.db.con.IStorage."),
a.f=p,a.j.transaction(function(b){a.f=s;c(b)},[a.k],P,b)):k(new fe("no way to create a transaction provided."))}};function Vf(a,b,c){a&&a instanceof Z?(this.Qa=a,this.ba=r):a&&a.db?(this.Qa=r,a.db?this.ba=new Rf(a,this.a,this.va,oa(this.V,this)):k(new T("Invalid IndexedDB Transaction."))):k(new T("ydn.db.Streamer: First argument requires storage or transaction instance required."));C(b)||k(new T("a store name required."));this.a=b;z(c)&&!C(c)&&k(new T("index name must be a string."));this.va=c;this.ba=r;this.T=[];this.ha=[];this.Ea=s}x=Vf.prototype;x.b=M("ydn.db.Streamer");x.Qa=r;x.h=r;x.Sb=r;x.ha=[];x.T=[];
x.ba=r;x.Fc=function(a){this.Sb=a};function Wf(a){var b=0<a.T.length;if(b&&!a.Ea&&ia(a.Sb)){var c=function(){Wf(a)},d=a.ha.shift(),e=a.T.shift(),b=0<a.T.length,c=a.Sb(d,e,b?c:r);b&&!c&&Wf(a)}}x.Ea=s;x.Pc=function(a){if(this.ba){this.Ea=p;var b=this;Tf(this.ba,function(){a(b.ha,b.T);b.ha=[];b.T=[];b.Ea=s})}else a(this.ha,this.T),this.ha=[],this.T=[]};x.V=function(a,b){this.ha.push(a);this.T.push(b);Wf(this)};
x.push=function(a,b){this.Ea&&k(new ie("push not allowed after a collection is started"));if(2<=arguments.length)this.V(a,b);else{if(!this.ba){this.Qa||k(new ie("Database is not setup."));var c=this.Qa.j();c?"indexeddb"===c?this.ba=new Rf(this.Qa,this.a,this.va,oa(this.V,this)):k(new ee(c)):k(new ie("Database is not connected."))}c=this.ba;c.c.push(a);Uf(c)}};x.P=w("va");x.toString=function(){return"Streamer:"+this.a+(this.va||"")};function Xf(a,b,c,d,e,f,g,h){Fc.call(this);this.pb=c;this.g=d;this.c=C(this.g);this.l=e||r;this.d=a;this.ta=b;this.m="prev"==f||"prevunique"==f;this.unique="nextunique"==f||"prevunique"==f;this.O=f;this.Fa=g;this.j=h}H(Xf,Fc);x=Xf.prototype;x.pb="";x.O="";x.l=r;x.unique=s;x.m=s;x.Fa=p;x.Ja=function(){k(new Cd)};x.D=function(){k(new Cd)};x.qa=function(){this.d=r};x.toString=function(){return"Cursor:"+this.pb+(z(this.g)?":"+this.g:"")+"["+(this.d?"":"~")+this.ta+"]"};function Yf(a,b){a!=r&&!("push"in a)&&k(new ce);this.a=a||r;this.g=b;this.f=0}Yf.prototype.b=M("ydn.db.algo.AbstractSolver");Yf.prototype.a=r;Yf.prototype.c=function(a){A(a)||k(new TypeError("iterators must be array"));2>a.length&&k(new RangeError("ZigzagMerge require at least 2 iterators, but  only "+a.length+" found."));for(var b=0;b<a.length;b++)a[b]instanceof Y||k(new TypeError("item at iterators "+b+" is not an iterator."));return s};
function Zf(a,b,c){var d,e=d!=r;if(!z(d)){d=c[0];for(var e=d!=r,f=1;e&&f<c.length;f++)if(c[f]==r||0!=U(c[f],d))e=s}return e&&(a.f++,a.a&&a.a.push(d),z(a.g)&&a.f>=a.g)?[]:b}Yf.prototype.d=function(){return[]};function $f(a,b,c,d,e,f,g,h){Xf.call(this,a,b,c,d,e,f,g,h);this.t=r}H($f,Xf);x=$f.prototype;x.b=M("ydn.db.core.req.IDBCursor");x.Xa=function(a){(a=a.target.result)?this.D(a.key,this.c?a.primaryKey:m,a.value):this.D()};x.t=r;
x.xa=function(a,b){function c(a,b,c){h.t=g;h.D(a,h.c?b:m,c);h.t&&(h.t.onsuccess=oa(h.Xa,h));g=r}var d=this+" opening ";a!=r&&(d+="{"+a,d=b!=r?d+(";"+b+"}"):d+"}");L(this.b,d);var d=this.l,e=this.d.objectStore(this.pb),f=C(this.g)?e.index(this.g):r,g;g=!this.Fa?f?this.O!=r?f.openCursor(d,this.O):d!=r?f.openCursor(d):f.openCursor():this.O!=r?e.openCursor(d,this.O):d!=r?e.openCursor(d):e.openCursor():f?this.O!=r?f.openKeyCursor(d,this.O):d!=r?f.openKeyCursor(d):f.openKeyCursor():this.O!=r?e.openCursor(d,
this.O):d!=r?e.openCursor(d):e.openCursor();var h=this;g.onerror=function(){h.Ja(g.error)};a!=r?g.onsuccess=function(d){if(d=d.target.result){var e=ue.cmp(d.key,a),f=h.m?-1:1;if(e==f)c(d.key,d.primaryKey,d.value);else if(e==-f)d["continue"](a);else if(b!=r)if(ue.cmp(d.primaryKey,b)==f)c(d.key,d.primaryKey,d.value);else d["continue"]();else d["continue"]()}else c()}:(h.t=g,h.t.onsuccess=oa(h.Xa,h))};x.eb=function(){return!!this.t};
x.update=function(a){var b=this.t.result;if(b){var c=new N;a=b.update(a);a.onsuccess=function(a){O(c,a.target.result)};a.onerror=function(a){c.o(a)};return c}k(new xe("cursor gone"))};x.clear=function(){var a=this.t.result;if(a){var b=new N,a=a["delete"]();a.onsuccess=function(){O(b,1)};a.onerror=function(a){b.o(a)};return b}k(new xe("cursor gone"))};x.Ta=function(a,b){L(this.b,this+" restarting.");this.xa(b,a)};x.advance=function(a){var b=this.t.result;if(1==a)b["continue"]();else b.advance(a)};
x.Sa=function(a){var b=this.t.result,c=ue.cmp(a,b.primaryKey);1!=c&&k(new Cd('continuing primary key "'+a+'" must higher than current primary key "'+b.primaryKey+'"'));var d=this;this.t.onsuccess=function(e){if(b=e.target.result)if(c=ue.cmp(b.primaryKey,a),0==c||1==c&&!d.m||-1==c&&d.m)d.t.onsuccess=oa(d.Xa,d),d.D(b.key,d.c?b.primaryKey:m,b.value);else b["continue"]();else d.t.onsuccess=oa(d.Xa,d),d.D()};b["continue"]()};x.la=function(a){var b=this.t.result;if(a!=r)b["continue"](a);else b["continue"]()};
x.qa=function(){$f.z.qa.call(this);this.t=r};x.toString=function(){return"IDB"+$f.z.toString.call(this)};function ag(a,b){Qf.call(this,a,b)}H(ag,Qf);x=ag.prototype;x.b=M("ydn.db.crud.req.IndexedDb");x.Wa=function(a,b,c,d){function e(b){var h=a.objectStore(d[b]).count();h.onsuccess=function(a){f[b]=a.target.result;b++;b==d.length?(c(f),c=r):e(b)};h.onerror=function(a){c(a,p);c=r}}var f=[];L(this.b,b+" countStores: "+d);0==d.length?(c([]),c=r):e(0)};
x.ub=function(a,b,c,d,e,f){a=a.objectStore(d);L(this.b,b+" addObject: "+d+" "+f);var g;g=z(f)?a.add(e,f):a.add(e);g.onsuccess=function(a){c(a.target.result)};g.onerror=function(){c(g.error,p)}};x.Kb=function(a,b,c,d,e,f){a=a.objectStore(d);L(this.b,b+' putObject to store "'+d+'" '+(z(f)?" key: "+f:""));b=z(f)?a.put(e,f):a.put(e);b.onsuccess=function(a){c(a.target.result)};b.onerror=function(a){"DataError"==a.name&&(a=V(e),a=new ze(d+": "+a.substring(0,70)));c(a,p)}};
x.vb=function(a,b,c,d,e,f){function g(a){var b;b=f!=r?n.add(e[a],f[a]):n.add(e[a]);b.onsuccess=function(b){l++;h[a]=b.target.result;l==e.length?c(h):(b=a+10,b<e.length&&g(b))};b.onerror=function(f){l++;"DataError"==f.name?new ze('put to "'+d+'": '+a+" of "+e.length):"DataCloneError"==f.name&&new Ee('put to "'+d+'": '+a+" of "+e.length);c(b.error,p)}}var h=[],l=0,n=a.objectStore(d);L(this.b,b+" addObjects: "+d+" "+e.length+" objects");if(0<e.length)for(a=0;10>a&&a<e.length;a++)g(a);else c([])};
x.Lb=function(a,b,c,d,e,f){function g(a){var b;b=f!=r?t.put(e[a],f[a]):t.put(e[a]);b.onsuccess=function(b){l++;h[a]=b.target.result;l==e.length?n?c(h,p):c(h):(b=a+10,b<e.length&&g(b))};b.onerror=function(f){l++;J(q.b,"request result "+f.name+' error when put to "'+d+'" for object "'+re(e[a])+'" at index '+a+" of "+e.length+" objects.");h[a]=b.error;n=p;l==e.length?n?c(h,p):c(h):(f=a+10,f<e.length&&g(f))}}var h=[],l=0,n=s,q=this,t=a.objectStore(d);L(this.b,b+" put "+e.length+' objects to store "'+
d+'"');if(0<e.length)for(a=0;10>a&&a<e.length;a++)g(a);else c([])};
x.Jb=function(a,b,c,d,e){function f(b){var c=e[b],u=c.a,D=a.objectStore(u),I;I=D.keyPath===r?D.put(d[b],c.id):D.put(d[b]);I.onsuccess=function(a){l++;h[b]=a.target.result;l==d.length?g():(a=b+10,a<d.length&&f(a))};I.onerror=function(a){l++;J(q.b,"request result "+a.name+' error when put keys to "'+u+'" for object "'+re(d[b])+'" at index '+b+" of "+d.length+" objects.");h[b]=I.error;n=p;l==d.length?g():(a=b+10,a<d.length&&f(a))}}function g(){n?c(h,p):c(h)}var h=[],l=0,n=s,q=this;L(this.b,b+" putByKeys: of "+
d.length+" objects");if(0<d.length)for(b=0;10>b&&b<d.length;b++)f(b);else g()};x.ib=function(a,b,c,d,e){a=a.objectStore(d);L(this.b,b+" clearById: "+d+" "+e);var f=a.openCursor(td.only(e));f.onsuccess=function(a){var b=a.target.result;b?(b=b["delete"](),b.onsuccess=function(){c(1)},b.onerror=function(){c(a,p)}):c(m)};f.onerror=function(){c(f.error,p)}};
x.Nb=function(a,b,c,d){function e(b){if(b>=d.length)c(f,g);else{d[b].a!=h&&(h=d[b].a,l=a.objectStore(h));var q=l.openCursor(td.only(d[b].id));q.onsuccess=function(a){b++;(a=a.target.result)?(a=a["delete"](),a.onsuccess=function(){f++;e(b)},a.onerror=function(){g=p;e(b)}):e(b)};q.onerror=function(){c(q.error,p)}}}var f=0,g=s,h,l;L(this.b,b+" removeByKeys: "+d.length+" keys");e(0)};
x.jb=function(a,b,c,d,e){var f=this,g=a.objectStore(d),h=g.count(e),l=b+" clearByKeyRange: "+d+" "+e;L(this.b,l);h.onsuccess=function(a){var b=a.target.result;a=g["delete"](e);a.onsuccess=function(){c(b)};a.onerror=function(){c(h.error,p)}};h.onerror=function(a){L(f.b,"count error "+l);c(a,p)}};x.zb=function(a,b,c,d,e){a=a.objectStore(d);L(this.b,b+" clearByKeyRange: "+d+" "+e);var f=a["delete"](e);f.onsuccess=function(){c(m)};f.onerror=function(){c(f.error,p)}};
x.Mb=function(a,b,c,d,e,f){var g=this;a=a.objectStore(d).index(e);var h=b+" clearByIndexKeyRange: "+d+":"+e+" "+f;L(this.b,h);var l=a.openCursor(f),n=0;l.onsuccess=function(a){var b=a.target.result;if(b){var d=b["delete"]();d.onsuccess=function(){n++;b["continue"]()};d.onerror=function(){L(g.b,"error "+h);k(d.error)}}else c(n)};l.onerror=function(){c(l.error,p)}};
x.Ua=function(a,b,c,d){var e=d.length,f=0;L(this.b,b+" clearByStores: "+d);for(b=0;b<e;b++){var g=a.objectStore(d[b]).clear();g.onsuccess=function(){f++;f==e&&c(f)};g.onerror=function(){f++;f==e&&c(g.error,p)}}};
function bg(a,b,c,d,e,f,g,h,l,n,q){var t=[];b=b.objectStore(e);var v=tc(h,q);e=c+" listByKeyRange: "+e+(f?":"+f:"")+(g?V(g):"");h&&(e+=" reverse");q&&(e+=" unique");L(a.b,e);var u;u=f?b.index(f).openCursor(g,v):b.openCursor(g,v);var D=s;u.onsuccess=function(b){if(b=b.target.result)if(!D&&0<n)D=p,b.advance(n);else if(t.push(b.value),t.length<l)b["continue"]();else L(a.b,c+" success "+t.length+" objects"),d(t);else L(a.b,c+" success "+t.length+" objects"),d(t)};u.onerror=function(){d(u.error,p)}}
x.Ia=function(a,b,c,d,e,f,g,h){bg(this,a,b,c,d,r,e,f,g,h)};x.Ha=function(a,b,c,d,e,f,g,h,l,n){bg(this,a,b,c,d,e,f,g,h,l,n)};x.Eb=function(a,b,c,d,e,f,g,h){var l=[];a=a.objectStore(d);f=tc(f);L(this.b,b+" keysByKeyRange: "+d+" "+e);var n=a.openCursor(e,f),q=s;n.onsuccess=function(a){if(a=a.target.result)if(!q&&0<h)q=p,a.advance(h);else if(l.push(a.key),l.length<g)a["continue"]();else c(l);else c(l)};n.onerror=function(){c(n.error,p)}};
x.Db=function(a,b,c,d,e,f,g,h,l,n){var q=[];a=a.objectStore(d).index(e);L(this.b,b+" keysByStore: "+d+":"+e+" "+f);var t=a.openKeyCursor(f,tc(g,n)),v=s;t.onsuccess=function(a){if(a=a.target.result)if(!v&&0<l)v=p,a.advance(l);else{if(q.push(a.primaryKey),q.length<h)a["continue"]()}else c(q)};t.onerror=function(){c(t.error,p)}};
x.$a=function(a,b,c,d,e){var f=this;L(this.b,b+" getById: "+d+":"+e);var g=a.objectStore(d).get(e);g.onsuccess=function(a){L(f.b,b+" record "+e+(a.target.result!=r?" ":" not ")+" exists.");c(a.target.result)};g.onerror=function(){c(g.error,p)}};
x.Fb=function(a,b,c,d,e){function f(a){if(e[a]==r)if(h++,g[a]=m,h==n)c(g);else{var b=a+10;b<n&&f(b)}var d;try{d=l.get(e[a])}catch(u){"DataError"==u.name&&k(new ze(e[a])),k(u)}d.onsuccess=function(b){h++;g[a]=b.target.result;h==n?c(g):(b=a+10,b<n&&f(b))};d.onerror=function(){h++;c(d.error,p)}}var g=[],h=0,l=a.objectStore(d),n=e.length;L(this.b,b+" listByIds: "+d+":"+n+" ids");if(0<n)for(a=0;10>a&&a<n;a++)f(a);else c([])};
x.Gb=function(a,b,c,d){function e(b){var l=d[b],n=a.objectStore(l.a).get(l.id);n.onsuccess=function(a){g++;f[b]=a.target.result;g==d.length?c(f):(a=b+10,a<d.length&&e(a))};n.onerror=function(){g++;c(n.error,p)}}var f=[],g=0;L(this.b,b+" listByKeys: "+d.length+" ids");if(0<d.length)for(b=0;10>b&&b<d.length;b++)e(b);else c([])};
x.oa=function(a,b,c,d,e,f){a=a.objectStore(d);b=b+" countKeyRange: "+d+(f?":"+f:"")+(e?":"+V(e):"");L(this.b,b);var g;f!=r?(f=a.index(f),g=e!=r?f.count(e):f.count()):g=e!=r?a.count(e):a.count();g.onsuccess=function(a){c(a.target.result)};g.onerror=function(){c(g.error,p)}};function cg(a,b){Qf.call(this,a,b)}H(cg,ag);cg.prototype.b=M("ydn.db.core.req.IndexedDb");cg.prototype.e=function(a,b,c,d,e,f){dg(this,1,a,b,c,d,e,f)};
function dg(a,b,c,d,e,f,g,h){var l=[],n=1==b,q=d+" "+(n?"keys":2==b?"values":3==b?"count":"")+"ByIterator "+f;0<g&&(q+=" limit "+g);K(a.b,q);var t=Pf(f,c,d,a,b);t.f=function(b){K(a.b,"error:"+q);Jf(t);e(b,p)};var v=0,u=s,D=s;t.e=function(b){D||(L(a.b,q+" starting"),D=p);if(b!=r){var c=f.e?t.N():b;!u&&0<h?(t.advance(h),u=p):(v++,n?l.push(b):l.push(f.a?c:t.aa()),!z(g)||v<g?t.a[0].la(m):(K(a.b,"success:"+q+" "+l.length+" records"),Jf(t),e(l)))}else K(a.b,"success:"+q+" "+l.length+" records"),Jf(t),e(l)}}
cg.prototype.d=function(a,b,c,d,e,f){dg(this,2,a,b,c,d,e,f)};cg.prototype.c=function(a,b,c,d,e,f,g,h){var l=W(this.a,c);z(d)&&(d=this.P(l,d));return new $f(a,b,c,d,e,f,g,h)};function eg(){this.a=s}eg.prototype.a=s;function gg(a,b,c,d,e,f,g,h,l){Xf.call(this,a,b,d,e,f,g,h,l);this.kb=this.La=this.sa=m;this.Ib=this.k=this.e=this.a=r;this.f=new eg}H(gg,Xf);x=gg.prototype;x.b=M("ydn.db.core.req.SimpleCursor");x.eb=function(){return!!this.d};x.update=function(){k(new Ad)};x.advance=function(a){function b(b){d++;if(!b||d>=a)return hg(c,b)}var c=this,d=this.a?-1:0;this.m?jf(this.e,b,this.a):hf(this.e,b,this.a)};
x.la=function(a){if(a!=r){var b=this,c=new X(a),d=function(c){b.a=c;if(!c)return hg(b,c);var d=U(c.value.key,a);if(b.m){if(1!=d)return hg(b,c)}else if(-1!=d)return hg(b,c)};this.m?jf(this.e,d,c):hf(this.e,d,c)}else this.advance(1)};function ig(a){jd(function(){a.f.a?(a.f.a=s,this.D(this.sa,this.La,this.kb),ig(this)):(this.Ib(),this.Ib=r)},0,a)}
function hg(a,b){if(a.a=b){var c=b.value;if(a.l)if(!a.m&&a.l.upper!=r){var d=U(c.key,a.l.upper);if(1==d||0==d&&a.l.upperOpen)a.a=r}else if(a.m&&a.l.lower!=r&&(d=U(c.key,a.l.lower),-1==d||0==d&&a.l.lowerOpen))a.a=r;if(a.a){if(a.unique&&(a.sa!=r&&c.key!=r)&&0==U(a.sa,c.key))return;a.sa=c.key;a.La=a.c?c.a:a.sa;2==a.j&&(!a.Fa?a.kb=sf(a.k,a.La):a.kb=a.La)}}a.a||(a.sa=m,a.La=m,a.kb=m);return a.f.a=p}
x.xa=function(a,b){var c=r;this.l&&(this.m?this.l.upper!=r&&(c=new X(this.l.upper)):this.l.lower!=r&&(c=new X(this.l.lower)));a!=r&&(c=this.c?new X(a,b):new X(a));this.Ib=wf(this.d,function(d){function e(c){var d=c.value,e=d.key;if(c&&e!=r)if(a!=r)if(b!=r){if(d=d.a,d!=r&&0==U(a,e)&&0==U(b,d))return}else{if(0==U(a,e))return}else if(this.l&&(!this.m&&(this.l.lowerOpen&&this.l.lower!=r)&&(d=U(e,this.l.lower),0==d)||this.m&&(this.l.upperOpen&&this.l.upper!=r)&&(d=U(e,this.l.upper),0==d)))return;return hg(this,
c)}this.k=zf(d,this.pb);this.e=mf(this.k,this.g);this.m?jf(this.e,oa(e,this),c):hf(this.e,oa(e,this),c);ig(this)},this)};x.clear=function(){k(new Ad)};x.Ta=function(){k(new Ad)};x.Sa=function(){k(new Ad)};x.toString=function(){return"Simple"+gg.z.toString.call(this)};function jg(a,b){Qf.call(this,a,b)}H(jg,Qf);x=jg.prototype;x.b=M("ydn.db.crud.req.SimpleStore");x.Db=function(a,b,c,d,e,f,g,h,l){b=b+" keysByIndexKeyRange "+d+":"+e+" "+(f?re(f):"");L(this.b,b);var n=wf(a,function(a){a=zf(a,d).ea(e,f,g,h,l);c(a);n();n=r},this)};x.Eb=function(a,b,c,d,e,f,g,h){b=b+" keysByKeyRange "+d+" "+(e?re(e):"");L(this.b,b);var l=wf(a,function(a){a=zf(a,d).ea(r,e,f,g,h);c(a);l();l=r},this)};x.Jb=function(a,b,c,d,e){kg(this,a,b,c,r,d,e,p,s)};
function kg(a,b,c,d,e,f,g,h,l){L(a.b,c+" "+(h?"put":"add")+"Object"+(l?"":"s "+f.length+" objects"));var n=wf(b,function(a){var b;if(l)b=zf(a,e),a=pf(b,g,f,!h),a!=r?d(a):(a=re(a),a=new ye(a),d(a,p));else{for(var c=e,u=[],D=s,I=g||{},da=0;da<f.length;da++){var S;e?S=I[da]:(c=g[da],S=c.id,c=c.a);if(!b||b.getName()!=c)b=zf(a,c);S=pf(b,S,f[da],!h);S!=r||(D=p);u.push(S)}d(u,D)}n();n=r},a)}x.ub=function(a,b,c,d,e,f){kg(this,a,b,c,d,e,f,s,p)};x.Kb=function(a,b,c,d,e,f){kg(this,a,b,c,d,e,f,p,p)};
x.vb=function(a,b,c,d,e,f){kg(this,a,b,c,d,e,f,s,s)};x.Lb=function(a,b,c,d,e,f){kg(this,a,b,c,d,e,f,p,s)};x.$a=function(a,b,c,d,e){var f=wf(a,function(a){a=sf(zf(a,d),e);c(a);f();f=r},this)};function lg(a,b,c,d,e){var f=wf(b,function(a){for(var b=[],l=s,n=d,q,t=0;t<e.length;t++){var v=e[t];v instanceof ld&&(n=v,v=n.id,n=n.a);if(!q||q.getName()!=n)q=zf(a,n);v=sf(q,v);v!=r||(l=p);b.push(v)}c(b,l);f();f=r},a)}x.Fb=function(a,b,c,d,e){lg(this,a,c,d,e)};x.Gb=function(a,b,c,d){lg(this,a,c,r,d)};
x.Ia=function(a,b,c,d,e,f,g,h){var l=b+" listByKeyRange "+d+" "+(e?re(e):"");L(this.b,l);var n=wf(a,function(a){a=zf(a,d);a=uf(a,s,r,e,f,g,h);K(this.b,l+" "+a.length+" records found.");c(a);n();n=r},this)};x.Ha=function(a,b,c,d,e,f,g,h,l,n){var q=b+" listByIndexKeyRange "+d+" "+(f?re(f):"");L(this.b,q);var t=wf(a,function(a){a=uf(zf(a,d),s,e,f,g,h,l,n);K(this.b,q+" "+a.length+" records found.");c(a);t();t=r},this)};
x.ib=function(a,b,c,d,e){var f=b+" removeById "+d+" "+e;L(this.b,f);var g=this,h=wf(a,function(a){a=qf(zf(a,d),e);K(g.b,"success "+f+(0==a?" [not found]":""));c(a);h();h=r},this)};x.Nb=function(a,b,c,d){var e=b+" removeByKeys "+d.length+" keys";L(this.b,e);var f=this,g,h=0,l=wf(a,function(a){for(var b=0;b<d.length;b++){var t=d[b].a,v=d[b].id;if(!g||g.getName()!=t)g=zf(a,t);h+=qf(g,v)}K(f.b,"success "+e+h+" deleted");c(h);l();l=r},this)};x.zb=function(a,b,c,d,e){this.jb(a,b,c,d,e)};
x.jb=function(a,b,c,d,e){var f=b+" removeByKeyRange "+(e?V(e):"");L(this.b,f);var g=this,h=wf(a,function(a){a=rf(zf(a,d),e);K(g.b,f+" deleted "+a+" records.");c(a);h();h=r},this)};x.Mb=function(a,b,c,d,e,f){var g=b+" removeByIndexKeyRange "+(f?V(f):"");L(this.b,g);var h=this,l=wf(a,function(a){a=zf(a,d);for(var b=a.ea(e,f),t=b.length,v=0;v<t;v++)qf(a,b[v]);K(h.b,g+" deleted "+t+" records.");c(t);l();l=r},this)};
x.Ua=function(a,b,c,d){var e=b+" clearByStores";L(this.b,e);var f=wf(a,function(a){for(var b=0;b<d.length;b++)zf(a,d[b]).clear();K(this.b,"success "+e);c(d.length);f();f=r},this)};x.Wa=function(a,b,c,d){var e=b+" countStores";L(this.b,e);var f=wf(a,function(a){for(var b=[],l=0;l<d.length;l++){var n=zf(a,d[l]);b.push(tf(n))}K(this.b,"success "+e);c(b);f();f=r},this)};
x.oa=function(a,b,c,d,e,f){var g=b+" count"+(f!=r?"Index":"")+(e!=r?"KeyRange":"Store");L(this.b,g);var h=wf(a,function(a){a=tf(zf(a,d),f,e);K(this.b,"success "+g);c(a);h();h=r},this)};function mg(a,b){Qf.call(this,a,b)}H(mg,jg);mg.prototype.e=function(a,b,c,d,e,f){var g=[],h=b+" keysByIterator:"+d,l=this;L(this.b,h);var n=Pf(d,a,b,this);n.f=function(a){J(l.b,"error:"+h);c(a,p)};var q=0,t=s;n.e=function(a){a!=r?!t&&0<f?(n.advance(f),t=p):(q++,g.push(a),!z(e)||q<e?n.advance(1):(Jf(n),L(l.b,"success:"+h),c(g))):(Jf(n),L(l.b,"success:"+h),c(g))}};
mg.prototype.d=function(a,b,c,d,e,f){var g=[],h=b+" listByIterator"+d,l=this;L(this.b,h);var n=Pf(d,a,b,this);n.f=function(a){K(l.b,"error:"+h);Jf(n);c(a,s)};var q=0,t=s;n.e=function(a){if(a!=r){a=d.e?n.N():a;var b=n.aa();!t&&0<f?(n.advance(f),t=p):(q++,g.push(d.a?a:b),!z(e)||q<e?n.advance(1):(K(l.b,"success:"+h),Jf(n),c(g)))}else L(l.b,"success:"+h),Jf(n),c(g)}};mg.prototype.c=function(a,b,c,d,e,f,g,h){var l=W(this.a,c);z(d)&&(d=this.P(l,d));return new gg(a,b,0,c,d,e,f,g,h)};function ng(a,b,c,d,e,f,g,h,l){Xf.call(this,a,b,d,e,f,g,h,l);this.a=c;this.k=C(e)?Qd(c,e):r;this.e=this.f=m}H(ng,Xf);x=ng.prototype;x.b=M("ydn.db.core.req.WebsqlCursor");function og(a,b){a.f=m;a.e=m;a.s=m;if(z(b))if(F(b)){var c=Id(b[a.a.c],a.a.type);if(a.c){var d;d=Qd(a.a,a.g).type;a.e=c;a.f=Id(b[a.g],d)}else a.f=c;a.s=a.Fa?c:pg(b,a.a)}else a.s=b}
function qg(a,b,c){Qd(a.a,a.g);var d=[],e=a.g,f=a.l,g=a.f;if(f!=r){var h=f.lower,l=f.upper,n=f.lowerOpen,f=f.upperOpen;a.m?l=l!=r&&-1==U(l,g)?l:g:h=h!=r&&1==U(h,g)?h:g;f=h!=r&&l!=r?od(h,l,!!n,!!f):h!=r?td.lowerBound(h,!!n):td.upperBound(l,!!f)}else f=a.m?td.upperBound(g):td.lowerBound(g);e=Pd(a.a,d,a.j,e,f,a.m,a.unique);c=a.m?td.upperBound(c,s):td.lowerBound(c,s);c=Pd(a.a,d,a.j,a.a.c,c,a.m,a.unique);e.n=e.n?e.n+(" AND "+c.n):c.n;c="SELECT "+e.select+" FROM "+e.pa+(e.n?" WHERE "+e.n:"")+(e.group?" GROUP BY "+
e.group:"")+" ORDER BY "+e.Y;c+=" LIMIT 1";L(a.b,a+": continuePrimary:  SQL: "+c+" : "+V(d));a.d.executeSql(c,d,function(c,d){0<d.rows.length?og(a,d.rows.item(0)):og(a);b.call(a,a.f,a.e,a.s);b=r},function(c,d){J(a.b,"get error: "+d.message);a.Ja(d);og(a);b.call(a,a.e,a.f,a.s);b=r;return s})}
function rg(a,b,c,d,e){var f=a.k.c,g=a.k.a,h=a.a.a,l=a.m?" <":" >",l=d?l+" ":l+"= ";d=xd(c,a.k.type);e=xd(e,a.a.type);var n="";a.l?(a=Pd(a.a,b,a.j,f,a.l,a.m,a.unique),a.n+=" AND ",n=g+l+"?",b.push(d)):(c=a.m?pd(c,p):qd(c,p),a=Pd(a.a,b,a.j,f,c,a.m,a.unique),n=a.n,a.n="");a.n+="("+n+" OR ("+g+" = ? AND "+h+l+"?))";b.push(d);b.push(e);return"SELECT "+a.select+" FROM "+a.pa+" WHERE "+a.n+(a.group?" GROUP BY "+a.group:"")+" ORDER BY "+a.Y}
function sg(a,b,c,d){var e,f,g,h;if(a.l!=r)if(e=a.l.lower,f=a.l.upper,g=a.l.lowerOpen,h=a.l.upperOpen,a.m)if(f!=r){var l=U(c,f);-1==l?(f=c,h=d):0==l&&(h=d||h)}else f=c,h=d;else e!=r?(l=U(c,e),1==l?(e=c,g=d):0==l&&(g=d||g)):(e=c,g=d);else a.m?(f=c,h=d):(e=c,g=d);c=new R(e,f,!!g,!!h);b=Pd(a.a,b,a.j,a.k?a.k.c:a.a.c,c,a.m,a.unique);b="SELECT "+b.select+" FROM "+b.pa+(b.n?" WHERE "+b.n:"")+(b.group?" GROUP BY "+b.group:"")+" ORDER BY "+b.Y;a.c&&(b+=", "+a.a.a+(a.m?"DESC":"ASC"));return b}
function tg(a,b,c,d,e,f){var g=!d;d=[];f!=r?c=rg(a,d,c,g,f):c!=r?c=sg(a,d,c,g):(c=Od(a.a,d,a.j,!a.c?a.a.c:a.k.c,a.l,a.m,a.unique),a.c&&(c+=", "+a.a.a+" ASC"));c+=" LIMIT 1";0<e&&(c+=" OFFSET "+e);L(a.b,a+": continue:  SQL: "+c+" : "+V(d));a.d.executeSql(c,d,function(c,d){0<d.rows.length?og(a,d.rows.item(0)):og(a);b.call(a,a.f,a.e,a.s);b=r},function(c,d){J(a.b,"get error: "+d.message);a.Ja(d);og(a);b.call(a,a.e,a.f,a.s);b=r;return s})}x.eb=function(){return!!this.d};
x.update=function(a){this.eb()||k(new xe);var b=new N,c=this,d=this.e;a=Xd(c.a,a,d);var e="REPLACE INTO "+Rd(this.a)+" ("+a.Zb.join(", ")+") VALUES ("+a.hc.join(", ")+") ON CONFLICT FAIL";L(c.b,this+': clear "'+e+'" : '+V(a.A));this.d.executeSql(e,a.A,function(){O(b,d)},function(a,d){J(c.b,"get error: "+d.message);b.o(d);return s});return b};
x.advance=function(a){var b=this.f,c=this.e,d=p;if(this.f!=r&&(!this.c||this.e!=r))a-=1,d=s;tg(this,function(a,d,g){var h=b!=r&&a!=r&&0==U(b,a);if(this.c){var l=d!=r&&c!=r&&0==U(d,c);h&&l&&k(new Cd("current: "+b+";"+c+" next: "+a+";"+d))}else h&&k(new Cd("current: "+b+" next: "+a));this.D(a,d,g)},this.f,d,a,this.e)};x.la=function(a){a!=r?tg(this,this.D,a,p):this.advance(1)};x.xa=function(a,b){tg(this,this.D,a,s,0,b)};
x.clear=function(){this.eb()||k(new xe);var a=new N,b=this,c=this.a.c,c="DELETE FROM "+Rd(this.a)+" WHERE "+c+" = ?",d=[this.e];L(b.b,this+': clear "'+c+'" : '+V(d));this.d.executeSql(c,d,function(b,c){O(a,c.rowsAffected)},function(c,d){J(b.b,"get error: "+d.message);a.o(d);return s});return a};x.Ta=function(a,b){L(this.b,this+" restarting.");this.xa(b,a)};
x.Sa=function(a){var b=U(a,this.e);(0==b||1==b&&this.m||-1==b&&!this.m)&&k(new ie(this+" to continuePrimaryKey  from "+this.e+" to "+a+" on "+this.O+" direction is wrong"));qg(this,this.D,a)};x.toString=function(){return"WebSql"+ng.z.toString.call(this)};function ug(a,b){Qf.call(this,a,b)}H(ug,Qf);x=ug.prototype;x.b=M("ydn.db.crud.req.WebSql");function pg(a,b){var c=a._default_?qe(a._default_):{};if(b.keyPath!=r){var d=Id(a[b.keyPath],b.type);d!=r&&Wd(b,c,d)}for(d=0;d<b.indexes.length;d++){var e=b.indexes[d],f=e.c;if(!("_default_"==f||e.e||e.multiEntry)&&"DATE"==e.type)f=Id(a[f],e.type),z(f)&&Hd(e,c,f)}return c}x.Eb=function(a,b,c,d,e,f,g,h){vg(this,a,b,c,p,d,m,e,f,g,h,s)};x.Db=function(a,b,c,d,e,f,g,h,l,n){vg(this,a,b,c,p,d,e,f,g,h,l,n)};
function vg(a,b,c,d,e,f,g,h,l,n,q,t){var v=[],u=W(a.a,f),D=u.c;g!=r&&g!==D&&Qd(u,g);f=[];g=Od(u,f,e?1:2,g||D,h,l,t);E(n)&&(g+=" LIMIT "+n);E(q)&&(g+=" OFFSET "+q);var I=c+" SQL: "+g+" ;params= "+V(f);L(a.b,I);b.executeSql(g,f,function(b,c){for(var f=c.rows.length,g=0;g<f;g++){var h=c.rows.item(g);e?v[g]=Id(h[D],u.type):h!=r&&(v[g]=pg(h,u))}K(a.b,"success "+I);d(v)},function(b,c){J(a.b,"error: "+I+c.message);d(c,p);return s})}x.ub=function(a,b,c,d,e,f){wg(this,a,b,c,p,p,d,[e],[f])};
x.Kb=function(a,b,c,d,e,f){wg(this,a,b,c,s,p,d,[e],[f])};x.vb=function(a,b,c,d,e,f){wg(this,a,b,c,p,s,d,e,f)};
function wg(a,b,c,d,e,f,g,h,l){function n(b,g){h[b]==r&&k(new Bd("inserting "+(z(h[b])?"null":"undefined")+"object "+(1==h.length?"":" at "+b+" of "+h.length)+' "'+re(h[b])));var S;S=z(l)?Xd(q,h[b],l[b]):Xd(q,h[b]);var ha=t+Rd(q)+" ("+S.Zb.join(", ")+") VALUES ("+S.hc.join(", ")+");",ea=c+" SQL: "+ha+" PARAMS: "+S.A+" REQ: "+b+" of "+h.length;L(a.b,ea);g.executeSql(ha,S.A,function(e,l){function ha(b,d){var e=t+Fa("ydn.db.me:"+q.getName()+":"+b.getName())+" ("+q.a+", "+b.a+") VALUES (?, ?)",f=[xd(ea,
q.type),d];L(a.b,c+" multiEntry "+e+" "+f);g.executeSql(e,f,aa(),function(b,c){J(a.b,"multiEntry index insert error: "+c.message);return s})}u++;for(var ea=z(S.key)?S.key:l.insertId,Zb=0,Vh=q.indexes.length;Zb<Vh;Zb++){var Xe=q.index(Zb);if(Xe.multiEntry)for(var Ye=uc(h[b],Xe.keyPath),Wh=(!Ye?0:Ye.length)||0,Ze=0;Ze<Wh;Ze++)ha(Xe,Ye[Ze])}f?(K(a.b,"success "+D),d(ea)):(v[b]=ea,u==h.length?(K(a.b,"success "+D),d(v)):(Zb=b+2,Zb<h.length&&n(Zb,e)))},function(c,g){u++;if(6==g.code){g.name="ConstraintError";
if(f)K(a.b,"success "+ea),d(g,p);else if(v[b]=r,u==h.length)L(a.b,"success "+D),d(v);else{var l=b+2;l<h.length&&n(l,c)}return e&&f?p:s}J(a.b,"error: "+g.message+" "+D);d(g,p);return s})}var q=W(a.a,g),t=e?"INSERT INTO ":"INSERT OR REPLACE INTO ",v=[],u=0,D=c+" inserting "+h.length+" objects.";if(0<h.length)for(g=0;2>g&&g<h.length;g++)n(g,b);else K(a.b,"success"),d([])}x.Lb=function(a,b,c,d,e,f){wg(this,a,b,c,s,s,d,e,f)};
x.Jb=function(a,b,c,d,e){if(0==e.length)c([]);else{for(var f=[],g=0,h=0,l=this,n=function(n,q){var t=[];L(l.b,"put "+q.length+" objects to "+n);for(var v=Ud(W(l.a,n)),u=v?m:[],D=0;D<q.length;D++)t.push(d[q[D]]),v||u.push(e[q[D]].id);wg(l,a,b,function(a,b){if(b)g++,g==h&&c(a,p);else{for(var d=0;d<q.length;d++)f[q[d]]=a[d];g++;g==h&&c(f)}},s,s,n,t,u)},q="",t=[],v=[],u=0;u<e.length;u++){var D=e[u].a,I=e[u].id;D!=q?(h++,0<t.length&&n(q,t),t=[u],v=[I],q=D):(t.push(u),v.push(I))}0<t.length&&n(q,t)}};
x.$a=function(a,b,c,d,e){var f=W(this.a,d),g=this;d=f.a;e=[xd(e,f.type)];d="SELECT * FROM "+Rd(f)+" WHERE "+d+" = ?";var h=b+" SQL: "+d+" PARAMS: "+e;L(this.b,h);a.executeSql(d,e,function(a,b){if(0<b.rows.length){var d=b.rows.item(0);d!=r?(d=pg(d,f),c(d)):(K(g.b,"success: "+h),c(m))}else K(g.b,"success no result: "+h),c(m)},function(a,b){J(g.b,"error: "+h+" "+b.message);c(b,p);return s})};
x.Fb=function(a,b,c,d,e){function f(a,d){var v=n.a,u=[xd(e[a],n.type)],D="SELECT * FROM "+Rd(n)+" WHERE "+v+" = ?";L(g.b,"SQL: "+D+" PARAMS: "+u);d.executeSql(D,u,function(d,t){l++;if(0<t.rows.length){var v=t.rows.item(0);v!=r&&(h[a]=pg(v,n))}else h[a]=m;l==e.length?(K(g.b,"TxNo:"+b+"success "+D),c(h)):(v=a+10,v<e.length&&f(v,d))},function(d,n){l++;J(g.b,"error: "+D+" "+n.message);if(l==e.length)K(g.b,"TxNo:"+b+"success "+D),c(h);else{var t=a+10;t<e.length&&f(t,d)}return s})}var g=this,h=[],l=0,n=
W(this.a,d);if(0<e.length)for(d=0;10>d&&d<e.length;d++)f(d,a);else K(g.b,"success"),c([])};x.Ia=function(a,b,c,d,e,f,g,h){vg(this,a,b,c,s,d,m,e,f,g,h,s)};x.Ha=function(a,b,c,d,e,f,g,h,l,n){vg(this,a,b,c,s,d,e,f,g,h,l,n)};
x.Gb=function(a,b,c,d){function e(a,b){var q=d[a],t=W(f.a,q.a),v=A(q.id)?q.id.join("^|"):q.id instanceof Date?+q.id:q.id,q=t.a,v=[xd(v,t.type)],u="SELECT * FROM "+Rd(t)+" WHERE "+q+" = ?";L(f.b,"SQL: "+u+" PARAMS: "+v);b.executeSql(u,v,function(b,n){h++;if(0<n.rows.length){var q=n.rows.item(0);q!=r&&(g[a]=pg(q,t))}else g[a]=m;h==d.length?(L(f.b,"success "+u),c(g)):(q=a+10,q<d.length&&e(q,b))},function(a,b){J(f.b,"error: "+u+" "+b.message);c(b,p);return s})}var f=this,g=[],h=0;if(0<d.length)for(b=
0;10>b&&b<d.length;b++)e(b,a);else L(this.b,"success"),c([])};
x.Ua=function(a,b,c,d){function e(a,b){function l(a){a="DELETE FROM  "+Fa("ydn.db.me:"+n.getName()+":"+a.getName());L(f.b,"SQL: "+a);b.executeSql(a,[])}var n=W(f.a,d[a]),q="DELETE FROM  "+Rd(n);L(f.b,"SQL: "+q+" PARAMS: []");b.executeSql(q,[],function(b){a==d.length-1?(L(f.b,"success "+q),c(d.length)):e(a+1,b)},function(a,b){J(f.b,"error: "+q+" "+b.message);c(b,p);return s});for(var t=0,v=n.indexes.length;t<v;t++){var u=n.index(t);u.multiEntry&&l(u)}}var f=this;0<d.length?e(0,a):(L(this.b,"success"),
c(0))};
x.Nb=function(a,b,c,d){function e(n){if(n>=d.length)L(f.b,"success "+l),c(g,h);else{var q=W(f.a,d[n].a),t=xd(d[n].id,q.type),v=" WHERE "+q.a+" = ?",u="DELETE FROM "+Rd(q)+v,D=b+" SQL: "+u+" PARAMS: "+[t];a.executeSql(u,[t],function(){g++;e(n)},function(a,b){J(f.b,"error: "+D+b.message);h=p;e(n);return s});n++;for(var u=function(c){c="DELETE FROM  "+Fa("ydn.db.me:"+q.getName()+":"+c.getName())+v;L(f.b,b+NaN+c);a.executeSql(c,[t])},I=0,da=q.indexes.length;I<da;I++){var S=q.index(I);S.multiEntry&&u(S)}}}
var f=this,g=0,h=s,l=b+" removeByKeys: "+d.length+" keys";L(this.b,l);e(0)};
x.ib=function(a,b,c,d,e){function f(c){c="DELETE FROM  "+Fa("ydn.db.me:"+g.getName()+":"+c.getName())+n;L(l.b,b+NaN+c);a.executeSql(c,[h])}var g=W(this.a,d),h=xd(e,g.type),l=this,n=" WHERE "+g.a+" = ?";d="DELETE FROM "+Rd(g)+n;var q=b+" SQL: "+d+" PARAMS: "+[h];L(this.b,q);a.executeSql(d,[h],function(a,b){L(l.b,"success "+q);c(b.rowsAffected)},function(a,b){J(l.b,"error: "+q+b.message);c(b,p);return s});d=0;for(e=g.indexes.length;d<e;d++){var t=g.index(d);t.multiEntry&&f(t)}};
x.zb=function(a,b,c,d,e){xg(this,a,b,c,d,m,e)};x.jb=function(a,b,c,d,e){xg(this,a,b,c,d,m,e)};x.Mb=function(a,b,c,d,e,f){xg(this,a,b,c,d,e,f)};
function xg(a,b,c,d,e,f,g){function h(d){d="DELETE FROM  "+Fa("ydn.db.me:"+l.getName()+":"+d.getName())+t;L(a.b,c+NaN+d);b.executeSql(d,q)}var l=W(a.a,e);e="DELETE FROM "+Rd(l);var n=[],q=[],t="";g!=r&&(z(f)?(f=Qd(l,f),wd(f.a,f.type,g,q,n)):wd(l.a,l.type,g,q,n),t=" WHERE "+q.join(" AND "));e+=t;var v=c+" SQL: "+e+" PARAMS: "+n;L(a.b,v);b.executeSql(e,n,function(b,c){L(a.b,"success "+v);d(c.rowsAffected)},function(b,c){J(a.b,"error: "+v+c.message);d(c,p);return s});g=0;for(f=l.indexes.length;g<f;g++)e=
l.index(g),e.multiEntry&&h(e)}x.Wa=function(a,b,c,d){function e(b){var l="SELECT COUNT(*) FROM "+Fa(d[b]);L(f.b,"SQL: "+l+" PARAMS: []");a.executeSql(l,[],function(a,q){var t=q.rows.item(0);g[b]=parseInt(t["COUNT(*)"],10);b++;L(f.b,b+". success "+l);b==d.length?c(g):e(b)},function(a,b){J(f.b,"error: "+l+" "+b.message);c(b,p);return s})}var f=this,g=[];0==d.length?(L(this.b,"success"),c(0)):e(0);return c};
x.oa=function(a,b,c,d,e,f,g){var h=this,l=[];d=Od(W(this.a,d),l,3,f,e,s,g);var n=b+" SQL: "+d+" PARAMS: "+l;L(this.b,n);a.executeSql(d,l,function(a,b){var d=b.rows.item(0);L(h.b,"success "+n);c(yg(d))},function(a,b){J(h.b,"error: "+n+b.message);c(b,p);return s});return c};function zg(a,b){Qf.call(this,a,b)}H(zg,ug);zg.prototype.b=M("ydn.db.core.req.WebSql");zg.prototype.e=function(a,b,c,d,e,f){Ag(this,a,b,c,d,1,e,f)};zg.prototype.d=function(a,b,c,d,e,f){Ag(this,a,b,c,d,2,e,f)};
function Ag(a,b,c,d,e,f,g,h){var l=[],n=c+" "+(1==f?"keys":2==f?"values":3==f?"count":"")+"ByIterator "+e;0<g&&(n+=" limit "+g);K(a.b,n);var q=Pf(e,b,c,a,f);q.f=function(b){K(a.b,"error:"+n);Jf(q);d(b,p)};var t=0,v=s;q.e=function(b){if(z(b)){var c=q.N(),I=q.aa();!v&&0<h?(q.advance(h),v=p):(t++,l.push(1==f?b:e.e&&e.a?c:I),!z(g)||t<g?q.a[0].la(m):(Jf(q),K(a.b,"success:"+n+" "+l.length+" records"),d(l)))}else Jf(q),K(a.b,"success:"+n+" "+l.length+" records"),d(l)}}
zg.prototype.c=function(a,b,c,d,e,f,g,h){var l=W(this.a,c);z(d)&&(d=this.P(l,d));return new ng(a,b,l,c,d,e,f,g,h)};function Bg(a){a?ia(a.abort)?a.abort():ia(a.executeSql)?a.executeSql("ABORT",[],aa(),ba(p)):k(new de):k(new Ce("No active transaction"))};/*
 _try.
*/
function Cg(a,b,c){this.h=a;this.c=0;this.a=[];this.ga=this.d=r;this.r=new Dg(b);this.tb=c||0}x=Cg.prototype;x.r=r;x.tb=0;x.b=M("ydn.db.tr.Serial");x.Wb=function(){return this.r.c};x.Wc=function(){return this.r.a&&!this.r.d?this.r.a:r};G("ydn.db.tr.Serial.prototype.getTx",Cg.prototype.Wc);x=Cg.prototype;x.ga=r;x.type=function(){return this.h.j()};x.cc=ba(s);function Eg(a,b,c,d,e){L(a.b,"push tx queue["+a.a.length+"]");a.a.push({Za:b,J:c,mode:d,F:e})}x.pc=function(){K(this.b,this+": aborting");Bg(this.ga)};
x.Ma=function(a,b,c,d){var e=C(b)?[b]:b;if(B(e)){0==e.length&&k(new T("number of store names must more than 0"));for(var f=0;f<e.length;f++)C(e[f])||k(new T("store name at "+f+" must be string but found "+e[f]+" of type "+typeof e[f]))}else k(new T("store names must be an array"));var g=z(c)?c:P,h=this;if(this.r.a||(!this.h.a||!this.h.a.Ra())&&0<(this.d!==r))Eg(this,a,b,g,d);else{var l=Fg(this.r);this.d=d?[d]:[];this.tb&&this.Wb()>=this.tb&&k(new Bd("Exceed maximum number of transactions of "+this.tb));
this.h.transaction(function(c){var d=h.r;d.a=c;d.d=s;d.J=b;d.mode=g;d.c++;d.F=r;l=Fg(h.r);ac(h.b,l+" BEGIN "+V(b)+" "+g);a(h);for(a=r;h.cc();)c=h.a.shift(),c.F&&h.d.push(c.F),ac(h.b,"pop tx queue"+(h.a.length+1)+" reusing T"+h.Wb()),c.Za()},e,g,function(a,b){"complete"==a?ac(h.b,l+" COMMITTED"):ac(h.b,l+" COMMITTED with "+a);try{for(var c;c=h.d.shift();)c(a,b)}catch(d){k(d)}finally{c=h.r,c.a?(c.a=r,c.J=r,c.mode=r,ia(c.F)&&c.F(a,b),c.F=r):J(c.b,c+" has no TX to be unlocked for "+a),(c=h.a.shift())&&
h.Ma(c.Za,c.J,c.mode,c.F)}h.c=0})}};x.Xb=ba(s);x.i=function(a,b,c,d,e){d=d||P;var f=this,g;if(f.r.a&&!f.r.d&&this.Xb(c,d)){var h=f.r.a;f.c++;g=Fg(f.r)+"R"+f.c;K(f.b,g+" BEGIN");b(h,g,function(b,c){f.ga=h;c?(K(f.b,g+" ERROR"),a.o(b)):(K(f.b,g+" SUCCESS"),O(a,b));f.ga=r});K(f.b,g+" END");b=r}else f.Ma(function(){var c=f.r.a;f.c++;g=Fg(f.r)+"R"+f.c;K(f.b,g+" BEGIN");b(c,g,function(b,d){f.ga=c;d?(K(f.b,g+" ERROR"),a.o(b)):(K(f.b,g+" SUCCESS"),O(a,b));f.ga=r});K(f.b,g+" END");b=r},c,d,e)};x.getName=function(){return this.h.getName()};
x.toString=function(){return"Serial:"+Fg(this.r)+(this.ga?"*":"")};function Gg(a,b){Cg.call(this,a,b)}H(Gg,Cg);Gg.prototype.b=M("ydn.db.tr.AtomicSerial");Gg.prototype.i=function(a,b,c,d,e){var f,g,h=new N;h.B(function(a){g=s;f=a},function(a){g=p;f=a});Gg.z.i.call(this,h,b,c,d,function(b,c){if(g===p)a.o(f);else if(g===s)O(a,f);else{var d=new we;a.o(d)}e&&(e(b,c),e=m)})};function Hg(a,b,c){this.h=a;this.c=b;this.a=c;this.d=r}Hg.prototype.b=M("ydn.db.tr.DbOperator");Hg.prototype.e=function(){this.a.pc()};function $(a){a.d||(a.d=a.h.Hb());return a.d}Hg.prototype.toString=function(){return"TxStorage:"+this.h.getName()};function Ig(a,b,c){Hg.call(this,a,b,c)}H(Ig,Hg);x=Ig.prototype;x.b=M("ydn.db.crud.DbOperator");
x.count=function(a,b,c,d){var e=pc(),f=this,g,h,l;if(z(a))if(A(a)){(z(c)||z(b))&&k(new T("too many arguments."));g=a;for(b=0;b<g.length;b++)ae(this.c,g[b])||k(new T('store name "'+g[b]+'" at '+b+" not found."));K(this.b,"countStores: "+V(g));this.a.i(e,function(a,b,c){$(f).Wa(a,b,c,g)},g,P)}else C(a)?(ae(this.c,a)||k(new T('store name "'+a+'" not found.')),z(d)&&!ga(d)&&k(new TypeError('unique value "'+d+'" must be boolean, but found '+typeof d+".")),g=[a],C(b)?(h=b,F(c)?((b=ud(c))&&k(new T("invalid key range: "+
re(c)+" "+b)),l=sd(c)):(c!=r&&k(new T("invalid key range: "+re(c)+" of type "+typeof c)),l=r)):F(b)||!z(b)?F(b)?((c=ud(b))&&k(new T("invalid key range: "+re(b)+" "+c)),l=sd(b)):(b!=r&&k(new T("key range must be  an object but found "+re(b)+" of type "+typeof b)),l=r):k(new T("key range must be an object, but "+re(c)+" of type "+typeof b+" found.")),K(this.b,"countKeyRange: "+g[0]+" "+(h?h:"")+V(l)),this.a.i(e,function(a,b,c){$(f).oa(a,b,c,g[0],l,h,!!d)},g,P)):k(new T("Invalid store name or store names."));
else{(z(c)||z(b))&&k(new T("too many arguments."));g=$d(this.c);var n=new N;K(this.b,"countStores: "+V(g));this.a.i(e,function(a,b,c){$(f).Wa(a,b,c,g)},g,P);e.B(function(a){a=Ma(a,function(a,b){return b+a});O(n,a)},function(a){n.o(a)});return n}return e};
x.ya=function(a,b){var c=this,d=pc();if(a instanceof ld){var e=a.a;if(!ae(this.c,e)){if(this.c.H())return nc(m);k(new T("Store: "+e+" not found."))}var f=a.id;K(this.b,"getById: "+e+":"+f);this.a.i(d,function(a,b,d){$(c).$a(a,b,d,e,f)},[e],P)}else if(C(a)&&z(b)){if(!W(this.c,a)){if(this.c.H())return nc(m);k(new T('Store name "'+a+'" not found.'))}if(b instanceof td||b instanceof R){var g=new N;g.B(function(a){O(d,a[0])},function(a){d.o(a)});var h=ud(b);h&&k(new T("invalid key range: "+b+" "+h));var l=
sd(b);K(this.b,"getById: "+a+":"+V(l));this.a.i(g,function(b,d,e){$(c).Ia(b,d,e,a,l,s,1,0)},[a],P)}else K(this.b,"getById: "+a+":"+b),this.a.i(d,function(d,e,f){$(c).$a(d,e,f,a,b)},[a],P)}else k(new T("get require valid input arguments."));return d};
x.keys=function(a,b,c,d,e,f){var g=this,h,l,n=r,q=s,t=W(this.c,a);C(a)||k(new T("store name must be a string, but "+a+" of type "+typeof a+" is not."));this.c.H()||(t||k(new T('store name "'+a+'" not found.')),C(b)&&!Qd(t,b)&&k(new T('index "'+b+'" not found in store "'+a+'".')));if(this.c.H()&&!t)return nc([]);t=new N;if(C(b)){var v=ud(c);v&&k(new T("invalid key range: "+c+" "+v));n=sd(c);E(d)?h=d:(z(d)&&k(new T("limit must be a number")),h=100);E(e)?l=e:(z(e)&&k(new T("offset must be a number")),
l=0);z(f)&&(ga?q=f:k(new T("reverse must be a boolean")));K(this.b,"keysByIndexKeyRange: "+a);this.a.i(t,function(c,d,e){$(g).Db(c,d,e,a,b,n,q,h,l,s)},[a],P)}else F(b)?((v=ud(b))&&k(new T("invalid key range: "+re(b)+" "+v)),n=sd(b)):(b!=r&&k(new TypeError("invalid key range: "+re(b)+" of type "+typeof b)),n=r),E(c)?h=c:(z(c)&&k(new T("limit must be a number")),h=100),E(d)?l=d:(z(d)&&k(new T("offset must be a number")),l=0),z(e)&&(ga(e)?q=e:k(new T("reverse must be a boolean"))),K(this.b,"keysByKeyRange: "+
a),this.a.i(t,function(b,c,d){$(g).Eb(b,c,d,a,n,q,h,l)},[a],P);return t};
x.A=function(a,b,c,d,e,f){var g=this,h=pc(),l,n,q=s;if(C(a)){if(!W(this.c,a)){if(this.c.H())return nc([]);k(new De(a))}if(A(b))(z(c)||z(d))&&k(new T("too many input arguments")),K(this.b,"listByIds: "+a+" "+b.length+" ids"),this.a.i(h,function(c,d,e){$(g).Fb(c,d,e,a,b)},[a],P);else if(C(b)){var t=ud(c);t&&k(new T("invalid key range: "+c+" "+t));var v=sd(c);z(d)?E(d)?l=d:k(new T("limit must be a number.")):l=100;z(e)?E(e)?n=e:k(new T("offset must be a number.")):n=0;ga(f)?q=f:z(f)&&k(new T("reverse must be a boolean, but "+
f));K(this.b,"listByIndexKeyRange: "+a+":"+b);this.a.i(h,function(c,d,e){$(g).Ha(c,d,e,a,b,v,q,l,n,s)},[a],P)}else v=r,F(b)?((t=ud(b))&&k(new T("invalid key range: "+b+" "+t)),v=sd(b)):b!=r&&k(new TypeError('expect key range object, but found "'+re(b)+'" of type '+typeof b)),z(c)?E(c)?l=c:k(new T("limit must be a number, but "+c+" is "+typeof c)):l=100,z(d)?E(d)?n=d:k(new T("offset must be a number, but "+d+" is "+typeof d)):n=0,z(e)&&(ga(e)?q=e:k(new T("reverse must be a boolean, but "+e+" is "+
typeof e))),K(this.b,(v?"listByKeyRange: ":"listByStore: ")+a),this.a.i(h,function(b,c,d){$(g).Ia(b,c,d,a,v,q,l,n)},[a],P)}else if(A(a))if(a[0]instanceof ld){c=[];for(d=0;d<a.length;d++){e=a[d].a;if(!ae(this.c,e)){if(this.c.H())return h=[],h[a.length-1]=m,nc(h);k(new T("Store: "+e+" not found."))}0<=Ja(c,e)||c.push(e)}K(this.b,"listByKeys: "+V(c)+" "+a.length+" keys");this.a.i(h,function(b,c,d){$(g).Gb(b,c,d,a)},c,P)}else k(new T("first argumentmust be array of ydn.db.Key, but "+a[0]+" of "+typeof a[0]+
" found."));else k(new T("first argument "+a+" is invalid."));return h};
x.qb=function(a,b,c){var d=C(a)?a:F(a)?a.name:m;C(d)||k(new T("store name "+d+" must be a string, but "+typeof d));var e=W(this.c,d);e?this.c.H()&&F(a)&&(a=Nd(a),(a=Yd(e,a))&&k(new de(a))):(this.c.H()||k(new T('store name "'+d+'" not found.')),e=Nd(F(a)?a:{name:d}),K(this.b,"Adding object store: "+d),Jg(this.h,e));a=pc();var f=this;e||k(new T('store name "'+d+'" not found.'));C(e.keyPath)&&z(c)&&k(new T("key must not be provided while the store uses in-line key."));!e.keyPath&&(!e.autoIncrement&&
!z(c))&&k(new T("out-of-line key must be provided."));if(A(b))K(this.b,"addObjects: "+d+" "+b.length+" objects"),this.a.i(a,function(a,e,g){$(f).vb(a,e,g,d,b,c)},[d],Q),e.da&&a.U(function(a){hd(f.h,new Kg(Lg,f.h,e.getName(),a,b))});else if(F(b)){var g="store: "+d+" key: "+Vd(e,b,c);K(this.b,"addObject: "+g);this.a.i(a,function(a,e,g){$(f).ub(a,e,g,d,b,c)},[d],Q);e.da&&a.U(function(a){hd(f.h,new Mg(Lg,f.h,e.getName(),a,b))})}else k(new T("record must be an object or array list of objects, but "+b+
" of type "+typeof b+" found."));return a};function Ng(a,b){var c=C(b)?b:F(b)?b.name:m;C(c)||k(new T("store name must be a string"));var d=W(a.c,c);if(d){if(a.c.H()&&F(b)){var e=Nd(b);(e=Yd(d,e))&&k(new de(e))}}else a.c.H()||k(new De(c)),d=Nd(F(b)?b:{name:c}),K(a.b,"Adding object store: "+c),Jg(a.h,d);d||k(new De(c));return d}
x.za=function(a,b,c){var d=pc(),e=this;if(a instanceof ld){var d=a.a,f=W(this.c,d);f||k(new T('store "'+d+'" not found.'));if(f.keyPath){var g=Vd(f,b);g!=r?0!=U(g,a.id)&&k(new T("Inline key must be "+a+" but "+g+" found.")):Wd(f,b,a.id);return this.za(d,b)}return this.za(d,b,a.id)}if(A(a)){z(c)&&k(new T("too many arguments"));z(b)||k(new T("record values required"));for(var f=[],g=0,h=a.length;g<h;g++){var l=a[g].a;-1==Ja(f,l)&&f.push(l);var n=W(this.c,l);n||k(new T('store "'+l+'" not found.'));n.keyPath&&
Wd(n,b[g],a[g].id)}K(this.b,"putByKeys: to "+V(f)+" "+b.length+" objects");this.a.i(d,function(c,d,f){$(e).Jb(c,d,f,b,a)},f,Q)}else if(C(a)||F(a)){var n=Ng(this,a),q=n.getName();n.keyPath&&z(c)&&k(new T("key must not be provided while the store uses in-line key."));!n.keyPath&&(!n.autoIncrement&&!z(c))&&k(new T("out-of-line key must be provided."));A(b)?(K(this.b,"putObjects: "+q+" "+b.length+" objects"),this.a.i(d,function(a,d,f){$(e).Lb(a,d,f,q,b,c)},[q],Q),n.da&&d.U(function(a){hd(e.h,new Kg(Og,
e.h,q,a,b))})):F(b)?(K(this.b,"putObject: "+q+" "+c),this.a.i(d,function(a,d,f){$(e).Kb(a,d,f,q,b,c)},[q],Q),n.da&&d.U(function(a){hd(e.h,new Mg(Og,e.h,q,a,b))})):k(new T("put record value must be Object or array of Objects"))}else k(new T("the first argument of put must be store name, store schema or array of keys."));return d};
x.clear=function(a,b,c){z(c)&&k(new T("too many input arguments"));c=pc();var d=this;if(C(a))if(W(this.c,a)||k(new T('store name "'+a+'" not found.')),F(b)){var e=sd(b);e===r&&k(new T("clear method requires a valid non-null KeyRange object."));K(this.b,"clearByKeyRange: "+a+":"+V(e));this.a.i(c,function(b,c,f){$(d).zb(b,c,f,a,e)},[a],Q)}else z(b)&&k(new T("clear method requires a valid KeyRange object as second argument, but found "+b+" of type "+typeof b)),K(this.b,"clearByStore: "+a),this.a.i(c,
function(b,c,e){$(d).Ua(b,c,e,[a])},[a],Q);else if(!z(a)||A(a)&&C(a[0])){var f=a||$d(this.c);K(this.b,"clearByStores: "+V(f));this.a.i(c,function(a,b,c){$(d).Ua(a,b,c,f)},f,Q)}else k(new T('first argument "'+a+'" is invalid.'));return c};
x.rb=function(a,b,c){var d=pc(),e=this;if(C(a)){var f=W(this.c,a);f||k(new T('store name "'+a+'" not found.'));if(z(c))if(C(b)){var g=Qd(f,b);g||k(new T("index: "+b+" not found in "+a));if(F(c)||c===r){var h=sd(c);K(this.b,"removeByIndexKeyRange: "+a+":"+g.getName()+" "+a);this.a.i(d,function(b,c,d){$(e).Mb(b,c,d,a,g.getName(),h)},[a],Q)}else k(new T("key range "+c+' is invalid type "'+typeof c+'".'))}else k(new T('index name "'+b+'" must be a string, but '+typeof b+" found."));else C(b)||E(b)||B(b)||
b instanceof Date?(K(this.b,"removeById: "+a+":"+b),this.a.i(d,function(c,d,f){$(e).ib(c,d,f,a,b)},[a],Q),f.da&&d.U(function(b){hd(e.h,new Mg(Pg,e.h,a,b,m))})):F(b)?(h=sd(b),K(this.b,"removeByKeyRange: "+a+":"+V(h)),this.a.i(d,function(b,c,d){$(e).jb(b,c,d,a,h)},[a],Q),f.da&&d.U(function(b){hd(e.h,new Kg(Pg,e.h,a,b,m))})):k(new T('Invalid key or key range "'+b+'" of type '+typeof b))}else if(a instanceof ld)this.a.i(d,function(b,c,d){$(e).ib(b,c,d,a.a,a.id)},[a.a],Q);else if(A(a)){c=[];for(var f=
0,l=a.length;f<l;f++){a[f]instanceof ld||k(new T("key list element at "+f+" of "+l+' must be yn.db.Key, but "'+re(a[f])+'" ('+fa(a[f])+") is not ydn.db.Key."));var n=a[f].a;-1==Ja(c,n)&&c.push(n)}1>c.length&&k(new T('at least one valid key required in key list "'+re(a)+'"'));this.a.i(d,function(b,c,d){$(e).Nb(b,c,d,a)},c,Q)}else k(new T('first argument requires store name, key (ydn.db.Key) or list of keys (array) , but "'+re(a)+'" ('+fa(a)+") found."));return d};
x.toString=function(){return"DbOperator:"+this.h.getName()};function Qg(a,b,c){Hg.call(this,a,b,c)}H(Qg,Ig);x=Qg.prototype;x.b=M("ydn.db.core.DbOperator");x.ya=function(a,b){var c=this;if(a instanceof Y){var d=pc(),e=a.K,f=W(this.c,e);f||k(new T('store "'+e+'" not found.'));var g=a.P();z(g)&&!Td(f,g)&&k(new T('index "'+g+'" not found in store "'+e+'".'));f=new N;f.B(function(a){O(d,a[0])},function(a){d.o(a)});K(this.b,"getByIterator:"+a);this.a.i(f,function(b,d,e){$(c).d(b,d,e,a,1)},[e],P);return d}return Qg.z.ya.call(this,a,b)};
x.keys=function(a,b,c,d,e){var f=this;if(a instanceof Y){d=pc();var g=100;E(b)?(g=b,1>g&&k(new T("limit must be a positive value, but "+b))):z(b)&&k(new T("limit must be a number,  but "+b));z(c)&&k(new T("offset must not be specified"));K(this.b,"keysByIterator:"+a);this.a.i(d,function(b,c,d){$(f).e(b,c,d,a,g)},a.stores(),P);return d}return Qg.z.keys.call(this,a,b,c,d,e)};
x.count=function(a,b,c){var d=this;return a instanceof Y?((z(b)||z(c))&&k(new T("too many arguments.")),b=pc(),K(this.b,"countKeyRange:"+a),this.a.i(b,function(b,c,g){$(d).oa(b,c,g,a.K,a.xc(),a.P(),a.lb())},a.stores(),P),b):Qg.z.count.call(this,a,b,c)};
x.A=function(a,b,c,d,e,f){var g=this;if(a instanceof Y){d=pc();var h;E(b)?(h=b,1>h&&k(new T("limit must be a positive value, but "+h))):z(b)&&k(new T("limit must be a number, but "+b));z(c)&&k(new T("offset must not be specified"));K(this.b,"listByIterator:"+a);this.a.i(d,function(b,c,d){$(g).d(b,c,d,a,h)},a.stores(),P);return d}return Qg.z.A.call(this,a,b,c,d,e,f)};
x.lc=function(a,b){var c=pc();if(z(b)){A(b)||k(new TypeError("Iterator argument must be an array."));for(var d=0;d<b.length;d++)b[d]instanceof Y||k(new TypeError("Iterator at "+d+" must be cursor range iterator."))}var e;e=b?b:r;for(var f=[],d=0;d<e.length;d++)for(var g=e[d].stores(),h=0;h<g.length;h++)0<=Ja(f,g[h])||f.push(g[h]);L(this.b,this+": scan for "+e.length+" iterators on "+f);var l=this;this.a.i(c,function(b,c,d){function f(){for(var a=0,d=0;d<e.length;d++){var t=Pf(e[d],b,c,$(l));t.f=g;
t.e=qa(h,a);pa[d]=t;ha[a]=d;a++}S=e.length}function g(a){for(var b=0;b<pa.length;b++)Jf(pa[b]);Ra(pa);K(l.b,I+" error");d(a,p)}function h(b,c){da&&k(new fe);Fb++;var f=Fb===S,g=ha[b],n=e[g],q=pa[g],g=q.N(),q=q.aa();ea[b]=c;Pa[b]=n.e?n.a?g:q:n.a?c:q;if(f){var v;v=a instanceof Yf?a.d(ea,Pa):a(ea,Pa);f=[];n=[];g=[];q=[];if(A(v))for(var u=0;u<v.length;u++)v[u]===p?g[u]=1:v[u]===s?q[u]=p:n[u]=v[u];else if(v===r)f=[];else if(z(v))if(F(v)){f=["advance","continue","continuePrimary","restart"];for(u in v)0<=
Ja(f,u)||k(new Bd('Unknown attribute "'+u+'" in cursor advancement object'));f=v.continuePrimary||[];n=v["continue"]||[];g=v.advance||[];q=v.restart||[]}else k(new he("scan callback output"));else{f=[];for(u=0;u<e.length;u++)z(ha[u])&&(g[u]=1)}for(u=Fb=v=0;u<e.length;u++)f[u]==r&&(!z(n[u])&&q[u]==r&&g[u]==r)&&Fb++;for(u=0;u<e.length;u++)if(f[u]!=r||z(n[u])||q[u]!=r||g[u]!=r){var D=ha[u];z(D)||k(new he(u+" is not an iterator."));var D=e[D],Hb=pa[u];if(ea[u]==r){var We=u+"/"+e.length;g[u]!=r&&k(new ie(Hb+
" "+We+" must not advance "+g[u]+" steps"));z(n[u])&&k(new ie(Hb+" "+We+" must not continue to key "+n[u]));f[u]!=r&&k(new ie(Hb+" "+We+" must not continue to primary key "+f[u]))}ea[u]=m;Pa[u]=m;q[u]!=r?(D=Hb,D.I=s,D.a[0].Ta(m,m)):z(n[u])?Hb.a[0].la(n[u]):f[u]!=r?Hb.a[0].Sa(f[u]):g[u]!=r?Hb.advance(1):k(new fe(D+": has no action"));v++}if(0==v){for(f=0;f<pa.length;f++)Jf(pa[f]);da=p;Ra(pa);K(l.b,"success "+I);d(m)}}}var I=c+" "+l+" scanning";L(l.b,I);var da=s,S,ha=[],ea=[],Pa=[],pa=[],Fb=0;a instanceof
Yf?a.c(e,function(){f()})||f():f()},f,P);return c};
x.kc=function(a,b,c){b instanceof Y||k(new T("Second argument must be cursor range iterator."));W(this.c,b.K)||k(new T('Store "'+b.K+'" not found.'));c=c||P;var d=this,e=pc();K(this.b,"open:"+c+" "+b);this.a.i(e,function(c,e,h){L(d.b,e+" iterating "+b);var l=Pf(b,c,e,$(d));l.f=function(a){h(a,p)};l.e=function(b){if(b!=r){var c=a(l);c===p?(l.I=s,l.a[0].Ta(m,m)):F(c)?c.restart===p?(b=c["continue"],c=c.continuePrimary,l.I=s,l.a[0].Ta(c,b)):c["continue"]!=r?l.a[0].la(c["continue"]):c.continuePrimary!=
r?l.a[0].Sa(c.continuePrimary):(Jf(l),h(m)):l.advance(1)}else Jf(l),h(m)}},b.stores(),c);return e};x.map=function(a,b){for(var c=this,d=a.stores(),e,f=0;e=d[f];f++)e||k(new T('Store "'+e+'" not found.'));e=pc();L(this.b,"map:"+a);this.a.i(e,function(d,e,f){L(c.b,e+" iterating "+a);var n=Pf(a,d,e,$(c));n.f=function(a){f(a,s)};n.e=function(c){c!=r?(b(a.e?a.a?c:n.N():a.a?c:n.aa()),n.advance(1)):(f(m),b=r)}},d,P);return e};
x.ob=function(a,b,c){for(var d=this,e=a.stores(),f,g=0;f=e[g];g++)f||k(new T('Store "'+f+'" not found.'));f=pc();var h=F(c)?qe(V(c)):c;K(this.b,"reduce:"+a);this.a.i(f,function(c,e,f){var g=Pf(a,c,e,$(d));g.f=function(a){f(a,p)};var v=0;g.e=function(c){c!=r?(h=b(h,a.e?a.a?c:g.N():a.a?c:g.aa(),v++),g.advance(1)):f(h)}},e,P);return f};var Lg="created",Pg="deleted",Og="updated";function Rg(a,b){Kc.call(this,a,b)}H(Rg,Kc);Rg.prototype.f=w("d");function Sg(a,b,c,d,e){Kc.call(this,a,b);this.version=c;this.mc=d;this.error=e}H(Sg,Rg);x=Sg.prototype;x.name="StorageEvent";x.version=NaN;x.mc=NaN;x.error=r;x.Vc=w("version");x.vc=w("mc");x.Uc=w("error");function Mg(a,b,c,d,e){Kc.call(this,a,b);this.d=c;this.key=d;this.value=e}H(Mg,Rg);Mg.prototype.name="RecordEvent";Mg.prototype.g=w("key");Mg.prototype.j=w("value");
function Kg(a,b,c,d,e){Kc.call(this,a,b);this.d=c;this.keys=d;this.A=e}H(Kg,Rg);Kg.prototype.name="StoreEvent";Kg.prototype.ea=w("keys");Kg.prototype.ab=w("A");function Ke(a,b){Zd.call(this,a,b)}H(Ke,Zd);Ke.prototype.H=ba(p);function ve(a,b){a.stores.push(b)};function Ld(a,b){var c;c=c||{};if(a==r||b==r)return s;if(A(a)&&A(b)){if(a.length!=b.length)return s;for(var d=0;d<a.length;d++)if(-1==Oa(b,function(b){return Ld(b,a[d])}))return s;return p}if(A(a))return 1==a.length&&Ld(a[0],b);if(A(b))return 1==b.length&&Ld(b[0],a);if(F(a)&&F(a)){for(var e in a)if(a.hasOwnProperty(e)&&!c[e]){var f=Ld(a[e],b[e]);if(!f)return s}for(e in b)if(b.hasOwnProperty(e)&&!c[e]&&(f=Ld(a[e],b[e]),!f))return s;return p}return a===b}
function yg(a){for(var b in a)if(a.hasOwnProperty(b))return a[b]};function Tg(){};function Ug(){}H(Ug,Tg);Ug.prototype.Ca=function(){var a=0;db(this.ma(p),function(){a++});return a};Ug.prototype.clear=function(){var a=eb(this.ma(p)),b=this;Ka(a,function(a){b.w.removeAttribute(Vg(a));Wg(b)})};function Xg(a,b){if(qb&&!(qb&&9<=Db)){Yg||(Yg=new fb);var c=Yg;this.w=Object.prototype.hasOwnProperty.call(c.c,a)?c.c[a]:m;this.w||(b?this.w=document.getElementById(b):(this.w=document.createElement("userdata"),this.w.addBehavior("#default#userData"),document.body.appendChild(this.w)),gb(Yg,a,this.w));this.Pb=a;try{this.w.load(this.Pb)}catch(d){this.w=r}}}H(Xg,Ug);var Zg={".":".2E","!":".21","~":".7E","*":".2A","'":".27","(":".28",")":".29","%":"."},Yg=r;x=Xg.prototype;x.w=r;x.Pb=r;
function Vg(a){return"_"+encodeURIComponent(a).replace(/[.!~*'()%]/g,function(a){return Zg[a]})}x.Ca=function(){return $g(this).attributes.length};x.ma=function(a){var b=0,c=$g(this).attributes,d=new bb;d.a=function(){b>=c.length&&k(ab);var d=c[b++];if(a)return decodeURIComponent(d.nodeName.replace(/\./g,"%")).substr(1);d=d.nodeValue;C(d)||k("Storage mechanism: Invalid value was encountered");return d};return d};
x.clear=function(){for(var a=$g(this),b=a.attributes.length;0<b;b--)a.removeAttribute(a.attributes[b-1].nodeName);Wg(this)};function Wg(a){try{a.w.save(a.Pb)}catch(b){k("Storage mechanism: Quota exceeded")}}function $g(a){return a.w.XMLDocument.documentElement};function ah(){yf.call(this,this)}H(ah,yf);ah.prototype.Va=function(a){return new bh(a)};ah.prototype.ka=ba("userdata");function bh(a){this.h=new Xg(a);this.length=this.keys().length}x=bh.prototype;x.length=0;x.clear=function(){this.h.clear();this.a=[]};x.keys=function(){this.a||(this.a=[],db(this.h,function(a){this.a.push(a)},this));return this.a};x.key=function(a){return this.keys()[a]};x.setItem=function(a,b){this.a&&this.a.push(a);var c=this.h;c.w.setAttribute(Vg(a),b);Wg(c)};
x.getItem=function(a){a=this.h.w.getAttribute(Vg(a));!C(a)&&a!==r&&k("Storage mechanism: Invalid value was encountered");return z(a)?a:r};x.removeItem=function(a){this.a=r;var b=this.h;b.w.removeAttribute(Vg(a));Wg(b)};/*
 Copyright 2012 YDN Authors, Yathit. All Rights Reserved.
 Licensed under the Apache License, Version 2.0 (the "License");.
*/
function Z(a,b,c){gd.call(this);c=c||{};var d="autoSchema connectionTimeout size mechanisms policy isSerial".split(" "),e;for(e in c)c.hasOwnProperty(e)&&-1==Ja(d,e)&&k(new T('Unknown attribute "'+e+'" in options.'));if(c.mechanisms){A(c.mechanisms)||k(new T("mechanisms attribute must be an array but "+fa(c.mechanisms)+" found."));for(e=0;e<c.mechanisms.length;e++)0<=Ja(ch,c.mechanisms[e])||k(new T('Invalid mechanism "'+c.mechanisms[e]+'"'))}this.zc=c.mechanisms||ch;this.ec=c.size;this.Ac=z(c.connectionTimeout)?
c.connectionTimeout:3E4;this.ic=z(c.ic)?c.ic:s;this.a=r;this.g=[];this.fb=s;if(b instanceof Zd)c=b;else if(F(b)){c=c.autoSchema||!z(b.stores)?new Ke(b):new Zd(b);d=d=b.stores?b.stores.length:0;for(e=0;e<d;e++){var f=W(c,b.stores[e].name);b.stores[e].Sync&&J(this.b,"Synchronization option for "+f.getName()+" ignored.")}}else c=new Ke;this.c=c;z(a)&&this.s(a)}H(Z,gd);Z.prototype.b=M("ydn.db.con.Storage");
Z.prototype.Bc=function(a){if(z(a)){var b=function(b){a(b.toJSON())};if(this.a)this.a.L(b);else{var c=this;this.transaction(function(a){c.a.L(b,a)},r,P)}}return this.c?this.c.toJSON():r};function Jg(a,b){var c=b instanceof Md?b:Nd(b),d=b.name,e=W(a.c,d);0==Yd(c,e).length?nc(s):(e=e?"update":"add",a.c instanceof Ke?(ve(a.c,c),a.a?(a.a.mb(),a.a=r,dh(a)):nc(s)):k(new ge("Cannot "+e+" store: "+d+". Not auto schema generation mode.")))}
Z.prototype.s=function(a){this.a&&k(Error("Already defined with "+this.e));this.e=a;dh(this)};G("ydn.db.con.Storage.prototype.setName",Z.prototype.s);Z.prototype.getName=w("e");var ch="indexeddb websql localstorage sessionstorage userdata memory".split(" ");function eh(a,b){return"indexeddb"==b?new se(a.ec,a.Ac):"websql"==b?new Ie(a.ec):"localstorage"==b?new Af:"sessionstorage"==b?new Cf:"memory"==b?new yf:"userdata"==b?new ah:r}
function dh(a){function b(b,d){b?(L(a.b,a+": ready."),a.Rc=NaN,jd(function(){a.onReady(d);fh(a)}),O(c,d)):(J(a.b,a+": database connection fail "+d.name),jd(function(){a.onReady(d);if(a.g){a.b.log(Rb,"Purging "+a.g.length+" transactions request.",m);for(var b;b=a.g.shift();)b.F&&b.F("error",d)}}),c.o(d))}for(var c=new N,d=r,e=a.zc,f=0;f<e.length;f++){var g=e[f].toLowerCase();if("indexeddb"==g&&ue){d=eh(a,g);break}else if("websql"==g&&ia(y.openDatabase)){d=eh(a,g);break}else if("localstorage"==g&&window.localStorage){d=
eh(a,g);break}else if("sessionstorage"==g&&window.sessionStorage){d=eh(a,g);break}else if("memory"==g){d=eh(a,g);break}else if("userdata"==g){d=eh(a,g);break}}d===r?(e=new ge("No storage mechanism found."),b(s,new Sg("ready",a,NaN,NaN,e))):d.wa(a.e,a.c).B(function(a){this.a=d;b(p,new Sg("ready",this,parseFloat(d.nb()),parseFloat(a),r));d.e=function(){L(this.b,this+": disconnected.")}},function(a){J(this.b,this+": opening fail: "+a.message);var c=new Sg("ready",this,NaN,NaN,a);c.message=a.message;
b(s,c)},a)}Z.prototype.j=function(){if(this.a)return this.a.ka()};G("ydn.db.con.Storage.prototype.getType",Z.prototype.j);Z.prototype.onReady=function(a){hd(this,a)};Z.prototype.ta=function(){this.a&&(this.a.mb(),this.a=r,L(this.b,this+" closed"))};G("ydn.db.con.Storage.prototype.close",Z.prototype.ta);x=Z.prototype;x.Qc=function(){return this.a?this.a.Tb():r};x.Rc=NaN;function fh(a){var b=a.g.shift();b&&(L(a.b,"pop tx queue["+(a.g.length+1)+"]"),a.transaction(b.Za,b.Ec,b.mode,b.F));ra()}
function gh(a,b,c,d,e){L(a.b,"push tx queue["+a.g.length+"]");a.g.push({Za:b,Ec:c,mode:d,F:e});100<a.g.length&&0==a.g.length%100&&J(a.b,"Transaction queue stack size is "+a.g.length+". It is too large, possibility due to incorrect usage.")}x.fb=s;
x.transaction=function(a,b,c,d){var e=b;if(C(b))e=[b];else if(b!=r)if(B(b)){0==b.length&&k(new T("number of store names must more than 0"));for(var f=0;f<b.length;f++)C(b[f])||k(new T("store name at "+f+" must be string but found "+typeof b[f]))}else k(new T("store names must be an array"));else e=r;if(!this.a||!this.a.Ra()||this.fb)gh(this,a,e,c,d);else{var g=this,h=z(c)?c:P;h==sc&&(this.fb=p);this.a.Ya(function(b){a(b);a=r},e,h,function(a,b){ia(d)&&(d(a,b),d=m);h==sc&&(g.fb=s);fh(g)})}};
x.Bb=function(a,b,c,d){function e(a){0<=Ja(["created","ready","deleted","updated"],a)||k(new T('Invalid event type "'+a+'"'))}if(B(a))for(var f=0;f<a.length;f++)e(a[f]);else e(a);Z.z.Bb.call(this,a,b,c,d)};x.toString=function(){return"Storage:"+this.a};function hh(a,b,c,d){this.d=a;this.f=b;this.a=Ta(c);this.c=d;this.e=[]}hh.prototype.d=r;function ih(a,b,c){a.d?(c&&a.e.push(c),b(a.d)):k(new Cd("tx committed on ParallelTxExecutor"))}hh.prototype.toString=function(){return"ParallelTxExecutor: txNo:"+this.f+" mode:"+this.c+" scopes:"+V(this.a)};function jh(a,b,c,d,e,f){this.h=a;this.f=b;this.c=this.Aa=0;this.Ka=this.Z=r;this.e=d;this.d=e;this.a=c||"single";this.sb=f||0}x=jh.prototype;x.Aa=0;x.sb=0;x.Z=r;x.Ka=r;x.b=M("ydn.db.tr.Parallel");x.Wb=w("Aa");x.type=function(){return this.h.j()};x.pc=function(){K(this.b,this+": aborting");Bg(this.Ka)};
x.qc=function(a,b){var c;if("multi"==this.a)a:if(c=this.Z,!c.a||!c.c||b!=c.c&&(c.c!=Q||b!=P)||a.length>c.a.length)c=s;else{for(var d=0;d<a.length;d++)if(-1==c.a.indexOf(a[d])){c=s;break a}c=p}else if("repeat"==this.a)a:if(c=this.Z,!c.a||!c.c||b!=c.c||c.a.length!=a.length)c=s;else{for(d=0;d<a.length;d++)if(-1==c.a.indexOf(a[d])){c=s;break a}c=p}else c="all"==this.a?p:s;return c};
x.Ma=function(a,b,c,d){function e(c){l.Aa++;n=new hh(c,l.Aa,b,h);g=kh(l);ac(l.b,g+" BEGIN "+V(b)+" "+h);l.Z=n;ih(l.Z,a,d)}function f(a,b){"complete"==a?ac(l.b,g+" COMMITTED"):ac(l.b,g+" COMMITTED with "+a);for(var c=n,d;d=c.e.shift();)d(a,b);c.d=r;c.a=r;c.e=r}var g;this.e&&(b=this.e);this.d&&(c=this.d);var h=z(c)?c:P,l=this,n;this.Z&&this.Z.d&&this.qc(b,h)?ih(this.Z,a,d):(this.sb&&this.Aa>=this.sb&&k(new Bd("Exceed maximum number of transactions of "+this.sb)),this.h.transaction(e,b,h,f))};
x.i=function(a,b,c,d,e){var f=this,g;this.Ma(function(c){f.c++;g=kh(f)+"R"+f.c;K(f.b,g+" BEGIN");b(c,kh(f),function(b,d){f.Ka=c;g=kh(f)+"R"+f.c;d?(K(f.b,g+" ERROR"),a.o(b)):(K(f.b,g+" SUCCESS"),O(a,b));f.Ka=r});b=r;K(f.b,g+" END")},c,d,e)};function kh(a){return"B"+a.f+"T"+a.Aa}x.toString=function(){return"Parallel:"+this.a+":"+kh(this)+(this.Ka?"*":"")};function lh(a,b){jh.call(this,a,b,"single")}H(lh,jh);lh.prototype.b=M("ydn.db.tr.AtomicParallel");lh.prototype.qc=ba(s);lh.prototype.i=function(a,b,c,d,e){var f,g,h=new N;h.B(function(a){g=s;f=a},function(a){g=p;f=a});lh.z.i.call(this,h,b,c,d,function(b,c){if(g===p)a.o(f);else if(g===s)O(a,f);else{var d=new we;a.o(d)}e&&(e(b,c),e=m)})};function Dg(a){this.e=a;this.a=r;this.c=0}Dg.prototype.b=M("ydn.db.tr.Mutex");Dg.prototype.J=r;function mh(a,b,c){if(!a.J||!a.mode||c!=a.mode||a.J.length!=b.length)return s;for(c=0;c<b.length;c++)if(-1==a.J.indexOf(b[c]))return s;return p}Dg.prototype.F=r;function Fg(a){return"B"+a.e+"T"+a.c}Dg.prototype.toString=function(){return"Mutex:"+Fg(this)+(this.a?"*":"")};function nh(a,b){Cg.call(this,a,b)}H(nh,Cg);nh.prototype.Xb=function(a,b){var c;a:if(c=this.r,!c.J||!c.mode||b!=c.mode&&(c.mode!=Q||b!=P)||a.length>c.J.length)c=s;else{for(var d=0;d<a.length;d++)if(-1==c.J.indexOf(a[d])){c=s;break a}c=p}return c};function oh(a,b){Cg.call(this,a,b)}H(oh,Cg);oh.prototype.b=M("ydn.db.tr.StrictOverflowSerial");oh.prototype.Xb=function(a,b){return mh(this.r,a,b)};oh.prototype.cc=function(){var a=this.r;return!!a&&mh(a,0<this.a.length?this.a[0].J:r,0<this.a.length?this.a[0].mode:r)};function ph(a,b,c){Z.call(this,a,b,c);this.$=0;a=p;b="single";c&&(z(c.isSerial)&&(a=!!c.isSerial),c.policy&&(b=c.policy));c=qh(this,b,a);this.d=this.ua(c,r)}H(ph,Z);x=ph.prototype;x.$=0;x.rc=function(a,b,c,d,e){var f;"readonly"==d?f=P:"readwrite"==d&&(f=Q);a=qh(this,a,b,c,f,e);return this.ua(a,r)};x.ua=function(a){return new Hg(this,this.c,a)};
function qh(a,b,c,d,e,f){if(c){if("multi"==b)return new nh(a,a.$++);if("repeat"==b)return new oh(a,a.$++);if("atomic"==b)return new Gg(a,a.$++);if("single"==b)return new Cg(a,a.$++,f);k(new T('Invalid requestType "'+b+'"'))}if("multi"==b||"repeat"==b||"all"==b||"single"==b)return new jh(a,a.$++,b,d,e,f);if("atomic"==b)return new lh(a,a.$++);k(new T('Invalid requestType "'+b+'"'))}x.Xc=function(){this.d.e()};
x.Dc=function(a,b,c,d,e){var f=this;this.$++;var g=P;c&&("readwrite"==c?g=Q:"readonly"!=c&&k(new T('Invalid transaction mode "'+c+'"')));var h=qh(this,"all",s,b,g,1),l=this.ua(h,r);b!=r||(b=$d(this.c));if(B(b)){0==b.length&&k(new T("number of store names must more than 0"));for(var n=0;n<b.length;n++)C(b[n])||k(new T("store name at "+n+" must be string but found "+typeof b[n]))}else k(new T("store names must be an array"));var q=a;if(4<arguments.length)var t=Array.prototype.slice.call(arguments,4),
q=function(){var b=Array.prototype.slice.call(arguments),b=b.concat(t);return a.apply(this,b)};L(this.b,"scheduling run in transaction with "+h);h.Ma(function(){L(f.b,"executing run in transaction on "+h);q(l);q=r},b,g,d)};function rh(a,b,c){ph.call(this,a,b,c)}H(rh,ph);x=rh.prototype;x.ua=function(a){return new Ig(this,this.c,a)};x.Hb=function(){var a=this.j();if("indexeddb"==a)return new ag(this.e,this.c);if("websql"==a)return new ug(this.e,this.c);if("memory"==a||"localstorage"==a||"userdata"==a||"sessionstorage"==a)return new jg(this.e,this.c);k(new Be("No executor for "+a))};x.qb=function(a,b,c){return this.d.qb(a,b,c)};x.count=function(a,b,c,d){return this.d.count(a,b,c,d)};
x.ya=function(a,b){return this.d.ya(a,b)};x.keys=function(a,b,c,d,e,f){return this.d.keys(a,b,c,d,e,f)};x.A=function(a,b,c,d,e,f){return this.d.A(a,b,c,d,e,f)};x.za=function(a,b,c){return this.d.za(a,b,c)};x.clear=function(a,b,c){return this.d.clear(a,b,c)};x.rb=function(a,b,c){return this.d.rb(a,b,c)};x.toString=function(){var a="Storage:"+this.getName();this.a&&this.a.Ra()&&(a+=" ["+this.j()+"]");return a};function sh(a,b,c){ph.call(this,a,b,c)}H(sh,rh);x=sh.prototype;x.Hb=function(){var a=this.j();if("indexeddb"==a)return new cg(this.e,this.c);if("websql"==a)return new zg(this.e,this.c);if("memory"==a||"userdata"==a||"localstorage"==a||"sessionstorage"==a)return new mg(this.e,this.c);k(new Be("No executor for "+a))};x.ua=function(a){return new Qg(this,this.c,a)};x.Sc=function(a,b,c){return this.d.kc(a,b,c)};x.Tc=function(a,b){return this.d.lc(a,b)};x.map=function(a,b){return this.d.map(a,b)};
x.ob=function(a,b,c){return this.d.ob(a,b,c)};function th(a){this.a=a}th.prototype.a=[];
th.prototype.c=function(a,b){for(var c=[],d=0;d<this.a.length;d++){var e=this.a[d],f="'"===e[0]&&"'"===e[e.length-1];if('"'===e[0]&&'"'===e[e.length-1])e=Ya(a,Ca(e,'"').split(".")),c.push(e);else if(f)c.push(Ca(e,"'"));else if(C(e))if("true"===e)c.push(p);else if("false"===e)c.push(s);else if("Date"===e)c.push(new Date(parseInt(c.pop(),10)));else if("now"===e)c.push(new Date);else if("!"===e)c[c.length-1]=!c[c.length-1];else if("=="===e)c.push(c.pop()==c.pop());else if("==="===e)c.push(c.pop()===
c.pop());else if("!="===e)c.push(c.pop()!=c.pop());else if("!=="===e)c.push(c.pop()!==c.pop());else if("<="===e)c.push(c.pop()<=c.pop());else if("<"===e)c.push(c.pop()<c.pop());else if(">="===e)c.push(c.pop()>=c.pop());else if(">"===e)c.push(c.pop()>c.pop());else if("&"===e)c.push(c.pop()&c.pop());else if("|"===e)c.push(c.pop()|c.pop());else if("?"===e){var e=!!c.pop(),f=c.pop(),g=c.pop(),e=e?f:g;c.push(e)}else"+"===e?c.push(c.pop()+c.pop()):"-"===e?c.push(c.pop()-c.pop()):"*"===e?c.push(c.pop()*
c.pop()):"/"===e?c.push(c.pop()/c.pop()):"%"===e?c.push(c.pop()%c.pop()):"at"===e?(f=c.pop(),e=c.pop(),c.push(e[f])):"of"===e?(f=c.pop(),e=c.pop(),e=A(e)?e.indexOf(f):-1,c.push(e)):"in"===e?(f=c.pop(),e=c.pop(),e=A(e)?0<=e.indexOf(f):s,c.push(e)):"abs"===e?c[c.length-1]=Math.abs(c[c.length-1]):"$"==e[0]&&/^\$\d$/.test(e)?(e=parseInt(e.match(/^\$(\d)$/)[1],10),c.push(arguments[e])):c.push(parseFloat(e));else c.push(e)}return c[0]};
th.prototype.d=function(){return function(){var a=2<arguments.length?Array.prototype.slice(arguments,2):m;return th.prototype.c.apply(r,a)}};th.prototype.toJSON=function(){return{Tokens:qe(V(this.a))}};function uh(a){C(a)||k(new ce);this.G=a;vh(this,a);this.Oa=""}x=uh.prototype;x.G="";x.Pa=P;x.dc=NaN;x.gc=NaN;x.Rb=s;x.Oa="";
function vh(a,b){var c=b.split(/\sFROM\s/i);2!=c.length&&k(new He("FROM required."));var d=c[1],c=c[0].match(/\s*?(SELECT|INSERT|UPDATE|DELETE)\s+(.*)/i);3!=c.length&&k(new He("Unable to parse: "+b));a.d=c[1].toUpperCase();"SELECT"==a.d?a.Pa=P:"INSERT"==a.d?a.Pa=Q:"UPDATE"==a.d?a.Pa=Q:"DELETE"==a.d?a.Pa=Q:k(new He("Unknown SQL verb: "+a.d));var c=c[2].trim(),e=c.match(/^(MIN|MAX|COUNT|AVG|SUM)/i);e?(a.e=e[0].toUpperCase(),c=c.replace(/^(MIN|MAX|COUNT|AVG|SUM)/i,"").trim()):a.e=m;"("==c.charAt(0)&&
(")"==c.charAt(c.length-1)?c=c.substring(1,c.length-1):new He("missing closing parentheses"));a.k=c;c=d.search(/(ORDER BY|LIMIT|OFFSET)/i);0<c?(a.a=d.substring(c),d=d.substring(0,c)):a.a="";c=d.search(/WHERE/i);0<c?(a.f=d.substring(c+6).trim(),d=d.substring(0,c)):a.f="";a.c=d.trim().split(",").map(function(a){a=Ca(a,'"');a=Ca(a,"'");return a.trim()})}
function wh(a,b){if(b){for(var c=0;c<b.length;c++)a.G=a.G.replace("?",b[c]);vh(a,a.G)}a.g=xh(a);if(!a.g)return a.Oa;var c=a.a.length,d=/OFFSET\s+(\d+)/i.exec(a.a);d&&(a.gc=parseInt(d[1],10),c=a.a.search(/OFFSET/i));if(d=/LIMIT\s+(\d+)/i.exec(a.a))a.dc=parseInt(d[1],10),d=a.a.search(/LIMIT/i),d<c&&(c=d);(c=/ORDER BY\s+(.+)/i.exec(a.a.substr(0,c)))?(c=c[1].trim(),(d=c.match(/(ASC|DESC)/i))?(a.Rb="DESC"==d[0].toUpperCase(),c=c.replace(/\s+(ASC|DESC)/i,"")):a.Rb=s,a.j=Ca(Ca(c,'"'),"'")):a.j=m;return""}
function yh(a){if("*"==a.k)return r;a=a.k.split(",");return a=a.map(function(a){return Ca(a.trim(),'"')})}x.toJSON=function(){return{sql:this.G}};
function xh(a){function b(a){return Qa(c,function(b){return b.ja==a})}var c=[],d=/(.+?)(<=|>=|=|>|<)(.+)/i;if(0<a.f.length)for(var e=a.f.split("AND"),f=0;f<e.length;f++){var g=e[f],h=d.exec(g);if(h){var l=h[1].trim(),l=Ca(l,'"'),l=Ca(l,"'");if(0<l.length){var n=h[3].trim(),n=0==n.lastIndexOf('"',0)?Ca(n,'"'):0==n.lastIndexOf("'",0)?Ca(n,"'"):parseFloat(n),h=new Kf(l,h[2],n),l=b(l);if(0<=l){if(c[l]=c[l].wb(h),!c[l])return a.Oa='where clause "'+g+'" conflict',r}else c.push(h)}else return a.Oa='Invalid clause "'+
g+'"',r}else return a.Oa='Invalid clause "'+g+'"',r}return c}x.toString=function(){return"query:"+this.G};function zh(a,b){this.sql=b;this.a=a}zh.prototype.b=M("ydn.db.sql.req.nosql.Node");zh.prototype.toJSON=function(){return{sql:this.sql}};zh.prototype.toString=ba("idb.Node:");
zh.prototype.Vb=function(a,b,c,d){var e=Ta(this.sql.c)[0],f=this.sql.g,g=this.sql.dc,g=isNaN(g)?100:g,h=this.sql.gc,h=isNaN(h)?0:h,l=this.sql.j,n=yh(this.sql),q=r,t=this.sql.Rb;0==f.length?q=r:1==f.length?q=sd(f[0].a):k(new zd("too many conditions."));var v=c;n===r||(v=function(a,b){if(b)c(a,p);else{var d=a.map(function(a){var b=n.length;if(1==b)return uc(a,n[0]);for(var c={},d=0;d<b;d++)c[n[d]]=uc(a,n[d]);return c});c(d)}});var f=0<f.length?f[0].ja:m,u=b+" executing on"+e;f&&(u+=":"+f);u+=" "+vd(q);
K(this.b,u);l&&l!=this.a.keyPath?d.Ha(a,b,v,e,l,q,t,g,h,s):z(f)&&f!=this.a.keyPath?d.Ha(a,b,v,e,f,q,t,g,h,s):d.Ia(a,b,v,e,q,t,g,h)};function Ah(a,b){zh.call(this,a,b)}H(Ah,zh);
Ah.prototype.Vb=function(a,b,c,d){var e,f=Ta(this.sql.c)[0],g=this.sql.g,h=r;0==g.length?h=r:1==g.length?h=sd(g[0].a):k(new zd("too many conditions."));var l=this.sql.e,g=0<g.length?g[0].ja:m,n=b+" executing "+l+" on "+f;g&&(n+=":"+g);n+=" "+vd(h);K(this.b,n);if("COUNT"==l)h?d.oa(a,b,c,f,h,g,s):d.oa(a,b,c,f,r,m,s);else{var q,n=yh(this.sql);(!n||0==n.length)&&k(new ie("field name require for reduce operation: "+l));n=n[0];"MIN"==l?q=Bh(n):"MAX"==l?q=Ch(n):"AVG"==l?(e=0,q=Dh(n)):"SUM"==l?(e=0,q=Eh(n)):
k(new de(l));var t;t=z(g)?new Of(f,g,h):new Nf(f,h);var v=Pf(t,a,b,d);v.f=function(a){c(a,p)};var u=0;v.e=function(a){a!=r?(e=q(t.a?v.N():v.aa(),e,u),v.advance(1),u++):c(e)}}};function Dh(a){return function(b,c,d){z(c)||(c=0);return(c*d+b[a])/(d+1)}}function Eh(a){return function(b,c){return c+b[a]}}function Bh(a){return function(b,c){var d=b[a];return!z(c)?d:c<d?c:d}}function Ch(a){return function(b,c){var d=b[a];return!z(c)?d:c>d?c:d}};function Fh(a,b){Qf.call(this,a,b)}H(Fh,cg);Fh.prototype.b=M("ydn.db.sql.req.IndexedDb");Fh.prototype.executeSql=function(a,b,c,d,e){(e=wh(d,e))&&k(new He(e));e=Ta(d.c);if(1==e.length){var f=W(this.a,e[0]);f||k(new De(e[0]));var g=yh(d);if(g)for(var h=0;h<g.length;h++)Td(f,g[h])||k(new De('Index "'+g[h]+'" not found in '+e[0]));(d.e?new Ah(f,d):new zh(f,d)).Vb(a,b,c,this)}else k(new de(d.G))};function Gh(a,b){this.sql=b;this.c=a;this.a=yh(b)}Gh.prototype.b=M("ydn.db.sql.req.websql.Node");Gh.prototype.toJSON=function(){return{sql:this.sql.G}};Gh.prototype.toString=ba("websql.Node:");function Hh(a,b){if(a.a){if(1==a.a.length){if(F(b))return Ya(b,a.a[0]);return}for(var c={},d=0;d<a.a.length;d++)c[a.a[d]]=Ya(b,a.a[d]);return c}return pg(b,a.c)}
Gh.prototype.oc=function(a,b,c){var d=this,e=[];b.executeSql(this.sql.G,c,function(b,c){for(var h=c.rows.length,l=0;l<h;l++){var n=c.rows.item(l);if(F(n))var q=Hh(d,n);e.push(q)}a(e)},function(b,c){J(d.b,"Sqlite error: "+c.message);a(c,p);return p})};function Ih(a,b){Gh.call(this,a,b)}H(Ih,Gh);Ih.prototype.oc=function(a,b,c){var d=this;b.executeSql(this.sql.G,c,function(b,c){var d=c.rows.length;1==d?(d=yg(c.rows.item(0)),a(d)):0==d?a(m):k(new Be)},function(b,c){J(d.b,"Sqlite error: "+c.message);a(c,p);return p})};function Jh(a,b){Qf.call(this,a,b)}H(Jh,zg);Jh.prototype.b=M("ydn.db.sql.req.WebSql");Jh.prototype.executeSql=function(a,b,c,d,e){b=Ta(d.c);if(1==b.length){var f=W(this.a,b[0]);f||k(new De(b[0]));var g=yh(d);if(g)for(var h=0;h<g.length;h++)Td(f,g[h])||k(new De('Index "'+g[h]+'" not found in '+b[0]));(d.e?new Ih(f,d):new Gh(f,d)).oc(c,a,e)}else k(new de(d.G))};function Kh(a,b){Qf.call(this,a,b)}H(Kh,mg);Kh.prototype.b=M("ydn.db.sql.req.SimpleStore");Kh.prototype.executeSql=function(a,b,c,d,e){(e=wh(d,e))&&k(new He(e));e=Ta(d.c);if(1==e.length){var f=W(this.a,e[0]);f||k(new De(e[0]));var g=yh(d);if(g)for(var h=0;h<g.length;h++)Td(f,g[h])||k(new T('Index "'+g[h]+'" not found in '+e[0]));(d.e?new Ah(f,d):new zh(f,d)).Vb(a,b,c,this)}else k(new zd(d.G))};function Lh(a,b,c){Hg.call(this,a,b,c)}H(Lh,Qg);Lh.prototype.executeSql=function(a,b){for(var c=pc(),d=new uh(a),e=Ta(d.c),f=0;f<e.length;f++){var g=W(this.c,e[f]);g||k(new T("store: "+g+" not exists."))}var h=this;K(this.b,"executeSql: "+a+" params: "+b);this.a.i(c,function(a,c,e){$(h).executeSql(a,c,e,d,b||[])},Ta(d.c),d.Pa);return c};function Mh(a,b,c){ph.call(this,a,b,c)}H(Mh,sh);Mh.prototype.Hb=function(){var a=this.j();if("indexeddb"==a)return new Fh(this.e,this.c);if("websql"==a)return new Jh(this.e,this.c);if("memory"==a||"localstorage"==a||"userdata"==a||"sessionstorage"==a)return new Kh(this.e,this.c);k(new Be("No executor for "+a))};Mh.prototype.ua=function(a){return new Lh(this,this.c,a)};Mh.prototype.executeSql=function(a,b){return this.d.executeSql(a,b)};function Nh(a,b,c){ph.call(this,a,b,c)}H(Nh,Mh);function Oh(a,b){Yf.call(this,a,b)}H(Oh,Yf);Oh.prototype.c=ba(s);Oh.prototype.d=function(a,b){function c(b){z(a[b])?(e=s,d[b]=p):(d[b]=s,0<=b-1&&c(b-1))}var d=[],e=p;c(a.length-1);e&&(d=[]);return Zf(this,d,b)};function Ph(a,b){Yf.call(this,a,b);this.e=a instanceof Vf&&!!a.va}H(Ph,Yf);Ph.prototype.b=M("ydn.db.algo.ZigzagMerge");Ph.prototype.e=s;Ph.prototype.c=function(a,b){var c=Ph.z.c.call(this,a,b);if(this.e){var d=a[0].P().split(", ");1<d.length?d[d.length-1]!=this.a.va&&k(new ie("Output streamer projection field must be same as postfix field in the iterator")):J(this.b,"Unable to check correctness of output streamer.")}return c};
Ph.prototype.d=function(a,b){function c(a,b){var c=a.slice(0,a.length-1);c.push(b);return c}var d=[];if(0==a.length||a[0]==r||a[0]==r)return[];for(var e=p,f=0,g=a[f][a[f].length-1],h=[],l=1;l<a.length;l++)if(a[l]!=r){var n=a[l][a[l].length-1],q=U(g,n);h[l]=q;1===q?e=s:-1===q&&(e=s,g=n,f=1)}else return[];if(e){for(e=0;e<a.length;e++)a[e]!=r&&(d[e]=p);this.a&&(this.e?this.a.push(b[0],g):this.a.push(b[0]));return d}if(0==f)for(e=1;e<a.length;e++)1===h[e]&&(d[e]=c(a[e],g));else for(e=0;e<a.length;e++)e!=
f&&a[e]!=r&&1===U(g,a[e][a[e].length-1])&&(d[e]=c(a[e],g));return{"continue":d}};function Qh(a,b){Yf.call(this,a,b)}H(Qh,Yf);Qh.prototype.c=ba(s);Qh.prototype.d=function(a,b){var c=[],d=b[0];if(d==r)return[];for(var e=p,f=s,g=d,h=[],l=1;l<a.length;l++)if(b[l]!=r){var n=U(d,b[l]);h[l]=n;1===n?e=s:-1===n&&(e=s,f=p,1===U(b[l],g)&&(g=b[l]))}else e=s,f=p;if(e)for(f=0;f<a.length;f++)b[f]!=r&&(c[f]=p);else if(f)for(f=0;f<a.length;f++)b[f]!=r&&1===U(g,b[f])&&(c[f]=g);else for(f=1;f<a.length;f++)1===h[f]&&(c[f]=d);return e?(this.f++,this.a&&this.a.push(g),c):{continuePrimary:c}};G("ydn.db.Storage",Nh);G("ydn.db.algo.NestedLoop",Oh);G("ydn.db.algo.ZigzagMerge",Ph);G("ydn.db.algo.SortedMerge",Qh);N.prototype.done=N.prototype.U;N.prototype.fail=N.prototype.Yb;N.prototype.then=N.prototype.B;N.prototype.always=N.prototype.sc;gd.prototype.addEventListener=gd.prototype.Bb;G("ydn.db.con.Storage",Z);Z.prototype.getType=Z.prototype.j;Z.prototype.setName=Z.prototype.s;Z.prototype.getName=Z.prototype.getName;Z.prototype.getSchema=Z.prototype.Bc;Z.prototype.transaction=Z.prototype.transaction;Z.prototype.close=Z.prototype.ta;G("ydn.db.version","0.6.3");G("ydn.db.deleteDatabase",function(a,b){ue&&((!b||"indexeddb"==b)&&ue&&"deleteDatabase"in ue)&&ue.deleteDatabase(a);ia(y.openDatabase)&&(!b||"websql"==b)&&Me(a);(!b||"localstorage"==b)&&Bf(a);(!b||"sessionstorage"==b)&&Df(a)});
Sg.prototype.name=Sg.prototype.name;Sg.prototype.getVersion=Sg.prototype.Vc;Sg.prototype.getOldVersion=Sg.prototype.vc;Sg.prototype.getError=Sg.prototype.Uc;ph.prototype.branch=ph.prototype.rc;ph.prototype.run=ph.prototype.Dc;Hg.prototype.abort=Hg.prototype.e;ph.prototype.abort=ph.prototype.Xc;rh.prototype.branch=rh.prototype.rc;rh.prototype.add=rh.prototype.qb;rh.prototype.get=rh.prototype.ya;rh.prototype.values=rh.prototype.A;rh.prototype.put=rh.prototype.za;rh.prototype.clear=rh.prototype.clear;rh.prototype.remove=rh.prototype.rb;rh.prototype.count=rh.prototype.count;Ig.prototype.add=Ig.prototype.qb;Ig.prototype.get=Ig.prototype.ya;Ig.prototype.values=Ig.prototype.A;Ig.prototype.put=Ig.prototype.za;Ig.prototype.clear=Ig.prototype.clear;Ig.prototype.remove=Ig.prototype.rb;
Ig.prototype.count=Ig.prototype.count;G("ydn.db.cmp",U);G("ydn.db.Key",ld);ld.prototype.id=ld.prototype.uc;ld.prototype.parent=ld.prototype.Nc;ld.prototype.storeName=ld.prototype.Oc;G("ydn.db.KeyRange",R);R.upperBound=pd;R.lowerBound=qd;R.bound=od;R.only=function(a){return new R(a,a,s,s)};R.starts=rd;Rg.prototype.store_name=Rg.prototype.d;Rg.prototype.getStoreName=Rg.prototype.f;Mg.prototype.name=Mg.prototype.name;Mg.prototype.getKey=Mg.prototype.g;Mg.prototype.getValue=Mg.prototype.j;
Kg.prototype.name=Kg.prototype.name;Kg.prototype.getKeys=Kg.prototype.ea;Kg.prototype.getValues=Kg.prototype.ab;sh.prototype.scan=sh.prototype.Tc;sh.prototype.map=sh.prototype.map;sh.prototype.reduce=sh.prototype.ob;sh.prototype.open=sh.prototype.Sc;Qg.prototype.scan=Qg.prototype.lc;Qg.prototype.map=Qg.prototype.map;Qg.prototype.reduce=Qg.prototype.ob;Qg.prototype.open=Qg.prototype.kc;Ef.prototype.getKey=Ef.prototype.jc;Ef.prototype.getPrimaryKey=Ef.prototype.N;Ef.prototype.getValue=Ef.prototype.aa;Ef.prototype.update=Ef.prototype.update;Ef.prototype.clear=Ef.prototype.clear;G("ydn.math.Expression",th);
th.prototype.evaluate=th.prototype.c;th.prototype.compile=th.prototype.d;th.parseRpn=function(a){return new th(a.match(/[^\s"']+|"[^"]*"|'[^']*'/g))};th.parseInfix=function(){k(new ee("Too lazy to learn Dutch in Shunting Yard station, we speak Polish here."))};G("ydn.db.Iterator",Y);G("ydn.db.KeyCursors",Lf);G("ydn.db.ValueCursors",Nf);G("ydn.db.Cursors",Mf);G("ydn.db.IndexValueCursors",Of);Y.prototype.count=Y.prototype.count;Y.prototype.getState=Y.prototype.bc;Y.prototype.getKeyRange=Y.prototype.Hc;
Y.prototype.getIndexName=Y.prototype.P;Y.prototype.getStoreName=Y.prototype.Jc;Y.prototype.isReversed=Y.prototype.Qb;Y.prototype.isUnique=Y.prototype.lb;Y.prototype.isKeyIterator=Y.prototype.Kc;Y.prototype.isIndexIterator=Y.prototype.wc;Y.prototype.getPrimaryKey=Y.prototype.Ic;Y.prototype.getKey=Y.prototype.Gc;Y.prototype.resume=Y.prototype.Cc;Y.prototype.reset=Y.prototype.Lc;Y.prototype.reverse=Y.prototype.Mc;Lf.where=function(a,b,c,d,e){return new Lf(a,yd(b,c,d,e))};
Nf.where=function(a,b,c,d,e){return new Nf(a,yd(b,c,d,e))};Mf.where=function(a,b,c,d,e,f){return new Mf(a,b,yd(c,d,e,f))};Of.where=function(a,b,c,d,e,f){return new Of(a,b,yd(c,d,e,f))};G("ydn.db.Streamer",Vf);Vf.prototype.push=Vf.prototype.push;Vf.prototype.collect=Vf.prototype.Pc;Vf.prototype.setSink=Vf.prototype.Fc;var Rh=new function(){this.a=ra()};function Sh(a){this.e=a||"";this.f=Rh}Sh.prototype.a=p;Sh.prototype.c=s;function Th(a){a=new Date(a.g);return Uh(a.getFullYear()-2E3)+Uh(a.getMonth()+1)+Uh(a.getDate())+" "+Uh(a.getHours())+":"+Uh(a.getMinutes())+":"+Uh(a.getSeconds())+"."+Uh(Math.floor(a.getMilliseconds()/10))}function Uh(a){return 10>a?"0"+a:String(a)}function Xh(a,b){var c=(a.g-b)/1E3,d=c.toFixed(3),e=0;if(1>c)e=2;else for(;100>c;)e++,c*=10;for(;0<e--;)d=" "+d;return d}function Yh(a){Sh.call(this,a)}H(Yh,Sh);Yh.prototype.c=p;
Yh.prototype.d=function(a){var b;switch(a.f.value){case Ob.value:b="dbg-sh";break;case Pb.value:b="dbg-sev";break;case Qb.value:b="dbg-w";break;case Rb.value:b="dbg-i";break;default:b="dbg-f"}var c=[];c.push(this.e," ");this.a&&c.push("[",Th(a),"] ");c.push("[",Ba(Xh(a,this.f.a)),"s] ");c.push("[",va(a.d),"] ");c.push('<span class="',b,'">',ua(Ba(va(a.e))));this.c&&a.c&&c.push("<br>",ua(Ba(a.a||"")));c.push("</span><br>");return c.join("")};function Zh(a){Sh.call(this,a)}H(Zh,Sh);
Zh.prototype.d=function(a){var b=[];b.push(this.e," ");this.a&&b.push("[",Th(a),"] ");b.push("[",Xh(a,this.f.a),"s] ");b.push("[",a.d,"] ");b.push(a.e,"\n");this.c&&a.c&&b.push(a.a,"\n");return b.join("")};function $h(){this.f=oa(this.g,this);this.a=new Zh;this.a.a=s;this.c=this.a.c=s;this.d="";this.e={}}$h.prototype.g=function(a){if(!this.e[a.d]){var b=this.a.d(a),c=ai;if(c)switch(a.f){case Ob:bi(c,"info",b);break;case Pb:bi(c,"error",b);break;case Qb:bi(c,"warn",b);break;default:bi(c,"debug",b)}else window.opera?window.opera.postError(b):this.d+=b}};var ai=window.console;function bi(a,b,c){if(a[b])a[b](c);else a.log(c)};var ci,di=!qb||qb&&9<=Db;!rb&&!qb||qb&&qb&&9<=Db||rb&&Bb("1.9.1");qb&&Bb("9");function ei(a,b){var c;c=a.className;c=C(c)&&c.match(/\S+/g)||[];for(var d=Ua(arguments,1),e=c.length+d.length,f=c,g=0;g<d.length;g++)0<=Ja(f,d[g])||f.push(d[g]);a.className=c.join(" ");return c.length==e};function fi(a,b){Xa(b,function(b,d){"style"==d?a.style.cssText=b:"class"==d?a.className=b:"for"==d?a.htmlFor=b:d in gi?a.setAttribute(gi[d],b):0==d.lastIndexOf("aria-",0)||0==d.lastIndexOf("data-",0)?a.setAttribute(d,b):a[d]=b})}var gi={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};
function hi(a,b,c){function d(c){c&&b.appendChild(C(c)?a.createTextNode(c):c)}for(var e=2;e<c.length;e++){var f=c[e];B(f)&&!(F(f)&&0<f.nodeType)?Ka(ii(f)?Ta(f):f,d):d(f)}}function ii(a){if(a&&"number"==typeof a.length){if(F(a))return"function"==typeof a.item||"string"==typeof a.item;if(ia(a))return"function"==typeof a.item}return s}function ji(a){this.a=a||y.document||document}
function ki(a,b){var c;c=a.a;var d=b&&"*"!=b?b.toUpperCase():"";c.querySelectorAll&&c.querySelector&&d?c=c.querySelectorAll(d+""):c=c.getElementsByTagName(d||"*");return c}
ji.prototype.c=function(a,b,c){var d=this.a,e=arguments,f=e[0],g=e[1];if(!di&&g&&(g.name||g.type)){f=["<",f];g.name&&f.push(' name="',va(g.name),'"');if(g.type){f.push(' type="',va(g.type),'"');var h={};$a(h,g);delete h.type;g=h}f.push(">");f=f.join("")}f=d.createElement(f);g&&(C(g)?f.className=g:A(g)?ei.apply(r,[f].concat(g)):fi(f,g));2<e.length&&hi(d,f,e);return f};
ji.prototype.contains=function(a,b){if(a.contains&&1==b.nodeType)return a==b||a.contains(b);if("undefined"!=typeof a.compareDocumentPosition)return a==b||Boolean(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a};function li(a){this.f=oa(this.g,this);this.c=new Yh;this.d=this.c.a=s;this.a=a;this.e=this.a.ownerDocument||this.a.document;var b=(a=this.a)?new ji(9==a.nodeType?a:a.ownerDocument||a.document):ci||(ci=new ji),c=r;qb?(a=c=b.a.createStyleSheet(),qb?a.cssText=".dbg-sev{color:#F00}.dbg-w{color:#C40}.dbg-sh{font-weight:bold;color:#000}.dbg-i{color:#444}.dbg-f{color:#999}.dbg-ev{color:#0A0}.dbg-m{color:#990}.logmsg{border-bottom:1px solid #CCC;padding:2px}.logsep{background-color: #8C8;}.logdiv{border:1px solid #CCC;background-color:#FCFCFC;font:medium monospace}":
a.innerHTML=".dbg-sev{color:#F00}.dbg-w{color:#C40}.dbg-sh{font-weight:bold;color:#000}.dbg-i{color:#444}.dbg-f{color:#999}.dbg-ev{color:#0A0}.dbg-m{color:#990}.logmsg{border-bottom:1px solid #CCC;padding:2px}.logsep{background-color: #8C8;}.logdiv{border:1px solid #CCC;background-color:#FCFCFC;font:medium monospace}"):(a=ki(b,"head")[0],a||(c=ki(b,"body")[0],a=b.c("head"),c.parentNode.insertBefore(a,c)),b=c=b.c("style"),qb?b.cssText=".dbg-sev{color:#F00}.dbg-w{color:#C40}.dbg-sh{font-weight:bold;color:#000}.dbg-i{color:#444}.dbg-f{color:#999}.dbg-ev{color:#0A0}.dbg-m{color:#990}.logmsg{border-bottom:1px solid #CCC;padding:2px}.logsep{background-color: #8C8;}.logdiv{border:1px solid #CCC;background-color:#FCFCFC;font:medium monospace}":
b.innerHTML=".dbg-sev{color:#F00}.dbg-w{color:#C40}.dbg-sh{font-weight:bold;color:#000}.dbg-i{color:#444}.dbg-f{color:#999}.dbg-ev{color:#0A0}.dbg-m{color:#990}.logmsg{border-bottom:1px solid #CCC;padding:2px}.logsep{background-color: #8C8;}.logdiv{border:1px solid #CCC;background-color:#FCFCFC;font:medium monospace}",a.appendChild(c));this.a.className+=" logdiv"}
li.prototype.g=function(a){var b=100>=this.a.scrollHeight-this.a.scrollTop-this.a.clientHeight,c=this.e.createElement("div");c.className="logmsg";c.innerHTML=this.c.d(a);this.a.appendChild(c);b&&(this.a.scrollTop=this.a.scrollHeight)};li.prototype.clear=function(){this.a.innerHTML=""};var mi=r,ni=r;M("ydn.debug");G("ydn.debug.log",function(a,b,c){if(E(b))b=new Nb("log",b);else if(C(b)){b=b.toUpperCase();if(!Xb){Xb={};for(var d=0,e;e=Wb[d];d++)Xb[e.value]=e,Xb[e.name]=e}b=Xb[b]||r}else b=Tb;M(a||"ydn").c=b;z(c)?ni||(a=ni=new li(c),p!=a.d&&(c=ec(),b=a.f,c.a||(c.a=[]),c.a.push(b),a.d=p),ec().c=Qb):!mi&&!ni&&(a=mi=new $h,p!=a.c&&(c=ec(),b=a.f,c.a||(c.a=[]),c.a.push(b),a.c=p),ec().c=Qb)});Z.prototype.db=Z.prototype.Qc;})();

            //@ sourceMappingURL=ydn.db-dev.js.map
        