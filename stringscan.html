<html><head>
<meta http-equiv="content-type" content="text/html; charset=ISO-8859-1"></head><body><h1>Global string scan 2011-01-23 23:28:47</h1><small></small><pre><small><b>scanning file: /var/www/an2google/trunk/setup.inc.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*    this is the main setup file for configuring your awareNet installation
comment: //--------------------------------------------------------------------------------------------------
comment: //  (1) INSTALL PATH
comment: //  This is how the project knows where it is on the system, for constructing absolute local 
comment: //	filesystem paths.
comment: //  (2) SERVER PATH
comment: //  Tells the project where it is on the network, set to '/' if there is any doubt, or if more than 
comment: //	one domain name will be used.
comment: //  (3) DATABASE USER
comment: //  This is the account through which the project will access the database.
comment: //  (4) Default Module
comment: //  This is the module which handles '/' requests
comment: //  (5) BLOCK CACHE
comment: //  Enable block cache
comment: //  (6) SITE NAME
comment: //  Website name - for page titles
comment: //  (7) THEME
comment: //  Which of the installed themes the site is currently using.
comment: //  (8) LOG LEVEL
comment: //  Log website activity to the specified level (0 - none, 1 - web requests, 2 - debug)
comment: //  (9) CRON INTERVAL
comment: //  Minimum time between execution of scheduled tasks (seconds)
comment: //  (10) HTTP PROXY
comment: //  If this server is on an intranet, it may need to use a web proxy when connecting to peers.
comment: //%	IP address [string]
comment: //%	(yes|no) [string]
comment: //%	IP or domain name [string]
comment: //  (11) RSA ENCRYPTION
comment: //  This is used by P2P system
string: '/var/www/an2google/trunk/'
string: 'http://awarenet.co.za/'
string: 'MySQL'
string: 'strix'
string: ''
string: 'localhost'
string: 'awarenet'
string: 'home'
string: 'false'
string: 'awareNet'
string: 'clockface'
string: '2'
string: ''
string: 'no'
string: ''
string: ''
string: ''
string: ''
string: '1024'
string: "-----BEGIN PUBLIC KEY-----\n"
string: "MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCv5wlwCFWOH4LqdBVpPJdtz9jn\n"
string: "Y5J7aNUbnJZ2RPqWFdBMm+sVvWgHwmaY9iwmEXVmck+r0V6UmHIR5jCk5dZb7Qbh\n"
string: "0m0lS9Lg/84oAqnPazg2Ueyu7Yd/zEYRvI09BRk5x3cuquSIf2lJbm5BlfEZ9zW1\n"
string: "wEkNEjrXjjkOs0/vrQIDAQAB\n"
string: "-----END PUBLIC KEY-----\n"
string: "-----BEGIN RSA PRIVATE KEY-----\n"
string: "MIICWwIBAAKBgQCv5wlwCFWOH4LqdBVpPJdtz9jnY5J7aNUbnJZ2RPqWFdBMm+sV\n"
string: "vWgHwmaY9iwmEXVmck+r0V6UmHIR5jCk5dZb7Qbh0m0lS9Lg/84oAqnPazg2Ueyu\n"
string: "7Yd/zEYRvI09BRk5x3cuquSIf2lJbm5BlfEZ9zW1wEkNEjrXjjkOs0/vrQIDAQAB\n"
string: "AoGAK36YUdBtv0fBalGr3aqy0t9bBdQUK1m/oCU2+yWRRL0+FUNUfLqp14lVLytn\n"
string: "vT4B5oQLeTO7DEkpo41kp9GBEC5/oQla+JbPRNcIrqeNqwWGodBnquMb+qExy6k7\n"
string: "zQ1XjCTWpLHFMomhF3jUipyzg2PaDV5sN6SsUzCzgp/zzaECQQDpYo+/V1wnkmeG\n"
string: "6wZGqpYJ62dw4i2qNwaCfRzwTa8AHKpCuXbnuULB/MN66Zm8z9Xm01+XcIN3rssN\n"
string: "e18CQmGFAkEAwPKKtYwkZFhNhL4zsUf2hYeFvFHftFkmmdMdysmfB/6TNYT+/Lir\n"
string: "/BVBeEv3hwMXTbwofzvO/Qup+Q9m77caCQJAQu5kQUChiiu/iv7eBugnLWMYgFQt\n"
string: "OnKbaFLPOM9ej86ouYgM5LnJvm5p9VcHIxILyy31bS30Vh+H1i76eWBmLQJAfK09\n"
string: "DEreSSj2DkyJQojptyb3N9T/5J2m38cXfS4DYTsTDIY/7jW2jFF/2Kfd7pQEvupS\n"
string: "kMSo38JlttZJAaUjYQJAdB49eqTjJBfJNIwzlHHvadH1S9jNlVpvgbff5+bqvk5U\n"
string: "I1pSgVaK8M7oQ3/05XeOBoRq/XuYRKlXCApw42nK9g==\n"
string: "-----END RSA PRIVATE KEY-----\n"

<b>scanning file: /var/www/an2google/trunk/index.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //		 _                          _                                _    
comment: //		| | ____ _ _ __   ___ _ __ | |_ __ _   ___  _ __ __ _  _   _| | __
comment: //		| |/ / _` | '_ \ / _ \ '_ \| __/ _` | / _ \| '__/ _` || | | | |/ /
comment: //		|   &lt; (_| | |_) |  __/ | | | || (_| || (_) | | | (_| || |_| |   &lt; 
comment: //		|_|\_\__,_| .__/ \___|_| |_|\__\__,_(_)___/|_|  \__, (_)__,_|_|\_\
comment: //		          |_|                                   |___/     
comment: //                                                                           	Version 2.0 Beta
comment: //--------------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
comment: //	include the kapenta core functions (database access, templating system, etc)
comment: //--------------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
comment: //	important global objects
comment: //--------------------------------------------------------------------------------------------------
comment: //	object for interacting with core
comment: //	current user session
comment: //	database wrapper
comment: //	interpret HTTP request
comment: //	the current theme
comment: //	document to be returned
comment: //	handles object aliases
comment: //	user notification of events
comment: //	object revision history and recycle bin
comment: //	miscellaneous
comment: //	P2P subsystem
comment: //	(DEPRECATED)
comment: //	(DEPRECATED)
comment: //--------------------------------------------------------------------------------------------------
comment: //	load the current user (public if not logged in)
comment: //--------------------------------------------------------------------------------------------------
comment: //	the user record itself
comment: //	object with user's permissions
comment: //	user's session on the P2P system
comment: //	only logged in users can be addressed
comment: //	create new session is none found
comment: //	record that this user is still active
comment: //--------------------------------------------------------------------------------------------------
comment: //	set up the debugger (only admins can toggle debug mode, will persist across multiple logins)
comment: //--------------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
comment: //	kapenta environment is set up, load the action requested by the user and pass control
comment: //--------------------------------------------------------------------------------------------------
string: 'setup.inc.php'
string: 'core/core.inc.php'
string: 'REQUEST_URI'
string: 'public'
string: 'admin'
string: 'debug'
string: 'on'
string: 'debug'
string: 'modules/'
string: '/actions/'
string: '.act.php'
string: 'Unkown action'
string: 'modules/'
string: '/actions/'
string: '.act.php'

<b>scanning file: /var/www/an2google/trunk/themes/clockface/views/tagcloud.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	make tag cloud
comment: //--------------------------------------------------------------------------------------------------
comment: //	data is a base64_encoded, serialised array of [weight][link][label] triplets
comment: //TODO: make this compatable with block system
comment: // add min for negative values?
string: 'data'
string: '(no tag data)'
string: ''
string: 'data'
string: 'weight'
string: 'weight'
string: 'weight'
string: "&lt;a href='"
string: 'link'
string: "' style='color: #444444;'&gt;"
string: "&lt;font size='"
string: "'&gt;"
string: 'label'
string: "&lt;/font&gt;&lt;/a&gt;\n"

<b>scanning file: /var/www/an2google/trunk/themes/clockface/views/submenu.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	make a submenu item
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: label - label/caption of menu item [string]
comment: //arg: link - URL or Javascript [string]
comment: //arg: alt - alt/tooltip text [string]
comment: //arg: selected - not used at present (yes|no) [string]
comment: //%	label/caption, default is 'item' [string]
comment: //%	not used at present (yes|no) [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments
comment: //----------------------------------------------------------------------------------------------
string: 'item'
string: ''
string: ''
string: 'no'
string: ''
string: 'label'
string: 'label'
string: 'link'
string: 'link'
string: 'alt'
string: 'alt'
string: 'selected'
string: 'selected'
string: "&lt;span class='submenu'&gt;&lt;a href='$link' &gt;$label&lt;/a&gt;&lt;/span&gt;"

<b>scanning file: /var/www/an2google/trunk/themes/clockface/views/selecttemplates.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	make an HTML form selection box listing templates available in this theme
comment: //--------------------------------------------------------------------------------------------------
comment: //TODO: this should really be a feature of the admin module
string: 'template'
string: ''
string: ''
string: 'selected'
string: 'selected'
string: 'fieldName'
string: 'fieldName'
string: "&lt;select name='"
string: "'&gt;\n"
string: "\t&lt;option value='"
string: "'&gt;$temp&lt;/option&gt;"
string: "\t&lt;option value='"
string: "' selected='selected'&gt;$temp&lt;/option&gt;"
string: "&lt;/select&gt;\n"

<b>scanning file: /var/www/an2google/trunk/themes/clockface/views/pagination.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	make pagination bar (page caterpillar: &lt;&lt; | &gt;&gt; [1][2][3][4]...[15][16] )
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: page - page we're currently on (int) [string]
comment: //arg: total - total number of pages (int) [string]
comment: //arg: link - URL without page_x argument [string]
comment: //%	return value [string]
comment: //%	link to previous page, if any [string] 
comment: //%	link to next page, if any [string]
comment: //%	list of links to other pages [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block, could probably do with some more error checking
comment: //----------------------------------------------------------------------------------------------
string: ''
string: ''
string: ''
string: ''
string: 'page'
string: 'error: page'
string: 'total'
string: 'error: total'
string: 'link'
string: 'error: link'
string: 'page'
string: 'link'
string: 'page_'
string: 'page'
string: "&lt;a href='"
string: "/' class='black'&gt;&lt;&lt; previous &lt;/a&gt;"
string: ' | '
string: 'page'
string: 'total'
string: 'link'
string: 'page_'
string: 'page'
string: "&lt;a href='"
string: "/' class='black'&gt; next &gt;&gt; &lt;/a&gt;"
string: 'total'
string: "&lt;a href='"
string: 'link'
string: "' class='black'&gt;["
string: "]&lt;/a&gt; \n"
string: 'link'
string: "page_"
string: "&lt;a href='"
string: "/' class='black'&gt;["
string: "]&lt;/a&gt; \n"
string: "&lt;table noborder width='100%'&gt;&lt;tr&gt;&lt;td bgcolor='#dddddd'&gt;\n&amp;nbsp;&amp;nbsp;"
string: ' '
string: "&lt;br/&gt;\n"
string: "&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;\n"

<b>scanning file: /var/www/an2google/trunk/themes/clockface/views/navtitlebox.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	returns a navbox title graphic
comment: //--------------------------------------------------------------------------------------------------
comment: //opt: label - text displayed on the box [string]
comment: //opt: width - width of the box - default=20 [string]
comment: //opt: toggle - id of a div to toggle visibility [string]
comment: //opt: hidden - set to yes if div is hidden by default, initial state of (+) button [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	add toggle button 
comment: //----------------------------------------------------------------------------------------------	
comment: //----------------------------------------------------------------------------------------------
comment: //	make html (attache button event with javascript or it behaves strangely
comment: //----------------------------------------------------------------------------------------------	
string: 'label'
string: 'label'
string: 'rss'
string: ''
string: 'link'
string: ''
string: 'label'
string: 'label'
string: 'label'
string: 'width'
string: 'pxxNavBoxWidth'
string: 'width'
string: ''
string: ''
string: ''
string: ''
string: 'toggle'
string: '%%serverPath%%themes/clockface/icons/btn-minus.png'
string: 'hidden'
string: 'yes'
string: 'hidden'
string: '%%serverPath%%themes/clockface/icons/btn-plus.png'
string: "id='ti"
string: "'"
string: "style='cursor: pointer;'"
string: "onClick=\"toggleVisible('ti"
string: "','"
string: 'toggle'
string: "');\""
string: "&lt;img $id class='navboxbtn' src='"
string: "' width='16px'&gt;"
string: "&lt;script language='Javascript'&gt;attachOnClick('ti"
string: "', "
string: "\"toggleVisible('ti"
string: "','"
string: 'toggle'
string: "');\");&lt;/script&gt;"
string: "&lt;div class='navbox' $onClick $style&gt;"
string: 'label'
string: "&lt;/div&gt;\n$eventJs"

<b>scanning file: /var/www/an2google/trunk/themes/clockface/views/menu.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	make a menu item
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: label - label or caption of this menu item [string]
comment: //arg: link - URL or Javascript for when this item is selected [string]
comment: //arg: alt - alt/tooltop text of menu item [string]
comment: //arg: selected - if this is the section of the site currently displayed (yes|no) [string]
comment: //TODO: Stop making images for this, use HTML+CSS, srsly
comment: //%	default label [string]
comment: //%	no default link [string]
comment: //% no default alt/tooltip text [string]
comment: //% item is not 'selected' by default [string]
comment: //------------------------------------------------------------------------------------------------------
comment: //	check arguments
comment: //------------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	choose a filename
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	create the graphic if it does not exist
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	return html
comment: //----------------------------------------------------------------------------------------------
string: 'themes/clockface/inc/mkmenuitem.inc.php'
string: 'item'
string: ''
string: ''
string: 'no'
string: 'label'
string: 'label'
string: 'link'
string: 'link'
string: 'alt'
string: 'alt'
string: 'selected'
string: 'selected'
string: 'menu_'
string: '_'
string: '.png'
string: 'themes/'
string: '/drawcache/'
string: "&lt;a href='"
string: "'&gt;&lt;img class='menu1' src='"
string: "' border='0' /&gt;&lt;/a&gt;"

<b>scanning file: /var/www/an2google/trunk/themes/clockface/views/button.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	make a button graphic
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: label - label/caption of the button [string]
comment: //arg: alt - alt/tooltip text of the button [string]
comment: //arg: selected - probably not used (yes|no) [string]
comment: //%	return value [string]
comment: //%	label/caption, default is 'item' [string]
comment: //%	alt/tooltip text, default is none [string]
comment: //%	probably not used (yes|no) [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	choose a filename
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	create the graphic if it does not exist
comment: //----------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------------------
comment: //	make and return HTML snippet
comment: //------------------------------------------------------------------------------------------------------
string: 'themes/clockface/inc/mkmenuitem.inc.php'
string: ''
string: 'item'
string: ''
string: ''
string: 'label'
string: 'label'
string: 'alt'
string: 'alt'
string: 'selected'
string: 'selected'
string: 'button_'
string: '_'
string: '.png'
string: 'themes/'
string: '/drawcache/'
string: "&lt;img id='btn"
string: "' class='menu1' "
string: "src='"
string: "' border='0' alt='"
string: "' /&gt;"

<b>scanning file: /var/www/an2google/trunk/themes/clockface/views/breadcrumb.inc.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	returns a navbox title graphic
comment: //--------------------------------------------------------------------------------------------------
comment: //	arguments:
comment: //		link:	URL - what happens when you click on this - default=none
comment: //		label:	text displayed on the box
comment: //----------------------------------------------------------------------------------------------
comment: //	read arguments
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	construct fileName
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check if the image already exists
comment: //----------------------------------------------------------------------------------------------
comment: //if (file_exists($fileName) == false) {
comment: //------------------------------------------------------------------------------------------
comment: //	img file does not exist, make it
comment: //------------------------------------------------------------------------------------------
comment: //$height = $s['pxxBreadcrumbHeight'];
comment: //$fontFile = $installPath . 'data/fonts/' . $s['fonBreadcrumb'];
comment: //$fontSize = $s['fnsBreadcrumb'];
comment: //$fontX = $s['pxxBreadcrumbFonX'];
comment: //$fontY = $s['pxxBreadcrumbFonY'];
comment: //$bbox = imageftbbox($fontSize, 0, $fontFile, $s['label']);		// measure size of text
comment: //$width = ($bbox[4] - $bbox[7]) - 25;
comment: //------------------------------------------------------------------------------------------
comment: //	create blank image
comment: //------------------------------------------------------------------------------------------
comment: //$img = imagecreatetruecolor($width, $height);
comment: //$bgRgb = imgHexToRgb($s['clrBreadcrumbBg']);	
comment: //$fgRgb = imgHexToRgb($s['clrBreadcrumbFg']);
comment: //$clrBg = imagecolorallocate($img, $bgRgb['r'], $bgRgb['g'], $bgRgb['b']);
comment: //$clrFg = imagecolorallocate($img, $fgRgb['r'], $fgRgb['g'], $fgRgb['b']);
comment: //imagefilledrectangle($img, 0, 0, $width, $height, $clrBg);
comment: //imagefttext($img, $fontSize, 0, $fontX, $fontY, $clrFg, $fontFile, $s['label']);
comment: //imagepng($img, $fileName);
comment: //}
comment: //------------------------------------------------------------------------------------------------------
comment: //	make html snippet 
comment: //------------------------------------------------------------------------------------------------------
comment: //$out = "&lt;img src='" . $boxUrl . "' border='0' alt='" . $s['label'] . "'&gt;";
comment: //$out = "&lt;a href='" . $s['link'] . "'&gt;" . $out . "&lt;/a&gt;";
comment: //------------------------------------------------------------------------------------------------------
comment: //	and we're done
comment: //------------------------------------------------------------------------------------------------------
string: 'label'
string: 'label'
string: 'link'
string: ''
string: 'label'
string: 'label'
string: 'label'
string: 'link'
string: 'link'
string: 'link'
string: 'label'
string: 'label'
string: 'label'
string: '...'
string: 'themes/'
string: '/drawcache/'
string: 'bc_'
string: 'pxxBreadcrumbHeight'
string: '_'
string: 'label'
string: '.png'
string: "&lt;a href='"
string: 'link'
string: "' style='color: #4e4e4e;'&gt;&lt;b&gt;"
string: 'label'
string: "&lt;/b&gt;&lt;/a&gt;"

<b>scanning file: /var/www/an2google/trunk/themes/clockface/views/breadcrumb.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	returns breadcrumb piece
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: label - label/caption of this breadrumb part [string]
comment: //arg: link - URL or javascript, default is none [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	read arguments
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	construct fileName
comment: //----------------------------------------------------------------------------------------------
comment: //$fileName = 'themes/' . $kapenta-&gt;defaultTheme . '/drawcache/'
comment: //		  . 'bc_' . $s['pxxBreadcrumbHeight'] . '_'
comment: //		  . $utils-&gt;makeAlphaNumeric($s['label']) . '.png';
comment: //----------------------------------------------------------------------------------------------
comment: //	check if the image already exists
comment: //----------------------------------------------------------------------------------------------
comment: //if (false == file_exists($fileName)) {
comment: //------------------------------------------------------------------------------------------
comment: //	img file does not exist, make it
comment: //------------------------------------------------------------------------------------------
comment: //$height = $s['pxxBreadcrumbHeight'];
comment: //$fontFile = $installPath . 'data/fonts/' . $s['fonBreadcrumb'];
comment: //$fontSize = $s['fnsBreadcrumb'];
comment: //$fontX = $s['pxxBreadcrumbFonX'];
comment: //$fontY = $s['pxxBreadcrumbFonY'];
comment: //$bbox = imageftbbox($fontSize, 0, $fontFile, $s['label']);		// measure size of text
comment: //$width = ($bbox[4] - $bbox[7]) - 25;
comment: //------------------------------------------------------------------------------------------
comment: //	create blank image
comment: //------------------------------------------------------------------------------------------
comment: //$img = imagecreatetruecolor($width, $height);
comment: //$bgRgb = imgHexToRgb($s['clrBreadcrumbBg']);	
comment: //$fgRgb = imgHexToRgb($s['clrBreadcrumbFg']);
comment: //$clrBg = imagecolorallocate($img, $bgRgb['r'], $bgRgb['g'], $bgRgb['b']);
comment: //$clrFg = imagecolorallocate($img, $fgRgb['r'], $fgRgb['g'], $fgRgb['b']);
comment: //imagefilledrectangle($img, 0, 0, $width, $height, $clrBg);
comment: //imagefttext($img, $fontSize, 0, $fontX, $fontY, $clrFg, $fontFile, $s['label']);
comment: //imagepng($img, $fileName);
comment: //}
comment: //------------------------------------------------------------------------------------------------------
comment: //	make html snippet 
comment: //------------------------------------------------------------------------------------------------------
comment: //$boxUrl = str_replace($installPath, $serverPath, $fileName);
comment: //$out = "&lt;img src='" . $boxUrl . "' border='0' alt='" . $s['label'] . "'&gt;";
comment: //$out = "&lt;a href='" . $s['link'] . "'&gt;" . $out . "&lt;/a&gt;";
comment: //------------------------------------------------------------------------------------------------------
comment: //	and we're done
comment: //------------------------------------------------------------------------------------------------------
string: 'label'
string: 'label'
string: 'link'
string: ''
string: ''
string: 'label'
string: 'label'
string: 'label'
string: 'link'
string: 'link'
string: 'link'
string: 'label'
string: 'label'
string: 'label'
string: '...'
string: "&lt;a href='"
string: 'link'
string: "' style='color: #4e4e4e;'&gt;&lt;b&gt;"
string: 'label'
string: "&lt;/b&gt;&lt;/a&gt;"

<b>scanning file: /var/www/an2google/trunk/themes/clockface/inc/mkmenuitem.inc.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	utility function for making menu items and buttons
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: fileName - of new image file, relative to installPath [string]
comment: //arg: label - caption of the menu item [string]
comment: //arg: selected - is this item selected (yes|no) [string]
comment: //------------------------------------------------------------------------------------------------------
comment: //	measure the text
comment: //------------------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------------------
comment: //	make the graphic
comment: //------------------------------------------------------------------------------------------------------
string: 'data/fonts/'
string: 'fonMenu1'
string: 'fnsMenu1'
string: 'pxxMenu1pad'
string: 'pxxMenu1height'
string: 'clrMenu1bg'
string: 'clrMenu1fg'
string: 'r'
string: 'g'
string: 'b'
string: 'r'
string: 'g'
string: 'b'
string: 'fnsMenu1'
string: 'pxxMenu1pad'
string: 'pxxMenu1top'

<b>scanning file: /var/www/an2google/trunk/modules/wiki/index.wiki.php</b>
comment: /*

Welcome!  This is the default front (index) page of the wiki.

== Access Control ==

By default this wiki can be edited by all logged in users.  Every page has a 'lock', which can be set by the administrator to allow different levels of access.  By default, the index page is locked to members of the admins group.

*/

<b>scanning file: /var/www/an2google/trunk/modules/wiki/views/summarylist.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	list all wiki pages
comment: //--------------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/wiki/models/wiki.mod.php'
string: 'modules/wiki/models/wikicode.mod.php'
string: 'modules/wiki/models/wikirevision.mod.php'
string: "select * from wiki_article order by refno DESC"
string: ''
string: "[[:wiki::summary::raUID="
string: 'UID'
string: ":]]"

<b>scanning file: /var/www/an2google/trunk/modules/wiki/views/summary.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	summarise
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - recordAlias or UID or wiki entry [string]
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/wiki/models/wiki.mod.php'
string: 'modules/wiki/models/wikicode.mod.php'
string: 'modules/wiki/models/wikirevision.mod.php'
string: 'raUID'
string: 'raUID'
string: 'modules/wiki/summary.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/wiki/views/statsnav.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	article statistics formatted for nav
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - recordAlias or UID or wiki entry [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check argument and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	look up revision stats
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	assemble the block
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/wiki/models/article.mod.php'
string: 'modules/wiki/inc/wikicode.class.php'
string: 'modules/wiki/models/revision.mod.php'
string: ''
string: 'raUID'
string: ''
string: 'raUID'
string: ''
string: 'wiki'
string: 'wiki_article'
string: 'show'
string: ''
string: "articleUID='"
string: "'"
string: 'totalRevisions'
string: 'wiki_revision'
string: 'modules/wiki/views/stats.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/wiki/views/show.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	show an article
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - recordAlias or UID or wiki entry [string]
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/wiki/models/article.mod.php'
string: 'modules/wiki/models/wikicode.mod.php'
string: 'modules/wiki/models/revision.mod.php'
string: 'raUID'
string: 'raUID'
string: 'modules/wiki/views/show.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/wiki/views/select.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	make a select element listing all wiki articles (?)
comment: //--------------------------------------------------------------------------------------------------
comment: //opt: varname - name of HTML form variable [string]
comment: //opt: default - current value [string]
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/wiki/models/wiki.mod.php'
string: 'modules/wiki/models/wikicode.mod.php'
string: 'modules/wiki/models/wikirevision.mod.php'
string: 'person'
string: ''
string: 'varname'
string: 'varname'
string: 'default'
string: 'default'
string: ''
string: "select * from wiki_article order by name"
string: "&lt;select name='"
string: "'&gt;\n"
string: 'UID'
string: "&lt;option value='"
string: 'UID'
string: "' CHECKED='CHECKED'&gt;"
string: 'name'
string: "&lt;/option&gt;\n"
string: "&lt;option value='"
string: 'UID'
string: "'&gt;"
string: 'name'
string: "&lt;/option&gt;\n"
string: "&lt;/select&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/wiki/views/revmenu.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	menu for wiki, no arguments
comment: //--------------------------------------------------------------------------------------------------
comment: //opt: raUID - recordAlias or UID of a Wiki_Revision object [string]
comment: //opt: type - may be 'content' (default) or 'talk', requires raUID [string]
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/wiki/models/article.mod.php'
string: 'modules/wiki/inc/wikicode.class.php'
string: 'raUID'
string: ''
string: 'prevrevision'
string: ''
string: 'nextrevision'
string: ''
string: 'allhistory'
string: ''
string: 'currentarticle'
string: ''
string: 'raUID'
string: ''
string: 'wiki'
string: 'wiki_article'
string: 'show'
string: 'currentarticle'
string: "[[:theme::submenu::label=Current Article::"
string: "link=%%serverPath%%wiki/"
string: ":]]"
string: 'allhistory'
string: "[[:theme::submenu::label=All::"
string: "link=%%serverPath%%wiki/history/"
string: ":]]"
string: 'prevrevision'
string: '[[:theme::submenu::label=&amp;lt;&amp;lt; Previous Revision'
string: '::link=/wiki/showrevision/'
string: ':]]'
string: 'nextrevision'
string: '[[:theme::submenu::label=Next Revision &amp;gt;&amp;gt;'
string: '::link=/wiki/showrevision/'
string: ':]]'
string: 'modules/wiki/views/revmenu.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/wiki/views/revisionsummarynav.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	summarize a Wiki_Revision in the nav (~300px wide)
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: UID - UID of a Wiki_Revision object [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check argument and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
string: 'modules/wiki/models/revision.mod.php'
string: ''
string: 'UID'
string: ''
string: 'UID'
string: ''
string: 'wiki'
string: 'wiki_revision'
string: 'show'
string: ''
string: 'modules/wiki/views/revisionsummarynav.block.php'
string: ''
string: 'reason'
string: 'reason'
string: "&lt;i&gt;(no reason given)&lt;/i&gt;"

<b>scanning file: /var/www/an2google/trunk/modules/wiki/views/menu.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	menu for wiki, no arguments
comment: //--------------------------------------------------------------------------------------------------
comment: //opt: raUID - alias or UID of a Wiki_Aricle object, or 'no' if no edit link [string]
comment: //opt: type - may be 'content' (default) or 'talk', requires raUID [string]
comment: // we have an article, make some links for it
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/wiki/models/article.mod.php'
string: 'modules/wiki/inc/wikicode.class.php'
string: 'content'
string: 'no'
string: 'raUID'
string: 'raUID'
string: 'type'
string: 'type'
string: 'newarticle'
string: ''
string: 'article'
string: ''
string: 'talkpage'
string: ''
string: 'editthis'
string: ''
string: 'history'
string: ''
string: "[[:theme::submenu::label=Front Page::link=/wiki/:]]\n"
string: "[[:theme::submenu::label=All::link=/wiki/list/:]]\n"
string: "[[:theme::submenu::label=Markup::link=/wiki/wikicode/:]]\n"
string: 'wiki'
string: 'wiki_article'
string: 'new'
string: "[[:theme::submenu::label=New Article::link=/wiki/new/:]]\n"
string: 'wiki'
string: 'wiki_article'
string: 'edit'
string: 'newarticle'
string: '[[:theme::submenu::label=New Article::link=/wiki/new/:]]'
string: 'no'
string: 'article'
string: "[[:theme::submenu::label=Article::"
string: "link=%%serverPath%%wiki/"
string: ":]]"
string: 'talkpage'
string: "[[:theme::submenu::label=Discussion::"
string: "link=%%serverPath%%wiki/talk/"
string: ":]]"
string: 'history'
string: "[[:theme::submenu::label=History::"
string: "link=%%serverPath%%wiki/history/"
string: ":]]"
string: 'content'
string: 'editthis'
string: "[[:theme::submenu::label=Edit This Page::"
string: "link=%%serverPath%%wiki/edit/"
string: ":]]"
string: 'talk'
string: 'editthis'
string: "[[:theme::submenu::label=Edit This Page::"
string: "link=%%serverPath%%wiki/edittalk/"
string: ":]]"
string: 'modules/wiki/views/menu.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/wiki/views/listall.fn.php</b>
comment: //	require_once($kapenta-&gt;installPath . 'modules/wiki/models/wikicode.mod.php');
comment: //--------------------------------------------------------------------------------------------------
comment: //|	list wiki articles
comment: //--------------------------------------------------------------------------------------------------
comment: //opt: page - page number (default is 1) [string]
comment: //opt: num - number of entries to show per page (default is 30) [string]
comment: //opt: namespace - namespace to list from, default is 'article' [string]
comment: //TODO: this could stand some TLC
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: permissions check, other namespaces, argument checks
comment: //----------------------------------------------------------------------------------------------
comment: //	count all wiki articles
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	load a page worth of articles
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make table
comment: //----------------------------------------------------------------------------------------------
comment: // 'Content', 'Talk', 'Hitcount'
comment: //TODO: stabilize talk
comment: //		. "\t\t&lt;td&gt;&lt;small&gt;" . strlen($row['content']) . " bytes&lt;/small&gt;&lt;/td&gt;\n"
comment: //		. "\t\t&lt;td&gt;&lt;small&gt;" . strlen($row['talk']) . " bytes&lt;/small&gt;&lt;/td&gt;\n"
comment: //		. "\t\t&lt;td&gt;" . $row['viewcount'] . "&lt;/td&gt;"
comment: //----------------------------------------------------------------------------------------------
comment: //	add pagination
comment: //----------------------------------------------------------------------------------------------
string: 'modules/wiki/models/article.mod.php'
string: 'modules/wiki/models/revision.mod.php'
string: 'article'
string: ''
string: 'pageno'
string: 'pageno'
string: 'num'
string: 'num'
string: "namespace='"
string: "'"
string: 'wiki_article'
string: 'wiki_article'
string: '*'
string: 'title'
string: 'Article'
string: '[x]'
string: '[x]'
string: 'alias'
string: "&lt;a href='%%serverPath%%wiki/"
string: "'&gt;"
string: 'title'
string: "&lt;/a&gt;"
string: "&lt;a href='%%serverPath%%wiki/talk/"
string: "'&gt;[discuss]&lt;/a&gt;"
string: "&lt;a href='%%serverPath%%wiki/history/"
string: "'&gt;[history]&lt;/a&gt;"
string: "%%serverPath%%wiki/list/"
string: "[[:theme::pagination::page=$pageno::total=$totalPages::link=$plink:]]\n"

<b>scanning file: /var/www/an2google/trunk/modules/wiki/views/historynav.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	history summary formatted for nav // TODO: pagination
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: UID - UID of a wiki article [string]
comment: //opt: num - number of recent entries to show, default is 30 (int) [string]
comment: //opt: pageNo - results page to show, from 1, default is 1 (int)  [string]
comment: //%	default results page to start from (first) [int]
comment: //%	default number of items to show per page [int]
comment: //%	total number of revisions to this item [int]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: more permission options
comment: //----------------------------------------------------------------------------------------------
comment: //	count all revisions to this article
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: add any other conditions here (namespace, etc)
comment: //----------------------------------------------------------------------------------------------
comment: //	load a page of results from the database and make the block
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	add meta and navigation elements
comment: //----------------------------------------------------------------------------------------------
comment: //$linkAll = "&lt;a href='%%serverPath%%wiki/history/" . $model-&gt;articleUID . "'&gt;[see all]&lt;/a&gt;";
comment: //$html .= "&lt;b&gt;Total revisions:&lt;/b&gt; $totalItems&lt;br/&gt;\n";
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/wiki/models/article.mod.php'
string: 'modules/wiki/models/revision.mod.php'
string: ''
string: 'UID'
string: '(UID not given)'
string: 'num'
string: 'num'
string: 'pageNo'
string: 'pageNo'
string: 'UID'
string: '(no such article)'
string: 'wiki'
string: 'wiki_article'
string: 'show'
string: ''
string: "articleUID='"
string: "'"
string: 'wiki_revision'
string: 'wiki_revision'
string: '*'
string: 'editedOn DESC'
string: 'modules/wiki/views/revisionsummarynav.block.php'
string: ''
string: 'reason'
string: 'reason'
string: "&lt;i&gt;(no reason given)&lt;/i&gt;"

<b>scanning file: /var/www/an2google/trunk/modules/wiki/views/history.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	history summary formatted for nav // TODO: pagination
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: UID - UID of a wiki article [string]
comment: //opt: num - number of recent entries to show, default is 30 (int) [string]
comment: //opt: pageNo - results page to show, from 1, default is 1 (int)  [string]
comment: //%	default results page to start from (first) [int]
comment: //%	default number of items to show per page [int]
comment: //%	total number of revisions to this item [int]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: more permission options
comment: //----------------------------------------------------------------------------------------------
comment: //	count all revisions to this article
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: add any other conditions here (namespace, etc)
comment: //----------------------------------------------------------------------------------------------
comment: //	load a page of results from the database and make the block
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	add meta and navigation elements
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/wiki/models/article.mod.php'
string: 'modules/wiki/models/revision.mod.php'
string: ''
string: 'UID'
string: '(UID not given)'
string: 'num'
string: 'num'
string: 'pageNo'
string: 'pageNo'
string: 'UID'
string: '(no such article)'
string: 'wiki'
string: 'wiki_article'
string: 'show'
string: ''
string: "articleUID='"
string: "'"
string: 'wiki_revision'
string: 'wiki_revision'
string: '*'
string: 'editedOn DESC'
string: 'modules/wiki/views/revisionsummary.block.php'
string: 'reason'
string: ''
string: 'reason'
string: "&lt;i&gt;(none given)&lt;/i&gt;"
string: '%%serverPath%%wiki/history/'
string: "[[:theme::pagination::page=$pageNo::total=$totalPages::link=$link:]]\n"
string: "&lt;b&gt;Total revisions:&lt;/b&gt; $totalItems &lt;br/&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/wiki/views/edittalkform.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	show the edittalk form (for discussion about articles)
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: UID - UID of a Wiki_Article object (the talk article) [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/wiki/models/article.mod.php'
string: ''
string: 'raUID'
string: ''
string: 'raUID'
string: ''
string: 'wiki'
string: 'wiki_article'
string: 'edit'
string: 'modules/wiki/views/edittalkform.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/wiki/views/editform.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	show the edit form
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - recordAlias or UID or wiki entry [string]
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/wiki/models/article.mod.php'
string: 'modules/wiki/inc/wikicode.class.php'
string: 'raUID'
string: ''
string: 'raUID'
string: ''
string: 'wiki'
string: 'wiki_article'
string: 'edit'
string: ''
string: 'modules/wiki/views/editform.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/wiki/views/allthumbs.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	all images associated with an article (default is thumbnails)
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - recordAlias or UID or wiki entry [string]
comment: //opt: articleUID - overrides raUID [string]
comment: //opt: size - size of images (default is thumb90) [string]
comment: //%	return value [string]
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/wiki/models/wiki.mod.php'
string: 'modules/wiki/models/wikicode.mod.php'
string: 'modules/wiki/models/wikirevision.mod.php'
string: 'thumb90'
string: ''
string: 'articleUID'
string: 'raUID'
string: 'articleUID'
string: 'raUID'
string: 'size'
string: 'size'
string: 'raUID'
string: "select * from Images_Image where refModule='wiki' and refUID='"
string: "' order by weight"
string: 'width145'
string: "&lt;a href='/images/show/"
string: 'alias'
string: "'&gt;"
string: "&lt;img src='/images/"
string: "/"
string: 'alias'
string: "' border='0' alt='"
string: 'title'
string: "'&gt;&lt;/a&gt;"

<b>scanning file: /var/www/an2google/trunk/modules/wiki/views/adminconsole.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	list of controls for this module as displayed on the admin console
comment: //--------------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'admin'
string: ''
string: 'modules/wiki/views/adminconsole.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/wiki/models/talk.mod.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	object representing wiki talk pages
comment: //--------------------------------------------------------------------------------------------------
comment: //+	These are very similar to wiki articles
comment: //----------------------------------------------------------------------------------------------
comment: //	member variables (as retieved from database)
comment: //----------------------------------------------------------------------------------------------
comment: //_	currently loaded database record [array]
comment: //_	database table definition [array]
comment: //_	set to true when an object has been loaded [bool]
comment: //_ UID [string]
comment: //_ title [string]
comment: //_ text [string]
comment: //_ text [string]
comment: //_ varchar(30) [string]
comment: //_ varchar(30) [string]
comment: //_ datetime [string]
comment: //_ ref:Users_User [string]
comment: //_ datetime [string]
comment: //_ ref:Users_User [string]
comment: //_ alias [string]
comment: // php enclosed wikicode [string]
comment: //
comment: // [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //. constructor
comment: //----------------------------------------------------------------------------------------------
comment: //opt: raUID - UID or alias of a Article object [string]
comment: // initialise table schema
comment: // try load an object from the database
comment: // check if we did	
comment: // make new object
comment: // initialize
comment: // set default title
comment: // TODO - make this a setting
comment: //----------------------------------------------------------------------------------------------
comment: //. load an object from the database given its UID or an alias
comment: //----------------------------------------------------------------------------------------------
comment: //arg: raUID - UID or alias of a Article object [string]
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //. load Article object serialized as an associative array
comment: //----------------------------------------------------------------------------------------------
comment: //arg: ary - associative array of members and values [array]
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //. save the current object to database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string on success, html report of errors on failure [string]
comment: //: $db-&gt;save(...) will raise an object_updated event if successful
comment: //----------------------------------------------------------------------------------------------
comment: //. check that object is correct before allowing it to be stored in database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string if object passes, warning message if not [string]
comment: //----------------------------------------------------------------------------------------------
comment: //. database table definition and content versioning
comment: //----------------------------------------------------------------------------------------------
comment: //returns: information for constructing SQL queries [array]
comment: //table columns
comment: //these fields will be indexed
comment: //revision history kept by wiki module, not default revision system
comment: //----------------------------------------------------------------------------------------------
comment: //. serialize this object to an array
comment: //----------------------------------------------------------------------------------------------
comment: //returns: associative array of all members which define this instance [array]
comment: //----------------------------------------------------------------------------------------------
comment: //.	make an extended array of all data a view will need
comment: //----------------------------------------------------------------------------------------------
comment: //returns: extended array of member variables and metadata [array]
comment: // edit
comment: // view
comment: // new article form
comment: // nominate for deletion
comment: // delete
comment: //------------------------------------------------------------------------------------------
comment: //	links
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	sanitize content for editing
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	strandardise date format to previous website
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	if the wikicode has been expanded, compile contents block, document, languages, etc
comment: //------------------------------------------------------------------------------------------
comment: // TODO
comment: // TODO
comment: // TODO
comment: //$ary['talkContents'] = $this-&gt;talk-&gt;contents;	// TODO - stabilize
comment: //$ary['talkHtml'] = $this-&gt;talk-&gt;html;
comment: //------------------------------------------------------------------------------------------
comment: //	avoid collision with page title
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	summary
comment: //------------------------------------------------------------------------------------------
comment: //$ary['summary'] = strip_tags($ary['content']);
comment: //$ary['summary'] = substr($ary['summary'], 0, 1000) . '...';
comment: //----------------------------------------------------------------------------------------------
comment: //.	expand wiki text and talk pages
comment: //----------------------------------------------------------------------------------------------
comment: //$this-&gt;content-&gt;source = $this-&gt;content;
comment: //$this-&gt;talk = new WikiCode();
comment: //$this-&gt;talk-&gt;source = $this-&gt;talk;
comment: //$this-&gt;talk-&gt;expandWikiCode();
comment: //----------------------------------------------------------------------------------------------
comment: //.	set this article to be the default page
comment: //----------------------------------------------------------------------------------------------
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //. delete current object from the database
comment: //----------------------------------------------------------------------------------------------
comment: //: $db-&gt;delete(...) will raise an object_deleted event on success [bool]
comment: //returns: true on success, false on failure [bool]
comment: // nothing to do
string: 'modules/wiki/inc/wikicode.class.php'
string: 'modules/wiki/index.wiki.php'
string: ''
string: ''
string: 'New Article '
string: 'user'
string: ''
string: 'UID'
string: 'title'
string: 'content'
string: 'nav'
string: 'locked'
string: 'namespace'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: 'alias'
string: ''
string: 'wiki'
string: 'Wiki_Talk'
string: "Database error.&lt;br/&gt;\n"
string: ''
string: ''
string: ''
string: "No UID.&lt;br/&gt;\n"
string: 'module'
string: 'wiki'
string: 'model'
string: 'Wiki_Talk'
string: 'archive'
string: 'yes'
string: 'fields'
string: 'UID'
string: 'VARCHAR(33)'
string: 'articleUID'
string: 'VARCHAR(255)'
string: 'content'
string: 'TEXT'
string: 'nav'
string: 'TEXT'
string: 'locked'
string: 'VARCHAR(30)'
string: 'namespace'
string: 'VARCHAR(33)'
string: 'createdOn'
string: 'DATETIME'
string: 'createdBy'
string: 'VARCHAR(33)'
string: 'editedOn'
string: 'DATETIME'
string: 'editedBy'
string: 'VARCHAR(33)'
string: 'alias'
string: 'VARCHAR(255)'
string: 'indices'
string: 'UID'
string: '10'
string: 'createdOn'
string: ''
string: 'createdBy'
string: '10'
string: 'editedOn'
string: ''
string: 'editedBy'
string: '10'
string: 'alias'
string: '10'
string: 'nodiff'
string: 'UID'
string: 'title'
string: 'content'
string: 'nav'
string: 'locked'
string: 'namespace'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: 'alias'
string: 'UID'
string: 'title'
string: 'content'
string: 'nav'
string: 'locked'
string: 'namespace'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: 'alias'
string: 'editUrl'
string: ''
string: 'editLink'
string: ''
string: 'viewUrl'
string: ''
string: 'viewLink'
string: ''
string: 'newUrl'
string: ''
string: 'newLink'
string: ''
string: 'nomUrl'
string: ''
string: 'nomLink'
string: ''
string: 'delUrl'
string: ''
string: 'delLink'
string: ''
string: 'wiki'
string: 'Wiki_Talk'
string: 'show'
string: 'viewUrl'
string: '%%serverPath%%wiki/'
string: 'alias'
string: 'viewLink'
string: "&lt;a href='%%serverPath%%wiki/"
string: 'alias'
string: "'&gt;"
string: "[read on &amp;gt;&amp;gt;]&lt;/a&gt;"
string: 'wiki'
string: 'Wiki_Talk'
string: 'edit'
string: 'editUrl'
string: '%%serverPath%%wiki/edit/'
string: 'editLink'
string: "&lt;a href='"
string: 'editUrl'
string: "'&gt;[edit]&lt;/a&gt;"
string: 'nomUrl'
string: '%%serverPath%%wiki/nominatedelete/'
string: 'nomLink'
string: "&lt;a href='"
string: 'nomUrl'
string: "'&gt;[nominate for deletion]&lt;/a&gt;"
string: 'wiki'
string: 'Wiki_Talk'
string: 'delete'
string: 'delUrl'
string: '%%serverPath%%wiki/confirmdelete/uid_'
string: 'delLink'
string: "&lt;a href='"
string: 'delUrl'
string: "'&gt;[delete]&lt;/a&gt;"
string: 'wiki'
string: 'Wiki_Talk'
string: 'new'
string: 'newUrl'
string: "%%serverPath%%wiki/new/"
string: 'newLink'
string: "&lt;a href='"
string: 'newUrl'
string: "'&gt;[create new article]&lt;/a&gt;"
string: 'contentSafe'
string: '[[:'
string: '[[%%delme%%:'
string: 'content'
string: 'navSafe'
string: '[[:'
string: '[[%%delme%%:'
string: 'nav'
string: 'createdOnLong'
string: 'jS F, Y'
string: 'createdOn'
string: 'editedOnLong'
string: 'jS F, Y'
string: 'editedOn'
string: 'titleUpper'
string: 'title'
string: 'contents'
string: ''
string: 'contentHtml'
string: ''
string: 'talkContents'
string: ''
string: 'talkHtml'
string: ''
string: 'infobox'
string: ''
string: 'interlingua'
string: ''
string: 'seealso'
string: ''
string: 'references'
string: ''
string: 'contents'
string: 'contentHtml'
string: ''
string: 'infobox'
string: 'articleTitle'
string: 'title'
string: 'Index'
string: "(editable by admins only)"
string: 'admin'

<b>scanning file: /var/www/an2google/trunk/modules/wiki/models/revision.mod.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	object for storing wiki revisions
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	member variables (as retieved from database)
comment: //----------------------------------------------------------------------------------------------
comment: //_	currently loaded database record [array]
comment: //_	database table definition [array]
comment: //_	set to true when an object has been loaded [bool]
comment: //_ UID [string]
comment: //_ varchar(33) [string]
comment: //_ title [string]
comment: //_ text [string]
comment: //_ text [string]
comment: //_ varchar(30) [string]
comment: //_ (article|talk|template|category|etc) [string]
comment: //_ datetime [string]
comment: //_ ref:Users_User [string]
comment: //_ datetime [string]
comment: //_ ref:Users_User [string]
comment: //_ nested array of UID, editedOn, editedBy, reason [array]
comment: //_	set to true when above is loaded [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //. constructor
comment: //----------------------------------------------------------------------------------------------
comment: //opt: UID - UID of a Revision object [string]
comment: // initialise table schema
comment: // try load an object from the database
comment: // check if we did
comment: // make new object
comment: // initialize
comment: // set default namespace
comment: //----------------------------------------------------------------------------------------------
comment: //. load an object from the db given its UID
comment: //----------------------------------------------------------------------------------------------
comment: //arg: UID - UID of a Revision object [string]
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //. load Revision object serialized as an associative array
comment: //----------------------------------------------------------------------------------------------
comment: //arg: ary - associative array of members and values [array]
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //. save the current object to database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string on success, html report of errors on failure [string]
comment: //: $db-&gt;save(...) will raise an object_updated event if successful
comment: //----------------------------------------------------------------------------------------------
comment: //. check that object is correct before allowing it to be stored in database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string if object passes, warning message if not [string]
comment: //----------------------------------------------------------------------------------------------
comment: //. database table definition and content versioning
comment: //----------------------------------------------------------------------------------------------
comment: //returns: information for constructing SQL queries [array]
comment: //table columns
comment: //these fields will be indexed
comment: //revision history will not be kept for any fields (this object *IS* the revision history)
comment: //----------------------------------------------------------------------------------------------
comment: //. serialize this object to an array
comment: //----------------------------------------------------------------------------------------------
comment: //returns: associative array of all members which define this instance [array]
comment: //----------------------------------------------------------------------------------------------
comment: //.	make an extended array of all data a view will need
comment: //----------------------------------------------------------------------------------------------
comment: //returns: extended array of member variables and metadata [array]
comment: // view
comment: //------------------------------------------------------------------------------------------
comment: //	links
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	strandardise date format to previous website
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	done
comment: //------------------------------------------------------------------------------------------		
comment: //----------------------------------------------------------------------------------------------
comment: //. delete current object from the database
comment: //----------------------------------------------------------------------------------------------
comment: //: $db-&gt;delete(...) will raise an object_deleted event on success [bool]
comment: //returns: true on success, false on failure [bool]
comment: // nothing to do
comment: //----------------------------------------------------------------------------------------------
comment: //.	find UID of previous version of this wiki article or talk page
comment: //----------------------------------------------------------------------------------------------
comment: //returns: UID of previous revision, false if not found [string][bool]
comment: // for each revision
comment: // if this one is found
comment: //----------------------------------------------------------------------------------------------
comment: //.	find UID of next version of this wiki article or talk page
comment: //----------------------------------------------------------------------------------------------
comment: //returns: UID of next revision, false if not found [string][bool]
comment: // for each revision
comment: // last one matches this
comment: // if this one is found
comment: //----------------------------------------------------------------------------------------------
comment: //.	find all revisions to this wiki article or talk page, make list at $this-&gt;allRevisions
comment: //----------------------------------------------------------------------------------------------
comment: //; note that we only load UID, editedBy, editedOn and reason as there may hudnreds of edits
comment: //TODO: this can be more standard and kapenta-ish
string: ''
string: ''
string: 'article'
string: ''
string: 'UID'
string: 'articleUID'
string: 'title'
string: 'content'
string: 'nav'
string: 'reason'
string: 'locked'
string: 'namespace'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: ''
string: "Database error.&lt;br/&gt;\n"
string: ''
string: ''
string: ''
string: "No UID.&lt;br/&gt;\n"
string: 'module'
string: 'wiki'
string: 'model'
string: 'wiki_revision'
string: 'archive'
string: 'yes'
string: 'fields'
string: 'UID'
string: 'VARCHAR(33)'
string: 'title'
string: 'VARCHAR(255)'
string: 'content'
string: 'TEXT'
string: 'nav'
string: 'VARCHAR(255)'
string: 'locked'
string: 'VARCHAR(30)'
string: 'namespace'
string: 'VARCHAR(255)'
string: 'articleUID'
string: 'VARCHAR(33)'
string: 'reason'
string: 'TEXT'
string: 'createdOn'
string: 'DATETIME'
string: 'createdBy'
string: 'VARCHAR(33)'
string: 'editedOn'
string: 'DATETIME'
string: 'editedBy'
string: 'VARCHAR(33)'
string: 'indices'
string: 'UID'
string: '10'
string: 'createdOn'
string: ''
string: 'createdBy'
string: '10'
string: 'editedOn'
string: ''
string: 'editedBy'
string: '10'
string: 'nodiff'
string: 'UID'
string: 'title'
string: 'content'
string: 'nav'
string: 'locked'
string: 'namespace'
string: 'articleUID'
string: 'reason'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: 'UID'
string: 'title'
string: 'content'
string: 'nav'
string: 'locked'
string: 'namespace'
string: 'articleUID'
string: 'reason'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: 'viewUrl'
string: ''
string: 'viewLink'
string: ''
string: 'wiki'
string: 'wiki_revision'
string: 'show'
string: 'viewUrl'
string: '%%serverPath%%wiki/showrevision/'
string: 'UID'
string: 'viewLink'
string: "&lt;a href='"
string: 'viewUrl'
string: "'&gt;[show revision &amp;gt;&amp;gt;]&lt;/a&gt;"
string: 'editedOnLong'
string: 'jS F, Y'
string: 'editedOn'
string: 'UID'
string: 'UID'
string: 'UID'
string: 'UID'
string: ''
string: "articleUID='"
string: "'"
string: 'UID, reason, editedBy, editedOn'
string: 'wiki_revision'
string: 'editedOn ASC'

<b>scanning file: /var/www/an2google/trunk/modules/wiki/models/mwimport.mod.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //member variables
comment: //----------------------------------------------------------------------------------------------
comment: //_	currently loaded database record [array]
comment: //_	database table definition [array]
comment: //_	set to true when an object has been loaded [bool]
comment: //_ UID [string]
comment: //_ title [string]
comment: //_ varchar(255) [string]
comment: //_ text [string]
comment: //_ text [string]
comment: //_ text [string]
comment: //_ varchar(30) [string]
comment: //_ varchar(50) [string]
comment: //_ datetime [string]
comment: //_ ref:Users_User [string]
comment: //_ datetime [string]
comment: //_ ref:Users_User [string]
comment: //_ alias [string]
comment: //----------------------------------------------------------------------------------------------
comment: //. constructor
comment: //----------------------------------------------------------------------------------------------
comment: //opt: raUID - UID or alias of a MWImport object [string]
comment: // initialise table schema
comment: // try load an object from the database
comment: // check if we did
comment: // make new object
comment: // initialize
comment: // set default title
comment: //----------------------------------------------------------------------------------------------
comment: //. load an object from the database given its UID or an alias
comment: //----------------------------------------------------------------------------------------------
comment: //arg: raUID - UID or alias of a MWImport object [string]
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //. load MWImport object serialized as an associative array
comment: //----------------------------------------------------------------------------------------------
comment: //arg: ary - associative array of members and values [array]
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //. save the current object to database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string on success, html report of errors on failure [string]
comment: //: $db-&gt;save(...) will raise an object_updated event if successful
comment: //----------------------------------------------------------------------------------------------
comment: //. check that object is correct before allowing it to be stored in database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string if object passes, warning message if not [string]
comment: //----------------------------------------------------------------------------------------------
comment: //. database table definition and content versioning
comment: //----------------------------------------------------------------------------------------------
comment: //returns: information for constructing SQL queries [array]
comment: //table columns
comment: //these fields will be indexed
comment: //revision history will be kept for these fields
comment: //----------------------------------------------------------------------------------------------
comment: //. serialize this object to an array
comment: //----------------------------------------------------------------------------------------------
comment: //returns: associative array of all members which define this instance [array]
comment: //----------------------------------------------------------------------------------------------
comment: //. serialize this object to xml
comment: //----------------------------------------------------------------------------------------------
comment: //arg: xmlDec - include xml declaration? [bool]
comment: //arg: indent - string with which to indent lines [bool]
comment: //returns: xml serialization of this object [string]
comment: //NOTE: any members which are not XML clean should be marked up before sending
comment: //----------------------------------------------------------------------------------------------
comment: //. make an extended array of data views may need
comment: //----------------------------------------------------------------------------------------------
comment: //returns: associative array of members, metadata and partial views [array]
comment: //% extended array of properties [array:string]
comment: //------------------------------------------------------------------------------------------
comment: //	links
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	javascript
comment: //------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //. delete current object from the database
comment: //----------------------------------------------------------------------------------------------
comment: //: $db-&gt;delete(...) will raise an object_deleted event on success [bool]
comment: //returns: true on success, false on failure [bool]
comment: // nothing to do
comment: //----------------------------------------------------------------------------------------------
comment: //. discover if an article exists, given its ID
comment: //----------------------------------------------------------------------------------------------
comment: //returns: UID if found, empty string if not [string]
comment: //==============================================================================================
comment: //	Parse MediaWiki API responses
comment: //==============================================================================================
comment: //----------------------------------------------------------------------------------------------
comment: //.	expand article listing result
comment: //----------------------------------------------------------------------------------------------
comment: //arg: xml - returned by MediaWiki API [string:xml]
comment: //eg: http://example.org/api.php?action=query&amp;list=allpages&amp;apfrom=Los&amp;aplimit=50&amp;format=xml
comment: //foreach($lines as $line) {	echo htmlentities($line) . "&lt;br/&gt;\n"; }
comment: //----------------------------------------------------------------------------------------------
comment: //.	record a set of pages as existing
comment: //----------------------------------------------------------------------------------------------
comment: //arg: objary - output of expandAllPages [array]
comment: //arg: wikiUrl - API where this was downloaded from [string]
comment: //returns: number of new items added [int]
comment: //----------------------------------------------------------------------------------------------
comment: //.	save apfrom point
comment: //----------------------------------------------------------------------------------------------
comment: //arg: title - article title we're up to in the scan [string]
comment: //returns: result of file save [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //.	restore apfrom point
comment: //----------------------------------------------------------------------------------------------
comment: //returns: the last article title which was saved [string]
string: ''
string: ''
string: 'New MWImport '
string: 'data/apfrom.txt'
string: 'UID'
string: 'title'
string: 'wikiUrl'
string: 'content'
string: 'categories'
string: 'assets'
string: 'status'
string: 'pageid'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: 'alias'
string: ''
string: ''
string: "Database error.&lt;br/&gt;\n"
string: ''
string: ''
string: ''
string: "No UID.&lt;br/&gt;\n"
string: 'module'
string: 'wiki'
string: 'model'
string: 'Wiki_MWImport'
string: 'archive'
string: 'no'
string: 'fields'
string: 'UID'
string: 'VARCHAR(33)'
string: 'title'
string: 'VARCHAR(255)'
string: 'wikiUrl'
string: 'VARCHAR(255)'
string: 'content'
string: 'MEDIUMTEXT'
string: 'categories'
string: 'TEXT'
string: 'assets'
string: 'TEXT'
string: 'status'
string: 'VARCHAR(30)'
string: 'pageid'
string: 'VARCHAR(50)'
string: 'createdOn'
string: 'DATETIME'
string: 'createdBy'
string: 'VARCHAR(33)'
string: 'editedOn'
string: 'DATETIME'
string: 'editedBy'
string: 'VARCHAR(33)'
string: 'alias'
string: 'VARCHAR(255)'
string: 'indices'
string: 'UID'
string: '10'
string: 'pageid'
string: '10'
string: 'createdOn'
string: ''
string: 'createdBy'
string: '10'
string: 'editedOn'
string: ''
string: 'editedBy'
string: '10'
string: 'alias'
string: '10'
string: 'nodiff'
string: 'UID'
string: 'title'
string: 'wikiUrl'
string: 'content'
string: 'categories'
string: 'assets'
string: 'status'
string: 'pageid'
string: 'createdOn'
string: 'editedOn'
string: 'editedBy'
string: 'alias'
string: 'UID'
string: 'title'
string: 'wikiUrl'
string: 'content'
string: 'categories'
string: 'assets'
string: 'status'
string: 'pageid'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: 'alias'
string: ''
string: "&lt;kobject type='Wiki_MWImport'&gt;\n"
string: "    &lt;UID&gt;"
string: "&lt;/UID&gt;\n"
string: "    &lt;title&gt;"
string: "&lt;/title&gt;\n"
string: "    &lt;wikiUrl&gt;"
string: "&lt;/wikiUrl&gt;\n"
string: "    &lt;content&gt;"
string: "&lt;/content&gt;\n"
string: "    &lt;categories&gt;"
string: "&lt;/categories&gt;\n"
string: "    &lt;assets&gt;"
string: "&lt;/assets&gt;\n"
string: "    &lt;status&gt;"
string: "&lt;/status&gt;\n"
string: "    &lt;pageid&gt;"
string: "&lt;/pageid&gt;\n"
string: "    &lt;createdOn&gt;"
string: "&lt;/createdOn&gt;\n"
string: "    &lt;createdBy&gt;"
string: "&lt;/createdBy&gt;\n"
string: "    &lt;editedOn&gt;"
string: "&lt;/editedOn&gt;\n"
string: "    &lt;editedBy&gt;"
string: "&lt;/editedBy&gt;\n"
string: "    &lt;alias&gt;"
string: "&lt;/alias&gt;\n"
string: "&lt;/kobject&gt;\n"
string: "&lt;?xml version='1.0' encoding='UTF-8' ?&gt;\n"
string: 'viewUrl'
string: ''
string: 'viewLink'
string: ''
string: 'editUrl'
string: ''
string: 'editLink'
string: ''
string: 'delUrl'
string: ''
string: 'delLink'
string: ''
string: 'newUrl'
string: ''
string: 'newLink'
string: ''
string: 'wiki'
string: 'Wiki_MWImport'
string: 'show'
string: 'viewUrl'
string: '%%serverPath%%Wiki/showmwimport/'
string: 'alias'
string: 'viewLink'
string: "&lt;a href='"
string: 'viewUrl'
string: "'&gt;[ more &amp;gt;gt; ]&lt;/a&gt;"
string: 'wiki'
string: 'Wiki_MWImport'
string: 'edit'
string: 'edit'
string: 'editUrl'
string: '%%serverPath%%Wiki/editmwimport/'
string: 'alias'
string: 'editLink'
string: "&lt;a href='"
string: 'editUrl'
string: "'&gt;[ edit ]&lt;/a&gt;"
string: 'wiki'
string: 'Wiki_MWImport'
string: 'edit'
string: 'delete'
string: 'delUrl'
string: '%%serverPath%%Wiki/delmwimport/'
string: 'alias'
string: 'delLink'
string: "&lt;a href='"
string: 'delUrl'
string: "'&gt;[ delete ]&lt;/a&gt;"
string: 'UIDJsClean'
string: 'UID'
string: "pageid='"
string: "'"
string: 'Wiki_MWImport'
string: '*'
string: ''
string: 'UID'
string: 'apfrom'
string: ''
string: 'allpages'
string: "&gt;"
string: "&gt;\n"
string: "\n"
string: '&lt;allpages apfrom'
string: "\""
string: 'apfrom'
string: '&lt;p pageid'
string: "\""
string: 'allpages'
string: 'id'
string: 'ns'
string: 'title'
string: 'allpages'
string: 'id'
string: "&lt;b&gt;article:&lt;/b&gt; "
string: 'title'
string: " (id: "
string: 'id'
string: ")&lt;br/&gt;"
string: 'title'
string: 'id'
string: 'new'
string: ''
string: ''

<b>scanning file: /var/www/an2google/trunk/modules/wiki/models/category.mod.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	Object representing Wiki article categories
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //member variables
comment: //----------------------------------------------------------------------------------------------
comment: //_	currently loaded database record [array]
comment: //_	database table definition [array]
comment: //_	set to true when an object has been loaded [bool]
comment: //_ UID [string]
comment: //_ title [string]
comment: //_ wyswyg [string]
comment: //_ ref:Wiki_Category [string]
comment: //_ datetime [string]
comment: //_ ref:Users_User [string]
comment: //_ datetime [string]
comment: //_ ref:Users_User [string]
comment: //_ alias [string]
comment: //----------------------------------------------------------------------------------------------
comment: //. constructor
comment: //----------------------------------------------------------------------------------------------
comment: //opt: raUID - UID or alias of a Category object [string]
comment: // initialise table schema
comment: // try load an object from the database
comment: // check if we did
comment: // make new object
comment: // initialize
comment: // set default title
comment: //----------------------------------------------------------------------------------------------
comment: //. load an object from the database given its UID or an alias
comment: //----------------------------------------------------------------------------------------------
comment: //arg: raUID - UID or alias of a Category object [string]
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //. load Category object serialized as an associative array
comment: //----------------------------------------------------------------------------------------------
comment: //arg: ary - associative array of members and values [array]
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //. save the current object to database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string on success, html report of errors on failure [string]
comment: //: $db-&gt;save(...) will raise an object_updated event if successful
comment: //----------------------------------------------------------------------------------------------
comment: //. check that object is correct before allowing it to be stored in database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string if object passes, warning message if not [string]
comment: //----------------------------------------------------------------------------------------------
comment: //. database table definition and content versioning
comment: //----------------------------------------------------------------------------------------------
comment: //returns: information for constructing SQL queries [array]
comment: //table columns
comment: //these fields will be indexed
comment: //revision history will be kept for these fields
comment: //----------------------------------------------------------------------------------------------
comment: //. serialize this object to an array
comment: //----------------------------------------------------------------------------------------------
comment: //returns: associative array of all members which define this instance [array]
comment: //----------------------------------------------------------------------------------------------
comment: //. serialize this object to xml
comment: //----------------------------------------------------------------------------------------------
comment: //arg: xmlDec - include xml declaration? [bool]
comment: //arg: indent - string with which to indent lines [bool]
comment: //returns: xml serialization of this object [string]
comment: //NOTE: any members which are not XML clean should be marked up before sending
comment: //----------------------------------------------------------------------------------------------
comment: //. make an extended array of data views may need
comment: //----------------------------------------------------------------------------------------------
comment: //returns: associative array of members, metadata and partial views [array]
comment: //% extended array of properties [array:string]
comment: //------------------------------------------------------------------------------------------
comment: //	links
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	javascript
comment: //------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //. delete current object from the database
comment: //----------------------------------------------------------------------------------------------
comment: //: $db-&gt;delete(...) will raise an object_deleted event on success [bool]
comment: //returns: true on success, false on failure [bool]
comment: // nothing to do
string: ''
string: ''
string: 'New Category '
string: 'UID'
string: 'title'
string: 'description'
string: 'parent'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: 'alias'
string: ''
string: 'wiki'
string: 'wiki_category'
string: "Database error.&lt;br/&gt;\n"
string: ''
string: ''
string: ''
string: "No UID.&lt;br/&gt;\n"
string: 'module'
string: 'wiki'
string: 'model'
string: 'wiki_category'
string: 'fields'
string: 'UID'
string: 'VARCHAR(33)'
string: 'title'
string: 'VARCHAR(255)'
string: 'description'
string: 'MEDIUMTEXT'
string: 'parent'
string: 'VARCHAR(33)'
string: 'createdOn'
string: 'DATETIME'
string: 'createdBy'
string: 'VARCHAR(33)'
string: 'editedOn'
string: 'DATETIME'
string: 'editedBy'
string: 'VARCHAR(33)'
string: 'alias'
string: 'TEXT'
string: 'indices'
string: 'UID'
string: '10'
string: 'title'
string: '10'
string: 'parent'
string: '10'
string: 'createdOn'
string: ''
string: 'createdBy'
string: '10'
string: 'editedOn'
string: ''
string: 'editedBy'
string: '10'
string: 'alias'
string: '10'
string: 'nodiff'
string: 'UID'
string: 'title'
string: 'description'
string: 'parent'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: 'alias'
string: ''
string: "&lt;kobject type='wiki_category'&gt;\n"
string: "    &lt;UID&gt;"
string: "&lt;/UID&gt;\n"
string: "    &lt;title&gt;"
string: "&lt;/title&gt;\n"
string: "    &lt;description&gt;&lt;![CDATA["
string: "]]&gt;&lt;/description&gt;\n"
string: "    &lt;parent&gt;"
string: "&lt;/parent&gt;\n"
string: "    &lt;createdOn&gt;"
string: "&lt;/createdOn&gt;\n"
string: "    &lt;createdBy&gt;"
string: "&lt;/createdBy&gt;\n"
string: "    &lt;editedOn&gt;"
string: "&lt;/editedOn&gt;\n"
string: "    &lt;editedBy&gt;"
string: "&lt;/editedBy&gt;\n"
string: "    &lt;alias&gt;"
string: "&lt;/alias&gt;\n"
string: "&lt;/kobject&gt;\n"
string: "&lt;?xml version='1.0' encoding='UTF-8' ?&gt;\n"
string: 'viewUrl'
string: ''
string: 'viewLink'
string: ''
string: 'editUrl'
string: ''
string: 'editLink'
string: ''
string: 'delUrl'
string: ''
string: 'delLink'
string: ''
string: 'newUrl'
string: ''
string: 'newLink'
string: ''
string: 'wiki'
string: 'wiki_category'
string: 'show'
string: 'viewUrl'
string: '%%serverPath%%Wiki/showcategory/'
string: 'alias'
string: 'viewLink'
string: "&lt;a href='"
string: 'viewUrl'
string: "'&gt;[ more &amp;gt;gt; ]&lt;/a&gt;"
string: 'wiki'
string: 'wiki_category'
string: 'edit'
string: 'edit'
string: 'editUrl'
string: '%%serverPath%%Wiki/editcategory/'
string: 'alias'
string: 'editLink'
string: "&lt;a href='"
string: 'editUrl'
string: "'&gt;[ edit ]&lt;/a&gt;"
string: 'wiki'
string: 'wiki_category'
string: 'edit'
string: 'delete'
string: 'delUrl'
string: '%%serverPath%%Wiki/delcategory/'
string: 'alias'
string: 'delLink'
string: "&lt;a href='"
string: 'delUrl'
string: "'&gt;[ delete ]&lt;/a&gt;"
string: 'UIDJsClean'
string: 'UID'
string: 'descriptionJsVar64'
string: 'description'
string: 'UID'
string: 'Js64'
string: 'descriptionJs64'
string: 'descriptionJsVar64'
string: 'description'
string: 'descriptionSummary'
string: 'description'

<b>scanning file: /var/www/an2google/trunk/modules/wiki/models/article.mod.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	object representing wiki articles
comment: //--------------------------------------------------------------------------------------------------
comment: //+	Note: articles are divided up into sections based on wiki markup.  This is so that sections
comment: //+	may be modified independantly of each other to minimise collisions when multiple users are
comment: //+	editing the same document.
comment: //+
comment: //+	Note: this module has many satellite tables, with their own models for building and
comment: //+	maintaining the wiki.  They are:
comment: //+
comment: //+	categories.mod.php - heirarchies of categories to which articles may belong
comment: //+	catindex.mod.php - associates articles with categories
comment: //+	revisions.mod.php - article histories (diff, revert changes, etc)
comment: //+	delete.mod.php - tracks articles nominated for deletion
comment: //+
comment: //+	Permissions may be set on each article as to who may edit it, these override module-wide
comment: //+	permissions for a single article only, and only to the extent Kapenta settings allow.  The
comment: //+	lock field may be set to a user group (public/user/admin).
comment: //----------------------------------------------------------------------------------------------
comment: //	member variables (as retieved from database)
comment: //----------------------------------------------------------------------------------------------
comment: //_	currently loaded database record [array]
comment: //_	database table definition [array]
comment: //_	set to true when an object has been loaded [bool]
comment: //_ UID [string]
comment: //_ title [string]
comment: //_ text [string]
comment: //_ text [string]
comment: //_ varchar(30) [string]
comment: //_ varchar(30) [string]
comment: //_ ref:Wiki_Article [string]
comment: //_ datetime [string]
comment: //_ ref:Users_User [string]
comment: //_ datetime [string]
comment: //_ ref:Users_User [string]
comment: //_ alias [string]
comment: // php enclosed wikicode [string]
comment: //
comment: // [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //. constructor
comment: //----------------------------------------------------------------------------------------------
comment: //opt: raUID - UID or alias of a Article object [string]
comment: // initialise table schema
comment: // try load an object from the database
comment: // check if we did	
comment: // make new object
comment: // initialize
comment: // set default title
comment: // default namespace
comment: // TODO - make this a setting
comment: //----------------------------------------------------------------------------------------------
comment: //. load an object from the database given its UID or an alias
comment: //----------------------------------------------------------------------------------------------
comment: //arg: raUID - UID or alias of a Article object [string]
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //. load Article object serialized as an associative array
comment: //----------------------------------------------------------------------------------------------
comment: //arg: ary - associative array of members and values [array]
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //. save the current object to database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string on success, html report of errors on failure [string]
comment: //: $db-&gt;save(...) will raise an object_updated event if successful
comment: //----------------------------------------------------------------------------------------------
comment: //. check that object is correct before allowing it to be stored in database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string if object passes, warning message if not [string]
comment: //----------------------------------------------------------------------------------------------
comment: //. database table definition and content versioning
comment: //----------------------------------------------------------------------------------------------
comment: //returns: information for constructing SQL queries [array]
comment: //table columns
comment: //these fields will be indexed
comment: //revision history kept by wiki module, not default revision system
comment: //----------------------------------------------------------------------------------------------
comment: //. serialize this object to an array
comment: //----------------------------------------------------------------------------------------------
comment: //returns: associative array of all members which define this instance [array]
comment: //----------------------------------------------------------------------------------------------
comment: //.	make an extended array of all data a view will need
comment: //----------------------------------------------------------------------------------------------
comment: //returns: extended array of member variables and metadata [array]
comment: // edit
comment: // view
comment: // new article form
comment: // nominate for deletion
comment: // delete
comment: //------------------------------------------------------------------------------------------
comment: //	links
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	sanitize content for editing
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	strandardise date format to previous website
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	if the wikicode has been expanded, compile contents block, document, languages, etc
comment: //------------------------------------------------------------------------------------------
comment: // TODO
comment: // TODO
comment: // TODO
comment: //$ary['talkContents'] = $this-&gt;talk-&gt;contents;	// TODO - stabilize
comment: //$ary['talkHtml'] = $this-&gt;talk-&gt;html;
comment: //------------------------------------------------------------------------------------------
comment: //	avoid collision with page title
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	summary
comment: //------------------------------------------------------------------------------------------
comment: //$ary['summary'] = strip_tags($ary['content']);
comment: //$ary['summary'] = substr($ary['summary'], 0, 1000) . '...';
comment: //----------------------------------------------------------------------------------------------
comment: //.	expand wiki text and talk pages
comment: //----------------------------------------------------------------------------------------------
comment: //$this-&gt;content-&gt;source = $this-&gt;content;
comment: //$this-&gt;talk = new WikiCode();
comment: //$this-&gt;talk-&gt;source = $this-&gt;talk;
comment: //$this-&gt;talk-&gt;expandWikiCode();
comment: //----------------------------------------------------------------------------------------------
comment: //.	set this article to be the default page
comment: //----------------------------------------------------------------------------------------------
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //. delete current object from the database
comment: //----------------------------------------------------------------------------------------------
comment: //: $db-&gt;delete(...) will raise an object_deleted event on success [bool]
comment: //returns: true on success, false on failure [bool]
comment: // nothing to do
comment: //----------------------------------------------------------------------------------------------
comment: //. discover if this article has a talk page
comment: //----------------------------------------------------------------------------------------------
comment: //arg: articleUID - UID of a Wiki_Article object [string]
comment: //returns: UID of talk page, or null string on failure [string]
comment: // unreachable?
string: 'modules/wiki/inc/wikicode.class.php'
string: 'modules/wiki/index.wiki.php'
string: ''
string: ''
string: 'New Article '
string: 'article'
string: 'user'
string: ''
string: 'UID'
string: 'title'
string: 'content'
string: 'nav'
string: 'locked'
string: 'namespace'
string: 'talkFor'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: 'alias'
string: ''
string: 'wiki'
string: 'wiki_article'
string: "Database error.&lt;br/&gt;\n"
string: ''
string: ''
string: ''
string: "No UID.&lt;br/&gt;\n"
string: 'module'
string: 'wiki'
string: 'model'
string: 'wiki_article'
string: 'archive'
string: 'yes'
string: 'fields'
string: 'UID'
string: 'VARCHAR(33)'
string: 'title'
string: 'VARCHAR(255)'
string: 'content'
string: 'TEXT'
string: 'nav'
string: 'TEXT'
string: 'locked'
string: 'VARCHAR(30)'
string: 'namespace'
string: 'VARCHAR(33)'
string: 'talkFor'
string: 'VARCHAR(33)'
string: 'createdOn'
string: 'DATETIME'
string: 'createdBy'
string: 'VARCHAR(33)'
string: 'editedOn'
string: 'DATETIME'
string: 'editedBy'
string: 'VARCHAR(33)'
string: 'alias'
string: 'VARCHAR(255)'
string: 'indices'
string: 'UID'
string: '10'
string: 'createdOn'
string: ''
string: 'createdBy'
string: '10'
string: 'editedOn'
string: ''
string: 'editedBy'
string: '10'
string: 'alias'
string: '10'
string: 'nodiff'
string: 'UID'
string: 'title'
string: 'content'
string: 'nav'
string: 'locked'
string: 'namespace'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: 'alias'
string: 'UID'
string: 'title'
string: 'content'
string: 'nav'
string: 'locked'
string: 'namespace'
string: 'talkFor'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: 'alias'
string: 'editUrl'
string: ''
string: 'editLink'
string: ''
string: 'viewUrl'
string: ''
string: 'viewLink'
string: ''
string: 'newUrl'
string: ''
string: 'newLink'
string: ''
string: 'nomUrl'
string: ''
string: 'nomLink'
string: ''
string: 'delUrl'
string: ''
string: 'delLink'
string: ''
string: 'wiki'
string: 'wiki_article'
string: 'show'
string: 'viewUrl'
string: '%%serverPath%%wiki/'
string: 'alias'
string: 'viewLink'
string: "&lt;a href='%%serverPath%%wiki/"
string: 'alias'
string: "'&gt;"
string: "[read on &amp;gt;&amp;gt;]&lt;/a&gt;"
string: 'wiki'
string: 'wiki_article'
string: 'edit'
string: 'editUrl'
string: '%%serverPath%%wiki/edit/'
string: 'editLink'
string: "&lt;a href='"
string: 'editUrl'
string: "'&gt;[edit]&lt;/a&gt;"
string: 'nomUrl'
string: '%%serverPath%%wiki/nominatedelete/'
string: 'nomLink'
string: "&lt;a href='"
string: 'nomUrl'
string: "'&gt;[nominate for deletion]&lt;/a&gt;"
string: 'wiki'
string: 'wiki_article'
string: 'delete'
string: 'delUrl'
string: '%%serverPath%%wiki/confirmdelete/uid_'
string: 'delLink'
string: "&lt;a href='"
string: 'delUrl'
string: "'&gt;[delete]&lt;/a&gt;"
string: 'wiki'
string: 'wiki_article'
string: 'new'
string: 'newUrl'
string: "%%serverPath%%wiki/new/"
string: 'newLink'
string: "&lt;a href='"
string: 'newUrl'
string: "'&gt;[create new article]&lt;/a&gt;"
string: 'contentSafe'
string: '[[:'
string: '[[%%delme%%:'
string: 'content'
string: 'navSafe'
string: '[[:'
string: '[[%%delme%%:'
string: 'nav'
string: 'createdOnLong'
string: 'jS F, Y'
string: 'createdOn'
string: 'editedOnLong'
string: 'jS F, Y'
string: 'editedOn'
string: 'titleUpper'
string: 'title'
string: 'contents'
string: ''
string: 'contentHtml'
string: ''
string: 'talkContents'
string: ''
string: 'talkHtml'
string: ''
string: 'infobox'
string: ''
string: 'interlingua'
string: ''
string: 'seealso'
string: ''
string: 'references'
string: ''
string: 'contents'
string: 'contentHtml'
string: ''
string: 'infobox'
string: 'articleTitle'
string: 'title'
string: 'Index'
string: "(editable by admins only)"
string: 'admin'
string: "talkFor='"
string: "'"
string: 'wiki_article'
string: '*'
string: 'createdOn'
string: '1'
string: ''
string: 'UID'

<b>scanning file: /var/www/an2google/trunk/modules/wiki/inc/wikicode.class.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	object for parsing formatting wikicode into html and editable sections
comment: //--------------------------------------------------------------------------------------------------
comment: //+	PROPOSED CHANGES: infobox markup to define blocks instead of lines, infobox sections, references,
comment: //+	etc to be stripped from main document and rendered separately.
comment: //+	TODO: define citation style for references:
comment: //+	@ref: label|URL
comment: //----------------------------------------------------------------------------------------------
comment: //	member variables
comment: //----------------------------------------------------------------------------------------------
comment: // article sections [array]
comment: // html [string]
comment: // html [string]
comment: // html [string]
comment: // is set to true when item is fully expanded [bool]
comment: // controls whether transclusions and expanded or ignored [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //.	expand wiki text
comment: //----------------------------------------------------------------------------------------------
comment: //changed from =''; to put the lines entered directly into the nav edit box first
comment: // anchor
comment: // format of [anchor] =&gt; [subsectionTitle]
comment: //% level 2 section index [int]
comment: //% level 3 section index [int]
comment: //% level 4 section index [int]
comment: //% level 5 section index [int]
comment: //--------------------------------------------------------------------------------------
comment: // check for l5 subsections
comment: //--------------------------------------------------------------------------------------
comment: // done with this line
comment: //--------------------------------------------------------------------------------------
comment: // check for l4 subsections
comment: //--------------------------------------------------------------------------------------
comment: // done with this line
comment: //--------------------------------------------------------------------------------------
comment: // check for subsections
comment: //--------------------------------------------------------------------------------------
comment: // done with this line
comment: //--------------------------------------------------------------------------------------
comment: // check for start of a new section
comment: //--------------------------------------------------------------------------------------
comment: // done with previous section, add to list
comment: // done with this line
comment: //--------------------------------------------------------------------------------------
comment: // check for an infobox line
comment: //--------------------------------------------------------------------------------------
comment: // done with this line
comment: //--------------------------------------------------------------------------------------
comment: // done with this line
comment: //--------------------------------------------------------------------------------------
comment: // add last section
comment: //------------------------------------------------------------------------------------------		
comment: //	render wikicode of each section
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------		
comment: //	assemble into document
comment: //------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //.	convert a section of wikicode to html
comment: //----------------------------------------------------------------------------------------------
comment: //arg: text - wikicode to be rendered in HTML [string]
comment: //returns: true on success, false on failure [bool]
comment: //--------------------------------------------------------------------------------------
comment: // check for transclusion
comment: //--------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------
comment: // check for unordered list item lines (third order)
comment: //--------------------------------------------------------------------------------------
comment: // done with this line
comment: //--------------------------------------------------------------------------------------
comment: // check for unordered list item lines (second order)
comment: //--------------------------------------------------------------------------------------
comment: // done with this line
comment: //--------------------------------------------------------------------------------------
comment: // check for unordered list item lines (first order)
comment: //--------------------------------------------------------------------------------------
comment: // done with this line
comment: //--------------------------------------------------------------------------------------
comment: // check for table row (title)
comment: //--------------------------------------------------------------------------------------
comment: // done with this line
comment: //--------------------------------------------------------------------------------------
comment: // check for table row (ordinary)
comment: //--------------------------------------------------------------------------------------
comment: // done with this line
comment: //--------------------------------------------------------------------------------------
comment: // ordinary paragraphs
comment: //--------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //.	compile html version of content
comment: //----------------------------------------------------------------------------------------------
comment: //returns: true on success, false on failure [bool]
comment: // open contents section
comment: // add section title link to contents
comment: // add subsection title links to contents
comment: // level 3
comment: // level 4
comment: // level 5
comment: //echo "ssa: $ssa BECOMES ($ssTitle)&lt;br/&gt;\n";
comment: // add html content
comment: // close contents section
comment: // add TOC to article below first section
comment: //------------------------------------------------------------------------------------------
comment: //	 done
comment: //------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //.	replace phpBBcode
comment: //----------------------------------------------------------------------------------------------
comment: //arg: text - wikicode which may contain phpBBcode [string]
comment: //returns: wikicode with phpBBcode converted to HTML [string]
comment: //----------------------------------------------------------------------------------------------
comment: //.	make anchors from [[wiki|links]]
comment: //----------------------------------------------------------------------------------------------
comment: //arg: text - wikicode which may contain anchors [string]
comment: //returns: wikicode with anchors converted to HTML [string]
comment: // remove blocks
comment: // make array of wikilinks
comment: //----------------------------------------------------------------------------------------------
comment: //.	make an anchor from a single wikilink
comment: //----------------------------------------------------------------------------------------------
comment: //arg: wikiLink - a reference to another wiki article or URL [string]
comment: //returns: link converted to HTML anchor tag [string]
comment: //------------------------------------------------------------------------------------------
comment: // split into label and reference
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: // decide if this is an internal or external link
comment: //------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------
comment: // external link
comment: //--------------------------------------------------------------------------------------
comment: // security
comment: // security
comment: // done
comment: //--------------------------------------------------------------------------------------
comment: // internal link
comment: //--------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------
comment: // decide which type of internal link
comment: //--------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------
comment: // if there's a hash, remove it
comment: //--------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------
comment: // link to article which does not yet exist
comment: //----------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------
comment: // link to article which does exist
comment: //----------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //.	wrap sets of elements, &lt;li&gt;&lt;/li&gt; =&gt; &lt;ul&gt;&lt;li&gt;&lt;/li&gt;&lt;/ul&gt;
comment: //----------------------------------------------------------------------------------------------
comment: //arg: text - wikicode which may contain grouped elements [string]
comment: //returns: text with grouped elements rendered into HTML [string]
comment: // Not all that pretty and only handles all combinations of 1st, 2nd and 3rd order lists,
comment: // prehaps a more general solution could be found.
comment: // could quite easily be done with an extra pass through the text specifically looking for
comment: // these combination of lists tags and seeing if its getting deeper or shallower and adding 
comment: // the appropriate number of tags
comment: //----------------------------------------------------------------------------------------------
comment: //.	ensure a given tag is flanked by another; eg, add 'ul' to 'li', 'table' to 'tr', etc
comment: //----------------------------------------------------------------------------------------------
comment: //arg: text - wikicode which may contain an HTML tag to be wrapped in another HTML tag [string]
comment: //arg: m - marker, eg li [string]
comment: //arg: w - wrap, eg ul [string]
comment: //returns: text with any grouped HTML elements wrapped in container tag
comment: // m = marker, w = wrap
comment: // add &lt;wrap&gt;
comment: // dont need &lt;wrap&gt;
comment: // add &lt;/wrap&gt;
comment: // dont need &lt;/wrap&gt;
comment: //----------------------------------------------------------------------------------------------
comment: //.	remove any html tags from &lt;pre&gt; elements
comment: //----------------------------------------------------------------------------------------------
comment: //arg: text - wikicode which may contain &lt;pre&gt; sections [string]
comment: //returns: text with HTML tags removed from &lt;pre&gt; sections [string]
comment: // padded with ' ' in case $text begins with '&lt;pre&gt;'
comment: //----------------------------------------------------------------------------------------------
comment: //.	retrieve a transcluded section ={=recordAlias|section=}=
comment: //----------------------------------------------------------------------------------------------
comment: //arg: line - line containing transclusion tag [string]
comment: //returns: wikicode to be transcluded [string]	
comment: //------------------------------------------------------------------------------------------
comment: //	separate alias and section
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	determine if recordAlias exists, load the article
comment: //------------------------------------------------------------------------------------------
comment: // TODO: check, load
comment: //------------------------------------------------------------------------------------------
comment: //	determine if recordAlias exists
comment: //------------------------------------------------------------------------------------------
string: ''
string: ''
string: ''
string: ''
string: ''
string: '&lt;'
string: '&amp;lt;'
string: '&gt;'
string: '&amp;gt;'
string: "\r"
string: ''
string: '&lt;'
string: '&amp;lt;'
string: '&gt;'
string: '&amp;gt;'
string: "\r"
string: ''
string: "\n"
string: "\n"
string: 'title'
string: ''
string: 'a'
string: ''
string: 'content'
string: ''
string: 'html'
string: ''
string: 'subsections'
string: '====='
string: '====='
string: ''
string: 'l5-'
string: 'a'
string: '-'
string: 'subsections'
string: '.'
string: '.'
string: '.'
string: ' '
string: 'content'
string: "&lt;h4&gt;&lt;i&gt;&lt;a name='"
string: "'&gt;$line&lt;/a&gt;&lt;/i&gt;&lt;/h4&gt;\n\n"
string: ''
string: '===='
string: '===='
string: ''
string: 'l4-'
string: 'a'
string: '-'
string: 'subsections'
string: '.'
string: '.'
string: ' '
string: 'content'
string: "&lt;h4&gt;&lt;a name='"
string: "'&gt;$line&lt;/a&gt;&lt;/h4&gt;\n\n"
string: ''
string: '==='
string: '==='
string: ''
string: 'l3-'
string: 'a'
string: '-'
string: 'subsections'
string: '.'
string: ' '
string: 'content'
string: "&lt;h3&gt;&lt;a name='"
string: "'&gt;$line&lt;/a&gt;&lt;/h3&gt;\n\n"
string: ''
string: '=='
string: '=='
string: ''
string: 'title'
string: 'content'
string: ''
string: 'a'
string: 'subsections'
string: ' '
string: 'html'
string: "&lt;h2&gt;&lt;a name='"
string: 'a'
string: "'&gt;$line&lt;/a&gt;&lt;/h2&gt;\n\n"
string: ''
string: '=(='
string: '=(='
string: ''
string: '=)='
string: ''
string: "\n"
string: ''
string: 'content'
string: "\n"
string: 'content'
string: 'html'
string: 'content'
string: "\n"
string: ''
string: '={='
string: '***'
string: '&lt;li3&gt;'
string: "&lt;/li3&gt;"
string: ''
string: '**'
string: '&lt;li2&gt;'
string: "&lt;/li2&gt;"
string: ''
string: '*'
string: '&lt;li1&gt;'
string: "&lt;/li1&gt;"
string: ''
string: '|*|'
string: '|*|'
string: '||'
string: "||"
string: "&lt;tr&gt;"
string: "&lt;td class='title'&gt;$cell&lt;/td&gt;"
string: "&lt;/tr&gt;"
string: ''
string: '||'
string: "||"
string: "&lt;tr&gt;"
string: "&lt;td class='wireframe'&gt;$cell&lt;/td&gt;"
string: "&lt;/tr&gt;"
string: ''
string: ''
string: "&lt;p&gt;"
string: "&lt;/p&gt;"
string: 'title'
string: ''
string: ''
string: "&lt;div class='inlinequote'&gt;\n&lt;h1&gt;Contents&lt;/h1&gt;\n"
string: "&amp;nbsp;&amp;nbsp;&lt;a href='#"
string: 'a'
string: "'&gt;"
string: ' '
string: 'title'
string: "&lt;/a&gt;&lt;br/&gt;\n"
string: 'subsections'
string: 'l3'
string: "&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;"
string: "&lt;a href='#"
string: "'&gt;"
string: '.'
string: ' '
string: "&lt;/a&gt;&lt;br/&gt;\n"
string: 'l4'
string: "&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;"
string: "&lt;a href='#"
string: "'&gt;"
string: '.'
string: '.'
string: ' '
string: "&lt;/a&gt;&lt;br/&gt;\n"
string: 'l5'
string: "&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;"
string: "&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;a href='#"
string: "'&gt;"
string: '.'
string: '.'
string: '.'
string: ' '
string: "&lt;/a&gt;&lt;br/&gt;\n"
string: 'html'
string: "%%wikitoc%%"
string: ''
string: "&lt;br/&gt;&lt;/div&gt;\n"
string: '%%wikitoc%%'
string: '[i]'
string: '[/i]'
string: '[b]'
string: '[/b]'
string: '[box]'
string: '[/box]'
string: '[pre]'
string: '[/pre]'
string: '[small]'
string: '[/small]'
string: '[h3]'
string: '[/h3]'
string: '&lt;i&gt;'
string: '&lt;/i&gt;'
string: '&lt;b&gt;'
string: '&lt;/b&gt;'
string: "&lt;div class='inlinequote'&gt;"
string: '&lt;/div&gt;'
string: '&lt;pre&gt;'
string: '&lt;/pre&gt;'
string: '&lt;small&gt;'
string: '&lt;/small&gt;'
string: '&lt;h3&gt;'
string: '&lt;/h3&gt;'
string: '[[:'
string: ''
string: ':]]'
string: ''
string: "[["
string: "]]"
string: '[['
string: ']]'
string: '|'
string: '://'
string: 'java'
string: "'"
string: ''
string: "&lt;a href='"
string: "'&gt;"
string: "&lt;/a&gt;"
string: ''
string: ''
string: 'talk:'
string: 'talk/'
string: 'history:'
string: 'history/'
string: ''
string: '#'
string: 'wiki'
string: 'Wiki_Article'
string: '%%serverPath%%wiki/'
string: "&lt;a href='"
string: "' style='color: red;'&gt;"
string: "&lt;/a&gt;"
string: '%%serverPath%%wiki/'
string: "&lt;a href='"
string: "'&gt;"
string: "&lt;/a&gt;"
string: 'li3'
string: 'ul3'
string: 'li2'
string: 'ul2'
string: 'li1'
string: 'ul1'
string: 'tr'
string: 'xtable'
string: '&lt;li1&gt;'
string: '&lt;/li1&gt;'
string: '&lt;li2&gt;'
string: '&lt;/li2&gt;'
string: '&lt;li3&gt;'
string: '&lt;/li3&gt;'
string: '/ul1&gt;&lt;ul2'
string: '/ul2&gt;&lt;ul3'
string: '/ul1&gt;&lt;ul3'
string: '/ul3&gt;&lt;ul2'
string: '/ul2&gt;&lt;ul1'
string: '/ul3&gt;&lt;ul1'
string: '&lt;ul1&gt;'
string: '&lt;ul2&gt;'
string: '&lt;ul3&gt;'
string: '&lt;/ul1&gt;'
string: '&lt;/ul2&gt;'
string: '&lt;/ul3&gt;'
string: '&lt;li&gt;'
string: '&lt;/li&gt;'
string: '&lt;li&gt;'
string: '&lt;/li&gt;'
string: '&lt;li&gt;'
string: '&lt;/li&gt;'
string: 'ul'
string: 'ul'
string: 'ul&gt;&lt;ul'
string: '/ul'
string: '/ul'
string: '/ul&gt;&lt;/ul'
string: '&lt;ul&gt;'
string: '&lt;ul&gt;&lt;ul&gt;'
string: '&lt;ul&gt;&lt;ul&gt;&lt;ul&gt;'
string: '&lt;/ul&gt;'
string: '&lt;/ul&gt;&lt;/ul&gt;'
string: '&lt;/ul&gt;&lt;/ul&gt;&lt;/ul&gt;'
string: '&lt;xtable&gt;'
string: '&lt;/xtable&gt;'
string: "&lt;/tr&gt;"
string: "&lt;/td&gt;"
string: '&lt;tr&gt;'
string: '&lt;td '
string: "&lt;table class='wireframe' width='100%'&gt;\n"
string: "&lt;/table&gt;\n"
string: "  &lt;/tr&gt;\n"
string: "&lt;/td&gt;\n"
string: "  &lt;tr&gt;\n"
string: "    &lt;td "
string: "&lt;$m&gt;"
string: "&lt;$w&gt;&lt;$m&gt;"
string: "&lt;/$m&gt;&lt;$w&gt;&lt;$m&gt;"
string: "&lt;/$m&gt;\n&lt;$m&gt;"
string: "&lt;/$m&gt;"
string: "&lt;/$m&gt;&lt;/$w&gt;"
string: "&lt;/$m&gt;&lt;/$w&gt;\n&lt;$m&gt;"
string: "&lt;/$m&gt;\n&lt;$m&gt;"
string: "&lt;$w&gt;"
string: "&lt;$w&gt;\n"
string: "&lt;/$w&gt;"
string: "\n&lt;/$w&gt;"
string: ' '
string: "&lt;pre&gt;"
string: "&lt;/pre&gt;"
string: '[pre]'
string: '[/pre]'
string: "[pre]"
string: "&lt;pre&gt;"
string: "[/pre]"
string: "&lt;/pre&gt;"
string: ''
string: ''
string: '={='
string: '=}='
string: "\r"
string: '\t'
string: ''
string: ''
string: ''
string: ''
string: '|'
string: 'wiki'
string: '(transclusion not found)'

<b>scanning file: /var/www/an2google/trunk/modules/wiki/inc/install.inc.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	install script for Wiki module
comment: //--------------------------------------------------------------------------------------------------
comment: //+	reports are human-readable HTML, with script-readable HTML comments
comment: //--------------------------------------------------------------------------------------------------
comment: //|	install the Wiki module
comment: //--------------------------------------------------------------------------------------------------
comment: //returns: html report or false if not authorized [string][bool]
comment: //----------------------------------------------------------------------------------------------
comment: //	create or upgrade Wiki_Article table
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	import any records from previous Articles table
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	create or upgrade Wiki_Category table
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	create or upgrade Wiki_Revision table
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	create or upgrade Wiki_MWImport table
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	done
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
comment: //|	discover if this module is installed
comment: //--------------------------------------------------------------------------------------------------
comment: //:	if installed correctly report will contain HTML comment &lt;!-- installed correctly --&gt;
comment: //returns: HTML installation status report [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	ensure the table which stores Article objects exists and is correct
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	ensure the table which stores Category objects exists and is correct
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	ensure the table which stores Revision objects exists and is correct
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	ensure the table which stores MWImport objects exists and is correct
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	done
comment: //----------------------------------------------------------------------------------------------
string: 'core/dbdriver/mysqladmin.dbd.php'
string: 'modules/wiki/models/article.mod.php'
string: 'modules/wiki/models/category.mod.php'
string: 'modules/wiki/models/revision.mod.php'
string: 'modules/wiki/models/mwimport.mod.php'
string: 'admin'
string: ''
string: 'recordAlias'
string: 'alias'
string: 'wiki'
string: "&lt;b&gt;moved $count records from 'wiki' table.&lt;/b&gt;&lt;br/&gt;"
string: 'admin'
string: ''
string: '&lt;!-- table installed correctly --&gt;'
string: '&lt;!-- module installed correctly --&gt;'

<b>scanning file: /var/www/an2google/trunk/modules/wiki/actions/wikicode.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	display wikicode help
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/wiki/actions/wikicode.page.php'

<b>scanning file: /var/www/an2google/trunk/modules/wiki/actions/test.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	developing for unordered lists
comment: //--------------------------------------------------------------------------------------------------
string: "
* test
* data
"
string: "\n"
string: '*'
string: "something"

<b>scanning file: /var/www/an2google/trunk/modules/wiki/actions/talk.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	show talk page for a given article 
comment: //--------------------------------------------------------------------------------------------------
comment: //+	NOTE! talks pages are now articles in a different namespace
comment: //+	The refrence that is givne should be to the prant (main) atricle, to which the talk page 
comment: //+	belongs, not to the talk page itself.
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	render the page
comment: //----------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	talk page does not yet exist
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	talk page does exist, show it
comment: //------------------------------------------------------------------------------------------
string: 'modules/wiki/models/article.mod.php'
string: ''
string: 'wiki_article'
string: 'Could not load parent article.'
string: 'wiki'
string: 'wiki_article'
string: 'show'
string: 'talk'
string: 'wiki/talk/'
string: ''
string: "&lt;p&gt;There isn't a conversation yet, but you can start one :-)&lt;/p&gt;"
string: 'modules/wiki/actions/talk.page.php'
string: 'raUID'
string: 'talkHtml'
string: 'parentTitle'
string: 'Missing talk page.'
string: 'modules/wiki/actions/talk.page.php'
string: 'raUID'
string: 'parentTitle'
string: 'parentUID'

<b>scanning file: /var/www/an2google/trunk/modules/wiki/actions/showrevision.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	show current and adjacent versions of a wiki document
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check permissions and reference
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	render page
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: tidy this all up
comment: // messy
string: 'modules/wiki/models/article.mod.php'
string: 'modules/wiki/models/revision.mod.php'
string: ''
string: 'wiki'
string: 'wiki_revision'
string: 'show'
string: 'wiki'
string: 'wiki_article'
string: 'show'
string: ''
string: 'infobox'
string: 'infobox'
string: "[[:theme::navtitlebox::label=Infobox:]]\n"
string: ""
string: 'infobox'
string: "\n&lt;br/&gt;&lt;br/&gt;"
string: 'modules/wiki/actions/showrevision.page.php'
string: 'currentRevision'
string: 'raUID'

<b>scanning file: /var/www/an2google/trunk/modules/wiki/actions/show.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	display a wiki article
comment: //--------------------------------------------------------------------------------------------------
comment: //	If no recordAlias is specified, the 'index' article is shown.  If that does not exist then
comment: //	one will be created.
comment: //----------------------------------------------------------------------------------------------
comment: //	decide which article to show
comment: //----------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	no article specified
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	article has been specified
comment: //------------------------------------------------------------------------------------------
comment: // maybe its an alias
comment: // no? maybe its a UID
comment: //----------------------------------------------------------------------------------------------
comment: //	load and process the article
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	increment hit count
comment: //----------------------------------------------------------------------------------------------
comment: //$newHit = $extArray['viewcount'] + 1;
comment: //$sql = "update Wiki_Article "
comment: //	 . "set viewcount='" . $db-&gt;addMarkup($newHit) . "' "
comment: //	 . "where UID='" . $db-&gt;addMarkup($model-&gt;UID) . "'";
comment: //$db-&gt;query($sql);
comment: //----------------------------------------------------------------------------------------------
comment: //	show it
comment: //----------------------------------------------------------------------------------------------
string: 'modules/wiki/models/article.mod.php'
string: ''
string: 'wiki'
string: 'wiki_article'
string: 'Index'
string: 'Index'
string: 'wiki'
string: 'wiki_article'
string: 'wiki_article'
string: 'modules/wiki/actions/notfound.page.php'
string: 'talk'
string: 'wiki/talk/'
string: ''
string: 'infobox'
string: 'infobox'
string: "[[:theme::navtitlebox::label=Infobox:]]\n"
string: ""
string: 'infobox'
string: "\n&lt;br/&gt;&lt;br/&gt;"
string: 'modules/wiki/actions/show.page.php'
string: 'raUID'

<b>scanning file: /var/www/an2google/trunk/modules/wiki/actions/save.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	save an edit to a wiki page
comment: //--------------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	check POST vars and permissions
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	save any changes
comment: //------------------------------------------------------------------------------------------
comment: //TODO: sanitizing here
comment: //------------------------------------------------------------------------------------------
comment: //	everything went better and expetion /dolan
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	couldn't save it, bail here and don't save a revision
comment: //------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------
comment: //	save new content in revisions table
comment: //--------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------
comment: //	done, 302 back to the article
comment: //--------------------------------------------------------------------------------------
string: 'modules/wiki/models/article.mod.php'
string: 'modules/wiki/models/revision.mod.php'
string: 'action'
string: 'action not supplied'
string: 'savePage'
string: 'action'
string: 'action not supported'
string: 'UID'
string: 'no such article'
string: 'wiki'
string: 'wiki_article'
string: 'edit'
string: 'title'
string: 'content'
string: 'nav'
string: 'wiki/'
string: 'article'
string: 'wiki/'
string: 'talk'
string: 'wiki/talk/'
string: ''
string: 'article'
string: "Saved edit to wiki article."
string: 'ok'
string: 'talk'
string: "Saved edit to wiki talk page."
string: 'ok'
string: "Could not save changes to wiki article:&lt;br/&gt; $report"
string: 'bad'
string: ''
string: 'reason'
string: 'reason'
string: ''
string: "Saved revision."
string: 'ok'
string: "Could not save revision:&lt;br/&gt;$report"
string: 'bad'

<b>scanning file: /var/www/an2google/trunk/modules/wiki/actions/pdf.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	display a wiki article
comment: //--------------------------------------------------------------------------------------------------
comment: //+	If no recordAlias is specified, the 'index' article is shown.  If that does not exist then
comment: //+	one will be created.
comment: //----------------------------------------------------------------------------------------------
comment: //	decide which article to show
comment: //----------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	no article specified
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	article has been specified
comment: //------------------------------------------------------------------------------------------
comment: // maybe its an alias
comment: // no? maybe its a UID
comment: //----------------------------------------------------------------------------------------------
comment: //	load and process the article
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	increment hit count
comment: //----------------------------------------------------------------------------------------------
comment: //$sql = "update wiki set viewcount='" . $newHit . "' where UID='" . $extArray['UID'] . "'";
comment: //$db-&gt;query($sql);
comment: //----------------------------------------------------------------------------------------------
comment: //	show it
comment: //----------------------------------------------------------------------------------------------
string: 'modules/wiki/models/wiki.mod.php'
string: ''
string: 'wiki'
string: 'wiki_article'
string: 'Index'
string: 'Index'
string: 'wiki'
string: 'wiki_article'
string: 'wiki_article'
string: 'modules/wiki/actions/notfound.page.php'
string: 'infobox'
string: ''
string: 'infobox'
string: "[[:theme::navtitlebox::label=Infobox:]]\n"
string: "&lt;small&gt;\n"
string: 'infobox'
string: "\n&lt;br/&gt;&lt;br/&gt;&lt;/small&gt;"
string: 'viewcount'
string: 'modules/wiki/actions/pdf.page.php'
string: 'raUID'

<b>scanning file: /var/www/an2google/trunk/modules/wiki/actions/new.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	create a new Article object
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check permissions and any POST variables
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	create the object
comment: //----------------------------------------------------------------------------------------------
comment: //case 'namespace':	$model-&gt;namespace = $utils-&gt;cleanString($value); break;
comment: //----------------------------------------------------------------------------------------------
comment: //	check that object was created and redirect
comment: //----------------------------------------------------------------------------------------------
string: 'modules/wiki/models/article.mod.php'
string: 'wiki'
string: 'wiki_article'
string: 'new'
string: 'You are not authorized to create new Articles.'
string: 'title'
string: 'content'
string: 'nav'
string: 'locked'
string: 'alias'
string: ''
string: 'Created New Article&lt;br/&gt;'
string: 'ok'
string: 'wiki/edit/'
string: 'Could not create new Article:&lt;br/&gt;'
string: 'bad'
string: 'wiki/'

<b>scanning file: /var/www/an2google/trunk/modules/wiki/actions/mwscan.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	Scan a MediaWiki and note all articles in the Wiki_MWImport table
comment: //--------------------------------------------------------------------------------------------------
comment: //http://www.wikihow.com/api.php?action=query&amp;list=allpages&amp;apfrom=Kre&amp;aplimit=50&amp;format=xml
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	try download list of articles
comment: //----------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	a quick page template
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	download
comment: //------------------------------------------------------------------------------------------
comment: //echo "&lt;textarea rows='10' cols='80'&gt;$raw&lt;/textarea&gt;";
comment: //TODO: handle error cases
string: 'modules/wiki/models/mwimport.mod.php'
string: 'admin'
string: 'Admins only.'
string: 'wikiUrl'
string: 'modules/wiki/actions/mwscan.if.page.php'
string: 'wikiUrl'
string: ''
string: 'startTitle'
string: 'startTitle'
string: 'step'
string: 'step'
string: 'wikiUrl'
string: "api.php?action=query&amp;list=allpages&amp;format=xml"
string: "&amp;apfrom="
string: "&amp;aplimit="
string: ''
string: "&lt;!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'&gt;
&lt;head&gt;
&lt;title&gt;awareNet - wiki - scan&lt;/title&gt;
&lt;meta http-equiv='Content-Type' content='text/html; charset=utf-8' /&gt;
&lt;link href='http://awarenet.co.za/themes/clockface/css/iframe.css' rel='stylesheet' type='text/css' /&gt;
&lt;style type='text/css'&gt;
.style1 {font-size: 9px}
&lt;/style&gt;

&lt;script language='javascript'&gt;
	function kPageInit() {
		resizeFrame();
	}

	function resizeFrame() {
		frameObj = window.parent.document.getElementsByName(window.name);
		frameObj[0].height = document.body.offsetHeight + 40;

	}


&lt;/script&gt;
&lt;/head&gt;

&lt;body onLoad='kPageInit();'&gt; 
&lt;i&gt;&lt;/i&gt;"
string: "&lt;/body&gt;&lt;/html&gt;"
string: "&lt;b&gt;start url:&lt;/b&gt; $startUrl&lt;br/&gt;&lt;br/&gt;\n"
string: '&lt;?xml version="1.0" encoding="utf-8"?&gt;&lt;api&gt;&lt;query-continue&gt;&lt;allpages apfrom="Load-PDF-Files-Faster" /&gt;&lt;/query-continue&gt;&lt;query&gt;&lt;allpages&gt;&lt;p pageid="590859" ns="0" title="Load 35Mm Film Into a Manual Camera" /&gt;&lt;p pageid="17181" ns="0" title="Load Adobe PDF Files Faster" /&gt;&lt;p pageid="642484" ns="0" title="Load Cargo on a Car" /&gt;&lt;p pageid="549246" ns="0" title="Load Dice" /&gt;&lt;p pageid="1022803" ns="0" title="Load Games Onto Your Ipod" /&gt;&lt;p pageid="486861" ns="0" title="Load Games Onto Your iPod" /&gt;&lt;p pageid="212965" ns="0" title="Load Java on to Samsung SGH D900/E250" /&gt;&lt;p pageid="291849" ns="0" title="Load Java on to Samsung Sgh D900/E250" /&gt;&lt;p pageid="100535" ns="0" title="Load Music Onto Your Ipod" /&gt;&lt;p pageid="100509" ns="0" title="Load Music Onto Your iPod" /&gt;&lt;/allpages&gt;&lt;/query&gt;&lt;/api&gt;'
string: 'wikiUrl'
string: "api.php?action=query&amp;list=allpages&amp;format=xml"
string: "&amp;apfrom="
string: "&amp;aplimit="
string: "&lt;b&gt;next start:&lt;/b&gt; "
string: 'apfrom'
string: "&lt;br/&gt;"
string: 'allpages'
string: 'wikiUrl'
string: 'apfrom'
string: 'apfrom'
string: "&lt;b&gt;saved apfrom:&lt;/b&gt; "
string: "&lt;br/&gt;"
string: "&lt;i&gt;added $addCount new objects&lt;/i&gt;&lt;br/&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/wiki/actions/mwimport.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	console for importing articles from MediaWiki
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	display import console
comment: //----------------------------------------------------------------------------------------------
string: 'admin'
string: 'modules/wiki/actions/mwimport.page.php'

<b>scanning file: /var/www/an2google/trunk/modules/wiki/actions/list.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	list all pages on the wiki
comment: //--------------------------------------------------------------------------------------------------
comment: //require_once($kapenta-&gt;installPath . 'modules/wiki/models/wiki.mod.php');
comment: //----------------------------------------------------------------------------------------------
comment: //	check for arguments
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	render the page
comment: //----------------------------------------------------------------------------------------------
string: 'page'
string: 'page'
string: 'num'
string: 'num'
string: 'modules/wiki/actions/list.page.php'
string: 'pageno'
string: 'num'

<b>scanning file: /var/www/an2google/trunk/modules/wiki/actions/history.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	display complete revision history for a given wiki article
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check reference and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	render the page
comment: //----------------------------------------------------------------------------------------------
string: 'modules/wiki/models/article.mod.php'
string: ''
string: 'wiki_article'
string: 'no such wiki article'
string: 'modules/wiki/actions/history.page.php'
string: 'UID'
string: 'raUID'
string: 'articleTitle'

<b>scanning file: /var/www/an2google/trunk/modules/wiki/actions/edittalk.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	edit a wiki article
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: // check permissions and reference
comment: //----------------------------------------------------------------------------------------------
comment: // check for ref
comment: // check correct ref
comment: //----------------------------------------------------------------------------------------------
comment: // create talk page if it does not exist
comment: //----------------------------------------------------------------------------------------------
comment: // &lt;-- talk pages are complete articles
comment: // &lt;-- this is what differnetiates them
comment: // &lt;-- bind to the article
comment: //----------------------------------------------------------------------------------------------
comment: // check permissions and render the page
comment: //----------------------------------------------------------------------------------------------	
string: 'modules/wiki/models/article.mod.php'
string: ''
string: 'wiki_article'
string: 'wiki'
string: 'wiki_article'
string: 'edit'
string: ''
string: 'This space is for general discussion of the article.  Comments, questions, '
string: 'TODOs, corrections and the like.'
string: 'talk'
string: 'Talk: '
string: ''
string: "Created talk page for: "
string: 'ok'
string: "Could not create talk page for "
string: ":&lt;br/&gt;"
string: 'ok'
string: 'modules/wiki/actions/edittalk.page.php'
string: 'UID'
string: 'raUID'
string: 'parentUID'

<b>scanning file: /var/www/an2google/trunk/modules/wiki/actions/edit.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	edit a wiki article
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check permissions and reference
comment: //----------------------------------------------------------------------------------------------
comment: // check for ref	
comment: //$UID = $aliases-&gt;findRedirect('wiki_article');			// check correct ref
comment: //----------------------------------------------------------------------------------------------
comment: //	render the page
comment: //----------------------------------------------------------------------------------------------
string: 'modules/wiki/models/article.mod.php'
string: ''
string: 'Article not found.'
string: 'wiki'
string: 'wiki_article'
string: 'edit'
string: 'modules/wiki/actions/edit.page.php'
string: 'UID'
string: 'raUID'

<b>scanning file: /var/www/an2google/trunk/modules/wiki/actions/default.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	default action of the wiki module is to show an article
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/wiki/actions/show.act.php'

<b>scanning file: /var/www/an2google/trunk/modules/videos/views/videosummarynav.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	short summary of video for the nav
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - alias or UID of a Videos_Video object [string]
comment: //opt: videoUID - replaces raUID if present [string]
comment: //%	return value [html]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: check permissions here
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
string: 'modules/videos/models/video.mod.php'
string: ''
string: 'videoUID'
string: 'raUID'
string: 'videoUID'
string: 'raUID'
string: ''
string: 'raUID'
string: ''
string: 'modules/videos/views/videosummarynav.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/videos/views/videosetdetail.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	display a set of videos associated with something, along with some metadata
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: refModule - module to list on [string]
comment: //arg: refModel - type of object which own videos [string]
comment: //arg: refUID - UID of item which owns videos [string]
comment: //opt: tags - display block tags instead of draggable buttons (yes|no) [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: check the permission, work out naming convention for inheritance
comment: //----------------------------------------------------------------------------------------------
comment: //	load videos from database
comment: //----------------------------------------------------------------------------------------------
comment: //$sql = "select * from Videos_Video where refModule='" . $db-&gt;addMarkup($args['refModule']) 
comment: //     . "' and refUID='" . $db-&gt;addMarkup($args['refUID']) . "' order by floor(weight)";
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: tidy this
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/videos/models/video.mod.php'
string: ''
string: 'tags'
string: 'yes'
string: 'tags'
string: 'refModule'
string: '(no refModule)'
string: 'refModel'
string: '(no refModel)'
string: 'refUID'
string: '(no refUID)'
string: 'refModule'
string: 'refModel'
string: 'refUID'
string: '(no such module)'
string: '(no owner)'
string: 'videos-show'
string: ''
string: "refUID='"
string: "'"
string: "refModule='"
string: "'"
string: 'videos_video'
string: '*'
string: 'floor(weight)'
string: 'modules/videos/views/videodetail.block.php'
string: 'tags'
string: ''
string: 'imgblocks'
string: ''
string: 'thumbUrl'
string: '%%serverPath%%videos/thumb/'
string: 'alias'
string: 'editUrl'
string: '%%serverPath%%videos/editvideo/return_uploadmultiple/'
string: 'alias'
string: 'videos-edit'
string: 'editUrl'
string: '%%serverPath%%videos/viewset/return_uploadmultiple/'
string: ''
string: 'caption'
string: 'caption'
string: 'none.'
string: '/video/uploadmultiple/refModule_'
string: '/refModel_'
string: '/refUID_'
string: '/'
string: 'tags'
string: "
			&lt;small&gt;
			To use this video, copy one of the following tags into your text.&lt;br/&gt;
	        &lt;b&gt;Tag:&lt;/b&gt; [&amp;#91;:videos::thumb::videoUID="
string: ":&amp;#93;]&lt;br/&gt;
	        &lt;b&gt;Tag:&lt;/b&gt; [&amp;#91;:videos::width300::videoUID="
string: ":&amp;#93;]&lt;br/&gt;
	        &lt;b&gt;Tag:&lt;/b&gt; [&amp;#91;:videos::width570::videoUID="
string: ":&amp;#93;]&lt;br/&gt;	
			&lt;/small&gt;
			"
string: 'imgblocks'
string: "
			&lt;small&gt;To use this video, drag one of the buttons below into your text:&lt;/small&gt;&lt;br/&gt;
			[[:theme::button::label=thumbnail::alt=videos|raUID="
string: "|size=thumb|:]]
			[[:theme::button::label=width300::alt=videos|raUID="
string: "|size=width300|:]]
			[[:theme::button::label=width570::alt=videos|raUID="
string: "|size=widtheditor|:]]
			&lt;br/&gt;
			"
string: 'deleteForm'
string: "
		&lt;form name='deleteVideo' method='POST' action='%%serverPath%%videos/delete/' &gt;
		&lt;input type='hidden' name='action' value='deleteVideo' /&gt;
		&lt;input type='hidden' name='UID' value='"
string: "' /&gt;
		&lt;input type='hidden' name='return' value='"
string: "' /&gt;
		&lt;input type='image' src='%%serverPath%%themes/clockface/images/btn-del.png' alt='delete' /&gt;
		&lt;/form&gt;
		"

<b>scanning file: /var/www/an2google/trunk/modules/videos/views/uploadmultipleform.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	form for uploading multiple videos
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: refModule - name of a kapenta module [string]
comment: //arg: refModel - object type [string]
comment: //arg: refUID - UID of object which may own videos [string]
comment: //opt: tags - display block tags on return instead of draggable buttons (yes|no) [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check args and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	add the form
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/videos/models/video.mod.php'
string: ''
string: 'no'
string: 'tags'
string: 'yes'
string: 'tags'
string: 'yes'
string: 'refModule'
string: '(no refModule)'
string: 'refModel'
string: '(no refModel)'
string: 'refUID'
string: '(no refUID)'
string: 'refModule'
string: 'refModel'
string: 'refUID'
string: '(no such module)'
string: '(owner not found)'
string: 'videos-add'
string: ''
string: 'refModule'
string: 'refModel'
string: 'refUID'
string: 'tags'
string: 'modules/videos/views/uploadmultiple.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/videos/views/uploadmultiple.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	iframe to upload multiple videos
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: refModule - module to list on [string]
comment: //arg: refModel - type of object [string]
comment: //arg: refUID - UID of item which own videos [string]
comment: //opt: categories - comma delimited list of categories these pictures can belong to [string]
comment: //opt: tags - display block tags instead of draggable buttons, default is no (yes|no) [string]
comment: //%	return value [string]
comment: //%	not yet implemented [string]
comment: //%	diplay block tags instead of draggable buttons (yes|no) [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments as permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the iframe
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/videos/models/video.mod.php'
string: ''
string: ''
string: 'no'
string: 'tags'
string: 'yes'
string: 'tags'
string: 'yes'
string: 'refModule'
string: '(no module)'
string: 'refModel'
string: '(no module)'
string: 'refUID'
string: '(no UID)'
string: 'refModule'
string: 'refModel'
string: 'refUID'
string: '(no such module)'
string: '(no such object)'
string: 'videos-add'
string: ''
string: 'videos/uploadmultiple/'
string: 'refModule_'
string: 'refModule'
string: '/'
string: 'refModel_'
string: 'refModel'
string: '/'
string: 'refUID_'
string: 'refUID'
string: '/'
string: 'tags_'
string: '/'
string: 'categories'
string: '/cats_'
string: 'categories'
string: "&lt;iframe src='"
string: "' name='vidMul"
string: "'"
string: " width='570' height='200' frameborder='0'&gt;&lt;/iframe&gt;"

<b>scanning file: /var/www/an2google/trunk/modules/videos/views/thumbs.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	return thumbnails of videos in a given gallery
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: UID - UID of a Videos_Gallery object (and not alias) [string]
comment: //opt: size - size to show thumbs (default is 'thumb') [string]
comment: //opt: num - maximum number of thumbs to show (most recent first) (default is no limit) [string]
comment: //---------------------------------------------------------------------------------------------
comment: //	check arguments
comment: //---------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	load images
comment: //---------------------------------------------------------------------------------------------
comment: //$thumbUrl = '%%serverPath%%images/' . $size . '/' . $row['UID'];
comment: //	  . "&lt;img src='" . $thumbUrl . "' title='" . $row['title'] . "' border='0' vspace='2px' hspace='2px' /&gt;&lt;/a&gt;\n";
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/videos/models/gallery.mod.php'
string: ''
string: ''
string: 'thumb'
string: 'UID'
string: 'size'
string: 'size'
string: 'num'
string: 'num'
string: "refModule='videos'"
string: "refUID='"
string: 'UID'
string: "'"
string: 'videos_video'
string: '*'
string: 'weight ASC'
string: ''
string: '%%serverPath%%videos/play/'
string: 'alias'
string: "&lt;a href='"
string: "'&gt;"
string: "[[:images::default::size=thumb::refModule=videos::refModel=Videos_Video"
string: "::refUID="
string: 'UID'
string: "::pad=2::link=no:]]"
string: "&lt;/a&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/videos/views/summarynav.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	summarise for the nav (300 wide)
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: galleryUID - UID of a Videos_Gallery object [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/videos/models/gallery.mod.php'
string: ''
string: 'galleryUID'
string: ''
string: 'galleryUID'
string: ''
string: 'galleryUID'
string: 'galleryUID'
string: 'modules/videos/views/summarynav.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/videos/views/summarylistuser.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	list all galleries belonging to a specified user	//TODO: fix this up
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: userUID - user whose galleries to list [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	load user's galleries from database
comment: //----------------------------------------------------------------------------------------------
comment: //$sql = "select * from Videos_Gallery "
comment: //	 . "where parent='root' and createdBy='" . $db-&gt;addMarkup($args['userUID']) . "' "
comment: //	 . "order by title DESC";
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/videos/models/gallery.mod.php'
string: ''
string: 'userUID'
string: ''
string: "createdBy='"
string: 'userUID'
string: "'"
string: 'videos_gallery'
string: '*'
string: 'title DESC'
string: "(this user has not created any video galleries yet)&lt;br/&gt;\n"
string: "[[:videos::summary::raUID="
string: 'UID'
string: ":]]"

<b>scanning file: /var/www/an2google/trunk/modules/videos/views/summarylist.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	list all galleries belonging to a specified user
comment: //--------------------------------------------------------------------------------------------------
comment: //opt: orderBy - field to order by, default is title (title|imagecount|createdOn|editedOn) [string]
comment: //opt: pageNo - page number to display, default is '1' [string]
comment: //opt: pageSize - number of records per page, default '10' [string]
comment: //: galleries which do not contain any images are not displayed
comment: //returns: html list [string]
comment: //---------------------------------------------------------------------------------------------
comment: //	check arguments
comment: //---------------------------------------------------------------------------------------------
comment: // no such sortable column
comment: //---------------------------------------------------------------------------------------------
comment: //	count galleries, set start and end rows and load the recordset
comment: //---------------------------------------------------------------------------------------------
comment: // do not show galleries with no images
comment: //---------------------------------------------------------------------------------------------
comment: //	render html
comment: //---------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/videos/models/gallery.mod.php'
string: 'title'
string: ''
string: 'DESC'
string: 'orderBy'
string: 'orderBy'
string: 'pageNo'
string: 'pageNo'
string: 'pageSize'
string: 'pageSize'
string: 'createdOn'
string: 'DESC'
string: 'editedOn'
string: 'DESC'
string: 'title'
string: 'ASC'
string: 'imagecount'
string: 'DESC'
string: ''
string: 'videocount &gt; 0'
string: 'videos_gallery'
string: 'videos_gallery'
string: '*'
string: ' '
string: '%%serverPath%%videos/listallgalleries/orderby_'
string: "[[:theme::pagination::page="
string: "::total="
string: "::link="
string: '/'
string: ":]]\n"
string: "&lt;table noborder width='100%'&gt;&lt;tr&gt;&lt;td bgcolor='#dddddd'&gt;"
string: "&amp;nbsp;&amp;nbsp; list by: "
string: "&lt;a href='"
string: "title'&gt;[title]&lt;/a&gt; "
string: "&lt;a href='"
string: "imagecount'&gt;[number of images]&lt;/a&gt; "
string: "&lt;a href='"
string: "createdOn'&gt;[creation date]&lt;/a&gt;"
string: "&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;hr/&gt;"
string: "[[:videos::summary::raUID="
string: 'UID'
string: ":]]"
string: "(no galleries match criteria)"

<b>scanning file: /var/www/an2google/trunk/modules/videos/views/summary.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	summarise
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - alias or UID of a Videos_Gallery object [string]
comment: //opt: pageUID - overrides raUID [string]
comment: //% return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: permissions check here
comment: //TODO: live JS
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/videos/models/gallery.mod.php'
string: ''
string: 'public'
string: '[[:users::pleaselogin:]]'
string: 'pageUID'
string: 'raUID'
string: 'pageUID'
string: 'raUID'
string: ''
string: 'raUID'
string: ''
string: 'modules/videos/views/summary.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/videos/views/showgallery.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	show a video gallery
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - alias or UID of a Videos_Gallery object [string]
comment: //opt: galleryUID - overrides raUID of present [string]
comment: //% return value;
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/videos/models/gallery.mod.php'
string: ''
string: 'galleryUID'
string: 'raUID'
string: 'galleryUID'
string: 'raUID'
string: ''
string: 'raUID'
string: ''
string: 'modules/videos/views/showgallery.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/videos/views/samegallerynav.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	show videos from the same gallery as this one
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - alias or UID of a Videos_Video object [string]
comment: //opt: videoUID - replaces raUID if present [string]
comment: //%	return value [html]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: check permissions here
comment: //----------------------------------------------------------------------------------------------
comment: //	load siblings from database
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
comment: // NVM
string: 'modules/videos/models/video.mod.php'
string: ''
string: 'videoUID'
string: 'raUID'
string: 'videoUID'
string: 'raUID'
string: ''
string: 'raUID'
string: ''
string: "refModel='"
string: "'"
string: "refUID='"
string: "'"
string: 'videos_video'
string: '*'
string: 'weight ASC'
string: "[[:theme::navtitlebox::label=Also In This Gallery::toggle=divSameGallery:]]\n"
string: "&lt;div id='divSameGallery'&gt;\n"
string: "[[:videos::videosummarynav::raUID="
string: 'UID'
string: ":]]\n"
string: "&lt;/div&gt;\n&lt;br/&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/videos/views/randomthumbs.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	return thumbnails of random videos
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: userUID - UID of a user (and not recordAlias) [string]
comment: //opt: size - size to show thumbs (optional) [string]
comment: //opt: num - maximum number of thumbs to show (most recent first) (default is all images) [string]
comment: //: note the direct use of images table - TODO: work around this
comment: //%	return value [string]
comment: //%	image size [string]
comment: //---------------------------------------------------------------------------------------------
comment: //	check arguments
comment: //---------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	get random image UIDs
comment: //---------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/videos/models/gallery.mod.php'
string: ''
string: ''
string: 'thumbsm'
string: 'userUID'
string: 'size'
string: 'size'
string: 'num'
string: 'num'
string: "createdBy='"
string: 'userUID'
string: "'"
string: "refModel='"
string: 'videos_gallery'
string: "'"
string: "refModule='videos'"
string: 'videos_video'
string: '*'
string: 'RAND()'
string: ''
string: '%%serverPath%%videos/play/'
string: 'alias'
string: '%%serverPath%%images/'
string: '/'
string: 'alias'
string: "&lt;a href='"
string: "'&gt;"
string: "&lt;img src='"
string: "' title='"
string: 'title'
string: "' border='0' vspace='2px' hspace='2px' /&gt;&lt;/a&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/videos/views/randomgalleriesnav.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	list some random gallery summaries (formatted for the nav)
comment: //--------------------------------------------------------------------------------------------------
comment: // opt: num = max number to show, default is 10 (int) [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	load x random galleries from the database
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
comment: //$sql = "SELECT * FROM Videos_Gallery "
comment: //	   . "WHERE videocount &gt; 0 "
comment: //	   . "ORDER BY RAND() limit 0," . $db-&gt;addMarkup($num);
string: 'modules/videos/models/gallery.mod.php'
string: ''
string: 'num'
string: 'num'
string: 'videocount &gt; 0'
string: 'videos_gallery'
string: '*'
string: 'RAND()'
string: 'modules/videos/views/summarynav.block.php'
string: 'galleryUID'
string: 'UID'

<b>scanning file: /var/www/an2google/trunk/modules/videos/views/player.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	make a flowplayer to load a given video
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - alias or UID of a Videos_Video object [string]
comment: //opt: videoUID - overrides raUID if present [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: permissions check here
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	flash animation
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	flash or mp4 video
comment: //------------------------------------------------------------------------------------------
string: 'modules/videos/models/video.mod.php'
string: ''
string: 'videoUID'
string: 'raUID'
string: 'videoUID'
string: 'raUID'
string: ''
string: 'raUID'
string: ''
string: 'swf'
string: "(cannot preview this object)"
string: 'modules/videos/views/player.block.php'
string: 'width'
string: '560'
string: 'height'
string: '420'

<b>scanning file: /var/www/an2google/trunk/modules/videos/views/newgalleryform.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	form to create a new video gallery (formatted for nav, noargs)
comment: //--------------------------------------------------------------------------------------------------
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/videos/models/gallery.mod.php'
string: ''
string: 'videos'
string: 'videos_gallery'
string: 'new'
string: ''
string: 'modules/videos/views/newgalleryform.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/videos/views/navlist.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	list all galleries for the nav 
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: userUID - user whose galleries we wish to show [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: check permissions here
comment: //----------------------------------------------------------------------------------------------
comment: //	load from database
comment: //----------------------------------------------------------------------------------------------
comment: //$sql = "SELEcT * FROM Videos_Gallery "
comment: //	   . "WHERE createdBy='" . $db-&gt;addMarkup($args['userUID']) . "' "
comment: //	   . "ORDER BY title";
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/videos/models/gallery.mod.php'
string: ''
string: 'userUID'
string: ''
string: "createdBy='"
string: 'userUID'
string: "'"
string: 'videos_gallery'
string: '*'
string: 'title'
string: 'modules/videos/views/summarynav.block.php'
string: 'galleryUID'
string: 'UID'
string: 'userLink'
string: '[[:users::namelink::userUID='
string: ':]]'
string: "&lt;div class='inlinequote'&gt;(no galleries)&lt;/div&gt;&lt;br/&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/videos/views/menu.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	menu for gallery, no arguments
comment: //--------------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/videos/models/gallery.mod.php'
string: 'newEntry'
string: '[[:theme::submenu::label=Create New Gallery::link=/gallery/new/:]]'
string: 'videos'
string: 'videos_gallery'
string: 'new'
string: 'newEntry'
string: ''
string: 'modules/videos/views/menu.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/videos/views/listfiles.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	list all original image files known to image module and present on this peer
comment: //--------------------------------------------------------------------------------------------------
comment: //opt: status - status of files (all|present|missing), default all [string]
comment: //opt: format - format of list to return (xml|csv|html), default xml [string]
comment: //---------------------------------------------------------------------------------------------
comment: //	check arguments
comment: //---------------------------------------------------------------------------------------------
comment: //if ('admin' != $user-&gt;role) { return ''; } // TODO: sync auth
comment: //---------------------------------------------------------------------------------------------
comment: //	consider files of all image records
comment: //---------------------------------------------------------------------------------------------
comment: //TODO: consider dbLoadRange (possible memory issue)
comment: //-------------------------------------------------------------------------------------
comment: // all files, regardless of whether they're present on this peer 			
comment: //-------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------
comment: // only files present on this peer
comment: //---------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------
comment: // only files not present on this peer
comment: //---------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	format list of files
comment: //---------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------
comment: //	return file list in XML format
comment: //---------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------
comment: //	return file list in CSV format
comment: //---------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------
comment: //	make HTML table
comment: //---------------------------------------------------------------------------------
comment: // TODO
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/videos/models/video.mod.php'
string: 'all'
string: 'xml'
string: ''
string: 'status'
string: 'status'
string: 'format'
string: 'format'
string: "select UID, fileName from Videos_Video"
string: 'UID'
string: 'fileName'
string: 'all'
string: 'fileName'
string: 'present'
string: 'missing'
string: 'xml'
string: "&lt;file&gt;\n"
string: "  &lt;refModule&gt;videos&lt;/refModule&gt;\n"
string: "  &lt;refModel&gt;Videos_Video&lt;/refModel&gt;\n"
string: "  &lt;refUID&gt;"
string: "&lt;/refUID&gt;\n"
string: "  &lt;location&gt;"
string: "&lt;/location&gt;\n"
string: "&lt;/file&gt;\n"
string: 'csv'
string: "videos, Videos_Video, "
string: ", "
string: "\n"
string: 'html'

<b>scanning file: /var/www/an2google/trunk/modules/videos/views/gallerythumb.fn.php</b>

<b>scanning file: /var/www/an2google/trunk/modules/videos/views/flashcontainer.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	make swf object
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - alias or UID of a Videos_Video object, format must be swf [string]
comment: //opt: videoUID - overrides raUID if present [string]
comment: //opt: width - width of flash player (int) [string]
comment: //opt: height - height of flash player (int) [string]
comment: //%	return value [string]
comment: //%	flash object width [int]	
comment: //%	flash object height [int]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: check permissions here
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
string: 'modules/videos/models/video.mod.php'
string: ''
string: 'width'
string: 'width'
string: 'height'
string: 'height'
string: 'videoUID'
string: 'raUID'
string: 'videoUID'
string: 'raUID'
string: ''
string: 'raUID'
string: ''
string: 'modules/videos/views/flashcontainer.block.php'
string: 'swfWidth'
string: 'swfHeight'
string: 'swfFile'
string: '%%serverPath%%'

<b>scanning file: /var/www/an2google/trunk/modules/videos/views/editvideoform.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	form for editing videos
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - alias or UID of a Videos_Video object [string]
comment: //opt: return - return to upload dialog (set to 'uploadmultiple') [string]
comment: //%	return value [html]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: check permissions here
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/videos/models/video.mod.php'
string: ''
string: 'raUID'
string: ''
string: 'return'
string: 'return'
string: 'raUID'
string: '(video not found)'
string: 'return'
string: 'returnLink'
string: ''
string: 'uploadmultiple'
string: 'returnUrl'
string: '/videos/uploadmultiple'
string: '/refModule_'
string: '/refModel_'
string: '/refUID_'
string: '/'
string: 'returnLink'
string: "&lt;a href='"
string: 'returnUrl'
string: "'&gt;[&amp;lt;&amp;lt; return to upload form ]&lt;/a&gt;"
string: 'modules/videos/views/editvideoform.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/videos/views/editgalleryform.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	show the edit form
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - alias or UID of a gallery [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/videos/models/gallery.mod.php'
string: ''
string: 'raUID'
string: ''
string: 'raUID'
string: ''
string: 'videos'
string: 'videos_gallery'
string: 'edit'
string: ''
string: 'galleryTitle'
string: 'title'
string: 'descriptionJs64'
string: 'descriptionJs64'
string: 'description'
string: 'modules/videos/views/editgalleryform.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/videos/models/video.mod.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	Represents a single uploaded flash or MP4 video.
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //member variables
comment: //----------------------------------------------------------------------------------------------
comment: //_	currently loaded database record [array]
comment: //_	database table definition [array]
comment: //_	set to true when an object has been loaded [bool]
comment: //_ UID [string]
comment: //_ module [string]
comment: //_ model [string]
comment: //_ ref:*_* [string]
comment: //_ title [string]
comment: //_ varchar(50) [string]
comment: //_ varchar(255) [string]
comment: //_ varchar(255) [string]
comment: //_ varchar(255) [string]
comment: //_ varchar(50) [string]
comment: //_ varchar(30) [string]
comment: //_ plaintext [string]
comment: //_ text [string]
comment: //_ varchar(100) [string]
comment: //_ bigint [string]
comment: //_ bigint [string]
comment: //_ datetime [string]
comment: //_ ref:Users_User [string]
comment: //_ datetime [string]
comment: //_ ref:Users_User [string]
comment: //_ alias [string]
comment: //----------------------------------------------------------------------------------------------
comment: //. constructor
comment: //----------------------------------------------------------------------------------------------
comment: //opt: raUID - UID or alias of a Video object [string]
comment: // initialise table schema
comment: // try load an object from the database
comment: // check if we did
comment: // make new object
comment: // initialize
comment: // set default title
comment: //----------------------------------------------------------------------------------------------
comment: //. load an object from the database given its UID or an alias
comment: //----------------------------------------------------------------------------------------------
comment: //arg: raUID - UID or alias of a Video object [string]
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //. load Video object serialized as an associative array
comment: //----------------------------------------------------------------------------------------------
comment: //arg: ary - associative array of members and values [array]
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //. save the current object to database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string on success, html report of errors on failure [string]
comment: //: $db-&gt;save(...) will raise an object_updated event if successful
comment: // update video weights
comment: //----------------------------------------------------------------------------------------------
comment: //. check that object is correct before allowing it to be stored in database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string if object passes, warning message if not [string]
comment: //----------------------------------------------------------------------------------------------
comment: //. database table definition and content versioning
comment: //----------------------------------------------------------------------------------------------
comment: //returns: information for constructing SQL queries [array]
comment: //table columns
comment: //these fields will be indexed
comment: //revision history will be kept for these fields
comment: //----------------------------------------------------------------------------------------------
comment: //. serialize this object to an array
comment: //----------------------------------------------------------------------------------------------
comment: //returns: associative array of all members which define this instance [array]
comment: //----------------------------------------------------------------------------------------------
comment: //. serialize this object to xml
comment: //----------------------------------------------------------------------------------------------
comment: //arg: xmlDec - include xml declaration? [bool]
comment: //arg: indent - string with which to indent lines [string]
comment: //returns: xml serialization of this object [string]
comment: //NOTE: any members which are not XML clean should be marked up before sending
comment: //----------------------------------------------------------------------------------------------
comment: //. make an extended array of data views may need
comment: //----------------------------------------------------------------------------------------------
comment: //returns: associative array of members, metadata and partial views [array]
comment: //% extended array of properties [array:string]
comment: //------------------------------------------------------------------------------------------
comment: //	links
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	javascript
comment: //------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //. delete current object from the database
comment: //----------------------------------------------------------------------------------------------
comment: //: $db-&gt;delete(...) will raise an object_deleted event on success
comment: //returns: true on success, false on failure [bool]
comment: // nothing to do
string: 'modules/videos/inc/videoset.class.php'
string: ''
string: ''
string: 'New Video '
string: 'UID'
string: 'refModule'
string: 'refModel'
string: 'refUID'
string: 'title'
string: 'licence'
string: 'attribName'
string: 'attribUrl'
string: 'fileName'
string: 'hash'
string: 'format'
string: 'transforms'
string: 'caption'
string: 'category'
string: 'weight'
string: 'length'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: 'alias'
string: ''
string: 'videos'
string: 'videos_video'
string: "Database error.&lt;br/&gt;\n"
string: ''
string: ''
string: ''
string: "No UID.&lt;br/&gt;\n"
string: 'module'
string: 'videos'
string: 'model'
string: 'videos_video'
string: 'archive'
string: 'yes'
string: 'fields'
string: 'UID'
string: 'VARCHAR(33)'
string: 'refModule'
string: 'TEXT'
string: 'refModel'
string: 'TEXT'
string: 'refUID'
string: 'VARCHAR(33)'
string: 'title'
string: 'VARCHAR(255)'
string: 'licence'
string: 'VARCHAR(50)'
string: 'attribName'
string: 'VARCHAR(255)'
string: 'attribUrl'
string: 'VARCHAR(255)'
string: 'fileName'
string: 'VARCHAR(255)'
string: 'hash'
string: 'VARCHAR(50)'
string: 'format'
string: 'VARCHAR(30)'
string: 'transforms'
string: 'MEDIUMTEXT'
string: 'caption'
string: 'TEXT'
string: 'category'
string: 'VARCHAR(100)'
string: 'weight'
string: 'TEXT'
string: 'length'
string: 'TEXT'
string: 'createdOn'
string: 'DATETIME'
string: 'createdBy'
string: 'VARCHAR(33)'
string: 'editedOn'
string: 'DATETIME'
string: 'editedBy'
string: 'VARCHAR(33)'
string: 'alias'
string: 'TEXT'
string: 'indices'
string: 'UID'
string: '10'
string: 'refModule'
string: '10'
string: 'refModel'
string: '10'
string: 'refUID'
string: '10'
string: 'createdOn'
string: ''
string: 'createdBy'
string: '10'
string: 'editedOn'
string: ''
string: 'editedBy'
string: '10'
string: 'alias'
string: '10'
string: 'nodiff'
string: 'title'
string: 'licence'
string: 'attribName'
string: 'attribUrl'
string: 'fileName'
string: 'hash'
string: 'format'
string: 'transforms'
string: 'caption'
string: 'category'
string: 'weight'
string: 'length'
string: 'UID'
string: 'refModule'
string: 'refModel'
string: 'refUID'
string: 'title'
string: 'licence'
string: 'attribName'
string: 'attribUrl'
string: 'fileName'
string: 'hash'
string: 'format'
string: 'transforms'
string: 'caption'
string: 'category'
string: 'weight'
string: 'length'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: 'alias'
string: ''
string: "&lt;kobject type='videos_video'&gt;\n"
string: "    &lt;UID&gt;"
string: "&lt;/UID&gt;\n"
string: "    &lt;refModule&gt;"
string: "&lt;/refModule&gt;\n"
string: "    &lt;refModel&gt;"
string: "&lt;/refModel&gt;\n"
string: "    &lt;refUID&gt;"
string: "&lt;/refUID&gt;\n"
string: "    &lt;title&gt;"
string: "&lt;/title&gt;\n"
string: "    &lt;licence&gt;"
string: "&lt;/licence&gt;\n"
string: "    &lt;attribName&gt;"
string: "&lt;/attribName&gt;\n"
string: "    &lt;attribUrl&gt;"
string: "&lt;/attribUrl&gt;\n"
string: "    &lt;fileName&gt;"
string: "&lt;/fileName&gt;\n"
string: "    &lt;hash&gt;"
string: "&lt;/hash&gt;\n"
string: "    &lt;format&gt;"
string: "&lt;/format&gt;\n"
string: "    &lt;transforms&gt;"
string: "&lt;/transforms&gt;\n"
string: "    &lt;caption&gt;"
string: "&lt;/caption&gt;\n"
string: "    &lt;category&gt;"
string: "&lt;/category&gt;\n"
string: "    &lt;weight&gt;"
string: "&lt;/weight&gt;\n"
string: "    &lt;length&gt;"
string: "&lt;/length&gt;\n"
string: "    &lt;createdOn&gt;"
string: "&lt;/createdOn&gt;\n"
string: "    &lt;createdBy&gt;"
string: "&lt;/createdBy&gt;\n"
string: "    &lt;editedOn&gt;"
string: "&lt;/editedOn&gt;\n"
string: "    &lt;editedBy&gt;"
string: "&lt;/editedBy&gt;\n"
string: "    &lt;alias&gt;"
string: "&lt;/alias&gt;\n"
string: "&lt;/kobject&gt;\n"
string: "&lt;?xml version='1.0' encoding='UTF-8' ?&gt;\n"
string: 'viewUrl'
string: ''
string: 'viewLink'
string: ''
string: 'editUrl'
string: ''
string: 'editLink'
string: ''
string: 'delUrl'
string: ''
string: 'delLink'
string: ''
string: 'newUrl'
string: ''
string: 'newLink'
string: ''
string: 'videos'
string: 'videos_video'
string: 'show'
string: 'viewUrl'
string: '%%serverPath%%Videos/showvideo/'
string: 'alias'
string: 'viewLink'
string: "&lt;a href='"
string: 'viewUrl'
string: "'&gt;[ more &amp;gt;gt; ]&lt;/a&gt;"
string: 'videos'
string: 'videos_video'
string: 'edit'
string: 'edit'
string: 'editUrl'
string: '%%serverPath%%Videos/editvideo/'
string: 'alias'
string: 'editLink'
string: "&lt;a href='"
string: 'editUrl'
string: "'&gt;[ edit ]&lt;/a&gt;"
string: 'videos'
string: 'videos_video'
string: 'edit'
string: 'delete'
string: 'delUrl'
string: '%%serverPath%%Videos/delvideo/'
string: 'alias'
string: 'delLink'
string: "&lt;a href='"
string: 'delUrl'
string: "'&gt;[ delete ]&lt;/a&gt;"
string: 'UIDJsClean'
string: 'UID'
string: 'summary'
string: 'caption'

<b>scanning file: /var/www/an2google/trunk/modules/videos/models/gallery.mod.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	Container object which owns videos.
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //member variables
comment: //----------------------------------------------------------------------------------------------
comment: //_	currently loaded database record [array]
comment: //_	database table definition [array]
comment: //_	set to true when an object has been loaded [bool]
comment: //_ UID [string]
comment: //_ title [string]
comment: //_ wyswyg [string]
comment: //_ bigint [string]
comment: //_ datetime [string]
comment: //_ ref:Users_User [string]
comment: //_ datetime [string]
comment: //_ ref:Users_User [string]
comment: //_ alias [string]
comment: //----------------------------------------------------------------------------------------------
comment: //. constructor
comment: //----------------------------------------------------------------------------------------------
comment: //opt: raUID - UID or alias of a Gallery object [string]
comment: // initialise table schema
comment: // try load an object from the database
comment: // check if we did
comment: // make new object
comment: // initialize
comment: // set default title
comment: //----------------------------------------------------------------------------------------------
comment: //. load an object from the database given its UID or an alias
comment: //----------------------------------------------------------------------------------------------
comment: //arg: raUID - UID or alias of a Gallery object [string]
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //. load Gallery object serialized as an associative array
comment: //----------------------------------------------------------------------------------------------
comment: //arg: ary - associative array of members and values [array]
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //. save the current object to database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string on success, html report of errors on failure [string]
comment: //: $db-&gt;save(...) will raise an object_updated event if successful
comment: //----------------------------------------------------------------------------------------------
comment: //. check that object is correct before allowing it to be stored in database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string if object passes, warning message if not [string]
comment: //----------------------------------------------------------------------------------------------
comment: //. database table definition and content versioning
comment: //----------------------------------------------------------------------------------------------
comment: //returns: information for constructing SQL queries [array]
comment: //table columns
comment: //these fields will be indexed
comment: //revision history will be kept for these fields
comment: //----------------------------------------------------------------------------------------------
comment: //. serialize this object to an array
comment: //----------------------------------------------------------------------------------------------
comment: //returns: associative array of all members which define this instance [array]
comment: //----------------------------------------------------------------------------------------------
comment: //. serialize this object to xml
comment: //----------------------------------------------------------------------------------------------
comment: //arg: xmlDec - include xml declaration? [bool]
comment: //arg: indent - string with which to indent lines [bool]
comment: //returns: xml serialization of this object [string]
comment: //NOTE: any members which are not XML clean should be marked up before sending
comment: //----------------------------------------------------------------------------------------------
comment: //. make an extended array of data views may need
comment: //----------------------------------------------------------------------------------------------
comment: //returns: associative array of members, metadata and partial views [array]
comment: //% extended array of properties [array:string]
comment: //------------------------------------------------------------------------------------------
comment: //	links
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	javascript
comment: //------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //. delete current object from the database
comment: //----------------------------------------------------------------------------------------------
comment: //: $db-&gt;delete(...) will raise an object_deleted event on success [bool]
comment: //returns: true on success, false on failure [bool]
comment: // nothing to do
comment: //----------------------------------------------------------------------------------------------
comment: //. count videos in this gallery
comment: //----------------------------------------------------------------------------------------------
comment: //returns: number of videos in the gallery [int]
string: ''
string: ''
string: 'New Gallery '
string: 'UID'
string: 'title'
string: 'description'
string: 'videocount'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: 'alias'
string: ''
string: 'videos'
string: 'videos_gallery'
string: "Database error.&lt;br/&gt;\n"
string: ''
string: ''
string: ''
string: "No UID.&lt;br/&gt;\n"
string: 'module'
string: 'videos'
string: 'model'
string: 'videos_gallery'
string: 'archive'
string: 'yes'
string: 'fields'
string: 'UID'
string: 'VARCHAR(33)'
string: 'title'
string: 'VARCHAR(255)'
string: 'description'
string: 'MEDIUMTEXT'
string: 'videocount'
string: 'TEXT'
string: 'createdOn'
string: 'DATETIME'
string: 'createdBy'
string: 'VARCHAR(33)'
string: 'editedOn'
string: 'DATETIME'
string: 'editedBy'
string: 'VARCHAR(33)'
string: 'alias'
string: 'TEXT'
string: 'indices'
string: 'UID'
string: '10'
string: 'createdOn'
string: ''
string: 'createdBy'
string: '10'
string: 'editedOn'
string: ''
string: 'editedBy'
string: '10'
string: 'alias'
string: '10'
string: 'nodiff'
string: 'title'
string: 'description'
string: 'videocount'
string: 'UID'
string: 'title'
string: 'description'
string: 'videocount'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: 'alias'
string: ''
string: "&lt;kobject type='videos_gallery'&gt;\n"
string: "    &lt;UID&gt;"
string: "&lt;/UID&gt;\n"
string: "    &lt;title&gt;"
string: "&lt;/title&gt;\n"
string: "    &lt;description&gt;&lt;![CDATA["
string: "]]&gt;&lt;/description&gt;\n"
string: "    &lt;videocount&gt;"
string: "&lt;/videocount&gt;\n"
string: "    &lt;createdOn&gt;"
string: "&lt;/createdOn&gt;\n"
string: "    &lt;createdBy&gt;"
string: "&lt;/createdBy&gt;\n"
string: "    &lt;editedOn&gt;"
string: "&lt;/editedOn&gt;\n"
string: "    &lt;editedBy&gt;"
string: "&lt;/editedBy&gt;\n"
string: "    &lt;alias&gt;"
string: "&lt;/alias&gt;\n"
string: "&lt;/kobject&gt;\n"
string: "&lt;?xml version='1.0' encoding='UTF-8' ?&gt;\n"
string: 'viewUrl'
string: ''
string: 'viewLink'
string: ''
string: 'editUrl'
string: ''
string: 'editLink'
string: ''
string: 'delUrl'
string: ''
string: 'delLink'
string: ''
string: 'newUrl'
string: ''
string: 'newLink'
string: ''
string: 'videos'
string: 'videos_gallery'
string: 'show'
string: 'viewUrl'
string: '%%serverPath%%Videos/showgallery/'
string: 'alias'
string: 'viewLink'
string: "&lt;a href='"
string: 'viewUrl'
string: "'&gt;[ more &amp;gt;&amp;gt; ]&lt;/a&gt;"
string: 'videos'
string: 'videos_gallery'
string: 'edit'
string: 'edit'
string: 'editUrl'
string: '%%serverPath%%Videos/editgallery/'
string: 'alias'
string: 'editLink'
string: "&lt;a href='"
string: 'editUrl'
string: "'&gt;[ edit ]&lt;/a&gt;"
string: 'videos'
string: 'videos_gallery'
string: 'edit'
string: 'delete'
string: 'delUrl'
string: '%%serverPath%%Videos/delgallery/'
string: 'alias'
string: 'delLink'
string: "&lt;a href='"
string: 'delUrl'
string: "'&gt;[ delete ]&lt;/a&gt;"
string: 'UIDJsClean'
string: 'UID'
string: 'descriptionJsVar64'
string: 'description'
string: 'UID'
string: 'Js64'
string: 'descriptionJs64'
string: 'descriptionJsVar64'
string: 'description'
string: 'descriptionSummary'
string: 'description'
string: 'videocount'
string: 'videocount'
string: ''
string: "refUID='"
string: "'"
string: "refModel='"
string: 'videos_gallery'
string: "'"
string: 'videos_video'

<b>scanning file: /var/www/an2google/trunk/modules/videos/inc/videoset.class.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	object to represent the set of all videos owned by some object
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	memebr variables
comment: //----------------------------------------------------------------------------------------------
comment: //_	range of serialized Videos_Video objects [array]
comment: //_ is set to true when a range has been loaded [bool]
comment: //_ kapenta module [string]
comment: //_	type of object [string]
comment: //_	UID of object which owns videos [string]
comment: //----------------------------------------------------------------------------------------------
comment: //.	constructor (loads all videos belonging to some object)
comment: //----------------------------------------------------------------------------------------------
comment: //arg: refModule - a kapenta module [string]
comment: //arg: refModel - type of object which may own videos [string]
comment: //arg: refUID - UID of object which may own videos [string]
comment: //----------------------------------------------------------------------------------------------
comment: //.	load the set of videos
comment: //----------------------------------------------------------------------------------------------
comment: //returns: true of success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //.	ensure that weights are contiguous
comment: //----------------------------------------------------------------------------------------------
comment: //returns: true on succes, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //.	get the index of a video in $this-&gt;videos give its UID
comment: //----------------------------------------------------------------------------------------------
comment: //returns: index on success, -1 on failure [int]
comment: //----------------------------------------------------------------------------------------------
comment: //.	bump a video up in the list of weights
comment: //----------------------------------------------------------------------------------------------
comment: //arg: UID - UID of an Videos_Video object [string]
comment: //------------------------------------------------------------------------------------------
comment: //	increase weight by 1
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	decrease weight of next video by 1 (if any)
comment: //------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //.	bump a video down in the list of weights
comment: //----------------------------------------------------------------------------------------------
comment: //arg: UID - UID of an Videos_Video object [string]
comment: //------------------------------------------------------------------------------------------
comment: //	decrease weight by 1
comment: //------------------------------------------------------------------------------------------
comment: // nothing to do
comment: //------------------------------------------------------------------------------------------
comment: //	increase weight of previous video by 1 (if any)
comment: //------------------------------------------------------------------------------------------
string: 'modules/videos/models/video.mod.php'
string: "refModule='"
string: "'"
string: "refModel='"
string: "'"
string: "refUID='"
string: "'"
string: 'Videos_Video'
string: '*'
string: 'weight'
string: 'weight'
string: 'UID'
string: 'UID'
string: 'UID'
string: 'UID'

<b>scanning file: /var/www/an2google/trunk/modules/videos/inc/maintenance.inc.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	maintenance script for Videos module
comment: //--------------------------------------------------------------------------------------------------
comment: //+	reports are human-readable HTML, with script-readable HTML comments
comment: //--------------------------------------------------------------------------------------------------
comment: //|	install the Videos module
comment: //--------------------------------------------------------------------------------------------------
comment: //returns: html report or false if not authorized [string][bool]
comment: //----------------------------------------------------------------------------------------------
comment: //	check all Gallery objects
comment: //----------------------------------------------------------------------------------------------
comment: // remove database markup
comment: // load into model
comment: //------------------------------------------------------------------------------------------
comment: //	checking alias
comment: //------------------------------------------------------------------------------------------
comment: // should reset alias
comment: //------------------------------------------------------------------------------------------
comment: //	check references to other objects
comment: //------------------------------------------------------------------------------------------
comment: // TODO: take action here, if possibe assign valid reference to a Users_User
comment: // TODO: take action here, if possibe assign valid reference to a Users_User
comment: // end while Videos_Gallery
comment: //----------------------------------------------------------------------------------------------
comment: //	add Gallery objects to report
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check all Video objects
comment: //----------------------------------------------------------------------------------------------
comment: // remove database markup
comment: // load into model
comment: //------------------------------------------------------------------------------------------
comment: //	checking alias
comment: //------------------------------------------------------------------------------------------
comment: // should reset alias
comment: //------------------------------------------------------------------------------------------
comment: //	check references to other objects
comment: //------------------------------------------------------------------------------------------
comment: // TODO: take action here, if possibe assign valid reference to a *_*
comment: // TODO: take action here, if possibe assign valid reference to a Users_User
comment: // TODO: take action here, if possibe assign valid reference to a Users_User
comment: // end while Videos_Video
comment: //----------------------------------------------------------------------------------------------
comment: //	add Video objects to report
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	done
comment: //----------------------------------------------------------------------------------------------
string: 'modules/videos/models/gallery.mod.php'
string: 'modules/videos/models/video.mod.php'
string: 'admin'
string: ''
string: 'UID'
string: 'title'
string: 'error'
string: "select * from Videos_Gallery"
string: 'videos_gallery'
string: 'UID'
string: 'non defualt alias'
string: 'users_user'
string: 'invalid reference (createdBy:Users_User)'
string: 'users_user'
string: 'invalid reference (editedBy:Users_User)'
string: 'UID'
string: 'title'
string: 'error'
string: "select * from Videos_Video"
string: 'videos_video'
string: 'UID'
string: 'non defualt alias'
string: '*_*'
string: 'invalid reference (refUID:*_*)'
string: 'users_user'
string: 'invalid reference (createdBy:Users_User)'
string: 'users_user'
string: 'invalid reference (editedBy:Users_User)'

<b>scanning file: /var/www/an2google/trunk/modules/videos/inc/install.inc.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	install script for Videos module
comment: //--------------------------------------------------------------------------------------------------
comment: //+	reports are human-readable HTML, with script-readable HTML comments
comment: //--------------------------------------------------------------------------------------------------
comment: //|	install the Videos module
comment: //--------------------------------------------------------------------------------------------------
comment: //returns: html report or false if not authorized [string][bool]
comment: //----------------------------------------------------------------------------------------------
comment: //	create or upgrade Videos_Gallery table
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	create or upgrade Videos_Video table
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	done
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
comment: //|	discover if this module is installed
comment: //--------------------------------------------------------------------------------------------------
comment: //:	if installed correctly report will contain HTML comment &lt;!-- installed correctly --&gt;
comment: //returns: HTML installation status report [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	ensure the table which stores Gallery objects exists and is correct
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	ensure the table which stores Video objects exists and is correct
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	done
comment: //----------------------------------------------------------------------------------------------
string: 'core/dbdriver/mysqladmin.dbd.php'
string: 'modules/videos/models/gallery.mod.php'
string: 'modules/videos/models/video.mod.php'
string: 'admin'
string: ''
string: 'admin'
string: ''
string: '&lt;!-- table installed correctly --&gt;'
string: '&lt;!-- module installed correctly --&gt;'

<b>scanning file: /var/www/an2google/trunk/modules/videos/actions/uploadmultiple.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	iframe to upload multiple videos
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: check this permission name
comment: /*
			//--------------------------------------------------------------------------------------
			//	not authorised to edit videos, just display
			//--------------------------------------------------------------------------------------
			$page-&gt;load('modules/videos/actions/videoset.if.page.php');
			$page-&gt;blockArgs['refModule'] = $refModule;
			$page-&gt;blockArgs['refUID'] = $refUID;
			$page-&gt;render();
	*/
comment: //----------------------------------------------------------------------------------------------
comment: //	render the page
comment: //----------------------------------------------------------------------------------------------
string: 'refModule'
string: 'Module not specified.'
string: 'refModel'
string: 'Model not specified.'
string: 'refUID'
string: 'UID not specified.'
string: 'refModule'
string: 'refModel'
string: 'refUID'
string: 'No such module.'
string: 'Object type not recognized.'
string: 'Owner object does not exist.'
string: 'videos-add'
string: 'You are not authorized to add videos to this object.'
string: 'no'
string: 'tags'
string: 'yes'
string: 'tags'
string: 'yes'
string: 'modules/videos/actions/uploadmultiple.if.page.php'
string: 'refModule'
string: 'refModel'
string: 'refUID'
string: 'tags'

<b>scanning file: /var/www/an2google/trunk/modules/videos/actions/upload.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	accepts upload of videos and associates them with other objects
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	working variables
comment: //----------------------------------------------------------------------------------------------
comment: //%	name of a kapenta module [string]
comment: //%	type of object which owns this video [string]
comment: //%	unique ID of object which owns this video [string]
comment: //%	not used as yet, for grouping into playlists, etc [string]
comment: //% assume 'uploadmultiple' for now [string]
comment: //%	relative to $kapenta-&gt;serverPath [string]
comment: //%	unique ID of new Videos_Video object [string]
comment: //%	location of uploaded file, absolute? [string]
comment: //%	name of file as it was uploaded [string]
comment: //%	best guess of container format [string]
comment: //%	set to true if noting uploaded [bool]
comment: //%	same as for images, not yet implemented (yes|no) [string]
comment: //%	location of stored file relative to serverPath [string]
comment: // check form vars
comment: //----------------------------------------------------------------------------------------------
comment: //	security and validation
comment: //----------------------------------------------------------------------------------------------
comment: //..............................................................................
comment: //..............................................................................
comment: //TODO
comment: //..............................................................................
comment: // check module
comment: // check owner object
comment: // check permissions
comment: //----------------------------------------------------------------------------------------------
comment: //	get the upload
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------
comment: //	try guess file type
comment: //--------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------
comment: //	copy to location
comment: //--------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------
comment: //	TODO: validate this video somehow (mplayer?) and try find its length
comment: //--------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	get video name
comment: //----------------------------------------------------------------------------------------------
comment: //$vidName = str_replace('.png', '', $vidName);
comment: //$vidName = str_replace('.gif', '', $vidName);
comment: //----------------------------------------------------------------------------------------------
comment: //	handle upload of single videos (delete any others before saving)
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	create video object and save to database
comment: //----------------------------------------------------------------------------------------------
comment: //NOTE: weight is set by $model-&gt;save()  // TODO: this
comment: //------------------------------------------------------------------------------------------
comment: //	send 'videos_added' event to module to which owner belongs
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	return xml or redirect back 
comment: //------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------
comment: //	video saved
comment: //--------------------------------------------------------------------------------------
string: 'modules/videos/models/video.mod.php'
string: ''
string: ''
string: ''
string: ''
string: ''
string: ''
string: ''
string: ''
string: ''
string: 'no'
string: 'data/videos/'
string: '/'
string: '/'
string: '/'
string: 'refModule'
string: 'refModule'
string: 'refModel'
string: 'refModel'
string: 'refUID'
string: 'refUID'
string: 'category'
string: 'category'
string: 'return'
string: 'return'
string: 'tags'
string: 'yes'
string: 'tags'
string: 'yes'
string: ''
string: ''
string: ''
string: ''
string: '(refUID not given or upload too large)'
string: ''
string: '(refModule not given)'
string: ''
string: '(refModel not given)'
string: 'uploadmultiple'
string: 'videos/uploadmultiple/'
string: 'refModule_'
string: '/'
string: 'refModel_'
string: '/'
string: 'refUID_'
string: '/'
string: 'tags_'
string: '/'
string: 'uploadsingle'
string: 'videos/uploadsingle/'
string: 'refModule_'
string: '/'
string: 'refModel_'
string: '/'
string: 'refUID_'
string: '/'
string: 'tags_'
string: '/'
string: 'xml'
string: 'unknown return argument'
string: 'xml'
string: 'No such module.'
string: 'No such module.'
string: 'bad'
string: 'xml'
string: 'No such owner obejct.'
string: 'No such owner obejct.'
string: 'bad'
string: 'videos-add'
string: 'xml'
string: 'Not authorized.'
string: 'You are not authorised to add videos to this item.'
string: 'bad'
string: 'userfile'
string: 'userfile'
string: 'tmp_name'
string: 'userfile'
string: 'name'
string: 'vlf.'
string: 'flv'
string: '4pm.'
string: 'mp4'
string: 'fws.'
string: 'swf'
string: ''
string: 'xml'
string: 'No file uploaded.'
string: 'Video container not supported (must be flv or mp4).'
string: 'bad'
string: "."
string: 'Could not move image (disk full?).'
string: 'bad'
string: 'xml'
string: 'No file uploaded.'
string: 'No file uploaded.'
string: 'bad'
string: 'No file uploaded.'
string: 'bad'
string: '.flv'
string: ''
string: '.mp4'
string: ''
string: ''
string: '.jpg'
string: 'action'
string: 'uploadSingleVideo'
string: 'action'
string: "refUID='"
string: "'"
string: "refModel='"
string: "'"
string: "refModule='"
string: "'"
string: 'videos_video'
string: '*'
string: 'UID'
string: 'unknown'
string: ''
string: ''
string: ''
string: 'refModule'
string: 'refUID'
string: 'videoUID'
string: 'videoTitle'
string: '*'
string: 'videos_added'
string: 'xml'
string: ''
string: "Uploaded video: $srcName"
string: 'ok'
string: "Could not save video object."
string: 'bad'

<b>scanning file: /var/www/an2google/trunk/modules/videos/actions/testswf.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	test loading SWF object
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	admins only
comment: //----------------------------------------------------------------------------------------------
comment: //$testVideo = 'http://awarenet.co.za/data/videos/4/5/6/456959901178324631.swf';
comment: //----------------------------------------------------------------------------------------------
comment: //	render the page
comment: //----------------------------------------------------------------------------------------------
string: 'admin'
string: 'modules/videos/temp/aids_02 08873064-E72A-4B20-ABBC-D2534F155585.swf'
string: 'modules/videos/temp/456959901178324631.swf'
string: "
		&lt;table noborder&gt;
		  &lt;tr&gt;
			&lt;td&gt;
				&lt;img src='%%serverPath%%themes/clockface/icons/arrow_left.jpg' /&gt;
			&lt;/td&gt;
			&lt;td&gt;
			&lt;b&gt;Return to video gallery.&lt;/b&gt;
			&lt;/td&gt;
		  &lt;/tr&gt;
		&lt;/table&gt;
	"
string: 'modules/videos/actions/testswf.page.php'
string: 'swfFile'
string: 'swfWidth'
string: 'swfHeight'
string: 'navReturn'

<b>scanning file: /var/www/an2google/trunk/modules/videos/actions/testflv.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	test loading SWF object
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	admins only
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	render the page
comment: //----------------------------------------------------------------------------------------------
string: 'admin'
string: 'modules/videos/temp/RSA-Animate-The-Empathic-Civilisation.flv'
string: 'modules/videos/actions/testflv.page.php'
string: 'swfFile'
string: 'swfWidth'
string: 'swfHeight'

<b>scanning file: /var/www/an2google/trunk/modules/videos/actions/showgallery.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	display a video gallery page
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check reference and permissions
comment: //----------------------------------------------------------------------------------------------
comment: // check ref
comment: // check correct ref
comment: //----------------------------------------------------------------------------------------------
comment: //	make the page
comment: //----------------------------------------------------------------------------------------------
string: 'modules/videos/models/gallery.mod.php'
string: ''
string: 'videos_gallery'
string: 'Video gallery not found.'
string: 'videos'
string: 'videos_gallery'
string: 'show'
string: 'users_user'
string: 'modules/videos/actions/showgallery.page.php'
string: 'UID'
string: 'raUID'
string: 'userUID'
string: 'userRa'
string: 'galleryRa'
string: 'galleryTitle'

<b>scanning file: /var/www/an2google/trunk/modules/videos/actions/savevideo.act.php</b>
comment: //require_once($kapenta-&gt;installPath . 'modules/videos/inc/videos__weight.inc.php');
comment: //--------------------------------------------------------------------------------------------------
comment: //*	save changes to a video
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	control variables
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check permissions and POST variables
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the changes
comment: //----------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	redirect back
comment: //------------------------------------------------------------------------------------------
string: 'modules/videos/models/video.mod.php'
string: 'uploadmultiple'
string: ''
string: 'action'
string: 'action not specified'
string: 'saveVideo'
string: 'action'
string: 'action not supported'
string: 'UID'
string: 'reference object not specified'
string: 'UID'
string: 'No such video'
string: 'videos-edit'
string: 'You are not authorized to edit this video.'
string: 'title'
string: 'licence'
string: 'attribname'
string: 'attriburl'
string: 'caption'
string: 'category'
string: ''
string: 'bad'
string: 'uploadmultiple'
string: 'videos/uploadmultiple'
string: '/refModule_'
string: '/refModel_'
string: '/refUID_'
string: '/'
string: 'uploadsingle'
string: 'videos/uploadsingle'
string: '/refModule_'
string: '/refModel_'
string: '/refUID_'
string: '/'
string: 'videos/edit/'

<b>scanning file: /var/www/an2google/trunk/modules/videos/actions/savegallery.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	save changes to a user video gallery
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check permissions and POST variables
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	update the object
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: sanitize description
comment: //----------------------------------------------------------------------------------------------
comment: //	check that object was saved and redirect
comment: //----------------------------------------------------------------------------------------------
string: 'modules/videos/models/gallery.mod.php'
string: 'action'
string: 'Action not specified.'
string: 'saveGallery'
string: 'action'
string: 'Action not supported.'
string: 'UID'
string: 'UID not POSTed.'
string: 'UID'
string: "Could not load gallery."
string: 'videos'
string: 'videos_gallery'
string: 'edit'
string: 'You are not authorized to edit this gallery.'
string: 'title'
string: 'description'
string: 'imagecount'
string: ''
string: 'Saved changes to Gallery'
string: 'ok'
string: 'Could not save Gallery:&lt;br/&gt;'
string: 'bad'
string: 'return'
string: 'return'
string: 'videos/showgallery/'

<b>scanning file: /var/www/an2google/trunk/modules/videos/actions/play.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	play an flv or mp4 video using flowplayer 
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: permissions check here
comment: //----------------------------------------------------------------------------------------------
comment: //	render the page
comment: //----------------------------------------------------------------------------------------------
string: 'modules/videos/models/video.mod.php'
string: 'public'
string: ''
string: 'Video not specified.'
string: 'Video not found.'
string: 'swf'
string: 'videos/animate/'
string: 'modules/videos/actions/play.page.php'
string: 'UID'
string: 'title'
string: 'caption'
string: 'raUID'

<b>scanning file: /var/www/an2google/trunk/modules/videos/actions/newgallery.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	add a new gallery
comment: //--------------------------------------------------------------------------------------------------
comment: //TODO: replace with standard generated code
comment: //----------------------------------------------------------------------------------------------
comment: //	create a gallery given a title
comment: //----------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	invalid title
comment: //------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	create gallery
comment: //----------------------------------------------------------------------------------------------
string: 'modules/videos/models/gallery.mod.php'
string: 'videos'
string: 'videos_gallery'
string: 'new'
string: 'action'
string: 'Action not specified.'
string: 'createGallery'
string: 'action'
string: 'Action not supported.'
string: 'title'
string: ''
string: 'title'
string: "Please choose a title for your new gallery."
string: 'videos/listgalleries/'
string: 'title'
string: ''
string: 'Could not create gallery: '
string: 'bad'
string: 'videos/listgalleries/'
string: 'Gallery created: '
string: 'ok'
string: 'videos/editgallery/'

<b>scanning file: /var/www/an2google/trunk/modules/videos/actions/listgalleries.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	list all video galleries created by a user (in root if nesting)
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: // check basic permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	decide which users galleries to show
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	render the page
comment: //----------------------------------------------------------------------------------------------
string: 'videos'
string: 'videos_gallery'
string: 'show'
string: ''
string: 'modules/videos/actions/listgalleries.page.php'
string: 'userUID'
string: 'userRa'
string: 'userName'
string: 'awareNet - videos by '
string: 'userName'

<b>scanning file: /var/www/an2google/trunk/modules/videos/actions/listallgalleries.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	list all video galleries by creation date, title or number of images
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: // check basic permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	get order and page
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	render the page
comment: //----------------------------------------------------------------------------------------------
string: 'videos'
string: 'videos_gallery'
string: 'show'
string: 'createdOn'
string: ''
string: 'page'
string: 'page'
string: 'orderby'
string: 'orderby'
string: 'createdOn'
string: 'by creation date'
string: 'title'
string: 'by title'
string: 'imagecount'
string: 'by image count'
string: 'modules/videos/actions/listallgalleries.page.php'
string: 'pageNo'
string: 'orderBy'
string: 'orderLabel'
string: 'userUID'
string: 'userRa'
string: 'awareNet - all video galleries '
string: ' (page '
string: ')'

<b>scanning file: /var/www/an2google/trunk/modules/videos/actions/incweight.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	increment the weight of a video
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check permissions and request args
comment: //----------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	redirect back
comment: //------------------------------------------------------------------------------------------
string: 'modules/videos/models/video.mod.php'
string: 'modules/videos/inc/videoset.class.php'
string: 'uploadmultiple'
string: ''
string: ''
string: 'Video not specified'
string: 'Video not found'
string: 'editvideo'
string: 'You are not authorized to edit this video.'
string: 'videos/edit/'
string: 'uploadmultiple'
string: 'videos/uploadmultiple'
string: '/refModule_'
string: '/refModel_'
string: '/refUID_'
string: '/'
string: 'uploadsingle'
string: 'videos/uploadsingle'
string: '/refModule_'
string: '/refModel_'
string: '/refUID_'
string: '/'
string: 'videos/edit/'

<b>scanning file: /var/www/an2google/trunk/modules/videos/actions/editvideo.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	edit a video
comment: //--------------------------------------------------------------------------------------------------
comment: //	needs the video's UID/alias and optionally /return_uploadmultiple
comment: //----------------------------------------------------------------------------------------------
comment: //	check page arguments and authorisation
comment: //----------------------------------------------------------------------------------------------
comment: //if ('' == $model-&gt;fileName) { $page-&gt;do404(); }
comment: //TODO: add more auth options here
comment: //----------------------------------------------------------------------------------------------
comment: //	load the page :-)
comment: //----------------------------------------------------------------------------------------------
string: 'modules/videos/models/video.mod.php'
string: ''
string: 'Video not found.'
string: 'videos-edit'
string: 'You are not authorized to edit this video.'
string: ''
string: 'return'
string: 'return'
string: 'modules/videos/actions/editvideo.if.page.php'
string: 'UID'
string: 'raUID'
string: 'return'

<b>scanning file: /var/www/an2google/trunk/modules/videos/actions/editgallery.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	edit a video gallery
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	load the model
comment: //----------------------------------------------------------------------------------------------
comment: // check for ref
comment: // check correct ref
comment: // basic permissions, TODO: extend
comment: //----------------------------------------------------------------------------------------------
comment: //	check permissions (must be admin or own gallery to edit)
comment: //----------------------------------------------------------------------------------------------
comment: // possibly more to come here...
comment: //----------------------------------------------------------------------------------------------
comment: //	render the page
comment: //----------------------------------------------------------------------------------------------
string: 'modules/videos/models/gallery.mod.php'
string: ''
string: 'videos_gallery'
string: 'Gallery not found'
string: 'videos'
string: 'videos_gallery'
string: 'edit'
string: 'admin'
string: 'modules/videos/actions/editgallery.page.php'
string: 'UID'
string: 'raUID'

<b>scanning file: /var/www/an2google/trunk/modules/videos/actions/download.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	page for downloading videos and associating them with other objects
comment: //--------------------------------------------------------------------------------------------------
comment: //TODO: this
comment: //----------------------------------------------------------------------------------------------
comment: //	control variables
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	security and validation
comment: //----------------------------------------------------------------------------------------------
comment: // TODO
comment: //----------------------------------------------------------------------------------------------
comment: //	download the file
comment: //----------------------------------------------------------------------------------------------
comment: // use HTTP proxy
comment: // use file wrapper
comment: //----------------------------------------------------------------------------------------------
comment: //	load as image
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	get image name
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	create image record and save file
comment: //----------------------------------------------------------------------------------------------
comment: //NOTE: weight is set by $model-&gt;save()
comment: //------------------------------------------------------------------------------------------
comment: //	send 'images_added' event to all modules
comment: //------------------------------------------------------------------------------------------
comment: // send to all modules
comment: //$kapenta-&gt;raiseEvent($refModule, 'images_added', $args);	// send to owner module
comment: //----------------------------------------------------------------------------------------------
comment: //	redirect back 
comment: //----------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	image saved
comment: //------------------------------------------------------------------------------------------
string: 'modules/videos/models/video.mod.php'
string: ''
string: ''
string: ''
string: 'uploadmultiple'
string: ''
string: 'no'
string: 'refModule'
string: 'refModule'
string: 'refModel'
string: 'refModel'
string: 'refUID'
string: 'refUID'
string: 'return'
string: 'return'
string: 'URL'
string: 'URL'
string: 'tags'
string: 'yes'
string: 'tags'
string: 'yes'
string: ''
string: ''
string: ''
string: ''
string: ''
string: ''
string: 'xml'
string: 'Missing arguments to image download.'
string: 'Missing arguments to image download.'
string: 'uploadmultiple'
string: 'images/uploadmultiple/'
string: 'refModule_'
string: '/'
string: 'refModel_'
string: '/'
string: 'refUID_'
string: '/'
string: 'tags_'
string: '/'
string: 'uploadsingle'
string: 'images/uploadsingle/'
string: 'refModule_'
string: '/'
string: 'refModel_'
string: '/'
string: 'refUID_'
string: '/'
string: 'tags_'
string: '/'
string: 'xml'
string: 'unknown return argument'
string: 'images-add'
string: 'xml'
string: 'Not authorized.'
string: 'You are not authorised to add images to this item.'
string: 'bad'
string: ''
string: 'yes'
string: ''
string: 'xml'
string: 'Video could not be downloaded.'
string: 'Video could not be downloaded, check the URL?'
string: 'bad'
string: 'xml'
string: 'Could not validate image.'
string: 'Could not validate image.'
string: 'bad'
string: '.jpg'
string: ''
string: '.jpeg'
string: ''
string: '.png'
string: ''
string: '.gif'
string: ''
string: ''
string: '.jpg'
string: 'unknown'
string: ''
string: 'Downloaded image: '
string: 'ok'
string: 'Could not save image: '
string: 'bad'
string: ''
string: 'refModule'
string: 'refUID'
string: 'imageUID'
string: 'UID'
string: 'imageTitle'
string: 'title'
string: '*'
string: 'images_added'
string: 'xml'
string: ''

<b>scanning file: /var/www/an2google/trunk/modules/videos/actions/default.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	default action for user galleries module (ie, no action specified in URL)
comment: //--------------------------------------------------------------------------------------------------
comment: // no alias/UID given in URL, list all galleries
comment: // alias/UID given in URL, show a specific gallery
string: ''
string: 'modules/videos/actions/listgalleries.act.php'
string: 'modules/videos/actions/showgallery.act.php'

<b>scanning file: /var/www/an2google/trunk/modules/videos/actions/decweight.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	decrement the weight of a video
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check permissions and request args
comment: //----------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	redirect back
comment: //------------------------------------------------------------------------------------------
string: 'modules/videos/models/video.mod.php'
string: 'modules/videos/inc/videoset.class.php'
string: 'uploadmultiple'
string: ''
string: 'Video not specified'
string: 'Video not found'
string: 'editvideo'
string: 'You are not authorized to edit this video.'
string: 'return'
string: 'return'
string: 'videos/uploadmultiple'
string: '/refModule_'
string: '/refModel_'
string: '/refUID_'
string: '/'
string: 'uploadmultiple'
string: 'videos/uploadmultiple'
string: '/refModule_'
string: '/refModel_'
string: '/refUID_'
string: '/'
string: 'uploadsingle'
string: 'videos/uploadsingle'
string: '/refModule_'
string: '/refModel_'
string: '/refUID_'
string: '/'
string: 'videos/edit/'

<b>scanning file: /var/www/an2google/trunk/modules/videos/actions/animate.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	play an flv or mp4 video using flowplayer 
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: permissions check here
comment: //----------------------------------------------------------------------------------------------
comment: //	render the page
comment: //----------------------------------------------------------------------------------------------
string: 'modules/videos/models/video.mod.php'
string: 'public'
string: ''
string: 'Animation not specified.'
string: 'Animation not found.'
string: 'swf'
string: 'videos/play/'
string: "
		&lt;table noborder&gt;
		  &lt;tr&gt;
			&lt;td&gt;
				&lt;img src='%%serverPath%%themes/clockface/icons/arrow_left.jpg' /&gt;
			&lt;/td&gt;
			&lt;td&gt;
			&lt;b&gt;Return to video gallery.&lt;/b&gt;
			&lt;/td&gt;
		  &lt;/tr&gt;
		&lt;/table&gt;
	"
string: 'modules/videos/actions/animate.page.php'
string: 'UID'
string: 'title'
string: 'raUID'

<b>scanning file: /var/www/an2google/trunk/modules/users/views/summarynav.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	short summary of user record formatted or the nav bar (300px wide)
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: UID - UID of a Users_User object, also takes aliases now [string]
comment: //opt: userUID - overrides UID [string]
comment: //opt: extra - add something to this summary [string]
comment: //opt: target - a URL or _parent, for iFrames [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/users/models/user.mod.php'
string: ''
string: 'userUID'
string: 'UID'
string: 'userUID'
string: 'UID'
string: '(no uid)'
string: 'UID'
string: '(not found)'
string: 'users'
string: 'users_user'
string: 'show'
string: ''
string: 'extra'
string: ''
string: 'extra'
string: 'extra'
string: 'extra'
string: 'modules/users/views/summarynav.block.php'
string: 'target'
string: "&lt;a href="
string: "&lt;a target='"
string: 'target'
string: "' href="

<b>scanning file: /var/www/an2google/trunk/modules/users/views/summarylist.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	list all users
comment: //--------------------------------------------------------------------------------------------------
comment: //opt: pageNo - page no to display, from 1, default is 1 (int) [string]
comment: //opt: num - number of records per page (default is 300) [string]
comment: //%	default number of items per page [int]
comment: //%	position in table [int]
comment: //% starts at 1 [int]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	count users
comment: //----------------------------------------------------------------------------------------------
comment: // we don't show public users
comment: // we don't show banned users (for now)
comment: // we don't show inactive users (for now)
comment: //----------------------------------------------------------------------------------------------
comment: //	load a page of results from the database and make a list
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/users/models/friendship.mod.php'
string: 'modules/users/models/user.mod.php'
string: ''
string: 'users'
string: 'users_user'
string: 'list'
string: ''
string: 'num'
string: 'num'
string: 'page'
string: 'page'
string: "role != 'public'"
string: "role != 'banned'"
string: "role != 'inactive'"
string: 'users_user'
string: 'users_user'
string: '*'
string: 'username'
string: 'modules/users/views/summary.block.php'
string: '%%serverPath%%users/list/'
string: "[[:theme::pagination::page="
string: "::total="
string: "::link="
string: ":]]\n"

<b>scanning file: /var/www/an2google/trunk/modules/users/views/summary.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	short summary of user record, suitable for including in lists (perm:summary)
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: UID - UID of record to summarise [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/users/models/friendship.mod.php'
string: 'modules/users/models/user.mod.php'
string: ''
string: 'UID'
string: ''
string: 'users'
string: 'users_user'
string: 'summary'
string: ''
string: ''
string: 'UID'
string: ''
string: 'modules/users/views/summary.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/users/views/signupform.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	show signup form 
comment: //--------------------------------------------------------------------------------------------------
comment: //opt: clear - do not pre-fill form values (yes|no), no is default [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and any permissions
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: check public permission to signup
comment: //----------------------------------------------------------------------------------------------
comment: //	set defaults
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make and return the form
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/users/models/friendship.mod.php'
string: 'modules/users/models/user.mod.php'
string: ''
string: 'clear'
string: 'clear'
string: 'no'
string: 'UID'
string: 'school'
string: '261390791197222710'
string: 'grade'
string: '12'
string: 'firstname'
string: ''
string: 'surname'
string: ''
string: 'username'
string: ''
string: 'password'
string: ''
string: 'lang'
string: 'en'
string: 'profile'
string: ''
string: 'permissions'
string: ''
string: 'lastOnline'
string: 'createdOn'
string: 'createdBy'
string: 'admin'
string: 'pass1'
string: ''
string: 'pass2'
string: ''
string: 'yes'
string: 'clear'
string: 'modules/users/views/signupform.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/users/views/showrequestedfriends.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	show friend requests (to others)
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: userUID - UID of user whose profile this box is on [string]
comment: // admins can see everyones friend requests
comment: // make the list
comment: //$labels = array('userUID' =&gt; $friendUID, 'relationship' =&gt; $relationship);
comment: //$html .= $theme-&gt;replaceLabels($labels, $theme-&gt;loadBlock('modules/users/views/confirmfriendnav.block.php'));
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/users/models/friendship.mod.php'
string: 'modules/users/models/user.mod.php'
string: ''
string: 'userUID'
string: 'userUID'
string: 'admin'
string: 'userUID'
string: "[[:theme::navtitlebox::label=Friend Requests (from me):]]\n"
string: "[[:users::summarynav::userUID="
string: "::extra=(relationship: $relationship):]]\n"
string: '%%serverPath%%users/removefriend/'
string: "&lt;form name='withdrawFriendRequest' method='POST' action='"
string: "'&gt;\n"
string: "&lt;input type='hidden' name='action' value='withdrawRequest' /&gt;\n"
string: "&lt;input type='hidden' name='friendUID' value='"
string: "' /&gt;\n"
string: "&lt;input type='submit' value='widthdraw request' /&gt;\n"
string: "&lt;/form&gt;\n"
string: "&lt;hr/&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/users/views/showgrade.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	list all grades/years/forms/standards at a school
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: schoolUID - overrides raUID [string]
comment: //arg: grade - grade which studenta are in [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	load members from database
comment: //----------------------------------------------------------------------------------------------
comment: //$sql = "select * from users "
comment: //	 . "where school='" . $db-&gt;addMarkup($args['schoolUID']) . "' "
comment: //	 . "and grade='" . $db-&gt;addMarkup($args['grade']) . "' "
comment: //	 . "order by surname, firstname";
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/schools/models/school.mod.php'
string: ''
string: 'schoolUID'
string: ''
string: 'grade'
string: ''
string: "school='"
string: 'schoolUID'
string: "'"
string: "grade='"
string: 'grade'
string: "'"
string: 'users_user'
string: '*'
string: 'surname, firstname'
string: "&lt;div class='inlinequote'&gt;No students have been added to this grade yet.&lt;/div&gt;"
string: "&lt;table noborder&gt;\n"
string: "[[:users::summarynav::userUID="
string: 'UID'
string: ":]]"
string: "\t&lt;tr&gt;\n\t\t&lt;td valign='top'&gt;$cell&lt;/td&gt;\n"
string: "\t\t&lt;td valign='top'&gt;$cell&lt;/td&gt;\n\t&lt;/tr&gt;\n"
string: "\t\t&lt;td&gt;&lt;/td&gt;\n\t&lt;/tr&gt;\n"
string: "&lt;/table&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/users/views/showfriendrequests.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	show friend requests (from others)
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: userUID - UID of user whose profile this box is on [string]
comment: // admins can see everyones friend requests
comment: // make the list
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/users/models/friendship.mod.php'
string: 'modules/users/models/user.mod.php'
string: ''
string: 'userUID'
string: 'userUID'
string: 'admin'
string: 'userUID'
string: "[[:theme::navtitlebox::label=Friend Requests (to me):]]\n"
string: 'modules/users/views/confirmfriendnav.block.php'
string: 'friendUID'
string: 'relationship'

<b>scanning file: /var/www/an2google/trunk/modules/users/views/selectgroup.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	select box for choosing a user's group (sensitive information, only available to admins)
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: default - group the user is currently in, set to 'public' if blank [string]
comment: //opt: varname - html form element name, default is role [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and user role
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/users/models/friendship.mod.php'
string: 'modules/users/models/user.mod.php'
string: 'role'
string: ''
string: 'admin'
string: 'default'
string: ''
string: ''
string: 'default'
string: 'default'
string: 'public'
string: 'default'
string: 'default'
string: 'varname'
string: 'modules/users/views/selectgroup.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/users/views/select.fn.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //|	select box for choosing a user // TODO: security consideration of access to this
comment: //-------------------------------------------------------------------------------------------------
comment: //arg: default - default value (UID of a user), current user if not supplied [string]
comment: //arg: varname - field name, default is 'user' [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: // TODO: $db-&gt;loadRange _
comment: //-------------------------------------------------------------------------------------------------
string: 'modules/users/models/friendship.mod.php'
string: 'modules/users/models/user.mod.php'
string: 'user'
string: 'public'
string: ''
string: 'varname'
string: 'varname'
string: 'default'
string: 'default'
string: "&lt;select name='"
string: "'&gt;\n"
string: "select UID, firstname, surname, username, alias "
string: "from Users_User order by firstname, surname"
string: 'firstname'
string: ' '
string: 'surname'
string: ''
string: 'UID'
string: "checked='checked'"
string: "\t&lt;option value='"
string: 'UID'
string: "' $checked&gt;"
string: "&lt;/option&gt;"
string: "&lt;/select&gt;"

<b>scanning file: /var/www/an2google/trunk/modules/users/views/searchjs.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	user search results, javascript format
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: squery - query [string]
comment: //arg: callback - javascript function on parent window - fn(UID, uHtml, uName, uThumb) {} [string]
comment: //arg: pageno - page number (To be implemented) [string]
comment: //TODO: fix this up
comment: //----------------------------------------------------------------------------------------------
comment: //	make query (this can be much more efficient)
comment: //----------------------------------------------------------------------------------------------
string: 'modules/users/models/friendship.mod.php'
string: 'modules/users/models/user.mod.php'
string: ''
string: 'squery'
string: ''
string: ''
string: 'squery'
string: ''
string: ' '
string: 'squery'
string: "SELECT UID, alias, concat(firstname, ' ', surname, ' ', username) as qs "
string: "FROM Users_User "
string: "WHERE role != 'banned' "
string: "ORDER BY firstname, surname"
string: "&lt;script src='%%serverPath%%modules/users/js/usersearch.js'&gt;&lt;/script&gt;\n"
string: "&lt;div id='userSearchResults'&gt;Searching '"
string: 'squery'
string: "'... &lt;/div&gt;"
string: "&lt;script&gt;\n"
string: "var userList = new Array();\n"
string: ' '
string: 'qs'
string: ''
string: 'UID'
string: "[[:users::name::userUID="
string: ":]]"
string: ''
string: "%%serverPath%%users/profile/"
string: 'alias'
string: "[[:users::summarynav::userUID="
string: "::target=_parent:]]\n"
string: ''
string: "[[:users::avatar::userUID="
string: "::size=thumb90::link=no:]]\n"
string: ''
string: "userList["
string: "] = new Array('"
string: "', '"
string: "', '"
string: "', '"
string: "', '"
string: "');\n"
string: "renderResultsHtml(0);"
string: "&lt;/script&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/users/views/search.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	user search results  // TODO: pagination, fix this up
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: fsearch - query [string]
comment: //opt: pageno - page number (not yet implemented) [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	make query (this can be much more efficient)
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/users/models/friendship.mod.php'
string: 'modules/users/models/user.mod.php'
string: ''
string: 'fsearch'
string: ''
string: ''
string: 'fsearch'
string: ''
string: ' '
string: 'fsearch'
string: "select UID, concat(firstname, ' ', surname, ' ', username) as qs from Users_User"
string: 'qs'
string: ''
string: ' '
string: '%%serverPath%%users/find/add_'
string: 'UID'
string: "[[:users::summarynav::userUID="
string: 'UID'
string: "::target=main:]]\n"
string: "&lt;a href='"
string: "'&gt;[add as friend &gt;&gt; ]&lt;/a&gt;&lt;br/&gt;&lt;hr/&gt;\n"
string: ''
string: "&lt;br/&gt;&lt;b&gt;no search results for: "
string: 'fsearch'
string: "&lt;/b&gt;&lt;br/&gt;\n"
string: "&lt;br/&gt;&lt;b&gt;$count results&lt;/b&gt;&lt;br/&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/users/views/schoolname.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	look up name of a user's school
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - alias or UID of a Users_User object [string]
comment: //opt: userUID - overrides raUID [string]
comment: //opt: link - create link to school, default is yes (yes|no) [string]
comment: //% return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: permissions check here
comment: //----------------------------------------------------------------------------------------------
comment: //	make the link
comment: //----------------------------------------------------------------------------------------------
string: 'modules/users/models/user.mod.php'
string: ''
string: 'yes'
string: 'userUID'
string: 'raUID'
string: 'userUID'
string: 'raUID'
string: ''
string: 'raUID'
string: ''
string: 'link'
string: 'no'
string: 'link'
string: 'no'
string: '[[:schools::name::link='
string: '::schoolUID='
string: ':]]'
string: ''

<b>scanning file: /var/www/an2google/trunk/modules/users/views/removefriend.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	find common friends between the current user and some random, returns thumbnails
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: friendshipUID - UID of relationship record [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/users/models/friendship.mod.php'
string: 'modules/users/models/user.mod.php'
string: ''
string: 'friendshipUID'
string: ''
string: 'users_friendship'
string: 'friendshipUID'
string: ''
string: '%%serverPath%%users/removefriend/'
string: 'friendshipUID'
string: "&lt;form name='' method='POST' action='"
string: "'&gt;
	&lt;input type='hidden' name='action' value='removeFriend' /&gt;
	&lt;input type='hidden' name='friendshipUID' value='"
string: 'friendshipUID'
string: "' /&gt;
	&lt;input type='submit' value='Remove From Friends List'&gt;
	&lt;/form&gt;	"

<b>scanning file: /var/www/an2google/trunk/modules/users/views/profile.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	profile box on users profile page
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: userRA - recordAlias of record to summarise [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/users/models/friendship.mod.php'
string: 'modules/users/models/user.mod.php'
string: ''
string: 'userRa'
string: ''
string: 'userRa'
string: 'users'
string: 'users_user'
string: 'show'
string: ''
string: ''
string: 'modules/users/views/profile.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/users/views/pleaselogin.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	ask public user to log in
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: school - UID of school [string]
comment: // TODO: deal with banned users, etc
string: 'public'
string: "&lt;div class='inlinequote'&gt;"
string: "&lt;img src='%%serverPath%%themes/clockface/images/info.png' "
string: "class='infobutton' width='18' height='18' /&gt;"
string: "&amp;nbsp;&amp;nbsp;"
string: "Please &lt;a href='%%serverPath%%users/login/'&gt;log in&lt;/a&gt; to view this section.&lt;/div&gt;"
string: ''

<b>scanning file: /var/www/an2google/trunk/modules/users/views/onlineschoolnav.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	make a list of users who are currently online at a given school (formatted for nav)
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: school - UID of school [string]
comment: // TODO this needs fixing
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/users/models/friendship.mod.php'
string: 'modules/users/models/user.mod.php'
string: 'public'
string: '[[:users::pleaselogin:]]'
string: ''
string: 'school'
string: "select Users_User.UID, firstname, surname, grade, alias from Users_Login, Users_User "
string: "where Users_User.school='"
string: 'school'
string: "' "
string: "and Users_User.UID=Users_Login.userUID "
string: "order by firstname"
string: "&lt;a href='/users/profile/"
string: 'alias'
string: "'&gt;"
string: 'firstname'
string: ' '
string: 'surname'
string: "&lt;/a&gt; "
string: "&lt;small&gt;("
string: 'grade'
string: ")&lt;/small&gt;&lt;br/&gt;"

<b>scanning file: /var/www/an2google/trunk/modules/users/views/newuserform.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	form to add a new user (to be displayed in the subnav, 300px wide, no arguments)
comment: //--------------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/users/models/friendship.mod.php'
string: 'modules/users/models/user.mod.php'
string: 'admin'
string: 'modules/users/views/newuserform.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/users/views/namelink.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	make a link to a users profile with the users name
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - recordAlias or UID of a user record [string]
comment: //opt: userUID - overrides raUID [string]
comment: //opt: target - link larget (for iFrames) [string]
comment: // public user canot see profiles, so don't link them
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/users/models/friendship.mod.php'
string: 'modules/users/models/user.mod.php'
string: ''
string: 'userUID'
string: 'raUID'
string: 'userUID'
string: 'raUID'
string: ''
string: 'public'
string: '[[:users::name::userUID='
string: 'raUID'
string: ':]]'
string: 'target'
string: "target='"
string: 'target'
string: "'"
string: 'raUID'
string: ' '
string: "&lt;a href='/users/profile/"
string: "' $target&gt;$fullName&lt;/a&gt;"

<b>scanning file: /var/www/an2google/trunk/modules/users/views/name.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	get a users name
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - recordAlias or UID of a user record [string]
comment: //opt: userUID - overrides raUID [string]
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/users/models/friendship.mod.php'
string: 'modules/users/models/user.mod.php'
string: 'userUID'
string: 'raUID'
string: 'userUID'
string: 'raUID'
string: ''
string: 'raUID'
string: ' '

<b>scanning file: /var/www/an2google/trunk/modules/users/views/menu.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	users submenu
comment: //--------------------------------------------------------------------------------------------------
comment: //opt: userRa - recordAlias of a user [string]
comment: //opt: userUID - UID of a user [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	public vs user options
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------
comment: //	user is viewing own record
comment: //--------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	admin options
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/users/models/friendship.mod.php'
string: 'modules/users/models/user.mod.php'
string: 'login'
string: ''
string: 'signup'
string: ''
string: 'profile'
string: ''
string: 'grade'
string: ''
string: 'blog'
string: ''
string: 'list'
string: ''
string: 'account'
string: ''
string: 'pictures'
string: ''
string: 'files'
string: ''
string: 'friends'
string: ''
string: 'userUID'
string: 'userUID'
string: 'userRa'
string: 'userRa'
string: 'public'
string: 'login'
string: "[[:theme::submenu::label=Log In::link=/users/login/::alt=:]]\n"
string: 'signup'
string: "[[:theme::submenu::label=Sign Up::link=/users/signup/::alt=:]]\n"
string: 'profile'
string: "[[:theme::submenu::label=Profile::link=/users/profile/%%userRa%%::alt=:]]\n"
string: 'blog'
string: "[[:theme::submenu::label=Blog::link=/moblog/blog/%%userRa%%::alt=:]]\n"
string: 'grade'
string: "[[:theme::submenu::label=Classmates::link=/users/grade/%%userRa%%::alt=:]]\n"
string: 'friends'
string: "[[:theme::submenu::label=Friends::link=/users/friends/%%userRa%%::alt=:]]\n"
string: 'pictures'
string: "[[:theme::submenu::label=Pictures::link=/gallery/list/%%userRa%%::alt=:]]\n"
string: 'userUID'
string: 'account'
string: "[[:theme::submenu::label=My Account::link=/users/myaccount/::alt=:]]\n"
string: 'admin'
string: 'list'
string: "[[:theme::submenu::label=Profile::link=/users/list/::alt=:]]\n"
string: 'modules/users/views/menu.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/users/views/loginstats.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	display list of users logged in within the last 1, 3 and 6 months
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: startDate - datetime [string]
comment: //arg: endDate - datetime [string]
comment: //%	return value
comment: //----------------------------------------------------------------------------------------------
comment: //	check user role and arguments
comment: //----------------------------------------------------------------------------------------------
comment: // TODO: better sanitization
comment: //----------------------------------------------------------------------------------------------
comment: //	query database
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
string: 'modules/users/models/user.mod.php'
string: ''
string: 'admin'
string: ''
string: 'startDate'
string: 'startDate'
string: 'endDate'
string: 'endDate'
string: "'"
string: ''
string: "'"
string: ''
string: 'UID, username, firstname, surname, role, lastOnline, alias'
string: "CAST(lastOnline AS DATE) &lt;= CAST('"
string: "' AS DATE)"
string: "CAST(lastOnline AS DATE) &gt; CAST('"
string: "' AS DATE)"
string: 'users_user'
string: 'CAST(lastOnline AS DATETIME)'
string: 'user'
string: 'role'
string: 'last online'
string: '%%serverPath%%users/profile/'
string: 'alias'
string: "&lt;a href='$userUrl'&gt;"
string: 'firstname'
string: ' '
string: 'surname'
string: "&lt;/a&gt;"
string: 'role'
string: 'lastOnline'
string: "&lt;b&gt;Users: "
string: " Start Date: $startDate End Date: $endDate&lt;/b&gt;&lt;br/&gt;\n"
string: "&lt;br/&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/users/views/loginform.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	site login form
comment: //--------------------------------------------------------------------------------------------------
comment: //opt: redirectSelf - redirect back to the same page after login (yes|no) [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/users/models/friendship.mod.php'
string: 'modules/users/models/user.mod.php'
string: ''
string: 'no'
string: 'public'
string: '(you are already logged in)'
string: 'redirectSelf'
string: 'yes'
string: 'redirectSelf'
string: 'yes'
string: 'modules/users/views/loginform.block.php'
string: 'redirectUrl'
string: ''
string: 'yes'
string: 'REQUEST_URI'
string: '/'
string: 'redirectUrl'
string: "&lt;input type='hidden' name='redirect' value='$redirectUrl' /&gt;"

<b>scanning file: /var/www/an2google/trunk/modules/users/views/listroles.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	list all Role objects, paginated
comment: //--------------------------------------------------------------------------------------------------
comment: //opt: pageNo - page number (integer) [string]
comment: //opt: pageSize - number or items per page (integer) [string]
comment: //opt: orderBy - field to order the list by (defualt is createdOn) [string]
comment: //%	first page if not specified [int]
comment: //%	default number of items per page [int]
comment: //%	default list order [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check permissions and args
comment: //----------------------------------------------------------------------------------------------
comment: // users may list by these fields
comment: //----------------------------------------------------------------------------------------------
comment: //	count and load list items
comment: //----------------------------------------------------------------------------------------------
comment: //% to filter list by [array:string]
comment: //add any conditions here, eg: $conditions[] = "published='yes'";
comment: //% list ordinal of first item [int]	
comment: //% total number of items [int]
comment: //% number of pages [int]
comment: //----------------------------------------------------------------------------------------------
comment: //	make the table
comment: //----------------------------------------------------------------------------------------------
comment: //% 2d [array]
comment: //% add column names here [array:string]
comment: //% add columns here [array:string]
comment: //% relative to serverPath [string]
string: 'modules/users/models/role.mod.php'
string: 'name'
string: ''
string: 'users'
string: 'users_role'
string: 'list'
string: ''
string: 'page'
string: 'pageNo'
string: 'num'
string: 'pageSize'
string: 'by'
string: 'by'
string: 'name'
string: 'name'
string: 'createdon'
string: 'createdOn'
string: 'users_role'
string: 'users_role'
string: '*'
string: "&lt;div class='inlinequote'&gt;no Roles yet added&lt;/div&gt;&lt;br/&gt;\n"
string: 'name'
string: '[x]'
string: 'goLink'
string: 'delLink'
string: 'users/listrole/'
string: "[[:theme::pagination::page=$pageNo::total=$totalPages::link=$link:]]\n"

<b>scanning file: /var/www/an2google/trunk/modules/users/views/listfriends.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	list friends of a given user
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: userUID - UID of user whose profile this box is on [string]
comment: // make the list
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/users/models/friendship.mod.php'
string: 'modules/users/models/user.mod.php'
string: ''
string: 'userUID'
string: 'userUID'
string: ''
string: 'userUID'
string: "users/editfriend/"
string: "&lt;a href='%%serverPath%%"
string: "'&gt;[modify]&lt;/a&gt;"
string: "[[:users::summarynav::userUID=$fUID::"
string: "extra= $rmLink (relationship; $rsp):]]\n"
string: "(none added yet)&lt;br/&gt;"

<b>scanning file: /var/www/an2google/trunk/modules/users/views/friendsearchbox.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	make iframe to search for friends
comment: //--------------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/users/models/friendship.mod.php'
string: 'modules/users/models/user.mod.php'
string: 'users'
string: 'users_user'
string: 'view'
string: ''
string: "&lt;iframe name='friendSearch' id='ifFSearch'
			 src='%%serverPath%%users/find/' 
			 width='300' height='200' 
			 frameborder='0'&gt;&lt;/iframe&gt;"

<b>scanning file: /var/www/an2google/trunk/modules/users/views/friendrequestprofilenav.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	show friend request box (if not already friend)
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: userUID - UID of user whose profile this box is on [string]
comment: //opt: notitle - surpress display of title (yes|no) [string]
comment: // dud block
comment: // own profile
comment: //----------------------------------------------------------------------------------------------
comment: //	look for an existing friendship
comment: //----------------------------------------------------------------------------------------------
comment: // are already friends
comment: //----------------------------------------------------------------------------------------------
comment: //	look for an existing friend request
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	neither, add friend request form
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/users/models/friendship.mod.php'
string: 'modules/users/models/user.mod.php'
string: ''
string: 'userUID'
string: 'userUID'
string: 'userUID'
string: ''
string: "[[:theme::navtitlebox::label=Friend Request:]]\n"
string: ''
string: 'notitle'
string: ''
string: 'search'
string: 'userUID'
string: "You have requested to add "
string: "[[:users::namelink::userUID="
string: ":]] as a friend \n"
string: "(relationship: $relationship), they must approve your request before "
string: "they will appear on your friends list.&lt;br/&gt;&lt;br/&gt;\n"
string: 'friendUID'
string: 'userUID'
string: 'titlebar'
string: 'return'
string: 'modules/users/views/friendrequestform.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/users/views/editrole.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	form to edit a Role object
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - alias or UID of a Users_Role object [string]
comment: //opt: UID - UID of a Users_Role object, overrides raUID [string]
comment: //opt: roleUID - UID of a Users_Role object, overrides raUID [string]
comment: //% return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check permissions and args
comment: //----------------------------------------------------------------------------------------------
comment: //% the object we're editing [object:Users_Role]
comment: //----------------------------------------------------------------------------------------------
comment: //	load the block
comment: //----------------------------------------------------------------------------------------------
comment: // ^ add any labels, block args, etc here
string: 'modules/users/models/role.mod.php'
string: ''
string: ''
string: 'UID'
string: 'UID'
string: 'raUID'
string: 'raUID'
string: 'roleUID'
string: 'roleUID'
string: ''
string: ''
string: ''
string: 'users'
string: 'users_role'
string: 'edit'
string: ''
string: 'modules/users/views/editrole.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/users/views/editprofileform.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	form to edit a user record (admin, not for users to edit their own records)
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - recordAlias or UID of a user record [string]
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/users/models/friendship.mod.php'
string: 'modules/users/models/user.mod.php'
string: 'raUID'
string: 'raUID'
string: 'UID'
string: 'modules/users/views/editprofileform.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/users/views/editform.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	form to edit a user record (admin, not for users to edit their own records)
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - alais or UID of a Users_User object [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/users/models/friendship.mod.php'
string: 'modules/users/models/user.mod.php'
string: ''
string: 'raUID'
string: ''
string: 'raUID'
string: ''
string: 'modules/users/views/editform.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/users/views/commonfriendsnav.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	find common friends between the current user and some random, returns thumbnails
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: UID - UID of a user [string]
comment: //opt: userUID - overrides UID [string]
comment: //opt: size - of images returned [string]
comment: // clunky, TODO: improve
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/users/models/friendship.mod.php'
string: 'modules/users/models/user.mod.php'
string: 'userUID'
string: 'UID'
string: 'userUID'
string: 'UID'
string: ''
string: 'UID'
string: "[[:theme::navtitlebox::label=Friends In Common:]]"
string: 'users_user'
string: "&lt;a href='/users/profile/"
string: "'&gt;"
string: "[[:users::avatar::userUID="
string: "::size=thumbsm:]]&lt;/a&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/users/views/chatlink.fn.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //|	makes link for chatting with this user		//TODO: fix this up
comment: //-------------------------------------------------------------------------------------------------
comment: //arg: userUID - UID of the user whose login status we're cheking [string]
comment: //-----------------------------------------------------------------------------------------
comment: // user is logged in to at least one awareNet server
comment: //-----------------------------------------------------------------------------------------
comment: //$html .= '[online]';
comment: //-----------------------------------------------------------------------------------------
comment: // user is offline
comment: //-----------------------------------------------------------------------------------------
string: ''
string: 'userUID'
string: ''
string: "select * from Users_Login where userUID='"
string: 'userUID'
string: "'"
string: "&lt;a href='#' onClick=\"kchatclient.createDiscussion('"
string: 'userUID'
string: "');\"&gt;[chat]&lt;/a&gt;"
string: '[offline]'

<b>scanning file: /var/www/an2google/trunk/modules/users/views/changepassform.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	form to change password
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - recordAlias or UID of a user record [string]
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/users/models/friendship.mod.php'
string: 'modules/users/models/user.mod.php'
string: 'raUID'
string: 'raUID'
string: 'modules/users/views/changepassform.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/users/views/changefriendshipform.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	display form to change the parameters of a friendship record
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: friendshipUID - UID of relationship record [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: permissions check here
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/users/models/friendship.mod.php'
string: 'modules/users/models/user.mod.php'
string: ''
string: 'friendshipUID'
string: ''
string: 'users_friendship'
string: 'friendshipUID'
string: ''
string: 'friendshipUID'
string: 'modules/users/views/changefriendshipform.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/users/views/banned.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	list banned users
comment: //--------------------------------------------------------------------------------------------------
comment: //TODO: paginate
comment: //----------------------------------------------------------------------------------------------
comment: //	check user role and any arguments
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	query the database
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
string: ''
string: 'admin'
string: ''
string: "role='banned'"
string: 'UID, username, firstname, surname, editedOn, editedBy, alias'
string: 'users_user'
string: 'surname, firstname'
string: 'Name'
string: 'User'
string: 'Last Edit'
string: 'By'
string: '%%serverPath%%users/profile/'
string: 'alias'
string: "&lt;a href='$userUrl'&gt;"
string: 'firstname'
string: ' '
string: 'surname'
string: "&lt;/a&gt;\n"
string: '[[:users::namelink::userUID='
string: 'editedBy'
string: ':]]'
string: ''
string: 'username'
string: 'editedOn'

<b>scanning file: /var/www/an2google/trunk/modules/users/views/avatar.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	find the group's logo/picture (300px) or a blank image
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - recordAlias or UID or groups entry [string]
comment: //opt: userUID - overrides raUID [string]
comment: //opt: size - width100, width200, width300, width570, thumb, etc (default width300) [string]
comment: //opt: link - link to larger image (yes|no) (default is yes) [string]
comment: // no images found for this group
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/users/models/friendship.mod.php'
string: 'modules/users/models/user.mod.php'
string: 'width300'
string: 'yes'
string: 'userUID'
string: 'raUID'
string: 'userUID'
string: 'raUID'
string: 'link'
string: 'no'
string: 'no'
string: 'size'
string: 'size'
string: 'thumb'
string: 'thumb'
string: 'size'
string: 'thumbsm'
string: 'thumbsm'
string: 'size'
string: 'thumb90'
string: 'thumb90'
string: 'size'
string: 'width100'
string: 'width100'
string: 'size'
string: 'width200'
string: 'width200'
string: 'size'
string: 'width300'
string: 'width300'
string: 'size'
string: 'width570'
string: 'width570'
string: 'raUID'
string: "select * from Images_Image where refModule='users' and refUID='"
string: "' order by weight"
string: 'yes'
string: "&lt;a href='/images/show/"
string: 'alias'
string: "'&gt;"
string: "&lt;img src='/images/"
string: "/"
string: 'alias'
string: "' border='0' alt='"
string: "'&gt;&lt;/a&gt;"
string: "&lt;img src='/images/"
string: "/"
string: 'alias'
string: "' border='0' alt='"
string: "'&gt;"
string: "&lt;img src='/themes/clockface/unavailable/"
string: ".jpg' border='0'&gt;"

<b>scanning file: /var/www/an2google/trunk/modules/users/views/adminconsole.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	list of controls for this module as displayed on the admin console
comment: //--------------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'admin'
string: ''
string: 'modules/users/views/adminconsole.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/users/views/addrolenav.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	form to add a new Role object, formatted for nav
comment: //--------------------------------------------------------------------------------------------------
comment: //% return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check permissions and args
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	load the block
comment: //----------------------------------------------------------------------------------------------
string: 'modules/users/models/role.mod.php'
string: ''
string: 'users'
string: 'users_role'
string: 'new'
string: ''
string: 'modules/users/views/addrolenav.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/users/views/addfriendform.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	nav form to add a user as a friend
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: UID - recordAlias or UID or groups entry [string]
comment: //opt: userUID - overrides raUID [string]
comment: //TODO
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/users/models/friendship.mod.php'
string: 'modules/users/models/user.mod.php'
string: 'userUID'
string: 'UID'
string: 'userUID'
string: 'UID'
string: ''

<b>scanning file: /var/www/an2google/trunk/modules/users/models/user.mod.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	object to represent site users.  This module is required.
comment: //--------------------------------------------------------------------------------------------------
comment: //+	permissions field is formatted in lines: |auto/special|modulename|perm|cond| where condition
comment: //+	may be blank or something like: %%createdBy%%=%%user.UID%%
comment: //+	'auto' permissions are generated from module.xml.php files, 'special' permissions are manually
comment: //+	granted by an administrator.
comment: //+
comment: //+	PERMISSIONS
comment: //+
comment: //+	Users and groups may be granted permissions on individual objects or more often on entire 
comment: //+	classes of objects.  Permissions are defined by the module to which an object belongs, and 
comment: //+	may be exported to other modules (ie, inherited permisisons)
comment: //+
comment: //+ Inheritable permissions are exported by the module which maintains an owned object, say a 
comment: //+	comment which belongs to a blog post.  They are granted according to the relationship between
comment: //+	the owner object and a user.  For example, a user may have permission to delete an image 
comment: //+	belonging to a blog post because the user created that post.  These relationships between 
comment: //+ objects and users are defined by the module which owns an object.
comment: //+
comment: //+	Format of basic permissions:
comment: //+	p|module|model|permission								- blanket permission
comment: //+	c|module|model|permission|(if)|relationship				- conditional permission
comment: //+	
comment: //+	Note that in the case of inherited permissions, the first object is the owner, the second
comment: //+	is the owned object, the permission applies to the owned object, and the condition to the
comment: //+	owner object.
comment: //+
comment: //+ Examples:
comment: //+	c|blog|Blog_Post|edit|(if)|creator						- may edit their own blog posts
comment: //+	p|blog|Blog_Post|create									- may create blog posts
comment: //+ p|blog|Blog_Post|comment-create							- may comment on blog posts
comment: //+	c|blog|Blog_Post|image-create|(if)|creator				- may add images to their own blog posts
comment: //+	c|projects|Projects_Project|images-delete|(if)|member	- may delete images if member of project
comment: //+
comment: //+ TODO: consider adding third permission type 'e', evalutaing a member, say to allow an individual
comment: //+	user to edit an individual document (when)|UID=1234, or to allow a role permissions on a
comment: //+ subset of objects - say members of the 'sales' role can edit wiki pages in category 'marketing',
comment: //+	but not in category 'accounts', or to give 'moderators' the ability to delete comments from
comment: //+	unregistered users without review.
comment: //+
comment: //+	TODO: consider a better way for admins to decide on profile fields
comment: //+	TODO: make profile expansion explicit, current method is wasteful, parses XML that is 
comment: //+	almost never used.
comment: // move to this module?
comment: //----------------------------------------------------------------------------------------------
comment: //	member variables (as retieved from database)
comment: //----------------------------------------------------------------------------------------------
comment: //_	currently loaded record [array]
comment: //_	database structure [array]
comment: //_	set to true when an object has been loaded [bool] 
comment: // UID
comment: // title
comment: // varchar(30)
comment: // varchar(30)
comment: // varchar(100)
comment: // varchar(100)
comment: // varchar(50)
comment: // varchar(50)
comment: // varchar(30)
comment: // stored as XML in a text field [array]
comment: // actions this user is authorised to take [array]
comment: // datetime
comment: // datetime
comment: // ref:users-user
comment: // datetime
comment: // ref:users-user
comment: // alias
comment: //TODO: make this an admin-editable setting
comment: //----------------------------------------------------------------------------------------------
comment: //.	constructor
comment: //----------------------------------------------------------------------------------------------
comment: //opt: raUID - recordAlias or UID of a user [string]
comment: //----------------------------------------------------------------------------------------------
comment: //. constructor
comment: //----------------------------------------------------------------------------------------------
comment: //opt: raUID - UID or alias of a User object [string]
comment: // initialise table schema
comment: //	no user object
comment: // 	try load an object from the database
comment: // check if we did
comment: //note: we can't use $db-&gt;makeBlank yet, it requires global user
comment: // set default role
comment: //----------------------------------------------------------------------------------------------
comment: //. load an object from the database given its UID or an alias
comment: //----------------------------------------------------------------------------------------------
comment: //arg: raUID - UID or alias of a User object [string]
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //.	load a record provided as an associative array
comment: //----------------------------------------------------------------------------------------------
comment: //arg: ary - associative array of fields and values [array]
comment: //----------------------------------------------------------------------------------------------
comment: //. save the current object to database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string on success, html report of errors on failure [string]
comment: //: $db-&gt;save(...) will raise an object_updated event if successful
comment: //----------------------------------------------------------------------------------------------
comment: //.	verify - check that an object is correct before allowing it to be stored in the database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string if object passes, warning message if not [string]
comment: //----------------------------------------------------------------------------------------------
comment: //. database table definition and content versioning
comment: //----------------------------------------------------------------------------------------------
comment: //returns: information for constructing SQL queries [array]
comment: //table columns
comment: //these fields will be indexed
comment: //revision history will be kept for these fields
comment: //TODO: add more nodiff fields
comment: //----------------------------------------------------------------------------------------------
comment: //.	serialize this object to an array
comment: //----------------------------------------------------------------------------------------------
comment: //returns: associative array of all variables which define this instance [array]
comment: //----------------------------------------------------------------------------------------------
comment: //.	make an extended array of all data a view will need
comment: //----------------------------------------------------------------------------------------------
comment: //returns: extended array of member variables and metadata [array]
comment: // note that current user and $this may not be the same
comment: //------------------------------------------------------------------------------------------
comment: //	links
comment: //------------------------------------------------------------------------------------------
comment: //if (false == $user-&gt;authHas('users', 'users_user', 'show', '') == false) 
comment: //	{ echo "no permission to view users.&lt;br/&gt;"; }
comment: // to ponder - should users be able to delete their profile?
comment: //------------------------------------------------------------------------------------------
comment: //	chatlink- if logged in to awarenet (not necessarily on this peer)
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	add profile fields
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	look up school info
comment: //------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //.	delete the current user
comment: //----------------------------------------------------------------------------------------------
comment: //: $db-&gt;delete(...) will raise an object_deleted event on success [bool]
comment: //returns: true on success, false on failure [bool]
comment: // nothing to do
comment: //==============================================================================================
comment: //	AUTHENTICATION AND PERMISSIONS
comment: //==============================================================================================
comment: //----------------------------------------------------------------------------------------------
comment: //.	check if the current user has a permission on a specified object
comment: //----------------------------------------------------------------------------------------------
comment: //arg: module - name of a kapenta module [string]
comment: //arg: model - object class [string]
comment: //arg: permission - name of permission sought [string]
comment: //opt: UID - specific object on which permission is sought (if any) [string]
comment: //returns: true if the user is authorized, otherwise false [bool]
comment: // admins have all permissions
comment: // no such role
comment: //------------------------------------------------------------------------------------------
comment: //	check role permisisons first
comment: //------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------
comment: // user has blanket permission to perform this action
comment: //--------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------
comment: // user has permission to perform this action is a condition is met
comment: //--------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	if role does not authorize action, try user-specific permissions
comment: //------------------------------------------------------------------------------------------
comment: // TODO: fix
comment: //--------------------------------------------------------------------------
comment: // user has blanket permission to perform this action
comment: //--------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------
comment: // user has permission to perform this action is a condition is met
comment: //--------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	at this point to policy has been shown to authorize this user to permform this action
comment: //------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //.	read [permissions] into array for authentication
comment: //----------------------------------------------------------------------------------------------
comment: //arg: serialized - permissions set as raw string [string]
comment: //returns: permissions set as an array [array]
comment: //----------------------------------------------------------------------------------------------
comment: //.	collapse permissions array back to an XML string
comment: //----------------------------------------------------------------------------------------------
comment: //returns: permissions serialized as a string [string]
comment: //==============================================================================================
comment: //	USER PROFILES
comment: //==============================================================================================
comment: //----------------------------------------------------------------------------------------------
comment: //.	create blank profile - for new records
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //.	expand profile  //TODO: fix this, security checks
comment: //----------------------------------------------------------------------------------------------
comment: //arg: xml - raw XML containing profile [string]
comment: //returns: hash table of profile fields and values [array]
comment: // initialize all fields blank
comment: //%	parse XML [class:KXMLDocument]
comment: //%	all children of root node [array]
comment: //----------------------------------------------------------------------------------------------
comment: //.	collapse profile
comment: //----------------------------------------------------------------------------------------------
comment: //==============================================================================================
comment: //	TODO: remove this
comment: //==============================================================================================
comment: //----------------------------------------------------------------------------------------------
comment: //.	find users in the same grade as this user  //TODO: $db-&gt;loadRange
comment: //----------------------------------------------------------------------------------------------
comment: //returns: array of UID =&gt; row for loadArray [array]
comment: //==============================================================================================
comment: //	USER RELATIONSHIPS
comment: //==============================================================================================
comment: //----------------------------------------------------------------------------------------------
comment: //.	get the current users friends
comment: //----------------------------------------------------------------------------------------------
comment: //returns: array of friendshipUID =&gt; friendship for loadArray [array]
comment: //, TODO: handle this differently, perhaps with a block
comment: //, TODO: see if this can be removed entirely
comment: //----------------------------------------------------------------------------------------------
comment: //.	get inbound friend requests (that have been made to this user) // TODO: make this a block?
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //.	get outbound friend requests (that this user has made) // TODO: make this a block?
comment: //----------------------------------------------------------------------------------------------
comment: //==============================================================================================
comment: //	TOSTRING METHODS
comment: //==============================================================================================
comment: //----------------------------------------------------------------------------------------------
comment: //.	get the current user's name
comment: //----------------------------------------------------------------------------------------------
comment: //returns: firstname and surname [string]
comment: //----------------------------------------------------------------------------------------------
comment: //.	get the current user's profile URL
comment: //----------------------------------------------------------------------------------------------
comment: //returns: absolute URL [string]
comment: //----------------------------------------------------------------------------------------------
comment: //.	make a link to the current user's profile
comment: //----------------------------------------------------------------------------------------------
comment: //returns: HTML anchor tag [string]
comment: //----------------------------------------------------------------------------------------------
comment: //.	get the name of the corrent user's school
comment: //----------------------------------------------------------------------------------------------
comment: //returns: name of user's school [string]
string: 'modules/users/models/login.mod.php'
string: 'modules/users/models/friendship.mod.php'
string: 'modules/schools/models/school.mod.php'
string: 'interests|hometown|music|goals|books|also|birthyear|tel|email'
string: ''
string: 'public'
string: ''
string: ''
string: 'public'
string: 'public'
string: 'public'
string: 'user'
string: 'public'
string: 'public'
string: ''
string: 'UID'
string: 'role'
string: 'school'
string: 'grade'
string: 'firstname'
string: 'surname'
string: 'username'
string: 'password'
string: 'lang'
string: 'profile'
string: 'permissions'
string: 'lastOnline'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: 'alias'
string: ''
string: 'users'
string: 'users_user'
string: "Database error.&lt;br/&gt;\n"
string: ''
string: ''
string: "UID not present.\n"
string: "Please enter the users first name.\n"
string: "Please enter the users surname.\n"
string: "Please enter a username (4 characters or more).\n"
string: "Please enter a password (6 characters or more).\n"
string: 'Schools_School'
string: "Please select a school for this user.\n"
string: 'module'
string: 'users'
string: 'model'
string: 'users_user'
string: 'archive'
string: 'yes'
string: 'fields'
string: 'UID'
string: 'VARCHAR(33)'
string: 'role'
string: 'VARCHAR(33)'
string: 'school'
string: 'VARCHAR(33)'
string: 'grade'
string: 'VARCHAR(30)'
string: 'firstname'
string: 'VARCHAR(100)'
string: 'surname'
string: 'VARCHAR(100)'
string: 'username'
string: 'VARCHAR(50)'
string: 'password'
string: 'VARCHAR(50)'
string: 'lang'
string: 'VARCHAR(30)'
string: 'profile'
string: 'TEXT'
string: 'permissions'
string: 'TEXT'
string: 'lastOnline'
string: 'TEXT'
string: 'createdOn'
string: 'DATETIME'
string: 'createdBy'
string: 'VARCHAR(33)'
string: 'editedOn'
string: 'DATETIME'
string: 'editedBy'
string: 'VARCHAR(33)'
string: 'alias'
string: 'VARCHAR(255)'
string: 'indices'
string: 'UID'
string: '10'
string: 'username'
string: '10'
string: 'createdOn'
string: ''
string: 'createdBy'
string: '10'
string: 'editedOn'
string: ''
string: 'editedBy'
string: '10'
string: 'alias'
string: '10'
string: 'nodiff'
string: 'UID'
string: 'UID'
string: 'role'
string: 'school'
string: 'grade'
string: 'firstname'
string: 'surname'
string: 'username'
string: 'password'
string: 'lang'
string: 'profile'
string: 'permissions'
string: 'lastOnline'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: 'alias'
string: 'fullName'
string: 'firstname'
string: ' '
string: 'surname'
string: 'editUrl'
string: ''
string: 'editLink'
string: ''
string: 'editProfileUrl'
string: ''
string: 'editProfileLink'
string: ''
string: 'viewUrl'
string: ''
string: 'viewLink'
string: ''
string: 'delUrl'
string: ''
string: 'delLink'
string: ''
string: 'newUrl'
string: ''
string: 'newLink'
string: ''
string: 'users'
string: 'users_user'
string: 'show'
string: 'viewUrl'
string: '%%serverPath%%users/'
string: 'alias'
string: 'viewLink'
string: "&lt;a href='"
string: 'viewUrl'
string: "'&gt;[profile]&lt;/a&gt;"
string: 'user'
string: 'users_user'
string: 'edit'
string: 'editUrl'
string: '%%serverPath%%users/edit/'
string: 'editLink'
string: "&lt;a href='"
string: 'editUrl'
string: "'&gt;[edit]&lt;/a&gt;"
string: 'editProfileUrl'
string: '%%serverPath%%users/editprofile/'
string: 'editProfileLink'
string: "&lt;a href='"
string: 'editProfileUrl'
string: "'&gt;[edit]&lt;/a&gt;"
string: 'users'
string: 'users_user'
string: 'delete'
string: 'delUrl'
string: '%%serverPath%%users/confirmdelete/UID_'
string: '/'
string: 'delLink'
string: "&lt;a href='"
string: 'delUrl'
string: "'&gt;[delete]&lt;/a&gt;"
string: 'users'
string: 'users_user'
string: 'new'
string: 'newUrl'
string: "%%serverPath%%users/new/"
string: 'newLink'
string: "&lt;a href='"
string: 'newUrl'
string: "'&gt;[new user]&lt;/a&gt;"
string: '[[:users::chatlink::userUID='
string: 'UID'
string: ':]]'
string: 'chatLink'
string: ''
string: "\n"
string: "&lt;br/&gt;\n"
string: ''
string: 'profile_'
string: ''
string: 'profile_'
string: "&lt;p&gt;&lt;b&gt;"
string: ":&lt;/b&gt; "
string: "&lt;/p&gt;\n"
string: 'school'
string: 'schoolName'
string: 'schoolCountry'
string: 'schoolRecordAlias'
string: 'schoolUrl'
string: '%%serverPath%%schools/'
string: 'schoolLink'
string: "&lt;a href='"
string: 'schoolUrl'
string: "'&gt;"
string: "&lt;/a&gt;"
string: ''
string: 'admin'
string: 'auth'
string: "Checking: $module - $model - $permission - $UID &lt;br/&gt;\n"
string: 'model'
string: 'permission'
string: 'p'
string: 'type'
string: 'c'
string: 'type'
string: 'condition'
string: 'auth'
string: "Role does not support permission.&lt;br/&gt;\n"
string: 'model'
string: 'permission'
string: 'p'
string: 'type'
string: 'c'
string: 'type'
string: 'condition'
string: "\n"
string: '|'
string: "|"
string: 'type'
string: 'module'
string: 'model'
string: 'permission'
string: 'c'
string: 'type'
string: 'condition'
string: 'module'
string: 'module'
string: 'module'
string: ''
string: 'type'
string: '|'
string: 'module'
string: '|'
string: 'model'
string: '|'
string: 'permission'
string: 'c'
string: 'type'
string: "|(if)|"
string: 'condition'
string: "\n"
string: '|'
string: ''
string: '|'
string: ''
string: ''
string: "&lt;"
string: "&gt;"
string: "&lt;/"
string: "&gt;\n"
string: "&lt;profile&gt;\n$xml&lt;/profile&gt;\n"
string: "school='"
string: "'"
string: "grade='"
string: "'"
string: 'users_user'
string: '*'
string: 'surname, firstname'
string: "userUID='"
string: "'"
string: "status='confirmed'"
string: 'Users_Friendship'
string: '*'
string: 'surname, firstname'
string: "friendUID='"
string: "'"
string: "status='unconfirmed'"
string: 'Users_Friendship'
string: '*'
string: 'surname, firstname'
string: "userUID='"
string: "'"
string: "status='unconfirmed'"
string: 'Users_Friendship'
string: '*'
string: 'surname, firstname'
string: ' '
string: "%%serverPath%%users/profile/"
string: "&lt;a href='"
string: "'&gt;"
string: "&lt;/a&gt;"
string: '[[:schools::name::schoolUID='
string: ':]]'
string: ''

<b>scanning file: /var/www/an2google/trunk/modules/users/models/role.mod.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	object to represent site roles
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //member variables
comment: //----------------------------------------------------------------------------------------------
comment: //_	currently loaded database record [array]
comment: //_	database table definition [array]
comment: //_	set to true when an object has been loaded [bool]
comment: //_ UID [string]
comment: //_ title [string]
comment: //_ wyswyg [string]
comment: //_ plaintext [string]
comment: //_ datetime [string]
comment: //_ ref:Users_User [string]
comment: //_ datetime [string]
comment: //_ ref:Users_User [string]
comment: //_ alias [string]
comment: //----------------------------------------------------------------------------------------------
comment: //. constructor
comment: //----------------------------------------------------------------------------------------------
comment: //opt: raUID - UID or alias of a Role object [string]
comment: //opt: byName - set to true if providing role name rather than UID [bool]
comment: // initialise table schema
comment: // try load an object from the database
comment: // check if we did
comment: // make new object
comment: // initialize
comment: // set default name
comment: //----------------------------------------------------------------------------------------------
comment: //. load an object from the database given its UID or an alias
comment: //----------------------------------------------------------------------------------------------
comment: //arg: raUID - UID or alias of a Role object [string]
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //. load an object from the database given its UID or an alias
comment: //----------------------------------------------------------------------------------------------
comment: //arg: name - name of a user role [string]
comment: //returns: true on success, false on failure [bool]
comment: // query failed
comment: // no role with this name
comment: //----------------------------------------------------------------------------------------------
comment: //. load Role object serialized as an associative array
comment: //----------------------------------------------------------------------------------------------
comment: //arg: ary - associative array of members and values [array]
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //. save the current object to database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string on success, html report of errors on failure [string]
comment: //: $db-&gt;save(...) will raise an object_updated event if successful
comment: //----------------------------------------------------------------------------------------------
comment: //. check that object is correct before allowing it to be stored in database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string if object passes, warning message if not [string]
comment: //----------------------------------------------------------------------------------------------
comment: //. database table definition and content versioning
comment: //----------------------------------------------------------------------------------------------
comment: //returns: information for constructing SQL queries [array]
comment: //table columns
comment: //these fields will be indexed
comment: //revision history will be kept for these fields
comment: //----------------------------------------------------------------------------------------------
comment: //. serialize this object to an array
comment: //----------------------------------------------------------------------------------------------
comment: //returns: associative array of all members which define this instance [array]
comment: //----------------------------------------------------------------------------------------------
comment: //. serialize this object to xml
comment: //----------------------------------------------------------------------------------------------
comment: //arg: xmlDec - include xml declaration? [bool]
comment: //arg: indent - string with which to indent lines [bool]
comment: //returns: xml serialization of this object [string]
comment: //NOTE: any members which are not XML clean should be marked up before sending
comment: //----------------------------------------------------------------------------------------------
comment: //. make an extended array of data views may need
comment: //----------------------------------------------------------------------------------------------
comment: //returns: associative array of members, metadata and partial views [array]
comment: //% extended array of properties [array:string]
comment: //------------------------------------------------------------------------------------------
comment: //	links
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	javascript
comment: //------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //. delete current object from the database
comment: //----------------------------------------------------------------------------------------------
comment: //: $db-&gt;delete(...) will raise an object_deleted event on success [bool]
comment: //returns: true on success, false on failure [bool]
comment: // nothing to do
comment: //==============================================================================================
comment: //	PERMISSIONS
comment: //==============================================================================================
comment: //----------------------------------------------------------------------------------------------
comment: //.	read [permissions] into array for authentication
comment: //----------------------------------------------------------------------------------------------
comment: //arg: serialized - permissions set as raw string [string]
comment: //returns: permissions set as an array [array]
comment: //----------------------------------------------------------------------------------------------
comment: //.	collapse permissions array back to an XML string
comment: //----------------------------------------------------------------------------------------------
comment: //returns: permissions serialized as a string [string]
comment: //----------------------------------------------------------------------------------------------
comment: //.	add a permission
comment: //----------------------------------------------------------------------------------------------
comment: //arg: type - type of permission (p|c) [string]
comment: //arg: module - name of a module [string]
comment: //arg: model - type of object to which permission applies [string]
comment: //arg: permission - name of an action users may take [string]
comment: //opt: condition - a relationship, if conditional [string]
comment: //returns: true if permission was added, false if not [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //.	add a permission
comment: //----------------------------------------------------------------------------------------------
comment: //arg: type - type of permission (p|c) [string]
comment: //arg: module - name of a module [string]
comment: //arg: model - type of object to which permission applies [string]
comment: //arg: permission - name of an action users may take [string]
comment: //opt: condition - a relationship, if conditional [string]
comment: //returns: true if permission was added, false if not [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //.	temp, for debugging, make this a block
comment: //----------------------------------------------------------------------------------------------
string: ''
string: ''
string: 'New Role '
string: "name='"
string: "'"
string: 'users_role'
string: '*'
string: 'UID'
string: 'name'
string: 'description'
string: 'permissions'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: 'alias'
string: ''
string: 'users'
string: 'users_role'
string: "&lt;textarea rows='10' cols='80'&gt;{$ary['permissions']}&lt;/textarea&gt;"
string: "Database error.&lt;br/&gt;\n"
string: ''
string: ''
string: ''
string: "No UID.&lt;br/&gt;\n"
string: 'module'
string: 'users'
string: 'model'
string: 'users_role'
string: 'fields'
string: 'UID'
string: 'VARCHAR(33)'
string: 'name'
string: 'VARCHAR(255)'
string: 'description'
string: 'MEDIUMTEXT'
string: 'permissions'
string: 'MEDIUMTEXT'
string: 'createdOn'
string: 'DATETIME'
string: 'createdBy'
string: 'VARCHAR(33)'
string: 'editedOn'
string: 'DATETIME'
string: 'editedBy'
string: 'VARCHAR(33)'
string: 'alias'
string: 'VARCHAR(255)'
string: 'indices'
string: 'UID'
string: '10'
string: 'createdOn'
string: ''
string: 'createdBy'
string: '10'
string: 'editedOn'
string: ''
string: 'editedBy'
string: '10'
string: 'alias'
string: '10'
string: 'nodiff'
string: 'UID'
string: 'name'
string: 'description'
string: 'permissions'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: 'alias'
string: ''
string: "&lt;kobject type='users_role'&gt;\n"
string: "    &lt;UID&gt;"
string: "&lt;/UID&gt;\n"
string: "    &lt;name&gt;"
string: "&lt;/name&gt;\n"
string: "    &lt;description&gt;&lt;![CDATA["
string: "]]&gt;&lt;/description&gt;\n"
string: "    &lt;permissions&gt;"
string: "&lt;/permissions&gt;\n"
string: "    &lt;createdOn&gt;"
string: "&lt;/createdOn&gt;\n"
string: "    &lt;createdBy&gt;"
string: "&lt;/createdBy&gt;\n"
string: "    &lt;editedOn&gt;"
string: "&lt;/editedOn&gt;\n"
string: "    &lt;editedBy&gt;"
string: "&lt;/editedBy&gt;\n"
string: "    &lt;alias&gt;"
string: "&lt;/alias&gt;\n"
string: "&lt;/kobject&gt;\n"
string: "&lt;?xml version='1.0' encoding='UTF-8' ?&gt;\n"
string: 'viewUrl'
string: ''
string: 'viewLink'
string: ''
string: 'editUrl'
string: ''
string: 'editLink'
string: ''
string: 'delUrl'
string: ''
string: 'delLink'
string: ''
string: 'newUrl'
string: ''
string: 'newLink'
string: ''
string: 'goLink'
string: 'name'
string: 'users'
string: 'users_role'
string: 'show'
string: 'viewUrl'
string: '%%serverPath%%Users/showrole/'
string: 'alias'
string: 'viewLink'
string: "&lt;a href='"
string: 'viewUrl'
string: "'&gt;[ more &amp;gt;gt; ]&lt;/a&gt;"
string: 'viewLink'
string: "&lt;a href='"
string: 'viewUrl'
string: "'&gt;[ more &amp;gt;gt; ]&lt;/a&gt;"
string: 'users'
string: 'users_role'
string: 'edit'
string: 'edit'
string: 'editUrl'
string: '%%serverPath%%Users/editrole/'
string: 'alias'
string: 'editLink'
string: "&lt;a href='"
string: 'editUrl'
string: "'&gt;[ edit ]&lt;/a&gt;"
string: 'goLink'
string: "&lt;a href='"
string: 'editUrl'
string: "'&gt;"
string: 'name'
string: "&lt;/a&gt;"
string: 'users'
string: 'users_role'
string: 'edit'
string: 'delete'
string: 'delUrl'
string: '%%serverPath%%Users/delrole/'
string: 'alias'
string: 'delLink'
string: "&lt;a href='"
string: 'delUrl'
string: "'&gt;[ delete ]&lt;/a&gt;"
string: 'UIDJsClean'
string: 'UID'
string: 'descriptionJsVar64'
string: 'description'
string: 'UID'
string: 'Js64'
string: 'descriptionJs64'
string: 'descriptionJsVar64'
string: 'description'
string: "\n"
string: '|'
string: "|"
string: 'type'
string: 'module'
string: 'model'
string: 'permission'
string: 'c'
string: 'type'
string: 'condition'
string: 'module'
string: 'module'
string: 'module'
string: ''
string: 'type'
string: '|'
string: 'module'
string: '|'
string: 'model'
string: '|'
string: 'permission'
string: 'c'
string: 'type'
string: "|(if)|"
string: 'condition'
string: "\n"
string: ''
string: "role-&gt;addPermission(), no such module: $module &lt;br/&gt;\n"
string: 'type'
string: 'module'
string: 'model'
string: 'permission'
string: 'c'
string: 'condition'
string: ''
string: ''
string: 'condition'
string: 'condition'
string: ''
string: 'type'
string: 'model'
string: 'permission'
string: 'condition'
string: ''
string: 'Type'
string: 'Module'
string: 'Model'
string: 'Permission'
string: 'Condition'
string: ''
string: 'c'
string: 'type'
string: 'condition'
string: 'type'
string: 'module'
string: 'model'
string: 'permission'
string: "&lt;h2&gt;Role: "
string: " ("
string: ")&lt;/h2&gt;\n"
string: 'admin'
string: "(admin user passes all auth checks)&lt;br/&gt;"

<b>scanning file: /var/www/an2google/trunk/modules/users/models/login.mod.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	object to represent loghged in user sessions
comment: //--------------------------------------------------------------------------------------------------
comment: //+	this is used by features such as the chat, which need to know whether a user is logged in and 
comment: //+	to which peer.
comment: //----------------------------------------------------------------------------------------------
comment: //	member variables (as retieved from database)
comment: //----------------------------------------------------------------------------------------------
comment: //_	currently loaded database record [array]
comment: //_	database table definition [array]
comment: //_	set to true when an object has been loaded [bool]
comment: //_ UID [string]
comment: //_ ref:Users_User [string]
comment: //_ varchar(255) [string]
comment: //_ datetime [string]
comment: //_ datetime [string]
comment: //_ datetime [string]
comment: //_ datetime [string]
comment: //_ ref:Users_User [string]
comment: //_ datetime [string]
comment: //_ ref:Users_User [string]
comment: // maximum age of user login session, in seconds [int]
comment: //----------------------------------------------------------------------------------------------
comment: //. constructor
comment: //----------------------------------------------------------------------------------------------
comment: //opt: UID - UID of a Login object [string]
comment: //opt: isUser - set to UID is of a Users_User object, not a Users_Login object [bool]
comment: // initialise table schema
comment: // try load Users_Login object
comment: // try to load Users_User object
comment: // check if we did
comment: // make new object
comment: // initialize
comment: // ...user was here
comment: // ...at this time
comment: // ...
comment: //----------------------------------------------------------------------------------------------
comment: //. load an object from the database given its UID
comment: //----------------------------------------------------------------------------------------------
comment: //arg: UID - UID of a Login object [string]
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //.	load a login session object by user UID
comment: //----------------------------------------------------------------------------------------------
comment: //arg: userUID - UID of a user [string]
comment: //$sql = "select * from Users_Login where userUID='" . $db-&gt;addMarkup($userUID) . "'";
comment: // unreachable state, remove?
comment: //----------------------------------------------------------------------------------------------
comment: //. load Login object serialized as an associative array
comment: //----------------------------------------------------------------------------------------------
comment: //arg: ary - associative array of members and values [array]
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //. save the current object to database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string on success, html report of errors on failure [string]
comment: //: $db-&gt;save(...) will raise an object_updated event if successful
comment: //----------------------------------------------------------------------------------------------
comment: //.	verify - check that a object is valid before allowing it to be stored in the database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string if object passes, warning message if not [string]
comment: //----------------------------------------------------------------------------------------------
comment: //. database table definition and content versioning
comment: //----------------------------------------------------------------------------------------------
comment: //returns: information for constructing SQL queries [array]
comment: // do not keep revision history or deleted records
comment: //table columns
comment: //these fields will be indexed
comment: //revision history will be kept for these fields
comment: //----------------------------------------------------------------------------------------------
comment: //. serialize this object to an array
comment: //----------------------------------------------------------------------------------------------
comment: //returns: associative array of all members which define this instance [array]
comment: //----------------------------------------------------------------------------------------------
comment: //.	make an extended array of all data a view will need
comment: //----------------------------------------------------------------------------------------------
comment: //returns: extended array of member variables and metadata [array]
comment: //----------------------------------------------------------------------------------------------
comment: //. serialize this object to xml
comment: //----------------------------------------------------------------------------------------------
comment: //arg: xmlDec - include xml declaration? [bool]
comment: //arg: indent - string with which to indent lines [bool]
comment: //returns: xml serialization of this object [string]
comment: //NOTE: any members which are not XML clean should be marked up before sending
comment: //----------------------------------------------------------------------------------------------
comment: //.	delete the current user login session object
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //.	clear old entries from the Users_Login table	//TODO: move to cron
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //.	discover if there is already an entry for this user
comment: //----------------------------------------------------------------------------------------------
comment: //arg: userUID - UID of a user [string]
comment: //returns: true if there is a record of a current session, otherwise false [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //.	update lastseen to current time
comment: //----------------------------------------------------------------------------------------------
string: ''
string: ''
string: "userUID='"
string: "'"
string: 'users_login'
string: '*'
string: 'UID'
string: 'userUID'
string: 'serverUrl'
string: 'logintime'
string: 'lastseen'
string: 'status'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: ''
string: "Database error.&lt;br/&gt;\n"
string: ''
string: ''
string: "UID not present.\n"
string: "User UID not present.\n"
string: 'module'
string: 'users'
string: 'model'
string: 'users_login'
string: 'archive'
string: 'no'
string: 'fields'
string: 'UID'
string: 'VARCHAR(33)'
string: 'userUID'
string: 'VARCHAR(33)'
string: 'serverUrl'
string: 'VARCHAR(255)'
string: 'logintime'
string: 'DATETIME'
string: 'lastseen'
string: 'DATETIME'
string: 'status'
string: 'DATETIME'
string: 'createdOn'
string: 'DATETIME'
string: 'createdBy'
string: 'VARCHAR(33)'
string: 'editedOn'
string: 'DATETIME'
string: 'editedBy'
string: 'VARCHAR(33)'
string: 'indices'
string: 'UID'
string: '10'
string: 'userUID'
string: '10'
string: 'createdOn'
string: ''
string: 'createdBy'
string: '10'
string: 'editedOn'
string: ''
string: 'editedBy'
string: '10'
string: 'nodiff'
string: 'UID'
string: 'userUID'
string: 'serverUrl'
string: 'logintime'
string: 'lastseen'
string: 'status'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: 'UID'
string: 'userUID'
string: 'serverUrl'
string: 'logintime'
string: 'lastseen'
string: 'status'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: ''
string: "&lt;kobject type='users_login'&gt;\n"
string: "    &lt;UID&gt;"
string: "&lt;/UID&gt;\n"
string: "    &lt;userUID&gt;"
string: "&lt;/userUID&gt;\n"
string: "    &lt;serverUrl&gt;"
string: "&lt;/serverUrl&gt;\n"
string: "    &lt;logintime&gt;"
string: "&lt;/logintime&gt;\n"
string: "    &lt;lastseen&gt;"
string: "&lt;/lastseen&gt;\n"
string: "    &lt;status&gt;"
string: "&lt;/status&gt;\n"
string: "    &lt;createdOn&gt;"
string: "&lt;/createdOn&gt;\n"
string: "    &lt;createdBy&gt;"
string: "&lt;/createdBy&gt;\n"
string: "    &lt;editedOn&gt;"
string: "&lt;/editedOn&gt;\n"
string: "    &lt;editedBy&gt;"
string: "&lt;/editedBy&gt;\n"
string: "&lt;/kobject&gt;\n"
string: "&lt;?xml version='1.0' encoding='UTF-8' ?&gt;\n"
string: 'users_login'
string: '*'
string: ''
string: ''
string: ''
string: ''
string: 'serverUrl'
string: 'lastseen'
string: 'users'
string: 'users_login'
string: 'UID'
string: "select * from Users_Login where userUID='"
string: "'"
string: 'users_login'
string: 'lastseen'

<b>scanning file: /var/www/an2google/trunk/modules/users/models/friendship.mod.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	object to represent user friendships
comment: //--------------------------------------------------------------------------------------------------
comment: //+	friendships act in a single direction only and only show up when requited.  status can be 
comment: //+	confirmed or unconfirmed.  the relationship it chosen at each end, eg, Alice is Bobs 'sister'
comment: //+	and Bob is Alices 'brother'.  Let the soap opera begin.
comment: //----------------------------------------------------------------------------------------------
comment: //	member variables (as retieved from database)
comment: //----------------------------------------------------------------------------------------------
comment: // currently loaded record [array]
comment: // database structure [array]
comment: // set to true when an object has been loaded
comment: //_ UID [string]
comment: //_ ref:Users_User [string]
comment: //_ ref:Users_User [string]
comment: //_ varchar(100) [string]
comment: //_ varchar(255) [string]
comment: //_ datetime [string]
comment: //_ ref:Users_User [string]
comment: //_ datetime [string]
comment: //_ ref:Users_User [string]
comment: //----------------------------------------------------------------------------------------------
comment: //.	constructor
comment: //----------------------------------------------------------------------------------------------
comment: //opt: UID - UID fo a friendship object [string]
comment: //----------------------------------------------------------------------------------------------
comment: //.	load a friendship object given a user's UID and their friend's UID
comment: //----------------------------------------------------------------------------------------------
comment: //arg: userUID - UID of a user [string]
comment: //arg: friendUID - UID of a user [string]
comment: //returns: true on success, false if not found [bool]
comment: //$conditions[] = "status='confirmed'";
comment: //----------------------------------------------------------------------------------------------
comment: //. load an object from the database given its UID
comment: //----------------------------------------------------------------------------------------------
comment: //arg: UID - UID of a Friendship object [string]
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //. load Friendship object serialized as an associative array
comment: //----------------------------------------------------------------------------------------------
comment: //arg: ary - associative array of members and values [array]
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //. save the current object to database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string on success, html report of errors on failure [string]
comment: //: $db-&gt;save(...) will raise an object_updated event if successful
comment: //----------------------------------------------------------------------------------------------
comment: //.	verify - check that a object is valid before allowing it to be stored in the database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string if object passes, warning message if not [string]
comment: //----------------------------------------------------------------------------------------------
comment: //. database table definition and content versioning
comment: //----------------------------------------------------------------------------------------------
comment: //returns: information for constructing SQL queries [array]
comment: //table columns
comment: //these fields will be indexed
comment: //revision history will be kept for these fields
comment: //----------------------------------------------------------------------------------------------
comment: //. serialize this object to an array
comment: //----------------------------------------------------------------------------------------------
comment: //returns: associative array of all members which define this instance [array]
comment: //----------------------------------------------------------------------------------------------
comment: //.	make an extended array of all data a view will need
comment: //----------------------------------------------------------------------------------------------
comment: //returns: associative array of member variables and metadata [array]
comment: // TODO	
comment: //----------------------------------------------------------------------------------------------
comment: //.	install this module
comment: //----------------------------------------------------------------------------------------------
comment: //returns: html report lines [string]
comment: //, deprecated, this should be handled by ../inc/install.inc.php
comment: //------------------------------------------------------------------------------------------
comment: //	create friendships table if it does not exist
comment: //------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //. delete current object from the database
comment: //----------------------------------------------------------------------------------------------
comment: //: $db-&gt;delete(...) will raise an object_deleted event on success [bool]
comment: //returns: true on success, false on failure [bool]
comment: // nothing to do
comment: //----------------------------------------------------------------------------------------------
comment: //.	get a users list of confirmed friends 
comment: //----------------------------------------------------------------------------------------------
comment: //arg: userUID - UID of a user [string]
comment: //returns: array of friendUID =&gt; relationship [array]
comment: //----------------------------------------------------------------------------------------------
comment: //.	get a users list of outgoing friend requests (ie, that they have made)
comment: //----------------------------------------------------------------------------------------------
comment: //arg: userUID - UID of a user [string]
comment: //returns: array of friendUID =&gt; relationship [array]
comment: // load unconfirmed (ie, friend requests)
comment: // make into simple array and return
comment: //----------------------------------------------------------------------------------------------
comment: //.	get a users list of incoming friend requests (ie, that others have made)
comment: //----------------------------------------------------------------------------------------------
comment: //arg: userUID - UID of a user [string]
comment: //returns: array of friendUID =&gt; relationship [array]
comment: // load unconfirmed (ie, friend requests)
comment: // make into simple array
comment: //----------------------------------------------------------------------------------------------
comment: //.	find common friends between two users // TODO: improve this
comment: //----------------------------------------------------------------------------------------------
comment: //arg: user1 - UID of a user [string]
comment: //arg: user2 - UID of a user [string]
comment: //returns: array of user UIDs [array]
comment: //----------------------------------------------------------------------------------------------
comment: //.	find out if a friendship OR friend request exists
comment: //----------------------------------------------------------------------------------------------
comment: //arg: userUID - UID of a user [string]
comment: //arg: friendUID - UID of a user [string]
comment: //returns: true if a link exists, false if one does not [bool]
string: ''
string: ''
string: 'unconfirmed'
string: "userUID='"
string: "'"
string: "friendUID='"
string: "'"
string: 'users_friendship'
string: '*'
string: ''
string: ''
string: ''
string: ''
string: 'UID'
string: 'userUID'
string: 'friendUID'
string: 'relationship'
string: 'status'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: ''
string: "Database error.&lt;br/&gt;\n"
string: ''
string: ''
string: "UID not present.\n"
string: "user UID not present.\n"
string: "friend UID not present.\n"
string: 'module'
string: 'users'
string: 'model'
string: 'users_friendship'
string: 'fields'
string: 'UID'
string: 'VARCHAR(33)'
string: 'userUID'
string: 'VARCHAR(33)'
string: 'friendUID'
string: 'VARCHAR(33)'
string: 'relationship'
string: 'VARCHAR(100)'
string: 'status'
string: 'VARCHAR(255)'
string: 'createdOn'
string: 'DATETIME'
string: 'createdBy'
string: 'VARCHAR(33)'
string: 'editedOn'
string: 'DATETIME'
string: 'editedBy'
string: 'VARCHAR(33)'
string: 'indices'
string: 'UID'
string: '10'
string: 'createdOn'
string: ''
string: 'createdBy'
string: '10'
string: 'editedOn'
string: ''
string: 'editedBy'
string: '10'
string: 'nodiff'
string: 'UID'
string: 'userUID'
string: 'friendUID'
string: 'relationship'
string: 'status'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: "&lt;h3&gt;Installing Friendships Table&lt;/h3&gt;\n"
string: 'friendships'
string: 'created friendships table and indices...&lt;br/&gt;'
string: 'friendships table already exists...&lt;br/&gt;'
string: "userUID='"
string: "'"
string: "status='confirmed'"
string: 'users_friendship'
string: '*'
string: 'createdOn DESC'
string: ''
string: ''
string: 'friendUID'
string: 'relationship'
string: "userUID='"
string: "'"
string: "status='unconfirmed'"
string: 'users_friendship'
string: '*'
string: 'createdOn DESC'
string: ''
string: ''
string: 'friendUID'
string: 'relationship'
string: "friendUID='"
string: "'"
string: "status='unconfirmed'"
string: 'users_friendship'
string: '*'
string: 'createdOn DESC'
string: ''
string: ''
string: 'userUID'
string: 'relationship'
string: "userUID='"
string: "'"
string: "friendUID='"
string: "'"
string: 'users_friendship'
string: '*'
string: ''
string: ''
string: ''

<b>scanning file: /var/www/an2google/trunk/modules/users/inc/relationships.inc.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	relationships between the current user, other users, friendships and roles
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: refModel - type of object [string]
comment: //arg: UID - UID of an object [string]
comment: //arg: relationship - between this object and a user [string]
comment: //arg: userUID - UID of the user related to this object [string]
comment: //returns: true if the given relationship exists, otherwise false [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //	get the user we want to know about
comment: //----------------------------------------------------------------------------------------------	
comment: //----------------------------------------------------------------------------------------------
comment: //	relationships of User object
comment: //----------------------------------------------------------------------------------------------
comment: // try load the object
comment: // check that we did
comment: // if the user is me! (permission to reset password, etc)
comment: //..........................................................................
comment: // if we're a friend of this user
comment: //TODO:
comment: // if we've made  a friend request to this user
comment: //TODO:
comment: // if we've made  a friend request to this user
comment: //TODO:
comment: //----------------------------------------------------------------------------------------------
comment: //	relationships of Friendship object
comment: //----------------------------------------------------------------------------------------------
string: 'modules/users/models/user.mod.php'
string: 'modules/users/models/friendship.mod.php'
string: 'modules/users/models/role.mod.php'
string: 'users_user'
string: 'self'
string: 'friendof'
string: 'friendreqto'
string: 'friendreqto'
string: 'users_friendship'

<b>scanning file: /var/www/an2google/trunk/modules/users/inc/install.inc.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	install script for Users module
comment: //--------------------------------------------------------------------------------------------------
comment: //+	reports are human-readable HTML, with script-readable HTML comments
comment: //--------------------------------------------------------------------------------------------------
comment: //|	install the Users module
comment: //--------------------------------------------------------------------------------------------------
comment: //returns: html report or false if not authorized [string][bool]
comment: //----------------------------------------------------------------------------------------------
comment: //	create or upgrade Users_Friendship table
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	import any records from previous friendships table
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	create or upgrade Users_Login table
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	create or upgrade Users_Role table
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	create or upgrade Users_User table
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	import any records from previous users table
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	done
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
comment: //|	discover if this module is installed
comment: //--------------------------------------------------------------------------------------------------
comment: //:	if installed correctly report will contain HTML comment &lt;!-- installed correctly --&gt;
comment: //returns: HTML installation status report [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	ensure the table which stores Friendship objects exists and is correct
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	ensure the table which stores Role objects exists and is correct
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	ensure the table which stores Login objects exists and is correct
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	ensure the table which stores User objects exists and is correct
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	done
comment: //----------------------------------------------------------------------------------------------
string: 'core/dbdriver/mysqladmin.dbd.php'
string: 'modules/users/models/friendship.mod.php'
string: 'modules/users/models/role.mod.php'
string: 'modules/users/models/user.mod.php'
string: 'modules/users/models/login.mod.php'
string: 'admin'
string: ''
string: 'friendships'
string: "&lt;b&gt;moved $count records from 'friendships' table.&lt;/b&gt;&lt;br/&gt;"
string: 'ofGroup'
string: 'role'
string: 'recordAlias'
string: 'alias'
string: 'users'
string: "&lt;b&gt;moved $count records from 'users' table.&lt;/b&gt;&lt;br/&gt;"
string: 'admin'
string: ''
string: '&lt;!-- table installed correctly --&gt;'
string: '&lt;!-- module installed correctly --&gt;'

<b>scanning file: /var/www/an2google/trunk/modules/users/inc/cron.inc.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	processes run regularly to keep things tidy
comment: //--------------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
comment: //|	ten minute cron
comment: //--------------------------------------------------------------------------------------------------
comment: //returns: HTML report of any actions taken [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	remove userlogin records if user has not been seen online for awhile
comment: //----------------------------------------------------------------------------------------------
comment: // TODO: make this a configurable setting
comment: //----------------------------------------------------------------------------------------------
comment: //	done
comment: //----------------------------------------------------------------------------------------------
string: 'modules/users/models/login.mod.php'
string: "&lt;h2&gt;users_cron_tenmins&lt;/h2&gt;\n"
string: "select * from Users_Login where lastseen &lt; '"
string: "'"
string: "(no inactive sessions)"
string: "Removed $count inactive sessions.&lt;br/&gt;"

<b>scanning file: /var/www/an2google/trunk/modules/users/inc/commonpass.inc.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //	make an array of common passwords people should not be allowd to use
comment: //-------------------------------------------------------------------------------------------------
comment: //	List is from a cracking dictionary I found on a forum some time back, probably out of date
comment: //	as new celebrities, TV shows, etc become popular.  Add to it as needed.
string: '000000 0000000 00000000'
string: '10sne1 1234qwer 123abc 1a2b3c 1p2o3i '
string: '1q2w3e 1qw23e 1sanjose 2welcome 4runner '
string: '007007 111111 121212 123123 123456 '
string: '131313 654321 666666 696969 888888 '
string: '1234567 8675309 12345678 21122112 99999999 '
string: '@#$%^&amp; abc123 aaaaaa abcdef abcdefg '
string: 'action adidas aggies aikman airhead '
string: 'alaska albert alicia alyssa amanda '
string: 'america andrea andrew angela angela1 '
string: 'animal animals anthony apples archie '
string: 'arctic arthur asdfgh ashley asshole '
string: 'august austin author avatar awesome '
string: 'babies badboy bailey banana bananas '
string: 'bandit barbara barbie barney basebal '
string: 'basket basketb basketba bastard batman '
string: 'beaner beatles beaver beavis bigbird '
string: 'bigdog bigfoot biology biteme blackie '
string: 'blaster blazer blondie blowme bond007 '
string: 'bonnie booboo booger bookit boomer '
string: 'boston bowling bradley brandi brandon '
string: 'brandy brasil braves brazil brenda '
string: 'broncos browns bubbles buddha buffalo '
string: 'buster butthead button buttons cowboy '
string: 'calvin camaro canada cancer carlos '
string: 'carrie casper cassie celtics center '
string: 'champs changeme changeme charles charlie '
string: 'cheese chelsea cheryl chester chevy1 '
string: 'chicago chicken chiefs chipper chrissy '
string: 'christ christop chucky cleaner clover '
string: 'coffee colleen compaq compute computer '
string: 'connie cookie coolman cooper copper '
string: 'cougar country cowboy cowboys cracker '
string: 'cricket curtis dragon dakota dallas '
string: 'daniel darwin defense denise dennis '
string: 'denver detroit dexter digger digital '
string: 'disney doctor doggie dolphin doobie '
string: 'dookie dorothy dragon dreams drizzt '
string: 'dustin dwight eagles edward elaine '
string: 'elwood emmitt espanol except falcon '
string: 'family farmer farming fender firebird '
string: 'fisher fishing flipper florida flower '
string: 'flowers fluffy flyers footbal football '
string: 'francis frankie freedom friday friend '
string: 'friends froggy frosty fuckyou fucker '
string: 'fuckme fuckyou gambit gandalf garden '
string: 'garfield garrett gemini george german '
string: 'giants ginger global goalie golden '
string: 'goldie golfer golfing goober gopher '
string: 'gordon grandma griffey groovy grover '
string: 'guitar gunner gymnast hacker hammer '
string: 'hamster hanson harley harvey hatton '
string: 'hawaii hawkeye hearts heather helpme '
string: 'hendrix herman hershey history hobbit '
string: 'hockey hockey1 honda1 hornets hotdog '
string: 'hotrod howard hunter hunting huskers '
string: 'iceman iguana internet ironman isabelle '
string: 'jsbach jackie jackson jaeger jaguar '
string: 'january jasmine jasper jeanne jeffrey '
string: 'jennifer jeremy jessica jessie jester '
string: 'jimbob johnny johnson jordan joseph '
string: 'joshua junebug junior justin kathryn '
string: 'killer killme kinder kitten kittens '
string: 'knight knights kombat kristen kristi '
string: 'kristin kristy krystal lakers lakota '
string: 'larson lauren lennon leslie lestat '
string: 'letmein letter library lindsay lindsey '
string: 'little lizard looney louise loveme '
string: 'maddock maddog maggie malibu marino '
string: 'marley marshal martha martin marvin '
string: 'master masters matthew maveric maxwell '
string: 'melissa merlin michael michell michelle '
string: 'mickey miller minnie mittens monday '
string: 'monkey monster montana morris mother '
string: 'muffin murphy mustang ncc1701 nascar '
string: 'natasha nathan nelson newton nicole '
string: 'nirvana nissan number1 october oliver '
string: 'online orange orlando pacers packard '
string: 'packer packers paladin pamela pantera '
string: 'panther parker passwor password patches '
string: 'patrick peaches peanut pebbles peewee '
string: 'penguin pentium people pepper petunia '
string: 'phillip picard pickle piglet please '
string: 'polaris pookie popcorn popeye porsche '
string: 'prince psycho puckett pumpkin puppies '
string: 'purple pyramid qwerty rabbit rachel '
string: 'racing raider raiders rainbow raistlin '
string: 'ranger raymond reader reading reality '
string: 'rebecca rebels reddog reddog redskin '
string: 'reebok reefer reggie retard rhonda '
string: 'richard ripper robbie robert rodman '
string: 'ronald rooster roping rosebud royals '
string: 'runner russel russell sammie sampler '
string: 'samson sanders sarah1 scarlett school '
string: 'science scooby scooter scotty secret '
string: 'sendit senior service shadow shadows '
string: 'shannon sharon shelly shirley shithead '
string: 'shooter shorty shotgun sidney sierra '
string: 'silver simple skater skeeter skidoo '
string: 'skiing skinny skippy slayer smiles '
string: 'smiley smokey snicker sniper snoopy '
string: 'snowbal soccer sonics spanish spanky '
string: 'sparky special speech speedy spider '
string: 'spirit sports spring sprite spunky '
string: 'squirt stacey stanley startrek steven '
string: 'stimpy strider student studly stupid '
string: 'success summer sunshine sunshin superman '
string: 'surfer sweetie sweets swimmer sydney '
string: 'system teachers tamara tanker tanner '
string: 'tardis taurus taylor tazman teacher '
string: 'tennis teresa tester theman theresa '
string: 'thomas thumper thunder tiffany tigers '
string: 'tigger timothy tinman tomcat tootsie '
string: 'tractor travis trevor trixie trouble '
string: 'trucks trumpet turtle tweety vampire '
string: 'vanessa victoria viking vikings violet '
string: 'volley volleyb voyager walleye warren '
string: 'warrior webster weezer welcome1 whales '
string: 'whateve wheels wicked wildcat william '
string: 'willie wilson windows winter wizard '
string: 'wolves woodland wrestle xanadu yamaha '
string: 'yankees yellow zaphod zombie zxcvbnm '
string: 'a12345 a1b2c3 a1b2c3d4 aaaaaa abc123 '
string: 'abcd1234 abcdef abcdefg abigail absolut '
string: 'access action active adidas adrian '
string: 'alaska albert alexande alexandr alexis '
string: 'alfred aliens alison allison alpha1 '
string: 'alpine amanda amanda1 amelie america7 '
string: 'anderson andrea andrew angela angels '
string: 'animal anthony apache apollo apollo13 '
string: 'apple1 apples archie ariane arizona '
string: 'arthur artist asdfgh asdfghjk asdfjkl '
string: 'asdfjkl; ashley asshole asterix athena '
string: 'attila august austin avalon awesome '
string: 'aylmer babylon5 badger bailey bamboo '
string: 'banana banane bandit barbara barney '
string: 'baseball basket basket basketba batman '
string: 'beagle beaner beanie beatles beautifu '
string: 'beaver beavis benjamin benoit benson '
string: 'bernard bernie bertha bigbird bigdog '
string: 'bigmac bigman bigred biology bird33 '
string: 'birdie biteme blazer blizzard blonde '
string: 'blondie blowfish bluebird bluesky bobcat '
string: 'bond007 bonjour bonnie booboo booger '
string: 'boogie boomer booster bootsie boston '
string: 'bradley brandon brandy braves brenda '
string: 'brewster bridge bridges bright brooke '
string: 'brutus bubba1 bubbles buffalo bulldog '
string: 'bullet bullshit business buster butler '
string: 'butthead button buttons byteme cactus '
string: 'caesar caitlin californ calvin camaro '
string: 'camera campbell camping canada canced '
string: 'canela cannon cannonda captain cardinal '
string: 'carlos carmen carole carolina caroline '
string: 'carrie cascade casper cassie castle '
string: 'catalog catfish cccccc celica celine '
string: 'center challeng champion chance chanel '
string: 'changeme chapman charity charles charlie '
string: 'charlie1 charlott cheese chelsea cherry '
string: 'cheryl chester1 chicago chicken chiquita '
string: 'chocolat chris1 christia christin christop '
string: 'christy church cinder claire clancy '
string: 'classroo claude claudia clipper cloclo '
string: 'cocacola coffee colleen college colorado '
string: 'coltrane columbia compaq compton computer '
string: 'concept connect connie conrad control '
string: 'cookie cookies cooper copper corona '
string: 'corrado corwin cosmos cougar cougars '
string: 'country courtney cowboy cowboys coyote '
string: 'cracker crawford creative cricket cruise '
string: 'crystal cuddles curtis cyclone cynthia '
string: 'cyrano dakota dallas dancer daniel '
string: 'danielle darren darwin database david1 '
string: 'daytek deadhead debbie december deedee '
string: 'deliver denali denise dennis depeche '
string: 'design detroit deutsch dexter diablo '
string: 'diamond dickhead digital digital1 dilbert '
string: 'direct1 director disney doctor dodger '
string: 'dodgers dogbert dollars dolphin dolphins '
string: 'dominic domino donald donkey doogie '
string: 'dookie dorothy dougie douglas dragon '
string: 'dragon1 dragonfl dreamer dreams duckie '
string: 'dundee e-mail eagle1 eagles easter '
string: 'eclipse edward eeyore einstein electric '
string: 'elephant elizabet elliot energy enigma '
string: 'entropy etoile eugene europe excalibu '
string: 'explorer export express falcon family '
string: 'farmer ferrari ferret fiction fireball '
string: 'firebird fireman fisher fishing flamingo '
string: 'fletch fletcher flight flipper florida '
string: 'flower flowers fluffy foobar football '
string: 'forest fountain foxtrot fozzie france '
string: 'francis francois franklin freak1 freddy '
string: 'frederic freedom french1 friday friend '
string: 'friends froggy front242 fucker fuckme '
string: 'fuckoff fuckyou fugazi future gabriel '
string: 'gabriell galaxy galileo gambit gandalf '
string: 'garden garfield garlic garnet gasman '
string: 'gateway gemini general genesis genius '
string: 'george georgia gerald giants gibson '
string: 'gilles ginger global goblue gocougs '
string: 'godzilla gofish goforit golden golfer '
string: 'goober gopher gordon grandma graphic '
string: 'grateful graymail greenday gregory gretchen '
string: 'gretzky groovy grover grumpy guinness '
string: 'guitar gunner h2opolo hacker hal9000 '
string: 'hammer hannah hansolo hanson happy1 '
string: 'happyday harley harold harrison harvey '
string: 'health heather hector hello1 helpme '
string: 'hendrix herbert herman hermes history '
string: 'hockey homebrew honda1 hootie horizon '
string: 'hornet horses hotdog houston howard '
string: 'hunter ib6ub9 icecream iceman iguana '
string: 'iloveyou imagine impala indian indiana '
string: 'indigo informix insane inside intern '
string: 'internet ireland ironman isabelle island '
string: 'italia jackie jackson jaguar jamaica '
string: 'james1 janice jasmin jasmine jason1 '
string: 'jasper jeanette jeanne jeffrey jenifer '
string: 'jennifer jenny1 jensen jeremy jessica '
string: 'jessie jesus1 jewels joanna john316 '
string: 'johnny johnson jonathan jordan jordan23 '
string: 'joseph joshua judith julian julie1 '
string: 'junior jupiter justice justin justin1 '
string: 'katherin kathleen kelly1 kelsey kennedy '
string: 'kenneth kermit kevin1 killer kimberly '
string: 'kingdom kingfish kitten12 kleenex knicks '
string: 'knight kramer kristen kristi kristin '
string: 'lacrosse laddie ladybug lakers larry1 '
string: 'lauren laurie ledzep legend leonard '
string: 'leslie lestat letmein library lincoln '
string: 'lindsay lindsey lionking liverpoo lizard '
string: 'logical london looney lorraine louise '
string: 'lovely loveme loveyou lucky1 macintos '
string: 'maddog madison maggie magnum mailer '
string: 'mailman majordom malcolm mantra marcel '
string: 'marcus margaret mariah marilyn marina '
string: 'marine mariposa market marlboro marley '
string: 'martin martin1 marvin maryjane master '
string: 'master1 matrix matthew maurice maverick '
string: 'maxime maxwell mayday mazda1 medical '
string: 'melanie melissa memory memphis mercedes '
string: 'mercury merlin metallic mexico michael '
string: 'michael. michel michele michelle mickey '
string: 'midnight midori mikael miller millie '
string: 'million minnie mirage miranda mirror '
string: 'mishka mission mitchell molly1 molson '
string: 'monday money1 monica monique monkey '
string: 'monopoly montana montreal moocow mookie '
string: 'moomoo morgan moroni morris mortimer '
string: 'mother mountain mouse1 mozart muffin '
string: 'murphy mustang napoleon nascar natasha '
string: 'nathan nautica ncc1701 ncc1701d ncc1701e '
string: 'ne1469 nebraska nellie nelson nemesis '
string: 'nesbitt netware network newcourt newpass '
string: 'newton newuser newyork nguyen nicarao '
string: 'nicholas nicole nikita nimrod niners '
string: 'nirvana nirvana1 nissan norman nothing '
string: 'notused nugget number9 oatmeal obiwan '
string: 'october oliver olivia olivier online '
string: 'orange oranges orchid oxford pacers '
string: 'pacific packard packer packers painter '
string: 'pamela pandora pantera panther parker '
string: 'parrot pascal passion passwd password password1 '
string: 'patches patricia patrick peaches peanut '
string: 'pearljam peewee penelope penguin pentium '
string: 'pepper petunia phantom philip phoenix '
string: 'phoenix1 picasso pickle picture pierce '
string: 'pierre piglet pinkfloy pirate pisces '
string: 'planet playboy player players please '
string: 'poiuyt police politics poohbear pookie '
string: 'pookie1 popcorn popeye porsche porsche9 '
string: 'porter portland praise preston prince '
string: 'princess promethe property protel psalms '
string: 'psycho public pumpkin punkin puppy123 '
string: 'purple pyramid python q1w2e3 quality '
string: 'quebec qwaszx qwerty qwerty12 rabbit '
string: 'racerx rachel racoon raiders rainbow '
string: 'rambo1 random ranger raptor raquel '
string: 'rascal raymond reality rebecca reddog '
string: 'redrum redwing remember republic research '
string: 'reynolds reznor rhonda richard robbie '
string: 'robert robert1 robinhoo robotech rocket '
string: 'ronald rosebud runner running russell '
string: 'sabrina safety sailing sailor salmon '
string: 'samantha sampson samson samuel sandra '
string: 'sanjose1 sapphire sarah1 saskia saturn '
string: 'savage scarlet scarlett school science '
string: 'scooby scooter scooter1 scorpio scorpion '
string: 'scotch scotty scruffy scuba1 seattle '
string: 'secret security septembe sergei service '
string: 'seven7 shadow shadow1 shalom shannon '
string: 'shanti sharon sheena sheila shelby '
string: 'shelley shelly sherry shirley shithead '
string: 'shorty shotgun sierra silver simple '
string: 'singer skeeter skidoo skiing skipper '
string: 'skippy slacker slayer smashing smiles '
string: 'smiley smiths smokey snapple snickers '
string: 'sniper snoopdog snoopy snowball snowman '
string: 'snuffy soccer soccer1 softball soleil '
string: 'sophie spanky sparky sparrow special '
string: 'speedo speedy spencer spider spitfire '
string: 'spooky sports spring sprite spunky '
string: 'ssssss stacey stanley star69 stargate '
string: 'startrek starwars station stealth steele '
string: 'steelers stella stephani stephen steven '
string: 'stever stimpy sting1 stingray stinky '
string: 'stormy strawber stuart student stupid '
string: 'success summer sunbird sundance sunday '
string: 'sunflowe sunny1 sunrise sunset sunshine '
string: 'superman support surfer suzanne suzuki '
string: 'sweetie sweetpea sweety swimming sydney '
string: 'sylvia sylvie symbol system t-bone '
string: 'tacobell tamara target tarzan tattoo '
string: 'taurus taylor teacher techno teddy1 '
string: 'telecom temporal tennis tequila teresa '
string: 'test123 tester testing testtest theatre '
string: 'theboss theking theresa thomas thumper '
string: 'thunder thunderb thursday thx1138 tiffany '
string: 'tigers tigger timber timothy tinker '
string: 'tintin tomcat tootsie topcat topgun '
string: 'topher toronto toyota training travel '
string: 'trebor trevor tricia trident tristan '
string: 'trixie trouble trumpet tucker tuesday '
string: 'turtle tweety undead unicorn utopia '
string: 'valentin valerie valhalla vanilla velvet '
string: 'vermont veronica victor victoria victory '
string: 'viking vincent violet viper1 virginia '
string: 'vision volley voodoo walker walter '
string: 'wanker warcraft warner warren warrior '
string: 'warriors watson weasel webmaste webster '
string: 'welcome wesley western whatever wheeling '
string: 'wheels whisky whitney wilbur william '
string: 'williams willie willow wilson windsurf '
string: 'winner winnie winston winter wisdom '
string: 'wizard wolfman wolfgang wolverin wolves '
string: 'wombat wonder wrangler wright xanadu '
string: 'xavier xcountry xfiles yamaha yankees '
string: 'yellow yomama yvonne zachary zapata '
string: 'zaphod zenith zephyr zeppelin zhongguo '
string: 'zombie zxcvbnm'
string: ' '

<b>scanning file: /var/www/an2google/trunk/modules/users/events/comments_added.on.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //	fired when a comment is added
comment: //-------------------------------------------------------------------------------------------------
comment: //arg: refModule - name of module to which a comment was attached
comment: //arg: refUID - UID of object to which comment was attached
comment: //arg: commentUID - UID of the new comment
comment: //arg: comment - text/html of comment
comment: //----------------------------------------------------------------------------------------------
comment: //	send notification to user
comment: //----------------------------------------------------------------------------------------------
comment: /* TODO: re-add notification
	$ext = $model-&gt;extArray();
	$link = "&lt;a href='" . $ext['viewUrl'] . "#comment" . $commentUID ."'&gt;wall&lt;/a&gt;";
	$title = $user-&gt;getNameLink() . " commented on " . $model-&gt;getName() . "'s " . $link;
	$url = $ext['viewUrl'] . '#comment' . $commentUID;
	$imgUID = '';
	$imgUID = imgGetDefaultUID('projects', $refUID);

	if ($user-&gt;UID == $refUID) 
		{ $title = $user-&gt;getNameLink() . " commented on their own " . $link; }

	notifyFriends($refUID, $commentUID, 
				  $user-&gt;getName(), $user-&gt;getUrl(),
				  $title, $comment, $url, $imgUID );


	$title = $user-&gt;getNameLink() . " commented on your " . $link;
	if ($user-&gt;UID == $refUID) 
		{ $title = "You commented on their own " . $link; }

	notifyUser($refUID, $commentUID, 
				  $user-&gt;getName(), $user-&gt;getUrl(),
				  $title, $comment, $url, $imgUID );

	return true;
	*/
string: 'modules/users/models/user.mod.php'
string: 'refModule'
string: 'refUID'
string: 'commentUID'
string: 'comment'
string: 'refModule'
string: 'users'
string: 'users_user'
string: 'refUID'
string: 'refUID'

<b>scanning file: /var/www/an2google/trunk/modules/users/events/callbacks.inc.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	callbacks allow modules to interact with being necessarily dependant on one another
comment: //--------------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
comment: //	when a comment is posted
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	send notifications to project members
comment: //----------------------------------------------------------------------------------------------
string: 'modules/users/models/user.mod.php'
string: 'users'
string: "&lt;a href='"
string: 'viewUrl'
string: "#comment"
string: "'&gt;wall&lt;/a&gt;"
string: " commented on "
string: "'s "
string: 'viewUrl'
string: '#comment'
string: ''
string: 'projects'
string: " commented on their own "
string: " commented on your "
string: "You commented on their own "

<b>scanning file: /var/www/an2google/trunk/modules/users/actions/usersearch.act.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //	iframe to search users (for adding to mail, projects, friendships, etc)
comment: //-------------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	check that the user is logged in
comment: //---------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	display search form and any results
comment: //---------------------------------------------------------------------------------------------
string: 'public'
string: 'banned'
string: ''
string: 'q'
string: 'q'
string: 'modules/users/actions/usersearch.if.page.php'
string: 'query'

<b>scanning file: /var/www/an2google/trunk/modules/users/actions/updatepermissions.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	update permissions in user records from module.xml.php files
comment: //--------------------------------------------------------------------------------------------------
comment: //if ('admin' != $user-&gt;role) { $page-&gt;do403(); }
string: 'sMessage'
string: "User permissions updated from module configuration files.&lt;br/&gt;\n"
string: 'admin/'

<b>scanning file: /var/www/an2google/trunk/modules/users/actions/tinybox.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	tiny little iframe to show a users details in chat
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/users/actions/tinybox.if.page.php'
string: 'userUID'

<b>scanning file: /var/www/an2google/trunk/modules/users/actions/temp.act.php</b>
string: "12345
abc123
password
passwd
123456
newpass
notused
Hockey
internet
asshole
Maddock
12345678
newuser
computer
Internet
Mickey
qwerty
fiction
Cowboys
Jordan
Hatton
test
Michael
ou812
orange
1234
Beavis
123
tigger
Soccer
shadow
Purple
Sports
dragon
michael
wheeling
mustang
Monkey
Qwerty
School
Snoopy
Vikings
jennifer
money
Justin
mickey
0246
a1b2c3
chris
david
foobar
Robert
buster
harley
jordan
stupid
*
apple
fred
123abc
Amanda
Dakota
summer
sunshine
andrew
hello
maggie
monday
pascal
patrick
Dallas
Jessica
Nicole
Sendit
Smokey
baseball
daniel
diamond
joshua
michelle
mike
silver
1q2w3e
Friends
George
Shadow
Summer
bandit
coffee
falcon
fuckyou
pepper
richard
thomas
undead
!@#$%
Andrew
Buster
Cowboy
Eagles
Elwood
Master
Nathan
changeme
charlie
golf
green
linda
merlin
monkey
nite
secret
soccer
steve
1234567
Apples
Dragon
Flower
Mustang
Pepper
george
guest
hockey
james
koko
matthew
pookie
robert
xxx
Dolphin
Killer
Miller
Packers
Tigger
alex
canada
john
master
Chicago
Kitten
Polaris
Spanky
Tennis
Thomas
Tweety
hammer
letmein
magic
murphy
scooter
service
snoopy
sophie
thx1138
tiger
Ashley
Basket
Ginger
Nirvana
Teacher
Yellow
blue
dave
hunter
sarah
thursday
welcome
Bandit
Volley
aaaaaa
ashley
bear
boomer
calvin
dallas
friday
happy
jason
madison
martin
mother
nicole
purple
ranger
123go
Airhead
Braves
Sparky
angela
brandy
cindy
dakota
donald
football
ncc1701
shannon
soleil
taylor
tuesday
Abcdef
August
Footbal
Heather
Johnson
Maggie
Matthew
Michelle
Monday
Pookie
Rabbit
Richard
Smiley
amanda
anthony
camaro
carmen
cowboy
genesis
jesus
joseph
justin
miller
ncc1701d
pamela
picture
princess
rabbit
rocket
sierra
steven
success
tennis
victoria
willow
Abcdefg
Bubba
Charlie
Compute
Computer
Fuckyou
Hammer
Jeremy
Library
Password
Runner
Scooter
Shorty
Silver
Taylor
Tigers
Travis
Viper
digital
duke
freedom
gandalf
ginger
heather
iloveyou
jessica
killer
lizard
loser
mark
monica
oscar
peanut
pentium
peter
phoenix
piglet
rainbow
runner
sam
saturn
scott
skippy
startrek
temp
111111
123123
2welcome
Basebal
Batman
Brandy
Cassie
Dustin
Fishing
Harley
Hunter
Orlando
Peaches
Scotty
Steven
Voyager
andrea
ass
avalon
batman
brandon
bubba
casey
eagle
frog1
fuckme
info
love
marie
misty
natasha
newyork
nss
poohbear
rachel
turtle
walter
wizard
00000000
Daniel
Friday
Hornets
Joshua
Online
Rodman
Science
andy
asdf
august
austin
beavis
brenda
brian
butthead
charles
cheese
doctor
dolphin
flower
jonathan
junior
knight
marley
maverick
molson
morgan
mouse
nathan
nissan
rebecca
shalom
smile
sparky
stephen
whatever
william
696969
Anthony
Casper
Helpme
Jessie
Mother
Pebbles
Pentium
Secret
Sonics
Viking
Wolves
access
alpha
angel
ath
banane
bob
bond007
booger
boris
chicken
cookie
elephant
elvis
emily
eric
france
gizmo
goober
horses
island
jeffrey
jerry
joe
jupiter
justice
lisa
lucky
mindy
missy
muffin
music
protel
rose
sandy
sharon
snake
spider
spring
test1
tommy
toyota
vincent
wqsb
7777
8675309
Barney
Bowling
Camaro
Casio
Cookie
Froggy
Golfer
Junior
Knights
Lakers
Melissa
Patrick
Rachel
Raiders
Reggie
Shelly
Shithead
Speedy
Thunder
Windows
albert
alexande
america7
banana
barbara
barney
billy
biteme
black
chelsea
claire
connie
debbie
delta
dennis
eeyore
fishing
fucker
helpme
honda
indiana
jackson
jasmine
karen
kevin
lestat
logan
louis
louise
micro
mitchell
nirvana
none
paul
pepsi
perry
phantom
pierre
rascal
red
reddog
roger
sanjose1
simon
star
superman
tom
topgun
wilson
654321
Aikman
Animal
Avatar
Basketb
Gandalf
Hacker
Hendrix
Hunting
Iceman
Leslie
Letmein
Scooby
Snicker
System
Tazman
Tootsie
Turtle
abcd1234
adg
amber
anna
annie
arthur
benjamin
bill
boston
braves
buddy
cgj
control
coyote
daisy
dog
dorothy
douglas
edward
faith
family
fish
fisher
ford
freak1
friend
grant
iceman
jack
jeremy
jim
library
marcel
molly
mountain
nat
nicarao
olivia
pat
pearljam
pmc
ppp
prince
ryan
salmon
school
skeeter
special
spencer
stinky
sunflowe
teacher
test123
tony
travel
viper
wally
winston
winter
wolf
yellow
zephyr
ziggy
!@#$%^
1928
2112
90210
Arthur
Biteme
Blackie
Boomer
Bubbles
Carrie
Charles
Denise
Fender
Fluffy
Fucker
Fuckme
Golfing
Intel
Jasmine
Joseph
Knight
Lindsey
Loser
Orange
Peanut
People
Porsche
Rebecca
Rhonda
Sanders
Speech
Tanner
Teresa
Turbo
Volleyb
Wrestle
alaska
apples
asdfgh
bigdog
boss
casper
cat
chapman
chocolat
christin
classroo
cocacola
coke
cougar
cricket
crystal
danny
david1
dean
disney
einstein
elizabet
felix
fox
frank
giants
grace
gregory
hannah
hendrix
hola
howard
jake
janice
jesus1
julian
kelsey
kitten12
lacrosse
lakers
larry
leslie
marina
matt
melissa
millie
montana
moose
morris
orion
pantera
paris
piano
pizza
please
popcorn
q1w2e3
radio
sales
sammy
shelly
shithead
stanley
steelers
stimpy
student
susan
sydney
tammy
testtest
texas
thunder
tweety
victory
virginia
willie
willy
win95
zapata
1
Alaska
Alicia
Bailey
Banana
Beaner
Bigdog
Blazer
Blondie
Brandon
Center
Cheese
Chicken
Chris
Compaq
Dreams
Falcon
Family
Fisher
Flyers
Friend
FuckYou
Global
Gopher
Guitar
Gymnast
Hearts
Huskers
Kinder
Larson
Lestat
Lindsay
Minnie
Muffin
Pamela
Panther
Picard
Pyramid
Raider
Rainbow
Reddog
Sampler
Shannon
Shotgun
Sierra
Skeeter
Spanish
Stacey
Student
Trixie
Xanadu
Yankees
Zombie
a12345
a1b2c3d4
abc
adidas
alexis
angie
april
asdfjkl;
baby
betty
bilbo
bonnie
booboo
bradley
brooke
caitlin
carrie
chip
chris1
christy
cinder
claude
claudia
colorado
cowboys
curtis
daytek
donna
duck
dusty
eagle1
enigma
francis
francois
franklin
froggy
gabriel
ghost
gopher
grover
happy1
helen
henry
honey
horse
house
jackie
jean
jenny
joey
kelly
laura
lauren
lincoln
loveme
margaret
mary
max
mercedes
mercury
michel
midnight
mine
mirror
mozart
nicholas
nothing
oliver
packard
pass
peace
phil
porsche
psycho
pumpkin
punkin
puppy123
randy
remember
robin
rosebud
sadie
sampson
samson
samuel
simple
smiley
snowball
spike
starwars
stever
storm
sun
support
suzanne
sweetie
sweetpea
system
tamara
tech
teresa
terry
theresa
thumper
victor
vision
water
winner
xavier
yamaha
121212
ABC123
America
Arctic
Austin
Bonnie
Cheryl
Dorothy
Drizzt
Emmitt
Farmer
Flipper
Goldie
Goober
Griffey
Groovy
Hotdog
Jackson
Jeffrey
Jester
Jimbo
Johnny
Kristi
Lauren
Lizard
Louise
Lover
Montana
Murphy
NCC1701
PPP
Pacers
Packer
Patches
Peter
RedDog
Reebok
Rosebud
Sango
Shadows
Sharon
Skippy
Stanley
Startrek
Sunshin
Swimmer
TEACHERS
Tinman
Wildcat
William
Willie
Wilson
Yamaha
aaron
abigail
alice
allen
amour
animal
archie
bailey
basf
basketba
beaver
bingo
blazer
blonde
bullshit
business
caroline
cfj
chicago
clancy
class
cloclo
colleen
columbia
connect
country
demo
dixie
domino
donkey
dreamer
e
eagles
eddie
farmer
fgh
fire
flipper
flowers
floyd
fluffy
freddy
friends
frodo
frog
garden
global
golfer
grumpy
hansolo
hawk
health
heidi
help
holly
hoops
iguana
indigo
italia
jane
jasper
jessie
jewels
johnny
joker
judith
katherin
kids
kingfish
kristi
laurie
legend
lindsay
london
loveyou
lucy
mac
marc
marilyn
market
marlboro
marty
maryjane
matrix
maxwell
nancy
nascar
nelson
network
newcourt
newton
packers
panther
papa
parker
patricia
penguin
pickle
porsche9
rain
raven
robbie
robert1
rocky
roses
sabrina
sailing
sandra
science
scotty
seven
shoes
smiles
smokey
snickers
speedy
spooky
stephani
strat
stuart
sunny
sunset
telecom
temporal
tigers
time
tinker
tomcat
trebor
tristan
truck
video
viper1
visa
volvo
warren
weasel
webmaste
white
woody
xanadu
zaphod
!@#$%^&amp;*
007
1022
13579
4444
666666
6969
Adidas
Asdfgh
Asshole
Awesome
Biology
Bond007
Booboo
Bradley
Buffalo
Calvin
Canada
Celtics
Chester
Colleen
Connie
Cooper
Cracker
Digital
Disney
Doobie
Dream
Dwight
Eatme
Farming
Florida
Flowers
Gizmo
Goalie
Golden
Gunner
Harvey
Homer
Jasper
Kristy
Krystal
Laser
Maddog
Marino
Marvin
Natasha
Nelson
October
Parker
Passwor
Petunia
Prince
Pumpkin
Qwert
Ranger
Sammie
Senior
Shirley
Slayer
Spunky
Tandy
Trouble
Vette
Warren
Wheels
Winter
Zxcvbnm
_
absolut
adam
adrian
alexandr
allo
alpine
anderson
athena
badger
beagle
beatles
belle
bitch
bluebird
bonjour
bulldog
bunny
californ
captain
carol
carole
cedic
chanel
chester1
chloe
coco
coltrane
compaq
compton
cooper
corona
cyclone
dancer
darwin
dawn
denise
derek
diablo
digital1
direct1
dodger
doogie
dookie
doom
dragon1
dreams
duckie
dylan
ellen
export
ferrari
ferret
firebird
forest
fuckoff
garfield
gateway
gold
goofy
grateful
guitar
gunner
heart
herbert
herman
hermes
history
houston
inside
ironman
isis
italy
jasmin
jeanne
julie
kathleen
keith
kermit
kimberly
king
koala
kristen
kristin
laser
leonard
lionking
macha
macintos
maddog
major
maxime
melanie
mexico
mikey
monet
monique
moon
mouse1
napoleon
ne1469
nellie
niners
olive
one
online
oxford
pacific
painter
panda
pandora
peaches
peewee
penelope
picasso
plato
pluto
police
popeye
portland
power
random
raymond
reality
renee
royal
running
salut
samantha
santa
sassy
scarlet
scorpio
scout
sergei
seven7
sexy
shark
sheba
sheena
sheila
shelby
simba
singer
skiing
snow
spanky
stargate
steele
stella
sunday
sunrise
sylvia
tara
tasha
techno
timothy
toby
today
training
trouble
tyler
unicorn
violet
walker
wayne
wendy
whisky
windsurf
winnie
wolves
xfiles
zebra
zxcvbnm
000000
007007
10sne1
1313
131313
1701d
1a2b3c
4runner
54321
Aaaaaa
Amiga
Angela
Animals
Archie
Badboy
Balls
Beaver
BigBird
Boner
Booger
Boston
Brandi
Brazil
Brenda
Button
COWBOY
Carol
Chiefs
Chipper
Chrissy
Coffee
Cougar
Country
Curtis
DRAGON
Dennis
Digger
Doctor
Firebird
Frankie
Gambit
Gemini
German
Giants
Grandma
Grover
Hanson
Hawkeye
Heidi
Hobbit
Hotrod
Howard
Iguana
Ironman
JSBach
Jackie
January
Jennifer
Joker
Lakota
Looney
Malibu
Masters
Michell
Mikey
Monster
OU812
Oliver
Paladin
Phillip
Pickle
Please
Psycho
Puppies
Racing
Rasta
Reality
Renee
Rosie
Russell
Skiing
Snowbal
Spider
Spring
Squirt
Studly
Stupid
Surfer
Sweets
Sydney
Tester
Thumper
Timothy
Violet
Walleye
Webster
Wizard
Zaphod
Zorro
Zxcvb
aaa
abcde
abcdefg
acura
alex1
allison
amy
anne
apache
apollo
apollo13
ariel
artist
asdfg
asdfjkl
attila
babylon5
bamboo
basket
beaner
bears
beer
benny
bernard
bertha
bigbird
bigred
bird33
birdie
blizzard
bluesky
bobby
bootsie
brewster
bright
bruce
brutus
bubba1
bubbles
buck
buffalo
butler
buzz
byteme
cactus
camera
candy
canon
cassie
catalog
cats
celica
celine
cfi
challeng
champion
cheryl
chico
christia
chuck
clark
college
conrad
cool
copper
courtney
craig
crapp
crawford
creative
crow
cruise
dance
danielle
darren
database
deadhead
december
deedee
deliver
detroit
dilbert
doc
dogbert
dominic
elsie
enter
entropy
etoile
europe
explorer
fireman
fish1
flamingo
flash
fletcher
flip
foxtrot
french1
gabriell
gaby
galaxy
galileo
garlic
gasman
gator
gemini
general
gerald
gilles
go
goforit
golden
gone
graymail
greenday
greg
gretzky
hacker
hal9000
harold
harrison
harry
harvey
hector
hell
home
homer
hootie
hotdog
ib6ub9
icecream
idiot
imagine
indian
insane
intern
ireland
irish
isabelle
jacob
jaguar
jason1
jenifer
jenni
jenny1
jensen
john316
judy
julie1
kelly1
kennedy
kevin1
kim
knicks
lady
lee
leon
lindsey
ljf
logical
lucky1
lynn
majordom
mariah
marine
mario
mariposa
martin1
math
maurice
me
memphis
metal
michael.
michele
minnie
mirage
mitch
modem
mom
moocow
ncc1701e
nebraska
nemesis
netware
news
nguyen
number9
open
opus
patches
penny
pete
petey
phish
photo
pierce
pomme
porter
psalms
puppy
pyramid
python
quality
qwaszx
qwert
raiders
raquel
robotech
ronald
rosie
russell
ruy
savage
scotch
scruffy
sean
seattle
security
shadow1
shanti
shirley
shorty
shotgun
skipper
slayer
smashing
snapple
sniper
snoopdog
snowman
sparrow
sports
sprite
spunky
stacey
star69
start
station
stealth
sunny1
super
surfer
target
taurus
teddy
teddy1
tester
testing
theboss
thunderb
tim
topcat
topher
trevor
tricia
trixie
tucker
vader
valerie
veronica
viking
voodoo
warcraft
warner
warrior
watson
webster
wesley
western
wheels
wilbur
williams
wisdom
wolf1
wolfgang
wrangler
xcountry
yankees
zachary
zeus
zombie
zorro
!@#$%^&amp;
0007
0249
1225
1234qwer
14430
1951
1p2o3i
1qw23e
1sanjose
21122112
2222
369
5252
5555
5683
777
80486
888888
911
92072
99999999
@#$%^&amp;
Action
Aggies
Albert
Alyssa
Andrea
Angela1
Author
Babies
Bananas
Barbara
Barbie
Basketba
Bastard
Beatles
Bigfoot
Blaster
Blowme
Bookit
Brasil
Broncos
Browns
Buddha
Butthead
Buttons
Cancer
Carlos
Champs
ChangeMe
Changeme
Chelsea
Chevy
Chevy1
Christ
Christop
Chucky
Cindi
Cleaner
Clover
Coolman
Copper
Cricket
Darwin
Death
Defense
Denver
Detroit
Dexter
Doggie
Doggy
Dookie
Drums
Edward
Elaine
Elvis
Espanol
Except
Football
Francis
Freedom
Frosty
Fubar
Garden
Garfield
Garrett
Gordon
Hamster
Hawaii
Hello
Herman
Hershey
History
Hockey1
Honda1
Isabelle
Jaeger
Jaguar
Jeanne
Jimbob
Junebug
Kathryn
Kayla
Killme
Kittens
Kombat
Kristen
Kristin
Lennon
Letter
Light
Little
Loveme
Marley
Marshal
Martha
Martin
Maveric
Maxwell
Merlin
Mittens
Morris
Nascar
Newton
Nissan
Number1
Packard
Pantera
Peewee
Penguin
Piglet
Popcorn
Popeye
Puckett
Raistlin
Raymond
Reader
Reading
Rebels
Redskin
Reefer
Retard
Ripper
Robbie
Ronald
Rooster
Roping
Royals
Russel
Samson
Sarah1
Scarlett
Service
Shooter
Sidney
Simple
Skater
Skidoo
Skinny
Smiles
Sniper
Special
Spirit
Sprite
Stimpy
Strider
Success
SunShine
Superman
Susan
Sweetie
Tamara
Tanker
Tardis
Tasha
Taurus
Theman
Theresa
Tiffany
Tomcat
Tractor
Trevor
Trucks
Trumpet
Vampire
Vanessa
Victoria
Warez
Warrior
Weezer
Welcome1
Whales
Whateve
Wicked
Willy
Woodland
Ziggy
a
abby
abcd
abcdef
action
active
advil
aeh
alfred
aliens
alison
alpha1
amanda1
amelie
andre
angels
angus
apple1
ariane
arizona
asdfghjk
aspen
asterix
awesome
aylmer
bach
barry
basil
baskeT
beanie
beautifu
benoit
benson
bernie
bfi
bigmac
bigman
binky
biology
bird
blondie
blowfish
bmw
bobcat
boogie
booster
boots
bozo
bridge
bridges
buffy
bull
bullet
butch
button
buttons
caesar
campbell
camping
canced
canela
cannon
cannonda
cardinal
carl
carlos
carolina
cascade
castle
catfish
cccccc
center
cesar
chance
chaos
charity
charlie1
charlott
cherry
chevy
china
chiquita
christop
church
clipper
cobra
concept
cookies
corrado
corwin
cosmos
cougars
cracker
cuddles
cutie
cynthia
cyrano
daddy
dan
dasha
dead
denali
depeche
design
deutsch
dexter
dgj
diana
diane
dickhead
director
dirk
dodgers
dollars
dolphins
don
doom2
doug
dougie
dragonfl
dude
dundee
e-mail
easter
eclipse
electric
elliot
energy
eugene
excalibu
express
fiona
fireball
first
fletch
flight
florida
fool
fountain
fozzie
frederic
frogs
front242
fugazi
fun
future
gambit
garnet
gary
genius
georgia
gibson
glenn
goat
goblue
gocougs
godzilla
gofish
gordon
grandma
graphic
gray
gretchen
groovy
guess
guido
guinness
h2opolo
hanna
hanson
happyday
hazel
hello1
homebrew
honda1
horizon
hornet
image
impala
informix
irene
isaac
jamaica
james1
jan
japan
jared
jazz
jeanette
jeff
jimbo
jkm
joanna
joel
johnson
jojo
jordan23
josh
josie
julia
justin1
kathy
katie
kenneth
khan
kingdom
kitty
kleenex
kramer
laddie
ladybug
lamer
larry1
law
ledzep
light
liverpoo
lloyd
looney
lorraine
lovely
lucas
lulu
magnum
mailer
mailman
malcolm
mantra
marcus
maria
mars
marvin
master1
mayday
mazda1
medical
megan
memory
meow
metallic
midori
mikael
mike1
miki
miles
million
mimi
minou
miranda
misha
mishka
mission
molly1
money1
monopoly
montreal
mookie
moomoo
moroni
mortimer
naomi
nautica
nesbitt
new
nick
niki
nikita
nimrod
nirvana1
norman
nugget
nurse
oatmeal
obiwan
october
olivier
oranges
orchid
pacers
packer
parrot
passion
paula
pearl
pedro
peggy
percy
petunia
philip
phoenix1
pinkfloy
pirate
pisces
planet
play
playboy
player
players
poiuyt
politics
polo
pookie1
praise
preston
prof
promethe
property
public
quebec
quest
qwerty12
racerx
racoon
rambo1
raptor
redrum
redwing
republic
research
reynolds
reznor
rhonda
ricky
river
robinhoo
rock
roman
roxy
roy
ruby
rufus
rugby
rusty
ruth
rux
safety
sailor
sally
sapphire
sarah1
sasha
saskia
sbdc
scarlett
scooby
scooter1
scorpion
scuba1
septembe
shawn
shelley
sherry
shit
skidoo
slacker
smiths
snuffy
soccer1
softball
sonny
space
spain
speedo
spitfire
ssssss
steph
sting1
stingray
stormy
strawber
sugar
sunbird
sundance
supra
surf
suzuki
sweety
swimming
sylvie
symbol
t-bone
tacobell
taffy
tango
tanya
tarzan
tattoo
tequila
test2
theatre
theking
tiffany
tigre
timber
tina
tintin
tootsie
toronto
tracy
trek
trident
trumpet
turbo
twins
user1
utopia
valentin
valhalla
vanilla
velvet
venus
vermont
vicky
volley
wanker
warriors
whitney
wolfMan
wolverin
wombat
wonder
wright
xxxx
yoda
yomama
young
yvonne
zenith
zeppelin
zhongguo
"
string: "\n"
string: ' '
string: ' '
string: "\t\t . '"
string: " "
string: "'&lt;br/&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/users/actions/signup.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	page for signing up users
comment: //--------------------------------------------------------------------------------------------------
comment: //TODO: tidy this up, add settings and permissions appropriate to this
comment: //----------------------------------------------------------------------------------------------
comment: //	form variables
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	get form values from POST
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	tests
comment: //----------------------------------------------------------------------------------------------
comment: // basic tests
comment: // check if user is already registered
comment: // check that school exists
comment: //--------------------------------------------------------------------------------------
comment: //	create the account
comment: //--------------------------------------------------------------------------------------
comment: //authUpdatePermissions();
comment: //--------------------------------------------------------------------------------------
comment: //	sign user in
comment: //--------------------------------------------------------------------------------------
comment: // show user his profile
comment: //--------------------------------------------------------------------------------------
comment: //	not enough info yet
comment: //--------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	show page
comment: //----------------------------------------------------------------------------------------------
string: 'UID'
string: 'school'
string: '261390791197222710'
string: 'grade'
string: '12'
string: 'firstname'
string: ''
string: 'surname'
string: ''
string: 'username'
string: ''
string: 'password'
string: ''
string: 'lang'
string: 'en'
string: 'pass1'
string: ''
string: 'pass2'
string: ''
string: ''
string: 'action'
string: 'userSignup'
string: 'action'
string: 'pass1'
string: 'pass2'
string: "[*] Passwords do not match.&lt;br/&gt;\n"
string: 'pass1'
string: "[*] Please choose a password of more than four characters.&lt;br/&gt;\n"
string: 'username'
string: "[*] Please choose a username of four or more characters.&lt;br/&gt;\n"
string: 'surname'
string: "[*] Please add your surname.&lt;br/&gt;\n"
string: 'firstname'
string: "[*] Please add your first name.&lt;br/&gt;\n"
string: "select * from Users_User"
string: " where lower(username)='"
string: 'username'
string: "'"
string: "[*] The username &lt;i&gt;"
string: 'username'
string: "&lt;/i&gt; has already been "
string: "registered, please choose another.&lt;br/&gt;\n"
string: 'schools_school'
string: 'school'
string: "[*] Please choose a school from the list.&lt;br/&gt;\n"
string: ''
string: 'Creating your account...'
string: 'ok'
string: 'school'
string: 'student'
string: 'grade'
string: 'firstname'
string: 'surname'
string: 'username'
string: 'pass1'
string: 'en'
string: ''
string: ''
string: 'admin'
string: 'You are now logged in.'
string: 'ok'
string: 'users/profile/'
string: "&lt;b&gt;Before you continue:&lt;/b&gt;&lt;br/&gt;\n"
string: "&lt;br/&gt;&lt;br/&gt;\n"
string: "&lt;font color='red'&gt;"
string: "&lt;/font&gt;"
string: 'bad'
string: 'modules/users/actions/signup.page.php'

<b>scanning file: /var/www/an2google/trunk/modules/users/actions/saverole.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	save changes to an Role object
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check permissions and POST variables
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	load and update the object
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check that object was saved and redirect
comment: //----------------------------------------------------------------------------------------------
string: 'modules/users/models/role.mod.php'
string: 'action'
string: 'action not specified'
string: 'saveRole'
string: 'action'
string: 'action not supported'
string: 'UID'
string: 'UID not POSTed'
string: 'UID'
string: 'users'
string: 'users_role'
string: 'edit'
string: 'You are not authorized to edit this Role.'
string: "could not load Role $UID"
string: 'name'
string: 'description'
string: 'permissions'
string: ''
string: 'New Role&lt;br/&gt;'
string: 'Could not save Role:&lt;br/&gt;'
string: 'return'
string: 'return'
string: '/users/showrole/'

<b>scanning file: /var/www/an2google/trunk/modules/users/actions/saveprofile.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	update a user profile
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check POST vars and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: more rigorous, standard permissions
comment: //----------------------------------------------------------------------------------------------
comment: //	if user has permissions
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------
comment: // birthyear is a special case, check it's a 4 digit number
comment: //--------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	send notification to users and their friends
comment: //----------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	redirect back to profile
comment: //------------------------------------------------------------------------------------------
string: 'modules/users/models/user.mod.php'
string: 'action'
string: 'Action not specified.'
string: 'saveProfile'
string: 'action'
string: 'Action not supported.'
string: 'UID'
string: 'User not specified (UID).'
string: 'UID'
string: 'Unkonw user.'
string: 'UID'
string: 'admin'
string: 'Upi cannot edit this profile'
string: ''
string: ''
string: 'tel'
string: 'email'
string: "&lt;b&gt;$field:&lt;/b&gt; "
string: "&lt;br/&gt;\n"
string: 'birthyear'
string: 'birthyear'
string: 'birthyear'
string: 'birthyear'
string: ''
string: ''
string: 'Profile updated.'
string: 'ok'
string: 'Could not update profile: '
string: 'bad'
string: ''
string: "'s profile has changed."
string: " has updated their profile."
string: '/users/profile/'
string: 'users'
string: 'users_user'
string: 'return'
string: 'return'
string: 'users/profile/'

<b>scanning file: /var/www/an2google/trunk/modules/users/actions/save.act.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //*	save changes to a Users_User object
comment: //-------------------------------------------------------------------------------------------------
comment: //	Permissions: a user may save changes to their own forename, surname, password, profile and 
comment: //	language.  Admins may change most other fields.
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	if admin editing any record
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	if non-admin editing own record
comment: //----------------------------------------------------------------------------------------------
string: 'action'
string: 'Action not specified.'
string: 'saveUserRecord'
string: 'action'
string: 'Action not supported.'
string: 'UID'
string: 'UID not POSTed.'
string: 'UID'
string: 'User not found.'
string: 'admin'
string: 'ogGroup'
string: 'role'
string: 'school'
string: 'grade'
string: 'firstname'
string: 'surname'
string: 'username'
string: 'password'
string: 'lang'
string: ''
string: 'User account updated.'
string: 'ok'
string: 'bad'
string: 'return'
string: 'return'
string: 'users/list/'
string: 'UID'
string: 'admin'
string: 'UID'
string: "Could not load User "
string: 'firstname'
string: 'surname'
string: 'lang'
string: ''
string: 'Your account has been updated.'
string: 'ok'
string: 'bad'
string: 'return'
string: 'return'
string: 'users/profile/'

<b>scanning file: /var/www/an2google/trunk/modules/users/actions/removefriend.act.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //*	remove a user from your friend list
comment: //-------------------------------------------------------------------------------------------------
comment: //	users may only remove their own friends and requests made by or to them
comment: //---------------------------------------------------------------------------------------------
comment: //	remove previously accepted friend from friend list
comment: //---------------------------------------------------------------------------------------------
comment: // not mine to delete
comment: //-----------------------------------------------------------------------------------------
comment: //	delete this record, then load and delete reciprocal record
comment: //-----------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	ignore a friend request
comment: //---------------------------------------------------------------------------------------------
comment: //	expects the friend user's UID, not friendshipUID
comment: // not mine to delete
comment: //---------------------------------------------------------------------------------------------
comment: //	withdraw a friend request
comment: //---------------------------------------------------------------------------------------------
comment: // not mine to delete
comment: //---------------------------------------------------------------------------------------------
comment: //	done, return to friend list
comment: //---------------------------------------------------------------------------------------------
string: 'modules/users/models/friendship.mod.php'
string: 'action'
string: 'removeFriend'
string: 'action'
string: 'friendshipUID'
string: 'users_friendship'
string: 'friendshipUID'
string: 'friendshipUID'
string: "[[:users::namelink::userUID="
string: 'friendshipUID'
string: ":]]"
string: " removed from friends list.&lt;br/&gt;\n"
string: 'ok'
string: 'action'
string: 'ignoreRequest'
string: 'action'
string: 'friendUID'
string: 'users_user'
string: 'friendUID'
string: 'friendUID'
string: 'friend request not found.'
string: "Ignored friend request from "
string: "[[:users::namelink::userUID="
string: ":]]&lt;br/&gt;\n"
string: 'ok'
string: 'action'
string: 'withdrawRequest'
string: 'action'
string: 'friendUID'
string: 'users_user'
string: 'friendUID'
string: 'friendUID'
string: 'friend request not found.'
string: "Withdrew friend request to "
string: "[[:users::namelink::userUID="
string: ":]]&lt;br/&gt;\n"
string: 'users/friends/'

<b>scanning file: /var/www/an2google/trunk/modules/users/actions/profile.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	display a users profile
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	decide which profile to show and check permissions
comment: //----------------------------------------------------------------------------------------------
comment: // if no user specified then show own profile
comment: //----------------------------------------------------------------------------------------------
comment: //	user dependant  //TODO: use $model-&gt;extArray() for this
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	show the page
comment: //----------------------------------------------------------------------------------------------
comment: //$page-&gt;jsinit .= "msgSubscribe('comments-users-" . $userUID . "', msgh_comments);\n";
comment: //$page-&gt;jsinit .= "msgh_commentsRefresh();\n";
string: ''
string: 'users_user'
string: 'no such user'
string: 'users'
string: 'users_user'
string: 'viewprofile'
string: 'you cannot view this profile'
string: 'modules/users/actions/profile.page.php'
string: 'modules/users/views/profilepic.block.php'
string: 'chatButton'
string: ""
string: "%%serverPath%%/users/editprofile/"
string: "&lt;a href='"
string: "'&gt;[change picture]&lt;/a&gt;&lt;br/&gt;"
string: '%%editLink%%'
string: 'profilePicture'
string: 'modules/users/views/chatbutton.block.php'
string: 'chatButton'
string: '%%editLink%%'
string: ''
string: 'profilePicture'
string: 'userRa'
string: 'userUID'
string: 'raUID'
string: 'UID'
string: 'userName'
string: 'awareNet - '
string: ' (profile)'

<b>scanning file: /var/www/an2google/trunk/modules/users/actions/newrole.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	create a new Role object
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //*	check permissions and any POST variables
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //*	create the object
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //*	check that object was created and redirect
comment: //----------------------------------------------------------------------------------------------
string: 'modules/users/models/role.mod.php'
string: 'users'
string: 'users_role'
string: 'new'
string: 'You are not authorized to create new Roles.'
string: 'name'
string: 'description'
string: 'permissions'
string: 'alias'
string: ''
string: 'New Role&lt;br/&gt;'
string: '/users/editrole/'
string: 'Could not create new Role:&lt;br/&gt;'

<b>scanning file: /var/www/an2google/trunk/modules/users/actions/new.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	create a new User object
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //*	check permissions and any POST variables
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //*	create the object
comment: //----------------------------------------------------------------------------------------------
comment: //case 'profile':	$model-&gt;profile = $utils-&gt;cleanString($value); break;
comment: //case 'permissions':	$model-&gt;permissions = $utils-&gt;cleanString($value); break;
comment: //case 'lastonline':	$model-&gt;lastonline = $utils-&gt;cleanString($value); break;
comment: //case 'alias':	$model-&gt;alias = $utils-&gt;cleanString($value); break;
comment: //----------------------------------------------------------------------------------------------
comment: //*	check that object was created and redirect
comment: //----------------------------------------------------------------------------------------------
comment: /*

	$model = new Users_User();

	if (array_key_exists('school', $_POST)) { $model-&gt;school = $_POST['school']; }
	if (array_key_exists('grade', $_POST)) { $model-&gt;grade = $_POST['grade']; }
	if (array_key_exists('firstname', $_POST)) { $model-&gt;firstname = $_POST['firstname']; }
	if (array_key_exists('surname', $_POST)) { $model-&gt;surname = $_POST['surname']; }
	if (array_key_exists('username', $_POST)) { $model-&gt;username = $_POST['username']; }
	if (array_key_exists('role', $_POST)) { $model-&gt;role = $_POST['role']; }

	if (array_key_exists('password', $_POST)) { 
			$model-&gt;password = sha1($_POST['password'] . $model-&gt;UID); 
	}

	$verify = $model-&gt;verify();

	if ($verify == '') {
		$model-&gt;save();
		//authUpdatePermissions();
		$page-&gt;do302('users/list/');
	} else {
		$verify = str_replace("\n", "&lt;br/&gt;\n", $verify);
		$session-&gt;msg($verify, 'bad');
		$page-&gt;do302('users/list/');
	}
	
	*/
string: 'modules/users/models/user.mod.php'
string: 'users'
string: 'users_user'
string: 'new'
string: 'You are not authorized to create new Users.'
string: 'role'
string: 'school'
string: 'grade'
string: 'firstname'
string: 'surname'
string: 'username'
string: 'password'
string: 'lang'
string: ''
string: 'Created new user: '
string: '&lt;br/&gt;'
string: 'ok'
string: 'users/profile/'
string: 'Could not create new User:&lt;br/&gt;'

<b>scanning file: /var/www/an2google/trunk/modules/users/actions/myaccount.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	action to show 'my account' page - does not accept reference
comment: //--------------------------------------------------------------------------------------------------
comment: //	NOTE: 'public' user has no My Account page (redirect to signup?) but users in 'public' GROUP
comment: //	do have accounts and hence My Account pages.
comment: // not for public user
string: 'public'
string: 'modules/users/actions/myaccount.page.php'
string: 'UID'
string: 'userUID'
string: 'userRA'
string: 'userRa'
string: 'userName'

<b>scanning file: /var/www/an2google/trunk/modules/users/actions/logout.act.php</b>
comment: //--------------------------------------------------------------------------------------------------------------
comment: //	log the user out and redirect to the homepage
comment: //--------------------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	user was not logged in
comment: //----------------------------------------------------------------------------------------------
comment: // homepage		
comment: //----------------------------------------------------------------------------------------------
comment: //	log them out
comment: //----------------------------------------------------------------------------------------------
comment: //$userlogin-&gt;delete();
string: 'public'
string: "You are already logged out.&lt;br/&gt;\n"
string: ''
string: 'public'
string: "You are now logged out.&lt;br/&gt;\n"
string: 'ok'
string: ''

<b>scanning file: /var/www/an2google/trunk/modules/users/actions/loginstats.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	display number of users active over a given period
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	admins only
comment: //----------------------------------------------------------------------------------------------
comment: // roughly (TODO: improve)
comment: //----------------------------------------------------------------------------------------------
comment: //	render the page
comment: //----------------------------------------------------------------------------------------------
string: 'admin'
string: 'modules/users/actions/loginstats.page.php'
string: 'dateNow'
string: 'dateOneMonth'
string: 'dateThreeMonth'
string: 'dateSixMonth'

<b>scanning file: /var/www/an2google/trunk/modules/users/actions/login.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	login form
comment: //--------------------------------------------------------------------------------------------------
comment: //+	TODO: make the landing page after login a setting which admins can change
comment: //----------------------------------------------------------------------------------------------
comment: //	handle submissions
comment: //----------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	authenticate the user
comment: //------------------------------------------------------------------------------------------
comment: // ^ "select * from Users_User where username='" . $username . "'";
comment: //%	first row [array]
comment: //------------------------------------------------------------------------------
comment: //	details correct, but user is banhammered
comment: //------------------------------------------------------------------------------
comment: // redirect to homepage
comment: //------------------------------------------------------------------------------
comment: //	feedback and redirect
comment: //------------------------------------------------------------------------------
comment: //$msg = "[[:theme::navtitlebox::label=Notice:]]"
comment: //	 . "&lt;div class='inlinequote'&gt;&lt;p&gt;"
comment: //	 . "&lt;img src='%%serverPath%%themes/clockface/images/info.png' "
comment: //	 . "class='infobutton' width='18' height='18' /&gt;&amp;nbsp;&amp;nbsp;"
comment: //	 . "You are now logged in.&lt;/p&gt;&lt;/div&gt;\n";
comment: //	set current user UID
comment: //	and save
comment: // retry action after login
comment: // default landing page
comment: //------------------------------------------------------------------------------------------
comment: //	cound not authenticate
comment: //------------------------------------------------------------------------------------------
comment: //$msg = "[[:theme::navtitlebox::label=Notice:]]"
comment: //	 . "&lt;div class='inlinequote'&gt;&lt;p&gt;"
comment: //	 . "&lt;img src='%%serverPath%%themes/clockface/images/btn-del.png' "
comment: //	 . "class='infobutton' width='18' height='18' /&gt;&amp;nbsp;&amp;nbsp;"
comment: //	 . "&lt;/div&gt;\n";
comment: //--------------------------------------------------------------------------------------------------
comment: //	display form
comment: //--------------------------------------------------------------------------------------------------
string: 'action'
string: 'action'
string: 'login'
string: 'user'
string: 'pass'
string: 'users_user'
string: '*'
string: "username='"
string: "'"
string: 'password'
string: 'UID'
string: 'role'
string: 'banned'
string: 'You have been banned, you are not logged in.'
string: 'no'
string: ''
string: 'UID'
string: 'You are now logged in.'
string: 'ok'
string: 'redirect'
string: 'redirect'
string: 'notifications/'
string: 'Username or password not recognised, you are not logged in.'
string: 'no'
string: 'modules/users/actions/login.page.php'

<b>scanning file: /var/www/an2google/trunk/modules/users/actions/listroles.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	list all Role objects
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check permissions and any POST variables
comment: //----------------------------------------------------------------------------------------------
comment: //%	first page if not specified [int]
comment: //%	default number of items per page [int]
comment: //%	default list order [string]
comment: // users may list by these fields
comment: //----------------------------------------------------------------------------------------------
comment: //	render the page
comment: //----------------------------------------------------------------------------------------------
string: 'modules/users/models/role.mod.php'
string: 'users'
string: 'users_role'
string: 'list'
string: 'You are not authorized to list Roles.'
string: 'name'
string: 'page'
string: 'page'
string: 'num'
string: 'num'
string: 'by'
string: 'by'
string: 'name'
string: 'name'
string: 'createdon'
string: 'createdOn'
string: 'modules/users/actions/listroles.page.php'
string: 'pageNo'
string: 'pageSize'
string: 'orderBy'

<b>scanning file: /var/www/an2google/trunk/modules/users/actions/list.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	list all users on the system
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check user role and arguments
comment: //----------------------------------------------------------------------------------------------
comment: //if (false == $user-&gt;authHas('users', 'users_user', 'list')) { $page-&gt;do403(''); }
comment: //----------------------------------------------------------------------------------------------
comment: //	render the page
comment: //----------------------------------------------------------------------------------------------	
string: 'public'
string: 'Please log in to view user listings.'
string: 'page'
string: 'page'
string: 'modules/users/actions/list.page.php'
string: 'pageNo'

<b>scanning file: /var/www/an2google/trunk/modules/users/actions/import.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	import users from CSV file
comment: //--------------------------------------------------------------------------------------------------
comment: //TODO: remove this
string: 'modules/users/models/user.mod.php'
string: 'admin'
string: "&lt;small&gt;\n"
string: "&lt;table&gt;"
string: "&lt;tr&gt;&lt;td&gt;name---------------------------------------&lt;/td&gt;&lt;td&gt;grade&lt;/td&gt;&lt;td&gt;email&lt;/td&gt;&lt;td&gt;username&lt;/td&gt;&lt;td&gt;password&lt;/td&gt;&lt;td&gt;surname&lt;/td&gt;&lt;td&gt;firstname&lt;/td&gt;&lt;/tr&gt;\n"
string: 'interest.csv'
string: "\n"
string: "\""
string: ''
string: ","
string: 'import'
string: 'user'
string: ' '
string: "&lt;tr&gt;&lt;td&gt;$name&lt;/td&gt;&lt;td&gt;$grade&lt;/td&gt;&lt;td&gt;$email&lt;/td&gt;&lt;td&gt;$username&lt;/td&gt;&lt;td&gt;$password&lt;/td&gt;&lt;td&gt;$surname&lt;/td&gt;&lt;td&gt;$firstname&lt;/td&gt;&lt;/tr&gt;\n"
string: 'import'
string: '176670059110919836'
string: 'Gd. '
string: 'en'
string: 'admin'
string: "&lt;tr&gt;&lt;td&gt;"
string: "&lt;/td&gt;&lt;/tr&gt;"
string: "&lt;/table&gt;\n"
string: 'hamlet tragedy william shakespeare believed written between play 
					denmark recounts prince hamlet exacts revenge uncle claudius 
					murdered hamlet throne married hamlet play vividly charts course 
					feigned madness overwhelming seething explores treachery revenge
					moral despite much literary detective work exact year of writing
					remains dispute three different early versions play have survived
					first quarto second quarto first folio scenes missing shakespeare
					probably based hamlet legend amleth preserved century chronicler
					saxo grammaticus gesta danorum subsequently retold century scholar
					supposedly elizabethan dramatic structure depth characterization
					hamlet analyzed interpreted argued about from many perspectives
					scholars debated centuries hamlet hesitation plot device prolong
					action result pressure exerted complex philosophical ethical 
					issues surround calculated thwarted desire recently psychoanalytic
					critics examined hamlet unconscious desires feminist critics evaluated
					rehabilitated maligned characters of ophelia gertrude hamlet shakespeare
					play powerful influential tragedies language provides storyline
					capable of seemingly endless retelling adaptation during shakespeare
					lifetime play popular works ranks high performed example royal shakespeare
					company list inspired writers from dickens to joyce murdoch described
					world filmed story cinderella created richard burbage tragedian of
					shakespeare hundred years played acclaimed actors sometimes actresses
					successive'
string: "\n"
string: " "
string: "\t"
string: " "
string: "  "
string: " "
string: " "

<b>scanning file: /var/www/an2google/trunk/modules/users/actions/grade.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	show all users in the year and grade matching those of a given user
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check reference and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: permissions check here (same as profile?)
comment: //----------------------------------------------------------------------------------------------
comment: //	render the page
comment: //----------------------------------------------------------------------------------------------
string: 'modules/users/models/user.mod.php'
string: ''
string: 'modules/users/actions/grade.page.php'
string: 'raUID'
string: 'schoolUID'
string: 'schoolName'
string: '[[:schools::name::schoolUID='
string: ':]]'
string: 'grade'
string: 'userRa'
string: 'userUID'
string: 'userName'
string: "[[:users::menu::userUID="
string: ":]]"
string: 'awareNet - '
string: ' (classmates )'

<b>scanning file: /var/www/an2google/trunk/modules/users/actions/friends.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	display a users friends ( and their grade?)
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check permissions and arguments
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: finer controls and permissions for profile view (only friends classmates, etc)
comment: // if a user was specified, try load it
comment: // if not, default to current user
comment: //----------------------------------------------------------------------------------------------
comment: //	render the page
comment: //----------------------------------------------------------------------------------------------
string: 'public'
string: ''
string: 'modules/users/actions/friends.page.php'
string: 'userUID'
string: 'userRa'
string: 'userName'
string: 'awareNet - friends of '

<b>scanning file: /var/www/an2google/trunk/modules/users/actions/find.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	action to search for friends
comment: //--------------------------------------------------------------------------------------------------
comment: //%	search query, if any [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check permissions and arguments
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	add var for search?
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	render the page
comment: //----------------------------------------------------------------------------------------------
string: ''
string: 'users'
string: 'users_user'
string: 'show'
string: 'Please log in.'
string: 'q'
string: 'q'
string: ''
string: 'add'
string: "&lt;br/&gt;[[:users::friendrequestprofilenav::"
string: "userUID="
string: 'add'
string: "::notitle=yes:]]"
string: 'modules/users/actions/find.page.php'
string: 'fsearch'
string: 'fadd'

<b>scanning file: /var/www/an2google/trunk/modules/users/actions/editrole.act.php</b>
comment: //require_once($kapenta-&gt;installPath . 'modules/users/models/role.mod.php');
comment: // ^ sometimes needed for breadcrumbs, etc
comment: //--------------------------------------------------------------------------------------------------
comment: //*	show form to edit a Role object
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	render the page
comment: //----------------------------------------------------------------------------------------------
string: 'users_role'
string: 'users'
string: 'users_role'
string: 'edit'
string: 'You are not authorized to edit this Roles.'
string: 'modules/users/actions/editrole.page.php'
string: 'UID'
string: 'roleUID'
string: 'raUID'

<b>scanning file: /var/www/an2google/trunk/modules/users/actions/editprofile.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	users may edit their own profiles, and admins can edit anything
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check permissions and reference
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	render page
comment: //----------------------------------------------------------------------------------------------
string: ''
string: 'users_user'
string: 'no such user'
string: 'admin'
string: 'you cannot edit this profile'
string: 'modules/users/actions/editprofile.page.php'
string: 'userRa'
string: 'userUID'
string: 'userName'
string: 'raUID'
string: 'UID'

<b>scanning file: /var/www/an2google/trunk/modules/users/actions/editfriend.act.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //*	page for changing relationship properties
comment: //-------------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	load the friendship and check identity/permissions
comment: //---------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	render page
comment: //---------------------------------------------------------------------------------------------
string: 'modules/users/models/friendship.mod.php'
string: ''
string: 'users_user'
string: 'modules/users/actions/editfriend.page.php'
string: 'userUID'
string: 'friendUID'
string: 'userRa'
string: 'userName'
string: 'friendshipUID'

<b>scanning file: /var/www/an2google/trunk/modules/users/actions/edit.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	edit a user record
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	authentication
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	render the page
comment: //----------------------------------------------------------------------------------------------
string: 'admin'
string: 'modules/users/actions/edit.page.php'
string: 'raUID'
string: 'userUID'
string: 'users'
string: 'users_user'

<b>scanning file: /var/www/an2google/trunk/modules/users/actions/diagnostic.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	examine objects on this module and look for errors
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	user auth
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check friendships table
comment: //----------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	check that the friendship is requited
comment: //------------------------------------------------------------------------------------------
string: 'modules/users/models/friendship.mod.php'
string: 'admin'
string: "select * from User_Friendships"
string: 'userUID'
string: 'friendUID'
string: 'unrequited'
string: 'friendUID'
string: 'userUID'
string: 'requited'
string: 'unconfirmed'
string: "***unconfirmed requited friendship*** (friend to confirm): \n"
string: 'confirmed'
string: 'unconfirmed'
string: 'status'
string: "***unconfirmed requited friendship*** (user to confirm): \n"
string: 'UID'
string: 'confirmed'
string: 'confirmed'
string: 'status'
string: "***confirmed unrequited friendship***: \n"
string: "checking friendship "
string: 'UID'
string: ": "
string: " -&gt; "
string: " ("
string: 'status'
string: ")($reqStr)&lt;br/&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/users/actions/delete.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	delete a user record *WANRING* will delete all data they have added (blog, comments, etc)
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	authorization - only admins can delete a user account
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	OK, delete it
comment: //----------------------------------------------------------------------------------------------
string: 'admin'
string: 'sMessage'
string: "Deleted user: "
string: "&lt;br/&gt;"
string: 'users/'

<b>scanning file: /var/www/an2google/trunk/modules/users/actions/default.act.php</b>
string: ''
string: 'modules/users/actions/list.act.php'
string: 'modules/users/actions/profile.act.php'

<b>scanning file: /var/www/an2google/trunk/modules/users/actions/confirmfriend.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	confirm a friend request, or ignore one
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check post vars and permissions
comment: //----------------------------------------------------------------------------------------------
comment: // public users cannot have friends
comment: //----------------------------------------------------------------------------------------------
comment: //	OK, confirm the request
comment: //----------------------------------------------------------------------------------------------
comment: // if friendship already exists
comment: // if friend request has been withdrawn
comment: //----------------------------------------------------------------------------------------------
comment: //	add return link
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	update original request
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	send notification to friend
comment: //----------------------------------------------------------------------------------------------
comment: /*
	$title = $user-&gt;getName() . " confirmed your friend request.";

	$content = "Your relationship on their profile is: " . $relationship . ".";

	$url = '/users/friends/';
	$fromUrl = '/users/profile/' . $user-&gt;UID;
	$imgRow = imgGetDefault('users', $user-&gt;UID);
	$imgUID = '';
	if (false != $imgRow) { $imgUID = $imgRow['UID']; }

	notifyUser(	$friendUID, kapenta-&gt;createUID(), $user-&gt;getName(), 
				$fromUrl, $title, $content, $url, $imgUID );
	*/
comment: //----------------------------------------------------------------------------------------------
comment: //	send notification to user who confirmed
comment: //----------------------------------------------------------------------------------------------
comment: /*
	$title = "You confirmed a friend request from [[:users::name::UID=". $friendUID .":]].";

	$content = "Your relationship on their profile is: " . $recip-&gt;relationship . ".";

	$url = '/users/friends/';
	$fromUrl = '/users/profile/' . $friendUID;
	$imgRow = imgGetDefault('users', $friendUID);
	$imgUID = '';
	if (false != $imgRow) { $imgUID = $imgRow['UID']; }

	notifyUser(	$user-&gt;UID, kapenta-&gt;createUID(), $user-&gt;getName(), 
				$fromUrl, $title, $content, $url, $imgUID );
	*/
comment: //----------------------------------------------------------------------------------------------
comment: //	go back to friends pages
comment: //----------------------------------------------------------------------------------------------
string: 'public'
string: 'action'
string: 'Action not specified.'
string: 'confirmFriendReq'
string: 'action'
string: 'Action not supported.'
string: 'friendUID'
string: 'No friendUID sent.'
string: 'users_user'
string: 'friendUID'
string: 'Friend UID not found.'
string: 'users/friends/'
string: 'friend'
string: 'relationship'
string: 'relationship'
string: 'friendUID'
string: 'friendUID'
string: 'friendUID'
string: 'confirmed'
string: 'confirmed'
string: 'You have confirmed a friend request.'
string: 'ok'

<b>scanning file: /var/www/an2google/trunk/modules/users/actions/changepassword.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	for changing password
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: // users may only change their own password
comment: // load user record (it's already in $user, load it anyway)
comment: //----------------------------------------------------------------------------------------------
comment: //	verify
comment: //----------------------------------------------------------------------------------------------
comment: // check current password
comment: // admins do not need the current password to change it
comment: //if ('admin' == $user-&gt;role) {  
comment: // check both submissions match
comment: // check length
comment: // check for common passwords			
comment: //----------------------------------------------------------------------------------------------
comment: //	save
comment: //----------------------------------------------------------------------------------------------
string: 'modules/users/models/user.mod.php'
string: 'action'
string: 'Action nto specified.'
string: 'changeUserPass'
string: 'action'
string: 'Action not supported.'
string: 'UID'
string: 'UID not given.'
string: 'admin'
string: 'UID'
string: 'UID'
string: 'User not found.'
string: 'pwdCurrent'
string: 'pwdNew'
string: 'pwdConfirm'
string: ''
string: "[*] Current password incorrent.&lt;br/&gt;\n"
string: 'admin'
string: 'admin'
string: ''
string: "[*] Passwords do not match.&lt;br/&gt;\n"
string: "[*] Please choose a password of 6 or more characters.&lt;br/&gt;\n"
string: ''
string: 'modules/users/inc/commonpass.inc.php'
string: "[*] Your password is on our list of common passwords.&lt;br/&gt;\n"
string: "[&gt;] Your password is too easy to guess, crack or brute force.&lt;br/&gt;\n"
string: "[&gt;] If you use this password elsewhere you should change it.&lt;br/&gt;\n"
string: 'Your password has been changed.'
string: 'ok'
string: 'return'
string: 'return'
string: 'users/profile/'
string: 'Your password was not changed:&lt;br/&gt;'
string: 'bad'
string: 'return'
string: 'return'
string: 'users/profile/'

<b>scanning file: /var/www/an2google/trunk/modules/users/actions/changefriendship.act.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //	change 'relationship' field of a friendship, eg: boyfriend -&gt; spouse
comment: //-------------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	load the record and make sure the correct user is changing it
comment: //---------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	change it
comment: //---------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	notify the other party
comment: //---------------------------------------------------------------------------------------------
comment: //TODO: replace this notification function
comment: //---------------------------------------------------------------------------------------------
comment: //	redirect back to friends list
comment: //---------------------------------------------------------------------------------------------
string: 'modules/users/models/friendship.mod.php'
string: 'UID'
string: 'friendships'
string: 'UID'
string: 'UID'
string: 'relationship'
string: 'no relationship'
string: 'relationship'
string: " now lists you as their "
string: "."
string: " changed your relationship on their friends list."
string: '/users/friends/'
string: '/users/profile/'
string: 'users'
string: ''
string: 'UID'
string: 'users/friends/'

<b>scanning file: /var/www/an2google/trunk/modules/users/actions/banned.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	list all users on the system
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check user role and arguments
comment: //----------------------------------------------------------------------------------------------
comment: //if (false == $user-&gt;authHas('users', 'users_user', 'list')) { $page-&gt;do403(''); }
comment: //----------------------------------------------------------------------------------------------
comment: //	render the page
comment: //----------------------------------------------------------------------------------------------	
string: 'admin'
string: 'Admins only.'
string: 'page'
string: 'page'
string: 'modules/users/actions/banned.page.php'
string: 'pageNo'

<b>scanning file: /var/www/an2google/trunk/modules/users/actions/api.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	users module API
comment: //--------------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
comment: //	display current user
comment: //--------------------------------------------------------------------------------------------------
string: 'current'
string: 'uid'
string: 'username'
string: 'ofgroup'
string: 'firstname'
string: 'surname'
string: "&lt;?xml version=\"1.0\"?&gt;\n"
string: 'user'

<b>scanning file: /var/www/an2google/trunk/modules/users/actions/allfriends.act.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //	show all friendships in database
comment: //-------------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	authenticate
comment: //---------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	load all friendships into array
comment: //---------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	check reciprocity of all confirmed friendships
comment: //---------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	check for duplicates
comment: //---------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	check for reciprocal confirmations
comment: //---------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	make array into table
comment: //---------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	render the page
comment: //---------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	utility functions
comment: //---------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	discover if a record exists
comment: //---------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	get a friendship's recordUID
comment: //---------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	get a ds row given record UID
comment: //---------------------------------------------------------------------------------------------
string: 'modules/users/models/friendship.mod.php'
string: 'admin'
string: "select * from User_Friendships"
string: ''
string: 'UID'
string: 'UID'
string: 'userUID'
string: 'userUID'
string: 'friendUID'
string: 'friendUID'
string: 'relationship'
string: 'relationship'
string: 'status'
string: 'status'
string: 'check'
string: 'ok'
string: 'confirmed'
string: 'status'
string: 'friendUID'
string: 'userUID'
string: 'confirmed'
string: 'friendUID'
string: 'userUID'
string: 'unconfirmed'
string: "mismatched confirmation between "
string: 'userUID'
string: ' and '
string: 'friendUID'
string: "&lt;br/&gt;\n"
string: 'friendUID'
string: 'userUID'
string: 'unconfirmed'
string: "reciprocal record ($recipUID) is "
string: 'status'
string: " and should be 'confirmed'.&lt;br/&gt;\n"
string: "Loaded record "
string: " (status: "
string: ")&lt;br/&gt;\n"
string: 'confirmed'
string: "unrequeited (confirmed) friendship between "
string: 'userUID'
string: ' and '
string: 'friendUID'
string: "&lt;br/&gt;\n"
string: 'userUID'
string: 'userUID'
string: 'friendUID'
string: 'friendUID'
string: "duplicate friendship between "
string: 'userUID'
string: ' and '
string: 'friendUID'
string: "&lt;br/&gt;"
string: 'status'
string: 'unconfirmed'
string: 'friendUID'
string: 'userUID'
string: 'unconfirmed'
string: "reciprocal unconfirmed friendship between "
string: 'userUID'
string: ' and '
string: 'friendUID'
string: "&lt;br/&gt;\n"
string: 'userUID'
string: 'friendUID'
string: 'unconfirmed'
string: "record ($firstUID) should be 'confirmed'.&lt;br/&gt;\n"
string: "Loaded record (1) "
string: " (status: "
string: ")&lt;br/&gt;\n"
string: 'confirmed'
string: 'friendUID'
string: 'userUID'
string: 'unconfirmed'
string: "record ($secondUID) should be 'confirmed'.&lt;br/&gt;\n"
string: "Loaded record (2) "
string: " (status: "
string: ")&lt;br/&gt;\n"
string: 'confirmed'
string: 'From'
string: 'To'
string: 'relationship'
string: 'status'
string: '[[:users::namelink::userUID='
string: 'userUID'
string: ':]]'
string: '[[:users::namelink::userUID='
string: 'friendUID'
string: ':]]'
string: 'relationship'
string: "&lt;span style='ajaxmsg'&gt;"
string: 'status'
string: "&lt;/span&gt;"
string: 'unconfirmed'
string: 'status'
string: "&lt;span style='ajaxerror'&gt;"
string: 'status'
string: "&lt;/span&gt;"
string: 'modules/users/actions/allfriends.page.php'
string: 'friendstable'
string: 'userUID'
string: 'friendUID'
string: 'status'
string: 'userUID'
string: 'friendUID'
string: 'status'
string: 'UID'
string: 'UID'

<b>scanning file: /var/www/an2google/trunk/modules/users/actions/addfriendrequest.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	make a friend request
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check POST vars and permission
comment: //----------------------------------------------------------------------------------------------
comment: // public users can't add friends
comment: //----------------------------------------------------------------------------------------------
comment: //	OK, make the rquest
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	ignore duplicates (if we're already a friend or have already requested to be)
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	confirm friendship if other party has already asked to be our friend
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	send notification to other party
comment: //----------------------------------------------------------------------------------------------
comment: /*	TODO: re-add notifications
	$title = $user-&gt;getName() . " confirmed your friend request.";
	
	$content = "Your relationship on their profile is: " . $relationship . ".";

	$url = '/users/friends/';
	$fromUrl = '/users/profile/' . $user-&gt;UID;
	$imgRow = imgGetDefault('users', $user-&gt;UID);
	$imgUID = '';
	if (false != $imgRow) { $imgUID = $imgRow['UID']; }

	notifyUser(	$friendUID, $kapenta-&gt;createUID(), $user-&gt;getName(), 
				$fromUrl, $title, $content, $url, $imgUID );
	*/
comment: //----------------------------------------------------------------------------------------------
comment: //	send notification to own feed
comment: //----------------------------------------------------------------------------------------------
comment: /* 	TODO: re-add notifications
	$title = "You have confirmed a friend request from " . $friendName . ".";
	
	$content = "Your relationship on their profile is: " 
			 . $recip-&gt;relationship . ".";

	$url = '/users/profile/' . $friendUID;
	$fromUrl = '/users/profile/';
	$imgRow = imgGetDefault('users', $friendUID);
	$imgUID = '';
	if (false != $imgRow) { $imgUID = $imgRow['UID']; }

	notifyUser(	$user-&gt;UID, $kapenta-&gt;createUID(), $user-&gt;getName(), 
				$fromUrl, $title, $content, $url, $imgUID );

	}
	*/
comment: //----------------------------------------------------------------------------------------------
comment: //	save record
comment: //----------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	send notification
comment: //------------------------------------------------------------------------------------------
comment: /*	TODO: re-add notifications
	$title = $user-&gt;getName() . " sent you a friend request.";

	$content = "If you accept this request, your names will appear on each others profiles.";

	$url = '/users/friends/';
	$fromUrl = '/users/profile/' . $user-&gt;UID;
	$imgRow = imgGetDefault('users', $user-&gt;UID);
	$imgUID = '';
	if (false != $imgRow) { $imgUID = $imgRow['UID']; }

	notifyUser(	$friendUID, $kapenta-&gt;createUID(), $user-&gt;getName(), 
				$fromUrl, $title, $content, $url, $imgUID );
	*/
comment: //------------------------------------------------------------------------------------------
comment: //	redirect back
comment: //------------------------------------------------------------------------------------------
string: 'modules/users/models/friendship.mod.php'
string: 'public'
string: 'action'
string: 'Action not specified.'
string: 'addFriendReq'
string: 'action'
string: 'Action not supported.'
string: 'friendUID'
string: 'No friendUID given.'
string: 'users_user'
string: 'friendUID'
string: 'users/profile/'
string: 'friendUID'
string: 'return'
string: 'search'
string: 'return'
string: 'users/find/'
string: 'friend'
string: 'relationship'
string: 'relationship'
string: 'friendUID'
string: "[[:users::name::userUID="
string: ":]]"
string: ''
string: 'unconfirmed'
string: 'confirmed'
string: 'confirmed'
string: 'unconfirmed'
string: 'You have made a friend request.'
string: 'ok'
string: 'You have confirmed a friend request from '
string: 'ok'

<b>scanning file: /var/www/an2google/trunk/modules/users/actions/addfriend.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	add a user as a friend (DEPRECTED, REDUNDANT, REMOVE?)
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check that the friendship does not already exist
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	create friend request
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	redirect back to user's profile
comment: //----------------------------------------------------------------------------------------------
string: 'modules/users/models/friendship.mod.php'
string: ''
string: 'users'
string: 'addfriend'
string: 'users'
string: "You are already friends."
string: 'bad'
string: 'users/profile/'
string: 'friend'
string: 'unconfirmed'
string: "You have made a friend request.&lt;br/&gt;"
string: 'ok'
string: 'users/profile/'

<b>scanning file: /var/www/an2google/trunk/modules/uploader/views/svnadd.fn.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //|	find all files in this project which should be tracked by subversion
comment: //-------------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	define which files should not be tracked by SVN
comment: //---------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	find all files in this project
comment: //---------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	done
comment: //---------------------------------------------------------------------------------------------
comment: //-------------------------------------------------------------------------------------------------
string: "admin &gt; svnadd&lt;br/&gt;\n"
string: 'admin'
string: ''
string: 'setup.inc.php'
string: 'uploader/'
string: 'data/images/'
string: 'data/files/'
string: 'data/log/'
string: '.log.php'
string: '/drawcache/'
string: '~'
string: '.svn/'
string: 'install/'
string: ''
string: "find $installPath"
string: "\n"
string: ' '
string: "\n"
string: "&lt;textarea rows='10' cols='80'&gt;"
string: "&lt;/textarea&gt;"

<b>scanning file: /var/www/an2google/trunk/modules/uploader/models/repository.mod.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	object for interacting with kapenta code repository
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	member variables
comment: //----------------------------------------------------------------------------------------------
comment: // location of list of objects [string]
comment: // location to post objects to [string]
comment: // authorises post [string]
comment: // array of locations which are not uploaded [array]
comment: // list of local files which will not be uploaded [array]
comment: //----------------------------------------------------------------------------------------------
comment: //.	constructor
comment: //----------------------------------------------------------------------------------------------
comment: //arg: listUrl - URL of repository file list [string]
comment: //arg: postUrl - URL of repository posting interface [string]
comment: //arg: postKey - repository password [string]
comment: //----------------------------------------------------------------------------------------------
comment: //.	add an exemption
comment: //----------------------------------------------------------------------------------------------
comment: //arg: match - filenames/paths containing this string will be ignored [string]
comment: //----------------------------------------------------------------------------------------------
comment: //.	get list of exemptions
comment: //----------------------------------------------------------------------------------------------
comment: //returns: current list of exemptions [array]
comment: //----------------------------------------------------------------------------------------------
comment: //.	clear list of exemptions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //.	download repository list and convert into an array
comment: //----------------------------------------------------------------------------------------------
comment: //returns: list of files maintained in the respository and their metadata [array]
comment: //----------------------------------------------------------------------------------------------
comment: //.	examine local files and create list - same format as getRepositoryList()
comment: //----------------------------------------------------------------------------------------------
comment: //arg: repositoryList - as produced by getRepositoryList(), for matching UIDs of items [array]
comment: //returns: list of files in the local installation and their metadata [array]	
comment: //, any exemptions should be set up before this is called
comment: //------------------------------------------------------------------------------------------
comment: //	list all files and folders from local installPath
comment: //------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------
comment: //	decide which ones to skip
comment: //--------------------------------------------------------------------------------------
comment: // must not be blank	
comment: // relative position
comment: // get filename
comment: // search for exemptions
comment: //--------------------------------------------------------------------------------------
comment: //	is a valid file, add to local list
comment: //--------------------------------------------------------------------------------------
comment: // not set at this stage
comment: //----------------------------------------------------------------------------------
comment: //	add trailing slash to folders
comment: //----------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------
comment: //	compare to repository list, find UID if present
comment: //----------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------
comment: //	add new item to list of local files
comment: //----------------------------------------------------------------------------------				
comment: //			if ($skip == false) {
comment: //				$itemUID = ''; 
comment: //				$sha1 = sha1(implode(file($installPath . $line)));
comment: //
comment: //				//----------------------------------------------------------------------------------
comment: //				//	compare to repository
comment: //				//----------------------------------------------------------------------------------
comment: //				foreach($rList as $rUID =&gt; $item) 
comment: //					{ if ($item['relfile'] == $line) { $itemUID = $rUID; } }
comment: //
comment: //				if ($itemUID == false) {
comment: //					//------------------------------------------------------------------------------
comment: //					//	is not in repository, add it
comment: //					//------------------------------------------------------------------------------
comment: //					echo "[&gt;] adding $line to repository (new file)&lt;br/&gt;\n"; flush();
comment: //					storeNewFile($postfile, $line, $respoitorykey);
comment: //
comment: //				} else {
comment: //					if ($sha1 != $rList[$itemUID]['sha1']) {
comment: //						//--------------------------------------------------------------------------
comment: //						//	is different to version in repository, update it
comment: //						//--------------------------------------------------------------------------
comment: //
comment: //					} else {
comment: //						//--------------------------------------------------------------------------
comment: //						//	files match
comment: //						//--------------------------------------------------------------------------
comment: //					}
comment: //
comment: //				}	// end if itemUID == false		
comment: //	
comment: //			} else { $skipList[] = $line; }
comment: // end foreach line
comment: //		echo "&lt;h1&gt;Skipped Files&lt;/h1&gt;\n";
comment: //		foreach ($skipList as $path) { echo $path . "&lt;br/&gt;\n"; }
comment: //----------------------------------------------------------------------------------------------
comment: //.	compare local and repository lists to create a list of files to be updated
comment: //----------------------------------------------------------------------------------------------
comment: //arg: repositoryList - a list of files [array]	
comment: //arg: localList - a list of files [array]
comment: //returns: list of files to be created/updated in the repository [array]
comment: //----------------------------------------------------------------------------------
comment: // new items
comment: //----------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------
comment: // updated items (hash does hot match)
comment: //----------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //.	perform uploads
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //.	save a new file (or directory) to the repository
comment: //----------------------------------------------------------------------------------------------
comment: //arg: path - relative to installPath [string]
comment: //arg: type - file type, as per guessFileType() [string]
comment: //arg: hash - sha1 hash of file (or directory) [string]
comment: //------------------------------------------------------------------------------------------
comment: //	load the file
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	binary files are attached
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	assemble postvars
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	do it
comment: //------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //.	get the sha1 hash of a file
comment: //----------------------------------------------------------------------------------------------
comment: //arg: relFile - file location relative to installPath [string]
comment: //returns: sha1 hash of file [string]
comment: //TODO: error checking, traversal checking, use centralised IO functions
comment: //----------------------------------------------------------------------------------------------
comment: //.	decide which type a file is
comment: //----------------------------------------------------------------------------------------------
comment: //arg: path - filename including path [string]
comment: //returns: best guess at file type, or false if not determined [string][bool]
comment: //----------------------------------------------------------------------------------------------
comment: //.	return a list of objects as an html table
comment: //----------------------------------------------------------------------------------------------
comment: //arg: list - list of files [array]
comment: //returns: html [string]
comment: //, TODO: use arrayToHtmlTable
string: ''
string: ''
string: ''
string: "\n"
string: "\t"
string: 'uid'
string: 'hash'
string: 'type'
string: 'relfile'
string: 'uid'
string: "find $installPath"
string: "\n"
string: ''
string: '/'
string: ' '
string: 'uid'
string: ''
string: 'hash'
string: 'type'
string: 'relfile'
string: 'type'
string: 'folder'
string: 'relfile'
string: '//'
string: '/'
string: 'relfile'
string: '/'
string: 'relfile'
string: 'relfile'
string: 'uid'
string: 'uid'
string: 'uid'
string: ''
string: 'uid'
string: 'hash'
string: 'hash'
string: 'relFile'
string: 'type'
string: 'hash'
string: "[i] storing file - path: $path type: $type &lt;br/&gt;\n"
string: "\\"
string: ''
string: '/'
string: '(automatically uploaded '
string: ')'
string: 'no'
string: ''
string: ''
string: 'jpeg'
string: 'png'
string: 'gif'
string: 'ttf'
string: 'yes'
string: '(binary file attached)'
string: 'action'
string: 'storeNode'
string: 'key'
string: 'path'
string: 'type'
string: 'title'
string: 'description'
string: 'content'
string: 'isbinary'
string: 'binary'
string: 'hash'
string: "[i] server responds: &lt;small&gt; $response &lt;/small&gt; &lt;br/&gt;\n"
string: '//'
string: '/'
string: '.'
string: 'folder'
string: 'xxxxxxxxxxxxxx'
string: '.txt'
string: 'txt'
string: '.js'
string: 'txt'
string: '.css'
string: 'txt'
string: '.html'
string: 'txt'
string: '.htm'
string: 'txt'
string: '.jpeg'
string: 'jpeg'
string: '.jpg'
string: 'jpeg'
string: '.png'
string: 'png'
string: '.gif'
string: 'gif'
string: '.ttf'
string: 'ttf'
string: '.template.php'
string: 'template'
string: '.page.php'
string: 'page'
string: '.block.php'
string: 'block'
string: '.xml.php'
string: 'xml'
string: '.php'
string: 'php'
string: "&lt;table&gt;\n"
string: "\t&lt;tr&gt;\n"
string: "\t\t&lt;td&gt;&lt;b&gt;UID&lt;/b&gt;&lt;/td&gt;\n"
string: "\t\t&lt;td&gt;&lt;b&gt;HASH&lt;/b&gt;&lt;/td&gt;\n"
string: "\t\t&lt;td&gt;&lt;b&gt;TYPE&lt;/b&gt;&lt;/td&gt;\n"
string: "\t\t&lt;td&gt;&lt;b&gt;RELFILE&lt;/b&gt;&lt;/td&gt;\n"
string: "\t&lt;/tr&gt;\n"
string: 'uid'
string: ''
string: 'hash'
string: ''
string: "\t&lt;tr&gt;\n"
string: "\t\t&lt;td&gt;&lt;small&gt;"
string: 'uid'
string: "&lt;/small&gt;&lt;/td&gt;\n"
string: "\t\t&lt;td&gt;&lt;small&gt;"
string: 'hash'
string: "&lt;/small&gt;&lt;/td&gt;\n"
string: "\t\t&lt;td&gt;&lt;small&gt;"
string: 'type'
string: "&lt;/small&gt;&lt;/td&gt;\n"
string: "\t\t&lt;td&gt;&lt;small&gt;"
string: 'relfile'
string: "&lt;/small&gt;&lt;/td&gt;\n"
string: "\t&lt;/tr&gt;\n"
string: "&lt;/table&gt;&lt;br/&gt;\n"
string: "$newCount files are new to the repository and will be assigned UIDs.&lt;br/&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/uploader/actions/upload.bak.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	uploading code to repository on kapenta.org.uk
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	set up repository access
comment: //----------------------------------------------------------------------------------------------
comment: //$repositoryUrl = 'http://www.kapenta.org.uk/code/';
comment: // dynamically generated on install
comment: // this module (CONTAINS KEY)
comment: // defunct
comment: // sybversion files and directories
comment: // ?
comment: // ?
comment: // ?
comment: // ?
comment: // log files
comment: // log files
comment: // gedit revision files
comment: // dynamically generated images
comment: // user images
comment: // user files
comment: // user files
comment: // user files
comment: //----------------------------------------------------------------------------------------------
comment: //	get list of files from respoitory
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	get local list
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	list local files, compare to repository
comment: //----------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	decide which ones to skip
comment: //------------------------------------------------------------------------------------------
comment: // must not be blank	
comment: // relative position
comment: // get filename
comment: // filename must contain .
comment: // search for exemptions
comment: //--------------------------------------------------------------------------------------
comment: //	compare to repository
comment: //--------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------
comment: //	is not in repository, add it
comment: //----------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------
comment: //	is different to version in repository, update it
comment: //------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------
comment: //	files match
comment: //------------------------------------------------------------------------------
comment: //echo "[&gt;] hashes match: " . $rList[$itemUID]['relfile'] . " &lt;br/&gt;\n";
comment: // end if itemUID == false		
comment: // end foreach line
comment: //==================================================================================================
comment: //	utility functions
comment: //==================================================================================================
comment: //--------------------------------------------------------------------------------------------------
comment: //	store a file to the repository
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	guess file type
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	load the file
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	binary files are attached
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	calculate hash
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	assemble postvars
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	do it
comment: //----------------------------------------------------------------------------------------------
string: 'admin'
string: 'modules/admin/models/repository.mod.php'
string: 'http://kapenta.co.za/code/'
string: '106665425118526027'
string: '66awarenet99'
string: "setup.inc.php"
string: "uploader/"
string: "install/"
string: ".svn"
string: "data/log/e"
string: "svnadd.sh"
string: "svndelete.sh"
string: "data/log/e"
string: ".log.php"
string: "phpinfo.php"
string: "~"
string: "/drawcache/"
string: "data/images/"
string: "data/files/"
string: "data/log/"
string: "data/temp/"
string: "find $installPath"
string: "\n"
string: ''
string: '/'
string: ' '
string: '.'
string: ' '
string: ''
string: 'relfile'
string: "[&gt;] adding $line to repository (new file)&lt;br/&gt;\n"
string: 'hash'
string: "[i] this file should be updated: "
string: 'relfile'
string: " ($sha1 != "
string: 'hash'
string: ") &lt;br/&gt;\n"
string: "&lt;h1&gt;Skipped Files&lt;/h1&gt;\n"
string: "&lt;br/&gt;\n"
string: "[*] indeterminate file type: $path&lt;br/&gt;\n"
string: "[i] storing file - path: $path type: $type &lt;br/&gt;\n"
string: "\\"
string: ''
string: '/'
string: '(automatically uploaded '
string: ')'
string: 'no'
string: ''
string: ''
string: 'jpeg'
string: 'png'
string: 'gif'
string: 'ttf'
string: 'yes'
string: '(binary file attached)'
string: "[i] file hash: $hash ($path) &lt;br/&gt;\n"
string: 'action'
string: 'storeNode'
string: 'key'
string: 'dirname'
string: 'path'
string: 'type'
string: 'title'
string: 'description'
string: 'content'
string: 'isbinary'
string: 'binary'
string: 'hash'
string: "[i] server responds: &lt;small&gt; $response &lt;/small&gt; &lt;br/&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/uploader/actions/upload.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	uploading code to repository on kapenta.org.uk
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	set up repository access
comment: //----------------------------------------------------------------------------------------------
comment: //$repositoryUrl = 'http://kapenta.co.za/code/';
comment: // dynamically generated on install
comment: // this module (CONTAINS KEY)
comment: // defunct
comment: // subversion files and directories
comment: // ?
comment: // ?
comment: // ?
comment: // ?
comment: // ?
comment: // changes every few page loads
comment: // a debugging file
comment: // ?
comment: // log files
comment: // log files
comment: // gedit revision files
comment: // dynamically generated images
comment: // dynamically generated images
comment: // dynamically generated images
comment: // user images
comment: // user files
comment: // user files
comment: // user files
comment: //----------------------------------------------------------------------------------------------
comment: //	get list of files from respoitory
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	get local list
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	list local files, compare to repository
comment: //----------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	decide which ones to skip
comment: //------------------------------------------------------------------------------------------
comment: // must not be blank	
comment: // relative position
comment: // get filename
comment: // filename must contain .
comment: // search for exemptions
comment: //--------------------------------------------------------------------------------------
comment: //	compare to repository
comment: //--------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------
comment: //	is not in repository, add it
comment: //----------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------
comment: //	is different to version in repository, update it
comment: //------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------
comment: //	files match
comment: //------------------------------------------------------------------------------
comment: //echo "[&gt;] hashes match: " . $rList[$itemUID]['relfile'] . " &lt;br/&gt;\n";
comment: // end if itemUID == false		
comment: // end foreach line
comment: //==================================================================================================
comment: //	utility functions
comment: //==================================================================================================
comment: //--------------------------------------------------------------------------------------------------
comment: //	store a file to the repository
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	guess file type
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	load the file
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	binary files are attached
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	calculate hash
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	assemble postvars
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	do it
comment: //----------------------------------------------------------------------------------------------
string: 'admin'
string: 'modules/admin/models/repository.mod.php'
string: 'http://www.kapenta.org.uk/code/'
string: '210833480571475984'
string: '66awarenet488'
string: "setup.inc.php"
string: "uploader/"
string: "install/"
string: ".svn"
string: "data/log/e"
string: "data/videos/"
string: "svnadd.sh"
string: "svndelete.sh"
string: "cronlog.html"
string: "core/lastcycle.txt"
string: "projects/tmp.xml"
string: "data/log/e"
string: ".log.php"
string: "phpinfo.php"
string: "~"
string: "/drawcache/"
string: "/scaffold/"
string: "/removed/"
string: "data/images/"
string: "data/files/"
string: "data/log/"
string: "data/temp/"
string: "find $installPath"
string: "\n"
string: ''
string: '/'
string: ' '
string: '.'
string: ' '
string: ''
string: 'relfile'
string: "[&gt;] adding $line to repository (new file)&lt;br/&gt;\n"
string: 'hash'
string: "[i] this file should be updated: "
string: 'relfile'
string: " ($sha1 != "
string: 'hash'
string: ") &lt;br/&gt;\n"
string: "&lt;h1&gt;Skipped Files&lt;/h1&gt;\n"
string: ' '
string: '/data/'
string: "&lt;br/&gt;\n"
string: "[*] indeterminate file type: $path&lt;br/&gt;\n"
string: "[i] storing file - path: $path type: $type &lt;br/&gt;\n"
string: "\\"
string: ''
string: '/'
string: '(automatically uploaded '
string: ')'
string: 'no'
string: ''
string: ''
string: 'jpeg'
string: 'png'
string: 'gif'
string: 'ttf'
string: 'yes'
string: '(binary file attached)'
string: "[i] file hash: $hash ($path) &lt;br/&gt;\n"
string: 'action'
string: 'storeNode'
string: 'key'
string: 'dirname'
string: 'path'
string: 'type'
string: 'title'
string: 'description'
string: 'content'
string: 'isbinary'
string: 'binary'
string: 'hash'
string: "[i] server responds: &lt;small&gt; $response &lt;/small&gt; &lt;br/&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/uploader/actions/test.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	code to test repository.mod.php
comment: //--------------------------------------------------------------------------------------------------
comment: //if ('admin' != $user-&gt;role) { $page-&gt;do403(); }
comment: //----------------------------------------------------------------------------------------------
comment: //	set up repository access
comment: //----------------------------------------------------------------------------------------------
comment: // dynamically generated on install
comment: // this module (CONTAINS KEY)
comment: // defunct
comment: // user images
comment: // user files
comment: // ?
comment: // log files
comment: // gedit revision files
comment: // dynamically generated images
comment: //----------------------------------------------------------------------------------------------
comment: //	get list of files from respoitory and local drive
comment: //----------------------------------------------------------------------------------------------
string: 'modules/uploader/models/repository.mod.php'
string: 'http://kapenta.co.za/code/projectlist/project_106665425118526027'
string: 'http://kapenta.co.za/code/postfile/'
string: '66awarenet99'
string: "setup.inc.php"
string: "uploader/"
string: "install/"
string: "data/images/"
string: "data/files/"
string: "data/log/e"
string: ".log.php"
string: "~"
string: "/drawcache/"
string: "&lt;h2&gt;Repository List&lt;/h2&gt;\n"
string: "&lt;h2&gt;Local List&lt;/h2&gt;\n"
string: "&lt;h2&gt;To Be Uploaded&lt;/h2&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/uploader/actions/temp.act.php</b>
string: 'index.php'

<b>scanning file: /var/www/an2google/trunk/modules/uploader/actions/svnsync.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	sync with awarenet working copy
comment: //--------------------------------------------------------------------------------------------------
comment: // TO USE: make list of install using find ./ &gt; an-working.txt | an-install.txt and copy to this
comment: // directory.  First step is to discover which files exist in the working (SVN) copy, but not in
comment: // this one.
comment: //--------------------------------------------------------------------------------------------------
comment: //	load boath text files into arrays
comment: //--------------------------------------------------------------------------------------------------
comment: // no data
comment: // no data
comment: // no data
comment: // no subversion data
comment: // not this folder
comment: // no data
comment: // no data
comment: // no data
comment: // no tildefiles
comment: // no cached graphics
comment: //--------------------------------------------------------------------------------------------------
comment: //	discover which files are not in the install (need to be deleted from svn)
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/uploader/an-working.txt'
string: 'modules/uploader/an-install.txt'
string: "\n"
string: '/data/files/'
string: '/data/images/'
string: '/data/log/'
string: '/.svn'
string: "\n"
string: '/uploader/'
string: '/data/files/'
string: '/data/images/'
string: '/data/log/'
string: '~'
string: '/drawcache/'
string: "svn delete "
string: './'
string: './trunk/'
string: "&lt;br/&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/uploader/actions/svngen.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	creates a shell script for uploading to subversion
comment: //--------------------------------------------------------------------------------------------------
comment: //role: admin - only administrators may do this
comment: //----------------------------------------------------------------------------------------------
comment: //	check user role
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the shell script
comment: //----------------------------------------------------------------------------------------------
string: 'admin'
string: 'uploader'
string: "svn import awarenet2/modules/"
string: " \
 https://awarenet.svn.sourceforge.net/svnroot/awarenet/trunk/modules/"
string: "/ \
 -m  \"Uploading re-organised awarenet sources\"

"

<b>scanning file: /var/www/an2google/trunk/modules/uploader/actions/default.act.php</b>

<b>scanning file: /var/www/an2google/trunk/modules/tags/views/name.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	just show a tag name, optionally with link to
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - UID ro alias of a Tags_Tag object [string]
comment: //opt: tagUID - oveerrides raUIDis present [string]
comment: //opt: link - link to list of items sharing this tag, default is no (yes|no|module) [string]
comment: //opt: module - name of a kapenta module [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: check permissions here
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
comment: // some modules may provide their own tag interface
string: 'modules/tags/models/tag.mod.php'
string: 'modules/tags/models/index.mod.php'
string: ''
string: 'no'
string: 'tagUID'
string: 'raUID'
string: 'tagUID'
string: 'raUID'
string: ''
string: 'raUID'
string: '(not found)'
string: 'link'
string: 'link'
string: 'yes'
string: "%%serverPath%%tags/show/"
string: "&lt;a href='"
string: "'&gt;"
string: "&lt;/a&gt;"
string: 'module'
string: 'module'
string: '(no module)'
string: 'module'
string: '(no such module)'
string: "%%serverPath%%"
string: 'module'
string: "/tag/"
string: "&lt;a href='"
string: "'&gt;"
string: "&lt;/a&gt;"

<b>scanning file: /var/www/an2google/trunk/modules/tags/views/modelcloud.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	show tags of a particular kind of object (eg, projects, blog posts) as a cloud
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: refModule - name of a kapenta module [string]
comment: //arg: refModel - name of a kapenta object type [string]
comment: //opt: num - maximum number of tags to show, default is 30 (int) [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	load top n tags from the database by counting Tags_Index objects
comment: //----------------------------------------------------------------------------------------------
comment: //note: this is not great, a precache of this would be better
comment: //echo $sql;
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
string: 'modules/tags/models/tag.mod.php'
string: ''
string: 'num'
string: 'num'
string: 'refModule'
string: '(no refModule)'
string: 'refModel'
string: '(no refModel)'
string: 'refModule'
string: 'refModel'
string: "SELECT tagUID, count(UID) as weight "
string: "FROM Tags_Index "
string: "WHERE refModule='"
string: "' "
string: "AND refModel='"
string: "' "
string: "GROUP BY tagUID "
string: "ORDER BY weight DESC "
string: "LIMIT $num"
string: 'tagUID'
string: 'name'
string: 'weight'
string: 'weight'
string: 'link'
string: '%%serverPath%%'
string: '/tag/'

<b>scanning file: /var/www/an2google/trunk/modules/tags/views/listtags.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	list all tags belonging to a specified object
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: refModule - name of a kapenta module [string]
comment: //arg: refModel - type of object which may have tags [string]
comment: //arg: refUID - UID of object which may have tags [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	load any tags from database
comment: //----------------------------------------------------------------------------------------------	
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
string: ''
string: 'refModule'
string: '(no refModule)'
string: 'refModel'
string: '(no refModel)'
string: 'refUID'
string: '(no refUID)'
string: 'refModule'
string: 'refModel'
string: 'refUID'
string: '(no such module)'
string: '(no such owner)'
string: 'tags-manage'
string: ''
string: "refModule='"
string: "'"
string: "refModel='"
string: "'"
string: "refUID='"
string: "'"
string: 'tags_index'
string: '*'
string: "(this item has no tags as yet)&lt;br/&gt;&lt;br/&gt;"
string: 'Tag'
string: 'Mag'
string: 'Added by'
string: 'Added on'
string: '[x]'
string: "%%serverPath%%tags/removetag/"
string: 'UID'
string: "&lt;a href='"
string: "'&gt;[untag]&lt;/a&gt;"
string: "[[:tags::name::tagUID="
string: 'tagUID'
string: ":]]"
string: "[[:tags::count::tagUID="
string: 'tagUID'
string: ":]]"
string: "[[:users::name::userUID="
string: 'createdBy'
string: ":]]"
string: 'createdOn'

<b>scanning file: /var/www/an2google/trunk/modules/tags/views/listflat.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	simple flat list of tags owned by something
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: refModule - name of a kapenta module [string]
comment: //arg: refModel - type of object which may have tags [string]
comment: //arg: refUID - UID of object which may have tags [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	load any tags from database
comment: //----------------------------------------------------------------------------------------------	
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------	
string: ''
string: 'refModule'
string: '(no refModule)'
string: 'refModel'
string: '(no refModel)'
string: 'refUID'
string: '(no refUID)'
string: 'refModule'
string: 'refModel'
string: 'refUID'
string: '(no such module)'
string: '(no such owner)'
string: 'tags-manage'
string: ''
string: "refModule='"
string: "'"
string: "refUID='"
string: "'"
string: 'tags_index'
string: '*'
string: ''
string: "[[:tags::name::tagUID="
string: 'tagUID'
string: "::link=module::module=$refModule:]]"
string: "&lt;b&gt;Tags:&lt;/b&gt; "
string: ", "

<b>scanning file: /var/www/an2google/trunk/modules/tags/views/edittags.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	show iframe console for editing tags, or list of tags if no permissions
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: refModule - name of a kapenta module [string]
comment: //arg: refModel - type of object which may have tags [string]
comment: //arg: refUID - UID of object which may have tags [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
string: ''
string: 'refModule'
string: '(no refModule)'
string: 'refModel'
string: '(no refModel)'
string: 'refUID'
string: '(no refUID)'
string: 'refModule'
string: 'refModel'
string: 'refUID'
string: '(no such module)'
string: '(no such owner)'
string: 'tags-manage'
string: "[[:tags::showtags::refModule=$refModule::refModel=$refModel::refUID=$refUID:]]"
string: '%%serverPath%%tags/edittags/'
string: 'refModule_'
string: '/'
string: 'refModel_'
string: '/'
string: 'refUID_'
string: "[[:theme::navtitlebox::label=Tags::toggle=divET"
string: ":]]
		&lt;div id='divET"
string: "'&gt;
		&lt;iframe name='editTags"
string: "' id='ifEdittags"
string: "'
			src='"
string: "'
			width='570' height='300' frameborder='no'&gt;
		&lt;/iframe&gt;
		&lt;/div&gt;
		"

<b>scanning file: /var/www/an2google/trunk/modules/tags/views/count.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	show the number of objects with a given tag, sometimes called its magnitude
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - UID ro alias of a Tags_Tag object [string]
comment: //opt: tagUID - oveerrides raUIDis present [string]
comment: //opt: link - link to list of items sharing this tag, default is no (yes|no) [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: check permissions here
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
string: 'modules/tags/models/tag.mod.php'
string: 'modules/tags/models/index.mod.php'
string: ''
string: 'no'
string: 'tagUID'
string: 'raUID'
string: 'tagUID'
string: 'raUID'
string: ''
string: 'raUID'
string: '(not found)'
string: 'link'
string: 'yes'
string: 'link'
string: 'yes'
string: 'yes'
string: "%%serverPath%%tags/show/"
string: "&lt;a href='"
string: "'&gt;"
string: "&lt;/a&gt;"

<b>scanning file: /var/www/an2google/trunk/modules/tags/views/cloud.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	show tag could for entire system, a module, model or single object
comment: //--------------------------------------------------------------------------------------------------
comment: //opt: refModule - name of a kapenta module [string]
comment: //opt: refModel - if present owner must be this type of object [string]
comment: //opt: refUID -UID of an object which may have tags [string]
comment: //opt: num - maximum number of tags to display, default is 20 (int)[string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: permissions check here
comment: //----------------------------------------------------------------------------------------------
comment: //	load from database
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: figure out how to eliminate this join	
comment: //echo $sql;
comment: //----------------------------------------------------------------------------------------------
comment: //	proprocess and sort tags by name
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: fix the following, this is clunky:
string: ''
string: 'num'
string: 'num'
string: ''
string: ''
string: ''
string: 'refModule'
string: 'refModule'
string: "AND Tags_Index.refModule='"
string: 'refModule'
string: "'"
string: 'refModel'
string: "AND Tags_Index.refModel='"
string: 'refModel'
string: "'"
string: 'refUID'
string: "AND Tags_Index.refUID='"
string: 'refUID'
string: "'"
string: "SELECT Tags_Tag.* FROM Tags_Index, Tags_Tag "
string: "WHERE Tags_Index.tagUID=Tags_Tag.UID "
string: "$moduleCheck $modelCheck $UIDCheck "
string: "ORDER BY Tags_Tag.objectCount "
string: "LIMIT $num"
string: "&lt;i&gt;(no tags)&lt;/i&gt;"
string: 'namelc'
string: 'UID'
string: 'UID'
string: 'name'
string: 'name'
string: 'weight'
string: 'objectCount'
string: "tags/show/"
string: 'url'
string: 'url'
string: "&lt;a href='%%serverPath%%"
string: 'name'
string: "'&gt;"
string: 'name'
string: "&lt;/a&gt;"
string: ", "

<b>scanning file: /var/www/an2google/trunk/modules/tags/views/addtagform.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	show iframe console for editing tags, or list of tags if no permissions
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: refModule - name of a kapenta module [string]
comment: //arg: refModel - type of object which may have tags [string]
comment: //arg: refUID - UID of object which may have tags [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
string: ''
string: 'refModule'
string: '(no refModule)'
string: 'refModel'
string: '(no refModel)'
string: 'refUID'
string: '(no refUID)'
string: 'refModule'
string: 'refModel'
string: 'refUID'
string: '(no such module)'
string: '(no such owner)'
string: 'tags-manage'
string: ''
string: 'modules/tags/views/addtagform.block.php'
string: 'refModule'
string: 'refModel'
string: 'refUID'

<b>scanning file: /var/www/an2google/trunk/modules/tags/models/tag.mod.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	Central organising object
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //member variables
comment: //----------------------------------------------------------------------------------------------
comment: //_	currently loaded database record [array]
comment: //_	database table definition [array]
comment: //_	set to true when an object has been loaded [bool]
comment: //_ UID [string]
comment: //_ title [string]
comment: //_ for searching [string]
comment: //_ bigint [string]
comment: //_ datetime [string]
comment: //_ ref:Users_User [string]
comment: //_ datetime [string]
comment: //_ ref:Users_User [string]
comment: //----------------------------------------------------------------------------------------------
comment: //. constructor
comment: //----------------------------------------------------------------------------------------------
comment: //opt: UID - UID of a Tag object [string]
comment: //opt: byName - if true then load by name rather than by UID [bool]
comment: // initialise table schema
comment: // try load an object from the database
comment: // ... by object UID
comment: // ... by tag name
comment: // check if we did
comment: // make new object
comment: // initialize
comment: // set default name
comment: // set default name
comment: //----------------------------------------------------------------------------------------------
comment: //. load an object from the database given its UID
comment: //----------------------------------------------------------------------------------------------
comment: //arg: UID - UID of a Tag object [string]
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //. load a tag object by name
comment: //----------------------------------------------------------------------------------------------
comment: //arg: tagName - name of a tag, case insensitive [string]
comment: //returns: true on success, false on failure [bool]
comment: //	this causes the tag object to become cached
comment: //	no such object
comment: //	will load from db-&gt;cache
comment: //----------------------------------------------------------------------------------------------
comment: //. load Tag object serialized as an associative array
comment: //----------------------------------------------------------------------------------------------
comment: //arg: ary - associative array of members and values [array]
comment: //returns: true on success, false on failure [bool]
comment: //if (false == $db-&gt;validate($ary, $this-&gt;dbSchema)) { return false; }
comment: //----------------------------------------------------------------------------------------------
comment: //. save the current object to database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string on success, html report of errors on failure [string]
comment: //: $db-&gt;save(...) will raise an object_updated event if successful
comment: //----------------------------------------------------------------------------------------------
comment: //. check that object is correct before allowing it to be stored in database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string if object passes, warning message if not [string]
comment: // check that a tag name was given
comment: // check that this tag does not already exist
comment: //----------------------------------------------------------------------------------------------
comment: //. database table definition and content versioning
comment: //----------------------------------------------------------------------------------------------
comment: //returns: information for constructing SQL queries [array]
comment: //table columns
comment: //these fields will be indexed
comment: //revision history will be kept for these fields
comment: //----------------------------------------------------------------------------------------------
comment: //. serialize this object to an array
comment: //----------------------------------------------------------------------------------------------
comment: //returns: associative array of all members which define this instance [array]
comment: //----------------------------------------------------------------------------------------------
comment: //. serialize this object to xml
comment: //----------------------------------------------------------------------------------------------
comment: //arg: xmlDec - include xml declaration? [bool]
comment: //arg: indent - string with which to indent lines [bool]
comment: //returns: xml serialization of this object [string]
comment: //NOTE: any members which are not XML clean should be marked up before sending
comment: //----------------------------------------------------------------------------------------------
comment: //. make an extended array of data views may need
comment: //----------------------------------------------------------------------------------------------
comment: //returns: associative array of members, metadata and partial views [array]
comment: //% extended array of properties [array:string]
comment: //------------------------------------------------------------------------------------------
comment: //	links
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	javascript
comment: //------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //. get UID of a Tags_Tag object given its name
comment: //----------------------------------------------------------------------------------------------
comment: //arg: tagName - name of a tag, case insensitive [string]
comment: //returns: UID of a Tags_Tag object, or false on failure [string][bool]
comment: //----------------------------------------------------------------------------------------------
comment: //. delete current object from the database
comment: //----------------------------------------------------------------------------------------------
comment: //: $db-&gt;delete(...) will raise an object_deleted event on success [bool]
comment: //returns: true on success, false on failure [bool]
comment: // nothing to do
comment: //----------------------------------------------------------------------------------------------
comment: //. count objects which use this tag (exclude 'suggested' tags)
comment: //----------------------------------------------------------------------------------------------
string: ''
string: ''
string: 'New Tag '
string: 'UID'
string: 'name'
string: 'name'
string: 'objectCount'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: ''
string: "Database error.&lt;br/&gt;\n"
string: ''
string: ''
string: ''
string: "No UID.&lt;br/&gt;\n"
string: ''
string: "Tag is blank.&lt;br/&gt;\n"
string: "Tag already exists under a different UID.&lt;br/&gt;\n"
string: 'module'
string: 'tags'
string: 'model'
string: 'tags_tag'
string: 'archive'
string: 'yes'
string: 'fields'
string: 'UID'
string: 'VARCHAR(33)'
string: 'name'
string: 'VARCHAR(255)'
string: 'namelc'
string: 'VARCHAR(255)'
string: 'objectCount'
string: 'TEXT'
string: 'createdOn'
string: 'DATETIME'
string: 'createdBy'
string: 'VARCHAR(33)'
string: 'editedOn'
string: 'DATETIME'
string: 'editedBy'
string: 'VARCHAR(33)'
string: 'indices'
string: 'UID'
string: '10'
string: 'name'
string: '10'
string: 'objectCount'
string: '10'
string: 'createdOn'
string: ''
string: 'createdBy'
string: '10'
string: 'editedOn'
string: ''
string: 'editedBy'
string: '10'
string: 'nodiff'
string: 'name'
string: 'objectCount'
string: 'UID'
string: 'name'
string: 'namelc'
string: 'objectCount'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: ''
string: "&lt;kobject type='tags_tag'&gt;\n"
string: "    &lt;UID&gt;"
string: "&lt;/UID&gt;\n"
string: "    &lt;name&gt;"
string: "&lt;/name&gt;\n"
string: "    &lt;namelc&gt;"
string: "&lt;/namelc&gt;\n"
string: "    &lt;objectCount&gt;"
string: "&lt;/objectCount&gt;\n"
string: "    &lt;createdOn&gt;"
string: "&lt;/createdOn&gt;\n"
string: "    &lt;createdBy&gt;"
string: "&lt;/createdBy&gt;\n"
string: "    &lt;editedOn&gt;"
string: "&lt;/editedOn&gt;\n"
string: "    &lt;editedBy&gt;"
string: "&lt;/editedBy&gt;\n"
string: "&lt;/kobject&gt;\n"
string: "&lt;?xml version='1.0' encoding='UTF-8' ?&gt;\n"
string: 'viewUrl'
string: ''
string: 'viewLink'
string: ''
string: 'editUrl'
string: ''
string: 'editLink'
string: ''
string: 'delUrl'
string: ''
string: 'delLink'
string: ''
string: 'newUrl'
string: ''
string: 'newLink'
string: ''
string: 'tags'
string: 'tags_tag'
string: 'show'
string: 'viewUrl'
string: '%%serverPath%%Tags/showtag/'
string: 'UID'
string: 'viewLink'
string: "&lt;a href='"
string: 'viewUrl'
string: "'&gt;[ more &amp;gt;gt; ]&lt;/a&gt;"
string: 'tags'
string: 'tags_tag'
string: 'edit'
string: 'edit'
string: 'editUrl'
string: '%%serverPath%%Tags/edittag/'
string: 'UID'
string: 'editLink'
string: "&lt;a href='"
string: 'editUrl'
string: "'&gt;[ edit ]&lt;/a&gt;"
string: 'tags'
string: 'tags_tag'
string: 'edit'
string: 'delete'
string: 'delUrl'
string: '%%serverPath%%Tags/deltag/'
string: 'UID'
string: 'delLink'
string: "&lt;a href='"
string: 'delUrl'
string: "'&gt;[ delete ]&lt;/a&gt;"
string: 'UIDJsClean'
string: 'UID'
string: "namelc='"
string: "'"
string: 'tags_tag'
string: '*'
string: 'UID'
string: "tagUID='"
string: "'"
string: 'tags_index'

<b>scanning file: /var/www/an2google/trunk/modules/tags/models/index.mod.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	Relates objects to tags
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //member variables
comment: //----------------------------------------------------------------------------------------------
comment: //_	currently loaded database record [array]
comment: //_	database table definition [array]
comment: //_	set to true when an object has been loaded [bool]
comment: //_ UID [string]
comment: //_ module [string]
comment: //_ model [string]
comment: //_ ref:*_* [string]
comment: //_ varchar(10) [string]
comment: //_ ref:Tags_Tag [string]
comment: //_ datetime [string]
comment: //_ ref:Users_User [string]
comment: //_ datetime [string]
comment: //_ ref:Users_User [string]
comment: //----------------------------------------------------------------------------------------------
comment: //. constructor
comment: //----------------------------------------------------------------------------------------------
comment: //opt: UID - UID of a Index object [string]
comment: // initialise table schema
comment: // try load an object from the database
comment: // check if we did
comment: // make new object
comment: // initialize
comment: //----------------------------------------------------------------------------------------------
comment: //. load an object from the database given its UID
comment: //----------------------------------------------------------------------------------------------
comment: //arg: UID - UID of a Index object [string]
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //. load Index object serialized as an associative array
comment: //----------------------------------------------------------------------------------------------
comment: //arg: ary - associative array of members and values [array]
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //. save the current object to database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string on success, html report of errors on failure [string]
comment: //: $db-&gt;save(...) will raise an object_updated event if successful
comment: //----------------------------------------------------------------------------------------------
comment: //. check that object is correct before allowing it to be stored in database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string if object passes, warning message if not [string]
comment: //----------------------------------------------------------------------------------------------
comment: //. database table definition and content versioning
comment: //----------------------------------------------------------------------------------------------
comment: //returns: information for constructing SQL queries [array]
comment: //table columns
comment: //these fields will be indexed
comment: //revision history will be kept for these fields
comment: //----------------------------------------------------------------------------------------------
comment: //. serialize this object to an array
comment: //----------------------------------------------------------------------------------------------
comment: //returns: associative array of all members which define this instance [array]
comment: //----------------------------------------------------------------------------------------------
comment: //. serialize this object to xml
comment: //----------------------------------------------------------------------------------------------
comment: //arg: xmlDec - include xml declaration? [bool]
comment: //arg: indent - string with which to indent lines [bool]
comment: //returns: xml serialization of this object [string]
comment: //NOTE: any members which are not XML clean should be marked up before sending
comment: //----------------------------------------------------------------------------------------------
comment: //. make an extended array of data views may need
comment: //----------------------------------------------------------------------------------------------
comment: //returns: associative array of members, metadata and partial views [array]
comment: //% extended array of properties [array:string]
comment: //------------------------------------------------------------------------------------------
comment: //	links
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	javascript
comment: //------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //. discover if a given object has a tag
comment: //----------------------------------------------------------------------------------------------
comment: //arg: refModule - name of a kapenta module [string]
comment: //arg: refModel - type of object which may have a tag [string]
comment: //arg: refUID - UID of objectr which may have a tag [string]
comment: //arg: tagUID - UID of a Tags_Tag object [string]
comment: //returns: UID of Tags_Index or false on failure [string][bool]
comment: //----------------------------------------------------------------------------------------------
comment: //. delete current object from the database
comment: //----------------------------------------------------------------------------------------------
comment: //: $db-&gt;delete(...) will raise an object_deleted event on success [bool]
comment: //returns: true on success, false on failure [bool]
comment: // nothing to do
string: ''
string: ''
string: 'UID'
string: 'refModule'
string: 'refModel'
string: 'refUID'
string: 'status'
string: 'tagUID'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: ''
string: "Database error.&lt;br/&gt;\n"
string: ''
string: ''
string: ''
string: "No UID.&lt;br/&gt;\n"
string: 'module'
string: 'tags'
string: 'model'
string: 'tags_index'
string: 'archive'
string: 'yes'
string: 'fields'
string: 'UID'
string: 'VARCHAR(33)'
string: 'refModule'
string: 'TEXT'
string: 'refModel'
string: 'TEXT'
string: 'refUID'
string: 'VARCHAR(33)'
string: 'status'
string: 'VARCHAR(10)'
string: 'tagUID'
string: 'VARCHAR(33)'
string: 'createdOn'
string: 'DATETIME'
string: 'createdBy'
string: 'VARCHAR(33)'
string: 'editedOn'
string: 'DATETIME'
string: 'editedBy'
string: 'VARCHAR(33)'
string: 'indices'
string: 'UID'
string: '10'
string: 'refModule'
string: '10'
string: 'refModel'
string: '10'
string: 'refUID'
string: '10'
string: 'status'
string: '10'
string: 'tagUID'
string: '10'
string: 'createdOn'
string: ''
string: 'createdBy'
string: '10'
string: 'editedOn'
string: ''
string: 'editedBy'
string: '10'
string: 'nodiff'
string: 'status'
string: 'tagUID'
string: 'UID'
string: 'refModule'
string: 'refModel'
string: 'refUID'
string: 'status'
string: 'tagUID'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: ''
string: "&lt;kobject type='tags_index'&gt;\n"
string: "    &lt;UID&gt;"
string: "&lt;/UID&gt;\n"
string: "    &lt;refModule&gt;"
string: "&lt;/refModule&gt;\n"
string: "    &lt;refModel&gt;"
string: "&lt;/refModel&gt;\n"
string: "    &lt;refUID&gt;"
string: "&lt;/refUID&gt;\n"
string: "    &lt;status&gt;"
string: "&lt;/status&gt;\n"
string: "    &lt;tagUID&gt;"
string: "&lt;/tagUID&gt;\n"
string: "    &lt;createdOn&gt;"
string: "&lt;/createdOn&gt;\n"
string: "    &lt;createdBy&gt;"
string: "&lt;/createdBy&gt;\n"
string: "    &lt;editedOn&gt;"
string: "&lt;/editedOn&gt;\n"
string: "    &lt;editedBy&gt;"
string: "&lt;/editedBy&gt;\n"
string: "&lt;/kobject&gt;\n"
string: "&lt;?xml version='1.0' encoding='UTF-8' ?&gt;\n"
string: 'viewUrl'
string: ''
string: 'viewLink'
string: ''
string: 'editUrl'
string: ''
string: 'editLink'
string: ''
string: 'delUrl'
string: ''
string: 'delLink'
string: ''
string: 'newUrl'
string: ''
string: 'newLink'
string: ''
string: 'tags'
string: 'tags_index'
string: 'show'
string: 'viewUrl'
string: '%%serverPath%%Tags/showindex/'
string: 'UID'
string: 'viewLink'
string: "&lt;a href='"
string: 'viewUrl'
string: "'&gt;[ more &amp;gt;gt; ]&lt;/a&gt;"
string: 'tags'
string: 'tags_index'
string: 'edit'
string: 'edit'
string: 'editUrl'
string: '%%serverPath%%Tags/editindex/'
string: 'UID'
string: 'editLink'
string: "&lt;a href='"
string: 'editUrl'
string: "'&gt;[ edit ]&lt;/a&gt;"
string: 'tags'
string: 'tags_index'
string: 'edit'
string: 'delete'
string: 'delUrl'
string: '%%serverPath%%Tags/delindex/'
string: 'UID'
string: 'delLink'
string: "&lt;a href='"
string: 'delUrl'
string: "'&gt;[ delete ]&lt;/a&gt;"
string: 'UIDJsClean'
string: 'UID'
string: "refModule='"
string: "'"
string: "refModel='"
string: "'"
string: "refUID='"
string: "'"
string: "tagUID='"
string: "'"
string: 'tags_index'
string: '*'
string: 'UID'

<b>scanning file: /var/www/an2google/trunk/modules/tags/inc/maintenance.inc.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	maintenance script for Tags module
comment: //--------------------------------------------------------------------------------------------------
comment: //+	reports are human-readable HTML, with script-readable HTML comments
comment: //--------------------------------------------------------------------------------------------------
comment: //|	install the Tags module
comment: //--------------------------------------------------------------------------------------------------
comment: //returns: html report or false if not authorized [string][bool]
comment: //----------------------------------------------------------------------------------------------
comment: //	check all Index objects
comment: //----------------------------------------------------------------------------------------------
comment: // remove database markup
comment: // load into model
comment: //------------------------------------------------------------------------------------------
comment: //	check references to other objects
comment: //------------------------------------------------------------------------------------------
comment: //TODO: complete this check, make sure tagged objects exist
comment: /*
		if (false == $db-&gt;objectExists('*_*', $model-&gt;refUID)) {
			// TODO: take action here, if possibe assign valid reference to a *_*
			$errors[] = array($model-&gt;UID, $model-&gt;UID, 'invalid reference (refUID:*_*)');
			$errorCount++;
		}
		*/
comment: // TODO: take action here, if possibe assign valid reference to a Tags_Tag
comment: // TODO: take action here, if possibe assign valid reference to a Users_User
comment: // TODO: take action here, if possibe assign valid reference to a Users_User
comment: // end while Tags_Index
comment: //----------------------------------------------------------------------------------------------
comment: //	add Index objects to report
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check all Tag objects
comment: //----------------------------------------------------------------------------------------------
comment: // remove database markup
comment: // load into model
comment: //------------------------------------------------------------------------------------------
comment: //	check references to other objects
comment: //------------------------------------------------------------------------------------------
comment: // TODO: take action here, if possibe assign valid reference to a Users_User
comment: // TODO: take action here, if possibe assign valid reference to a Users_User
comment: // end while Tags_Tag
comment: //----------------------------------------------------------------------------------------------
comment: //	add Tag objects to report
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	done
comment: //----------------------------------------------------------------------------------------------
string: 'modules/tags/models/index.mod.php'
string: 'modules/tags/models/tag.mod.php'
string: 'admin'
string: ''
string: 'UID'
string: 'UID'
string: 'error'
string: "select * from Tags_Index"
string: 'tags_tag'
string: 'invalid reference (tagUID:Tags_Tag)'
string: 'users_user'
string: 'invalid reference (createdBy:Users_User)'
string: 'users_user'
string: 'invalid reference (editedBy:Users_User)'
string: 'UID'
string: 'name'
string: 'error'
string: "select * from Tags_Tag"
string: 'users_user'
string: 'invalid reference (createdBy:Users_User)'
string: 'users_user'
string: 'invalid reference (editedBy:Users_User)'

<b>scanning file: /var/www/an2google/trunk/modules/tags/inc/install.inc.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	install script for Tags module
comment: //--------------------------------------------------------------------------------------------------
comment: //+	reports are human-readable HTML, with script-readable HTML comments
comment: //--------------------------------------------------------------------------------------------------
comment: //|	install the Tags module
comment: //--------------------------------------------------------------------------------------------------
comment: //returns: html report or false if not authorized [string][bool]
comment: //----------------------------------------------------------------------------------------------
comment: //	create or upgrade Tags_Index table
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	create or upgrade Tags_Tag table
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	done
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
comment: //|	discover if this module is installed
comment: //--------------------------------------------------------------------------------------------------
comment: //:	if installed correctly report will contain HTML comment &lt;!-- installed correctly --&gt;
comment: //returns: HTML installation status report [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	ensure the table which stores Index objects exists and is correct
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	ensure the table which stores Tag objects exists and is correct
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	done
comment: //----------------------------------------------------------------------------------------------
string: 'core/dbdriver/mysqladmin.dbd.php'
string: 'modules/tags/models/index.mod.php'
string: 'modules/tags/models/tag.mod.php'
string: 'admin'
string: ''
string: 'admin'
string: ''
string: '&lt;!-- table installed correctly --&gt;'
string: '&lt;!-- module installed correctly --&gt;'

<b>scanning file: /var/www/an2google/trunk/modules/tags/actions/removetag.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	untag an object, given the tag index UID as reference
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check reference and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	remove the tag and redirect back to /tags/edittags/ iframe
comment: //----------------------------------------------------------------------------------------------
comment: // delete the index object
comment: // update the tag object with new count
string: 'modules/tags/models/tag.mod.php'
string: 'modules/tags/models/index.mod.php'
string: ''
string: 'Reference UID not given.'
string: 'true'
string: 'Not Tagged.'
string: 'tags-manage'
string: 'Not authorized to edit tags.'
string: 'tags/edittags'
string: '/refModule_'
string: '/refModel_'
string: '/refUID_'
string: '/'
string: 'Removed tag: '
string: 'ok'
string: 'Could not remove tag: '
string: 'bad'
string: 'Could not update tag object: '
string: 'bad'

<b>scanning file: /var/www/an2google/trunk/modules/tags/actions/edittags.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	iframe console to allow user editing of tags and tag indexes
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check references and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	show the iframe
comment: //----------------------------------------------------------------------------------------------
string: 'refModule'
string: 'no refModule'
string: 'refModel'
string: 'no refModel'
string: 'refUID'
string: 'no refUID'
string: 'refModule'
string: 'refModel'
string: 'refUID'
string: 'No such module.'
string: 'No such object.'
string: 'tags-manage'
string: "You dont have permissions to edit tags on this item."
string: 'modules/tags/actions/edittags.if.page.php'
string: 'refModule'
string: 'refModel'
string: 'refUID'

<b>scanning file: /var/www/an2google/trunk/modules/tags/actions/add.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	tag an existing object
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check if this tag exists, create it if it does not
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check that this tag has not already been added
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	add the tag and redirect back to /edittags/ iframe
comment: //----------------------------------------------------------------------------------------------
string: 'modules/tags/models/tag.mod.php'
string: 'modules/tags/models/index.mod.php'
string: 'action'
string: 'action not specified'
string: 'addTag'
string: 'action'
string: 'action not specified'
string: 'refModule'
string: 'no refModule'
string: 'refModel'
string: 'no refModel'
string: 'refUID'
string: 'no refUID'
string: 'tagName'
string: 'no tagName'
string: 'refModule'
string: 'refModel'
string: 'refUID'
string: 'tagName'
string: 'No such module.'
string: 'No such owner.'
string: 'tags-manage'
string: 'Not authorized to edit tags.'
string: "tags/edittags/refModule_$refModule/refModel_$refModel/refUID_$refUID/"
string: ''
string: "No tag given."
string: 'bad'
string: ''
string: 'Started new tag: '
string: "Could not create tag: "
string: 'bad'
string: "Tag already added: "
string: 'info'
string: ''
string: "Added tag: "
string: 'ok'
string: "Could not add tag:&lt;br/&gt;\n"
string: 'bad'

<b>scanning file: /var/www/an2google/trunk/modules/sync/views/syncqueue.fn.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //|	list of items in the sync queue
comment: //-------------------------------------------------------------------------------------------------
comment: //opt: pageNo - results page to display, starting from 1 (int) [string]
comment: //opt: num - maximum number of sync notices per page, default is 100 (int) [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and user role
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	count sync notices and load a page of them from the database (if any)
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
string: ''
string: 'admin'
string: ''
string: 'pageNo'
string: 'pageNo'
string: 'num'
string: 'num'
string: 'sync_notice'
string: ''
string: 'sync_notice'
string: '*'
string: ''
string: 'editedOn'
string: "&lt;div class='inlinequote'&gt;There are no outstanding sync notices at present.&lt;/div&gt;"
string: 'Source'
string: 'Type'
string: 'Peer'
string: 'Status'
string: 'Recieved'
string: '[x]'
string: "&lt;a href='%%serverPath%%sync/showqueueitem/"
string: 'UID'
string: "'&gt;&amp;gt;&amp;gt;&lt;/a&gt;"
string: 'source'
string: 'type'
string: 'peer'
string: 'status'
string: 'received'
string: '%%serverPath%%sync/showqueue/'
string: "[[:theme::pagination::page=$pageNo::total=$totalPages::link=$link:]]\n"
string: "&lt;small&gt;&lt;b&gt;Showing $start to $finish of $totalItems sync notices.&lt;/b&gt;&lt;/small&gt;&lt;br/&gt;"

<b>scanning file: /var/www/an2google/trunk/modules/sync/views/synclist.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	summary list 
comment: //--------------------------------------------------------------------------------------------------
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check user is an admin
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	query database
comment: //----------------------------------------------------------------------------------------------
comment: //$sql = "select * from servers order by direction";
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/sync/models/server.mod.php'
string: 'modules/sync/models/notice.mod.php'
string: ''
string: 'admin'
string: 'sync_server'
string: '*'
string: ''
string: 'direction'
string: "(no servers recorded, begin by adding own server)"
string: "&lt;table class='wireframe' width='100%'&gt;\n"
string: "&lt;tr&gt;&lt;td class='title'&gt;Name&lt;/td&gt;"
string: "&lt;td class='title'&gt;Direction&lt;/td&gt;"
string: "&lt;td class='title'&gt;Active&lt;/td&gt;"
string: "&lt;td class='title'&gt;[x]&lt;/td&gt;&lt;td class='title'&gt;[x]&lt;/td&gt;&lt;/tr&gt;\n"
string: "&lt;a href='%%serverPath%%sync/syncallfiles/"
string: 'UID'
string: "'&gt;[sync all files]&lt;/a&gt;"
string: "&lt;a href='%%serverPath%%sync/syncwith/"
string: 'UID'
string: "'&gt;[sync database only]&lt;/a&gt;"
string: "\t&lt;tr&gt;\n"
string: "\t\t&lt;td class='wireframe'&gt;"
string: 'servername'
string: "&lt;/td&gt;\n"
string: "\t\t&lt;td class='wireframe'&gt;"
string: 'direction'
string: "&lt;/td&gt;\n"
string: "\t\t&lt;td class='wireframe'&gt;"
string: 'active'
string: "&lt;/td&gt;\n"
string: "\t\t&lt;td class='wireframe'&gt;"
string: "&lt;/td&gt;\n"
string: "\t\t&lt;td class='wireframe'&gt;"
string: "&lt;/td&gt;\n"
string: "\t&lt;/tr&gt;\n"
string: "&lt;/table&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/sync/views/showserver.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	show
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - recordAlias or UID of a peer server record [string]
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/sync/models/server.mod.php'
string: 'modules/sync/models/notice.mod.php'
string: 'raUID'
string: 'raUID'
string: ''
string: 'modules/sync/show.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/sync/views/serversummarynav.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	summarise for the nav (300 wide)
comment: //--------------------------------------------------------------------------------------------------
comment: // * $args['raUID'] = recordAlias or UID or groups entry
comment: // * $args['postUID'] = overrides raUID
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make and return the block
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/sync/models/server.mod.php'
string: 'modules/sync/models/notice.mod.php'
string: ''
string: 'postUID'
string: 'raUID'
string: 'postUID'
string: 'raUID'
string: 'raUID'
string: 'modules/sync/summarynav.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/sync/views/serversummary.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	summary
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: UID - UID of a peer server record [string]
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/sync/models/server.mod.php'
string: 'modules/sync/models/notice.mod.php'
string: 'admin'
string: ''
string: 'UID'
string: 'UID'
string: 'modules/sync/summary.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/sync/views/serverlist.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	summary list 
comment: //--------------------------------------------------------------------------------------------------
comment: //TODO: use arrayToHtmlTable
comment: //% return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check user role
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	query database
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/sync/models/server.mod.php'
string: 'modules/sync/models/notice.mod.php'
string: ''
string: 'admin'
string: 'sync_server'
string: '*'
string: ''
string: "(no servers recorded, begin by adding own server)"
string: "&lt;table class='wireframe' width='100%'&gt;\n"
string: "&lt;tr&gt;&lt;td class='title'&gt;Name&lt;/td&gt;&lt;td class='title'&gt;URL&lt;/td&gt;"
string: "&lt;td class='title'&gt;Direction&lt;/td&gt;&lt;td class='title'&gt;Active&lt;/td&gt;"
string: "&lt;td class='title'&gt;[x]&lt;/td&gt;&lt;td class='title'&gt;[x]&lt;/td&gt;&lt;/tr&gt;\n"
string: "&lt;a href='%%serverPath%%sync/editserver/"
string: 'UID'
string: "'&gt;[edit]&lt;/a&gt;"
string: "&lt;a href='%%serverPath%%sync/delserver/"
string: 'UID'
string: "'&gt;[del]&lt;/a&gt;"
string: "\t&lt;tr&gt;\n"
string: "\t\t&lt;td class='wireframe'&gt;"
string: 'servername'
string: "&lt;/td&gt;\n"
string: "\t\t&lt;td class='wireframe'&gt;"
string: 'serverurl'
string: "&lt;/td&gt;\n"
string: "\t\t&lt;td class='wireframe'&gt;"
string: 'direction'
string: "&lt;/td&gt;\n"
string: "\t\t&lt;td class='wireframe'&gt;"
string: 'active'
string: "&lt;/td&gt;\n"
string: "\t\t&lt;td class='wireframe'&gt;"
string: "&lt;/td&gt;\n"
string: "\t\t&lt;td class='wireframe'&gt;"
string: "&lt;/td&gt;\n"
string: "\t&lt;/tr&gt;\n"
string: "&lt;/table&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/sync/views/queueitem.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	summary list 
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: itemUID - UID of sync queue item [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	conditional - dbUpdate
comment: //---------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------
comment: //	 a database (SQL) update, base64 encoded XML
comment: //---------------------------------------------------------------------------------
comment: //% handles to children of root node [array]
comment: /*
				$xe = new XmlEntity($model-&gt;data);
				foreach ($xe-&gt;children as $child) {
					if ('fields' == $child-&gt;type) {
						$fTable = array();
						$fTable[] = array('Field', 'Value');
						foreach ($child-&gt;children as $field) { 
							$fTable[] = array($field-&gt;type, base64_decode($field-&gt;value)); 
						}
						$cond .= $theme-&gt;arrayToHtmlTable($fTable, true, true);
					}
				}
				*/
comment: //	........................................................................
comment: //---------------------------------------------------------------------------------
comment: //	 a database (SQL) update, base64 encoded XML
comment: //---------------------------------------------------------------------------------
comment: //	........................................................................
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/sync/models/server.mod.php'
string: 'modules/sync/models/notice.mod.php'
string: ''
string: 'admin'
string: ''
string: 'itemUID'
string: ''
string: 'itemUID'
string: ''
string: ''
string: "dbUpdate"
string: "&lt;h2&gt;Database (SQL) update, base64 encoded XML&lt;/h2&gt;\n"
string: 'table'
string: 'type'
string: "&lt;b&gt;Model:&lt;/b&gt; "
string: 'value'
string: "&lt;br/&gt;&lt;br/&gt;\n"
string: 'fields'
string: 'type'
string: 'Field'
string: 'Value'
string: "dbDelete"
string: "&lt;h2&gt;Database (SQL) deletion instruction, XML&lt;/h2&gt;\n"
string: 'dataHtml'
string: 'dataHtml'
string: "\n"
string: "&lt;br/&gt;\n"
string: 'dataHtml'
string: 'dataHtml'
string: "\t"
string: "&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;"
string: 'dataHtml'
string: 'conditionalData'
string: 'modules/sync/views/queueitem.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/sync/views/menu.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	menu
comment: //--------------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/sync/models/server.mod.php'
string: 'modules/sync/models/notice.mod.php'
string: 'modules/sync/views/menu.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/sync/views/editserverform.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	form for editing a peer record
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - UID of server record [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/sync/models/server.mod.php'
string: 'modules/sync/models/notice.mod.php'
string: ''
string: 'admin'
string: ''
string: 'raUID'
string: ''
string: 'raUID'
string: 'modules/sync/views/editserverform.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/sync/views/downloadlist.fn.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //|	displays this peer's current download list
comment: //-------------------------------------------------------------------------------------------------
comment: //TODO: paginate this, use $db-&gt;loadRange(...)
comment: //----------------------------------------------------------------------------------------------
comment: //	check user role
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	load downloads from the database
comment: //----------------------------------------------------------------------------------------------
comment: //-----------------------------------------------------------------------------------------
comment: //	add all results to a table
comment: //-----------------------------------------------------------------------------------------
comment: //-----------------------------------------------------------------------------------------
comment: //	nothing in download queue
comment: //-----------------------------------------------------------------------------------------
string: ''
string: 'admin'
string: ''
string: "select * from Sync_Download order by status"
string: 'File'
string: 'Status'
string: 'Timestamp'
string: 'filename'
string: 'status'
string: 'timestamp'
string: "&lt;b&gt;"
string: " items in download queue.&lt;/b&gt;\n"
string: "&lt;b&gt;(download queue is empty)&lt;/b&gt;&lt;br/&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/sync/views/clearqueueform.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	form to add a new server (formatted for nav)
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/sync/models/server.mod.php'
string: 'modules/sync/models/notice.mod.php'
string: 'admin'
string: 'modules/sync/views/clearqueueform.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/sync/views/adminconsole.fn.php</b>
comment: //	require_once($kapenta-&gt;installPath . 'modules/sync/models/server.mod.php');
comment: //	require_once($kapenta-&gt;installPath . 'modules/sync/models/notice.mod.php');
comment: //--------------------------------------------------------------------------------------------------
comment: //|	list of controls for this module as displayed on the admin console
comment: //--------------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'admin'
string: ''
string: 'modules/sync/views/adminconsole.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/sync/views/addserverform.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	form to add a new server (formatted for nav)
comment: //--------------------------------------------------------------------------------------------------
string: 'admin'
string: ''
string: 'modules/sync/views/addserverform.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/sync/models/server.mod.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	object to represent server trust relationships
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	member variables (as retieved from database)
comment: //----------------------------------------------------------------------------------------------
comment: //_	currently loaded database record [array]
comment: //_	database table definition [array]
comment: //_	set to true when an object has been loaded [bool]
comment: //_ UID [string]
comment: //_ title [string]
comment: //_ varchar(100) [string]
comment: //_ varchar(50) [string]
comment: //_ varchar(30) [string]
comment: //_ varchar(10) [string]
comment: //_ varchar(22) [string]
comment: //_ TEXT [string]
comment: //_ datetime [string]
comment: //_ ref:Users_User [string]
comment: //_ datetime [string]
comment: //_ ref:Users_User [string]
comment: //----------------------------------------------------------------------------------------------
comment: //. constructor
comment: //----------------------------------------------------------------------------------------------
comment: //opt: UID - UID of a Server object [string]
comment: // initialise table schema
comment: // try load an object from the database
comment: // check if we did
comment: // make new object
comment: // initialize
comment: // set default servername
comment: //----------------------------------------------------------------------------------------------
comment: //. load an object from the db given its UID
comment: //----------------------------------------------------------------------------------------------
comment: //arg: UID - UID of a Server object [string]
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //. load Server object serialized as an associative array
comment: //----------------------------------------------------------------------------------------------
comment: //arg: ary - associative array of members and values [array]
comment: //returns: true on success, false on failure [bool]
comment: //if (false == $db-&gt;validate($ary, $this-&gt;dbSchema)) { return false; }
comment: //----------------------------------------------------------------------------------------------
comment: //. save the current object to database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string on success, html report of errors on failure [string]
comment: //: $db-&gt;save(...) will raise an object_updated event if successful
comment: //----------------------------------------------------------------------------------------------
comment: //. check that object is correct before allowing it to be stored in database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string if object passes, warning message if not [string]
comment: //----------------------------------------------------------------------------------------------
comment: //. database table definition and content versioning
comment: //----------------------------------------------------------------------------------------------
comment: //returns: information for constructing SQL queries [array]
comment: //table columns
comment: //these fields will be indexed
comment: //revision history will not be kept for these fields
comment: //----------------------------------------------------------------------------------------------
comment: //. serialize this object to an array
comment: //----------------------------------------------------------------------------------------------
comment: //returns: associative array of all members which define this instance [array]
comment: //----------------------------------------------------------------------------------------------
comment: //.	make an extended array of all data a view will need
comment: //----------------------------------------------------------------------------------------------
comment: //returns: extended array of member variables and metadata [array]
comment: //------------------------------------------------------------------------------------------
comment: //	links
comment: //------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //. delete current object from the database
comment: //----------------------------------------------------------------------------------------------
comment: //: $db-&gt;delete(...) will raise an object_deleted event on success [bool]
comment: //returns: true on success, false on failure [bool]
comment: // nothing to do
string: ''
string: ''
string: 'New Server '
string: 'UID'
string: 'servername'
string: 'serverurl'
string: 'password'
string: 'direction'
string: 'active'
string: 'lastsync'
string: 'publickey'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: ''
string: "Database error.&lt;br/&gt;\n"
string: ''
string: ''
string: ''
string: "No UID.&lt;br/&gt;\n"
string: 'module'
string: 'sync'
string: 'model'
string: 'sync_server'
string: 'archive'
string: 'yes'
string: 'fields'
string: 'UID'
string: 'VARCHAR(33)'
string: 'servername'
string: 'VARCHAR(255)'
string: 'serverurl'
string: 'VARCHAR(100)'
string: 'password'
string: 'VARCHAR(50)'
string: 'direction'
string: 'VARCHAR(30)'
string: 'active'
string: 'VARCHAR(10)'
string: 'lastsync'
string: 'VARCHAR(22)'
string: 'publickey'
string: 'TEXT'
string: 'createdOn'
string: 'DATETIME'
string: 'createdBy'
string: 'VARCHAR(33)'
string: 'editedOn'
string: 'DATETIME'
string: 'editedBy'
string: 'VARCHAR(33)'
string: 'indices'
string: 'UID'
string: '10'
string: 'createdOn'
string: ''
string: 'createdBy'
string: '10'
string: 'editedOn'
string: ''
string: 'editedBy'
string: '10'
string: 'nodiff'
string: 'UID'
string: 'servername'
string: 'serverurl'
string: 'password'
string: 'direction'
string: 'active'
string: 'lastsync'
string: 'publickey'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: 'editUrl'
string: ''
string: 'editLink'
string: ''
string: 'viewUrl'
string: ''
string: 'viewLink'
string: ''
string: 'delUrl'
string: ''
string: 'delLink'
string: ''
string: 'sync'
string: 'sync_server'
string: 'view'
string: 'viewUrl'
string: '%%serverPath%%sync/server/'
string: 'viewLink'
string: "&lt;a href='"
string: 'viewUrl'
string: "'&gt;[read on &amp;gt;&amp;gt;]&lt;/a&gt;"
string: 'sync'
string: 'sync_server'
string: 'edit'
string: 'editUrl'
string: '%%serverPath%%sync/editserver/'
string: 'editLink'
string: "&lt;a href='"
string: 'editUrl'
string: "'&gt;[edit]&lt;/a&gt;"
string: 'sync'
string: 'sync_server'
string: 'edit'
string: 'delUrl'
string: '%%serverPath%%sync/delserver/'
string: '/'
string: 'delLink'
string: "&lt;a href='"
string: 'delUrl'
string: "'&gt;[delete]&lt;/a&gt;"

<b>scanning file: /var/www/an2google/trunk/modules/sync/models/notice.mod.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	object for recording sync notices
comment: //--------------------------------------------------------------------------------------------------
comment: //+	when an event occurs or we are notified of one by a peer it is stored in the sync table until
comment: //+	successfully rebroadcast to all peers which need to know about it.  Retrying periodically.
comment: //+	
comment: //+	Database fields mean the following:
comment: //+	UID 		- a unique ID
comment: //+	source 		- peer we recieved this from, 'self' if the event occured on this server
comment: //+	type		- type of event, eg 'dbupdate', 'dbdelete', etc
comment: //+	data		- serialized, depends on type
comment: //+	peer		- UID of peer to broadcast this to
comment: //+	status		- locked / failed
comment: //+	received	- when this entry was created
comment: //+	timestamp	- of last attempt to pass on to peer
comment: //----------------------------------------------------------------------------------------------
comment: //	member variables (as retieved from database)
comment: //----------------------------------------------------------------------------------------------
comment: //_	currently loaded database record [array]
comment: //_	database table definition [array]
comment: //_	set to true when an object has been loaded [bool]
comment: //_ UID [string]
comment: //_ varchar(33) [string]
comment: //_ varchar(50) [string]
comment: //_ text [string]
comment: //_ varchar(33) [string]
comment: //_ varchar(30) [string]
comment: //_ VARCHAR(10) [int]
comment: //_ varchar(30) [string]
comment: //_ varchar(30) [string]
comment: //_ datetime [string]
comment: //_ ref:Users_User [string]
comment: //_ datetime [string]
comment: //_ ref:Users_User [string]
comment: //----------------------------------------------------------------------------------------------
comment: //. constructor
comment: //----------------------------------------------------------------------------------------------
comment: //opt: UID - UID of a Notice object [string]
comment: // initialise table schema
comment: // try load an object from the database
comment: // check if we did
comment: // make new object
comment: // initialize
comment: // set receipt time
comment: // set creation time
comment: //----------------------------------------------------------------------------------------------
comment: //. load an object from the db given its UID
comment: //----------------------------------------------------------------------------------------------
comment: //arg: UID - UID of a Notice object [string]
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //. load Notice object serialized as an associative array
comment: //----------------------------------------------------------------------------------------------
comment: //arg: ary - associative array of members and values [array]
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //. save the current object to database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string on success, html report of errors on failure [string]
comment: //: $db-&gt;save(...) will raise an object_updated event if successful
comment: //----------------------------------------------------------------------------------------------
comment: //. check that object is correct before allowing it to be stored in database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string if object passes, warning message if not [string]
comment: //$peer = new Sync_Server($this-&gt;peer);
comment: //if (false == $peer-&gt;loaded) { $report .= "No such peer."; }
comment: //----------------------------------------------------------------------------------------------
comment: //. database table definition and content versioning
comment: //----------------------------------------------------------------------------------------------
comment: //returns: information for constructing SQL queries [array]
comment: //table columns
comment: //these fields will be indexed
comment: //revision history will not be kept for any field
comment: //----------------------------------------------------------------------------------------------
comment: //. serialize this object to an array
comment: //----------------------------------------------------------------------------------------------
comment: //returns: associative array of all members which define this instance [array]
comment: //----------------------------------------------------------------------------------------------
comment: //. make an extended array of data views may need
comment: //----------------------------------------------------------------------------------------------
comment: //returns: associative array of members, metadata and partial views [array]
comment: //------------------------------------------------------------------------------------------
comment: //	links
comment: //------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //. delete current object from the database
comment: //----------------------------------------------------------------------------------------------
comment: //: $db-&gt;delete(...) will raise an object_deleted event on success [bool]
comment: //returns: true on success, false on failure [bool]
comment: // nothing to do
string: ''
string: ''
string: 'UID'
string: 'source'
string: 'type'
string: 'ndata'
string: 'peer'
string: 'status'
string: 'failures'
string: 'received'
string: 'timestamp'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: "Sync_Notification::save()&lt;br/&gt;"
string: ''
string: "Sync_Notification::save() FAILED $report &lt;br/&gt;"
string: "Sync_Notification::save() FAILED Database Error &lt;br/&gt;"
string: "Database error.&lt;br/&gt;\n"
string: "Sync_Notification::save() FINISHED&lt;br/&gt;"
string: ''
string: ''
string: ''
string: "No UID.&lt;br/&gt;\n"
string: 'module'
string: 'sync'
string: 'model'
string: 'sync_notice'
string: 'archive'
string: 'no'
string: 'fields'
string: 'UID'
string: 'VARCHAR(33)'
string: 'source'
string: 'VARCHAR(33)'
string: 'type'
string: 'VARCHAR(50)'
string: 'ndata'
string: 'TEXT'
string: 'peer'
string: 'VARCHAR(33)'
string: 'status'
string: 'VARCHAR(30)'
string: 'failures'
string: 'VARCHAR(10)'
string: 'received'
string: 'VARCHAR(30)'
string: 'timestamp'
string: 'VARCHAR(30)'
string: 'createdOn'
string: 'DATETIME'
string: 'createdBy'
string: 'VARCHAR(33)'
string: 'editedOn'
string: 'DATETIME'
string: 'editedBy'
string: 'VARCHAR(33)'
string: 'indices'
string: 'UID'
string: '10'
string: 'source'
string: '10'
string: 'createdOn'
string: ''
string: 'createdBy'
string: '10'
string: 'editedOn'
string: ''
string: 'editedBy'
string: '10'
string: 'nodiff'
string: 'UID'
string: 'source'
string: 'type'
string: 'ndata'
string: 'peer'
string: 'status'
string: 'failures'
string: 'received'
string: 'timestamp'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: 'UID'
string: 'source'
string: 'type'
string: 'ndata'
string: 'peer'
string: 'status'
string: 'failures'
string: ''
string: 'received'
string: 'timestamp'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: 'viewUrl'
string: ''
string: 'viewLink'
string: ''
string: 'editUrl'
string: ''
string: 'editLink'
string: ''
string: 'delUrl'
string: ''
string: 'delLink'
string: ''
string: 'newUrl'
string: ''
string: 'newLink'
string: ''
string: 'sync'
string: 'sync_notice'
string: 'view'
string: 'UID'
string: 'viewUrl'
string: 'TODO: this'
string: 'viewLink'
string: "&lt;a href='"
string: 'viewUrl'
string: "'&gt;[ more &amp;gt;gt; ]&lt;/a&gt;"
string: 'sync'
string: 'sync_notice'
string: 'edit'
string: 'UID'
string: 'editUrl'
string: '%~%serverPath%~%Sync/editnotice/'
string: 'UID'
string: 'editLink'
string: "&lt;a href='"
string: 'editUrl'
string: "'&gt;[ edit ]&lt;/a&gt;"
string: 'sync'
string: 'sync_notice'
string: 'delete'
string: 'UID'
string: 'delUrl'
string: '%~%serverPath%~%Sync/delnotice/'
string: 'UID'
string: 'delLink'
string: "&lt;a href='"
string: 'delUrl'
string: "'&gt;[ delete ]&lt;/a&gt;"

<b>scanning file: /var/www/an2google/trunk/modules/sync/models/download.mod.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	object for recording files which this peer is currently downloading
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	member variables (as retieved from database)
comment: //----------------------------------------------------------------------------------------------
comment: //_	currently loaded database record [array]
comment: //_	database table definition [array]
comment: //_	set to true when an object has been loaded [bool]
comment: //_ UID [string]
comment: //_ varchar(255) [string]
comment: //_ varchar(255) [string]
comment: //_ varchar(30) [string]
comment: //_ varchar(30) [string]
comment: //_ datetime [string]
comment: //_ ref:Users_User [string]
comment: //_ datetime [string]
comment: //_ ref:Users_User [string]
comment: // number of seconds before the download is abandoned [int]
comment: // maximum number of downloads [int]
comment: //----------------------------------------------------------------------------------------------
comment: //. constructor
comment: //----------------------------------------------------------------------------------------------
comment: //opt: UID - UID of a Download object [string]
comment: // initialise table schema
comment: // try load an object from the database
comment: // check if we did
comment: // make new object
comment: // initialize
comment: //----------------------------------------------------------------------------------------------
comment: //. load an object from the db given its UID
comment: //----------------------------------------------------------------------------------------------
comment: //arg: UID - UID of a Download object [string]
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //. load Download object serialized as an associative array
comment: //----------------------------------------------------------------------------------------------
comment: //arg: ary - associative array of members and values [array]
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //.	save the current object to database
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //. save the current object to database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string on success, html report of errors on failure [string]
comment: //: $db-&gt;save(...) will raise an object_updated event if successful
comment: //----------------------------------------------------------------------------------------------
comment: //. check that object is correct before allowing it to be stored in database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string if object passes, warning message if not [string]
comment: //----------------------------------------------------------------------------------------------
comment: //. database table definition and content versioning
comment: //----------------------------------------------------------------------------------------------
comment: //returns: information for constructing SQL queries [array]
comment: //table columns
comment: //these fields will be indexed
comment: //revision history will not be kept for any field
comment: //----------------------------------------------------------------------------------------------
comment: //. serialize this object to an array
comment: //----------------------------------------------------------------------------------------------
comment: //returns: associative array of all members which define this instance [array]
comment: //----------------------------------------------------------------------------------------------
comment: //.	make an extended array of all data a view will need
comment: //----------------------------------------------------------------------------------------------
comment: //returns: extended array of member variables and metadata [array]
comment: //----------------------------------------------------------------------------------------------
comment: //. delete current object from the database
comment: //----------------------------------------------------------------------------------------------
comment: //: $db-&gt;delete(...) will raise an object_deleted event on success [bool]
comment: //returns: true on success, false on failure [bool]
comment: // nothing to do
comment: //----------------------------------------------------------------------------------------------
comment: //.	clear old entries from the downloads table
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //.	discover if a file is already in download queue
comment: //----------------------------------------------------------------------------------------------
comment: //arg: fileName - relative to installPath [string]
comment: //returns: true if the file is already queued for download, otherwise false [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //.	discover if we're currently busy with too many files
comment: //----------------------------------------------------------------------------------------------
comment: //returns: true if this peer is already downloading maximum number of files, else false [bool]
comment: //TODO: use dbCountRange
comment: //----------------------------------------------------------------------------------------------
comment: //.	get next download
comment: //----------------------------------------------------------------------------------------------
comment: //returns: UID of next - random - download, false if none [string][bool]
string: ''
string: ''
string: 'UID'
string: 'filename'
string: 'hash'
string: 'status'
string: 'timestamp'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: ''
string: "Database error.&lt;br/&gt;\n"
string: ''
string: ''
string: ''
string: "No UID.&lt;br/&gt;\n"
string: ''
string: "No filename.&lt;br/&gt;\n"
string: 'module'
string: 'sync'
string: 'model'
string: 'sync_download'
string: 'archive'
string: 'no'
string: 'fields'
string: 'UID'
string: 'VARCHAR(33)'
string: 'filename'
string: 'VARCHAR(255)'
string: 'hash'
string: 'VARCHAR(255)'
string: 'status'
string: 'VARCHAR(30)'
string: 'timestamp'
string: 'VARCHAR(33)'
string: 'createdOn'
string: 'DATETIME'
string: 'createdBy'
string: 'VARCHAR(33)'
string: 'editedOn'
string: 'DATETIME'
string: 'editedBy'
string: 'VARCHAR(33)'
string: 'indices'
string: 'UID'
string: '10'
string: 'createdOn'
string: ''
string: 'createdBy'
string: '10'
string: 'editedOn'
string: ''
string: 'editedBy'
string: '10'
string: 'nodiff'
string: 'UID'
string: 'filename'
string: 'hash'
string: 'status'
string: 'timestamp'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: 'sync_download'
string: '*'
string: ''
string: 'timestamp'
string: 'UID'
string: "select * from Sync_Download where filename='"
string: "'"
string: "select UID from Sync_Download where status='searching'"
string: "select * from Sync_Download where status='wait' order by rand()"
string: 'UID'

<b>scanning file: /var/www/an2google/trunk/modules/sync/models/deleted.mod.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	object for recording deleted items, so that they are not respawned by the sync
comment: //--------------------------------------------------------------------------------------------------
comment: //+	note that file/image deletions are also stored in this table, with 'refTable' set to
comment: //+	'localfile', and the refUID to relative filename.
comment: //----------------------------------------------------------------------------------------------
comment: //	member variables (as retieved from database)
comment: //----------------------------------------------------------------------------------------------
comment: // currently loaded record [array]
comment: // database structure [array]
comment: //----------------------------------------------------------------------------------------------
comment: //.	constructor
comment: //----------------------------------------------------------------------------------------------
comment: //opt: UID - UID of object recording deleted item (not the UID of the item itself) [string]
comment: //----------------------------------------------------------------------------------------------
comment: //.	load an object given its UID
comment: //----------------------------------------------------------------------------------------------
comment: //arg: UID - UID of obect recording deleted item (not the UID of the item itself) [string]
comment: //----------------------------------------------------------------------------------------------
comment: //.	load an object provided as an associative array
comment: //----------------------------------------------------------------------------------------------
comment: //arg: ary - associative array of fields and values [array]
comment: //----------------------------------------------------------------------------------------------
comment: //.	save the current object to database
comment: //----------------------------------------------------------------------------------------------
comment: // consider alternate save mechanism
comment: //----------------------------------------------------------------------------------------------
comment: //.	verify - check that a object is valid before allowing it to be stored in the database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string if object passes, warning message if not [string]
comment: //----------------------------------------------------------------------------------------------
comment: //.	sql information
comment: //----------------------------------------------------------------------------------------------
comment: //returns: database table layout [array]
comment: //----------------------------------------------------------------------------------------------
comment: //.	serialize this object as an array
comment: //----------------------------------------------------------------------------------------------
comment: //returns: associative array of all variables which define this instance [array]
comment: //----------------------------------------------------------------------------------------------
comment: //.	make an extended array of all data a view will need
comment: //----------------------------------------------------------------------------------------------
comment: //returns: extended array of member variables and metadata [array]
comment: //----------------------------------------------------------------------------------------------
comment: //.	install this module
comment: //----------------------------------------------------------------------------------------------
comment: //returns: html report lines [string]
comment: //, deprecated, this should be handled by ../inc/install.inc.php
comment: //------------------------------------------------------------------------------------------
comment: //	create blog table if it does not exist
comment: //------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //.	delete the current object from the database
comment: //----------------------------------------------------------------------------------------------
string: ''
string: ''
string: ''
string: ''
string: 'UID'
string: "UID not present.\n"
string: 'model'
string: 'delitems'
string: 'fields'
string: 'UID'
string: 'VARCHAR(30)'
string: 'refTable'
string: 'VARCHAR(50)'
string: 'refUID'
string: 'VARCHAR(255)'
string: 'detail'
string: 'TEXT'
string: 'timestamp'
string: 'VARCHAR(20)'
string: 'indices'
string: 'UID'
string: '10'
string: 'refUID'
string: '10'
string: 'refTable'
string: '6'
string: 'nodiff'
string: 'UID'
string: 'table'
string: 'refUID'
string: 'timestamp'
string: "&lt;h3&gt;Installing Deleted Items Table&lt;/h3&gt;\n"
string: 'delitems'
string: 'created deleted items table and indices...&lt;br/&gt;'
string: 'deleted items table already exists...&lt;br/&gt;'
string: 'delitems'

<b>scanning file: /var/www/an2google/trunk/modules/sync/inc/sync.inc.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	utility functions for performing periodic sync operations
comment: //--------------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
comment: //|	sync all database tables
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: serverUID - UID of a Sync_Server object [string]
comment: //returns: html report of sync operations [string]
comment: //%	html [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	load the server's record
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make list of tables to sync
comment: //----------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	get list of all objects in this (remote) table from peer
comment: //------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------
comment: //	download and add to database
comment: //--------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------
comment: //	we have xml, base64_encoded copy of record
comment: //----------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------
comment: //	perform any deletions we've just become aware of
comment: //----------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------
comment: //	record could not be downloaded
comment: //----------------------------------------------------------------------------------
comment: // end foreach changed record
comment: // end foreach table
comment: //----------------------------------------------------------------------------------------------
comment: //	note the time on this peer
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
comment: //|	sync all user files
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: serverUID - UID of a Sync_Server object [string]
comment: //returns: html report of sync operations [string]
comment: //%	return value [string]
comment: //---------------------------------------------------------------------------------------------
comment: //	check reference and admin permissions
comment: //---------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	get a list of all files from the images module and add to download queue
comment: //---------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------
comment: // filename is valid and does not exist on this server
comment: //----------------------------------------------------------------------------------
comment: //$sync-&gt;requestFile($fileName);
comment: //if ((true == $allOk) &amp;&amp; (false === @imagecreatefromstring($raw))) { $allOk = false; }
string: 'modules/sync/models/server.mod.php'
string: ''
string: 'peer not found'
string: "&lt;h1&gt;Sync With: "
string: "&lt;/h1&gt;\n"
string: '_'
string: "&lt;h2&gt;Checking: $table&lt;/h2&gt;\n"
string: "[i] Total Objects: "
string: 'total'
string: "&lt;br/&gt;\n"
string: "[i] Dirty Objects: "
string: 'dirty'
string: "&lt;br/&gt;\n"
string: "[i] URL: "
string: 'url'
string: "&lt;br/&gt;\n"
string: 'update'
string: "[*] Updating object: $table $UID &lt;br/&gt;\n"
string: 'sync/exprecord'
string: '/table_'
string: '/'
string: '[*]'
string: "&lt;br/&gt;\n"
string: 'password'
string: '&lt;/update&gt;'
string: 'table'
string: 'fields'
string: "adding object $UID to table $table &lt;br/&gt;\n"
string: "adding object $UID to table $table \n"
string: 'revisions_deleted'
string: 'fields'
string: 'refModel'
string: 'fields'
string: 'refUID'
string: "[*] Deleting object $refModel $refUID&lt;br/&gt;\n"
string: "[i] confirm $refModel $refUID (deleted)&lt;br/&gt;\n"
string: "[x] could not download $table $UID from $peerUrl &lt;br/&gt;\n"
string: "&lt;textarea rows='10' cols='80'&gt;$recordxml&lt;/textarea&gt;&lt;br/&gt;\n"
string: "&lt;textarea rows='10' cols='80'&gt;"
string: "&lt;/textarea&gt;&lt;br/&gt;\n"
string: "could not download $table $UID from $peerUrl \n"
string: ''
string: ''
string: 'Peer UID not given.'
string: 'No such peer'
string: 'sync/listfiles/format_csv/'
string: "[*] Downloading list: $url&lt;br/&gt;\n"
string: "[i] "
string: " bytes&lt;br/&gt;\n"
string: "\n"
string: ","
string: "[&gt;] $refModule - $refModel - $refUID :: $fileName &lt;br/&gt;\n"
string: ''
string: "[*] Downloaded: "
string: " ("
string: " bytes)&lt;br/&gt;\n"
string: ''
string: "[i] Saved $fileName &lt;br/&gt;\n"
string: "[*] Exists: "
string: "&lt;br/&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/sync/inc/install.inc.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	install script for Sync module
comment: //--------------------------------------------------------------------------------------------------
comment: //+	reports are human-readable HTML, with script-readable HTML comments
comment: //--------------------------------------------------------------------------------------------------
comment: //|	install the Sync module
comment: //--------------------------------------------------------------------------------------------------
comment: //returns: html report or false if not authorized [string][bool]
comment: //----------------------------------------------------------------------------------------------
comment: //	create or upgrade Sync_Download table
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	create or upgrade Sync_Notice table
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	create or upgrade Sync_Server table
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	import any records from previous server table
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	done
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
comment: //|	discover if this module is installed
comment: //--------------------------------------------------------------------------------------------------
comment: //:	if installed correctly report will contain HTML comment &lt;!-- installed correctly --&gt;
comment: //returns: HTML installation status report [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	ensure the table which stores Download objects exists and is correct
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	ensure the table which stores Notice objects exists and is correct
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	ensure the table which stores Server objects exists and is correct
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	done
comment: //----------------------------------------------------------------------------------------------
string: 'core/dbdriver/mysqladmin.dbd.php'
string: 'modules/sync/models/download.mod.php'
string: 'modules/sync/models/notice.mod.php'
string: 'modules/sync/models/server.mod.php'
string: 'admin'
string: ''
string: 'sync_server'
string: 'sync_server'
string: 'publickey'
string: 'fields'
string: "ALTER TABLE Sync_Server ADD `publickey` TEXT AFTER `active` "
string: "Added publickey field to Sync_Server &lt;br/&gt;\n"
string: 'servers'
string: "&lt;b&gt;moved $count records from 'servers' table.&lt;/b&gt;&lt;br/&gt;"
string: 'admin'
string: ''
string: '&lt;!-- table installed correctly --&gt;'
string: '&lt;!-- module installed correctly --&gt;'

<b>scanning file: /var/www/an2google/trunk/modules/sync/inc/cron.inc.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //*	periodic maintenance of sync
comment: //-------------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
comment: //|	hourly cron
comment: //--------------------------------------------------------------------------------------------------
comment: //returns: HTML report of any actions taken [string]
comment: //---------------------------------------------------------------------------------------------
comment: //	delete all failed sync notices more than a day old
comment: //---------------------------------------------------------------------------------------------
comment: // more than 24 hours old?
comment: // instantiate as object
comment: // ....
comment: // and delete
comment: /*

	//---------------------------------------------------------------------------------------------
	//	clear dead wood from downloads table
	//---------------------------------------------------------------------------------------------
	if (true == $db-&gt;tableExists('downloads')) {
		$model = new Sync_Download($req-&gt;ref);
		$model-&gt;clearOldEntries();
	}

	//---------------------------------------------------------------------------------------------
	//	retry failed sync items
	//---------------------------------------------------------------------------------------------
	$sql = "select * from Sync_Notice where status='failed'";	
	$result = $db-&gt;query($sql);
	while ($row = $db-&gt;fetchAssoc($result)) {
		$row = $db-&gt;rmArray($row);
		$od = $installPath . 'data/temp/' . time() . '-' . $row['UID'] . '.sync';
		$url = $serverPath . 'sync/send/' . $row['UID'];
		$shellCmd = "wget --output-document=" . $od . " $url";
		$kapenta-&gt;procExecBackground($shellCmd);
	}

	//---------------------------------------------------------------------------------------------
	//	look for wating downloads
	//---------------------------------------------------------------------------------------------
	$dl = new Sync_Download();
	for ($i = 0; $i &lt; $dl-&gt;numDownloads; $i++) {
		$nextDl = $dl-&gt;getNextDownload();
		if  (($nextDl != false) &amp;&amp; (false == $dl-&gt;maxDownloads()false)) {
			$od = '--output-document=' . $installPath . 'data/temp/' . $kapenta-&gt;createUID() . '.sync';
			$cmd = 'wget ' . $od . ' ' . $serverPath . 'sync/findfile/' . $nextDl;
			$kapenta-&gt;procExecBackground($cmd);	
		}
	}

	//---------------------------------------------------------------------------------------------
	//	delete crap from temp directory
	//---------------------------------------------------------------------------------------------
	$shellCmd = "rm " . $installPath . "data/temp/*.sync";	//TODO: fix this, remove shell_exec
	shell_exec($shellCmd);

	*/
comment: //--------------------------------------------------------------------------------------------------
comment: //|	daily cron
comment: //--------------------------------------------------------------------------------------------------
comment: //returns: HTML report of any actions taken [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	sync with all upstream and downstream hosts
comment: //----------------------------------------------------------------------------------------------
string: 'modules/sync/models/download.mod.php'
string: 'modules/sync/models/notice.mod.php'
string: 'modules/sync/inc/sync.inc.php'
string: '&lt;h2&gt;users_cron_hourly&lt;h2&gt;\n'
string: "select * from Sync_Notice where status='failed'"
string: 'createdOn'
string: ''
string: "active='active'"
string: "(direction='upstream' OR direction='downstream')"
string: 'sync_server'
string: '*'
string: 'UID'
string: 'UID'

<b>scanning file: /var/www/an2google/trunk/modules/sync/actions/testtablele.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	test tablele
comment: //--------------------------------------------------------------------------------------------------
comment: // mothsorchid
string: 'admin'
string: '128205975917440492'
string: 'moblog_post'
string: "Total Objects: "
string: 'total'
string: "&lt;br/&gt;\n"
string: "Dirty Objects: "
string: 'dirty'
string: "&lt;br/&gt;\n"
string: "URL: "
string: 'url'
string: "&lt;br/&gt;\n"
string: 'update'
string: "update object: $table $UID &lt;br/&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/sync/actions/testrecvsql.act.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //	post a spurious sql update to self
comment: //-------------------------------------------------------------------------------------------------
comment: //-------------------------------------------------------------------------------------------------
comment: //	and delete it again
comment: //-------------------------------------------------------------------------------------------------
string: 'modules/sync/models/server.mod.php'
string: 'modules/sync/models/notice.mod.php'
string: 'admin'
string: 'sync/recvsql/'
string: 'UID'
string: 'Sync-timestamp: '
string: 'Sync-proof: '
string: 'Sync-source: '
string: 'serverurl'
string: 'UID'
string: 'refTable'
string: 'moose'
string: 'refUID'
string: 'aliaslc'
string: 'test'
string: 'alias'
string: 'TEST'
string: 'editedOn'
string: 'editedBy'
string: 'test'
string: 'recordalias'
string: 'detail='
string: '&lt;'
string: '&amp;lt;'
string: '&gt;'
string: '&amp;gt;'
string: "sql update result: $result &lt;br/&gt;\n"
string: 'sync/recvsqldelete/'
string: 'UID'
string: 'Sync-timestamp: '
string: 'Sync-proof: '
string: 'Sync-source: '
string: 'serverurl'
string: "&lt;deletion&gt;&lt;table&gt;recordalias&lt;/table&gt;&lt;uid&gt;$uid&lt;/uid&gt;&lt;/deletion&gt;"
string: 'detail='
string: '&lt;'
string: '&amp;lt;'
string: '&gt;'
string: '&amp;gt;'
string: "sql update result: $result &lt;br/&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/sync/actions/testrecvnotice.act.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //*	post a spurious notice to self
comment: //-------------------------------------------------------------------------------------------------
string: 'modules/sync/models/server.mod.php'
string: 'modules/sync/models/notice.mod.php'
string: 'sync/recvnotice/'
string: 'UID'
string: 'Sync-timestamp: '
string: 'Sync-proof: '
string: 'Sync-source: '
string: 'serverurl'
string: 'admin-syspagelogsimple'
string: 'add'
string: " - "
string: ' - '
string: '/test/spurious/'
string: "&lt;notification&gt;\n"
string: "\t&lt;channelid&gt;$channelId&lt;/channelid&gt;\n"
string: "\t&lt;event&gt;$event&lt;/event&gt;\n"
string: "\t&lt;data&gt;$entry&lt;/data&gt;\n"
string: "&lt;/notification&gt;\n"
string: 'detail='
string: '&lt;'
string: '&amp;lt;'
string: '&gt;'
string: '&amp;gt;'
string: "sql update result: $result &lt;br/&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/sync/actions/testeb.act.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //*	test of procExecBackground
comment: //-------------------------------------------------------------------------------------------------
string: 'admin'
string: 'data/temp/'
string: '.jpg'
string: "wget --output-document=$od http://upload.wikimedia.org/wikipedia/commons/thumb/9/96/Portrait_Of_A_Baboon.jpg/785px-Portrait_Of_A_Baboon.jpg"
string: "&lt;br/&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/sync/actions/testdn.act.php</b>
string: 'http://mothsorchid.com/sync/getfile/file_ZGF0YS9pbWFnZXMvNC8xLzEvNDExNDA0MTA2MjYwMzY4NTc2X3RodW1ic20uanBn/'
string: '66awarenet99'
string: 'data/temp/some/new/dir/file.jpg'
string: 'w+'

<b>scanning file: /var/www/an2google/trunk/modules/sync/actions/testallpeers.act.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //	for each peer we know about, check if we're properly configured
comment: //-------------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	only admins can do this
comment: //---------------------------------------------------------------------------------------------
string: "&lt;h1&gt;Testing Peer Connectivity&lt;/h1&gt;\n"
string: "Attempting to connect to peer: "
string: 'servername'
string: "&lt;br/&gt;\n"
string: "UID: "
string: 'UID'
string: "&lt;br/&gt;\n"
string: "URL: "
string: 'serverurl'
string: "&lt;br/&gt;\n"
string: 'serverurl'
string: 'sync/peertest/'
string: 'password'
string: '&gt;'
string: '&amp;gt;'
string: '&lt;'
string: '&amp;lt;'
string: "result:&lt;br/&gt;\n$result&lt;br/&gt;&lt;br/&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/sync/actions/temp.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	testing sync-&gt;bas64DecodeSql();
comment: //--------------------------------------------------------------------------------------------------
comment: //$report = sync_cron_daily();
comment: //echo $report;
string: 'modules/sync/inc/cron.inc.php'

<b>scanning file: /var/www/an2google/trunk/modules/sync/actions/tablele.act.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //*	export a list of records in a table (assuming it has the right field - UID, editedBy, editedOn)
comment: //-------------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	check auth
comment: //---------------------------------------------------------------------------------------------
comment: //if (false == $sync-&gt;authenticate()) { $page-&gt;doXmlError('authentication not valid'); }
comment: //---------------------------------------------------------------------------------------------
comment: //	check table exists and get its schema
comment: //---------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	load and export record list 
comment: //---------------------------------------------------------------------------------------------
comment: //-----------------------------------------------------------------------------------------
comment: //  send only sha1 hash of list (TODO: think of faster way to make hash)
comment: //-----------------------------------------------------------------------------------------
comment: //-----------------------------------------------------------------------------------------
comment: //  print complete list (pipe and newline delimited)
comment: //-----------------------------------------------------------------------------------------
string: ''
string: 'no table specified'
string: '-us-'
string: '_'
string: 'unknown table: '
string: 'UID'
string: 'fields'
string: 'editedOn'
string: 'fields'
string: 'editedBy'
string: 'fields'
string: 'table must contain UID, editedBy, editedOn'
string: 'UID, editedOn'
string: ''
string: 'sha1'
string: 'yes'
string: 'sha1'
string: ''
string: '|'
string: "\n"
string: '|'
string: "\n"

<b>scanning file: /var/www/an2google/trunk/modules/sync/actions/syncwith.bak.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	perform a complete sync with another peer (check all tables and files)
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	load the server's record
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make list of tables to sync
comment: //----------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	get list of all objects in this (remote) table from peer
comment: //------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------
comment: //	download and add to database
comment: //--------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------
comment: //	we have xml, base64_encoded copy of record
comment: //----------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------
comment: //	perform any deletions we've just become aware of
comment: //----------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------
comment: //	record could not be downloaded
comment: //----------------------------------------------------------------------------------
comment: // end foreach changed record
comment: // end foreach table
comment: //----------------------------------------------------------------------------------------------
comment: //	note the time on this peer
comment: //----------------------------------------------------------------------------------------------
string: 'modules/sync/models/server.mod.php'
string: 'admin'
string: 'only admins may do this'
string: ''
string: 'peer not supplied'
string: 'peer not found'
string: "&lt;h1&gt;Sync With: "
string: "&lt;/h1&gt;\n"
string: '_'
string: "&lt;h2&gt;Checking: $table&lt;/h2&gt;\n"
string: "[i] Total Objects: "
string: 'total'
string: "&lt;br/&gt;\n"
string: "[i] Dirty Objects: "
string: 'dirty'
string: "&lt;br/&gt;\n"
string: "[i] URL: "
string: 'url'
string: "&lt;br/&gt;\n"
string: 'update'
string: "[*] Updating object: $table $UID &lt;br/&gt;\n"
string: 'sync/exprecord'
string: '/table_'
string: '/'
string: '[*]'
string: "&lt;br/&gt;\n"
string: 'password'
string: '&lt;/update&gt;'
string: 'table'
string: 'fields'
string: "adding object $UID to table $table &lt;br/&gt;\n"
string: "adding object $UID to table $table \n"
string: 'revisions_deleted'
string: 'fields'
string: 'refModel'
string: 'fields'
string: 'refUID'
string: "[*] Deleting object $refModel $refUID&lt;br/&gt;\n"
string: "[i] confirm $refModel $refUID (deleted)&lt;br/&gt;\n"
string: "[x] could not download $table $UID from $peerUrl &lt;br/&gt;\n"
string: "&lt;textarea rows='10' cols='80'&gt;$recordxml&lt;/textarea&gt;&lt;br/&gt;\n"
string: "&lt;textarea rows='10' cols='80'&gt;"
string: "&lt;/textarea&gt;&lt;br/&gt;\n"
string: "could not download $table $UID from $peerUrl \n"

<b>scanning file: /var/www/an2google/trunk/modules/sync/actions/syncwith.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	perform a complete sync with another peer (check all tables and files)
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	load the server's record
comment: //----------------------------------------------------------------------------------------------
string: 'modules/sync/models/server.mod.php'
string: 'modules/sync/inc/sync.inc.php'
string: 'admin'
string: 'only admins may do this'
string: ''
string: 'peer not supplied'
string: 'peer not found'

<b>scanning file: /var/www/an2google/trunk/modules/sync/actions/syncimages.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	copy any outstanding images from another peer
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check user role and reference
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	find all outstanding images, excluding transforms
comment: //----------------------------------------------------------------------------------------------
string: 'modules/sync/models/server.mod.php'
string: 'admin'
string: ''
string: 'Peer not speicifed.'
string: 'No such peer.'
string: "select * from Images_Image where refModel != 'images_image'"
string: ''
string: 'fileName'
string: 'fileName'
string: "[i] File does not exist on server: "
string: 'fileName'
string: "&lt;br/&gt;\n"
string: 'fileName'
string: "[*] Downloaded $imgUrl ("
string: " bytes)&lt;br/&gt;\n"
string: ''
string: 'hash'
string: 'hash'
string: "Error downloading file $imgUrl (hash mismatch)&lt;br/&gt;"
string: "\n"
string: ''
string: "Error downloading file $imgUrl (not a valid image)&lt;br/&gt;"
string: "\n"
string: 'fileName'
string: "Downloaded image $imgUrl (OK)&lt;br/&gt;"
string: "Downloaded image $imgUrl (object "
string: 'UID'
string: ")(OK)&lt;br/&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/sync/actions/syncallfiles.bak.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //*	download all outstanding files from a peer
comment: //-------------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	check reference and admin permissions
comment: //---------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	get a list of all files from the images module and add to download queue
comment: //---------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------
comment: // filename is valid and does not exist on this server
comment: //----------------------------------------------------------------------------------
comment: //$sync-&gt;requestFile($fileName);
comment: //if ((true == $allOk) &amp;&amp; (false === @imagecreatefromstring($raw))) { $allOk = false; }
comment: //$page-&gt;do302('sync/downloads/');	
string: 'modules/sync/models/server.mod.php'
string: 'admin'
string: ''
string: 'Peer UID not given.'
string: 'No such peer'
string: 'sync/listfiles/format_csv/'
string: "[*] Downloading list: $url&lt;br/&gt;\n"
string: "[i] "
string: " bytes&lt;br/&gt;\n"
string: "\n"
string: ","
string: "[&gt;] $refModule - $refModel - $refUID :: $fileName &lt;br/&gt;\n"
string: ''
string: "[*] Downloaded: "
string: " ("
string: " bytes)&lt;br/&gt;\n"
string: ''
string: "[i] Saved $fileName &lt;br/&gt;\n"
string: "[*] Exists: "
string: "&lt;br/&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/sync/actions/syncallfiles.act.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //*	download all outstanding files from a peer
comment: //-------------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	check reference and admin permissions
comment: //---------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	get a list of all files from the images module and add to download queue
comment: //---------------------------------------------------------------------------------------------
string: 'modules/sync/models/server.mod.php'
string: 'modules/sync/inc/sync.inc.php'
string: 'admin'
string: ''
string: 'Peer UID not given.'
string: 'No such peer'

<b>scanning file: /var/www/an2google/trunk/modules/sync/actions/showqueueitem.act.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //*	display an item from the sync queue
comment: //-------------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	auth and reference
comment: //---------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	render the page
comment: //---------------------------------------------------------------------------------------------
string: 'modules/sync/models/notice.mod.php'
string: 'admin'
string: ''
string: 'modules/sync/actions/showqueueitem.page.php'
string: 'itemUID'

<b>scanning file: /var/www/an2google/trunk/modules/sync/actions/showqueue.act.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //	displays the contents of the sync queue, P2P messages waiting to be sent
comment: //-------------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	check arguments and authentication
comment: //---------------------------------------------------------------------------------------------
comment: // admins only
comment: //---------------------------------------------------------------------------------------------
comment: //	show the page
comment: //---------------------------------------------------------------------------------------------
string: 'admin'
string: 'page'
string: 'page'
string: 'modules/sync/actions/showqueue.page.php'
string: 'pageNo'

<b>scanning file: /var/www/an2google/trunk/modules/sync/actions/send.act.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //*	pass a new/changed object on to a peer
comment: //-------------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	load the sync item
comment: //---------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	post it
comment: //---------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	
comment: //---------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	check peer response
comment: //---------------------------------------------------------------------------------------------
comment: //-----------------------------------------------------------------------------------------
comment: //	sync failed, retry
comment: //-----------------------------------------------------------------------------------------
comment: //-----------------------------------------------------------------------------------------
comment: //	sync completed successfully, we can delete this Sync_Notice
comment: //-----------------------------------------------------------------------------------------
string: 'modules/sync/models/notice.mod.php'
string: 'modules/sync/models/server.mod.php'
string: "**** /SYNC/SEND/ ****.&lt;br/&gt;\n"
string: ''
string: "/SYNC/SEND/ **** item not specified.&lt;br/&gt;\n"
string: 'item not specified'
string: 'sync_notice'
string: "/SYNC/SEND/ **** no such item.&lt;br/&gt;\n"
string: 'no such item'
string: "No such sync notice: "
string: "&lt;br/&gt;\n"
string: 'no such item'
string: 'failed three times'
string: '&lt;table&gt;&lt;/table&gt;'
string: "Bad data - table not specified.&lt;br/&gt;\n"
string: 'invalid update'
string: "No such sync server: "
string: "&lt;br/&gt;\n"
string: 'no such server'
string: ''
string: 'dbUpdate'
string: 'sync/recvsql/'
string: 'dbDelete'
string: 'sync/recvsqldelete/'
string: 'fileCreate'
string: 'sync/recvfilecreate/'
string: 'fileDelete'
string: 'sync/recvfiledelete/'
string: 'notification'
string: 'sync/recvnotice/'
string: 'locked'
string: 'detail='
string: 'send: '
string: " result: "
string: "&lt;br/&gt;\n"
string: 'send model data: '
string: "&lt;br/&gt;\n"
string: 'send postvars: '
string: "&lt;br/&gt;\n"
string: ' '
string: '&lt;ok/&gt;'
string: "send failure:\n$result\n"
string: 'failed'
string: "send success:\n$result\n"
string: "Could not delete Notice: "
string: "\n"
string: "Deleted notice: "
string: " (send complete)\n"

<b>scanning file: /var/www/an2google/trunk/modules/sync/actions/save.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	save updates to server records
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check user role and POST vars
comment: //----------------------------------------------------------------------------------------------
comment: // only admins can use this module
comment: //----------------------------------------------------------------------------------------------
comment: //	load and update the Sync_Server object
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check that object was saved and redirect
comment: //----------------------------------------------------------------------------------------------
string: 'modules/sync/models/server.mod.php'
string: 'admin'
string: 'action'
string: 'Action not specified.'
string: 'updateServer'
string: 'action'
string: 'Action not supported.'
string: 'UID'
string: 'Server not specified (UID).'
string: 'UID'
string: "could not load Server $UID"
string: 'servername'
string: 'serverurl'
string: 'password'
string: 'direction'
string: 'active'
string: ''
string: 'Saved changes to server.'
string: 'ok'
string: 'Could not save Server:&lt;br/&gt;'
string: 'bad'
string: 'return'
string: 'return'
string: '/sync/show/'

<b>scanning file: /var/www/an2google/trunk/modules/sync/actions/recvsqldelete.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	recieve a SQL update from a peer
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	authorize
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	get table and uid of record to delete
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: switch ()
comment: //----------------------------------------------------------------------------------------------
comment: //	delete from database
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	add to deleted items and pass on to peers
comment: //----------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	done
comment: //---------------------------------------------------------------------------------------------	
string: 'modules/sync/models/deleted.mod.php'
string: "recieved object deletion request\n"
string: 'could not authenticate'
string: "authenticated for table deletion\n"
string: 'detail'
string: 'deletion notice not sent'
string: ''
string: ''
string: 'detail'
string: 'table'
string: 'uid'
string: ''
string: 'table not specified'
string: ''
string: 'uid not specified'
string: "checking record $delUid from table $delTable &lt;br/&gt;\n"
string: 'no such record'
string: "deleting record $delUid from table $delTable &lt;br/&gt;\n"
string: "delete from "
string: " "
string: "where UID='"
string: "'"
string: 'Sync-source'
string: "&lt;ok/&gt;"

<b>scanning file: /var/www/an2google/trunk/modules/sync/actions/recvsql.act.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //	recieve a SQL update from a peer
comment: //-------------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	authorize
comment: //---------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	add to database
comment: //---------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	pass on to peers
comment: //---------------------------------------------------------------------------------------------	
comment: //$syncHeaders = $sync-&gt;getHeaders();
comment: //$source = $syncHeaders['Sync-Source'];
comment: //$sync-&gt;broadcastDbUpdate($source, $data['table'], $data['fields']);
comment: //---------------------------------------------------------------------------------------------
comment: //	done
comment: //---------------------------------------------------------------------------------------------		
string: "**** /SYNC/RECVSQL/ ****.&lt;br/&gt;\n"
string: "/SYNC/RECVSQL/ could not authenticate.&lt;br/&gt;\n"
string: 'could not authenticate'
string: 'detail'
string: "/SYNC/RECVSQL/ update not sent.&lt;br/&gt;\n"
string: 'update not sent'
string: ''
string: 'detail'
string: "/SYNC/RECVSQL/ update is empty.&lt;br/&gt;\n"
string: 'update is empty'
string: 'detail'
string: 'table'
string: "/SYNC/RECVSQL/ table not synced.&lt;br/&gt;\n"
string: 'table not synced'
string: "received object: "
string: 'table'
string: " ("
string: 'fields'
string: 'UID'
string: ")\n"
string: 'fields'
string: "field: $f value: $v \n"
string: 'table'
string: 'fields'
string: "&lt;ok/&gt;"

<b>scanning file: /var/www/an2google/trunk/modules/sync/actions/recvnotice.act.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //	recieve a notice from peer (some event pages may need to action)
comment: //-------------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	authorize
comment: //---------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	details of notification
comment: //---------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	notify clients
comment: //---------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	pass on to peers
comment: //---------------------------------------------------------------------------------------------	
comment: //---------------------------------------------------------------------------------------------
comment: //	done
comment: //---------------------------------------------------------------------------------------------	
string: 'modules/sync/models/deleted.mod.php'
string: "could not authenticate notice reciept\n"
string: 'could not authenticate'
string: "authenticated notice reciept\n"
string: 'detail'
string: 'deletion notice not sent'
string: ''
string: ''
string: ''
string: 'detail'
string: 'channelid'
string: 'event'
string: 'data'
string: ''
string: 'channelID not specified'
string: ''
string: 'event not specified'
string: "recieved notice of $event on channel $channelID from "
string: 'Sync-Source'
string: " \n"
string: "channelID: $channelID event: $event data: $data \n"
string: 'Sync-Source'
string: "&lt;ok/&gt;"

<b>scanning file: /var/www/an2google/trunk/modules/sync/actions/recvfiledelete.act.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //	recieve notice from peer that a file has been deleted
comment: //-------------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	authorize
comment: //---------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	get fileName (relative URL) and delete it if it exists
comment: //---------------------------------------------------------------------------------------------
comment: // prevent directory traversal
comment: // peers may only advise on deletion of files in /data/
comment: //---------------------------------------------------------------------------------------------
comment: //	add to deleted items
comment: //---------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	pass on to peers
comment: //---------------------------------------------------------------------------------------------	
comment: //---------------------------------------------------------------------------------------------
comment: //	done
comment: //---------------------------------------------------------------------------------------------	
string: 'could not authenticate'
string: 'detail'
string: 'notice not sent'
string: 'detail'
string: "/."
string: 'XXXX'
string: ' '
string: 'data'
string: 'permission denied'
string: 'localfile'
string: 'Sync-source'
string: "&lt;ok/&gt;"

<b>scanning file: /var/www/an2google/trunk/modules/sync/actions/peertest.act.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //	peer connectivity test, used by peers to check whether they have correct details or not
comment: //-------------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	check if password is correct
comment: //---------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	OK, this server is online
comment: //---------------------------------------------------------------------------------------------
string: 'cound not authenticate'
string: "&lt;ok&gt;"
string: "&lt;/ok&gt;"

<b>scanning file: /var/www/an2google/trunk/modules/sync/actions/listservers.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	list all peer servers
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check user roel and any arguments
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	render the page
comment: //----------------------------------------------------------------------------------------------
string: 'admin'
string: 'modules/sync/actions/listservers.page.php'

<b>scanning file: /var/www/an2google/trunk/modules/sync/actions/listfiles.act.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //*	list all files on this server which can be synced
comment: //-------------------------------------------------------------------------------------------------
comment: //	status might be all, missing or present
comment: //	format may be xml, csv or html
comment: //---------------------------------------------------------------------------------------------
comment: //	authorization
comment: //---------------------------------------------------------------------------------------------
comment: //TODO
comment: //---------------------------------------------------------------------------------------------
comment: //	get request arguments
comment: //---------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	get file lists from all modules which implement listfiles
comment: //---------------------------------------------------------------------------------------------
string: 'xml'
string: 'present'
string: 'status'
string: 'status'
string: 'format'
string: 'format'
string: ''
string: "[[:"
string: "::listfiles::status="
string: "::format="
string: ":]]"
string: ''
string: 'xml'
string: "&lt;?xml version=\"1.0\"?&gt;\n&lt;files&gt;\n$output&lt;/files&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/sync/actions/hasfile.act.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //	discover if this peer has a file
comment: //-------------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	authenticate
comment: //---------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	check if the file exists
comment: //---------------------------------------------------------------------------------------------
comment: //-----------------------------------------------------------------------------------------
comment: //	file exists on this server
comment: //-----------------------------------------------------------------------------------------
comment: //-----------------------------------------------------------------------------------------
comment: //	file file does not exist on this server, add to list of files to download
comment: //-----------------------------------------------------------------------------------------
comment: //-------------------------------------------------------------------------------------
comment: //	look for this file on peers, download if found
comment: //-------------------------------------------------------------------------------------
comment: //-------------------------------------------------------------------------------------
comment: //	already searching peers
comment: //-------------------------------------------------------------------------------------
string: 'modules/sync/models/download.mod.php'
string: 'could not authenticate'
string: 'file'
string: 'file not specified'
string: 'file'
string: ''
string: 'file not specified'
string: 'file'
string: 'data/'
string: 'access denied ref: '
string: 'file'
string: ' filename: '
string: '/.'
string: 'XXXX'
string: "&lt;?xml version=\"1.0\"?&gt;\n"
string: "&lt;result&gt;$hash&lt;/result&gt;"
string: "hasfile: file does not exist in download list: $fileName download: "
string: "\n"
string: 'wait'
string: 'sync/findfile/'
string: 'data/temp/'
string: '.sync'
string: "wget --output-document="
string: " $url"
string: "hasfile: file already exists in download list: $fileName \n"
string: "&lt;result&gt;not found&lt;/result&gt;"

<b>scanning file: /var/www/an2google/trunk/modules/sync/actions/gettime.act.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //	returns the time, as this server sees it
comment: //-------------------------------------------------------------------------------------------------
comment: //	used by peers to check that they're all on the same clock

<b>scanning file: /var/www/an2google/trunk/modules/sync/actions/getfile.act.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //	used by peers to request another file from this server
comment: //-------------------------------------------------------------------------------------------------
comment: //	note: file path is base64 encoded string, which may only be within /data/
comment: //---------------------------------------------------------------------------------------------
comment: //	check filename and auth, etc
comment: //---------------------------------------------------------------------------------------------
comment: // check for directory traversal
comment: //---------------------------------------------------------------------------------------------
comment: // check if file exists on this peer
comment: //---------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	send the file, along with sha1, to check it on reciept
comment: //---------------------------------------------------------------------------------------------
string: 'no authorized'
string: 'file'
string: 'no file specified'
string: ''
string: 'file'
string: 'no file specified'
string: 'file'
string: 'data/'
string: 'invalid file'
string: "/.."
string: 'invalid file'
string: 'no such file'
string: "Content-type: binary/sync"
string: "Sha1-hash: "

<b>scanning file: /var/www/an2google/trunk/modules/sync/actions/genkeypair.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	test openSSL key generation
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	authentication (only admins can do this)
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: // generate a bit rsa private key (usually 1024 bit)
comment: //----------------------------------------------------------------------------------------------
comment: // stored in setup.inc.php as a string
comment: //	make new key pair 
comment: //	get the private key
comment: //	get metadata
comment: //	get public key
comment: //----------------------------------------------------------------------------------------------
comment: // wrap for php
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: // render the page
comment: //----------------------------------------------------------------------------------------------
string: 'admin'
string: 'private_key_bits'
string: 'private_key_type'
string: 'key'
string: ''
string: "\n"
string: "\t\t. \""
string: "\\n\"\n"
string: ''
string: "\n"
string: "\t\t. \""
string: "\\n\"\n"
string: 'modules/sync/actions/genkeypair.page.php'
string: 'publicKeyTxt'
string: "&lt;textarea rows='6' cols='80'&gt;"
string: "&lt;/textarea&gt;"
string: 'privateKeyTxt'
string: "&lt;textarea rows='15' cols='80'&gt;"
string: "&lt;/textarea&gt;"
string: 'publicKeyWrap'
string: 'privateKeyWrap'

<b>scanning file: /var/www/an2google/trunk/modules/sync/actions/forktest.act.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //	test of fork function
comment: //-------------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	send dummy data, perform time-consuing operation
comment: //---------------------------------------------------------------------------------------------
comment: //	$reply = "";
comment: //
comment: //     $recv = "";
comment: //     $recv = socket_read($sock, '100');
comment: //     if($recv != "") { 
comment: //		$reply .= $recv; 
comment: //		echo "data recieved: $recv &lt;br/&gt;\n"; flush();
comment: //	}
string: 'data'
string: 'modules/sync/test.txt'
string: 'w+'
string: "script called&lt;br/&gt;\n"
string: "data requested&lt;br/&gt;\n"
string: "tick $i &lt;br/&gt;\n"
string: 'a+'
string: "tick $i &lt;br/&gt;\n"
string: "created socket&lt;br/&gt;\n"
string: '127.0.0.1'
string: "bound socket&lt;br/&gt;\n"
string: "could not bind socket&lt;br/&gt;\n"
string: '127.0.0.1'
string: "connected socket&lt;br/&gt;\n"
string: "could not connect socket&lt;br/&gt;\n"
string: "GET /sync/forktest/data_yes/ HTTP/1.0\n"
string: "Host: awarenet.co.za\n\n"
string: "data sent... ($result bytes)&lt;br/&gt;\n"
string: "could not send data &lt;br/&gt;\n"
string: "finished, ending script&lt;br/&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/sync/actions/findfile.act.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //	looks for a file among peers and downloads it if found
comment: //-------------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	load the download record and set status to 'searching'
comment: //---------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	check all our peers, maybe they have the file
comment: //---------------------------------------------------------------------------------------------
comment: // not an error
comment: //-------------------------------------------------------------------------------------
comment: //	peer has the file we're looking for, download it
comment: //-------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------
comment: //	file has come through correctly
comment: //---------------------------------------------------------------------------------
comment: // done with this
comment: //---------------------------------------------------------------------------------
comment: //	file has NOT come through correctly
comment: //---------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	file not found, set status back to wait
comment: //---------------------------------------------------------------------------------------------
comment: //-----------------------------------------------------------------------------------------
comment: //	try for next file only if the last one worked (sync will try it again before long)
comment: //-----------------------------------------------------------------------------------------
string: 'modules/sync/models/download.mod.php'
string: ''
string: 'Download not specified.'
string: 'sync_download'
string: 'no such download'
string: 'wait'
string: 'busy'
string: 'Already downloading max files.'
string: 'searching'
string: "searching for file "
string: "\n"
string: "peer "
string: 'UID'
string: " serverurl "
string: 'serverurl'
string: "\n"
string: 'serverurl'
string: 'sync/hasfile/file_'
string: '/'
string: 'password'
string: "findfile peer result ($testUrl) \n$result\n"
string: '&lt;/result&gt;'
string: 'not found'
string: "found file "
string: " (hash: "
string: ")\n"
string: 'serverurl'
string: 'sync/getfile/file_'
string: '/'
string: 'password'
string: "downloaded file $getUrl \n("
string: " bytes)(hash: $hash)\n"
string: "hashes match, saving file "
string: "\n"
string: "hashes do not match, discarding download\n$hash != "
string: "\n"
string: "file not sound, adding back to queue\n"
string: 'wait'
string: "all downloads completed\n"
string: 'data/temp/'
string: '.sync'
string: '--output-document='
string: 'wget '
string: ' '
string: 'sync/findfile/'
string: "processing next download: $nextDownload\n$cmd\n"

<b>scanning file: /var/www/an2google/trunk/modules/sync/actions/exprecord.act.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //	export a record given table and UID
comment: //-------------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	authenticate
comment: //---------------------------------------------------------------------------------------------
comment: //if ($sync-&gt;authenticate() == false) { $page-&gt;doXmlError('could not authenticate'); }
comment: //$kapenta-&gt;logSync("authenticated notice reciept\n");
comment: //---------------------------------------------------------------------------------------------
comment: //	check the record exists
comment: //---------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	load and return the record
comment: //---------------------------------------------------------------------------------------------
string: ''
string: 'record not specified unspecified'
string: 'table'
string: 'table unspecified'
string: '-us-'
string: '_'
string: 'table'
string: 'unknown table: '
string: 'no such record'

<b>scanning file: /var/www/an2google/trunk/modules/sync/actions/editserver.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	edit a server record
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check user is an admin
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	render the page
comment: //----------------------------------------------------------------------------------------------
string: 'admin'
string: ''
string: 'sync_server'
string: 'modules/sync/actions/editserver.page.php'
string: 'raUID'

<b>scanning file: /var/www/an2google/trunk/modules/sync/actions/downloads.act.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //	shows the current download queue of this peer
comment: //-------------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	only admins can do this
comment: //---------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	load and render the page
comment: //---------------------------------------------------------------------------------------------
string: 'admin'
string: 'modules/sync/actions/downloads.page.php'

<b>scanning file: /var/www/an2google/trunk/modules/sync/actions/delserver.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	delete an awareNet server record given its UID
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	delete the server
comment: //----------------------------------------------------------------------------------------------
string: 'modules/sync/models/server.mod.php'
string: 'admin'
string: ''
string: 'Deleted server record '
string: 'sync/listservers/'

<b>scanning file: /var/www/an2google/trunk/modules/sync/actions/default.act.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //	default action of sync module is to display list of peers
comment: //-------------------------------------------------------------------------------------------------
string: 'modules/sync/actions/listservers.act.php'

<b>scanning file: /var/www/an2google/trunk/modules/sync/actions/clearqueue.act.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //*	delete everything in the sync queue (all outgoing messages)
comment: //-------------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	auth
comment: //---------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	confirmation?
comment: //---------------------------------------------------------------------------------------------
comment: //-----------------------------------------------------------------------------------------
comment: // delete all notices
comment: //-----------------------------------------------------------------------------------------
comment: //-----------------------------------------------------------------------------------------
comment: // redirect to sync queue
comment: //-----------------------------------------------------------------------------------------
string: 'admin'
string: 'Only admins may dop this.'
string: 'confirm'
string: "delete from Sync_Notice"
string: "Sync Queue cleared.  Please perform a manual sync with upstream "
string: "and downstream hosts to bring all records up to date.&lt;br/&gt;\n"
string: 'ok'
string: 'sync/'
string: 'modules/sync/views/clearqueueconfirmform.block.php'
string: 'warn'
string: 'sync/showqueue/'

<b>scanning file: /var/www/an2google/trunk/modules/sync/actions/api.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	sync API
comment: //--------------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
comment: //	documentation
comment: //--------------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
comment: //	everything else
comment: //--------------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	get the server's public RSA key
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	print the documenation
comment: //------------------------------------------------------------------------------------------
string: "#
#---------------------------------------------------------------------------------------------------
#	KAPENTA SYNC SERVER API
#---------------------------------------------------------------------------------------------------
#
#	This document describes API calls available on this module, and not the entire website.
#	It is one enromous TODO.
#
#	/sync/api/publickey/ ---------------------------------------------------------------------------
#
#		Returns the server's RSA public key.
#
#	
"
string: 'publickey'
string: 'Content-type: text/plain'
string: 'Content-type: text/plain'

<b>scanning file: /var/www/an2google/trunk/modules/sync/actions/addserver.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	add a new awareNet server to the sync module
comment: //--------------------------------------------------------------------------------------------------
comment: //TODO: make and replace with a stanard 'newserver' generated action
comment: // only admins can do this
comment: //------------------------------------------------------------------------------------------
comment: //	add a new record
comment: //------------------------------------------------------------------------------------------
comment: //TODO: remove this?
comment: //------------------------------------------------------------------------------------------
comment: //	redirect back to list of servers
comment: //------------------------------------------------------------------------------------------
string: 'modules/sync/models/server.mod.php'
string: 'admin'
string: 'action'
string: 'addNewServer'
string: 'action'
string: 'servername'
string: 'serverurl'
string: 'password'
string: 'direction'
string: 'active'
string: 'sync/listservers/'

<b>scanning file: /var/www/an2google/trunk/modules/schools/views/tagged.fn.php</b>
comment: //TODO: figure out how to get rid of this dependancy
comment: //--------------------------------------------------------------------------------------------------
comment: //|	show  a list of all schools sharing a given tag
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: UID - UID of a Tags_Tag object [string]
comment: //opt: tagUID - overrides UID if present [string]
comment: //opt: pageNo - TODO, pagination [string]
comment: //opt: num - TODO, number of items per page [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: permissions check here
comment: //----------------------------------------------------------------------------------------------
comment: //	get list of schools from database
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
string: 'modules/tags/models/tag.mod.php'
string: ''
string: 'tagUID'
string: 'UID'
string: 'tagUID'
string: 'UID'
string: ''
string: 'UID'
string: '(unknown tag)'
string: "SELECT Schools_School.UID as schoolUID from Schools_School, Tags_Index "
string: "WHERE Schools_School.UID=Tags_Index.refUID "
string: "AND Tags_Index.tagUID='"
string: "' "
string: "ORDER by Schools_School.name"
string: "(nothign with this tag at present)"
string: "[[:schools::summary::raUID="
string: 'schoolUID'
string: ":]]"

<b>scanning file: /var/www/an2google/trunk/modules/schools/views/summarynav.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	summarise for nav (300 px wide)
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - recordAlias or UID or schools entry [string]
comment: //opt: schoolUID - overrides raUID [string]
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/schools/models/school.mod.php'
string: 'schoolUID'
string: 'raUID'
string: 'schoolUID'
string: 'raUID'
string: 'raUID'
string: 'modules/schools/views/summarynav.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/schools/views/summary.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	summarise
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - recordAlias or UID or schools entry [string]
comment: //% return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check permissions and args
comment: //----------------------------------------------------------------------------------------------
comment: //% the object we're editing [object:Schools_School]
comment: //----------------------------------------------------------------------------------------------
comment: //	load the block
comment: //----------------------------------------------------------------------------------------------
comment: // ^ add any labels, block args, etc here
comment: //----------------------------------------------------------------------------------------------
comment: //	previous block
comment: //----------------------------------------------------------------------------------------------
comment: //if (array_key_exists('raUID', $args) == false) { return false; }
comment: //$model = new Schools_School($db-&gt;addMarkup($args['raUID']));	
comment: //$html = $theme-&gt;replaceLabels($c-&gt;extArray(), $theme-&gt;loadBlock('modules/schools/views/summary.block.php'));
comment: //return $html;
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/schools/models/school.mod.php'
string: ''
string: ''
string: 'UID'
string: 'UID'
string: 'raUID'
string: 'raUID'
string: 'schoolUID'
string: 'schoolUID'
string: ''
string: ''
string: ''
string: 'schools'
string: 'schools_school'
string: 'show'
string: ''
string: 'modules/schools/views/schoolsummary.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/schools/views/show.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	show a record
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - recordAlias or UID or schools entry [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: permissions check here
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/schools/models/school.mod.php'
string: ''
string: 'raUID'
string: ''
string: 'raUID'
string: ''
string: 'modules/schools/views/show.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/schools/views/selecttype.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	create an HTML select box for choosing a school's type (high, middle, comprehensive, etc)
comment: //--------------------------------------------------------------------------------------------------
comment: //opt: default - default school type [string]
comment: //opt: varname - name of HTML for field [string]
comment: //%	return type [string]	
comment: //%	default option [string]
comment: //%	form field name [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: sanitize these
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
string: ''
string: ''
string: 'type'
string: 'varname'
string: 'varname'
string: 'default'
string: 'default'
string: 'modules/schools/views/schooltype.block.php'
string: 'varname'
string: 'default'

<b>scanning file: /var/www/an2google/trunk/modules/schools/views/select.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	return a list of schools
comment: //--------------------------------------------------------------------------------------------------
comment: //opt: varname - name of variable (default is 'school') [string]
comment: //opt: default - default value (should be the UID of a school record) [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permisisons
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: permissions check here
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permisisons
comment: //----------------------------------------------------------------------------------------------
comment: //$sql = "select * from Schools_School order by name";
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/schools/models/school.mod.php'
string: 'school'
string: ''
string: ''
string: 'varname'
string: 'varname'
string: 'default'
string: 'default'
string: 'schools_school'
string: '*'
string: ''
string: 'name'
string: "&lt;select name='"
string: "'&gt;\n"
string: 'UID'
string: "&lt;option value='"
string: 'UID'
string: "' selected='YES'&gt;"
string: 'name'
string: "&lt;/option&gt;\n"
string: "&lt;option value='"
string: 'UID'
string: "'&gt;"
string: 'name'
string: "&lt;/option&gt;\n"
string: "&lt;/select&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/schools/views/name.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	return a school's name
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - alias or UID of a Schools_School object [string]
comment: //opt: schoolUID - overrides raUID [string]
comment: //opt: link - link to this record? [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/schools/models/school.mod.php'
string: 'no'
string: ''
string: 'schoolUID'
string: 'raUID'
string: 'schoolUID'
string: 'raUID'
string: ''
string: 'link'
string: 'link'
string: 'raUID'
string: ''
string: 'no'
string: "&lt;a href='%%serverPath%%schools/"
string: "'&gt;"
string: "&lt;/a&gt;"

<b>scanning file: /var/www/an2google/trunk/modules/schools/views/menu.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	menu for schools, no arguments
comment: //--------------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/schools/models/school.mod.php'
string: 'schools'
string: 'schools_school'
string: 'edit'
string: 'TODO:UIDHERE'
string: 'newEntry'
string: '[[:theme::submenu::label=Add School::link=/schools/new/:]]'
string: 'newEntry'
string: ''
string: 'modules/schools/views/menu.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/schools/views/listhidden.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	make a list of 'hidden' schools
comment: //--------------------------------------------------------------------------------------------------
comment: //%	return value [string]
comment: //TODO: permission check here
comment: //----------------------------------------------------------------------------------------------
comment: //	make the list
comment: //----------------------------------------------------------------------------------------------
string: ''
string: "hidden='yes'"
string: 'schools_school'
string: '*'
string: 'name'
string: "[[:schools::summary::raUID="
string: 'UID'
string: ":]]"

<b>scanning file: /var/www/an2google/trunk/modules/schools/views/listallnav.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	list all formatted for nav (300 px wide)
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: hidden - show hidden schools (yes|no) [string]
comment: //$sql = "select * from Schools_School order by name";
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/schools/models/school.mod.php'
string: ''
string: "(hidden='no' OR hidden='')"
string: 'hidden'
string: 'yes'
string: 'hidden'
string: ''
string: 'schools_school'
string: '*'
string: 'name'
string: "[[:schools::summarynav::schoolUID="
string: 'UID'
string: ":]]"

<b>scanning file: /var/www/an2google/trunk/modules/schools/views/listalllinksnav.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	list all formatted for nav (300 px wide)
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: hidden - show hidden schools (yes|no) [string]
comment: //$sql = "select * from Schools_School order by name";
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/schools/models/school.mod.php'
string: ''
string: "(hidden='no' OR hidden='')"
string: 'hidden'
string: 'yes'
string: 'hidden'
string: ''
string: 'schools_school'
string: '*'
string: 'name'
string: '%%serverPath%%schools/show/'
string: 'alias'
string: 'name'
string: "("
string: 'country'
string: ")"
string: "&lt;a href='$viewUrl'&gt;"
string: "&lt;/a&gt;&lt;br/&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/schools/views/listall.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	list all
comment: //--------------------------------------------------------------------------------------------------
comment: //opt: pageNo - page number (integer) [string]
comment: //opt: pageSize - number or items per page (integer) [string]
comment: //opt: orderBy - field to order the list by (defualt is createdOn) [string]
comment: //opt: hidden - show hidden schools (yes|no) [string]
comment: //%	first page if not specified [int]
comment: //%	default number of items per page [int]
comment: //%	default list order [string]
comment: //%	return value [string]
comment: //%	show hidden tables [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //	check permissions and args
comment: //----------------------------------------------------------------------------------------------
comment: // users may list by these fields
comment: //----------------------------------------------------------------------------------------------
comment: //	count and load list items
comment: //----------------------------------------------------------------------------------------------
comment: //% to filter list by [array:string]
comment: //add any further conditions here
comment: //% list ordinal of first item [int]	
comment: //% total number of items [int]
comment: //% number of pages [int]
comment: //----------------------------------------------------------------------------------------------
comment: //	make the table
comment: //----------------------------------------------------------------------------------------------
comment: //$model = new Schools_School();
comment: //----------------------------------------------------------------------------------------------
comment: //	previous block
comment: //----------------------------------------------------------------------------------------------
comment: //$sql = "select * from schools order by name";
comment: //$result = $db-&gt;query($sql);
comment: //$html = '';
comment: //while ($row = $db-&gt;fetchAssoc($result)) {
comment: //	$html .= "[[:schools::summary::raUID=" . $row['UID'] . ":]]";
comment: //}
comment: //return $html;
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/schools/models/school.mod.php'
string: 'name'
string: ''
string: 'schools'
string: 'schools_school'
string: 'show'
string: ''
string: 'pageNo'
string: 'pageNo'
string: 'num'
string: 'pageSize'
string: 'by'
string: 'by'
string: 'name'
string: 'name'
string: 'createdon'
string: 'createdOn'
string: 'hidden'
string: 'yes'
string: 'hidden'
string: "hidden='no'"
string: 'schools_school'
string: 'schools_school'
string: '*'
string: "&lt;div class='inlinequote'&gt;No schools yet added&lt;/div&gt;&lt;br/&gt;\n"
string: '%%serverPath%%schools/list/'
string: "[[:theme::pagination::page=$pageNo::total=$totalPages::link=$link:]]\n"
string: "[[:schools::summary::raUID="
string: 'UID'
string: ":]]"

<b>scanning file: /var/www/an2google/trunk/modules/schools/views/image.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	find the school's logo/picture (300px) or a blank image
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - recordAlias or UID or schools entry [string]
comment: //opt: schoolUID - overrides raUID [string]
comment: //opt: size - width100, width200, width300, width570, thumb, thumbsm or thumb90 [string]
comment: //opt: link - link to larger image (yes|no) [string]
comment: //: deprecated, TODO: remove this and replace blocks with call to images module
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/schools/models/school.mod.php'
string: 'width300'
string: 'yes'
string: 'schoolUID'
string: 'raUID'
string: 'schoolUID'
string: 'raUID'
string: 'link'
string: 'no'
string: 'no'
string: 'size'
string: 'size'
string: 'thumb'
string: 'thumb'
string: 'size'
string: 'thumbsm'
string: 'thumbsm'
string: 'size'
string: 'thumb90'
string: 'thumb90'
string: 'size'
string: 'width100'
string: 'width100'
string: 'size'
string: 'width200'
string: 'width200'
string: 'size'
string: 'width300'
string: 'width300'
string: 'size'
string: 'width570'
string: 'width570'
string: 'raUID'
string: ''
string: "select * from Images_Image where refModule='schools' and refUID='"
string: "' order by weight"
string: 'yes'
string: "&lt;a href='%%serverPath%%images/show/"
string: 'alias'
string: "'&gt;"
string: "&lt;img src='%%serverPath%%images/"
string: "/"
string: 'alias'
string: "' border='0' alt='"
string: "'&gt;&lt;/a&gt;"
string: "&lt;img src='%%serverPath%%images/"
string: "/"
string: 'alias'
string: "' border='0' alt='"
string: "'&gt;"
string: 'thumb90'
string: "&lt;img src='/themes/clockface/images/nophoto100.jpg' border='0'&gt;"
string: 'thumb'
string: "&lt;img src='/themes/clockface/images/nophoto100.jpg' border='0'&gt;"
string: 'width100'
string: "&lt;img src='/themes/clockface/images/nophoto100.jpg' border='0'&gt;"
string: 'width200'
string: "&lt;img src='/themes/clockface/images/nophoto200.jpg' border='0'&gt;"
string: 'width300'
string: "&lt;img src='/themes/clockface/images/nophoto300.jpg' border='0'&gt;"

<b>scanning file: /var/www/an2google/trunk/modules/schools/views/haseditauth.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	returns whether current user is a teacher
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - school UID or recordAlias [string]
string: 'modules/schools/models/school.mod.php'
string: 'admin'
string: 'yes'
string: 'teacher'
string: 'yes'
string: 'raUID'
string: 'no'

<b>scanning file: /var/www/an2google/trunk/modules/schools/views/geographicnav.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	display schools ordered by country and region formatted for nav
comment: //--------------------------------------------------------------------------------------------------
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check permissions
comment: //----------------------------------------------------------------------------------------------
comment: //TODO
comment: //----------------------------------------------------------------------------------------------
comment: //	laod schools from database
comment: //----------------------------------------------------------------------------------------------
comment: //  any other conditions go here
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
string: ''
string: "hidden='no' OR hidden=''"
string: 'schools_school'
string: '*'
string: 'country, region, name'
string: ''
string: ''
string: 'country'
string: 'region'
string: "&lt;b&gt;"
string: 'country'
string: " - "
string: 'region'
string: "&lt;/b&gt;&lt;br/&gt;"
string: 'country'
string: 'region'
string: "[[:schools::name::schoolUID="
string: 'UID'
string: "::link=yes:]]&lt;br/&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/schools/views/geographic.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	display schools ordered by country and region
comment: //--------------------------------------------------------------------------------------------------
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check permissions
comment: //----------------------------------------------------------------------------------------------
comment: //TODO
comment: //----------------------------------------------------------------------------------------------
comment: //	load schools from database
comment: //----------------------------------------------------------------------------------------------
comment: //  any other conditions go here
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
string: ''
string: "hidden='no' OR hidden=''"
string: 'schools_school'
string: '*'
string: 'country, region, name'
string: ''
string: ''
string: 'country'
string: 'region'
string: "&lt;h2&gt;"
string: 'country'
string: " - "
string: 'region'
string: "&lt;/h2&gt;&lt;br/&gt;"
string: 'country'
string: 'region'
string: "[[:schools::summarynav::schoolUID="
string: 'UID'
string: ":]]&lt;br/&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/schools/views/editform.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	show the edit form
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - recordAlias or UID or schools entry [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/schools/models/school.mod.php'
string: ''
string: 'raUID'
string: ''
string: 'raUID'
string: 'schools'
string: 'schools_school'
string: 'edit'
string: ''
string: 'descriptionJs64'
string: 'descriptionJs64'
string: 'description'
string: 'modules/schools/views/editform.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/schools/views/allthumbs.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	all images of all schools (thumbnails, no arguments)
comment: //--------------------------------------------------------------------------------------------------
comment: //TODO: this should be on the images module
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //	load images from database
comment: //----------------------------------------------------------------------------------------------
comment: //$sql = "select * from Images_Image where refModule='schools' order by weight";
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------	
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/schools/models/school.mod.php'
string: ''
string: "refModule='schools'"
string: 'images_image'
string: '*'
string: 'weight'
string: ''
string: 'schools_school'
string: 'refUID'
string: '-'
string: ' '
string: "&lt;a href='%%serverPath%%schools/show/"
string: "'&gt;"
string: "&lt;img src='/images/thumb90/"
string: 'alias'
string: "' border='0' alt='"
string: "'&gt;&lt;/a&gt; "

<b>scanning file: /var/www/an2google/trunk/modules/schools/views/allgrades.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	list all grades/years/forms/standards at a school
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - recordAlias or UID or schools entry [string]
comment: //opt: schoolUID - overrides raUID [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permisisons
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: permissions checks here
comment: //----------------------------------------------------------------------------------------------
comment: //	query database and make the block
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/schools/models/school.mod.php'
string: ''
string: 'public'
string: '[[:users::pleaselogin:]]'
string: 'schoolUID'
string: 'raUID'
string: 'schoolUID'
string: 'raUID'
string: 'raUID'
string: ''
string: "select grade, count(UID) as members from Users_User "
string: "where school='"
string: "' group by grade"
string: '%%serverPath%%schools/grade/grade_'
string: 'grade'
string: '/'
string: "&lt;a href='"
string: "'&gt;"
string: 'grade'
string: " ("
string: 'members'
string: " people)&lt;/a&gt;&lt;br/&gt;"

<b>scanning file: /var/www/an2google/trunk/modules/schools/views/allfaces.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	all images of a school (300px wide)		//TODO: move to images module or discard
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID  - recordAlias or UID or schools entry [string]
comment: //opt: schoolUID - overrides raUID [string]
comment: //TODO: $db-&gt;loadRange
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/schools/models/school.mod.php'
string: ''
string: 'schoolUID'
string: 'raUID'
string: 'schoolUID'
string: 'raUID'
string: ''
string: 'raUID'
string: ''
string: "select * from Images_Image where refModule='schools' and refUID='"
string: "' order by weight"
string: "[[:theme::navtitlebox::label=Face:]]"
string: "&lt;a href='%%serverPath%%images/show/"
string: 'alias'
string: "'&gt;"
string: "&lt;img src='%%serverPath%%images/width300/"
string: 'alias'
string: "' border='0' alt='"
string: "'&gt;&lt;/a&gt;"

<b>scanning file: /var/www/an2google/trunk/modules/schools/views/adminconsole.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	list of controls for this module as displayed on the admin console
comment: //--------------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'admin'
string: ''
string: 'modules/schools/views/adminconsole.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/schools/models/school.mod.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	object representing schools
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	member variables (as retieved from database)
comment: //----------------------------------------------------------------------------------------------
comment: //_	currently loaded database record [array]
comment: //_	database table definition [array]
comment: //_	set to true when an object has been loaded [bool]
comment: //_ UID [string]
comment: //_ title [string]
comment: //_ wyswyg [string]
comment: //_ varchar(255) [string]
comment: //_ varchar(255) [string]
comment: //_ varchar(255) [string]
comment: //_ varchar(255) [string]
comment: //_ controls whether this school shows up in lists varchar(3) [string]
comment: //_ datetime [string]
comment: //_ ref:Users_User [string]
comment: //_ datetime [string]
comment: //_ ref:Users_User [string]
comment: //_ alias [string]
comment: //----------------------------------------------------------------------------------------------
comment: //. constructor	ALTER TABLE Schools_School CHANGE `show` `hidden` VARCHAR(3)
comment: //----------------------------------------------------------------------------------------------
comment: //opt: raUID - UID or alias of a School object [string]
comment: // initialise table schema
comment: // try load an object from the database
comment: // check if we did
comment: // make new object
comment: // initialize
comment: // set default name
comment: // do not show by default
comment: //----------------------------------------------------------------------------------------------
comment: //. load an object from the database given its UID or an alias
comment: //----------------------------------------------------------------------------------------------
comment: //arg: raUID - UID or alias of a School object [string]
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //. load School object serialized as an associative array
comment: //----------------------------------------------------------------------------------------------
comment: //arg: ary - associative array of members and values [array]
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //. save the current object to database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string on success, html report of errors on failure [string]
comment: //: $db-&gt;save(...) will raise an object_updated event if successful
comment: //----------------------------------------------------------------------------------------------
comment: //. check that object is correct before allowing it to be stored in database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string if object passes, warning message if not [string]
comment: //----------------------------------------------------------------------------------------------
comment: //. database table definition and content versioning
comment: //----------------------------------------------------------------------------------------------
comment: //returns: information for constructing SQL queries [array]
comment: //table columns
comment: //these fields will be indexed
comment: //revision history will be kept for these fields
comment: //----------------------------------------------------------------------------------------------
comment: //. serialize this object to an array
comment: //----------------------------------------------------------------------------------------------
comment: //returns: associative array of all members which define this instance [array]
comment: //----------------------------------------------------------------------------------------------
comment: //.	make an extended array of all data a view will need
comment: //----------------------------------------------------------------------------------------------
comment: //returns: extended array of member variables and metadata [array]
comment: //------------------------------------------------------------------------------------------
comment: //	links
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	location
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	summary 
comment: //------------------------------------------------------------------------------------------
comment: //$ary['contentHtml'] = str_replace("&gt;\n", "&gt;", trim($ary['description']));
comment: //$ary['contentHtml'] = str_replace("\n", "&lt;br/&gt;\n", $ary['contentHtml']);
comment: //----------------------------------------------------------------------------------------------
comment: //. delete current object from the database
comment: //----------------------------------------------------------------------------------------------
comment: //: $db-&gt;delete(...) will raise an object_deleted event on success [bool]
comment: //returns: true on success, false on failure [bool]
comment: //TODO: check that there are no students at this school before deleting
comment: // nothing to do
string: ''
string: ''
string: 'New School '
string: 'yes'
string: 'UID'
string: 'name'
string: 'description'
string: 'geocode'
string: 'region'
string: 'country'
string: 'type'
string: 'hidden'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: 'alias'
string: ''
string: 'schools'
string: 'schools_school'
string: "Database error.&lt;br/&gt;\n"
string: ''
string: ''
string: ''
string: "No UID.&lt;br/&gt;\n"
string: ''
string: 'no'
string: 'module'
string: 'schools'
string: 'model'
string: 'schools_school'
string: 'fields'
string: 'UID'
string: 'VARCHAR(33)'
string: 'name'
string: 'VARCHAR(255)'
string: 'description'
string: 'MEDIUMTEXT'
string: 'geocode'
string: 'VARCHAR(255)'
string: 'region'
string: 'VARCHAR(255)'
string: 'country'
string: 'VARCHAR(255)'
string: 'type'
string: 'VARCHAR(255)'
string: 'hidden'
string: 'VARCHAR(3)'
string: 'createdOn'
string: 'DATETIME'
string: 'createdBy'
string: 'VARCHAR(33)'
string: 'editedOn'
string: 'DATETIME'
string: 'editedBy'
string: 'VARCHAR(33)'
string: 'alias'
string: 'VARCHAR(255)'
string: 'indices'
string: 'UID'
string: '10'
string: 'createdOn'
string: ''
string: 'createdBy'
string: '10'
string: 'editedOn'
string: ''
string: 'editedBy'
string: '10'
string: 'alias'
string: '10'
string: 'nodiff'
string: 'UID'
string: 'name'
string: 'description'
string: 'geocode'
string: 'region'
string: 'country'
string: 'type'
string: 'hidden'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: 'alias'
string: 'editUrl'
string: ''
string: 'editLink'
string: ''
string: 'viewUrl'
string: ''
string: 'viewLink'
string: ''
string: 'delUrl'
string: ''
string: 'delLink'
string: ''
string: 'newUrl'
string: ''
string: 'newLink'
string: ''
string: 'schools'
string: 'schools_school'
string: 'show'
string: 'viewUrl'
string: '%%serverPath%%schools/'
string: 'viewLink'
string: "&lt;a href='"
string: 'viewUrl'
string: "'&gt;[read on &amp;gt;&amp;gt;]&lt;/a&gt;"
string: 'schools'
string: 'schools_school'
string: 'edit'
string: 'editUrl'
string: '%%serverPath%%schools/edit/'
string: 'editLink'
string: "&lt;a href='"
string: 'editUrl'
string: "'&gt;[edit]&lt;/a&gt;"
string: 'schools'
string: 'schools_school'
string: 'edit'
string: 'delUrl'
string: '%%serverPath%%schools/confirmdelete/UID_'
string: '/'
string: 'delLink'
string: "&lt;a href='"
string: 'delUrl'
string: "'&gt;[delete]&lt;/a&gt;"
string: 'schools'
string: 'schools_school'
string: 'new'
string: 'newUrl'
string: "%%serverPath%%schools/new/"
string: 'newLink'
string: "&lt;a href='"
string: 'newUrl'
string: "'&gt;[add new school]&lt;/a&gt;"
string: 'location'
string: 'unknown'
string: ''
string: 'country'
string: 'location'
string: 'country'
string: ''
string: 'region'
string: 'location'
string: 'region'
string: ', '
string: 'location'
string: 'summary'
string: 'description'

<b>scanning file: /var/www/an2google/trunk/modules/schools/inc/install.inc.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	install script for Schools module
comment: //--------------------------------------------------------------------------------------------------
comment: //+	reports are human-readable HTML, with script-readable HTML comments
comment: //--------------------------------------------------------------------------------------------------
comment: //|	install the Schools module
comment: //--------------------------------------------------------------------------------------------------
comment: //returns: html report or false if not authorized [string][bool]
comment: //----------------------------------------------------------------------------------------------
comment: //	create or upgrade Schools_School table
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	import any records from previous schools table
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	done
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
comment: //|	discover if this module is installed
comment: //--------------------------------------------------------------------------------------------------
comment: //:	if installed correctly report will contain HTML comment &lt;!-- installed correctly --&gt;
comment: //returns: HTML installation status report [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	ensure the table which stores School objects exists and is correct
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	done
comment: //----------------------------------------------------------------------------------------------
string: 'core/dbdriver/mysqladmin.dbd.php'
string: 'modules/schools/models/school.mod.php'
string: 'admin'
string: ''
string: 'recordAlias'
string: 'alias'
string: 'schools'
string: "&lt;b&gt;moved $count records from 'schools' table.&lt;/b&gt;&lt;br/&gt;"
string: 'admin'
string: ''
string: '&lt;!-- table installed correctly --&gt;'
string: '&lt;!-- module installed correctly --&gt;'

<b>scanning file: /var/www/an2google/trunk/modules/schools/actions/tag.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	show all schools with a given tag
comment: //--------------------------------------------------------------------------------------------------
comment: //note: $req-&gt;ref should be a tag name
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: permissions check here
comment: //TODO: pagination setup
comment: //----------------------------------------------------------------------------------------------
comment: //	render the page
comment: //----------------------------------------------------------------------------------------------
string: 'modules/tags/models/tag.mod.php'
string: ''
string: 'No tag given.'
string: 'Tag not recognised.'
string: 'modules/schools/actions/tag.page.php'
string: 'tagUID'
string: 'tagName'

<b>scanning file: /var/www/an2google/trunk/modules/schools/actions/show.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	view a school object (if none specified, default is user's own school)
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	authentication (public users no longer banned)
comment: //----------------------------------------------------------------------------------------------
comment: //if (($user-&gt;role == 'public') || ($user-&gt;role == 'banned')) { $page-&gt;do403(); }
comment: //----------------------------------------------------------------------------------------------
comment: //	check reference
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	load model
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	render page
comment: //----------------------------------------------------------------------------------------------
string: 'modules/schools/models/school.mod.php'
string: ''
string: 'schools_school'
string: 'could not find school: '
string: 'modules/schools/actions/show.page.php'
string: 'raUID'
string: 'UID'
string: 'schoolName'
string: 'schoolRa'
string: 'schoolUID'

<b>scanning file: /var/www/an2google/trunk/modules/schools/actions/save.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	save a school record
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check permissions and POST variables
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	load and update the object
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: sanitize description
comment: //----------------------------------------------------------------------------------------------
comment: //	check that object was saved and redirect
comment: //----------------------------------------------------------------------------------------------
string: 'modules/schools/models/school.mod.php'
string: 'action'
string: 'Action not specified.'
string: 'saveRecord'
string: 'action'
string: 'Action not supported.'
string: 'UID'
string: 'School not specified (UID).'
string: 'UID'
string: "could not load School $UID"
string: 'schools'
string: 'schools_school'
string: 'edit'
string: 'You are not authorized to edit this school.'
string: 'name'
string: 'description'
string: 'geocode'
string: 'region'
string: 'country'
string: 'hidden'
string: 'type'
string: ''
string: 'Saved changes to school: '
string: 'Could not save School:&lt;br/&gt;'
string: 'return'
string: 'return'
string: 'schools/'
string: 'schools/'

<b>scanning file: /var/www/an2google/trunk/modules/schools/actions/new.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	add a new school
comment: //--------------------------------------------------------------------------------------------------
string: 'schools'
string: 'schools_school'
string: 'edit'
string: 'TODO:UIDHERE'
string: 'modules/schools/models/school.mod.php'
string: 'schools/edit/'

<b>scanning file: /var/www/an2google/trunk/modules/schools/actions/myschool.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	redirect to user's school
comment: //--------------------------------------------------------------------------------------------------
string: 'schools/'

<b>scanning file: /var/www/an2google/trunk/modules/schools/actions/listhidden.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	list of schools now shown in the main list
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	admins only TODO: make this a regular permission
comment: //----------------------------------------------------------------------------------------------
string: 'admin'
string: 'modules/schools/actions/listhidden.page.php'

<b>scanning file: /var/www/an2google/trunk/modules/schools/actions/list.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	list all schools on the system
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
string: 'schools'
string: 'schools_school'
string: 'show'
string: 'page'
string: 'page'
string: 'modules/schools/actions/list.page.php'
string: 'pageNo'

<b>scanning file: /var/www/an2google/trunk/modules/schools/actions/grade.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	show all users in a given year for a given school
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: permission check here
comment: //----------------------------------------------------------------------------------------------
comment: //	render the page
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: sanitize $req-&gt;args['grade']
string: 'modules/schools/models/school.mod.php'
string: 'grade'
string: 'grade not given'
string: ''
string: 'modules/schools/actions/grade.page.php'
string: 'raUID'
string: 'schoolUID'
string: 'schoolName'
string: 'schoolDescription'
string: 'grade'
string: 'grade'
string: 'gradeLink'
string: "grade_"
string: 'grade'
string: '/'

<b>scanning file: /var/www/an2google/trunk/modules/schools/actions/geographic.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	show schools organised by country and region
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check permissions
comment: //----------------------------------------------------------------------------------------------
comment: // none at present
comment: //----------------------------------------------------------------------------------------------
comment: //	render the page
comment: //----------------------------------------------------------------------------------------------
string: 'modules/schools/actions/geographic.page.php'

<b>scanning file: /var/www/an2google/trunk/modules/schools/actions/edit.act.php</b>
comment: //require_once($kapenta-&gt;installPath . 'modules/schools/models/school.mod.php');
comment: // ^ sometimes needed for breadcrumbs, etc
comment: //--------------------------------------------------------------------------------------------------
comment: //*	show form to edit a School object
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	render the page
comment: //----------------------------------------------------------------------------------------------	
string: 'schools_school'
string: 'schools'
string: 'schools_school'
string: 'edit'
string: 'You are not authorized to edit this Schools.'
string: ''
string: 'modules/schools/actions/edit.page.php'
string: 'raUID'
string: 'UID'

<b>scanning file: /var/www/an2google/trunk/modules/schools/actions/delete.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	delete a Schools_School object
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check POST vars and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	delete and redirect back to list of schools
comment: //----------------------------------------------------------------------------------------------
string: 'modules/schools/models/school.mod.php'
string: 'action'
string: 'Action not specified.'
string: 'deleteRecord'
string: 'action'
string: 'Action not supported.'
string: 'UID'
string: 'School not specified (UID)'
string: 'UID'
string: 'schools'
string: 'schools_school'
string: 'edit'
string: "Deleted school: "
string: 'schools/'

<b>scanning file: /var/www/an2google/trunk/modules/schools/actions/default.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	default action for schools module (ie, no action specified in URL)
comment: //--------------------------------------------------------------------------------------------------
comment: // no recordAlias/UID given in URL, list all schools
comment: // recordAlias/UID given in URL, show single school
string: ''
string: 'modules/schools/actions/list.act.php'
string: 'modules/schools/actions/show.act.php'

<b>scanning file: /var/www/an2google/trunk/modules/schools/actions/confirmdelete.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	confirm deletion of a school
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the confirmation box and redirect to the school's page
comment: //----------------------------------------------------------------------------------------------
string: 'modules/schools/models/school.mod.php'
string: 'uid'
string: 'School not specified (UID)'
string: 'uid'
string: 'School not found.'
string: 'schools'
string: 'schools_school'
string: 'delete'
string: 'You are not authorized to delete this school.'
string: 'UID'
string: 'raUID'
string: 'modules/schools/views/confirmdelete.block.php'
string: 'warn'
string: 'schools/'

<b>scanning file: /var/www/an2google/trunk/modules/scaffold/scaffold.api.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	scaffold blocks api 
comment: //--------------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
comment: //	menu has public and private mode
comment: //--------------------------------------------------------------------------------------------------
comment: // TODO
comment: // TODO
comment: //--------------------------------------------------------------------------------------------------
comment: //	display xml (optionally escaped for html)
comment: //--------------------------------------------------------------------------------------------------
comment: // * $args['rauid'] = recordAlias or UID of scaffold record
comment: // * $args['escapehtml'] = yes|no
comment: //--------------------------------------------------------------------------------------------------
comment: //	list models on a scaffold /w edit form
comment: //--------------------------------------------------------------------------------------------------
comment: // * $args['rauid'] = recordAlias or UID of scaffold record
comment: //--------------------------------------------------------------------------------------------------
comment: //	form to delete model (noargs)
comment: //--------------------------------------------------------------------------------------------------
comment: // * $args['varname'] = name of select element
comment: //--------------------------------------------------------------------------------------------------
comment: //	fow table of attributes of a model
comment: //--------------------------------------------------------------------------------------------------
comment: // * $args['rauid'] = recordAlias or UID of scaffold record
comment: // * $args['modelname'] = name of a model on this module
comment: //----------------------------------------------------------------------------------------------
comment: //	load the model
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the table
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
comment: //	form to delete model
comment: //--------------------------------------------------------------------------------------------------
comment: // * $args['rauid'] = recordAlias or UID of scaffold record
comment: // * $args['modelname'] = name of a model on this module
comment: //--------------------------------------------------------------------------------------------------
comment: //	show form for choosing extensions
comment: //--------------------------------------------------------------------------------------------------
comment: // * $args['rauid'] = recordAlias or UID of scaffold record
string: 'modules/scaffold/moduledefinition.class.php'
string: ''
string: 'public'
string: 'rauid'
string: 'rauid'
string: ''
string: 'escapehtml'
string: 'escapehtml'
string: 'yes'
string: "\t"
string: "&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;"
string: 'rauid'
string: 'rauid'
string: ''
string: 'modelName'
string: 'rauid'
string: 'rauid'
string: 'modules/scaffold/views/showmodel.block.php'
string: 'attribType'
string: 'varname'
string: 'varname'
string: "&lt;select name='"
string: "'&gt;\n"
string: "  &lt;option value='title'&gt;title&lt;/option&gt;\n"
string: "  &lt;option value='wyswyg'&gt;editable html&lt;/option&gt;\n"
string: "  &lt;option value='plaintext'&gt;plain text&lt;/option&gt;\n"
string: "  &lt;option value='uid'&gt;uid&lt;/option&gt;\n"
string: "  &lt;option value='createdon'&gt;createdOn&lt;/option&gt;\n"
string: "  &lt;option value='createdby'&gt;createdBy&lt;/option&gt;\n"
string: "  &lt;option value='editedon'&gt;editedOn&lt;/option&gt;\n"
string: "  &lt;option value='editedby'&gt;editedBy&lt;/option&gt;\n"
string: "  &lt;option value='viewcount'&gt;viewcount&lt;/option&gt;\n"
string: "  &lt;option value='currency'&gt;currency&lt;/option&gt;\n"
string: "  &lt;option value='text'&gt;text&lt;/option&gt;\n"
string: "  &lt;option value='boolean'&gt;boolean&lt;/option&gt;\n"
string: "  &lt;option value='datetime'&gt;datetime&lt;/option&gt;\n"
string: "  &lt;option value='varchar(10)'&gt;varchar(10)&lt;/option&gt;\n"
string: "  &lt;option value='varchar(30)'&gt;varchar(30)&lt;/option&gt;\n"
string: "  &lt;option value='varchar(50)'&gt;varchar(30)&lt;/option&gt;\n"
string: "  &lt;option value='varchar(100)'&gt;varchar(100)&lt;/option&gt;\n"
string: "  &lt;option value='varchar(255)'&gt;varchar(255)&lt;/option&gt;\n"
string: "  &lt;option value='int'&gt;int&lt;/option&gt;\n"
string: "  &lt;option value='smallint'&gt;smallint&lt;/option&gt;\n"
string: "  &lt;option value='mediumint'&gt;mediumint&lt;/option&gt;\n"
string: "  &lt;option value='bigint'&gt;bigint&lt;/option&gt;\n"
string: "  &lt;option value='float'&gt;float&lt;/option&gt;\n"
string: "&lt;/select&gt;\n"
string: 'rauid'
string: 'modelname'
string: 'rauid'
string: 'modelname'
string: "&lt;table class=wireframe'&gt;\n"
string: "\t&lt;tr&gt;\n"
string: "\t\t&lt;td&gt;&lt;b&gt;$memberName&lt;/b&gt;&lt;/td&gt;\n"
string: "\t&lt;/tr&gt;\n"
string: "&lt;/table&gt;\n"
string: 'rauid'
string: 'modelname'
string: "&lt;form name='deleteModel' method='POST' action='/scaffold/save/'&gt;\n"
string: "&lt;input type='hidden' name='action' value='deleteModel' /&gt;\n"
string: "&lt;input type='hidden' name='UID' value='"
string: 'rauid'
string: "' /&gt;\n"
string: "&lt;input type='hidden' name='modelname' value='"
string: 'modelname'
string: "' /&gt;\n"
string: "&lt;input type='submit' value='Delete Model &gt;&gt;' /&gt;\n"
string: "&lt;/form&gt;\n"
string: 'rauid'
string: 'modelname'
string: "&lt;form name='deleteModel' method='POST' action='/scaffold/save/'&gt;\n"
string: "&lt;input type='hidden' name='action' value='' /&gt;\n"
string: "&lt;input type='hidden' name='UID' value='"
string: 'rauid'
string: "' /&gt;\n"
string: "&lt;input type='hidden' name='modelname' value='"
string: 'modelname'
string: "' /&gt;\n"
string: "&lt;input type='submit' value='Update Extensions' /&gt;\n"
string: "&lt;/form&gt;\n&lt;hr/&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/scaffold/views/showmodelsummaries.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	list models on a scaffold /wo edit form
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: UID - UID of a module definition [string]
comment: //---------------------------------------------------------------------------------------------
comment: // check arguments and authentication
comment: //---------------------------------------------------------------------------------------------
comment: //$model = new Scaffold_ModuleDefinition($args['raUID']);
comment: //TODO: permissions check
comment: //---------------------------------------------------------------------------------------------
comment: // load all models belonging to the given module and add an edit form for each of them
comment: //---------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/scaffold/models/modeldefinition.mod.php'
string: ''
string: 'UID'
string: "moduleUID='"
string: 'UID'
string: "'"
string: 'Scaffold_ModelDefinition'
string: '*'
string: ''
string: ''
string: ''
string: 'modules/scaffold/views/modeldefinitionsummary.block.php'
string: "SCAFFOLD_MODELDEFINITION: editLink = "
string: 'editLink'
string: "&lt;br/&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/scaffold/views/showmemberstable.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	fow table of attributes of a model
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: UID = UID fo model definition
comment: //TODO: this is a mess, tidy it
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: permissions check
comment: //----------------------------------------------------------------------------------------------
comment: //	load the members
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the table
comment: //----------------------------------------------------------------------------------------------
comment: // title row
comment: //------------------------------------------------------------------------------------------
comment: //	make link to member edit form
comment: //------------------------------------------------------------------------------------------
comment: // just the name by default
comment: // if editable (non-auto) then link to form
comment: //TODO: permissions check here
comment: //------------------------------------------------------------------------------------------
comment: //	add member properties
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	highlight yes/no values
comment: //------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/scaffold/models/memberdefinition.mod.php'
string: 'UID'
string: ''
string: "model='"
string: 'UID'
string: "'"
string: 'Scaffold_MemberDefinition'
string: '*'
string: 'weight'
string: 'name'
string: 'type'
string: 'dbtype'
string: 'I'
string: 'D'
string: 'E'
string: 'O'
string: 'L'
string: 'U'
string: 'S'
string: 'B'
string: 'w'
string: 'name'
string: 'auto'
string: 'yes'
string: "%%serverPath%%scaffold/editmemberif/"
string: "&lt;a href='"
string: "'&gt;"
string: 'name'
string: "&lt;/a&gt;"
string: 'type'
string: 'dbtype'
string: 'hasidx'
string: 'diff'
string: 'editable'
string: 'optional'
string: 'list'
string: 'summary'
string: 'showfull'
string: 'orderby'
string: 'weight'
string: 'red'
string: 'n'
string: 'yes'
string: 'green'
string: 'y'
string: 'yes'
string: 'no'
string: "&lt;small&gt;&lt;span style='background-color: "
string: "'&gt;&amp;nbsp;"
string: "&amp;nbsp;&lt;/span&gt;&lt;/small&gt;"

<b>scanning file: /var/www/an2google/trunk/modules/scaffold/views/selectyesno.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	make a select element
comment: //--------------------------------------------------------------------------------------------------
comment: //opt: varname - html form element name, default is 'yesno' [string]
comment: //opt: default - default value, 'yes' if not specified [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments
comment: //----------------------------------------------------------------------------------------------
string: ''
string: 'yesno'
string: 'yes'
string: 'varname'
string: 'varname'
string: 'default'
string: 'default'
string: "&lt;select name='"
string: "'&gt;\n"
string: 'yes'
string: "\t&lt;option value='yes' selected='selected'&gt;yes&lt;/option&gt;\n"
string: "\t&lt;option value='no'&gt;no&lt;/option&gt;\n"
string: "\t&lt;option value='yes'&gt;yes&lt;/option&gt;\n"
string: "\t&lt;option value='no' selected='selected'&gt;no&lt;/option&gt;\n"
string: "&lt;/select&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/scaffold/views/selectmembertype.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	creates an HTML select element for member types
comment: //--------------------------------------------------------------------------------------------------
comment: //opt: varname - name of select element, default is 'type' [string]
comment: //opt: default - element selected by default, 'title' if not specified [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the select element
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: ''
string: 'type'
string: 'title'
string: 'title'
string: 'title'
string: 'wyswyg'
string: 'editable html'
string: 'plaintext'
string: 'plain text'
string: 'uid'
string: 'uid'
string: 'currency'
string: 'currency'
string: 'text'
string: 'text'
string: 'boolean'
string: 'boolean'
string: 'datetime'
string: 'datetime'
string: 'varchar(10)'
string: 'varchar(10)'
string: 'varchar(30)'
string: 'varchar(30)'
string: 'varchar(50)'
string: 'varchar(50)'
string: 'varchar(100)'
string: 'varchar(100)'
string: 'varchar(255)'
string: 'varchar(255)'
string: 'int'
string: 'integer'
string: 'bigint'
string: 'large integer'
string: 'float'
string: 'floating point number'
string: 'varname'
string: 'varname'
string: 'default'
string: 'default'
string: "&lt;select name='"
string: "'&gt;\n"
string: ''
string: " selected='selected'"
string: "\t&lt;option value='"
string: "'"
string: "&gt;$label&lt;/option&gt;\n"
string: "&lt;/select&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/scaffold/views/newmoduleformnav.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	form to make a new module scaffold
comment: //--------------------------------------------------------------------------------------------------
string: "&lt;p&gt;&lt;small&gt;&lt;b&gt;Note:&lt;/b&gt; You are not logged in.  Public users can use the scaffold "
string: "system and code templates to rough out Kapenta modules, but your work will "
string: "not be saved beyond your current browser session, and cannot be published for "
string: "others to re-use.&lt;/small&gt;&lt;/p&gt;"
string: 'public'
string: '&lt;br/&gt;'
string: 'modules/scaffold/views/newmoduleformnav.block.php'
string: '%%loginNote%%'

<b>scanning file: /var/www/an2google/trunk/modules/scaffold/views/modulename.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	get a module module definition name given its UID
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: UID - UID of a module definition [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check args and permissions
comment: //----------------------------------------------------------------------------------------------
string: 'modules/scaffold/models/moduledefinition.mod.php'
string: 'UID'
string: ''
string: 'UID'
string: ''

<b>scanning file: /var/www/an2google/trunk/modules/scaffold/views/moduledefinitionxml.fn.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //	display xml (optionally escaped for html)
comment: //-------------------------------------------------------------------------------------------------
comment: //arg: raUID - recordAlias or UID of scaffold record [string]
comment: //arg: escapehtml - if yes, HTML display of XML is produced (yes|no) [string]
comment: //---------------------------------------------------------------------------------------------
comment: //	check arguments and user permissions
comment: //---------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	load module definition
comment: //---------------------------------------------------------------------------------------------
comment: //-------------------------------------------------------------------------------------------------
string: 'modules/scaffold/models/moduledefinition.mod.php'
string: ''
string: 'raUID'
string: 'raUID'
string: '(not found: '
string: 'raUID'
string: ')'
string: 'escapehtml'
string: 'escapehtml'
string: 'yes'
string: "\t"
string: "&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;"

<b>scanning file: /var/www/an2google/trunk/modules/scaffold/views/moduledefinitioneditform.fn.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //	form to edit module definitions
comment: //-------------------------------------------------------------------------------------------------
comment: //arg: raUID - recordAlias or UID of a module definition [string]
comment: //returns: html form [string]
comment: //---------------------------------------------------------------------------------------------
comment: //	check arguments and user permissions
comment: //---------------------------------------------------------------------------------------------
comment: //if (false == authHas('scaffold', 'moduledefinition', 'edit', $args['raUID'])) { return ''; }
comment: //---------------------------------------------------------------------------------------------
comment: //	load module definition and make labels
comment: //---------------------------------------------------------------------------------------------	
comment: //---------------------------------------------------------------------------------------------
comment: //	substitute labels into block and return
comment: //---------------------------------------------------------------------------------------------	
string: 'modules/scaffold/models/moduledefinition.mod.php'
string: ''
string: 'raUID'
string: ''
string: 'raUID'
string: '(not found)'
string: 'modules/scaffold/views/moduledefinitioneditform.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/scaffold/views/modelextensions.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	show form for choosing extensions
comment: //--------------------------------------------------------------------------------------------------
comment: // * $args['rauid'] = recordAlias or UID of scaffold record
string: 'rauid'
string: 'modelname'
string: "&lt;form name='deleteModel' method='POST' action='%%serverPath%%scaffold/save/'&gt;\n"
string: "&lt;input type='hidden' name='action' value='' /&gt;\n"
string: "&lt;input type='hidden' name='UID' value='"
string: 'rauid'
string: "' /&gt;\n"
string: "&lt;input type='hidden' name='modelname' value='"
string: 'modelname'
string: "' /&gt;\n"
string: "&lt;input type='submit' value='Update Extensions' /&gt;\n"
string: "&lt;/form&gt;\n&lt;hr/&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/scaffold/views/menu.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	menu has public and private mode
comment: //--------------------------------------------------------------------------------------------------
comment: // TODO
comment: // TODO
comment: //--------------------------------------------------------------------------------------------------
string: ''
string: 'public'

<b>scanning file: /var/www/an2google/trunk/modules/scaffold/views/listmoduledefinitions.fn.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //	list module definitions
comment: //-------------------------------------------------------------------------------------------------
comment: //opt: page - page number, default is 1 [string]
comment: //opt: num - number of objects per page, default is 100 [string]
comment: // default page
comment: // default number of objects per page
comment: // default ordering
comment: // SQL conditions govern which module definitions are visible to current user
comment: //---------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //---------------------------------------------------------------------------------------------
comment: //if (false == authHas('scaffold', 'moduledefinition', 'view')) { return ''; }
comment: //---------------------------------------------------------------------------------------------
comment: //	count the number of module definitions (we can see our own)
comment: //---------------------------------------------------------------------------------------------
comment: // public user can see their own by session
comment: //$canSee = "public='yes' OR session='" . $session-&gt;UID . "'";
comment: // logged in users can see their own by user UID
comment: //$canSee = "public='yes' OR createdBy='" . $user-&gt;UID . "'";
comment: //---------------------------------------------------------------------------------------------
comment: //	load module definitions
comment: //---------------------------------------------------------------------------------------------
string: 'modules/scaffold/models/moduledefinition.mod.php'
string: 'name'
string: ''
string: 'page'
string: 'page'
string: 'num'
string: 'num'
string: '(invalid page number - too low)'
string: '(invalid number of rows per page)'
string: 'public'
string: '1=1'
string: 'Scaffold_ModuleDefinition'
string: '(invalid page number - too high)'
string: 'Scaffold_ModuleDefinition'
string: '*'
string: ''
string: 'name'
string: 'models'
string: 'public'
string: 'goto'
string: "counting... $total ---"
string: "[[:scaffold::countmodeldefs::UID="
string: 'UID'
string: ":]]"
string: 'name'
string: 'public'
string: 'editLink'

<b>scanning file: /var/www/an2google/trunk/modules/scaffold/views/haseditauth.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	returns whether current user is a group admin
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - moduledefinition UID or recordAlias [string]
string: 'modules/scaffold/models/group.mod.php'
string: 'admin'
string: 'yes'
string: 'raUID'
string: 'raUID'
string: 'yes'
string: 'no'

<b>scanning file: /var/www/an2google/trunk/modules/scaffold/views/editmodeldefinitionform.fn.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //	form for editing model definitions
comment: //-------------------------------------------------------------------------------------------------
comment: //arg: UID - UID of a model definition [string]
comment: //opt: modelUID - replaces UID [string]
comment: //returns: HTML form for editing model definitions [string]
comment: //---------------------------------------------------------------------------------------------
comment: //	check arguments and authorization
comment: //---------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	load the model definition
comment: //---------------------------------------------------------------------------------------------	
comment: //---------------------------------------------------------------------------------------------
comment: //	make the form
comment: //---------------------------------------------------------------------------------------------		
comment: //---------------------------------------------------------------------------------------------
comment: //	done
comment: //---------------------------------------------------------------------------------------------		
string: 'modules/scaffold/models/modeldefinition.mod.php'
string: ''
string: 'modelUID'
string: 'UID'
string: 'modelUID'
string: 'UID'
string: ''
string: 'UID'
string: ''
string: 'modules/scaffold/views/editmodeldefinitionform.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/scaffold/views/editmembers.fn.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //	makes an iframe for editing members of model definitions
comment: //-------------------------------------------------------------------------------------------------
comment: //arg: UID - UID of a model definition
comment: //opt: modelUID - replaces UID if present
comment: //---------------------------------------------------------------------------------------------
comment: //	check arguments and authentication
comment: //---------------------------------------------------------------------------------------------
comment: //TODO: permissions check
comment: //---------------------------------------------------------------------------------------------
comment: //	iframe code
comment: //---------------------------------------------------------------------------------------------
string: ''
string: 'modelUID'
string: 'UID'
string: 'modelUID'
string: 'UID'
string: ''
string: 'Scaffold_ModelDefinition'
string: 'UID'
string: ''
string: '%%serverPath%%scaffold/editmembersif/'
string: 'UID'
string: "&lt;iframe src='"
string: "' name='editMembers"
string: 'UID'
string: "'"
string: " width='570' height='200' frameborder='0'&gt;&lt;/iframe&gt;"

<b>scanning file: /var/www/an2google/trunk/modules/scaffold/views/editmemberform.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	shows a form to edit the properties of a member of a model definition
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: UID - UID of a model definition [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments, load model and authenticate
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
string: 'modules/scaffold/models/memberdefinition.mod.php'
string: ''
string: 'UID'
string: ''
string: 'UID'
string: ''
string: 'yes'
string: 'auto'
string: ''
string: 'modules/scaffold/views/editmemberform.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/scaffold/views/editallmodeldefinitions.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	list models on a scaffold /w edit form
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: UID - UID of a module definition [string]
comment: //---------------------------------------------------------------------------------------------
comment: // check arguments and authentication
comment: //---------------------------------------------------------------------------------------------
comment: //$model = new Scaffold_ModuleDefinition($args['raUID']);
comment: //TODO: permissions check
comment: //---------------------------------------------------------------------------------------------
comment: // load all models belonging to the given module and add an edit form for each of them
comment: //---------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/scaffold/models/modeldefinition.mod.php'
string: ''
string: 'UID'
string: "moduleUID='"
string: 'UID'
string: "'"
string: 'Scaffold_ModelDefinitions'
string: '*'
string: ''
string: ''
string: ''
string: 'modules/scaffold/views/editmodeldefinitionform.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/scaffold/views/deletemodelform.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	form to delete model
comment: //--------------------------------------------------------------------------------------------------
comment: // * $args['rauid'] = recordAlias or UID of scaffold record
comment: // * $args['modelname'] = name of a model on this module
comment: //--------------------------------------------------------------------------------------------------
string: 'rauid'
string: 'modelname'
string: "&lt;form name='deleteModel' method='POST' action='%%serverPath%%scaffold/save/'&gt;\n"
string: "&lt;input type='hidden' name='action' value='deleteModel' /&gt;\n"
string: "&lt;input type='hidden' name='UID' value='"
string: 'rauid'
string: "' /&gt;\n"
string: "&lt;input type='hidden' name='modelname' value='"
string: 'modelname'
string: "' /&gt;\n"
string: "&lt;input type='submit' value='Delete Model &gt;&gt;' /&gt;\n"
string: "&lt;/form&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/scaffold/views/countmodeldefs.fn.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //	count the number of models a module has
comment: //-------------------------------------------------------------------------------------------------
comment: //arg: UID - UID of a module definition [string]
comment: //returns: number of models [string]
comment: //---------------------------------------------------------------------------------------------
comment: //	check arguments and authentication
comment: //---------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	count the models
comment: //---------------------------------------------------------------------------------------------
string: 'UID'
string: ''
string: "moduleUID='"
string: 'UID'
string: "'"
string: 'Scaffold_ModelDefinition'

<b>scanning file: /var/www/an2google/trunk/modules/scaffold/views/confirmdeletemodelform.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	form to ask user if they'd like to delete a model definition
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: UID - UID of a model definition [string]
comment: //if (false == authHas('', '', 'delete')) { return ''; }
string: 'modules/scaffold/models/modeldefinition.mod.php'
string: ''
string: 'UID'
string: ''
string: 'UID'
string: 'modules/scaffold/confirmdeletemodelform.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/scaffold/views/codegen.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	generate templated code given a model definition and a template
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: model - UID of a modeldefinition [string]
comment: //arg: template - name of a template [string]
comment: //if (false == $scaffoldInCodeGen) { return ''; }		// security precaution
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the code
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	replace escaped chars
comment: //----------------------------------------------------------------------------------------------
comment: //$code = str_replace("\n", "&lt;br/&gt;\n", $code);
comment: //----------------------------------------------------------------------------------------------
comment: //	done
comment: //----------------------------------------------------------------------------------------------
string: ''
string: 'model'
string: ''
string: 'template'
string: ''
string: 'Scaffold_ModelDefinition'
string: 'model'
string: ''
string: 'template'
string: 'model'
string: 'modules/scaffold/inc/codegen_model.inc.php'
string: 'model'
string: '~n'
string: '\n'

<b>scanning file: /var/www/an2google/trunk/modules/scaffold/views/addmodelform.fn.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //	form to add a model to an existing module definition
comment: //-------------------------------------------------------------------------------------------------
comment: //arg: raUID - recordAlias or UID of a ModuleDefinition [string]
comment: //---------------------------------------------------------------------------------------------
comment: //	check arguments and permissions //TODO
comment: //---------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	load model
comment: //---------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	load model
comment: //---------------------------------------------------------------------------------------------
string: ''
string: 'raUID'
string: ''
string: 'raUID'
string: '(not found)'
string: 'modules/scaffold/views/addmodelform.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/scaffold/views/addmemberform.fn.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //	form for adding members to model definitions
comment: //-------------------------------------------------------------------------------------------------
comment: //arg: UID - UID of a model definition [string]
comment: //---------------------------------------------------------------------------------------------
comment: //	check arguments and authorization
comment: //---------------------------------------------------------------------------------------------
comment: //TODO: permissions check
comment: //---------------------------------------------------------------------------------------------
comment: //	add the block
comment: //---------------------------------------------------------------------------------------------
string: ''
string: 'UID'
string: ''
string: 'modules/scaffold/views/addmemberform.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/scaffold/models/moduledefinition.mod.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	model of kapenta module definition
comment: //--------------------------------------------------------------------------------------------------
comment: //+	
comment: //+	&lt;module&gt;
comment: //+	  &lt;name&gt;string&lt;/name&gt;
comment: //+	  &lt;description&gt;string&lt;/description&gt;
comment: //+	  &lt;version&gt;integer&lt;/version&gt;
comment: //+	  &lt;subversion&gt;integer&lt;/subversion&gt;
comment: //+	  &lt;defaultmodel&gt;modelname&lt;/defaultmodel&gt;
comment: //+	  &lt;models&gt;...&lt;/models&gt;
comment: //+	  &lt;relationships&gt;...&lt;/relationships&gt;
comment: //+	  &lt;permissions&gt;&lt;/permissions&gt;
comment: //+	&lt;/module&gt;
comment: //----------------------------------------------------------------------------------------------
comment: //	member variables
comment: //----------------------------------------------------------------------------------------------
comment: // currently loaded record
comment: // database structure
comment: // record whether an object has been loaded
comment: // model definitions [array]
comment: // ? [array]
comment: //----------------------------------------------------------------------------------------------
comment: //.	constructor and initalization
comment: //----------------------------------------------------------------------------------------------
comment: //opt: raUID - recordAlis or UID of a module definition object [string]
comment: // new object
comment: //----------------------------------------------------------------------------------------------
comment: //.	load a moduledefinition given its UID or alias
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //.	load an object provided as an associative array
comment: //----------------------------------------------------------------------------------------------
comment: //$this-&gt;loadXml($this-&gt;data['definition']);
comment: //----------------------------------------------------------------------------------------------
comment: //.	save a record
comment: //----------------------------------------------------------------------------------------------
comment: // check the record is valid
comment: //----------------------------------------------------------------------------------------------
comment: //.	load from XML
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: use KXmlDocument
comment: //--------------------------------------------------------------------------------------
comment: //	add simple properties
comment: //--------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------
comment: //	add set of models
comment: //--------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------
comment: //	add relationshiops between models
comment: //--------------------------------------------------------------------------------------
comment: // TODO: relationsips
comment: //----------------------------------------------------------------------------------------------
comment: //.	check model is complete enough to function
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //.	serialize to XML
comment: //----------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	compose
comment: //------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //.	serialize to HTML
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //.	return the data
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //.	make and extended array of all data a view will need
comment: //----------------------------------------------------------------------------------------------
comment: // TODO: auth here
comment: //------------------------------------------------------------------------------------------
comment: //	files
comment: //------------------------------------------------------------------------------------------
comment: //$ary['viewLink'] = "&lt;a href='/scaffold/profile/" . $ary['alias'] . "'&gt;[view]&lt;/a&gt;";
comment: //if (authHas('scaffold', 'view', $this-&gt;data) == false) { $ary['viewLink'] = ''; }
comment: //if (authHas('scaffold', 'edit', $this-&gt;data)) { $ary['editLink'] = ''; }	
comment: //----------------------------------------------------------------------------------------------
comment: //.	database table definition
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //.	delete this record
comment: //----------------------------------------------------------------------------------------------
comment: // TODO
comment: //----------------------------------------------------------------------------------------------
comment: //.	install (deprecated)
comment: //----------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	create scaffold table if it does not exist
comment: //------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	model definitions
comment: //----------------------------------------------------------------------------------------------
string: ''
string: ''
string: 'moduledefinitions'
string: '0'
string: '0'
string: 'describe your module here'
string: 'definition'
string: 'alias'
string: 'scaffold'
string: 'Scaffold_ModuleDefinition'
string: ''
string: 'name'
string: 'description'
string: 'revision'
string: 'revision'
string: 'version'
string: 'version'
string: 'subversion'
string: 'subversion'
string: 'defaultmodel'
string: 'defaultmodel'
string: ''
string: ''
string: 'Module must have a name.'
string: ''
string: "&lt;module&gt;\n"
string: "\t&lt;name&gt;"
string: "&lt;/name&gt;\n"
string: "\t&lt;description&gt;"
string: "&lt;/description&gt;\n"
string: "\t&lt;version&gt;"
string: 'version'
string: "&lt;/version&gt;\n"
string: "\t&lt;revision&gt;"
string: 'revision'
string: "&lt;/revision&gt;\n"
string: "\t&lt;defaultmodel&gt;"
string: 'defaultmodel'
string: "&lt;/defaultmodel&gt;\n"
string: "\t&lt;relationships&gt;&lt;/relationships&gt;\n"
string: "\t&lt;permissions&gt;&lt;/permissions&gt;\n"
string: "&lt;/module&gt;"
string: "&lt;pre&gt;"
string: "&lt;/pre&gt;"
string: 'editUrl'
string: '%%serverPath%%scaffold/editmoduledefinition/'
string: 'alias'
string: 'editLink'
string: "&lt;a href='"
string: 'editUrl'
string: "'&gt;[edit]&lt;/a&gt;"
string: 'namelc'
string: 'name'
string: 'installScript'
string: "\$installPath . 'modules/"
string: 'namelc'
string: "/inc/install.inc.php'"
string: 'model'
string: 'Scaffold_ModuleDefinition'
string: 'fields'
string: 'UID'
string: 'VARCHAR(30)'
string: 'name'
string: 'VARCHAR(100)'
string: 'description'
string: 'TEXT'
string: 'version'
string: 'VARCHAR(50)'
string: 'revision'
string: 'VARCHAR(50)'
string: 'defaultmodel'
string: 'VARCHAR(30)'
string: 'notes'
string: 'TEXT'
string: 'published'
string: 'VARCHAR(4)'
string: 'public'
string: 'VARCHAR(4)'
string: 'session'
string: 'VARCHAR(30)'
string: 'createdOn'
string: 'DATETIME'
string: 'createdBy'
string: 'VARCHAR(30)'
string: 'editedOn'
string: 'DATETIME'
string: 'editedBy'
string: 'VARCHAR(30)'
string: 'expires'
string: 'DATETIME'
string: 'alias'
string: 'VARCHAR(255)'
string: 'indices'
string: 'UID'
string: '10'
string: 'alias'
string: '20'
string: 'nodiff'
string: 'UID'
string: 'alias'
string: "&lt;h3&gt;Installing Table: Scaffold_ModuleDefinition&lt;/h3&gt;\n"
string: 'Scaffold_ModuleDefinition'
string: "created 'Scaffold_ModuleDefinition' table and indices...&lt;br/&gt;"
string: "'Scaffold_ModuleDefinition' table already exists...&lt;br/&gt;"
string: "moduleUID='"
string: "'"
string: 'Scaffold_ModelDefinition'
string: '*'
string: 'name'

<b>scanning file: /var/www/an2google/trunk/modules/scaffold/models/modeldefinition.mod.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	model of kapenta model definition
comment: //--------------------------------------------------------------------------------------------------
comment: //+	TODO: consider letting these have aliases
comment: //+
comment: //+	Members:
comment: //+
comment: //+ Member variables are represented as an associative array of:
comment: //+ name - name of the member [string]
comment: //+ type - type of member (html, UID, date, etc) [string]
comment: //+ dbtype - database field type (TEXT, DATETIME, VARCHAR(x), etc) [string]
comment: //+ index - index on this field (yes|no) [string]
comment: //+ editable - if users can edit this field (yes|no) [string]
comment: //+ optional - if this field must be present (yes|no) [string]
comment: //+ list - if this field shows up in lists (yes|no) [string]
comment: //+ summary - if this field shows up in summaries (yes|no) [string]
comment: //+ show - if this field is shown to users (yes|no) [string]
comment: //+ by - if lists can be sorted by this field (yes|no) [string]
comment: //+ weight - of this item in lists [string]
comment: //+ auto - if this item can be edited by users [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	member variables
comment: //----------------------------------------------------------------------------------------------
comment: // currently loaded record
comment: // database structure
comment: // record whether an object has been loaded
comment: // range (array of serialized objects)
comment: // set to true if members have been loaded
comment: // actions which can be taken with this model [array]
comment: // views of this model [array]
comment: // permissions which may be granted on objects of this class [array]
comment: // relationships between this and user objects [array]
comment: //----------------------------------------------------------------------------------------------
comment: //.	constructor and initalization
comment: //----------------------------------------------------------------------------------------------
comment: //opt: UID - UID of a module definition object [string]
comment: // set up the database table schema
comment: // initialize standard fields
comment: // items have an alias by default
comment: // data members
comment: // actions which may be takes on this object
comment: // views of this object or collections thereof
comment: // permissions on this type of object
comment: // user relationships (to this object)
comment: // try load an object if UID was given
comment: //----------------------------------------------------------------------------------------------
comment: //.	schema of a database table to store objects of this type
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //.	load a ModelDefinition given its UID 
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //.	load an object provided as an associative array
comment: //----------------------------------------------------------------------------------------------
comment: //arg: ary - associative [array]
comment: //----------------------------------------------------------------------------------------------
comment: //.	save the current record
comment: //----------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: // check the record is valid
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: // make sure this object has default members
comment: //------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //.	load from XML
comment: //----------------------------------------------------------------------------------------------
comment: // TODO
comment: //----------------------------------------------------------------------------------------------
comment: //.	check model is complete enough to function
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //.	serialize to XML
comment: //----------------------------------------------------------------------------------------------
comment: //arg: indent - line indentation so far [string]
comment: //arg: indentunit - unit of indentation, default is tab char [string]
comment: // TODO:
comment: //---------------------------------------------------------------------------------------------
comment: //.	serialize to an array
comment: //---------------------------------------------------------------------------------------------
comment: //==============================================================================================
comment: //	model members
comment: //==============================================================================================
comment: //----------------------------------------------------------------------------------------------
comment: //.	load members into array
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //.	make sure default members exist for this model
comment: //----------------------------------------------------------------------------------------------
comment: //echo "checking auto members&lt;br/&gt;";
comment: //------------------------------------------------------------------------------------------
comment: // everything has a UID
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: // for object which can be exported (attached to something outside this module)
comment: //------------------------------------------------------------------------------------------
comment: // should have these fields
comment: // should not have these fields
comment: //------------------------------------------------------------------------------------------
comment: // everything should have creator and lastedit meta
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: // add alias if this model uses them
comment: //------------------------------------------------------------------------------------------
comment: //should have this field
comment: // must not have this field
comment: //TODO: viewcount, etc
comment: //----------------------------------------------------------------------------------------------
comment: //.	add a named auto member
comment: //----------------------------------------------------------------------------------------------
comment: //arg: memberName - name of auto member [string]
comment: //TODO: checks here
comment: //---------------------------------------------------------------------------------------------
comment: //.	TODO: review this
comment: //---------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------
comment: //	set defaults if not present
comment: //----------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------
comment: //	set weight for non-auto members
comment: //----------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------
comment: //	add it and save to database
comment: //----------------------------------------------------------------------------------------
comment: // save will sort and collapse members array
comment: // reload members
comment: //---------------------------------------------------------------------------------------------
comment: //.	discover if this model includes a member with the name given (case insensitive)
comment: //---------------------------------------------------------------------------------------------
comment: //arg: name - name of a member [string]
comment: //returns: UID of a member with the given name if it exists, false if not [string][bool]
comment: //---------------------------------------------------------------------------------------------
comment: //.	remove a member from this model definition
comment: //---------------------------------------------------------------------------------------------
comment: //arg: name - name of a member [string]
comment: //returns: true if a member with the given name was removed, false if not
comment: // delete it
comment: // update weight of heavier members
comment: //update member list if loaded
comment: //---------------------------------------------------------------------------------------------
comment: //.	get database type corresponding to input type
comment: //---------------------------------------------------------------------------------------------
comment: //arg: type - a Kapenta member type [string]
comment: //returns: database (mySQL) field type or false on failure [string][bool]
comment: // and must be converted
comment: // should not happen
comment: //---------------------------------------------------------------------------------------------
comment: //.	get database index size for a given member type
comment: //---------------------------------------------------------------------------------------------
comment: //arg: type - a Kapenta member type [string]
comment: //returns: size of index [string]
comment: //---------------------------------------------------------------------------------------------
comment: //.	get weight of heaviest non-auto member, if any
comment: //---------------------------------------------------------------------------------------------
comment: //returns: weight [int]
comment: //---------------------------------------------------------------------------------------------
comment: //.	sort non-auto members consecutively by weight, starting from 0
comment: //---------------------------------------------------------------------------------------------
comment: // give them all weights incrementing from 1
comment: //---------------------------------------------------------------------------------------------
comment: //.	make and extended array of all data a view will need
comment: //---------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	load parent
comment: //------------------------------------------------------------------------------------------
comment: //TODO: title field
comment: //------------------------------------------------------------------------------------------
comment: //	permissions
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	URLs
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	files
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	done
comment: //------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //.	delete the current record
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //.	install (deprecated)
comment: //----------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	create scaffold table if it does not exist
comment: //------------------------------------------------------------------------------------------
string: 'modules/scaffold/models/memberdefinition.mod.php'
string: 'modules/scaffold/models/moduledefinition.mod.php'
string: ''
string: 'hasra'
string: 'yes'
string: ''
string: 'model'
string: 'Scaffold_ModelDefinition'
string: 'fields'
string: 'UID'
string: 'VARCHAR(30)'
string: 'moduleUID'
string: 'VARCHAR(30)'
string: 'name'
string: 'VARCHAR(100)'
string: 'description'
string: 'VARCHAR(255)'
string: 'notes'
string: 'TEXT'
string: 'members'
string: 'TEXT'
string: 'actions'
string: 'TEXT'
string: 'permissions'
string: 'TEXT'
string: 'views'
string: 'TEXT'
string: 'export'
string: 'VARCHAR(10)'
string: 'hasra'
string: 'VARCHAR(10)'
string: 'ramember'
string: 'VARCHAR(50)'
string: 'export'
string: 'VARCHAR(10)'
string: 'meta'
string: 'TEXT'
string: 'session'
string: 'VARCHAR(30)'
string: 'createdOn'
string: 'DATETIME'
string: 'createdBy'
string: 'VARCHAR(30)'
string: 'editedOn'
string: 'DATETIME'
string: 'editedBy'
string: 'VARCHAR(30)'
string: 'indices'
string: 'UID'
string: '10'
string: 'nodiff'
string: ''
string: "Saving model definition: {$this-&gt;UID}&lt;br/&gt;\n"
string: ''
string: ''
string: 'model must have a name.'
string: "\t"
string: "&lt;model&gt;\n"
string: "&lt;name&gt;"
string: "&lt;/name&gt;\n"
string: "&lt;members&gt;\n"
string: "\t&lt;/members&gt;\n"
string: "&lt;actions&gt;\n"
string: "&lt;/actions&gt;\n"
string: "&lt;views&gt;\n"
string: "&lt;/views&gt;\n"
string: "&lt;permissions&gt;\n"
string: "&lt;/permissions&gt;\n"
string: "&lt;userrelationship&gt;\n"
string: "&lt;/userrelationship&gt;\n"
string: "&lt;/model&gt;\n"
string: "model='"
string: "'"
string: 'Scaffold_MemberDefinition'
string: '*'
string: 'weight'
string: 'UID'
string: 'UID'
string: 'yes'
string: 'export'
string: 'refModule'
string: 'refModule'
string: 'refModel'
string: 'refModel'
string: 'refUID'
string: 'refUID'
string: 'refModule'
string: 'refModel'
string: 'refUID'
string: 'createdOn'
string: 'createdOn'
string: 'createdBy'
string: 'createdBy'
string: 'editedOn'
string: 'editedOn'
string: 'editedBy'
string: 'editedBy'
string: 'yes'
string: 'hasra'
string: 'alias'
string: 'alias'
string: 'alias'
string: "adding auto member: $memberName &lt;br/&gt;"
string: 'model'
string: 'weight'
string: 'name'
string: 'name'
string: 'UID'
string: 'title'
string: 'VARCHAR(255)'
string: 'wyswyg'
string: 'TEXT'
string: 'plaintext'
string: 'TEXT'
string: 'uid'
string: 'VARCHAR(30)'
string: 'VARCHAR(10)'
string: 'VARCHAR(10)'
string: 'currency'
string: 'INT'
string: "alias"
string: '20'
string: '10'
string: 'yes'
string: 'auto'
string: 'weight'
string: 'weight'
string: 'yes'
string: 'auto'
string: 'weight'
string: 'UID'
string: "setting weight of member "
string: 'UID'
string: " to $idx &lt;br/&gt;\n"
string: 'editUrl'
string: '%%serverPath%%scaffold/editmodeldefinition/'
string: 'UID'
string: 'editLink'
string: "&lt;a href='"
string: 'editUrl'
string: "'&gt;[edit]&lt;/a&gt;"
string: 'viewUrl'
string: '%%serverPath%%scaffold/showmodeldefinition/'
string: 'UID'
string: 'viewLink'
string: "&lt;a href='"
string: 'viewUrl'
string: "'&gt;[view]&lt;/a&gt;"
string: 'namelc'
string: 'name'
string: 'notesHtml'
string: 'notes'
string: 'moduleUID'
string: 'classname'
string: '_'
string: 'name'
string: 'moduleName'
string: 'moduleNameLc'
string: 'tableName'
string: 'moduleName'
string: '_'
string: 'name'
string: 'isDefaultModel'
string: 'no'
string: 'defaultmodel'
string: 'name'
string: 'isDefaultModel'
string: 'yes'
string: 'actionView'
string: 'show'
string: 'namelc'
string: 'actionNew'
string: 'new'
string: 'namelc'
string: 'actionSave'
string: 'save'
string: 'namelc'
string: 'actionDel'
string: 'del'
string: 'namelc'
string: 'actionEdit'
string: 'edit'
string: 'namelc'
string: 'yes'
string: 'isDefaultModel'
string: 'actionView'
string: 'show'
string: 'actionNew'
string: 'new'
string: 'actionSave'
string: 'save'
string: 'actionDel'
string: 'del'
string: 'actionEdit'
string: 'edit'
string: 'idField'
string: 'UID'
string: 'yes'
string: 'hasra'
string: 'idField'
string: 'alias'
string: 'titleField'
string: 'UID'
string: 'viewPerm'
string: 'view'
string: 'editPerm'
string: 'edit'
string: 'delPerm'
string: 'del'
string: 'newPerm'
string: 'new'
string: 'mviewUrl'
string: "'%~%serverPath%~%"
string: 'moduleName'
string: "/"
string: 'actionView'
string: "/'"
string: " . \$ext['"
string: 'idField'
string: "']"
string: 'meditUrl'
string: "'%~%serverPath%~%"
string: 'moduleName'
string: "/"
string: 'actionEdit'
string: "/'"
string: " . \$ext['"
string: 'idField'
string: "']"
string: 'mdelUrl'
string: "'%~%serverPath%~%"
string: 'moduleName'
string: "/"
string: 'actionDel'
string: "/'"
string: " . \$ext['"
string: 'idField'
string: "']"
string: 'modfile'
string: "\$installPath . 'modules/"
string: "/models/"
string: 'namelc'
string: ".mod.php'"
string: 'Scaffold_ModelDefinition'
string: "&lt;h3&gt;Installing Table: Scaffold_ModelDefinition&lt;/h3&gt;\n"
string: 'Scaffold_ModelDefinition'
string: "created 'Scaffold_ModelDefinition' table and indices...&lt;br/&gt;"
string: "'Scaffold_ModelDefinition' table already exists...&lt;br/&gt;"

<b>scanning file: /var/www/an2google/trunk/modules/scaffold/models/memberdefinition.mod.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	model of kapenta member definition
comment: //--------------------------------------------------------------------------------------------------
comment: //		$defaultProperties = array(
comment: //									'name' =&gt; 'unnamed',
comment: //									'type' =&gt; 'plaintext',
comment: //									'dbtype' =&gt; 'TEXT',
comment: //									'index' =&gt; 'no',
comment: //									'editable' =&gt; 'yes',
comment: //									'optional' =&gt; 'yes',
comment: //									'list' =&gt; 'no',
comment: //									'summary' =&gt; 'yes',
comment: //									'show' =&gt; 'yes',
comment: //									'by' =&gt; 'no',
comment: //									'weight' =&gt; '100'
comment: //----------------------------------------------------------------------------------------------
comment: //	member variables
comment: //----------------------------------------------------------------------------------------------
comment: //_	currently loaded record [array]
comment: //_	database structure [array]
comment: //_	record whether an object has been loaded [array]
comment: //var $memberFields = 'name|type|dbtype|index|editable|optional|list|summary|show|by|weight|auto';
comment: //----------------------------------------------------------------------------------------------
comment: //.	constructor and initalization
comment: //----------------------------------------------------------------------------------------------
comment: //opt: UID - UID of a member definition object [string]
comment: // set up the database table schema
comment: // initialize standard fields
comment: // set default values
comment: // try load an object if UID was given
comment: //----------------------------------------------------------------------------------------------
comment: //.	schema of a database table to store objects of this type
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //.	load a ModelDefinition given its UID 
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //.	load an object provided as an associative array
comment: //----------------------------------------------------------------------------------------------
comment: //arg: ary - associative [array]
comment: //----------------------------------------------------------------------------------------------
comment: //.	save the current record
comment: //----------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: // check the record is valid
comment: //------------------------------------------------------------------------------------------
comment: //echo "saving Scaffold_MemberDefinition: {$this-&gt;UID}&lt;br/&gt;";
comment: //echo "verified &lt;br/&gt;";
comment: //----------------------------------------------------------------------------------------------
comment: //.	load from XML
comment: //----------------------------------------------------------------------------------------------
comment: // TODO
comment: //----------------------------------------------------------------------------------------------
comment: //.	check model is complete enough to function
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //.	serialize to XML
comment: //----------------------------------------------------------------------------------------------
comment: //arg: indent - line indentation so far [string]
comment: //arg: indentunit - unit of indentation, default is tab char [string]
comment: //---------------------------------------------------------------------------------------------
comment: //.	serialize to an array
comment: //---------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //.	configure auto (magic) members
comment: //----------------------------------------------------------------------------------------------
comment: //returns: true on succes, false on failure [bool]
comment: //------------------------------------------------------------------------------------------
comment: //	set most common defaults for an automatic (magic) field
comment: //------------------------------------------------------------------------------------------
comment: // most auto fields do
comment: // automatically maintained
comment: // automatically maintained
comment: // field must be present
comment: // not shown in list view
comment: // not shown in summary view
comment: // not shown in full view
comment: // can't order collection views by this
comment: // this is an automatic field
comment: //------------------------------------------------------------------------------------------
comment: // choose a profile for this member
comment: //------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //.	get database type corresponding to input type
comment: //---------------------------------------------------------------------------------------------
comment: //arg: type - a Kapenta member type [string]
comment: //returns: database (mySQL) field type [string]
comment: // and must be converted
comment: // should not happen, but not a bad default
comment: //---------------------------------------------------------------------------------------------
comment: //.	make and extended array of all data a view will need
comment: //---------------------------------------------------------------------------------------------
comment: // TODO: permissions check here
comment: //----------------------------------------------------------------------------------------------
comment: //.	delete the current record
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //.	install (deprecated)
comment: //----------------------------------------------------------------------------------------------
comment: //if ('admin' != $user-&gt;role) { return false; }
comment: //------------------------------------------------------------------------------------------
comment: //	create scaffold table if it does not exist
comment: //------------------------------------------------------------------------------------------
string: 'modules/scaffold/models/modeldefinition.mod.php'
string: 'UID|refModule|refModel|refUID|createdOn|createdBy|editedOn|editedBy|aliags'
string: ''
string: 'member'
string: 'plaintext'
string: 'dbtype'
string: 'TEXT'
string: 'hasidx'
string: 'no'
string: 'diff'
string: 'yes'
string: 'editable'
string: 'yes'
string: 'optional'
string: 'yes'
string: 'list'
string: 'no'
string: 'summary'
string: 'yes'
string: 'showfull'
string: 'yes'
string: 'orderby'
string: 'no'
string: 'auto'
string: 'no'
string: ''
string: 'model'
string: 'Scaffold_MemberDefinition'
string: 'fields'
string: 'UID'
string: 'VARCHAR(33)'
string: 'model'
string: 'VARCHAR(30)'
string: 'name'
string: 'VARCHAR(100)'
string: 'type'
string: 'VARCHAR(50)'
string: 'dbtype'
string: 'VARCHAR(50)'
string: 'hasidx'
string: 'VARCHAR(5)'
string: 'diff'
string: 'VARCHAR(5)'
string: 'editable'
string: 'VARCHAR(5)'
string: 'optional'
string: 'VARCHAR(5)'
string: 'list'
string: 'VARCHAR(5)'
string: 'summary'
string: 'VARCHAR(5)'
string: 'showfull'
string: 'VARCHAR(5)'
string: 'orderby'
string: 'VARCHAR(5)'
string: 'weight'
string: 'SMALLINT'
string: 'auto'
string: 'VARCHAR(5)'
string: 'session'
string: 'VARCHAR(30)'
string: 'createdOn'
string: 'DATETIME'
string: 'createdBy'
string: 'VARCHAR(30)'
string: 'editedOn'
string: 'DATETIME'
string: 'editedBy'
string: 'VARCHAR(30)'
string: 'indices'
string: 'UID'
string: '10'
string: 'nodiff'
string: 'UID'
string: 'model'
string: 'name'
string: 'type'
string: 'dbtype'
string: 'hasidx'
string: 'diff'
string: 'editable'
string: 'optional'
string: 'list'
string: 'summary'
string: 'showfull'
string: 'orderby'
string: 'weight'
string: 'auto'
string: 'session'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: ''
string: ''
string: ''
string: 'member definition must have a name.'
string: 'Scaffold_ModelDefinition'
string: 'model'
string: "model '"
string: 'model'
string: "' does not exist."
string: 'this member has unrecognized type: '
string: "\t"
string: "&lt;member&gt;\n"
string: "&lt;name&gt;"
string: "&lt;/name&gt;\n"
string: "&lt;/member&gt;\n"
string: 'UID'
string: 'model'
string: 'name'
string: 'type'
string: 'dbtype'
string: 'hasidx'
string: 'diff'
string: 'editable'
string: 'optional'
string: 'list'
string: 'summary'
string: 'showfull'
string: 'orderby'
string: 'weight'
string: 'auto'
string: 'session'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: 'hasidx'
string: 'yes'
string: 'diff'
string: 'no'
string: 'editable'
string: 'no'
string: 'optional'
string: 'no'
string: 'list'
string: 'no'
string: 'summary'
string: 'no'
string: 'showfull'
string: 'yes'
string: 'orderby'
string: 'no'
string: 'auto'
string: 'yes'
string: 'UID'
string: 'UID'
string: 'dbtype'
string: 'VARCHAR(30)'
string: '-10'
string: 'refModule'
string: 'module'
string: 'dbtype'
string: 'VARCHAR(50)'
string: '-5'
string: 'refModel'
string: 'model'
string: 'dbtype'
string: 'VARCHAR(50)'
string: '-4'
string: 'refUID'
string: 'ref:*-*'
string: 'dbtype'
string: 'VARCHAR(30)'
string: '-3'
string: 'createdOn'
string: 'datetime'
string: 'dbtype'
string: 'DATETIME'
string: '1000'
string: 'createdBy'
string: 'ref:Users_User'
string: 'dbtype'
string: 'VARCHAR(30)'
string: '1001'
string: 'editedOn'
string: 'datetime'
string: 'dbtype'
string: 'DATETIME'
string: '1002'
string: 'editedBy'
string: 'ref:Users_User'
string: 'dbtype'
string: 'DATETIME'
string: '1003'
string: 'alias'
string: 'alias'
string: 'dbtype'
string: 'VARCHAR(255)'
string: '1050'
string: 'alias'
string: 'alias'
string: 'dbtype'
string: 'VARCHAR(255)'
string: '1051'
string: "unrecognized auto member: "
string: " &lt;br/&gt;\n"
string: 'title'
string: 'VARCHAR(255)'
string: 'wyswyg'
string: 'TEXT'
string: 'plaintext'
string: 'TEXT'
string: 'uid'
string: 'VARCHAR(30)'
string: 'varchar(10)'
string: 'VARCHAR(10)'
string: 'varchar(30)'
string: 'VARCHAR(30)'
string: 'varchar(50)'
string: 'VARCHAR(50)'
string: 'varchar(100)'
string: 'VARCHAR(100)'
string: 'varchar(255)'
string: 'VARCHAR(255)'
string: 'currency'
string: 'INT'
string: 'TEXT'
string: 'editUrl'
string: ''
string: 'editLink'
string: ''
string: 'delUrl'
string: ''
string: 'delLink'
string: ''
string: 'editUrl'
string: '%%serverPath%%scaffold/editmemberif/'
string: 'editLink'
string: "&lt;a href='"
string: 'editUrl'
string: "'&gt;[edit]&lt;/a&gt;"
string: 'delUrl'
string: '%%serverPath%%scaffold/deletemember/'
string: 'scaffold'
string: 'Scaffold_MemberDefinition'
string: "&lt;h3&gt;Installing Table: Scaffold_MemberDefinition&lt;/h3&gt;\n"
string: 'Scaffold_MemberDefinition'
string: "created 'Scaffold_MemberDefinition' table and indices...&lt;br/&gt;"
string: "'Scaffold_MemberDefinition' table already exists...&lt;br/&gt;"

<b>scanning file: /var/www/an2google/trunk/modules/scaffold/inc/tokenizer.class.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	a simple php tokenizer and parser
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	member variables
comment: //----------------------------------------------------------------------------------------------
comment: // PHP source code to tokenize [string]
comment: // holds an array of structs [array]
comment: // five char tokens [array]
comment: // three char tokens [array]
comment: // two char tokens [array]
comment: // one char tokens [array]
comment: // complex string tokens [array]
comment: // reserved words [array]
comment: // kapenta docgen lines / meta [array]
comment: // for printing output [int]
comment: //----------------------------------------------------------------------------------------------
comment: //.	constructor initialize search arrays
comment: //----------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	define some tokens
comment: //------------------------------------------------------------------------------------------
comment: // three char tokens
comment: // two char tokens
comment: // single char tokens (yes, PHP really does name some tokens after themselves)
comment: // escaped characters in complex strings
comment: // reserved words
comment: // kapenta docgen
comment: // let's get going
comment: //----------------------------------------------------------------------------------------------
comment: //.	tokenize $this-&gt;code
comment: //----------------------------------------------------------------------------------------------
comment: //%	array of token structs [array]
comment: //%	length of code [int]
comment: //------------------------------------------------------------------------------------------
comment: //	state machine 'registers'
comment: //------------------------------------------------------------------------------------------
comment: //%	current setting of state machine [string]
comment: //%	location of 'cursor' within the file [int]
comment: //%	current character, if any [char]
comment: //%	next character, if any [char]
comment: //%	next + 1 character, if any [char]
comment: //%	contains current token as it is read [string]
comment: //%	char position within file where this token started [string]
comment: //------------------------------------------------------------------------------------------
comment: //	go through the code one char at a time
comment: //------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------
comment: //	set c1, c2, c3, c4, one, two, three and four - TODO: optimize
comment: //--------------------------------------------------------------------------------------
comment: //%	next character [string]
comment: //%	next two characters [string]
comment: //%	next three characters [string]
comment: //--------------------------------------------------------------------------------------
comment: //	find out which mode (state) we're in, and behave accordingly
comment: //--------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------
comment: //	outside of php code, state changes when we encounter &lt;? &lt;% or &lt;?php
comment: //----------------------------------------------------------------------------------
comment: // start of PHP
comment: // clear the buffer
comment: // add token for opening tag
comment: //TODO: T_OPEN_TAG_WITH_ECHO &lt;?= or &lt;%=  escaping from HTML
comment: // set start of next token
comment: // advance cursor by one char
comment: // switch to php mode
comment: // just another extraneous chr
comment: //----------------------------------------------------------------------------------
comment: //	in of php code, look for generic tokens, single char ones, strings and comments
comment: //----------------------------------------------------------------------------------
comment: //%	what type of token we imagine this is [string]
comment: //%	size of this token [int]
comment: //------------------------------------------------------------------------------
comment: //	try guess what type of token it is
comment: //------------------------------------------------------------------------------
comment: // we don't know what it is, but its not whitespace				
comment: //------------------------------------------------------------------------------
comment: //	some of these will require switching modes
comment: //------------------------------------------------------------------------------
comment: //echo "charNo: $charNo guess: $guess one: $one two: $two three: $three&lt;br/&gt;\n";
comment: // switch to generic token mode
comment: // clear the buffer
comment: // token starts here
comment: // process this again in sqstring mode
comment: // switch to double quoted string mode
comment: // clear the buffer
comment: // next token starts here
comment: // switch to single quoted string mode
comment: // clear the buffer
comment: // token starts here
comment: // process this again in sqstring mode
comment: // throw the closing tag and switch 
comment: // to outside mode
comment: //$mode = 'heredoc';
comment: //$buffer = $c1;
comment: //TODO
comment: // if we have no dea what this is yet 
comment: // enter generic 'token' mode
comment: // clear the buffer
comment: // token starts here
comment: // process this again in token mode
comment: // skip to end of this token
comment: // end of case 'php'
comment: //----------------------------------------------------------------------------------
comment: //	long comments, end when we encounter */
comment: //----------------------------------------------------------------------------------
comment: // skip a char
comment: // next token might start two chars on
comment: // switch back to php mode
comment: //----------------------------------------------------------------------------------
comment: //	short comments end when we hit a newline or carriage return
comment: //----------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------
comment: //	kapenta docgen lines...
comment: //--------------------------------------------------------------------------					
comment: // clear the buffer
comment: // ... not really necessary?
comment: // switch back to php mode
comment: //----------------------------------------------------------------------------------
comment: //	single quoted string
comment: //----------------------------------------------------------------------------------
comment: // add c1 to buffer first
comment: // this is an escaped backslash
comment: // add c2 to the buffer
comment: // skip past c2
comment: // this is an escaped s-quote
comment: // add c2 to the buffer
comment: // skip past c2
comment: // this is the end of the string
comment: //--------------------------------------------------------------------------------------
comment: //	generic token mode, continue until we reach a non-label character
comment: //--------------------------------------------------------------------------------------
comment: //	add current char to the buffer
comment: //%	is set to true if c2 is a valid label chr [bool]
comment: //%	ASCII codepoint of the next char [int]
comment: // is [0-9]
comment: // is [A-Z]
comment: // is [a-z]
comment: // is _
comment: // this is the last char of the token
comment: //--------------------------------------------------------------------------------------
comment: //	double quoted string
comment: //--------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------
comment: // is this character the start of an escape sequence?
comment: //----------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------
comment: //	this *is* the beginning of some new escaped part
comment: //------------------------------------------------------------------------------
comment: // if there's something in the buffer then it's an invariant (literal) string
comment: // segment.  Throw it and clear the buffer.
comment: //------------------------------------------------------------------------------
comment: //	change to the appropriate mode for this type of escape sequence
comment: //------------------------------------------------------------------------------
comment: //------------------------------------------------------------------
comment: //	this is a variable inside of curly braces
comment: //------------------------------------------------------------------
comment: // it begins with {$
comment: // and starts right here
comment: // skip the '$'
comment: // process the rest in this mode
comment: //------------------------------------------------------------------
comment: //	this is an octal char reference, they can be 1-3 chars long
comment: //------------------------------------------------------------------
comment: // it begins with this char	
comment: // and starts right here
comment: // process the rest in dqoctal mode
comment: //------------------------------------------------------------------
comment: //	this is a hex char reference, they can be 1-2 chars long
comment: //------------------------------------------------------------------
comment: // 
comment: // next token begins here
comment: // skip the 'x'
comment: // set mode to dqhexchar
comment: //------------------------------------------------------------------
comment: //	this is something simple, like a tab or newline
comment: //------------------------------------------------------------------
comment: // 2 chars long
comment: // next token will start in 2
comment: // skip the next char
comment: // end switch
comment: //------------------------------------------------------------------------------
comment: //	not the beginning of an escaped sequence
comment: //------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------
comment: // throw any invariant stuff in the buffer
comment: //--------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------
comment: // start of simple embedded variable
comment: //--------------------------------------------------------------------------						
comment: // begins with $
comment: // starts here
comment: // process the rest of it thusly
comment: //--------------------------------------------------------------------------
comment: // end of dq string, throw the end of string token
comment: //--------------------------------------------------------------------------						
comment: // clear the buffer
comment: // back to php mode at last
comment: // next token begins after this
comment: //--------------------------------------------------------------------------
comment: //	none of the above, this is just an invariant (literal) string character
comment: //--------------------------------------------------------------------------
comment: // end of case 'dqstring'
comment: //--------------------------------------------------------------------------------------
comment: //	variable in double quoted string (plain, no curly braces)
comment: //--------------------------------------------------------------------------------------
comment: //%	is set to true if c2 is a valid label chr [bool]
comment: //%	ASCII codepoint of the next char [int]
comment: // is [0-9]
comment: // is [A-Z]
comment: // is [a-z]
comment: // is _
comment: //	end of variable
comment: //	clear the buffer
comment: //	return to dq string mode
comment: //	next token starts here
comment: //--------------------------------------------------------------------------------------
comment: //	variable in double quoted string, escaped in {$curlyBraceStyle}
comment: //--------------------------------------------------------------------------------------
comment: // TODO
comment: //--------------------------------------------------------------------------------------
comment: //	octal char in double quoted string
comment: //--------------------------------------------------------------------------------------
comment: // should always be [0-9]
comment: //------------------------------------------------------------------------------
comment: // next char is [0-9]
comment: //------------------------------------------------------------------------------
comment: // if the buffer holds 4 chars
comment: // next char is not [0-9]
comment: // end of octal char.  Throw it.
comment: // next section begins with c2
comment: // go back to dqstring mode
comment: //--------------------------------------------------------------------------------------
comment: //	hex char in double quoted string
comment: //--------------------------------------------------------------------------------------
comment: // should always be [0-9A-Fa-f]
comment: //------------------------------------------------------------------------------
comment: // next char is [0-9A-Fa-f], but if the buffer holds 3 chars then we're done
comment: //------------------------------------------------------------------------------
comment: // next char is not [0-9]
comment: // end of hex char.  Throw it.
comment: // next section begins with c2
comment: // go back to dqstring mode
comment: //--------------------------------------------------------------------------------------
comment: //	error
comment: //--------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	add final token	
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	done
comment: //------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //.	catch a thrown token
comment: //----------------------------------------------------------------------------------------------
comment: //arg: type - type of token [string]
comment: //arg: start - position from beginning of file [int]
comment: //arg: value - contents of token [string]
comment: // don't bother with null tokens
comment: //----------------------------------------------------------------------------------------------
comment: //.	make a new token
comment: //----------------------------------------------------------------------------------------------
string: ''
string: ''
string: "Constructing Scaffold_Tokenizer&lt;br/&gt;"
string: '&lt;?php'
string: '==='
string: 'T_IS_IDENTICAL'
string: '!=='
string: 'T_IS_NOT_IDENTICAL'
string: '&gt;&gt;='
string: 'T_SR_EQUAL'
string: '&lt;&lt;&lt;'
string: 'T_START_HEREDOC'
string: '&lt;&lt;='
string: 'T_SL_EQUAL'
string: '=&gt;'
string: 'T_DOUBLE_ARROW'
string: 'php'
string: 'X_PHP'
string: '//'
string: 'T_COMMENT'
string: '/*'
string: 'T_COMMENT'
string: '|='
string: 'T_OR_EQUAL'
string: '&amp;&amp;'
string: 'T_BOOLEAN_AND'
string: '||'
string: 'T_BOOLEAN_OR'
string: '--'
string: 'T_DEC'
string: '++'
string: 'T_INC'
string: '=='
string: 'T_IS_EQUAL'
string: '&lt;&gt;'
string: 'T_IS_NOT_EQUAL'
string: '&lt;='
string: 'T_IS_SMALLER_OR_EQUAL'
string: '&gt;='
string: 'T_IS_GREATER_OR_EQUAL'
string: '-='
string: 'T_MINUS_EQUAL'
string: '%='
string: 'T_MOD_EQUAL'
string: '*='
string: 'T_MUL_EQUAL'
string: '/='
string: 'T_DIV_EQUAL'
string: '^='
string: 'T_XOR_EQUAL'
string: '+='
string: 'T_PLUS_EQUAL'
string: '&gt;&gt;'
string: 'T_SR'
string: '.='
string: 'T_CONCAT_EQUAL'
string: '&amp;='
string: 'T_AND_EQUAL'
string: '%&gt;'
string: 'T_CLOSE_TAG'
string: '::'
string: 'T_PAAMAYIM_NEKUDOTAYIM'
string: '&lt;&lt;'
string: 'T_SL'
string: '-&gt;'
string: 'T_OBJECT_OPERATOR'
string: '#'
string: 'T_COMMENT'
string: '~'
string: '~'
string: '\\'
string: '\\'
string: '`'
string: '`'
string: '+'
string: '+'
string: '-'
string: '-'
string: '/'
string: '/'
string: '*'
string: '*'
string: '['
string: '['
string: ']'
string: ']'
string: '{'
string: '{'
string: '}'
string: '}'
string: ':'
string: ':'
string: ';'
string: ';'
string: "'"
string: "'"
string: '"'
string: '"'
string: '&lt;'
string: '&lt;'
string: '&gt;'
string: '&gt;'
string: ','
string: ','
string: '.'
string: '.'
string: '?'
string: '?'
string: '|'
string: '|'
string: '@'
string: '@'
string: '%'
string: '%'
string: '^'
string: '^'
string: '('
string: '('
string: ')'
string: ')'
string: "\t"
string: 'T_WHITESPACE'
string: '\r'
string: 'T_WHITESPACE'
string: "\n"
string: 'T_WHITESPACE'
string: ' '
string: 'T_WHITESPACE'
string: '$'
string: 'T_VARIABLE'
string: '='
string: 'T_ASSIGN'
string: '\n'
string: 'DQ_NEWLINE'
string: '\t'
string: 'DQ_TAB'
string: '\r'
string: 'DQ_CARRIAGERETURN'
string: '\v'
string: 'DQ_VERTICALTAB'
string: '\f'
string: 'DQ_FORMFEED'
string: '\$'
string: 'DQ_DOLLAR'
string: '\\'
string: '\\'
string: 'DQ_BACKSLASH'
string: '\\"'
string: 'DQ_DOUBLEQUOTE'
string: '\0'
string: 'DQ_OCTAL'
string: '\1'
string: 'DQ_OCTAL'
string: '\2'
string: 'DQ_OCTAL'
string: '\3'
string: 'DQ_OCTAL'
string: '\4'
string: 'DQ_OCTAL'
string: '\5'
string: 'DQ_OCTAL'
string: '\6'
string: 'DQ_OCTAL'
string: '\7'
string: 'DQ_OCTAL'
string: '\8'
string: 'DQ_OCTAL'
string: '\x'
string: 'DQ_HEXCHAR'
string: '{$'
string: 'DQ_VARBLOCK'
string: 'abstract'
string: 'T_ABSTRACT'
string: 'as'
string: 'T_AS'
string: 'break'
string: 'T_BREAK'
string: 'case'
string: 'T_CASE'
string: 'catch'
string: 'T_CATCH'
string: 'class'
string: 'T_CLASS'
string: 'clone'
string: 'T_CLONE'
string: 'const'
string: 'T_CONST'
string: 'continue'
string: 'T_CONTINUE'
string: 'declare'
string: 'T_DECLARE'
string: 'default'
string: 'T_DEFAULT'
string: 'do'
string: 'T_DO'
string: 'echo'
string: 'T_ECHO'
string: 'else'
string: 'T_ELSE'
string: 'elseif'
string: 'T_ELSEIF'
string: 'empty'
string: 'T_EMPTY'
string: 'enddeclare'
string: 'T_ENDDECLARE'
string: 'endfor'
string: 'T_ENDFOR'
string: 'endforeach'
string: 'T_ENDFOREACH'
string: 'endif'
string: 'T_ENDIF'
string: 'endswitch'
string: 'T_ENDSWITCH'
string: 'endwhile'
string: 'T_ENDWHILE'
string: 'exit'
string: 'T_EXIT'
string: 'extends'
string: 'T_EXTENDS'
string: 'final'
string: 'T_FINAL'
string: 'for'
string: 'T_FOR'
string: 'foreach'
string: 'T_FOREACH'
string: 'function'
string: 'T_FUNCTION'
string: 'global'
string: 'T_GLOBAL'
string: 'goto'
string: 'T_GOTO'
string: 'if'
string: 'T_IF'
string: 'implements'
string: 'T_IMPLEMENTS'
string: 'instanceof'
string: 'T_INSTANCEOF'
string: 'interface'
string: 'T_INTERFACE'
string: 'namespace'
string: 'T_NAMESPACE'
string: 'new'
string: 'T_NEW'
string: 'old_function'
string: 'T_OLD_FUNCTION'
string: 'private'
string: 'T_PRIVATE'
string: 'public'
string: 'T_PUBLIC'
string: 'while'
string: 'T_WHILE'
string: 'use'
string: 'T_USE'
string: 'try'
string: 'T_TRY'
string: 'var'
string: 'T_VAR'
string: 'switch'
string: 'T_SWITCH'
string: '__CLASS__'
string: 'T_CLASS_C'
string: '__DIR__'
string: 'T_DIR'
string: '__FILE__'
string: 'T_FILE'
string: '__FUNCTION__'
string: 'T_FUNC_C'
string: '__LINE__'
string: 'T_LINE'
string: '__NAMESPACE__'
string: 'T_NS_C'
string: '__METHOD__'
string: 'T_METHOD_C'
string: 'throw'
string: 'T_THROW'
string: 'xor'
string: 'T_LOGICAL_XOR'
string: 'or'
string: 'T_LOGICAL_OR'
string: 'and'
string: 'T_LOGICAL_AND'
string: 'return'
string: 'T_RETURN'
string: '//*'
string: 'DG_FILESUMMARY'
string: '//+'
string: 'DG_FILENOTES'
string: '//.'
string: 'DG_FUNCTION'
string: '//|'
string: 'DG_FUNCTION'
string: '//arg:'
string: 'DG_ARGUMENT'
string: '//opt:'
string: 'DG_OPTIONAL'
string: '//returns:'
string: 'DG_RETURNS'
string: '//;'
string: 'DG_FNNOTE'
string: '//:'
string: 'DG_FNNOTE'
string: '//----------'
string: 'DG_HR'
string: '//%'
string: 'DG_LOCAL'
string: '//_'
string: 'DG_OBJMEMBER'
string: ''
string: "tokenizing&lt;br/&gt;\n"
string: 'outside'
string: ''
string: ''
string: ''
string: ''
string: ''
string: ''
string: 'outside'
string: '&lt;?'
string: '&lt;%'
string: ''
string: 'T_INLINE_HTML'
string: ''
string: 'T_OPEN_TAG'
string: 'php'
string: "charNo set to $charNo &lt;br/&gt;\n"
string: 'php'
string: ''
string: ''
string: 'T_COMMENT'
string: '/*'
string: 'longcomment'
string: '//'
string: 'shortcomment'
string: '#'
string: 'shortcomment'
string: 'T_VARIABLE'
string: 'token'
string: ''
string: '"'
string: 'dqstring'
string: ''
string: 'DQ_STRING_START'
string: "'"
string: 'sqstring'
string: ''
string: "T_CLOSE_TAG"
string: 'outside'
string: 'T_START_HEREDOC'
string: ''
string: 'token'
string: ''
string: 'longcomment'
string: '*/'
string: 'php'
string: 'shortcomment'
string: "\r"
string: "\n"
string: 'T_COMMENT'
string: ''
string: 'php'
string: 'sqstring'
string: '\\'
string: '\\'
string: '\\'
string: '\''
string: "'"
string: "'"
string: 'T_CONSTANT_ENCAPSED_STRING'
string: ''
string: 'php'
string: 'token'
string: 'token'
string: '$'
string: 'T_VARIABLE'
string: 'T_LITERAL'
string: ''
string: 'php'
string: 'dqstring'
string: '\\'
string: '{'
string: ''
string: 'DQ_INVARIANT'
string: ''
string: 'DQ_VARBLOCK'
string: 'dqvariableblock'
string: 'DQ_OCTAL'
string: 'dqoctal'
string: 'DQ_HEXCHAR'
string: 'dqhexchar'
string: "\""
string: '$'
string: ''
string: 'DQ_INVARIANT'
string: '$'
string: 'dqvariable'
string: "\""
string: 'DQ_STRING_END'
string: ''
string: 'php'
string: 'dqvariable'
string: 'T_VARIABLE'
string: ''
string: 'dqstring'
string: 'dqvariableblock'
string: 'dqoctal'
string: 'DQ_OCTAL'
string: 'dqstring'
string: 'dqhexchar'
string: 'DQ_HEXCHAR'
string: 'dqstring'
string: "unknown mode: $mode&lt;br/&gt;\n"
string: 'outside'
string: ''
string: ''
string: 'type'
string: 'start'
string: 'value'
string: "&lt;br/&gt;\n"
string: 'type'
string: 'token'
string: 'start'
string: 'end'

<b>scanning file: /var/www/an2google/trunk/modules/scaffold/inc/sourcefile.class.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	Parser for  PHP source files
comment: //--------------------------------------------------------------------------------------------------
comment: //+	Note that special 'root' token always has ID 0, and that pointers set to -1 mean 'undefined'
comment: //+
comment: //+	Structure of tokens:
comment: //+		
comment: //+		id - index of this token in $this-&gt;tokens [int]
comment: //+		type - indentifies what type of token this is [string]
comment: //+		start - char position fron start of $this-&gt;raw [int]
comment: //+		value - the actual token [string]
comment: //+		length - the length of this value [int]
comment: //+		parent - index of parent token [int]
comment: //+		prev - index of previous token in list, -1 if undefined [int]
comment: //+		next - index of next token in list, -1 if undefined [int]
comment: //+		children - array of pointers to child tokens [array]
comment: //+		wsc - array of pointers to whitespace and comment child tokens [array]
comment: //+		row - the line number this token begins on [int]
comment: //+		col - column number, taking tabs into account [int]
comment: //+
comment: //+	Structure of functions:
comment: //+
comment: //+		id - index of this function [int]
comment: //+		name - function name [string]
comment: //+		args - array of argument structs [array]
comment: //+		parenset - id of parenset token [id]
comment: //+		calls - array of pointers to functions this one calls [id]
comment: //+		globals - array of globals this function uses [id]
comment: //+
comment: //+	TODO: look into ditching the length, row and col parts, no real need to store them
comment: //----------------------------------------------------------------------------------------------
comment: //	member variables
comment: //----------------------------------------------------------------------------------------------
comment: //	source tree [class:KSourceTree]
comment: //	location of raw file
comment: //	doubly linked tree of tokens (folded dl list) [class:KSourceTree]
comment: //	set to true when a source file has been successfully parsed [bool]
comment: //	array of function structs [array]
comment: //	set of rules by which to associate tokens with one another [array]
comment: //----------------------------------------------------------------------------------------------
comment: //.	constructor
comment: //----------------------------------------------------------------------------------------------
comment: //arg: fileName - name of PHP source file (relative to installPath) [string]
comment: //----------------------------------------------------------------------------------------------
comment: //.	go through source tree and extract details of functions
comment: //----------------------------------------------------------------------------------------------
comment: //opt: tokenId - ID of token to print, default is root [int]
comment: //opt: indent - intentation, default is none [string]
comment: //returns: tokens in .txt format [string]
comment: //----------------------------------------------------------------------------------------------
comment: //.	print tokens
comment: //----------------------------------------------------------------------------------------------
comment: //opt: tokenId - ID of token to print, default is root [int]
comment: //opt: indent - intentation, default is none [string]
comment: //returns: tokens in .txt format [string]
string: 'modules/scaffold/inc/tokenizer.class.php'
string: 'modules/scaffold/inc/kphptoken.class.php'
string: 'modules/scaffold/inc/kphpfunction.class.php'
string: 'modules/scaffold/inc/ksourcetree.class.php'
string: ''
string: "extracting functions from source tree&lt;br/&gt;\n"
string: 'PHP_FUNCTION'
string: ''

<b>scanning file: /var/www/an2google/trunk/modules/scaffold/inc/relationships.inc.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //*	functions to test relationships between users and objects on this module
comment: //-------------------------------------------------------------------------------------------------
comment: //+	These functions are used when testing if a user has a permission on an object by virtue of 
comment: //+	their relationship to it.
comment: //-------------------------------------------------------------------------------------------------
comment: //|	functions to test relationships between users and objects on this module
comment: //-------------------------------------------------------------------------------------------------
comment: //arg: raUID - recordAlias or UID of a module definition [string]
string: 'modules/scaffold/models/moduledefinition.mod.php'

<b>scanning file: /var/www/an2google/trunk/modules/scaffold/inc/parser.inc.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	a simple php tokenizer and parser
comment: //--------------------------------------------------------------------------------------------------
comment: //%	array of token structs [array]
comment: //%	length of code [int]
comment: //----------------------------------------------------------------------------------------------
comment: //	define some tokens
comment: //----------------------------------------------------------------------------------------------
comment: // three char tokens
comment: // two char tokens
comment: // single char tokens (yes, PHP really does name some tokens after themselves)
comment: // escaped characters in complex strings
comment: // reserved words
comment: //----------------------------------------------------------------------------------------------
comment: //	state machine 'registers'
comment: //----------------------------------------------------------------------------------------------
comment: //%	current setting of state machine [string]
comment: //%	location of 'cursor' within the file [int]
comment: //%	current character, if any [char]
comment: //%	next character, if any [char]
comment: //%	next + 1 character, if any [char]
comment: //%	next + 2 character, if any [char]
comment: //%	next + 3 character, if any [char]
comment: //%	contains current token as it is read [string]
comment: //%	char position within file where this token started [string]
comment: //%	line number [int]
comment: //% column number, assuming 4 tab spaces [int]
comment: //	initialize $cX for first pass of loop
comment: //	...
comment: //----------------------------------------------------------------------------------------------
comment: //	go through the code one char at a time
comment: //----------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	set c1, c2, c3, c4, one, two, three and four - TODO: optimize
comment: //------------------------------------------------------------------------------------------
comment: //%	next character [string]
comment: //%	next two characters [string]
comment: //%	next three characters [string]
comment: //%	next four characters [string]
comment: //%	next five characters [string]
comment: //------------------------------------------------------------------------------------------
comment: //	find out which mode (state) we're in, and behave accordingly
comment: //------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------
comment: //	outside of php code, state changes when we encounter &lt;? &lt;% or &lt;?php
comment: //--------------------------------------------------------------------------------------
comment: // start of PHP
comment: // clear the buffer
comment: //TODO: T_OPEN_TAG_WITH_ECHO 	&lt;?= or &lt;%= 	escaping from HTML
comment: //%	opening tag [string]
comment: //%	length of opening tag [int]
comment: // add token for opening tag
comment: // set start of next token
comment: // advance cursor
comment: // switch to php mode
comment: //--------------------------------------------------------------------------------------
comment: //	inside of php code, look for generic tokens, single char ones, strings and comments
comment: //--------------------------------------------------------------------------------------
comment: //%	what type of token we imagine this is [string]
comment: //%	size of this token [int]
comment: //----------------------------------------------------------------------------------
comment: //	try guess what type of token it is
comment: //----------------------------------------------------------------------------------
comment: // we don't know what it is yet, but its not whitespace				
comment: //----------------------------------------------------------------------------------
comment: //	some of these will require switching modes
comment: //----------------------------------------------------------------------------------
comment: //echo "charNo: $charNo guess: $guess one: $one two: $two three: $three&lt;br/&gt;\n";
comment: // switch to generic token mode
comment: // clear the buffer
comment: // token starts here
comment: // process this again in sqstring mode
comment: // switch to double quoted string mode
comment: // clear the buffer
comment: // next token starts here
comment: // switch to single quoted string mode
comment: // clear the buffer
comment: // token starts here
comment: // process this again in sqstring mode
comment: // throw the closing tag and switch to outside mode
comment: //$mode = 'heredoc';
comment: //$buffer = $c1;
comment: //TODO
comment: // if we have no dea what this is yet 
comment: // enter generic 'token' mode
comment: // clear the buffer
comment: // token starts here
comment: // process this again in token mode
comment: // skip to end of this token
comment: // end of case 'php'
comment: //--------------------------------------------------------------------------------------
comment: //	long comments, end when we encounter */
comment: //--------------------------------------------------------------------------------------
comment: // skip a char
comment: // next token might start two chars on
comment: // switch back to php mode
comment: //--------------------------------------------------------------------------------------
comment: //	short comments end when we hit a newline or carriage return
comment: //--------------------------------------------------------------------------------------
comment: // clear the buffer
comment: // ... not really necessary?
comment: // switch back to php mode
comment: //--------------------------------------------------------------------------------------
comment: //	single quoted string
comment: //--------------------------------------------------------------------------------------
comment: // add c1 to buffer first
comment: // this is an escaped backslash
comment: // add c2 to the buffer
comment: // skip past c2
comment: // this is an escaped s-quote
comment: // add c2 to the buffer
comment: // skip past c2
comment: // this is the end of the string
comment: //--------------------------------------------------------------------------------------
comment: //	generic token mode, continue until we reach a non-label character
comment: //--------------------------------------------------------------------------------------
comment: //	add current char to the buffer
comment: //%	is set to true if c2 is a valid label chr [bool]
comment: //%	ASCII codepoint of the next char [int]
comment: // is [0-9]
comment: // is [A-Z]
comment: // is [a-z]
comment: // is _
comment: // this is the last char of the token
comment: //--------------------------------------------------------------------------------------
comment: //	double quoted string
comment: //--------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------
comment: // is this character the start of an escape sequence?
comment: //----------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------
comment: //	this *is* the beginning of some new escaped part
comment: //------------------------------------------------------------------------------
comment: // if there's something in the
comment: // buffer then it's an
comment: // invariant (literal) string
comment: // segment.  Throw it and
comment: // clear the buffer.
comment: //------------------------------------------------------------------------------
comment: //	change to the appropriate mode for this type of escape sequence
comment: //------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------
comment: //	this is a variable inside of curly braces
comment: //----------------------------------------------------------------------						
comment: // it begins with {$
comment: // and starts right here
comment: // skip the '$'
comment: // process the rest in dqoctal mode
comment: //----------------------------------------------------------------------
comment: //	this is an octal char reference, they can be up to 1-3 chars long
comment: //----------------------------------------------------------------------
comment: // it begins with this char	
comment: // and starts right here
comment: // process the rest in dqoctal mode
comment: //----------------------------------------------------------------------
comment: //	this is a hex char reference, they can be up to 1-2 chars long
comment: //----------------------------------------------------------------------
comment: // 
comment: // next token begins here
comment: // skip the 'x'
comment: // set mode to dqhexchar
comment: //----------------------------------------------------------------------
comment: //	this is something simple, like a tab or newline
comment: //----------------------------------------------------------------------
comment: // defined in array above
comment: // begins here
comment: // they're all two chars long
comment: // next token will start in 2 chars
comment: // skip the next char
comment: // end switch
comment: //------------------------------------------------------------------------------
comment: //	not the beginning of an escaped sequence
comment: //------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------
comment: // throw any invariant stuff in the buffer
comment: //--------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------
comment: // start of simple embedded variable
comment: //--------------------------------------------------------------------------						
comment: // begins with $
comment: // starts here
comment: // process the rest of it thusly
comment: //--------------------------------------------------------------------------
comment: // end of dq string, throw the end of string token
comment: //--------------------------------------------------------------------------						
comment: // clear the buffer
comment: // back to php mode at last
comment: // next token begins after this
comment: //--------------------------------------------------------------------------
comment: //	none of the above, this is just an invariant (literal) string character
comment: //--------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------
comment: //	variable in double quoted string (plain, no curly braces)
comment: //--------------------------------------------------------------------------------------
comment: //%	is set to true if c2 is a valid label chr [bool]
comment: //%	ASCII codepoint of the next char [int]
comment: // is [0-9]
comment: // is [A-Z]
comment: // is [a-z]
comment: // is _
comment: //	clear the buffer
comment: //	return to dq string mode
comment: //	next token starts here
comment: //--------------------------------------------------------------------------------------
comment: //	variable in double quoted string, escaped in {$curlyBraceStyle}
comment: //--------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------
comment: //	octal char in double quoted string
comment: //--------------------------------------------------------------------------------------
comment: // should always be [0-9]
comment: //------------------------------------------------------------------------------
comment: // next char is [0-9]
comment: //------------------------------------------------------------------------------
comment: // if the buffer holds 4 chars
comment: //------------------------------------------------------------------------------
comment: // next char is not [0-9]
comment: //------------------------------------------------------------------------------
comment: // then we've reached the end
comment: // of octal char.  Throw it.
comment: // next section begins with c2
comment: // go back to dqstring mode
comment: //--------------------------------------------------------------------------------------
comment: //	hex char in double quoted string
comment: //--------------------------------------------------------------------------------------
comment: // should always be [0-9A-Fa-f]
comment: //------------------------------------------------------------------------------
comment: // next char is [0-9A-Fa-f], but if the buffer holds 3 chars then we're done
comment: //------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------
comment: // next char is not [0-9]
comment: //------------------------------------------------------------------------------
comment: // then we've reached the end
comment: // of hex char.  Throw it.
comment: // next section begins with c2
comment: // go back to dqstring mode
comment: //--------------------------------------------------------------------------------------
comment: //	error
comment: //--------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	add final token	
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	done
comment: //------------------------------------------------------------------------------------------
string: '&lt;?php'
string: '==='
string: 'T_IS_IDENTICAL'
string: '!=='
string: 'T_IS_NOT_IDENTICAL'
string: '&gt;&gt;='
string: 'T_SR_EQUAL'
string: '&lt;&lt;&lt;'
string: 'T_START_HEREDOC'
string: '&lt;&lt;='
string: 'T_SL_EQUAL'
string: '=&gt;'
string: 'T_DOUBLE_ARROW'
string: '//'
string: 'T_COMMENT'
string: '/*'
string: 'T_COMMENT'
string: '|='
string: 'T_OR_EQUAL'
string: '&amp;&amp;'
string: 'T_BOOLEAN_AND'
string: '||'
string: 'T_BOOLEAN_OR'
string: '--'
string: 'T_DEC'
string: '++'
string: 'T_INC'
string: '=='
string: 'T_IS_EQUAL'
string: '&lt;&gt;'
string: 'T_IS_NOT_EQUAL'
string: '&lt;='
string: 'T_IS_SMALLER_OR_EQUAL'
string: '&gt;='
string: 'T_IS_GREATER_OR_EQUAL'
string: '-='
string: 'T_MINUS_EQUAL'
string: '%='
string: 'T_MOD_EQUAL'
string: '*='
string: 'T_MUL_EQUAL'
string: '/='
string: 'T_DIV_EQUAL'
string: '^='
string: 'T_XOR_EQUAL'
string: '+='
string: 'T_PLUS_EQUAL'
string: '&gt;&gt;'
string: 'T_SR'
string: '.='
string: 'T_CONCAT_EQUAL'
string: '&amp;='
string: 'T_AND_EQUAL'
string: '%&gt;'
string: 'T_CLOSE_TAG'
string: '::'
string: 'T_PAAMAYIM_NEKUDOTAYIM'
string: '&lt;&lt;'
string: 'T_SL'
string: '-&gt;'
string: 'T_OBJECT_OPERATOR'
string: '#'
string: 'T_COMMENT'
string: '~'
string: '~'
string: '\\'
string: '\\'
string: '`'
string: '`'
string: '+'
string: '+'
string: '-'
string: '-'
string: '/'
string: '/'
string: '*'
string: '*'
string: '['
string: '['
string: ']'
string: ']'
string: '{'
string: '{'
string: '}'
string: '}'
string: ':'
string: ':'
string: ';'
string: ';'
string: "'"
string: "'"
string: '"'
string: '"'
string: '&lt;'
string: '&lt;'
string: '&gt;'
string: '&gt;'
string: ','
string: ','
string: '.'
string: '.'
string: '?'
string: '?'
string: '|'
string: '|'
string: '@'
string: '@'
string: '%'
string: '%'
string: '^'
string: '^'
string: '('
string: '('
string: ')'
string: ')'
string: "\t"
string: 'T_WHITESPACE'
string: '\r'
string: 'T_WHITESPACE'
string: "\n"
string: 'T_WHITESPACE'
string: ' '
string: 'T_WHITESPACE'
string: '$'
string: 'T_VARIABLE'
string: '\n'
string: 'DQ_NEWLINE'
string: '\t'
string: 'DQ_TAB'
string: '\r'
string: 'DQ_CARRIAGERETURN'
string: '\v'
string: 'DQ_VERTICALTAB'
string: '\f'
string: 'DQ_FORMFEED'
string: '\$'
string: 'DQ_DOLLAR'
string: '\\'
string: '\\'
string: 'DQ_BACKSLASH'
string: '\\"'
string: 'DQ_DOUBLEQUOTE'
string: '\0'
string: 'DQ_OCTAL'
string: '\1'
string: 'DQ_OCTAL'
string: '\2'
string: 'DQ_OCTAL'
string: '\3'
string: 'DQ_OCTAL'
string: '\4'
string: 'DQ_OCTAL'
string: '\5'
string: 'DQ_OCTAL'
string: '\6'
string: 'DQ_OCTAL'
string: '\7'
string: 'DQ_OCTAL'
string: '\8'
string: 'DQ_OCTAL'
string: '\x'
string: 'DQ_HEXCHAR'
string: '{$'
string: 'DQ_VARBLOCK'
string: 'abstract'
string: 'T_ABSTRACT'
string: 'as'
string: 'T_AS'
string: 'break'
string: 'T_BREAK'
string: 'case'
string: 'T_CASE'
string: 'catch'
string: 'T_CATCH'
string: 'class'
string: 'T_CLASS'
string: 'clone'
string: 'T_CLONE'
string: 'const'
string: 'T_CONST'
string: 'continue'
string: 'T_CONTINUE'
string: 'declare'
string: 'T_DECLARE'
string: 'default'
string: 'T_DEFAULT'
string: 'do'
string: 'T_DO'
string: 'echo'
string: 'T_ECHO'
string: 'else'
string: 'T_ELSE'
string: 'elseif'
string: 'T_ELSEIF'
string: 'empty'
string: 'T_EMPTY'
string: 'enddeclare'
string: 'T_ENDDECLARE'
string: 'endfor'
string: 'T_ENDFOR'
string: 'endforeach'
string: 'T_ENDFOREACH'
string: 'endif'
string: 'T_ENDIF'
string: 'endswitch'
string: 'T_ENDSWITCH'
string: 'endwhile'
string: 'T_ENDWHILE'
string: 'exit'
string: 'T_EXIT'
string: 'extends'
string: 'T_EXTENDS'
string: 'final'
string: 'T_FINAL'
string: 'for'
string: 'T_FOR'
string: 'foreach'
string: 'T_FOREACH'
string: 'function'
string: 'T_FUNCTION'
string: 'global'
string: 'T_GLOBAL'
string: 'goto'
string: 'T_GOTO'
string: 'if'
string: 'T_IF'
string: 'implements'
string: 'T_IMPLEMENTS'
string: 'instanceof'
string: 'T_INSTANCEOF'
string: 'interface'
string: 'T_INTERFACE'
string: 'namespace'
string: 'T_NAMESPACE'
string: 'new'
string: 'T_NEW'
string: 'old_function'
string: 'T_OLD_FUNCTION'
string: 'private'
string: 'T_PRIVATE'
string: 'public'
string: 'T_PUBLIC'
string: 'while'
string: 'T_WHILE'
string: 'use'
string: 'T_USE'
string: 'try'
string: 'T_TRY'
string: 'var'
string: 'T_VAR'
string: 'switch'
string: 'T_SWITCH'
string: '__CLASS__'
string: 'T_CLASS_C'
string: '__DIR__'
string: 'T_DIR'
string: '__FILE__'
string: 'T_FILE'
string: '__FUNCTION__'
string: 'T_FUNC_C'
string: '__LINE__'
string: 'T_LINE'
string: '__NAMESPACE__'
string: 'T_NS_C'
string: '__METHOD__'
string: 'T_METHOD_C'
string: 'throw'
string: 'T_THROW'
string: 'xor'
string: 'T_LOGICAL_XOR'
string: 'or'
string: 'T_LOGICAL_OR'
string: 'and'
string: 'T_LOGICAL_AND'
string: 'return'
string: 'T_RETURN'
string: 'outside'
string: ''
string: ''
string: ''
string: ''
string: ''
string: ''
string: ''
string: ''
string: ''
string: ''
string: 'outside'
string: '&lt;?'
string: '&lt;%'
string: '&lt;?php'
string: ''
string: 'type'
string: 'T_INLINE_HTML'
string: 'start'
string: 'value'
string: ''
string: '&lt;?php'
string: 'type'
string: 'T_OPEN_TAG'
string: 'start'
string: 'value'
string: 'php'
string: "charNo set to $charNo &lt;br/&gt;\n"
string: 'php'
string: ''
string: ''
string: 'T_COMMENT'
string: '/*'
string: 'longcomment'
string: '//'
string: 'shortcomment'
string: '#'
string: 'shortcomment'
string: 'T_VARIABLE'
string: 'token'
string: ''
string: '"'
string: 'dqstring'
string: ''
string: 'DQ_STRING_START'
string: 'type'
string: 'start'
string: 'value'
string: "'"
string: 'sqstring'
string: ''
string: "T_CLOSE_TAG"
string: 'type'
string: 'start'
string: 'value'
string: 'outside'
string: 'T_START_HEREDOC'
string: ''
string: 'token'
string: ''
string: 'type'
string: 'start'
string: 'value'
string: 'longcomment'
string: '*/'
string: 'type'
string: 'start'
string: 'value'
string: 'php'
string: 'shortcomment'
string: "\r"
string: "\n"
string: 'type'
string: 'T_COMMENT'
string: 'start'
string: 'value'
string: ''
string: 'php'
string: 'sqstring'
string: '\\'
string: '\\'
string: '\\'
string: '\''
string: "'"
string: "'"
string: 'type'
string: 'T_CONSTANT_ENCAPSED_STRING'
string: 'start'
string: 'value'
string: ''
string: 'php'
string: 'token'
string: 'token'
string: '$'
string: 'T_VARIABLE'
string: 'type'
string: 'start'
string: 'value'
string: ''
string: 'php'
string: 'dqstring'
string: '\\'
string: '{'
string: ''
string: 'type'
string: 'DQ_INVARIANT'
string: 'start'
string: 'value'
string: ''
string: 'DQ_VARBLOCK'
string: 'dqoctal'
string: 'DQ_OCTAL'
string: 'dqoctal'
string: 'DQ_HEXCHAR'
string: 'dqhexchar'
string: 'type'
string: 'start'
string: 'value'
string: "\""
string: '$'
string: ''
string: 'type'
string: 'DQ_INVARIANT'
string: 'start'
string: 'value'
string: '$'
string: 'dqvariable'
string: "\""
string: 'type'
string: 'DQ_STRING_END'
string: 'start'
string: 'value'
string: ''
string: 'php'
string: 'dqvariable'
string: 'type'
string: 'T_VARIABLE'
string: 'start'
string: 'value'
string: ''
string: 'dqstring'
string: 'dqvariableblock'
string: 'dqoctal'
string: 'type'
string: 'DQ_OCTAL'
string: 'start'
string: 'value'
string: 'dqstring'
string: 'dqhexchar'
string: 'type'
string: 'DQ_HEXCHAR'
string: 'start'
string: 'value'
string: 'dqstring'
string: "unknown mode: $mode&lt;br/&gt;\n"
string: 'outside'
string: ''
string: 'type'
string: 'start'
string: 'value'
string: 'type'
string: 'token'
string: 'start'
string: 'end'

<b>scanning file: /var/www/an2google/trunk/modules/scaffold/inc/maintenance.inc.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //	maintain the images table
comment: //-------------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	check aliases
comment: //---------------------------------------------------------------------------------------------
comment: //-----------------------------------------------------------------------------------------
comment: //	check that this record has a recordAlias
comment: //-----------------------------------------------------------------------------------------
comment: // not fixed
comment: // fixed
comment: //---------------------------------------------------------------------------------------------
comment: //	compile report
comment: //---------------------------------------------------------------------------------------------
string: 'modules/scaffold/models/moduledefinition.mod.php'
string: "&lt;h2&gt;Checking Scaffold_ModuleDefinition table...&lt;/h2&gt;"
string: 'UID'
string: 'Title'
string: 'error'
string: "select * from Scaffold_ModuleDefinition"
string: 'scaffold'
string: 'Scaffold_ModuleDefinition'
string: 'UID'
string: ''
string: 'alias'
string: 'UID'
string: ''
string: 'alias'
string: 'UID'
string: 'name'
string: 'added recordalias'
string: 'UID'
string: 'name'
string: 'added recordalias'
string: "&lt;b&gt;Records Checked:&lt;/b&gt; $recordCount&lt;br/&gt;\n"
string: "&lt;b&gt;Errors Found:&lt;/b&gt; $errorCount&lt;br/&gt;\n"
string: "&lt;b&gt;Errors Fixed:&lt;/b&gt; $fixCount&lt;br/&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/scaffold/inc/ksourcetree.class.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	object representing source tree
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	member variables
comment: //----------------------------------------------------------------------------------------------
comment: //_ location of raw file [string]
comment: //_ array of KPHPToken objects [array|class:KPHPToken]
comment: //_ raw source code [string]
comment: //_ map of line numbers in raw [array]
comment: //_ number of spaces per tab [int]
comment: //_	set to true when source has been changed [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //.	constructor
comment: //----------------------------------------------------------------------------------------------
comment: // initialize arrays
comment: // create root token
comment: // nothing more to do
comment: //----------------------------------------------------------------------------------------------
comment: //.	add a token to the tree
comment: //----------------------------------------------------------------------------------------------
comment: //echo "adding token: {id: $newId, type: $type, start: $start value: $value, "
comment: //	   . "parentId: $parentId, after: $after}&lt;br/&gt;\n"; flush();
comment: //----------------------------------------------------------------------------------------------
comment: //.	return a token given its id
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //.	check if a token with a given id exists (this is mostly a shortcut for the hands and eyes)
comment: //----------------------------------------------------------------------------------------------
comment: //arg: tokenId - array index of a token [int]
comment: //returns: true if it exists, false if not [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //.	step through a chain looking for a particular token (type and numbers)
comment: //----------------------------------------------------------------------------------------------
comment: //arg: startId - id if first token in range [int]
comment: //arg: matchType - type of token which terminates range [string]
comment: //arg: matchNumbers - numbers of token which terminates range [string]
comment: //returns: array of ids, false on failure [bool]
comment: // try load starting token
comment: // check that we did
comment: // bad form?
comment: // found it;			
comment: // try load next token
comment: // end of list, we're done
comment: //----------------------------------------------------------------------------------------------
comment: //.	bud off a range of tokens into a new branch
comment: //----------------------------------------------------------------------------------------------
comment: //arg: range - array of token ids [array]
comment: //arg: newType - type of new token being budded [string]
comment: //returns: id of new token [int]
comment: // check it's an actual range
comment: // try load first token
comment: // check that we did
comment: // try load last token
comment: // check that we did
comment: //echo "budding range: $newType &lt;br/&gt;\n";
comment: // create a new token
comment: // remove next from tree
comment: // add as child of this
comment: //----------------------------------------------------------------------------------------------
comment: //.	step backwards through a chain looking for beginning of a statement or label
comment: //----------------------------------------------------------------------------------------------
comment: //arg: startId - id of token where search begins [int]
comment: //returns: array of token ids making up the statement, false on failure [bool]
comment: //	try load the starting token
comment: //	check that we did
comment: //%	set of token ids [array:int]
comment: //--------------------------------------------------------------------------------------
comment: //	move on to next token, or done
comment: //--------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //.	break a source file into into individual language elements
comment: //----------------------------------------------------------------------------------------------
comment: //% tokens as returned by parser [array] 
comment: //------------------------------------------------------------------------------------------
comment: //	clear tokens array and create new root token
comment: //------------------------------------------------------------------------------------------
comment: //$this-&gt;tokens = array();					
comment: //$this-&gt;addToken('root', 0, '', 0);
comment: //------------------------------------------------------------------------------------------
comment: //	add all as children of root token
comment: //------------------------------------------------------------------------------------------
comment: // Note: child must exist in tokens array before it can be added to parent
comment: //----------------------------------------------------------------------------------------------
comment: //.	goes through the token stream and sets curly brace, bracket and paren levels for all tokens
comment: //----------------------------------------------------------------------------------------------
comment: //returns: true on success, false on failure [bool]
comment: //:	note that this should be run before foldWhitespace()
comment: //:	note that this also sets row and col numbers
comment: //% curly brace depth [int]
comment: //% square brace depth [int]
comment: //% parentheses depth [int]
comment: //% current row [int]
comment: //% current column [int]
comment: // try load root token
comment: // check we got it
comment: // children must exist
comment: //------------------------------------------------------------------------------------------
comment: //	step up list, keeping track of cb, sb, pb, row and col
comment: //------------------------------------------------------------------------------------------
comment: // load the first actual token
comment: // check it exists
comment: // these apply to current token
comment: // set numbers
comment: // set row
comment: // set column
comment: // these apply to next token
comment: //--------------------------------------------------------------------------------------
comment: //	move on to next token, or done
comment: //--------------------------------------------------------------------------------------
comment: // try load next one
comment: // check if we did
comment: //----------------------------------------------------------------------------------------------
comment: //.	fold whitespace onto the end of the previous token (only works on children of root)
comment: //----------------------------------------------------------------------------------------------
comment: //returns: true on success, false on failure [bool]
comment: // try load root token
comment: // check that we did
comment: // try load first child
comment: // check that we did
comment: //echo "folding whitespace, root has " . count($root['children']) . " children&lt;br/&gt;\n";
comment: //------------------------------------------------------------------------------------------
comment: //	step up list, adding any whitespace to the wsc bucket of previous token
comment: //------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------
comment: //	check that there is another token in the chain, after this one
comment: //--------------------------------------------------------------------------------------
comment: // try load next token
comment: // if we can't, we're done
comment: //------------------------------------------------------------------------------
comment: // unlink the whitespace and add to this token's [wsc] bucket
comment: //------------------------------------------------------------------------------
comment: // get ID of token after next
comment: // remove ws/comment from tree
comment: // re-insert as child of this
comment: // done with this token, load the next one
comment: //----------------------------------------------------------------------------------------------
comment: //.	fold braces and strings recursively
comment: //----------------------------------------------------------------------------------------------
comment: //arg: parentId - id of node to start from [int]
comment: //returns: true on success, false on failure
comment: //: note that token numbers must be set before this is called
comment: // try load root token
comment: // check that we did
comment: // and that it has children
comment: // try load first child
comment: // check that we did
comment: //------------------------------------------------------------------------------------------
comment: //	step up list, budding off any blocks with a matching number
comment: //------------------------------------------------------------------------------------------
comment: // these apply to current token
comment: // we don't deal with the first one
comment: //echo "jumping into PHP_CODEBLOCK&lt;br/&gt;\n"; flush();
comment: // we don't deal with the first one
comment: //echo "jumping into PHP_ARRAY_IDX&lt;br/&gt;\n"; flush();
comment: // we don't deal with the first one
comment: //echo "jumping into PHP_PARENSET&lt;br/&gt;\n"; flush();
comment: // we don't deal with the first one
comment: //echo "jumping into PHP_DQSTRING&lt;br/&gt;\n"; flush();
comment: //--------------------------------------------------------------------------------------
comment: //	move on to next token, or done
comment: //--------------------------------------------------------------------------------------
comment: // try load next token
comment: // if none then we're finished here
comment: //----------------------------------------------------------------------------------------------
comment: //.	go through tree recusively and fold statements
comment: //----------------------------------------------------------------------------------------------
comment: //arg: parentId - root of the subtree we're searching
comment: // try load root token
comment: // check that we did
comment: // and that it has children
comment: // try load last child in list
comment: // check that we did
comment: //------------------------------------------------------------------------------------------
comment: //	step up list, budding off any blocks with a matching number
comment: //------------------------------------------------------------------------------------------
comment: // recurse into all subtrees (with a few possible exceptions to be specified later
comment: //--------------------------------------------------------------------------------------
comment: //	move on to previous token, or done
comment: //--------------------------------------------------------------------------------------
comment: // try load previous token
comment: // no? then we're done
comment: //----------------------------------------------------------------------------------------------
comment: //.	examine children of root and fold functions (closures not yet handled)
comment: //----------------------------------------------------------------------------------------------
comment: //opt: parentId - root of the subtree we're searching
comment: // try load root token
comment: // check that we did
comment: // and that it has children
comment: // try load first child
comment: // check that we did
comment: // try load next four tokens, if we can't, we're done
comment: //----------------------------------------------------------------------------------				
comment: // found one, create a new token to represent it, add n[1-4] as children
comment: //----------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //.	Fold classes //TODO: THIS IS A TERRIBLE HACK, fix it to handle interitance, interfaces, etc
comment: //----------------------------------------------------------------------------------------------
comment: //opt: parentId - root of the subtree we're searching
comment: // try load root token
comment: // check that we did
comment: // and that it has children
comment: // try load first child
comment: // check that we did
comment: // try load next three tokens, if we can't, we're done
comment: //----------------------------------------------------------------------------------				
comment: // found one, create a new token to represent it, add n[1-3] as children
comment: //----------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //.	get variables below a given tag (recusive)
comment: //----------------------------------------------------------------------------------------------
comment: //arg: tokenId - starting token [int]
comment: //returns: array of variable names [array]
comment: //----------------------------------------------------------------------------------------------
comment: //.	get every instance of a given type below the token specified
comment: //----------------------------------------------------------------------------------------------
comment: //arg: type - type we're looking for [int]
comment: //arg: tokenId - starting token [int]
comment: //returns: array of token ids [array]
comment: //%	IDs of tokens [array]
comment: //	try load token
comment: //	check if we did
comment: //	check if it matches type
comment: //	check all children 
comment: //	add any matches from them
comment: //	return token IDs
comment: //----------------------------------------------------------------------------------------------
comment: //.	print tokens
comment: //----------------------------------------------------------------------------------------------
comment: //opt: tokenId - ID of token to print, default is root [int]
comment: //opt: indent - intentation, default is none [string]
comment: //returns: tokens in HTML format [string]
comment: // token must exist
comment: //foreach($lines as $line) 
comment: //	{ $txt .= $indent . $unitIndent. "[ws]: " . htmlEntities($line) . "&lt;br/&gt;\n"; }
comment: //----------------------------------------------------------------------------------------------
comment: //.	create plaintext source code from tree (recursive)
comment: //----------------------------------------------------------------------------------------------
comment: //opt: tokenId - ID of token to start from [int]
string: ''
string: ''
string: 'root'
string: ''
string: '0'
string: "constucting KSourceTree: $fileName&lt;br/&gt;\n"
string: ''
string: ''
string: "constucting KSourceTree: tokenizing&lt;br/&gt;\n"
string: ''
string: "}"
string: "{"
string: ";"
string: ":"
string: "PHP_CODEBLOCK"
string: "T_OPEN_TAG"
string: "tokenize() Time taken: "
string: "s&lt;br/&gt;\n"
string: 'type'
string: 'start'
string: 'value'
string: "tokenize() (add all tokens) Time taken: "
string: "s&lt;br/&gt;\n"
string: '{'
string: '['
string: '('
string: '|'
string: '|'
string: "\t"
string: "\n"
string: '}'
string: ']'
string: ')'
string: 'T_WHITESPACE'
string: 'T_COMMENT'
string: '{'
string: '}'
string: 'PHP_CODEBLOCK'
string: '['
string: ']'
string: 'PHP_ARRAY_IDX'
string: '('
string: ')'
string: 'PHP_PARENSET'
string: 'DQ_STRING_START'
string: 'DQ_STRING_END'
string: 'PHP_DQSTRING'
string: ':'
string: 'PHP_LABEL'
string: ';'
string: 'PHP_STATEMENT'
string: 'PHP_STATEMENT'
string: 'PHP_LABEL'
string: 'PHP_DQSTRING'
string: 'T_FUNCTION'
string: 'token'
string: 'PHP_PARENSET'
string: 'PHP_CODEBLOCK'
string: 'PHP_FUNCTION'
string: ''
string: 'T_FN_NAME'
string: 'T_CLASS'
string: 'token'
string: 'PHP_CODEBLOCK'
string: 'PHP_CLASS'
string: ''
string: 'T_CLASS_NAME'
string: 'T_VARIABLE'
string: ''
string: "&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;"
string: ''
string: '('
string: ') '
string: ": "
string: ' [prev: '
string: ' next: '
string: ' numbers: '
string: ' row: '
string: ' col: '
string: ' children: '
string: ']'
string: "&lt;br/&gt;\n"
string: ''
string: "\n"

<b>scanning file: /var/www/an2google/trunk/modules/scaffold/inc/kphptoken.class.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	php object to represent a generic token in self-folding parse tree
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	member variables
comment: //----------------------------------------------------------------------------------------------
comment: // link to source tree which contains this token [class:KSourceTree]
comment: // index of this token in $this-&gt;tokens [int]
comment: // indentifies what type of token this is [string]
comment: // char position fron start of $this-&gt;raw [int]
comment: // the actual token [string]
comment: // depth within curly braces, brackets and parentheses [string]
comment: // the length of this value [int]
comment: // index of parent token [int]
comment: // index of previous token in list, -1 if undefined [int]
comment: // index of next token in list, -1 if undefined [int]
comment: // array of pointers to child tokens [array]
comment: // array of pointers to whitespace and comment child tokens [array]
comment: // the line number this token begins on [int]
comment: // col - column number, taking tabs into account [int]	
comment: //----------------------------------------------------------------------------------------------
comment: //.	constructor
comment: //----------------------------------------------------------------------------------------------
comment: //arg: tree - source tree this token belongs to [class:KSourceTree]
comment: //arg: id - id of new token [int]
comment: //arg: type - type of new token [string]
comment: //arg: start - char position in source file [int]
comment: //arg: value - content of token [string]
comment: //opt: parentId - id of parent token, default is root (0) [int]
comment: //opt: after - id of child this will be linked after [int]
comment: // initialize children array
comment: // initialize whitespace array
comment: // set defaults
comment: // ...
comment: // set major properties
comment: // ...
comment: //echo "Constructing KPHPToken {id: $id, type: $type, start: $start} &lt;br/&gt;\n";
comment: // is the root token, we're done
comment: //--------------------------------------------------------------------------------------
comment: // no after any particular token, just at the end of the list
comment: //--------------------------------------------------------------------------------------
comment: // load parent
comment: //TODO: fix
comment: // index of last sibling
comment: // id if last sibling
comment: // token at end of sibling list
comment: // link sibling to this
comment: // and this to sibling
comment: // link parent to child
comment: //--------------------------------------------------------------------------------------
comment: // linked after a specific token (parentId is ignored)
comment: //--------------------------------------------------------------------------------------
comment: // load token before this one
comment: // TODO: error checks
comment: // get next token
comment: // link this to next
comment: // and next to this
comment: // link this to previous token
comment: // link to previous token to this one
comment: // load parent
comment: // set this token's parent
comment: // set this token's parent
comment: //----------------------------------------------------------------------------------------------
comment: //.	record that a child of this token exists
comment: //----------------------------------------------------------------------------------------------
comment: //arg: childId - id of child token [int]
comment: //opt: after - token occurs after this sibling, ignored if set to -1 [int]
comment: // child is at end of list
comment: // remake child list, inserting childId
comment: // don't add it multiple times
comment: //----------------------------------------------------------------------------------------------
comment: //.	record that a child no longer belongs to this token
comment: //----------------------------------------------------------------------------------------------
comment: //arg: childId - id of child token [int]
comment: // remove from child array
comment: // remove from wsc array
comment: //----------------------------------------------------------------------------------------------
comment: //.	add a token to this one's wsc array
comment: //----------------------------------------------------------------------------------------------
comment: //arg: tokenId - array index of a token [int]
comment: //returns: true on success, false on failure
comment: //	try load the new whitespace token
comment: //	check that we did
comment: //	link child to parent
comment: //%	get id of last wsc child [int]
comment: //	try to load it
comment: // 	if we did then link these
comment: //	two together
comment: //	link parent to child
comment: //	and we're done
comment: //----------------------------------------------------------------------------------------------
comment: //.	add a token to children array
comment: //----------------------------------------------------------------------------------------------
comment: //arg: tokenId - array index of a token [int]
comment: //returns: true on success, false on failure
comment: //	try load the new child token
comment: //	check that we did
comment: //echo "adding $tokenId as child of {$this-&gt;id}&lt;br/&gt;\n";
comment: //	link child to parent
comment: //%	id of last child [int]
comment: //	try to load it
comment: // 	if we did then link these
comment: //	two together
comment: //	link parent to child
comment: //	and we're done
comment: //----------------------------------------------------------------------------------------------
comment: //.	unlink self from parent and siblings
comment: //----------------------------------------------------------------------------------------------
comment: //returns: true on success, false on failure [bool]
comment: //echo "unlinking token: {$this-&gt;id}&lt;br/&gt;";
comment: //------------------------------------------------------------------------------------------
comment: //	break link between parent and child
comment: //------------------------------------------------------------------------------------------
comment: // try load the parent
comment: // and have it disown this
comment: // remove link to parent
comment: //------------------------------------------------------------------------------------------
comment: //	update neighbouring nodes
comment: //------------------------------------------------------------------------------------------
comment: // try load neighbours
comment: // ...
comment: // if we are in the middle
comment: // of the chain, link 
comment: // adjacent nodes to each
comment: // other
comment: // if nothing before this
comment: // if nothing after this
comment: //------------------------------------------------------------------------------------------
comment: //	break own links to siblings and we're done
comment: //------------------------------------------------------------------------------------------
string: "parentId failed: $parentId&lt;br/&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/scaffold/inc/kphpfunction.class.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	class to represent php classes in source code
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	member variables
comment: //----------------------------------------------------------------------------------------------
comment: //_	KSourceTree to which this function belongs [class:KSourceStree]
comment: //_	id of PHP_FUNCTION token in the tree [int]
comment: //_ name of this function [string]
comment: //_	id of paren set (arguments) token [int]
comment: //_	id of codeblock (function body) token [int]
comment: //_	array of all variable names used by this function [array:string]
comment: //_	array of names of globals used by this function [array:string]
comment: //_ TODO
comment: //----------------------------------------------------------------------------------------------
comment: //.	constructor
comment: //----------------------------------------------------------------------------------------------
comment: //arg: tree - a KSourceTree [class:KSourceTree]
comment: //arg: tokenId - id of a PHP_FUNCTION token in the tree [int]
comment: //------------------------------------------------------------------------------------------
comment: //	should always have this format
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	messy, temporary
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	get all variables used by this function
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	get global variables declared by this function
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	compare globals used with globals needed
comment: //------------------------------------------------------------------------------------------
string: "constructing KPHPFunction(tree, $tokenId)&lt;br/&gt;\n"
string: 'T_FUNCTION'
string: 'T_FN_NAME'
string: 'PHP_PARENSET'
string: 'PHP_CODEBLOCK'
string: '$db'
string: '$req'
string: '$session'
string: '$page'
string: '$kapenta'
string: '$theme'
string: '$aliases'
string: '$utils'
string: "function {$this-&gt;name} uses $varName&lt;br/&gt;\n"
string: 'PHP_STATEMENT'
string: 'T_GLOBAL'
string: 'T_VARIABLE'
string: "function {$this-&gt;name} declares global {$sChildT-&gt;value}&lt;br/&gt;\n"
string: "function {$this-&gt;name} uses global $global but does not declare it.&lt;br/&gt;\n"
string: '{'
string: "\n\tglobal "
string: ";\n"
string: 'X_GLOBAL'

<b>scanning file: /var/www/an2google/trunk/modules/scaffold/inc/install.inc.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	installation script for pages module
comment: //--------------------------------------------------------------------------------------------------
comment: //if ('admin' != $user-&gt;role) { return false; }
string: 'modules/scaffold/models/moduledefinition.mod.php'
string: 'modules/scaffold/models/modeldefinition.mod.php'
string: 'modules/scaffold/models/memberdefinition.mod.php'
string: ''

<b>scanning file: /var/www/an2google/trunk/modules/scaffold/inc/codegen_modulexml.inc.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	code template to create an install script given a module definition
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: moduleUID - UID of a module definition [string]
comment: //a lot of TODOs here
string: 'modules/scaffold/models/moduledefinition.mod.php'
string: 'modules/scaffold/models/modeldefinition.mod.php'
string: 'modules/scaffold/models/memberdefinition.mod.php'
string: 'modules/scaffold/inc/cgutils.inc.php'
string: "&lt;? /*
&lt;module&gt;
    &lt;modulename&gt;"
string: 'namelc'
string: "&lt;/modulename&gt;
    &lt;version&gt;"
string: 'version'
string: "&lt;/version&gt;
    &lt;revision&gt;"
string: 'revision'
string: "&lt;/revision&gt;
    &lt;description&gt;"
string: 'description'
string: "&lt;/description&gt;
    &lt;core&gt;no&lt;/core&gt;
    &lt;dependancy&gt;
    &lt;/dependancy&gt;
    &lt;permissions&gt;
    &lt;/permissions&gt;
    &lt;blocks&gt;
    &lt;/blocks&gt;
&lt;/module&gt;
*/ ?&gt;"

<b>scanning file: /var/www/an2google/trunk/modules/scaffold/inc/codegen_model.inc.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	code template to create a model (php class) from a model definition
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: modelUID - UID of a model definition [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	make list of includes
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: load models for any relationships this model definition may have
comment: //----------------------------------------------------------------------------------------------
comment: //	add description block
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make member definitions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make PHP4-style constructor
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make load method
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make loadArray method
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make save method
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make verify method
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make getDbSchema method
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make toArray method
comment: //----------------------------------------------------------------------------------------------
comment: // rm last ,
comment: //----------------------------------------------------------------------------------------------
comment: //	make extArray method
comment: //----------------------------------------------------------------------------------------------
comment: // make view URL
comment: //----------------------------------------------------------------------------------------------
comment: //	make delete method
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	put it all together and return
comment: //----------------------------------------------------------------------------------------------
string: 'modules/scaffold/models/moduledefinition.mod.php'
string: 'modules/scaffold/models/modeldefinition.mod.php'
string: 'modules/scaffold/models/memberdefinition.mod.php'
string: 'modules/scaffold/inc/cgutils.inc.php'
string: 'moduleUID'
string: "&lt;?\n"
string: "%%includes%%\n"
string: "%%descriptionBlock%%\n"
string: "class "
string: 'classname'
string: " {\n\n"
string: "%%memberdefinitions%%\n"
string: "%%constructor%%\n"
string: "%%load%%\n"
string: "%%loadArray%%\n"
string: "%%save%%\n"
string: "%%verify%%\n"
string: "%%getDbSchema%%\n"
string: "%%toArray%%\n"
string: "%%extArray%%\n"
string: "%%delete%%\n"
string: ""
string: "}\n\n"
string: "?&gt;"
string: 'includes'
string: ''
string: 'descriptionBlock'
string: ''
string: "*\t"
string: 'memberdefinitions'
string: ''
string: 'member variables'
string: "\n"
string: "\tvar \$data;\t\t\t//_\tcurrently loaded database record [array]\n"
string: "\tvar \$dbSchema;\t\t\t//_\tdatabase table definition [array]\n"
string: "\tvar \$loaded;\t\t\t//_\tset to true when an object has been loaded [bool]\n\n"
string: 'memberdefinitions'
string: "\tvar \$"
string: 'name'
string: ";"
string: "\t\t\t//_ "
string: 'type'
string: " [string]\n"
string: "\$UID"
string: "//opt: UID - UID of a "
string: " object"
string: 'yes'
string: 'hasra'
string: "\$raUID"
string: "//opt: raUID - UID or alias of a "
string: " object"
string: 'constructor'
string: ''
string: '. constructor'
string: "\t"
string: " [string]\n\n"
string: "\tfunction "
string: 'classname'
string: "("
string: " = '') {\n"
string: "\t\t\$this-&gt;dbSchema = \$this-&gt;getDbSchema();\t\t// initialise table schema\n"
string: "\t\tif ('' != "
string: ") { \$this-&gt;load("
string: "); }\t"
string: "// try load an object from the database\n"
string: "\t\tif (false == \$this-&gt;loaded) {\t\t\t"
string: "// check if we did\n"
string: "\t\t\t\$this-&gt;data = \$db-&gt;makeBlank(\$this-&gt;dbSchema);\t"
string: "// make new object\n"
string: "\t\t\t\$this-&gt;loadArray(\$this-&gt;data);\t\t\t"
string: "// initialize\n"
string: "\t\t}\n"
string: "\t}"
string: "\n"
string: "\$UID"
string: '. load an object from the db given its UID'
string: "//arg: UID - UID of a "
string: 'name'
string: " object"
string: '$db-&gt;load'
string: 'yes'
string: 'hasra'
string: "\$raUID"
string: '. load an object from the database given its UID or an alias'
string: "//arg: raUID - UID or alias of a "
string: 'name'
string: " object"
string: '$db-&gt;loadAlias'
string: 'load'
string: ''
string: "\t"
string: " [string]\n"
string: "\t//returns: true on success, false on failure [bool]\n\n"
string: "\tfunction load("
string: " = '') {\n"
string: "\t\tglobal \$db;\n"
string: "\t\t\$objary = "
string: "('"
string: 'tableName'
string: "', $loadVar);\n"
string: "\t\tif (\$objary != false) { \$this-&gt;loadArray(\$objary); return true; }\n"
string: "\t\treturn false;\n"
string: "\t}\n"
string: "\n"
string: ". load "
string: 'name'
string: " object serialized as an associative array"
string: 'loadArray'
string: ''
string: "\t//arg: ary - associative array of members and values [array]\n\n"
string: "\tfunction loadArray(\$ary) {\n"
string: "\t\tif (false == is_array(\$ary)) { return false; }\n"
string: "\t\t\$serialize = \$ary;\n"
string: 'loadArray'
string: "\t\t\$this-&gt;"
string: 'name'
string: " = \$ary['"
string: 'name'
string: "'];\n"
string: 'loadArray'
string: ''
string: "\t\t\$this-&gt;loaded = true;\n"
string: "\t}\n"
string: ""
string: ''
string: 'hasra'
string: 'yes'
string: "\t\t\$this-&gt;alias = \$aliases-&gt;create('"
string: 'moduleNameLc'
string: "', '"
string: 'tableName'
string: "', \$this-&gt;UID, \$this-&gt;"
string: 'titleField'
string: ");\n"
string: 'save'
string: ''
string: '. save the current object to database'
string: "\t//returns: null string on success, html report of errors on failure [string]\n"
string: "\t//: \$db-&gt;save(...) will raise an object_updated event if successful\n\n"
string: "\tfunction save() {\n"
string: "\t\tglobal \$db, \$aliases;\n"
string: "\t\t\$report = \$this-&gt;verify();\n"
string: "\t\tif ('' != \$report) { return \$report; }\n"
string: "\t\t\$check = \$db-&gt;save(\$this-&gt;toArray(), \$this-&gt;dbSchema);\n"
string: "\t\tif (false == \$check) { return \"Database error.&lt;br/&gt;~n\"; }\n"
string: "\t}\n"
string: ""
string: '. check that object is correct before allowing it to be stored in database'
string: 'verify'
string: ''
string: "\t//returns: null string if object passes, warning message if not [string]\n\n"
string: "\tfunction verify() {\n"
string: "\t\t\$report = '';\n"
string: "\t\tif ('' == \$this-&gt;UID) { \$report .= \"No UID.&lt;br/&gt;~n\"; }\n"
string: "\t\treturn \$report;\n"
string: "\t}\n"
string: ""
string: ''
string: ''
string: ''
string: "'"
string: 'name'
string: "' =&gt; '"
string: 'dbtype'
string: "'"
string: "\t\t\t"
string: ",\n\t\t\t"
string: " );\n"
string: 'yes'
string: 'hasidx'
string: 'dbtype'
string: "'"
string: 'name'
string: "' =&gt; '"
string: "'"
string: "\t\t\t"
string: ",\n\t\t\t"
string: " );\n"
string: 'yes'
string: 'diff'
string: "'"
string: 'name'
string: "'"
string: "\t\t\t"
string: ",\n\t\t\t"
string: " );\n"
string: 'getDbSchema'
string: ''
string: '. database table definition and content versioning'
string: "\t//returns: information for constructing SQL queries [array]\n\n"
string: "\tfunction getDbSchema() {\n"
string: "\t\t\$dbSchema = array();\n"
string: "\t\t\$dbSchema['module'] = '"
string: 'moduleNameLc'
string: "';\n"
string: "\t\t\$dbSchema['model'] = '"
string: 'tableName'
string: "';\n"
string: "\n"
string: "\t\t//table columns\n"
string: "\t\t\$dbSchema['fields'] = array(\n"
string: "\n"
string: "\t\t//these fields will be indexed\n"
string: "\t\t\$dbSchema['indices'] = array(\n"
string: "\n"
string: "\t\t//revision history will be kept for these fields\n"
string: "\t\t\$dbSchema['diff'] = array(\n"
string: "\n"
string: "\t\treturn \$dbSchema;\n"
string: "\t\t\n"
string: "\t}\n"
string: ''
string: 'toArray'
string: ''
string: '. serialize this object to an array'
string: "\t//returns: associative array of all members which define this instance [array]\n\n"
string: "\tfunction toArray() {\n"
string: "\t\t\$serialize = array(\n"
string: 'toArray'
string: "\t\t\t'"
string: 'name'
string: "' =&gt; "
string: "\$this-&gt;"
string: 'name'
string: ",\n"
string: 'toArray'
string: ''
string: "\t\t);\n"
string: "\t\treturn \$serialize;\n"
string: "\t}\n"
string: ''
string: 'toArray'
string: ",\n\t\t);"
string: "\n\t\t);"
string: 'toArray'
string: 'extArray'
string: ''
string: '. make an extended array of data views may need'
string: "\t//returns: associative array of members, metadata and partial views [array]\n\n"
string: "\tfunction extArray() {\n"
string: "\t\t\$ext = \$this-&gt;toArray();\n"
string: "\n"
string: "\t\t\$ext['viewUrl'] = '';\t\$ext['viewLink'] = '';\n"
string: "\t\t\$ext['editUrl'] = '';\t\$ext['editLink'] = '';\n"
string: "\t\t\$ext['delUrl'] = '';\t\$ext['delLink'] = '';\n"
string: "\t\t\$ext['newUrl'] = '';\t\$ext['newLink'] = '';\n"
string: "\n"
string: "\tlinks"
string: "\t\tif (true == authHas('"
string: 'viewPerm'
string: "', \$ext['UID'])) {\n"
string: "\t\t\t\$ext['viewUrl'] = "
string: 'viewUrl'
string: ";\n"
string: "\t\t\t\$ext['viewLink'] = \"&lt;a href='\" . \$ext['viewUrl'] . \"'&gt;[ more &amp;gt;gt; ]&lt;/a&gt;\";\n"
string: "\t\t}\n\n"
string: "\t\tif (true == authHas('"
string: 'editPerm'
string: "', \$ext['UID'])) {\n"
string: "\t\t\t\$ext['editUrl'] = "
string: 'meditUrl'
string: ";\n"
string: "\t\t\t\$ext['editLink'] = \"&lt;a href='\" . \$ext['editUrl'] . \"'&gt;[ edit ]&lt;/a&gt;\";\n"
string: "\t\t}\n\n"
string: "\t\tif (true == authHas('"
string: 'delPerm'
string: "', \$ext['UID'])) {\n"
string: "\t\t\t\$ext['delUrl'] = "
string: 'mdelUrl'
string: ";\n"
string: "\t\t\t\$ext['delLink'] = \"&lt;a href='\" . \$ext['delUrl'] . \"'&gt;[ delete ]&lt;/a&gt;\";\n"
string: "\t\t}\n\n"
string: "\t\treturn \$ext;\n"
string: "\t}\n"
string: ''
string: 'delete'
string: ''
string: '. delete current object from the database'
string: "\t//: \$db-&gt;delete(...) will raise an object_deleted event on success [bool]\n"
string: "\t//returns: true on success, false on failure [bool]\n\n"
string: "\tfunction delete() {\n"
string: "\t\tglobal \$db;\n"
string: "\t\tif (false == \$this-&gt;loaded) { return false; }\t\t// nothing to do\n"
string: "\t\tif (false == \$db-&gt;delete('"
string: 'moduleNameLc'
string: "',"
string: " '"
string: 'tableName'
string: "', \$this-&gt;UID)) { return false; }\n"
string: "\t\treturn true;\n"
string: "\t}\n"
string: ''

<b>scanning file: /var/www/an2google/trunk/modules/scaffold/inc/codegen_install.inc.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	code template to create an install script given a module definition
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: moduleUID - UID of a module definition [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	make list of includes
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	add description block
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make install function
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make install status function
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	put it all together and return
comment: //----------------------------------------------------------------------------------------------
string: 'modules/scaffold/models/moduledefinition.mod.php'
string: 'modules/scaffold/models/modeldefinition.mod.php'
string: 'modules/scaffold/models/memberdefinition.mod.php'
string: 'modules/scaffold/inc/cgutils.inc.php'
string: "&lt;?\n\n"
string: "%%includes%%\n"
string: "%%descriptionBlock%%\n"
string: "%%module_install%%\n"
string: "%%module_status%%\n"
string: "?&gt;"
string: 'includes'
string: "\trequire_once(\$installPath . 'core/mysqladmin.inc.php');\n"
string: 'includes'
string: "\trequire_once("
string: 'modfile'
string: ");\n"
string: 'descriptionBlock'
string: ''
string: "*\tinstall script for "
string: 'name'
string: " module"
string: "//+	reports are human-readable HTML, with script-readable HTML comments\n"
string: 'module_install'
string: ''
string: "|\tinstall the "
string: 'name'
string: ' module'
string: "//returns: html report or false if not authorized [string][bool]\n\n"
string: "function "
string: 'namelc'
string: "_install_module() {\n"
string: "\tglobal \$user;\n"
string: "\tif ('admin' != \$user-&gt;role) { return false; }\n\n"
string: 'module_install'
string: ''
string: "\tcreate or upgrade "
string: 'tableName'
string: ' table'
string: "\t\$model = new "
string: 'name'
string: "();\n"
string: "\t\$dbSchema = \$model-&gt;getDbSchema();\n"
string: "\t\$report .= \$dbInstallTable(\$dbSchema);\n"
string: "\n"
string: 'module_install'
string: ''
string: "\tdone"
string: "\treturn \$report;\n"
string: "}\n"
string: 'module_status'
string: ''
string: "|\tdiscover if this module is installed"
string: "//:\tif installed correctly report will contain HTML comment "
string: "&lt;!-- installed correctly --&gt;\n"
string: "//returns: HTML installation status report [string]\n\n"
string: "function "
string: 'namelc'
string: "_install_status_report() {\n"
string: "\tglobal \$user;\n"
string: "\tif ('admin' != \$user-&gt;role) { return false; }\n\n"
string: "\t\$report = '';\n"
string: "\t\$installNotice = '&lt;!-- table installed correctly --&gt;';\n"
string: "\t\$installed = true;\n\n"
string: "\tensure the table which stores "
string: 'name'
string: ' objects exists and is correct'
string: 'module_status'
string: ''
string: "\t\$model = new "
string: 'name'
string: "();\n"
string: "\t\$dbSchema = \$model-&gt;getDbSchema();\n"
string: "\t\$treport .= dbGetTableInstallStatus(\$dbSchema);\n\n"
string: "\tif (false == strpos(\$treport, \$installNotice)) { \$installed = false; }\n"
string: "\t\$report .= \$treport;\n"
string: "\n"
string: 'module_status'
string: ''
string: "\tdone"
string: "\tif (true == \$installed) { \$report .= '&lt;!-- module installed correctly --&gt;'; }\n"
string: "\treturn \$report;\n"
string: "}\n"

<b>scanning file: /var/www/an2google/trunk/modules/scaffold/inc/codegen_actnew.inc.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	code template to create a an action (php script) for creating a new object of a specifed type
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: modelUID - UID of a model definition [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	make list of includes
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: load models for any relationships this model definition may have
comment: //----------------------------------------------------------------------------------------------
comment: //	add description block
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	add auth block
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: check dependancies (eg, parent, etc)
comment: //----------------------------------------------------------------------------------------------
comment: //	add create block
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	put it all together and return
comment: //----------------------------------------------------------------------------------------------
string: 'modules/scaffold/models/moduledefinition.mod.php'
string: 'modules/scaffold/models/modeldefinition.mod.php'
string: 'modules/scaffold/models/memberdefinition.mod.php'
string: 'modules/scaffold/inc/cgutils.inc.php'
string: 'moduleUID'
string: "&lt;?\n"
string: "%%includes%%\n"
string: "%%descriptionBlock%%\n"
string: "%%authBlock%%\n"
string: "%%createBlock%%\n"
string: "\n"
string: "?&gt;"
string: 'includes'
string: ''
string: "\trequire_once("
string: 'modfile'
string: ");\n"
string: ""
string: 'descriptionBlock'
string: ''
string: "*\tcreate a new "
string: 'name'
string: " object"
string: 'authBlock'
string: ''
string: "*\tcheck permissions and any POST variables"
string: "\tif (false == authHas('"
string: 'name'
string: "', '"
string: 'namelc'
string: "', 'new'))\n"
string: "\t\t{ $page-&gt;do403('You are not authorized to create new "
string: 'name'
string: "s.'); }\n"
string: "\n"
string: 'yes'
string: 'export'
string: 'authBlock'
string: ''
string: "\tif (false == array_key_exists('module', \$_POST))\n"
string: "\t\t{ \$page-&gt;do404('reference module not specified', true); }\n"
string: "\tif (false == array_key_exists('model', \$_POST))\n"
string: "\t\t{ \$page-&gt;do404('reference model not specified', true); }\n"
string: "\tif (false == array_key_exists('UID', \$_POST))\n"
string: "\t\t{ \$page-&gt;do404('reference object UID not specified', true); }\n"
string: "\tif (false == moduleExists(\$_POST['module']))\n"
string: "\t\t{ \$page-&gt;do404('specified module does not exist', true); }\n"
string: "\tif (false == \$db-&gt;objectExists(\$_POST['model'], \$_POST['UID']))\n"
string: "\t\t{ \$page-&gt;do404('specified owner does not exist in database', true); }\n"
string: "\n"
string: 'createBlock'
string: ''
string: "*\tcreate the object"
string: "\t\$model = new "
string: 'name'
string: "();\n"
string: ""
string: 'yes'
string: 'editable'
string: 'no'
string: 'optional'
string: 'name'
string: 'UID'
string: 'editedOn'
string: 'editedBy'
string: 'createdOn'
string: 'createdBy'
string: 'createBlock'
string: ''
string: "\tif (true == array_key_exists('"
string: 'name'
string: "', \$_POST)) { "
string: "\$model-&gt;"
string: 'name'
string: " = \$_POST['"
string: 'name'
string: "']; }\n"
string: 'createBlock'
string: ''
string: "\t\$report = \$model-&gt;save();\n\n"
string: "*\tcheck that object was created and redirect"
string: "\tif ('' == \$report) {\n"
string: "\t\t\$session-&gt;msg('New "
string: 'name'
string: "&lt;br/&gt;');\n"
string: "\t\t\$page-&gt;do302('/"
string: 'name'
string: "/"
string: 'actionEdit'
string: "/' . \$model-&gt;"
string: 'idField'
string: ");\n"
string: "\t} else {\n"
string: "\t\t\$session-&gt;msg('Could not create new "
string: 'name'
string: ":&lt;br/&gt;' . \$report);\n"
string: "\t}\n"
string: "\n"

<b>scanning file: /var/www/an2google/trunk/modules/scaffold/inc/codefile.class.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	Parser for  PHP source files
comment: //--------------------------------------------------------------------------------------------------
comment: //+	Note that special 'root' token always has ID 0, and that pointers set to -1 mean 'undefined'
comment: //+
comment: //+	Structure of tokens:
comment: //+		
comment: //+		id - index of this token in $this-&gt;tokens [int]
comment: //+		type - indentifies what type of token this is [string]
comment: //+		start - char position fron start of $this-&gt;raw [int]
comment: //+		value - the actual token [string]
comment: //+		length - the length of this value [int]
comment: //+		parent - index of parent token [int]
comment: //+		prev - index of previous token in list, -1 if undefined [int]
comment: //+		next - index of next token in list, -1 if undefined [int]
comment: //+		children - array of pointers to child tokens [array]
comment: //+		wsc - array of pointers to whitespace and comment child tokens [array]
comment: //+		row - the line number this token begins on [int]
comment: //+		col - column number, taking tabs into account [int]
comment: //+
comment: //+	Structure of functions:
comment: //+
comment: //+		id - index of this function [int]
comment: //+		name - function name [string]
comment: //+		args - array of argument structs [array]
comment: //+		parenset - id of parenset token [id]
comment: //+		calls - array of pointers to functions this one calls [id]
comment: //+		globals - array of globals this function uses [id]
comment: //+
comment: //+	TODO: look into ditching the length, row and col parts, no real need to store them
comment: //----------------------------------------------------------------------------------------------
comment: //	member variables
comment: //----------------------------------------------------------------------------------------------
comment: //	location of raw file
comment: //	raw PHP source file
comment: //	doubly linked tree of tokens (folded dl list) [array]
comment: //	set to tru when a source file has been successfully parsed [bool]
comment: //	map of line numbers in raw [array]
comment: //	array of function structs [array]
comment: //	number of spaces per tab [int]
comment: //	set of rules by which to associate tokens with one another [array]
comment: //----------------------------------------------------------------------------------------------
comment: //.	constructor
comment: //----------------------------------------------------------------------------------------------
comment: //arg: fileName - name of PHP source file (relative to installPath) [string]
comment: // could not load
comment: // loaded, parse it
comment: //$this-&gt;foldTokens();
comment: //----------------------------------------------------------------------------------------------
comment: //.	folding rules
comment: //----------------------------------------------------------------------------------------------
comment: // ++ is right associative
comment: // -- is right associative
comment: // superclass of EXPR_INC
comment: // superclass of EXPR_DEC
comment: // equality
comment: // superclass of EXPR_EQUALITY
comment: //----------------------------------------------------------------------------------------------
comment: //.	make initial tokens
comment: //----------------------------------------------------------------------------------------------
comment: //% tokens as returned by parser [array] 
comment: //------------------------------------------------------------------------------------------
comment: //	clear tokens array and create new root token
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	add all as children of root token
comment: //------------------------------------------------------------------------------------------
comment: // Note: child must exist in tokens array before it can be added to parent
comment: //----------------------------------------------------------------------------------------------
comment: //.	check if a token with a given id exists (this is mostly a shortcut for the hands and eyes)
comment: //----------------------------------------------------------------------------------------------
comment: //arg: tokenId - array index of a token [int]
comment: //returns: true if it exists, false if not [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //.	add a token to the array (at minimum it must have type and start)
comment: //----------------------------------------------------------------------------------------------
comment: //arg: token - a token, in array form [array]
comment: //returns: id of new token [int]
comment: // set default members
comment: //if (false == array_key_exists('row', $token)) { $token['row'] = -1; }
comment: //	{ $token['row'] = $this-&gt;lookupRow($token['start']); }
comment: //if (false == array_key_exists('col', $token)) { $token['col'] = -1; }
comment: //	{ $token['col'] = $this-&gt;lookupCol($token['start']); }
comment: // add it to the array
comment: //----------------------------------------------------------------------------------------------
comment: //.	get a token as a structured array
comment: //----------------------------------------------------------------------------------------------
comment: //arg: tokenId - array index of a token [int]
comment: //returns: associative array, or false if no such token [array][bool]
comment: //----------------------------------------------------------------------------------------------
comment: //.	set a token (token must already exist)
comment: //----------------------------------------------------------------------------------------------
comment: //arg: tokenArray - token [array]
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //.	record that one token is no longer the child of another
comment: //----------------------------------------------------------------------------------------------
comment: //arg: parentId - ID of the parent token [int]
comment: //arg: childId - ID of the child token [int]
comment: //opt: bucket - which bucket the child is in [int]
comment: //returns: true on success, false on failure [bool]
comment: //if ('wsc' == $bucket) { return false; }
comment: // parent exists?
comment: //echo "removing token $childId from parent $parentId ($bucket)&lt;br/&gt;\n";
comment: // yes? get the parent
comment: //----------------------------------------------------------------------------------------------
comment: //.	unlink a node/subtree, remove from parent, stitch DLL back together
comment: //----------------------------------------------------------------------------------------------
comment: //arg: tokenId - ID of the token to unlink [int]
comment: //returns: true on success, false on failure [bool]
comment: // token exists?
comment: // yes? then load it
comment: //------------------------------------------------------------------------------------------
comment: //	break link between parent and child
comment: //------------------------------------------------------------------------------------------
comment: // could be in either
comment: // bucket
comment: // remove link to parent
comment: //------------------------------------------------------------------------------------------
comment: //	link prev to next if they both exist, or set prev['next'] to -1
comment: //------------------------------------------------------------------------------------------
comment: // set prev's next
comment: // nothing after this
comment: // save it
comment: //------------------------------------------------------------------------------------------
comment: //	link next to prev if they both exist, or set next['prev'] to -1
comment: //------------------------------------------------------------------------------------------
comment: // set next's prev
comment: // nothing after this
comment: // save it
comment: //------------------------------------------------------------------------------------------
comment: //	done
comment: //------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //.	unlink a node from wherever it is and add it as a child of another (own children preserved)
comment: //----------------------------------------------------------------------------------------------
comment: //arg: newParentId - array index of parent token [int]
comment: //arg: newChildId - array index of child token [int]
comment: //echo "adding $newChildId as child of $newParentId&lt;br/&gt;";
comment: // newParent exists?
comment: // newChild exists?
comment: // pull child out of the tree
comment: // load newParent
comment: // load newChild
comment: /*
		//------------------------------------------------------------------------------------------
		//	flatten whitespace
		//------------------------------------------------------------------------------------------
		if ('wsc' == $bucket) { 
			$newParent['wsc'] .= $newChild['value'];
			$this-&gt;setToken($newParent);
			$this-&gt;tokens[$newChildId] = -1;
			return true;
		}
		*/
comment: //------------------------------------------------------------------------------------------
comment: //	link child to it's new siblings
comment: //------------------------------------------------------------------------------------------
comment: // srsly
comment: //------------------------------------------------------------------------------------------
comment: //	link parent and child
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	done, save them both
comment: //------------------------------------------------------------------------------------------
comment: //$this-&gt;tokensToString($newChild['id']);
comment: //----------------------------------------------------------------------------------------------
comment: //.	link a token after another one, they will share a parent, bucket must be 'children'
comment: //----------------------------------------------------------------------------------------------
comment: //arg: findId - id of token after which another will be linked [int]
comment: //arg: addId - id of token to be linked into the list [int]
comment: //returns: true on success, false on failure [bool]
comment: // they must both exist
comment: // unlink add from wherever it is
comment: // they exist, load them both 
comment: //echo "linkAfter():: find (" . $find['id'] . ") and add (" . $add['id'] . ") both exist and are loaded&lt;br/&gt;\n";
comment: // parent of 'find' must exist
comment: // set add's parent to be the same as find's parent
comment: // set link to parent
comment: // rebuild parent's 'children' array so that add occurs directly after find
comment: // link next token to add, if there is one
comment: // load the next token
comment: // link it to add
comment: // and link add to next
comment: // save 'next'
comment: // link find to add (next of)
comment: // link add to find (previous of)
comment: // save them all
comment: // ...
comment: // ...
comment: //----------------------------------------------------------------------------------------------
comment: //.	goes through the token stream and sets curly brace, bracet and paren levels for all tokens
comment: //----------------------------------------------------------------------------------------------
comment: //returns: true on success, false on failure [bool]
comment: //:	note that this should be run before foldWhitespace()
comment: //:	note that this also sets row and col numbers
comment: //% curly brace depth [int]
comment: //% square brace depth [int]
comment: //% parentheses depth [int]
comment: // check root exists
comment: // load root token
comment: //------------------------------------------------------------------------------------------
comment: //	step up list, keeping track of cb, sb, pb, row and col
comment: //------------------------------------------------------------------------------------------
comment: // these apply to current token
comment: //$token['row'] = $row;
comment: //$token['col'] = $col;
comment: // these apply to next token
comment: //--------------------------------------------------------------------------------------
comment: //	move on to next token, or done
comment: //--------------------------------------------------------------------------------------
comment: // load next one
comment: //----------------------------------------------------------------------------------------------
comment: //.	step through a chain looking for a particular token (type and numbers)
comment: //----------------------------------------------------------------------------------------------
comment: //returns: array of ids, false on failure [bool]
comment: // found it;			
comment: //--------------------------------------------------------------------------------------
comment: //	move on to next token, or done
comment: //--------------------------------------------------------------------------------------
comment: // load next one			
comment: //----------------------------------------------------------------------------------------------
comment: //.	step backwards through a chain looking for beginning of a statement or label
comment: //----------------------------------------------------------------------------------------------
comment: //returns: array of ids, false on failure [bool]
comment: //--------------------------------------------------------------------------------------
comment: //	move on to next token, or done
comment: //--------------------------------------------------------------------------------------
comment: // load previous one			
comment: //----------------------------------------------------------------------------------------------
comment: //.	bud off a range of tokens into a new branch
comment: //----------------------------------------------------------------------------------------------
comment: //returns: id of new token [int]
comment: //echo "budding range: $newType &lt;br/&gt;\n";
comment: // make a new token
comment: // link it in
comment: // remove next from tree
comment: // add as child of this
comment: //----------------------------------------------------------------------------------------------
comment: //.	find a sequential set of tokens (non-recursive)
comment: //----------------------------------------------------------------------------------------------
comment: //arg: parentId - id of parent record [int]
comment: //arg: sequence a list of token types separated by commas [string]
comment: //returns: id of last token in sequence if found, false on failure [int][bool]
comment: // parent must exist
comment: // load parent
comment: // parent must have children
comment: // load first child
comment: // start with empty stack
comment: // length of sequence
comment: // discard extra stuff
comment: // compare
comment: // load next one			
comment: //----------------------------------------------------------------------------------------------
comment: //.	fold whitespace onto the end of the previous token (only works on children of root)
comment: //----------------------------------------------------------------------------------------------
comment: //returns: true on success, false on failure [bool]
comment: // check root exists
comment: // load root token
comment: //echo "folding whitespace, root has " . count($root['children']) . " children&lt;br/&gt;\n";
comment: //------------------------------------------------------------------------------------------
comment: //	step up list, adding any whitespace to the wsc bucket of previous token
comment: //------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------
comment: //	check that there is another token in the chain, after this one
comment: //--------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------
comment: // unlink the whitespace and add to this token's [wsc] bucket
comment: //------------------------------------------------------------------------------
comment: // remove next from tree
comment: // add as child of this
comment: // it's changed, reload
comment: // done with this token, load the next one
comment: //----------------------------------------------------------------------------------------------
comment: //.	fold braces and strings recursively
comment: //----------------------------------------------------------------------------------------------
comment: //arg: parentId - id of node to start from [int]
comment: //returns: true on success, false on failure
comment: // check root exists
comment: // load root token
comment: //------------------------------------------------------------------------------------------
comment: //	step up list, budding off any blocks with a matching number
comment: //------------------------------------------------------------------------------------------
comment: // these apply to current token
comment: // we don't deal with the first one
comment: //echo "jumping into PHP_CODEBLOCK&lt;br/&gt;\n"; flush();
comment: // we don't deal with the first one
comment: //echo "jumping into PHP_ARRAY_IDX&lt;br/&gt;\n"; flush();
comment: // we don't deal with the first one
comment: //echo "jumping into PHP_PARENSET&lt;br/&gt;\n"; flush();
comment: // we don't deal with the first one
comment: //echo "jumping into PHP_DQSTRING&lt;br/&gt;\n"; flush();
comment: //--------------------------------------------------------------------------------------
comment: //	move on to next token, or done
comment: //--------------------------------------------------------------------------------------
comment: // load next one
comment: //----------------------------------------------------------------------------------------------
comment: //.	go through tree recusively and fold statements
comment: //----------------------------------------------------------------------------------------------
comment: //arg: parentId - root of the subtree we're searching
comment: // check root exists
comment: // load root token
comment: //------------------------------------------------------------------------------------------
comment: //	step up list, budding off any blocks with a matching number
comment: //------------------------------------------------------------------------------------------
comment: // recurse into all subtrees (with a few possible exceptions to be specified later
comment: //--------------------------------------------------------------------------------------
comment: //	move on to previous token, or done
comment: //--------------------------------------------------------------------------------------
comment: // load previous one
comment: //----------------------------------------------------------------------------------------------
comment: //.	split off functions (does not look for closures yet, only applies to children of root)
comment: //----------------------------------------------------------------------------------------------
comment: //returns: true on success, false on failure
comment: // root token must exist
comment: // get location of next function
comment: //----------------------------------------------------------------------------------------------
comment: //.	apply all folding rules, in order
comment: //----------------------------------------------------------------------------------------------
comment: //returns: true on success, false on failure
comment: // root token must exist
comment: //--------------------------------------------------------------------------------------
comment: //	(re)load root and first tokens
comment: //--------------------------------------------------------------------------------------
comment: // this generally shouldn't happen, check anyway
comment: //--------------------------------------------------------------------------------------
comment: //	expand the rule
comment: //--------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------
comment: //	process bi-associative rules
comment: //--------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------
comment: //	we've found an instance where this rule applies
comment: //----------------------------------------------------------------------
comment: // load previous token
comment: // load next token
comment: // make a new token
comment: // link it in
comment: // unlink token and prev and next, add them as children of newToken
comment: // will need to skip this one
comment: // move on to next token
comment: //--------------------------------------------------------------------------------------
comment: //	process left associative rules
comment: //--------------------------------------------------------------------------------------
comment: //TODO:
comment: //--------------------------------------------------------------------------------------
comment: //	process right associative rules
comment: //--------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------
comment: //	we've found an instance where this rule applies
comment: //----------------------------------------------------------------------
comment: // load previous token
comment: // make a new token
comment: // link it in
comment: // unlink token and prev, add them as children of newToken
comment: // move on to next token
comment: //--------------------------------------------------------------------------------------
comment: //	process superclass rules
comment: //--------------------------------------------------------------------------------------
comment: // store pointer to next token
comment: //--------------------------------------------------------------------------
comment: //	we've found an instance where this rule applies
comment: //--------------------------------------------------------------------------
comment: // create new token
comment: // link it in
comment: // add token as child of new
comment: // move on to next token
comment: //----------------------------------------------------------------------------------------------
comment: //.	get the type of the previous token in a list, given a token ID
comment: //----------------------------------------------------------------------------------------------
comment: //arg: tokenId - array index of a token [int]
comment: //returns: type of token, or false on failure [string][bool]
comment: // check it exists
comment: // load it
comment: // check not end of list
comment: // check prev exists
comment: // load it
comment: // done
comment: //----------------------------------------------------------------------------------------------
comment: //.	get the type of the next token in a list, given a token ID
comment: //----------------------------------------------------------------------------------------------
comment: //arg: tokenId - array index of a token [int]
comment: //returns: type of token, or false on failure [string][bool]
comment: // check it exists
comment: // load it
comment: // check not end of list
comment: // check next exists
comment: // load it
comment: // done
comment: //----------------------------------------------------------------------------------------------
comment: //.	make a map of line numbers
comment: //----------------------------------------------------------------------------------------------
comment: //	clear line map if it exists
comment: //%	array of strings [array]
comment: //%	number of bytes before this one [int]
comment: // plus one for the newline
comment: // cumulative
comment: //----------------------------------------------------------------------------------------------
comment: //.	look up line number for a given character position
comment: //----------------------------------------------------------------------------------------------
comment: //arg: charNo - character position to look up [int]
comment: //returns: row/line number (&gt;= 1) which includes this char, or false on failure [int][bool]
comment: // init if necessary
comment: //TODO: make a log(n) search, start in middle and halve upwards/downwards
comment: //----------------------------------------------------------------------------------------------
comment: //.	look up column number for a given character position
comment: //----------------------------------------------------------------------------------------------
comment: //arg: charNo - character position to look up [int]
comment: //returns: column number [int]
comment: //% index of row this is in
comment: //% first character of this line
comment: //----------------------------------------------------------------------------------------------
comment: //.	print tokens
comment: //----------------------------------------------------------------------------------------------
comment: //opt: tokenId - ID of token to print, default is root [int]
comment: //opt: indent - intentation, default is none [string]
comment: //returns: tokens in .txt format [string]
comment: //			. '(row: ' . $token['row'] . ' col: ' . $token['col'] . ' ' . $token['numbers'] . ')'
comment: //		if ($token['wsc'] != '') {
comment: //			$lines = explode("\n", $token['wsc']);
comment: //			foreach($lines as $line) {
comment: //				$txt .= $indent . "&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[ws]: "
comment: //					. htmlEntities($line) . "&lt;br/&gt;\n";
comment: //			}
comment: //		}
string: 'modules/scaffold/inc/tokenizer.class.php'
string: ''
string: ''
string: ''
string: "makeLineMap() Time taken: "
string: "s&lt;br/&gt;\n"
string: "setNumbers() Time taken: "
string: "s&lt;br/&gt;\n"
string: "foldWhiteSpace() Time taken: "
string: "s&lt;br/&gt;\n"
string: "foldBracesAndStrings() Time taken: "
string: "s&lt;br/&gt;\n"
string: "foldStatements() Time taken: "
string: "s&lt;br/&gt;\n"
string: "Overall Time taken: "
string: "s&lt;br/&gt;\n"
string: 'EXPR_INC|T_VARIABLE|T_INC|'
string: 'EXPR_DEC|T_VARIABLE|T_DEC|'
string: 'EXPR||EXPR_INC|'
string: 'EXPR||EXPR_DEC|'
string: 'EXPR_EQUALITY|T_VARIABLE|T_IS_EQUAL|T_VARIABLE'
string: 'EXPR||EXPR_EQUALITY|'
string: "tokenize() Time taken: "
string: "s&lt;br/&gt;\n"
string: 'type'
string: 'root'
string: 'start'
string: 'value'
string: ''
string: 'length'
string: 'parent'
string: 'row'
string: 'col'
string: 'type'
string: 'type'
string: 'start'
string: 'start'
string: 'value'
string: 'value'
string: "tokenize() (add all tokens) Time taken: "
string: "s&lt;br/&gt;\n"
string: 'id'
string: 'children'
string: 'children'
string: 'wsc'
string: 'wsc'
string: 'parent'
string: 'parent'
string: 'prev'
string: 'prev'
string: 'next'
string: 'next'
string: 'numbers'
string: 'numbers'
string: '0|0|0'
string: 'length'
string: 'length'
string: 'value'
string: 'id'
string: 'id'
string: 'children'
string: 'parent'
string: 'children'
string: 'parent'
string: 'wsc'
string: 'parent'
string: 'prev'
string: 'prev'
string: 'prev'
string: 'next'
string: 'next'
string: 'next'
string: 'next'
string: 'next'
string: 'next'
string: 'next'
string: 'next'
string: 'prev'
string: 'prev'
string: 'prev'
string: 'prev'
string: 'prev'
string: 'prev'
string: 'next'
string: 'children'
string: 'next'
string: 'id'
string: 'prev'
string: 'id'
string: 'parent'
string: 'id'
string: 'id'
string: 'parent'
string: 'parent'
string: 'parent'
string: 'id'
string: 'children'
string: 'children'
string: 'next'
string: 'next'
string: 'next'
string: 'prev'
string: 'id'
string: 'next'
string: 'id'
string: 'next'
string: 'next'
string: 'id'
string: 'prev'
string: 'id'
string: 'children'
string: 'children'
string: 'children'
string: 'type'
string: '{'
string: '['
string: '('
string: 'numbers'
string: '|'
string: '|'
string: "\t"
string: 'value'
string: "\n"
string: 'value'
string: 'type'
string: '}'
string: ']'
string: ')'
string: 'next'
string: 'next'
string: 'next'
string: 'id'
string: 'type'
string: 'numbers'
string: 'next'
string: 'next'
string: 'next'
string: 'type'
string: "}"
string: "{"
string: ";"
string: ":"
string: "PHP_CODEBLOCK"
string: "T_OPEN_TAG"
string: 'id'
string: 'prev'
string: 'prev'
string: 'prev'
string: 'type'
string: 'start'
string: 'start'
string: 'id'
string: 'children'
string: 'children'
string: 'children'
string: ''
string: 'value'
string: ","
string: 'id'
string: 'next'
string: 'next'
string: 'next'
string: 'children'
string: 'children'
string: 'children'
string: 'next'
string: 'next'
string: 'id'
string: 'T_WHITESPACE'
string: 'T_COMMENT'
string: 'next'
string: 'id'
string: 'next'
string: 'wsc'
string: 'id'
string: 'next'
string: 'children'
string: 'children'
string: 'children'
string: 'type'
string: '{'
string: 'prev'
string: 'id'
string: '}'
string: 'numbers'
string: 'PHP_CODEBLOCK'
string: '['
string: 'prev'
string: 'id'
string: ']'
string: 'numbers'
string: 'PHP_ARRAY_IDX'
string: '('
string: 'prev'
string: 'id'
string: ')'
string: 'numbers'
string: 'PHP_PARENSET'
string: 'DQ_STRING_START'
string: 'prev'
string: 'id'
string: 'DQ_STRING_END'
string: 'numbers'
string: 'PHP_DQSTRING'
string: 'next'
string: 'next'
string: 'next'
string: 'children'
string: 'children'
string: 'children'
string: ':'
string: 'type'
string: 'id'
string: 'PHP_LABEL'
string: ';'
string: 'type'
string: 'id'
string: 'PHP_STATEMENT'
string: 'children'
string: 'PHP_STATEMENT'
string: 'type'
string: 'PHP_LABEL'
string: 'type'
string: 'PHP_DQSTRING'
string: 'type'
string: 'id'
string: 'prev'
string: 'prev'
string: 'prev'
string: 'T_FUNCTION,token,PHP_PARENSET,PHP_CODEBLOCK'
string: 'children'
string: 'children'
string: 'children'
string: '|'
string: "processing rule $rule newType: $newType leftType: $leftType matchType: $matchType rightType: $rightType&lt;br/&gt;"
string: ''
string: ''
string: 'next'
string: 'id'
string: 'id'
string: 'type'
string: 'prev'
string: 'next'
string: 'type'
string: 'start'
string: 'start'
string: 'id'
string: 'id'
string: 'id'
string: 'id'
string: 'next'
string: ''
string: ''
string: 'next'
string: 'id'
string: 'type'
string: 'prev'
string: 'type'
string: 'start'
string: 'start'
string: 'id'
string: 'id'
string: 'id'
string: ''
string: ''
string: 'next'
string: 'type'
string: 'type'
string: 'start'
string: 'start'
string: 'id'
string: 'id'
string: 'next'
string: 'next'
string: 'prev'
string: 'prev'
string: 'prev'
string: 'type'
string: 'next'
string: 'next'
string: 'next'
string: 'type'
string: "\n"
string: "\t"
string: ''
string: ''
string: '('
string: 'id'
string: ') '
string: 'type'
string: ": "
string: 'value'
string: ' [prev: '
string: 'prev'
string: ' next: '
string: 'next'
string: ']'
string: '(numbers: '
string: 'numbers'
string: ')'
string: "&lt;br/&gt;\n"
string: 'children'
string: "&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;"
string: 'wsc'
string: ''
string: 'wsc'
string: 'value'
string: "\n"
string: "&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[ws]: "
string: "&lt;br/&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/scaffold/inc/cgutils.inc.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //	utlity functions for code generator
comment: //-------------------------------------------------------------------------------------------------
comment: //-------------------------------------------------------------------------------------------------
comment: //	add comment block (assumed 100 chars wide, 4 spaces to a tab)
comment: //-------------------------------------------------------------------------------------------------
comment: //arg: indent - number of tab stops [integer]
comment: //arg: message - what the comment block will say [string]
comment: //-------------------------------------------------------------------------------------------------
comment: //	wrap and pad a section of text
comment: //-------------------------------------------------------------------------------------------------
comment: //arg: indent - number of tab stops [integer]
comment: //arg: message - what the comment block will say [string]
comment: //-------------------------------------------------------------------------------------------------
comment: //	remove markup and special characters escaped with tildes
comment: //-------------------------------------------------------------------------------------------------
comment: //arg: indent - number of tab stops [integer]
comment: //arg: message - what the comment block will say [string]
string: "\t"
string: '//'
string: "-"
string: "\n"
string: "\t"
string: '//'
string: "\n"
string: "\t"
string: '//'
string: "-"
string: "\n"
string: "\t"
string: '//'
string: "-"
string: "\n"
string: "\t"
string: '//'
string: "\n"
string: "\t"
string: '//'
string: "-"
string: "\n"
string: "%~%"
string: "%%"
string: "~n"
string: "\\n"

<b>scanning file: /var/www/an2google/trunk/modules/scaffold/actions/upgradek2.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	find outdated constructions in kapenta php files
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	define changes to be made
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	get all files
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	find constructions needing replaments
comment: //----------------------------------------------------------------------------------------------	
string: "
'Abuse_Report'|'abuse_report'
'Aliases_Alias'|'aliases_alias'
'Announcements_Announcement'|'announcements_announcement'
'Badges_Badge'|'badges_badge'
'Badges_Userindex'|'badges_userindex'
'Calendar_Entry'|'calendar_entry'
'Chat_Discussion'|'chat_discussion'
'Comments_Comment'|'comments_comment'
'Contact_Detail'|'contact_detail'
'Files_File'|'files_file'
'Files_Folder'|'files_folder'
'Forums_Board'|'forums_board'
'Forums_Reply'|'forums_reply'
'Forums_Thread'|'forums_thread'
'Gallery_Gallery'|'gallery_gallery'
'Groups_Group'|'groups_group'
'Groups_Membership'|'groups_membership'
'Home_Static'|'home_static'
'Images_Image'|'images_image'
'Live_Chat'|'live_chat'
'Live_Mailbox'|'live_mailbox'
'Live_Trigger'|'live_trigger'
'Messages_Message'|'messages_message'
'Moblog_Post'|'moblog_post'
'Notifications_Notification'|'notifications_notification'
'Notifications_Userindex'|'notifications_userindex'
'Projects_Membership'|'projects_membership'
'Projects_Project'|'projects_project'
'Projects_Revision'|'projects_revision'
'Revisions_Deleted'|'revisions_deleted'
'Revisions_Deleteditem'|'revisions_deleteditem'
'Revisions_Migrate'|'revisions_migrate'
'Revisions_Revision'|'revisions_revision'
'Schools_School'|'schools_school'
'Sync_Download'|'sync_download'
'Sync_Message'|'sync_message'
'Sync_Notice'|'sync_notice'
'Sync_Server'|'sync_server'
'Sync_Server'|'sync_server_bak'
'Tags_Index'|'tags_index'
'Tags_Tag'|'tags_tag'
'Users_Friendship'|'users_friendship'
'Users_Login'|'users_login'
'Users_Notification'|'users_notification'
'Users_Role'|'users_role'
'Users_Session'|'users_session'
'Users_User'|'users_user'
'Videos_Gallery'|'videos_gallery'
'Videos_Video'|'videos_video'
'Wiki_Article'|'wiki_article'
'Wiki_Category'|'wiki_category'
'Wiki_Mwimport'|'wiki_mwimport'
'Wiki_Revision'|'wiki_revision'
"
string: "

\$db-&gt;listTables()|\$db-&gt;loadTables()

Forums_Forum|Forums_Board
\$dbSchema['table']|\$dbSchema['model']

from projects|from Projects_Project
from projectrevisions|from Projects_Revision
from projectmembers|from Projects_Membership
update images set|update Images_Image set

from images|from Images_Image
from comments|from Comments_Comment
from announcements|from Announcements_Announcement
update images set|update Images_Image set

sync.mod.php|notice.mod.php
syncDbSave(|\$sync-&gt;dbSave(
syncBase64DecodeSql(|\$sync-&gt;base64DecodeSql(
syncRecordDeleted(|\$sync-&gt;recordDeleted(
syncBroadcastNotification(|\$sync-&gt;broadcastNotification(
syncCurlGet(|\$sync-&gt;curlGet(

-&gt;data['groupUID']|-&gt;groupUID
-&gt;data['position']|-&gt;position
-&gt;data['admin']|-&gt;admin
-&gt;data['joined']|-&gt;joined
-&gt;data['fromUID']|-&gt;fromUID
-&gt;data['cc']|-&gt;cc
-&gt;data['category']|-&gt;category
-&gt;data['month']|-&gt;month
-&gt;data['year']|-&gt;year
-&gt;data['day']|-&gt;day

-&gt;data['notifications']|-&gt;notifications
-&gt;data['comment']|-&gt;comment
-&gt;data['imagecount']|-&gt;imagecount
-&gt;data['data']|-&gt;data
-&gt;data['channelID']|-&gt;channelID
-&gt;data['channels']|-&gt;channels
-&gt;data['clients']|-&gt;clients
-&gt;data['user']|-&gt;user
-&gt;data['notices']|-&gt;notices
-&gt;data['profile']|-&gt;profile
-&gt;data['permissions']|-&gt;permissions
-&gt;data['lastOnline']|-&gt;lastOnline
-&gt;data['queue']|-&gt;queue
-&gt;data['peer']|-&gt;peer

-&gt;data['parent']|-&gt;parent
-&gt;data['children']|-&gt;children
-&gt;data['files']|-&gt;files
-&gt;data['format']|-&gt;format
-&gt;data['fromUID']|-&gt;fromUID
-&gt;data['cc']|-&gt;cc
-&gt;data['category']|-&gt;category
-&gt;data['month']|-&gt;month
-&gt;data['year']|-&gt;year
-&gt;data['day']|-&gt;day

-&gt;data['notifications']|-&gt;notifications
-&gt;data['comment']|-&gt;comment
-&gt;data['imagtecount']|-&gt;imagecount

-&gt;data['reason']|-&gt;reason
-&gt;data['lastseen']|-&gt;lastseen
-&gt;data['logintime']|-&gt;logintime
-&gt;data['userUID']|-&gt;userUID
-&gt;data['friendUID']|-&gt;friendUID
-&gt;data['relationship']|-&gt;relationship
-&gt;data['role']|-&gt;role
-&gt;data['username']|-&gt;username
-&gt;data['forum']|-&gt;forum
-&gt;data['updated']|-&gt;updated
-&gt;data['thread']|-&gt;thread

-&gt;data['direction']|-&gt;direction
-&gt;data['active']|-&gt;active
-&gt;data['refTable']|-&gt;refTable
-&gt;data['timestamp']|-&gt;timestamp
-&gt;data['inbox']|-&gt;inbox
-&gt;data['filename']|-&gt;filename
-&gt;data['type']|-&gt;type
-&gt;data['hash']|-&gt;hash
-&gt;data['talk']|-&gt;talk
-&gt;data['folder']|-&gt;folder
-&gt;data['owner']|-&gt;owner

new file(|new Files_File(
new File(|new Files_File(

new Announcement(|new Announcements_Announcement(

syncAuthenticate(|\$sync-&gt;authenticate(
new Message(|new Messages_Message(

dbListTables(|\$db-&gt;listTables(
new Gallery(|new Gallery_Gallery(
logSync(|\$kapenta-&gt;logSync(
\$kapenta-&gt;\$kapenta-&gt;logSync(|\$kapenta-&gt;logSync(

new Sync(|new Sync_Notice(
doXmlError(|\$page-&gt;doXmlError(
\$page-&gt;\$page-&gt;doXmlError(|\$page-&gt;doXmlError(

new gallery(|new Gallery_Gallery(
syncRequestFile(|\$sync-&gt;requestFile(
new Server(|new Sync_Server(
new sync(|new Sync_Notice(

new Friendship(|new Users_Friendship(

\$theme-&gt;\$theme-&gt;|\$theme-&gt;
%%recordAlias%%|%%alias%%

replaceLabels(|\$theme-&gt;replaceLabels(
\$theme-&gt;\$theme-&gt;replaceLabels(|\$theme-&gt;replaceLabels(

loadBlock(|\$theme-&gt;loadBlock(
\$theme-&gt;\$theme-&gt;loadBlock(|\$theme-&gt;loadBlock(

\$request['ref']|\$req-&gt;ref
projectrevision.mod.php|revision.mod.php
mysql_datetime(|\$db-&gt;datetime(
new Gallery(|new Gallery_Gallery(
new Group(|new Groups_Group(
groupmembers|Groups_Membership

hitcount|viewcount
mk_mysql_dateTime(|\$db-&gt;datetime(

new Image(|new Images_Image(
'recordAlias'|'alias'

new School(|new Schools_School(
new school(|new Schools_School(

dbQuery(|\$db-&gt;query(
dbLoad(|\$db-&gt;load(
dbLoadRa(|\$db-&gt;loadAlias(
dbSave(|\$db-&gt;save(
dbUpdateQuiet(|\$db-&gt;updateQuiet(
dbFetchAssoc(|\$db-&gt;fetchAssoc(
dbNumRows(|\$db-&gt;numRows(
dbDelete(|\$db-&gt;delete(
dbQueryToArray(|\$db-&gt;queryToArray(
dbRecordExists(|\$db-&gt;objectExists(
dbTableExists(|\$db-&gt;tableExists(
dbLoadRange(|\$db-&gt;loadRange(
dbCountRange(|\$db-&gt;countRange(
dbBlank(|\$db-&gt;makeBlank(
dbMarkup(|\$db-&gt;addMarkup(
dbRmMarkup(|\$db-&gt;removeMarkup(
dbRMArray(|\$db-&gt;rmArray(
sqlRMArray(|\$db-&gt;rmArray(
sqlMarkup(|\$db-&gt;addMarkup(

ofGroup|role
/modules/sync/models/sync.mod.php|/modules/sync/models/notice.mod.php
new Sync(|new Sync_Notice(
new Download(|new Sync_Download(
-&gt;initDbSchema(|-&gt;getDbSchema(

new ForumThread(|new Forums_Thread(
new ForumReply(|new Forums_Reply(
forumreply.mod.php|reply.mod.php
forumthread.mod.php|thread.mod.php

-&gt;data['moderators']|-&gt;moderators
-&gt;data['members']|-&gt;members
-&gt;data['forum']|-&gt;forum
-&gt;data['thread']|-&gt;thread
-&gt;data['sticky']|-&gt;sticky
-&gt;data['lang']|-&gt;lang

-&gt;data['recordAlias']|-&gt;alias
-&gt;data['UID']|-&gt;UID
-&gt;data['title']|-&gt;title
-&gt;data['content']|-&gt;content
-&gt;data['name']|-&gt;name
-&gt;data['createdOn']|-&gt;createdOn
-&gt;data['editedOn']|-&gt;editedOn
-&gt;data['createdBy']|-&gt;createdBy
-&gt;data['editedBy']|-&gt;editedBy
-&gt;data['description']|-&gt;description

\$request['ref'] == ''|'' == \$req-&gt;ref
\$request['ref'] != ''|'' != \$req-&gt;ref
'' == \$request['ref']|'' == \$req-&gt;ref
'' != \$request['ref']|'' != \$req-&gt;ref

users.mod.php|user.mod.php
new User(|new Users_User(
new Users(|new Users_User(
\$user-&gt;data['ofGroup'] == 'admin'|'admin' == \$user-&gt;role
'admin' == \$user-&gt;data['ofGroup']|'admin' == \$user-&gt;role
\$user-&gt;data['ofGroup'] != 'admin'|'admin' != \$user-&gt;role
'admin' != \$user-&gt;data['ofGroup']|'admin' != \$user-&gt;role

\$page-&gt;load(\$installPath . |\$page-&gt;load(


require_once(\$installPath|require_once(\$kapenta-&gt;installPath
\$request['ref']|\$req-&gt;ref
\$request['args']|\$req-&gt;args

\$_SESSION['sUID']|\$session-&gt;UID

new User(|new Users_User(
new Users(|new Users_User(
\$user-&gt;data['ofGroup']|\$user-&gt;role
\$user-&gt;data['UID']|\$user-&gt;UID
\$user-&gt;data['username']|\$user-&gt;username

dbQuery(|\$db-&gt;query(
dbLoad(|\$db-&gt;load(
dbLoadRa(|\$db-&gt;loadAlias(
dbSave(|\$db-&gt;save(
dbUpdateQuiet(|\$db-&gt;updateQuiet(
dbFetchAssoc(|\$db-&gt;fetchAssoc(
dbNumRows(|\$db-&gt;numRows(
dbDelete(|\$db-&gt;delete(
dbQueryToArray(|\$db-&gt;queryToArray(
dbRecordExists(|\$db-&gt;objectExists(
dbTableExists(|\$db-&gt;tableExists(
dbLoadRange(|\$db-&gt;loadRange(
dbCountRange(|\$db-&gt;countRange(
dbBlank(|\$db-&gt;makeBlank(
dbMarkup(|\$db-&gt;addMarkup(
dbRmMarkup(|\$db-&gt;removeMarkup(
dbRMArray(|\$db-&gt;rmArray(
sqlRMArray(|\$db-&gt;rmArray(
sqlMarkup(|\$db-&gt;addMarkup(

\$page-&gt;load(\$installPath . |\$page-&gt;load(

new ModuleDefinition(|new Scaffold_ModuleDefinition(
new ModelDefinition(|new Scaffold_ModelDefinition(
new MemberDefinition(|new Scaffold_MemberDefinition(
('moduledefinitions'|('Scaffold_ModuleDefinition'
('modeldefinitions'|('Scaffold_ModelDefinition'
('memberdefinitions'|('Scaffold_MemberDefinition'

createUID()|\$kapenta-&gt;createUID()
\$kapenta-&gt;\$kapenta-&gt;createUID()|\$kapenta-&gt;createUID()

do302(|\$page-&gt;do302(
\$page-&gt;\$page-&gt;do302(|\$page-&gt;do302(

do404(|\$page-&gt;do404(
\$page-&gt;\$page-&gt;do404(|\$page-&gt;do404(

do403(|\$page-&gt;do403(
\$page-&gt;\$page-&gt;do403(|\$page-&gt;do403(
"
string: "\n"
string: '|'
string: '|'
string: 'find'
string: 'replace'
string: "mysql.inc.php|mysql.inc.php"
string: '|'
string: "find $installPath -name \"*.php\""
string: "\n"
string: '.xml.php'
string: '.log.php'
string: '.page.php'
string: '.block.php'
string: '.template.php'
string: "&lt;h2&gt;"
string: "&lt;/h2&gt;\n"
string: 'mysql.inc.php'
string: '.class.php'
string: '/core/'
string: 'upgradek2.act.php'
string: 'user.mod.php'
string: 'find'
string: "contains: {$fx['find']} replace with: {$fx['replace']}&lt;br/&gt;\n"
string: 'find'
string: 'replace'
string: 'w+'

<b>scanning file: /var/www/an2google/trunk/modules/scaffold/actions/testparser.act.php</b>
comment: //$startTime = time();
comment: //$cf = new KPhpSourceFile('core/dbdriver/mysql.dbd.php');
comment: //$cf = new KPhpSourceFile('core/auth.inc.php');
comment: //$endTime = time();
comment: //echo "time: " . ($endTime - $startTime) . "s&lt;br/&gt;\n";
comment: //echo "&lt;small&gt;&lt;small&gt;" . $cf-&gt;tokensToHtml() . "&lt;/small&gt;&lt;/small&gt;";
comment: //echo "&lt;textarea rows='10' cols='80'&gt;" . $cf-&gt;tree-&gt;toString() . "&lt;/textarea&gt;";
string: 'modules/scaffold/inc/sourcefile.class.php'
string: "find $installPath -name \"*.php\""
string: "\n"
string: '.new'
string: '.xml.php'
string: '.page.php'
string: 'nstall.php'
string: '.log.php'
string: '.block.php'
string: '.template.php'
string: 'ata/'
string: 'ore/'
string: ''
string: "&lt;h2&gt;Correcting globals in: $fileName&lt;/h2&gt;\n"
string: '.new'
string: "&lt;h2&gt;creating new file: $newFileName&lt;/h2&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/scaffold/actions/testcg.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	test of code generator
comment: //--------------------------------------------------------------------------------------------------
comment: //$xml = scaffold_codegen_modulexml_php($UID);
comment: //echo "&lt;b&gt;module xml: $installPath . 'modules/" . $cExt['namelc'] . "/module.xml'&lt;/b&gt;&lt;br/&gt;";
comment: //echo "&lt;textarea rows='10' cols='170'&gt;$xml&lt;/textarea&gt;&lt;br/&gt;";
comment: //$code = scaffold_codegen_install_php($UID);
comment: //echo "&lt;b&gt;install script: " . $cExt['installScript'] . "&lt;/b&gt;&lt;br/&gt;";
comment: //echo "&lt;textarea rows='30' cols='170'&gt;" . scaffold_removeTildeEscapes($code) . "&lt;/textarea&gt;&lt;br/&gt;";
string: 'modules/scaffold/models/moduledefinition.mod.php'
string: 'modules/scaffold/models/modeldefinition.mod.php'
string: 'modules/scaffold/inc/codegen_modulexml.inc.php'
string: 'modules/scaffold/inc/codegen_model.inc.php'
string: 'modules/scaffold/inc/codegen_install.inc.php'
string: 'modules/scaffold/inc/codegen_actnew.inc.php'
string: '161721306186216151'
string: ''
string: 'UID'
string: "&lt;b&gt;model: "
string: 'modfile'
string: "&lt;/b&gt;&lt;br/&gt;"
string: "&lt;textarea rows='30' cols='170'&gt;"
string: "&lt;/textarea&gt;&lt;br/&gt;"
string: 'UID'
string: "&lt;b&gt;action: /modules/.../new"
string: 'name'
string: ".act.php&lt;/b&gt;&lt;br/&gt;"
string: "&lt;textarea rows='30' cols='170'&gt;"
string: "&lt;/textarea&gt;&lt;br/&gt;"

<b>scanning file: /var/www/an2google/trunk/modules/scaffold/actions/test.act.php</b>
comment: //include 'modeldefinition.class.php';
comment: //--------------------------------------------------------------------------------------------------
comment: //	test memberdefinitionset
comment: //--------------------------------------------------------------------------------------------------
comment: /*

	$memDefSet = new MemberDefinitionSet();
	$newMember = new Scaffold_MemberDefinition();
	$newMember-&gt;type = 'uid';
	$newMember-&gt;name = 'uid';
	$memDefSet-&gt;add($newMember);

	$newMember = new Scaffold_MemberDefinition();
	$newMember-&gt;type = 'title';
	$newMember-&gt;name = 'title';
	$memDefSet-&gt;add($newMember);

	$newMember = new Scaffold_MemberDefinition();
	$newMember-&gt;type = 'text';
	$newMember-&gt;name = 'description';
	$memDefSet-&gt;add($newMember);
	
	echo "&lt;textarea rows='10' cols='100'&gt;";
	echo $memDefSet-&gt;toXml();
	echo "&lt;/textarea&gt;\n";


//--------------------------------------------------------------------------------------------------
//	test model
//--------------------------------------------------------------------------------------------------

	$model = new Scaffold_ModelDefinition();
	$model-&gt;name();

*/

<b>scanning file: /var/www/an2google/trunk/modules/scaffold/actions/searchcode.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	search entire codebase
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	auth
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	print search form
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	do the search (if any)
comment: //----------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	get all files
comment: //------------------------------------------------------------------------------------------
comment: /*
			if (strpos($line, 'mysql.inc.php') != false) { $ok = false; }
			if (strpos($line, '.class.php') != false) { $ok = false; }
			if (strpos($line, '/core/') != false) { $ok = false; }
			if (strpos($line, 'upgradek2.act.php') != false) { $ok = false; }
			if (strpos($line, 'user.mod.php') != false) { $ok = false; }
			*/
comment: //------------------------------------------------------------------------------------------
comment: //	find constructions needing replacements
comment: //------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	depth first search
comment: //---------------------------------------------------------------------------------------------
comment: // directory could not be read
comment: // pop '.' off the end of the array
comment: // pop '..' off the end of the array
comment: //echo "Recurse $subDir\r\n";
string: 'admin'
string: ''
string: ''
string: 'search'
string: 'search'
string: 'exclude'
string: 'exclude'
string: "
    &lt;form name='searchCode' method='POST' action='/scaffold/searchcode/'&gt;
	&lt;b&gt;Search: &lt;input type='text' name='search' size='20' value='$searchq' /&gt;&lt;/b&gt;
	&lt;b&gt;Exclude: &lt;input type='text' name='exclude' size='20' value='$excludeq' /&gt;&lt;/b&gt;
	&lt;input type='submit' value='search' /&gt;
	&lt;/form&gt;
	&lt;hr/&gt;
	"
string: ''
string: '.xml.php'
string: '.log.php'
string: '.page.php'
string: '.block.php'
string: '.template.php'
string: 'ore/removed/'
string: ''
string: "&lt;h2&gt;"
string: "&lt;/h2&gt;\n"
string: "\n"
string: " "
string: ''
string: "line $lineNo: "
string: " ($searchq)&lt;br/&gt;\n"
string: "line $lineNo: "
string: " ($searchq)&lt;br/&gt;\n"
string: ".svn"
string: '/'
string: 'php.'

<b>scanning file: /var/www/an2google/trunk/modules/scaffold/actions/savemoduledefinition.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	save changes to a module definition
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check auth of non-public model
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make changes to module data
comment: //----------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	make changes to module data
comment: //---------------------------------------------------------------------------------------------
string: 'modules/scaffold/models/moduledefinition.mod.php'
string: 'UID'
string: 'Scaffold_ModuleDefinition'
string: 'UID'
string: 'action'
string: 'action'
string: 'saveModuleDefinition'
string: 'UID'
string: 'name'
string: 'version'
string: 'version'
string: 'revision'
string: 'revision'
string: 'description'
string: ''
string: "updated module definition...&lt;br/&gt;"
string: 'scaffold/editmoduledefinition/'

<b>scanning file: /var/www/an2google/trunk/modules/scaffold/actions/savemodeldefinition.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	save changes to a model definition
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check auth and load the model
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: permissions check
comment: //----------------------------------------------------------------------------------------------
comment: //	make changes to module data
comment: //----------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	make changes to module data
comment: //---------------------------------------------------------------------------------------------
string: 'modules/scaffold/models/modeldefinition.mod.php'
string: 'UID'
string: 'Scaffold_ModelDefinition'
string: 'UID'
string: 'action'
string: 'action'
string: 'saveModelDefinition'
string: 'UID'
string: 'name'
string: 'description'
string: 'notes'
string: 'hasra'
string: 'hasra'
string: 'export'
string: 'export'
string: ''
string: "updated model definition...&lt;br/&gt;"
string: 'scaffold/editmoduledefinition/'
string: 'moduleUID'

<b>scanning file: /var/www/an2google/trunk/modules/scaffold/actions/savemember.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	save a member of a model definition
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check POST vars
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: permissions check here
comment: //----------------------------------------------------------------------------------------------
comment: //	load the member definition
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	send event
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: signal module to update display of parent object
comment: //----------------------------------------------------------------------------------------------
comment: //	redirect back to list of members in frame
comment: //----------------------------------------------------------------------------------------------
string: 'modules/scaffold/models/modeldefinition.mod.php'
string: 'action'
string: 'action  not specified'
string: 'saveMember'
string: 'action'
string: 'action not supported'
string: 'model'
string: 'no model definition specified'
string: 'Scaffold_Modeldefinition'
string: 'model'
string: 'model definition not found'
string: 'UID'
string: 'member definition not specified'
string: 'Scaffold_MemberDefinition'
string: 'UID'
string: 'member definition not found'
string: 'UID'
string: "member '"
string: 'name'
string: "' does not exist"
string: 'name'
string: 'type'
string: 'hasidx'
string: 'editable'
string: 'optional'
string: 'list'
string: 'summary'
string: 'showfull'
string: 'orderby'
string: 'scaffold/editmembersif/'
string: 'model'

<b>scanning file: /var/www/an2google/trunk/modules/scaffold/actions/save.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	save changes to a module
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check auth of non-public model
comment: //----------------------------------------------------------------------------------------------
comment: // TODO
comment: //----------------------------------------------------------------------------------------------
comment: //	make changes to module data
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	add a model
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	remove a model
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	add an attribute
comment: //----------------------------------------------------------------------------------------------
comment: // TODO
string: 'modules/scaffold/moduledefinition.class.php'
string: 'UID'
string: 'Scaffold_ModuleDefinition'
string: 'UID'
string: 'action'
string: 'scaffold/'
string: 'UID'
string: ''
string: 'expires'
string: 'updateModuleDetails'
string: 'action'
string: 'name'
string: 'version'
string: 'revision'
string: 'description'
string: ''
string: "updated module definition...&lt;br/&gt;"
string: 'addModel'
string: 'action'
string: ''
string: 'modelname'
string: "added model '"
string: "'...&lt;br/&gt;"
string: "&lt;br/&gt;\n"
string: 'deleteModel'
string: 'action'
string: 'modelname'
string: "Removed model: $modelName&lt;br/&gt;\n"
string: 'addAttribute'
string: 'action'

<b>scanning file: /var/www/an2google/trunk/modules/scaffold/actions/public.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	form to allow public user to quickly put together a module scaffold and download it
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: // logged in users have a different form
comment: //----------------------------------------------------------------------------------------------
comment: //if ($user-&gt;role != 'public') { $page-&gt;do302('scaffold/'); }
comment: //----------------------------------------------------------------------------------------------
comment: // ensure we have something to work with (scaffold UID is stored in session)
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	show the page
comment: //----------------------------------------------------------------------------------------------
string: 'modules/scaffold/moduledefinition.class.php'
string: 'scaffoldUid'
string: 'Scaffold_ModuleDefinition'
string: 'scaffoldUid'
string: 'scaffoldUid'
string: 'expires'
string: 'scaffoldUid'
string: 'modules/scaffold/actions/public.page.php'

<b>scanning file: /var/www/an2google/trunk/modules/scaffold/actions/parsertest.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	test of php tokenizer and parser
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	auth
comment: //----------------------------------------------------------------------------------------------
comment: // none
comment: //----------------------------------------------------------------------------------------------
comment: //	load core mysql file
comment: //----------------------------------------------------------------------------------------------
string: 'modules/scaffold/inc/parser.inc.php'
string: 'core/mysql.inc.php'
string: 'token'
string: "&lt;"
string: "&amp;lt;"
string: 'token'
string: 'token'
string: "&gt;"
string: "&amp;gt;"
string: 'token'
string: 'type'
string: ' - '
string: 'token'
string: "&lt;br/&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/scaffold/actions/newmodule.act.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //	create a new module definition
comment: //-------------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	authentication
comment: //---------------------------------------------------------------------------------------------
comment: // none, anyone can use this
comment: //---------------------------------------------------------------------------------------------
comment: //	checks
comment: //---------------------------------------------------------------------------------------------
comment: //-----------------------------------------------------------------------------------------
comment: //	ensure that module name is acceptable
comment: //-----------------------------------------------------------------------------------------
comment: //-------------------------------------------------------------------------------------
comment: //	make the module definition
comment: //-------------------------------------------------------------------------------------			
comment: //-------------------------------------------------------------------------------------
comment: //	redirect to edit form
comment: //-------------------------------------------------------------------------------------			
comment: //-------------------------------------------------------------------------------------
comment: //	could not create the module definition, redirect back to scaffoild module
comment: //-------------------------------------------------------------------------------------			
comment: //-----------------------------------------------------------------------------------------
comment: //	something went wring, redirect back to scaffold module
comment: //-----------------------------------------------------------------------------------------
string: 'modules/scaffold/models/moduledefinition.mod.php'
string: "adding new module&lt;br/&gt;\n"
string: 'action'
string: 'newModuleDefinition'
string: 'action'
string: 'moduleName'
string: "passed initial tests&lt;br/&gt;"
string: 'moduleName'
string: '-'
string: ''
string: '_'
string: ''
string: ''
string: "here&lt;br/&gt;"
string: 'session'
string: 'scaffold/editmoduledefinition/'
string: "Could not create module scaffold ($moduleName).&lt;br/&gt;"
string: 'scaffold/'
string: "Error: Missing form value.&lt;br/&gt;\n"
string: 'scaffold/'

<b>scanning file: /var/www/an2google/trunk/modules/scaffold/actions/newmodeldefinition.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	create a new module definition
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	authentication
comment: //----------------------------------------------------------------------------------------------
comment: // none, anyone can use this
comment: //----------------------------------------------------------------------------------------------
comment: //	checks
comment: //----------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	ensure that module name is acceptable
comment: //------------------------------------------------------------------------------------------
comment: //-----------------------------------------------------------------------------------------
comment: //	check that the module exists and the current user has permissions on it
comment: //-----------------------------------------------------------------------------------------
comment: //TODO: permissions check
comment: //-----------------------------------------------------------------------------------------
comment: //	...
comment: //-----------------------------------------------------------------------------------------
comment: //-------------------------------------------------------------------------------------
comment: //	make the module definition
comment: //-------------------------------------------------------------------------------------			
comment: //-------------------------------------------------------------------------------------
comment: //	redirect to *module* edit form, ie, parent obejct
comment: //-------------------------------------------------------------------------------------			
comment: //-------------------------------------------------------------------------------------
comment: //	could not create the module definition, redirect back to scaffoild module
comment: //-------------------------------------------------------------------------------------			
comment: //-----------------------------------------------------------------------------------------
comment: //	something went wring, redirect back to scaffold module
comment: //-----------------------------------------------------------------------------------------
string: 'modules/scaffold/models/modeldefinition.mod.php'
string: 'action'
string: 'addModel'
string: 'action'
string: 'modelName'
string: 'moduleUID'
string: 'modelName'
string: '-'
string: ''
string: '_'
string: ''
string: ''
string: 'moduleUID'
string: 'Scaffold_ModuleDefinition'
string: "creating new model definition: $modelName (module: $moduleUID)&lt;br/&gt;\n"
string: 'moduleUID'
string: 'session'
string: "save report: $report&lt;br/&gt;\n"
string: 'scaffold/editmoduledefinition/'
string: 'moduleUID'
string: "Could not create module scaffold ($moduleName).&lt;br/&gt;"
string: 'scaffold/'
string: "Error: Missing form value.&lt;br/&gt;\n"
string: 'scaffold/'

<b>scanning file: /var/www/an2google/trunk/modules/scaffold/actions/list.act.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //	list all (public) module definitions
comment: //-------------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	authentication
comment: //---------------------------------------------------------------------------------------------
comment: // anyone can see public module definitions
comment: //---------------------------------------------------------------------------------------------
comment: //	render the page
comment: //---------------------------------------------------------------------------------------------
string: 'modules/scaffold/actions/list.page.php'
string: 'sessionUID'

<b>scanning file: /var/www/an2google/trunk/modules/scaffold/actions/globalfix.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	action to find and replace code issues
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	admins only
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	for every action, block and module
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
comment: //	utilities for this script
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/scaffold/parser.inc.php'
string: 'admin'
string: '&lt;br/&gt;\n'
string: "find $installPath -name '*.php'"
string: "\n"
string: '.block.php'
string: '.page.php'
string: '.log.php'
string: '.xml.php'
string: '.template.php'

<b>scanning file: /var/www/an2google/trunk/modules/scaffold/actions/fixtablenames.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	code to scan for and correct strings containing mixed case table names
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	admins only
comment: //----------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	get all files
comment: //------------------------------------------------------------------------------------------
comment: /*
		if (strpos($line, 'mysql.inc.php') != false) { $ok = false; }
		if (strpos($line, '.class.php') != false) { $ok = false; }
		if (strpos($line, '/core/') != false) { $ok = false; }
		if (strpos($line, 'upgradek2.act.php') != false) { $ok = false; }
		if (strpos($line, 'user.mod.php') != false) { $ok = false; }
		*/
comment: //------------------------------------------------------------------------------------------
comment: //	find strings needing replacements
comment: //------------------------------------------------------------------------------------------
comment: //$fileCount--;
comment: //echo "filecount: $fileCount\n";
comment: //if (0 == $fileCount) { break; }
comment: //---------------------------------------------------------------------------------------------
comment: //	depth first search
comment: //---------------------------------------------------------------------------------------------
comment: // directory could not be read
comment: // pop '.' off the end of the array
comment: // pop '..' off the end of the array
comment: //echo "Recurse $subDir\r\n";
comment: //---------------------------------------------------------------------------------------------
comment: //	find all strings
comment: //---------------------------------------------------------------------------------------------
comment: //......................................................................
comment: // short comments
comment: //......................................................................
comment: // long comments
comment: //......................................................................
comment: //......................................................................
comment: //......................................................................
string: 'admin'
string: "&lt;html&gt;&lt;body&gt;&lt;h1&gt;Global string scan "
string: "&lt;/h1&gt;&lt;small&gt;&lt;pre&gt;\n"
string: '.xml.php'
string: '.log.php'
string: '.page.php'
string: '.block.php'
string: '.template.php'
string: 'ore/removed/'
string: ''
string: "&lt;b&gt;scanning file: $file&lt;/b&gt;\n"
string: "string: "
string: "\n"
string: "\n"
string: ".svn"
string: '//'
string: '/'
string: '/'
string: 'php.'
string: 'php'
string: ''
string: ''
string: ''
string: 'php'
string: "'"
string: 'sq'
string: "\""
string: 'dq'
string: "/"
string: "/"
string: "//"
string: ''
string: 'cs'
string: "*"
string: "/"
string: "/*"
string: 'cl'
string: 'cs'
string: "\n"
string: "\r"
string: "comment: "
string: "\n"
string: ''
string: 'php'
string: 'cl'
string: "/"
string: "*"
string: "comment: "
string: "/\n"
string: ''
string: 'php'
string: 'sq'
string: "\\"
string: "\\"
string: ''
string: "'"
string: "\\"
string: ''
string: 'php'
string: 'dq'
string: "\\"
string: "\\"
string: ''
string: "\""
string: "\\"
string: ''
string: 'php'
string: "&lt;/pre&gt;&lt;/small&gt;&lt;/body&gt;&lt;/html&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/scaffold/actions/fixauthhas.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	find outdated constructions in kapenta php files
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	get all files
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	find old auth-Has calls
comment: //----------------------------------------------------------------------------------------------	
comment: // end foreach
comment: //$file = $file . ".new";
string: "find $installPath -name \"*.php\""
string: "\n"
string: '.xml.php'
string: '.log.php'
string: '.page.php'
string: '.block.php'
string: '.template.php'
string: ''
string: 'mysql.inc.php'
string: '.class.php'
string: '/core/'
string: 'upgradek2.act.php'
string: 'user.mod.php'
string: 'fixauthhas.act.php'
string: "\n"
string: 'authHas('
string: '$user-&gt;authHas'
string: "line $lineNo: $line &lt;br/&gt;\n"
string: ')'
string: "oldFn: $oldFn &lt;br/&gt;\n"
string: "authHas("
string: "authHas(,"
string: ")"
string: ",)"
string: ","
string: 'TODO'
string: "'"
string: ''
string: "\""
string: ''
string: 'announcements'
string: 'announcements_announcement'
string: 'calendar'
string: 'calendar_entry'
string: 'comments'
string: 'Comment_Comment'
string: 'folders'
string: "'files'"
string: 'files_folder'
string: 'forums'
string: 'forums_board'
string: 'forumreplies'
string: "'forums'"
string: 'forums_reply'
string: 'gallery'
string: 'gallery_gallery'
string: 'images'
string: 'images_image'
string: 'messages'
string: 'messages_message'
string: 'moblog'
string: 'moblog_post'
string: 'schools'
string: 'schools_school'
string: 'Schools'
string: "'schools'"
string: 'schools_school'
string: 'static'
string: "'home'"
string: 'home_static'
string: 'projects'
string: 'projects_project'
string: 'wiki'
string: 'wiki_article'
string: '$this-&gt;data'
string: '$this-&gt;UID'
string: "'view'"
string: "'show'"
string: "''"
string: "'TODO:UIDHERE'"
string: "\$user-&gt;authHas("
string: ", '"
string: "', "
string: ", $extra)"
string: "newFn: $newFn &lt;br/&gt;\n"
string: 'TODO'
string: ''
string: "&lt;h3&gt;$file&lt;/h3&gt;\n"
string: "total calls: $total &lt;br/&gt;\n"
string: 'w+'

<b>scanning file: /var/www/an2google/trunk/modules/scaffold/actions/editmoduledefinition.act.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //	edit a module definition
comment: //-------------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	reference checks and authentication
comment: //---------------------------------------------------------------------------------------------
comment: //if (false == authHas('scaffold', 'moduledefinition', 'edit', $req-&gt;ref)) { $page-&gt;do403(); }
comment: //---------------------------------------------------------------------------------------------
comment: //	show the edit page
comment: //---------------------------------------------------------------------------------------------
string: ''
string: 'scaffold/'
string: 'Scaffold_ModuleDefinition'
string: "&lt;br/&gt;&lt;br/&gt;UID: $UID &lt;br/&gt;\n"
string: 'modules/scaffold/actions/editmoduledefinition.page.php'
string: 'raUID'
string: 'UID'

<b>scanning file: /var/www/an2google/trunk/modules/scaffold/actions/editmodeldefinition.act.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //	edit a model definition
comment: //-------------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	reference checks and authentication
comment: //---------------------------------------------------------------------------------------------
comment: //if (false == authHas('scaffold', 'modeldefinition', 'edit', $req-&gt;ref)) { $page-&gt;do403(); }
comment: //---------------------------------------------------------------------------------------------
comment: //	show the edit page
comment: //---------------------------------------------------------------------------------------------
string: ''
string: 'scaffold/'
string: 'Scaffold_ModelDefinition'
string: 'modules/scaffold/actions/editmodeldefinition.page.php'
string: 'raUID'
string: 'UID'

<b>scanning file: /var/www/an2google/trunk/modules/scaffold/actions/editmembersif.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	iframe to edit model attributes
comment: //--------------------------------------------------------------------------------------------------
comment: // needs module UID
comment: //----------------------------------------------------------------------------------------------
comment: //	load model definition
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	render the page
comment: //----------------------------------------------------------------------------------------------
string: 'modules/scaffold/models/modeldefinition.mod.php'
string: ''
string: 'no model specified'
string: 'Scaffold_ModelDefinition'
string: 'unkown'
string: 'modules/scaffold/actions/editmembersif.page.php'
string: 'UID'

<b>scanning file: /var/www/an2google/trunk/modules/scaffold/actions/editmemberif.act.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //	show member edit form in an iframe
comment: //-------------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	check variables and authenticate
comment: //---------------------------------------------------------------------------------------------
comment: //TODO: permissions check
comment: //---------------------------------------------------------------------------------------------
comment: //	render the edit form
comment: //---------------------------------------------------------------------------------------------
string: 'modules/scaffold/models/memberdefinition.mod.php'
string: ''
string: 'no member definition specified'
string: 'Scaffold_MemberDefinition'
string: "member definition not found"
string: 'modules/scaffold/actions/editmemberif.page.php'
string: 'UID'

<b>scanning file: /var/www/an2google/trunk/modules/scaffold/actions/deletemodel.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	delete a model definition (confirm first)
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check form vars and user permissions
comment: //----------------------------------------------------------------------------------------------
comment: //if (false == authHas('', '', '')) { $page-&gt;do403() }
comment: //------------------------------------------------------------------------------------------
comment: //	delete the model definition
comment: //------------------------------------------------------------------------------------------
comment: // redirect back to module (parent object) edit page
comment: //------------------------------------------------------------------------------------------
comment: //	show 'confirm delete' screen (add delete form to view)
comment: //------------------------------------------------------------------------------------------
string: 'modules/scaffold/models/modeldefinition.mod.php'
string: 'UID'
string: 'No model definition specified'
string: 'Scaffold_Modeldefnition'
string: 'UID'
string: 'Specified model definition not found.'
string: 'action'
string: 'delete'
string: 'action'
string: 'UID'
string: 'scaffold/editmodule/'
string: "[[:scaffold::confirmdeletemodelform::UID="
string: 'UID'
string: ":]]"
string: 'scaffold/editmodel/'
string: 'UID'

<b>scanning file: /var/www/an2google/trunk/modules/scaffold/actions/deletemember.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	remove a member definition
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	authenticate
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: permisisons check here
comment: //----------------------------------------------------------------------------------------------
comment: //	delete the member
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	reset weights of other members
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	redirect back to list of members
comment: //----------------------------------------------------------------------------------------------
string: 'modules/scaffold/models/memberdefinition.mod.php'
string: 'modules/scaffold/models/modeldefinition.mod.php'
string: 'UID'
string: 'no member definition specified'
string: 'UID'
string: 'member definition not found'
string: 'yes'
string: 'auto'
string: 'this member cannot be removed'
string: 'model'
string: 'scaffold/editmembersif/'
string: 'model'

<b>scanning file: /var/www/an2google/trunk/modules/scaffold/actions/default.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	show public users the public form, logged in users can save and browse their scaffolds
comment: //--------------------------------------------------------------------------------------------------
comment: // TODO: personalized view of module list
string: 'public'
string: 'modules/scaffold/actions/list.act.php'
string: 'modules/scaffold/actions/list.act.php'

<b>scanning file: /var/www/an2google/trunk/modules/scaffold/actions/codegen.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	generates templated code given a model definition
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check permissions and request vars
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: check permissions
comment: //----------------------------------------------------------------------------------------------
comment: //	generate the code
comment: //----------------------------------------------------------------------------------------------
comment: // this is a global which codegen views need
comment: //----------------------------------------------------------------------------------------------
comment: //	display it
comment: //----------------------------------------------------------------------------------------------
string: ''
string: 'no model definition specified'
string: 'Scaffold_ModelDefinition'
string: 'model not found'
string: 'template'
string: 'no template given'
string: 'template'
string: '[[:scaffold::codegen::model='
string: '::template='
string: ':]]'
string: ''
string: "[~["
string: '[['
string: "]~]"
string: ']]'
string: 'Content-type: text/plain'

<b>scanning file: /var/www/an2google/trunk/modules/scaffold/actions/addmember.act.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //	add a member to an existing model definition
comment: //-------------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	check permissions and request vars
comment: //---------------------------------------------------------------------------------------------
comment: //TODO: permissions check
comment: //---------------------------------------------------------------------------------------------
comment: //	check member name
comment: //---------------------------------------------------------------------------------------------
comment: // done
comment: //---------------------------------------------------------------------------------------------
comment: //	check that a member with this name does not already exist on model definition
comment: //---------------------------------------------------------------------------------------------
comment: // done
comment: //---------------------------------------------------------------------------------------------
comment: //	make a new member definition
comment: //---------------------------------------------------------------------------------------------
comment: // security precaution
comment: //---------------------------------------------------------------------------------------------
comment: //	redirect back to editmembersif
comment: //---------------------------------------------------------------------------------------------
string: 'modules/scaffold/models/modeldefinition.mod.php'
string: 'modules/scaffold/models/memberdefinition.mod.php'
string: 'model'
string: 'no model specified'
string: 'Scaffold_ModelDefinition'
string: 'model'
string: 'model not found'
string: 'name'
string: '-'
string: ''
string: '_'
string: ''
string: 'UID'
string: 'refModule'
string: 'refModel'
string: 'refUID'
string: 'createdby'
string: 'createdon'
string: 'editedon'
string: 'editedby'
string: 'alias'
string: 'aliags'
string: "Magic field "
string: 'name'
string: " cannot be added this way."
string: 'scaffold/editmembersif/'
string: 'model'
string: 'model'
string: "a member with this name already exists.&lt;br/&gt;\n"
string: 'scaffold/editmembersif/'
string: 'model'
string: 'type'
string: 'unrecognized type'
string: 'no'
string: 'hasidx'
string: 'yes'
string: 'hasidx'
string: 'yes'
string: 'model'
string: 'model'
string: 'type'
string: 'dbtype'
string: 'hasidx'
string: "Could not create memberdefinition object: "
string: "&lt;br/&gt;\n"
string: 'scaffold/editmembersif/'
string: 'model'

<b>scanning file: /var/www/an2google/trunk/modules/revisions/views/showdeleted.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	show the details of a specific deleted object
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: UID - UID of a Revisions_Deleted object [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check users role and args
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
string: 'modules/revisions/models/deleted.mod.php'
string: ''
string: 'admin'
string: ''
string: 'UID'
string: ''
string: 'UID'
string: 'modules/revisions/views/showdeleted.block.php'
string: 'Member'
string: 'Value'
string: 'fieldsTable'
string: "
	&lt;form name='restroeDeletedItem'&gt;
	&lt;input type='hidden' name='action' value='restoreDeleted' /&gt;
	&lt;input type='hidden' name='UID' value='"
string: "' /&gt;
	&lt;input type='submit' value='Restore This Item &amp;gt;&amp;gt;' /&gt;
	&lt;/form&gt;
	"
string: 'restoreForm'
string: ''
string: 'delete'
string: 'restoreForm'

<b>scanning file: /var/www/an2google/trunk/modules/revisions/views/listdeleted.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	show a page of deleted objects
comment: //--------------------------------------------------------------------------------------------------
comment: //opt: pageNo - results page to display (int) [string]
comment: //opt: objectType - type of deleted object to show, * for all [string]
comment: //opt: num - number of objects per page, default is 50 (int) [string]
comment: //%	return value [string]
comment: //%	page number (starts at 1) [int]
comment: //%	number of items per page [int]
comment: //%	type of deleted object to show [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and user role
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	count matching objects and load a page of deleted objects from the database
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: add conditions here
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
string: ''
string: '*'
string: 'admin'
string: ''
string: 'pageNo'
string: 'pageNo'
string: 'num'
string: 'num'
string: 'revisions_deleted'
string: 'revisions_deleted'
string: '*'
string: 'editedOn'
string: 'Module'
string: 'Model'
string: 'UID'
string: '%%serverPath%%revisions/listdeleted/type_'
string: 'refModel'
string: "&lt;a href='"
string: "'&gt;"
string: 'refModel'
string: "&lt;/a&gt;"
string: '%%serverPath%%revisions/showdeleted/'
string: 'UID'
string: "&lt;a href='"
string: "'&gt;"
string: 'refUID'
string: "&lt;/a&gt;"
string: 'refModule'

<b>scanning file: /var/www/an2google/trunk/modules/revisions/models/revision.mod.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	Recods hostory of significant changes to objects on other modules.
comment: //--------------------------------------------------------------------------------------------------
comment: //+	content is stored as XML with base64 encoded values, eg:
comment: //+
comment: //+		&lt;fields&gt;
comment: //+			&lt;title&gt;BASE64ENCODEDTITLE&lt;/title&gt;
comment: //+			&lt;content&gt;BASE64ENCODEDCONTENT&lt;/content&gt;
comment: //+		&lt;/fields&gt;
comment: //+
comment: //+	TODO: undelete mechanism - record is restored and the Revisions_Deleted object has its
comment: //+	refUID field set to 'restored' and content set to the UID.  Peers, on reciving this
comment: //+	updated Revisions_Deleted object should the re-sync the undeleted object, as they would for
comment: //+ a new one.
comment: //----------------------------------------------------------------------------------------------
comment: //	member variables
comment: //----------------------------------------------------------------------------------------------
comment: //_	currently loaded database record [array]
comment: //_	database table definition [array]
comment: //_	set to true when an object has been loaded [bool]
comment: //_ UID [string]
comment: //_ module [string]
comment: //_ model [string]
comment: //_ ref:*_* [string]
comment: //_ text [string]
comment: //_ datetime [string]
comment: //_ ref:Users_User [string]
comment: //_ datetime [string]
comment: //_ ref:Users_User [string]
comment: //_	associative [array]
comment: //----------------------------------------------------------------------------------------------
comment: //. constructor
comment: //----------------------------------------------------------------------------------------------
comment: //opt: UID - UID of a Revision object [string]
comment: // initialise table schema
comment: // try load an object from the database
comment: // check if we did
comment: // make new object
comment: // initialize
comment: //----------------------------------------------------------------------------------------------
comment: //. load an object from the database given its UID
comment: //----------------------------------------------------------------------------------------------
comment: //arg: UID - UID of a Revision object [string]
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //. load Revision object serialized as an associative array
comment: //----------------------------------------------------------------------------------------------
comment: //arg: ary - associative array of members and values [array]
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //. save the current object to database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string on success, html report of errors on failure [string]
comment: //: $db-&gt;save(...) will raise an object_updated event if successful
comment: //----------------------------------------------------------------------------------------------
comment: //. check that object is correct before allowing it to be stored in database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string if object passes, warning message if not [string]
comment: //----------------------------------------------------------------------------------------------
comment: //. database table definition and content versioning
comment: //----------------------------------------------------------------------------------------------
comment: //returns: information for constructing SQL queries [array]
comment: //table columns
comment: //these fields will be indexed
comment: //revision history will be kept for these fields
comment: //----------------------------------------------------------------------------------------------
comment: //. serialize this object to an array
comment: //----------------------------------------------------------------------------------------------
comment: //returns: associative array of all members which define this instance [array]
comment: //----------------------------------------------------------------------------------------------
comment: //. serialize this object to xml
comment: //----------------------------------------------------------------------------------------------
comment: //arg: xmlDec - include xml declaration? [bool]
comment: //arg: indent - string with which to indent lines [bool]
comment: //returns: xml serialization of this object [string]
comment: //NOTE: any members which are not XML clean should be marked up before sending
comment: //----------------------------------------------------------------------------------------------
comment: //. make an extended array of data views may need
comment: //----------------------------------------------------------------------------------------------
comment: //returns: associative array of members, metadata and partial views [array]
comment: //% extended array of properties [array:string]
comment: //------------------------------------------------------------------------------------------
comment: //	links
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	javascript
comment: //------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //. delete current object from the database
comment: //----------------------------------------------------------------------------------------------
comment: //: $db-&gt;delete(...) will raise an object_deleted event on success [bool]
comment: //returns: true on success, false on failure [bool]
comment: // nothing to do
comment: //==============================================================================================
comment: //	fields
comment: //==============================================================================================
comment: //----------------------------------------------------------------------------------------------
comment: //.	convert fields XML to associative array (typically onLoad)
comment: //----------------------------------------------------------------------------------------------
comment: //arg: xml - has 'fields' root element, values base64 encoded [string]
comment: //returns: associative [array]
comment: //% 1 is always root node [array]
comment: //----------------------------------------------------------------------------------------------
comment: //.	convert fields array to XML
comment: //----------------------------------------------------------------------------------------------
comment: //arg: xml - has 'fields' root element, values base64 encoded [string]
comment: //returns: associative [array]
string: ''
string: ''
string: 'UID'
string: 'refModule'
string: 'refModel'
string: 'refUID'
string: 'content'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: ''
string: "Database error.&lt;br/&gt;\n"
string: ''
string: ''
string: ''
string: "No UID.&lt;br/&gt;\n"
string: 'module'
string: 'revisions'
string: 'model'
string: 'revisions_revision'
string: 'archive'
string: 'no'
string: 'fields'
string: 'UID'
string: 'VARCHAR(33)'
string: 'refModule'
string: 'TEXT'
string: 'refModel'
string: 'TEXT'
string: 'refUID'
string: 'VARCHAR(33)'
string: 'content'
string: 'TEXT'
string: 'createdOn'
string: 'DATETIME'
string: 'createdBy'
string: 'VARCHAR(33)'
string: 'editedOn'
string: 'DATETIME'
string: 'editedBy'
string: 'VARCHAR(33)'
string: 'indices'
string: 'UID'
string: '10'
string: 'refModule'
string: '10'
string: 'refModel'
string: '10'
string: 'refUID'
string: '10'
string: 'createdOn'
string: ''
string: 'createdBy'
string: '10'
string: 'editedOn'
string: ''
string: 'editedBy'
string: '10'
string: 'diff'
string: 'content'
string: 'UID'
string: 'refModule'
string: 'refModel'
string: 'refUID'
string: 'content'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: ''
string: "&lt;kobject type='revisions_revision'&gt;\n"
string: "    &lt;UID&gt;"
string: "&lt;/UID&gt;\n"
string: "    &lt;refModule&gt;"
string: "&lt;/refModule&gt;\n"
string: "    &lt;refModel&gt;"
string: "&lt;/refModel&gt;\n"
string: "    &lt;refUID&gt;"
string: "&lt;/refUID&gt;\n"
string: "    &lt;content&gt;"
string: "&lt;/content&gt;\n"
string: "    &lt;createdOn&gt;"
string: "&lt;/createdOn&gt;\n"
string: "    &lt;createdBy&gt;"
string: "&lt;/createdBy&gt;\n"
string: "    &lt;editedOn&gt;"
string: "&lt;/editedOn&gt;\n"
string: "    &lt;editedBy&gt;"
string: "&lt;/editedBy&gt;\n"
string: "&lt;/kobject&gt;\n"
string: "&lt;?xml version='1.0' encoding='UTF-8' ?&gt;\n"
string: 'viewUrl'
string: ''
string: 'viewLink'
string: ''
string: 'editUrl'
string: ''
string: 'editLink'
string: ''
string: 'delUrl'
string: ''
string: 'delLink'
string: ''
string: 'newUrl'
string: ''
string: 'newLink'
string: ''
string: 'revisions'
string: 'revisions_revision'
string: 'show'
string: 'viewUrl'
string: '%%serverPath%%Revisions/showrevision/'
string: 'UID'
string: 'viewLink'
string: "&lt;a href='"
string: 'viewUrl'
string: "'&gt;[ more &amp;gt;gt; ]&lt;/a&gt;"
string: 'revisions'
string: 'revisions_revision'
string: 'edit'
string: 'edit'
string: 'editUrl'
string: '%%serverPath%%Revisions/editrevision/'
string: 'UID'
string: 'editLink'
string: "&lt;a href='"
string: 'editUrl'
string: "'&gt;[ edit ]&lt;/a&gt;"
string: 'revisions'
string: 'revisions_revision'
string: 'edit'
string: 'delete'
string: 'delUrl'
string: '%%serverPath%%Revisions/delrevision/'
string: 'UID'
string: 'delLink'
string: "&lt;a href='"
string: 'delUrl'
string: "'&gt;[ delete ]&lt;/a&gt;"
string: 'UIDJsClean'
string: 'UID'
string: ''
string: 'fields'

<b>scanning file: /var/www/an2google/trunk/modules/revisions/models/deleted.mod.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	Stores items deleted from other tables.
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	member variables
comment: //----------------------------------------------------------------------------------------------
comment: //_	currently loaded database record [array]
comment: //_	database table definition [array]
comment: //_	set to true when an object has been loaded [bool]
comment: //_ unique identifier of this object [string]
comment: //_ module to which the deleted item belonged [string]
comment: //_ type of deleted object [string]
comment: //_ unique identifier of deleted object [string]
comment: //_ member variables of deleted object (xml) [string]
comment: //_ deleted, restored or purged [string]
comment: //_ datetime [string]
comment: //_ ref:Users_User [string]
comment: //_ datetime [string]
comment: //_ ref:Users_User [string]
comment: //_	associative [array]
comment: //_	set to true when fields have been expanded from XML [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //. constructor
comment: //----------------------------------------------------------------------------------------------
comment: //opt: UID - UID of a Deleted object [string]
comment: // initialise table schema
comment: // try load an object from the database
comment: // check if we did
comment: // make new object
comment: // initialize
comment: //----------------------------------------------------------------------------------------------
comment: //. load an object from the database given its UID
comment: //----------------------------------------------------------------------------------------------
comment: //arg: UID - UID of a Deleted object [string]
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //. load Deleted object serialized as an associative array
comment: //----------------------------------------------------------------------------------------------
comment: //arg: ary - associative array of members and values [array]
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //. save the current object to database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string on success, html report of errors on failure [string]
comment: //: $db-&gt;save(...) will raise an object_updated event if successful
comment: //----------------------------------------------------------------------------------------------
comment: //. check that object is correct before allowing it to be stored in database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string if object passes, warning message if not [string]
comment: //----------------------------------------------------------------------------------------------
comment: //. database table definition and content versioning
comment: //----------------------------------------------------------------------------------------------
comment: //returns: information for constructing SQL queries [array]
comment: //table columns
comment: //these fields will be indexed
comment: //revision history will be kept for these fields
comment: //----------------------------------------------------------------------------------------------
comment: //. serialize this object to an array
comment: //----------------------------------------------------------------------------------------------
comment: //returns: associative array of all members which define this instance [array]
comment: //----------------------------------------------------------------------------------------------
comment: //. serialize this object to xml
comment: //----------------------------------------------------------------------------------------------
comment: //arg: xmlDec - include xml declaration? [bool]
comment: //arg: indent - string with which to indent lines [bool]
comment: //returns: xml serialization of this object [string]
comment: //NOTE: any members which are not XML clean should be marked up before sending
comment: //----------------------------------------------------------------------------------------------
comment: //. make an extended array of data views may need
comment: //----------------------------------------------------------------------------------------------
comment: //returns: associative array of members, metadata and partial views [array]
comment: //% extended array of properties [array:string]
comment: //------------------------------------------------------------------------------------------
comment: //	links
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	javascript
comment: //------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //. delete current object from the database
comment: //----------------------------------------------------------------------------------------------
comment: //: $db-&gt;delete(...) will raise an object_deleted event on success [bool]
comment: //returns: true on success, false on failure [bool]
comment: // nothing to do
comment: //==============================================================================================
comment: //	fields
comment: //==============================================================================================
comment: //----------------------------------------------------------------------------------------------
comment: //.	convert fields XML to associative array (typically onLoad)
comment: //----------------------------------------------------------------------------------------------
comment: //arg: xml - has 'fields' root element, values base64 encoded [string]
comment: //returns: associative [array]
comment: //% 1 is always root node [array]
comment: //----------------------------------------------------------------------------------------------
comment: //.	convert fields array to XML
comment: //----------------------------------------------------------------------------------------------
comment: //arg: xml - has 'fields' root element, values base64 encoded [string]
comment: //returns: associative [array]
string: ''
string: ''
string: 'deleted'
string: 'UID'
string: 'refModule'
string: 'refModel'
string: 'refUID'
string: 'content'
string: 'status'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: ''
string: "Database error.&lt;br/&gt;\n"
string: ''
string: ''
string: ''
string: "No UID.&lt;br/&gt;\n"
string: 'module'
string: 'revisions'
string: 'model'
string: 'revisions_deleted'
string: 'archive'
string: 'no'
string: 'fields'
string: 'UID'
string: 'VARCHAR(33)'
string: 'refModule'
string: 'TEXT'
string: 'refModel'
string: 'TEXT'
string: 'refUID'
string: 'VARCHAR(33)'
string: 'content'
string: 'TEXT'
string: 'status'
string: 'VARCHAR(10)'
string: 'createdOn'
string: 'DATETIME'
string: 'createdBy'
string: 'VARCHAR(33)'
string: 'editedOn'
string: 'DATETIME'
string: 'editedBy'
string: 'VARCHAR(33)'
string: 'indices'
string: 'UID'
string: '10'
string: 'refModule'
string: '10'
string: 'refModel'
string: '10'
string: 'refUID'
string: '10'
string: 'createdOn'
string: ''
string: 'createdBy'
string: '10'
string: 'editedOn'
string: ''
string: 'editedBy'
string: '10'
string: 'diff'
string: 'content'
string: 'UID'
string: 'refModule'
string: 'refModel'
string: 'refUID'
string: 'content'
string: 'status'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: ''
string: "&lt;kobject type='revisions_deleted'&gt;\n"
string: "    &lt;UID&gt;"
string: "&lt;/UID&gt;\n"
string: "    &lt;refModule&gt;"
string: "&lt;/refModule&gt;\n"
string: "    &lt;refModel&gt;"
string: "&lt;/refModel&gt;\n"
string: "    &lt;refUID&gt;"
string: "&lt;/refUID&gt;\n"
string: "    &lt;content&gt;"
string: "&lt;/content&gt;\n"
string: "    &lt;status&gt;"
string: "&lt;/status&gt;\n"
string: "    &lt;createdOn&gt;"
string: "&lt;/createdOn&gt;\n"
string: "    &lt;createdBy&gt;"
string: "&lt;/createdBy&gt;\n"
string: "    &lt;editedOn&gt;"
string: "&lt;/editedOn&gt;\n"
string: "    &lt;editedBy&gt;"
string: "&lt;/editedBy&gt;\n"
string: "&lt;/kobject&gt;\n"
string: "&lt;?xml version='1.0' encoding='UTF-8' ?&gt;\n"
string: 'viewUrl'
string: ''
string: 'viewLink'
string: ''
string: 'editUrl'
string: ''
string: 'editLink'
string: ''
string: 'delUrl'
string: ''
string: 'delLink'
string: ''
string: 'newUrl'
string: ''
string: 'newLink'
string: ''
string: 'revisions'
string: 'revisions_deleted'
string: 'show'
string: 'viewUrl'
string: '%%serverPath%%Revisions/showdeleted/'
string: 'UID'
string: 'viewLink'
string: "&lt;a href='"
string: 'viewUrl'
string: "'&gt;[ more &amp;gt;gt; ]&lt;/a&gt;"
string: 'revisions'
string: 'revisions_deleted'
string: 'edit'
string: 'edit'
string: 'editUrl'
string: '%%serverPath%%Revisions/editdeleted/'
string: 'UID'
string: 'editLink'
string: "&lt;a href='"
string: 'editUrl'
string: "'&gt;[ edit ]&lt;/a&gt;"
string: 'revisions'
string: 'revisions_deleted'
string: 'edit'
string: 'delete'
string: 'delUrl'
string: '%%serverPath%%Revisions/deldeleted/'
string: 'UID'
string: 'delLink'
string: "&lt;a href='"
string: 'delUrl'
string: "'&gt;[ delete ]&lt;/a&gt;"
string: 'UIDJsClean'
string: 'UID'
string: ''
string: 'fields'

<b>scanning file: /var/www/an2google/trunk/modules/revisions/inc/maintenance.inc.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	maintain the revisons module
comment: //--------------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	if an item is marked as deleted, make sure it is in fact deleted
comment: //------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	compile report
comment: //----------------------------------------------------------------------------------------------
string: 'modules/revisions/models/deleted.mod.php'
string: "&lt;h2&gt;Checking deleted items table...&lt;/h2&gt;"
string: 'UID'
string: 'refModule'
string: 'refModel'
string: 'refUID'
string: 'status'
string: 'error'
string: "select * from Revisions_Deleted"
string: 'refModel'
string: 'refUID'
string: 'UID'
string: 'refModule'
string: 'refModel'
string: 'refUID'
string: 'status'
string: 'object maked as deleted, but not yet removed'
string: "delete from "
string: 'refModel'
string: " where UID='"
string: 'refUID'
string: "'"
string: "&lt;b&gt;Records Checked:&lt;/b&gt; $recordCount&lt;br/&gt;\n"
string: "&lt;b&gt;Errors Found:&lt;/b&gt; $errorCount&lt;br/&gt;\n"
string: "&lt;b&gt;Errors Fixed:&lt;/b&gt; $fixCount&lt;br/&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/revisions/inc/install.inc.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	install script for Revisions module
comment: //--------------------------------------------------------------------------------------------------
comment: //+	reports are human-readable HTML, with script-readable HTML comments
comment: //--------------------------------------------------------------------------------------------------
comment: //|	install the Revisions module
comment: //--------------------------------------------------------------------------------------------------
comment: //returns: html report or false if not authorized [string][bool]
comment: //----------------------------------------------------------------------------------------------
comment: //	create or upgrade Revisions_Deleted table
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	create or upgrade Revisions_Revision table
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	done
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
comment: //|	discover if this module is installed
comment: //--------------------------------------------------------------------------------------------------
comment: //:	if installed correctly report will contain HTML comment &lt;!-- installed correctly --&gt;
comment: //returns: HTML installation status report [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	ensure the table which stores Deleted objects exists and is correct
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	ensure the table which stores Revision objects exists and is correct
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	done
comment: //----------------------------------------------------------------------------------------------
string: 'core/dbdriver/mysqladmin.dbd.php'
string: 'modules/revisions/models/deleted.mod.php'
string: 'modules/revisions/models/revision.mod.php'
string: 'admin'
string: ''
string: 'admin'
string: ''
string: '&lt;!-- table installed correctly --&gt;'
string: '&lt;!-- module installed correctly --&gt;'

<b>scanning file: /var/www/an2google/trunk/modules/revisions/actions/showdeleted.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	show a specific deleted item
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check reference and user role
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	render the page
comment: //----------------------------------------------------------------------------------------------
string: 'modules/revisions/models/deleted.mod.php'
string: 'admin'
string: ''
string: 'modules/revisions/actions/showdeleted.page.php'
string: 'UID'

<b>scanning file: /var/www/an2google/trunk/modules/revisions/actions/listdeleted.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	list deleted objects
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and user role (only administrators may do this)
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	render the page
comment: //----------------------------------------------------------------------------------------------
string: '*'
string: 'admin'
string: 'page'
string: 'page'
string: 'type'
string: 'type'
string: 'modules/revisions/actions/listdeleted.page.php'
string: 'pageNo'
string: 'objectType'

<b>scanning file: /var/www/an2google/trunk/modules/revisions/actions/default.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	default action for revisions module is to show revisions
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/revisions/actions/listrevisions.act.php'

<b>scanning file: /var/www/an2google/trunk/modules/projects/views/titlelink.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	project title link
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - recordAlias or UID of a project [string]
comment: //opt: projectUID - replaces raUID if present [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and auth
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: permissions check here
comment: //----------------------------------------------------------------------------------------------
comment: //	load the project and return link
comment: //----------------------------------------------------------------------------------------------
string: 'modules/projects/models/project.mod.php'
string: ''
string: 'projectUID'
string: 'raUID'
string: 'projectUID'
string: 'raUID'
string: ''
string: 'raUID'
string: "&lt;a href='%%viewUrl%%'&gt;%%title%%&lt;/a&gt;"

<b>scanning file: /var/www/an2google/trunk/modules/projects/views/title.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	return a project's title
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - recordAlias or UID or projects entry [string]
comment: //opt: projectUID - overrides $raUID [string]
comment: //opt: link - link to this record? [string]
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/projects/models/membership.mod.php'
string: 'modules/projects/models/revision.mod.php'
string: 'modules/projects/models/project.mod.php'
string: 'no'
string: 'projectUID'
string: 'raUID'
string: 'projectUID'
string: 'raUID'
string: 'link'
string: 'link'
string: 'raUID'
string: 'no'
string: "&lt;a href='/projects/"
string: "'&gt;"
string: "&lt;/a&gt;"

<b>scanning file: /var/www/an2google/trunk/modules/projects/views/tagged.fn.php</b>
comment: //TODO: figure out how to get rid of this dependancy
comment: //--------------------------------------------------------------------------------------------------
comment: //|	show  a list of all projects sharing a given tag
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: UID - UID of a Tags_Tag object [string]
comment: //opt: tagUID - overrides UID if present [string]
comment: //opt: pageNo - TODO, pagination [string]
comment: //opt: num - TODO, number of items per page [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: permissions check here
comment: //----------------------------------------------------------------------------------------------
comment: //	get list of projects from database
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
string: 'modules/tags/models/tag.mod.php'
string: ''
string: 'tagUID'
string: 'UID'
string: 'tagUID'
string: 'UID'
string: ''
string: 'UID'
string: '(unknown tag)'
string: "SELECT Projects_Project.UID as projectUID from Projects_Project, Tags_Index "
string: "WHERE Projects_Project.UID=Tags_Index.refUID "
string: "AND Tags_Index.tagUID='"
string: "' "
string: "ORDER by Projects_Project.title"
string: "(nothign with this tag at present)"
string: "[[:projects::summary::raUID="
string: 'projectUID'
string: ":]]"

<b>scanning file: /var/www/an2google/trunk/modules/projects/views/summarynav.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	summarise for the nav (300 wide)
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - recordAlias or UID or projects entry [string]
comment: //opt: projectUID - overrides raUID [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permisisons
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: permission check
comment: //----------------------------------------------------------------------------------------------
comment: //	load the model
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	fill out the block template and return it
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/projects/models/membership.mod.php'
string: 'modules/projects/models/revision.mod.php'
string: 'modules/projects/models/project.mod.php'
string: ''
string: 'projectUID'
string: 'raUID'
string: 'projectUID'
string: 'raUID'
string: 'raUID'
string: ''
string: 'modules/projects/views/summarynav.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/projects/views/summary.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	summarise
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - alias or UID of a Projects_Project object [string]
comment: //opt: projectUID - overrides raUID if present [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/projects/models/membership.mod.php'
string: 'modules/projects/models/revision.mod.php'
string: 'modules/projects/models/project.mod.php'
string: ''
string: 'projectUID'
string: 'raUID'
string: 'projectUID'
string: 'raUID'
string: ''
string: 'raUID'
string: ''
string: 'projects'
string: 'projects_project'
string: 'show'
string: ''
string: 'modules/projects/views/summary.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/projects/views/statsnav.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	article statistics formatted for nav
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - alias or UID of a Projects_Project object [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check argument and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	look up revision stats
comment: //----------------------------------------------------------------------------------------------
comment: //$sql = "select * from Projects_Revision where projectUID='" . $extArray['UID'] . "'";
comment: //----------------------------------------------------------------------------------------------
comment: //	assemble the block
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/projects/models/project.mod.php'
string: 'modules/projects/models/revision.mod.php'
string: ''
string: 'raUID'
string: ''
string: 'raUID'
string: ''
string: 'projects'
string: 'projects_project'
string: 'show'
string: ''
string: "projectUID='"
string: "'"
string: 'totalRevisions'
string: 'projects_revision'
string: 'modules/projects/views/stats.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/projects/views/showrevision.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	show the state of a project when a given revision was saved
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: UID - UID of a Projects_Revision object [string]
comment: //opt: revisionUID - overrides UID if present [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: permissions check here
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
string: 'modules/projects/models/project.mod.php'
string: 'modules/projects/models/revision.mod.php'
string: ''
string: 'revisionUID'
string: 'UID'
string: 'projectUID'
string: 'UID'
string: ''
string: 'UID'
string: ''
string: 'modules/projects/views/show.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/projects/views/show.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	show a record
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - recordAlias or UID or projects entry [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------	
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/projects/models/membership.mod.php'
string: 'modules/projects/models/revision.mod.php'
string: 'modules/projects/models/project.mod.php'
string: ''
string: 'raUID'
string: ''
string: 'raUID'
string: 'projects'
string: 'projects_project'
string: 'show'
string: ''
string: 'projectTitle'
string: 'modules/projects/views/show.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/projects/views/select.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	return an HTML select box of all projects
comment: //--------------------------------------------------------------------------------------------------
comment: //opt: varname - name of variable (default is 'project') [string]
comment: //opt: default - default selected item (set to a project UID) [string]
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/projects/models/membership.mod.php'
string: 'modules/projects/models/revision.mod.php'
string: 'modules/projects/models/project.mod.php'
string: 'project'
string: ''
string: 'varname'
string: 'varname'
string: 'default'
string: 'default'
string: ''
string: "select * from Projects_Project order by name"
string: "&lt;select name='"
string: "'&gt;\n"
string: 'UID'
string: "&lt;option value='"
string: 'UID'
string: "' CHECKED='CHECKED'&gt;"
string: 'name'
string: "&lt;/option&gt;\n"
string: "&lt;option value='"
string: 'UID'
string: "'&gt;"
string: 'name'
string: "&lt;/option&gt;\n"
string: "&lt;/select&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/projects/views/revisionsummarynav.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	summarize a Project_Revision in the nav (~300px wide)
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: UID - UID of a Projects_Revision object [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check argument and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: verify and enable this permission check
comment: //if (false == $user-&gt;authHas('projects', 'projects_revision', 'show', $model-&gt;UID)) { return ''; }
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
string: 'modules/projects/models/revision.mod.php'
string: ''
string: 'UID'
string: ''
string: 'UID'
string: ''
string: 'modules/projects/views/revisionsummarynav.block.php'
string: ''
string: 'reason'
string: 'reason'
string: "&lt;i&gt;(no reason given)&lt;/i&gt;"

<b>scanning file: /var/www/an2google/trunk/modules/projects/views/revisionsnav.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	list revisions made to a project
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: UID - UID or alias of a project [string]
comment: //opt: projectUID - overrides raUID [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	load all revisions
comment: //----------------------------------------------------------------------------------------------
comment: // . "&lt;a href='" . $revisionLink . "'&gt;[show]&lt;/a&gt;&lt;hr/&gt;";
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/projects/models/membership.mod.php'
string: 'modules/projects/models/revision.mod.php'
string: 'modules/projects/models/project.mod.php'
string: 'projects'
string: 'projects_project'
string: 'show'
string: 'TODO:UIDHERE'
string: 'projectUID'
string: 'UID'
string: 'projectUID'
string: 'UID'
string: ''
string: "select * from Projects_Revision "
string: "where refUID='"
string: 'UID'
string: "' order by editedOn"
string: '/projects/revision/'
string: 'UID'
string: 'Y-m-d'
string: 'editedOn'
string: "$revisionDate by [[:users::name::userUID="
string: 'editedBy'
string: ":]] "

<b>scanning file: /var/www/an2google/trunk/modules/projects/views/revisions.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	list revisions made to a project
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: UID - UID or recordAlias of a project [string]
comment: //opt: projectUID - overrides UID [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	load all revisions
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/projects/models/membership.mod.php'
string: 'modules/projects/models/revision.mod.php'
string: 'modules/projects/models/project.mod.php'
string: 'modules/projects/inc/diff.inc.php'
string: 'projects'
string: 'projects_project'
string: 'show'
string: 'TODO:UIDHERE'
string: 'projectUID'
string: 'UID'
string: 'projectUID'
string: 'UID'
string: ''
string: "select * from Projects_Revision "
string: "where refUID='"
string: 'UID'
string: "' order by editedOn"
string: '/projects/revision/'
string: 'UID'
string: 'Y-m-d'
string: 'editedOn'
string: "&lt;hr/&gt;\n"
string: "&lt;table noborder&gt;\n"
string: "  &lt;tr&gt;\n"
string: "    &lt;td valign='top' width='200'&gt;"
string: "[[:users::summarynav::userUID="
string: 'editedBy'
string: ":]]&lt;br/&gt;"
string: "&lt;a href='/projects/revision/"
string: 'UID'
string: "'&gt;[view]&lt;/a&gt;"
string: "    &lt;/td&gt;"
string: "    &lt;td valign='top'&gt;"
string: 'content'
string: 'content'
string: "&lt;br/&gt;&lt;b&gt;Saved:&lt;/b&gt; "
string: 'editedOn'
string: "&lt;br/&gt;\n"
string: "    &lt;/td&gt;"
string: "  &lt;/tr&gt;"
string: "&lt;/table&gt;"

<b>scanning file: /var/www/an2google/trunk/modules/projects/views/requestsjoinnav.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	list requests made by others to join a project
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - UID or recordAlias of a project [string]
comment: //opt: projectUID - overrides raUID [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //if (false == $user-&gt;authHas('projects', 'projects_project', 'administer', $model-&gt;UID))
comment: //	{ return ''; }
comment: //----------------------------------------------------------------------------------------------
comment: //	load prospective memebrs from the database
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
comment: // nothing to show
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/projects/models/membership.mod.php'
string: 'modules/projects/models/project.mod.php'
string: ''
string: 'projectUID'
string: 'raUID'
string: 'projectUID'
string: 'raUID'
string: ''
string: 'raUID'
string: ''
string: 'admin'
string: ''
string: "projectUID='"
string: "'"
string: "role='asked'"
string: 'projects_membership'
string: '*'
string: ''
string: "[[:theme::navtitlebox::label=Have Asked To Join:]]\n"
string: "%%serverPath%%projects/acceptmember/"
string: 'UID'
string: "[[:users::summarynav::userUID="
string: 'userUID'
string: ":]]\n"
string: "&lt;a href='$addUrl'&gt;[add as project member &gt;&gt; ]&lt;/a&gt;&lt;hr/&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/projects/views/newprojectform.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	form to create a new project (formatted for nav)
comment: //--------------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'projects'
string: 'projects_project'
string: 'new'
string: ''
string: 'modules/projects/views/newprojectform.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/projects/views/mostactivenav.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	display n most active projects (by number of revisions)
comment: //--------------------------------------------------------------------------------------------------
comment: //opt: num - number of projects to display, default is 10 (int) [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	count revisions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
string: ''
string: 'num'
string: 'num'
string: "SELECT projectUID, count(UID) as numRevisions "
string: "FROM Projects_Revision "
string: "GROUP BY projectUID "
string: "ORDER BY numRevisions LIMIT $num"
string: "[[:projects::summarynav::projectUID="
string: 'projectUID'
string: ":]]"

<b>scanning file: /var/www/an2google/trunk/modules/projects/views/menu.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	menu for projects, no arguments
comment: //--------------------------------------------------------------------------------------------------
comment: //opt: raUID - alias or UID of a Projects_Project object [string]
comment: //opt: projectUID - UID of a Projects_Projects object [string]
comment: // defaults for public/unauthorized user
comment: // ...
comment: // ...
comment: // ...
comment: // ...
comment: //----------------------------------------------------------------------------------------------
comment: //	check is projectUID has been provided, is correct and and user has edit permission
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------
comment: //	menu options for specific project, not projects in general
comment: //--------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------
comment: //	user can edit this project
comment: //----------------------------------------------------------------------------------
comment: // only admins may delete projects
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/projects/models/membership.mod.php'
string: 'modules/projects/models/revision.mod.php'
string: 'modules/projects/models/project.mod.php'
string: 'newEntry'
string: ''
string: 'editProject'
string: ''
string: 'viewProject'
string: ''
string: 'viewHistory'
string: ''
string: 'delProject'
string: ''
string: 'theme::submenu'
string: 'projectUID'
string: 'raUID'
string: 'projectUID'
string: 'raUID'
string: 'raUID'
string: '%%serverPath%%projects/show/'
string: 'viewProject'
string: "[[:$ts::label=View This Project::link=$viewUrl:]]"
string: '%%serverPath%%projects/new/'
string: 'newEntry'
string: "[[:$ts::label=Create New Project::link=$newUrl:]]"
string: '%%serverPath%%projects/history/'
string: 'viewHistory'
string: "[[:theme::submenu::label=History::link=$histUrl:]]"
string: 'projects'
string: 'projects_project'
string: 'edit'
string: '%%serverPath%%projects/editabstract/'
string: 'editProject'
string: "[[:$ts::label=Edit This Project::link="
string: ":]]"
string: 'admin'
string: '%%serverPath%%projects/confirmdelete/UID_'
string: 'delProject'
string: "[[:$ts::label=Delete This Project::link=$delUrl:]]"
string: 'editCurrentProject'
string: ''
string: 'viewCurrentProject'
string: ''
string: 'editProjectUrl'
string: 'editProjectUrl'
string: ''
string: 'viewProjectUrl'
string: 'newEntry'
string: ''
string: 'modules/projects/views/menu.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/projects/views/membercount.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	return number of members in project
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: projectUID - UID pf project to count members for [string]
comment: //% return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check permissions and arguments
comment: //----------------------------------------------------------------------------------------------
comment: //$sql = "select count(UID) as memberCount from Projects_Membership "
comment: //	 . "where projectUID='" . $args['projectUID'] . "' and role != 'asked'";
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/projects/models/membership.mod.php'
string: 'modules/projects/models/revision.mod.php'
string: 'modules/projects/models/project.mod.php'
string: '0'
string: 'projectUID'
string: 'raUID'
string: 'projectUID'
string: 'raUID'
string: ''
string: 'projects'
string: 'projects_project'
string: 'show'
string: ''
string: "projectUID='"
string: "'"
string: "role != 'asked'"
string: 'projects_membership'
string: ''

<b>scanning file: /var/www/an2google/trunk/modules/projects/views/listuserprojectsnav.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	list all projects which a user belongs to (formatted for nav)
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: userUID - UID of a user [string]
comment: //% return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and auth
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	get list projects by checking memberships
comment: //----------------------------------------------------------------------------------------------
comment: // this user
comment: // only confirmed
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/projects/models/membership.mod.php'
string: 'modules/projects/models/revision.mod.php'
string: 'modules/projects/models/project.mod.php'
string: ''
string: 'public'
string: '[[:users::pleaselogin:]]'
string: 'userUID'
string: "userUID='"
string: 'userUID'
string: "'"
string: "(role='admin' OR role='member')"
string: 'projects_membership'
string: '*'
string: 'joined'
string: "[[:projects::summarynav::projectUID="
string: 'projectUID'
string: ":]]\n"

<b>scanning file: /var/www/an2google/trunk/modules/projects/views/listsamembersanav.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	list projects with the same members as this one
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: UID - UID of a project [string]
comment: //opt: projectUID - overrides UID [string]
comment: //opt: num - maximum number of projects to show, default is 10 [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and auth
comment: //----------------------------------------------------------------------------------------------
comment: //if (false == $user-&gt;authHas('projects', 'projects_project', 'show', $args['UID'])){return '';}
comment: //----------------------------------------------------------------------------------------------
comment: //	get all members of this project
comment: //----------------------------------------------------------------------------------------------
comment: // members of this project
comment: // only those who are confirmed
comment: //----------------------------------------------------------------------------------------------
comment: //	get all projects belonging to these members, and count overlap of members
comment: //----------------------------------------------------------------------------------------------
comment: // same member
comment: // but not this project
comment: // only confirmed
comment: //------------------------------------------------------------------------------------------
comment: //	collect project UIDs in an array, counting the number of times they show up
comment: //------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	sort according to memebrship overlap (lots of common members -&gt; top of list)
comment: //----------------------------------------------------------------------------------------------
comment: //$html .= "&lt;small&gt;score: $count&lt;/small&gt;&lt;br/&gt;\n";
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/projects/models/membership.mod.php'
string: 'modules/projects/models/project.mod.php'
string: ''
string: 'public'
string: '[[:users::pleaselogin:]]'
string: 'projectUID'
string: 'UID'
string: 'projectUID'
string: 'UID'
string: ''
string: 'limit'
string: 'limit'
string: 'projects_project'
string: 'UID'
string: ''
string: "projectUID='"
string: 'UID'
string: "'"
string: "(role='admin' OR role='member')"
string: 'projects_membership'
string: '*'
string: ''
string: ''
string: ''
string: "userUID='"
string: 'userUID'
string: "'"
string: "projectUID!='"
string: 'UID'
string: "'"
string: "(role='admin' OR role='member')"
string: 'projects_membership'
string: '*'
string: ''
string: ''
string: ''
string: 'projectUID'
string: 'projectUID'
string: 'projectUID'
string: 'UID'
string: "[[:projects::summarynav::projectUID="
string: ":]]\n"

<b>scanning file: /var/www/an2google/trunk/modules/projects/views/listprojectsnav.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	list recent projects in the nav
comment: //--------------------------------------------------------------------------------------------------
comment: //opt: num - max number to display (default is 20) [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	permissions and arguments
comment: //----------------------------------------------------------------------------------------------
comment: //$sql = "select * from Projects_Project order by createdOn DESC limit " . $db-&gt;addMarkup($num);
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/projects/models/membership.mod.php'
string: 'modules/projects/models/revision.mod.php'
string: 'modules/projects/models/project.mod.php'
string: ''
string: 'num'
string: 'num'
string: 'projects_project'
string: '*'
string: ''
string: 'createdOn DESC'
string: 'modules/projects/views/summarynav.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/projects/views/listmembersnav.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	list project members for the nav (300 px wide)
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - recordAlias or UID or projects entry [string]
comment: //opt: editmode - set to yes to show 'remove member' links [string]
comment: //opt: projectUID - overrides raUID [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check permissions and arguments
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/projects/models/membership.mod.php'
string: 'modules/projects/models/project.mod.php'
string: 'no'
string: ''
string: 'public'
string: '[[:users::pleaselogin:]]'
string: 'editmode'
string: 'editmode'
string: 'projectUID'
string: 'raUID'
string: 'projectUID'
string: 'raUID'
string: 'raUID'
string: 'projects'
string: 'projects_project'
string: 'show'
string: ''
string: 'projects'
string: 'projects_project'
string: 'administer'
string: "[[:users::summarynav::userUID="
string: "::extra=("
string: ")::target=_parent:]]\n"
string: 'yes'
string: "%%serverPath%%projects/editmembers/removemember_"
string: "/"
string: "&lt;a href='"
string: "'&gt;[ remove member &amp;gt;&amp;gt; ]&lt;/a&gt;&lt;br/&gt;"

<b>scanning file: /var/www/an2google/trunk/modules/projects/views/listall.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	list all (TODO: pagination, etc)
comment: //--------------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/projects/models/membership.mod.php'
string: 'modules/projects/models/revision.mod.php'
string: 'modules/projects/models/project.mod.php'
string: "select * from Projects_Project order by createdOn DESC"
string: ''
string: "[[:projects::summary::raUID="
string: 'UID'
string: ":]]"

<b>scanning file: /var/www/an2google/trunk/modules/projects/views/image.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	find the project's logo/picture (300px) or a blank image
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - recordAlias or UID or projects entry [string]
comment: //opt: projectUID - overrides raUID [string]
comment: //opt: size - width100, width200, width300, width570, thumb, thumbsm or thumb90 [string]
comment: //opt: link - link to larger image (yes|no) [string]
comment: // no images found for this project
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/projects/models/membership.mod.php'
string: 'modules/projects/models/revision.mod.php'
string: 'modules/projects/models/project.mod.php'
string: 'width300'
string: 'yes'
string: 'projectUID'
string: 'raUID'
string: 'projectUID'
string: 'raUID'
string: 'link'
string: 'no'
string: 'no'
string: 'size'
string: 'size'
string: 'thumb'
string: 'thumb'
string: 'size'
string: 'thumbsm'
string: 'thumbsm'
string: 'size'
string: 'thumb90'
string: 'thumb90'
string: 'size'
string: 'width100'
string: 'width100'
string: 'size'
string: 'width200'
string: 'width200'
string: 'size'
string: 'width300'
string: 'width300'
string: 'size'
string: 'width570'
string: 'width570'
string: 'projects'
string: 'raUID'
string: 'raUID'
string: "&lt;img src='/themes/clockface/unavailable/"
string: ".jpg' border='0'&gt;"
string: 'yes'
string: "&lt;a href='/images/show/"
string: 'alias'
string: "'&gt;"
string: "&lt;img src='/images/"
string: "/"
string: "' border='0' alt='"
string: "'&gt;&lt;/a&gt;"
string: "&lt;img src='/images/"
string: "/"
string: "' border='0' alt='"
string: "'&gt;"

<b>scanning file: /var/www/an2google/trunk/modules/projects/views/historynav.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	history summary formatted for nav // TODO: pagination
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: UID - UID of a project [string]
comment: //opt: num - number of recent entries to show, default is 30 (int) [string]
comment: //opt: pageNo - results page to show, from 1, default is 1 (int)  [string]
comment: //opt: label - label of navtitlebox [string]
comment: //%	default results page to start from (first) [int]
comment: //%	default number of items to show per page [int]
comment: //%	total number of revisions to this item [int]
comment: //%	return value [string]
comment: //%	label of navtitlebox [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: more permission options
comment: //----------------------------------------------------------------------------------------------
comment: //	count all revisions to this article
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: add any other conditions here (namespace, etc)
comment: //----------------------------------------------------------------------------------------------
comment: //	load a page of results from the database and make the block
comment: //----------------------------------------------------------------------------------------------
comment: //if ('' == trim($ext['reason'])) { $ext['reason'] = "&lt;i&gt;(no reason given)&lt;/i&gt;"; }
comment: //----------------------------------------------------------------------------------------------
comment: //	add meta and navigation elements
comment: //----------------------------------------------------------------------------------------------
comment: //$linkAll = "&lt;a href='%%serverPath%%projects/history/" . $model-&gt;projectUID . "'&gt;[see all]&lt;/a&gt;";
comment: //$html .= "&lt;b&gt;Total revisions:&lt;/b&gt; $totalItems&lt;br/&gt;\n";
comment: // TODO: sanitize label
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/projects/models/project.mod.php'
string: 'modules/projects/models/revision.mod.php'
string: ''
string: ''
string: 'UID'
string: '(UID not given)'
string: 'num'
string: 'num'
string: 'pageNo'
string: 'pageNo'
string: 'label'
string: 'label'
string: 'UID'
string: '(no such article)'
string: 'projects'
string: 'projects_project'
string: 'show'
string: ''
string: "projectUID='"
string: "'"
string: 'projects_revision'
string: 'projects_revision'
string: '*'
string: 'editedOn DESC'
string: 'modules/projects/views/revisionsummarynav.block.php'
string: ''
string: ''
string: "[[:theme::navtitlebox::label="
string: "::toggle=divHistoryNav:]]\n"
string: "&lt;div id='divHistoryNav'&gt;\n"
string: "&lt;/div&gt;\n"
string: "&lt;br/&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/projects/views/history.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	history summary formatted for nav // TODO: pagination
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: UID - UID of a Projects_Project object [string]
comment: //opt: num - number of recent entries to show, default is 30 (int) [string]
comment: //opt: pageNo - results page to show, from 1, default is 1 (int)  [string]
comment: //%	default results page to start from (first) [int]
comment: //%	default number of items to show per page [int]
comment: //%	total number of revisions to this item [int]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: more permission options
comment: //----------------------------------------------------------------------------------------------
comment: //	count all revisions to this article
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: add any other conditions here (namespace, etc)
comment: //----------------------------------------------------------------------------------------------
comment: //	load a page of results from the database and make the block
comment: //----------------------------------------------------------------------------------------------
comment: //	$sql = "select * from Projects_Revision "
comment: //		 . "where refUID='" . sqlMarkup($args['UID']) . "' "
comment: //		 . "order by editedOn DESC limit $num";
comment: //projects module does not use a reason field
comment: //if (trim($ext['reason']) != '') { $ext['reason'] = "&lt;i&gt;(none given)&lt;/i&gt;"; }
comment: //----------------------------------------------------------------------------------------------
comment: //	add meta and navigation elements
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/projects/models/project.mod.php'
string: 'modules/projects/models/revision.mod.php'
string: ''
string: 'UID'
string: '(UID not given)'
string: 'num'
string: 'num'
string: 'pageNo'
string: 'pageNo'
string: 'UID'
string: '(no such article)'
string: 'projects'
string: 'projects_project'
string: 'show'
string: ''
string: "projectUID='"
string: "'"
string: 'projects_revision'
string: 'projects_revision'
string: '*'
string: 'editedOn DESC'
string: 'modules/projects/views/revisionsummary.block.php'
string: '%%serverPath%%projects/history/'
string: "[[:theme::pagination::page=$pageNo::total=$totalPages::link=$link:]]\n"
string: "&lt;b&gt;Total revisions:&lt;/b&gt; $totalItems &lt;br/&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/projects/views/editsectiontable.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	form for adding new sections
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - recordAlias or UID or projects entry [string]
comment: //opt: projectUID - overrides raUID [string]
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/projects/models/membership.mod.php'
string: 'modules/projects/models/revision.mod.php'
string: 'modules/projects/models/project.mod.php'
string: 'projects'
string: 'projects_project'
string: 'edit'
string: 'TODO:UIDHERE'
string: 'projectUID'
string: 'raUID'
string: 'projectUID'
string: 'raUID'
string: ''
string: 'raUID'
string: "&lt;table noborder&gt;"
string: '/projects/edit/'
string: '#s'
string: '/projects/editsection/section_'
string: '/'
string: '/projects/delsection/section_'
string: '/'
string: '/projects/movesection/move_up/section_'
string: '/'
string: '/projects/movesection/move_down/section_'
string: '/'
string: "\t&lt;tr&gt;\n"
string: "\t\t&lt;td&gt;&lt;a href='"
string: "'&gt;"
string: 'weight'
string: "&lt;/a&gt;&lt;/td&gt;"
string: "\t\t&lt;td&gt;&lt;a href='"
string: "'&gt;"
string: 'title'
string: "&lt;/a&gt;&lt;/td&gt;"
string: "\t\t&lt;td&gt;&lt;a href='"
string: "'&gt;[edit]&lt;/a&gt;&lt;/td&gt;"
string: "\t\t&lt;td&gt;&lt;a href='"
string: "'&gt;[delete]&lt;/a&gt;&lt;/td&gt;"
string: "\t\t&lt;td&gt;&lt;a href='"
string: "'&gt;[move up]&lt;/a&gt;&lt;/td&gt;"
string: "\t\t&lt;td&gt;&lt;a href='"
string: "'&gt;[move down]&lt;/a&gt;&lt;/td&gt;"
string: "\t&lt;/tr&gt;\n"
string: "&lt;/table&gt;"

<b>scanning file: /var/www/an2google/trunk/modules/projects/views/editsectionform.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	form for editing an article section
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - recordAlias or UID or projects entry [string]
comment: //arg: sectionUID - UID of a section [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check permissions and arguments
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/projects/models/membership.mod.php'
string: 'modules/projects/models/revision.mod.php'
string: 'modules/projects/models/project.mod.php'
string: ''
string: 'raUID'
string: ''
string: 'sectionUID'
string: ''
string: 'raUID'
string: ''
string: 'projects'
string: 'projects_project'
string: 'edit'
string: ''
string: 'sectionUID'
string: ''
string: 'sectionUID'
string: 'contentJs64'
string: 'contentJs64'
string: 'content'
string: 'modules/projects/views/editsectionform.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/projects/views/editmembersnav.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	nav box (iframe) for editing a project's membership
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: UID - UID or recordAlias of a project [string]
comment: //opt: projectUID - overrides raUID [string]
comment: //% return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
string: 'modules/projects/models/membership.mod.php'
string: 'modules/projects/models/project.mod.php'
string: ''
string: 'projectUID'
string: 'raUID'
string: 'projectUID'
string: 'raUID'
string: ''
string: 'raUID'
string: ''
string: 'projects'
string: 'projects_project'
string: 'edit'
string: ''
string: "&lt;iframe name='editProjectMembers' id='editpm'"
string: " src='%%serverPath%%projects/editmembers/"
string: "'"
string: " width='300' height='120' frameborder='no'&gt;&lt;/iframe&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/projects/views/editindexnav.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	nav box (iframe) for editing a project's index
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: UID - UID or recordAlias of a project [string]
comment: //opt: projectUID - overrides raUID [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //if ($user-&gt;authHas('projects', 'projects_project', 'show', 'TODO:UIDHERE') == false) { return false; }
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/projects/models/membership.mod.php'
string: 'modules/projects/models/revision.mod.php'
string: 'modules/projects/models/project.mod.php'
string: ''
string: 'projectUID'
string: 'raUID'
string: 'projectUID'
string: 'raUID'
string: ''
string: 'raUID'
string: ''
string: "&lt;iframe name='editProjectIndex' id='editpi'"
string: " src='%%serverPath%%projects/editindex/"
string: "'"
string: " width='300' height='120' frameborder='no'&gt;&lt;/iframe&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/projects/views/editindex.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	list revisions made to a project
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - UID or recordAlias of a project [string]
comment: //opt: projectUID - overrides raUID [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	link to abstract
comment: //----------------------------------------------------------------------------------------------
comment: // two blank cols
comment: //----------------------------------------------------------------------------------------------
comment: //	links to sections
comment: //----------------------------------------------------------------------------------------------
comment: //$rmImg = "&lt;img src='". $imgPath ."btn-del.png' $imgStyle alt='delete'&gt;";
comment: //$rmLink = "%%serverPath%%projects/editindex/crm_" . $section['UID'] . '/' . $model-&gt;alias;
comment: //$cols[] = "&lt;a href='" . $rmLink . "'&gt;$rmImg&lt;/a&gt;";
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/projects/models/membership.mod.php'
string: 'modules/projects/models/revision.mod.php'
string: 'modules/projects/models/project.mod.php'
string: ''
string: 'projectUID'
string: 'raUID'
string: 'projectUID'
string: 'raUID'
string: ''
string: 'raUID'
string: 'projects'
string: 'projects_project'
string: 'edit'
string: ''
string: "%%serverPath%%projects/editabstract/"
string: "&lt;a href='"
string: "' target='_parent'&gt;Title / Abstract&lt;/a&gt;"
string: ''
string: ''
string: "%%serverPath%%/themes/clockface/images/"
string: "height='10' border='0'"
string: "&lt;img src='"
string: "btn-up.png' $imgStyle alt='move up'&gt;"
string: "&lt;img src='"
string: "btn-down.png' $imgStyle alt='move down'&gt;"
string: "%%serverPath%%projects/editindex/dec_"
string: 'UID'
string: '/'
string: "%%serverPath%%projects/editindex/inc_"
string: 'UID'
string: '/'
string: "%%serverPath%%projects/editsection/section_"
string: 'UID'
string: '/'
string: "&lt;a href='"
string: "' target='_parent'&gt;"
string: 'title'
string: "&lt;/a&gt;"
string: "&lt;a href='"
string: "'&gt;$upImg&lt;/a&gt;"
string: "&lt;a href='"
string: "'&gt;$dnImg&lt;/a&gt;"

<b>scanning file: /var/www/an2google/trunk/modules/projects/views/editabstractform.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	form for editing the abstract
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - recordAlias or UID or projects entry [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //if (false == $model-&gt;isMember($user-&gt;UID)) { return ''; }
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/projects/models/membership.mod.php'
string: 'modules/projects/models/revision.mod.php'
string: 'modules/projects/models/project.mod.php'
string: ''
string: 'raUID'
string: ''
string: 'raUID'
string: 'projects'
string: 'projects_project'
string: 'edit'
string: ''
string: 'abstractJs64'
string: 'abstractJs64'
string: 'abstract'
string: 'modules/projects/views/editabstractform.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/projects/views/askjoinnav.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	ask to join a project
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - UID or recordAlias of a project [string]
comment: //opt: projectUID - overrides raUID [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check permissions and arguments
comment: //----------------------------------------------------------------------------------------------	
comment: //----------------------------------------------------------------------------------------------
comment: //	determine if user is a member of project already
comment: //----------------------------------------------------------------------------------------------
comment: //%	is the user already a memebr of this project? [bool]
comment: //%	has the user already asked to join this project? [bool]
comment: //	can't ask to join if you are already a member
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/projects/models/membership.mod.php'
string: 'modules/projects/models/project.mod.php'
string: ''
string: 'projectUID'
string: 'raUID'
string: 'projectUID'
string: 'raUID'
string: 'raUID'
string: ''
string: 'projects'
string: 'projects_project'
string: 'show'
string: ''
string: ''
string: 'asked'
string: "[[:theme::navtitlebox::label=Ask to Join Project:]]\n"
string: "You have asked to join this project.&lt;br/&gt;&lt;br/&gt;"
string: 'userUID'
string: 'userName'
string: 'projectUID'
string: 'modules/projects/views/addme.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/projects/views/allimages.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	all images of a project (default 300px wide)
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - recordAlias or UID or projects entry [string]
comment: //opt: projectUID - overrides raUID [string]
comment: //opt: size - size to display images (default is width300) [string]
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/projects/models/membership.mod.php'
string: 'modules/projects/models/revision.mod.php'
string: 'modules/projects/models/project.mod.php'
string: 'projectUID'
string: 'raUID'
string: 'projectUID'
string: 'raUID'
string: 'width300'
string: 'size'
string: 'size'
string: 'raUID'
string: "select * from Images_Image where refModule='projects' and refUID='"
string: "' order by weight"
string: ''
string: "&lt;a href='/images/show/"
string: 'alias'
string: "'&gt;"
string: "&lt;img src='/images/"
string: "/"
string: 'alias'
string: "' border='0' alt='"
string: "'&gt;&lt;/a&gt;"

<b>scanning file: /var/www/an2google/trunk/modules/projects/views/addsectionform.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	form for adding new sections
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - recordAlias or UID or projects entry [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/projects/models/membership.mod.php'
string: 'modules/projects/models/revision.mod.php'
string: 'modules/projects/models/project.mod.php'
string: ''
string: 'raUID'
string: ''
string: 'raUID'
string: 'projects'
string: 'projects_project'
string: 'edit'
string: ''
string: ''
string: 'modules/projects/views/addsectionform.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/projects/views/addmemberform.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	form to add project members
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - recordAlias or UID or projects entry [string]
comment: //opt: projectUID - overrides raUID [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: // no permission
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/projects/models/membership.mod.php'
string: 'modules/projects/models/revision.mod.php'
string: 'modules/projects/models/project.mod.php'
string: ''
string: 'projectUID'
string: 'raUID'
string: 'projectUID'
string: 'raUID'
string: ''
string: 'raUID'
string: ''
string: 'projects'
string: 'projects_project'
string: 'administer'
string: ''
string: 'raUID'
string: 'raUID'
string: 'modules/projects/views/addmemberform.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/projects/models/revision.mod.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	object to represent project revisions
comment: //--------------------------------------------------------------------------------------------------
comment: //+	since the projects module is derived from the wiki module, changes to wiki revisions model
comment: //+	should be copied here.
comment: //----------------------------------------------------------------------------------------------
comment: //	member variables (as retieved from database)
comment: //----------------------------------------------------------------------------------------------
comment: //_	currently loaded database record [array]
comment: //_	database table definition [array]
comment: //_	set to true when an object has been loaded [bool]
comment: //_ UID [string]
comment: //_ varchar(33) [string]
comment: //_ title [string]
comment: //_ wyswyg [string]
comment: //_ plaintext [string]
comment: //_ varchar(255) [string]
comment: //_ datetime [string]
comment: //_ ref:Users_User [string]
comment: //_ datetime [string]
comment: //_ ref:Users_User [string]
comment: //----------------------------------------------------------------------------------------------
comment: //. constructor
comment: //----------------------------------------------------------------------------------------------
comment: //opt: UID - UID of a Revision object [string]
comment: // initialise table schema
comment: // try load an object from the database
comment: // check if we did
comment: // make new object
comment: // initialize
comment: // set default title
comment: //----------------------------------------------------------------------------------------------
comment: //. load an object from the db given its UID
comment: //----------------------------------------------------------------------------------------------
comment: //arg: UID - UID of a Revision object [string]
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //. load Revision object serialized as an associative array
comment: //----------------------------------------------------------------------------------------------
comment: //arg: ary - associative array of members and values [array]
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //. save the current object to database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string on success, html report of errors on failure [string]
comment: //: $db-&gt;save(...) will raise an object_updated event if successful
comment: //----------------------------------------------------------------------------------------------
comment: //. check that object is correct before allowing it to be stored in database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string if object passes, warning message if not [string]
comment: //----------------------------------------------------------------------------------------------
comment: //. database table definition and content versioning
comment: //----------------------------------------------------------------------------------------------
comment: //returns: information for constructing SQL queries [array]
comment: //table columns
comment: //these fields will be indexed
comment: //revision history will be not kept for any fields
comment: //----------------------------------------------------------------------------------------------
comment: //. serialize this object to an array
comment: //----------------------------------------------------------------------------------------------
comment: //returns: associative array of all members which define this instance [array]
comment: //----------------------------------------------------------------------------------------------
comment: //.	make an extended array of all data a view will need
comment: //----------------------------------------------------------------------------------------------
comment: //returns: extended array of member variables and metadata [array]
comment: // view
comment: //------------------------------------------------------------------------------------------
comment: //	load as project and convert to HTML
comment: //------------------------------------------------------------------------------------------		
comment: //------------------------------------------------------------------------------------------
comment: //	links
comment: //------------------------------------------------------------------------------------------
comment: // TODO: action to view a single revision
comment: //------------------------------------------------------------------------------------------
comment: //	strandardise date format to previous website
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	done
comment: //------------------------------------------------------------------------------------------		
comment: //----------------------------------------------------------------------------------------------
comment: //. delete current object from the database
comment: //----------------------------------------------------------------------------------------------
comment: //: $db-&gt;delete(...) will raise an object_deleted event on success [bool]
comment: //returns: true on success, false on failure [bool]
comment: // nothing to do
string: ''
string: ''
string: 'New Revision '
string: 'UID'
string: 'projectUID'
string: 'title'
string: 'abstract'
string: 'content'
string: 'reason'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: ''
string: "Database error.&lt;br/&gt;\n"
string: ''
string: ''
string: ''
string: "No UID.&lt;br/&gt;\n"
string: 'module'
string: 'projects'
string: 'model'
string: 'projects_revision'
string: 'archive'
string: 'no'
string: 'fields'
string: 'UID'
string: 'VARCHAR(33)'
string: 'projectUID'
string: 'VARCHAR(33)'
string: 'title'
string: 'VARCHAR(255)'
string: 'abstract'
string: 'TEXT'
string: 'content'
string: 'TEXT'
string: 'reason'
string: 'VARCHAR(255)'
string: 'createdOn'
string: 'DATETIME'
string: 'createdBy'
string: 'VARCHAR(33)'
string: 'editedOn'
string: 'DATETIME'
string: 'editedBy'
string: 'VARCHAR(33)'
string: 'indices'
string: 'UID'
string: '10'
string: 'projectUID'
string: '10'
string: 'createdOn'
string: ''
string: 'createdBy'
string: '10'
string: 'editedOn'
string: ''
string: 'editedBy'
string: '10'
string: 'nodiff'
string: 'UID'
string: 'projectUID'
string: 'title'
string: 'abstract'
string: 'content'
string: 'reason'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: 'UID'
string: 'projectUID'
string: 'title'
string: 'abstract'
string: 'content'
string: 'reason'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: 'viewUrl'
string: ''
string: 'viewLink'
string: ''
string: 'projectUID'
string: 'alias'
string: 'status'
string: 'finishedOn'
string: 'projects'
string: 'projects_revision'
string: 'show'
string: 'viewUrl'
string: '%%serverPath%%projects/showrevision/'
string: 'UID'
string: 'viewLink'
string: "&lt;a href='%%serverPath%%projects/showrevision/"
string: 'UID'
string: "'&gt;"
string: "[read on &amp;gt;&amp;gt;]&lt;/a&gt;"
string: 'editedOnLong'
string: 'jS F, Y'
string: 'editedOn'

<b>scanning file: /var/www/an2google/trunk/modules/projects/models/project.mod.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	object for managing projects
comment: //--------------------------------------------------------------------------------------------------
comment: //+	Projects are a special type of document co-created by several users.  All users who are members
comment: //+	of the project have edit permissions on it and can edit text, add images, etc.
comment: //+	A projects states may be 'open', 'finished' or 'cancelled'.  The user who started a project
comment: //+	may add members and can set the project's status.
comment: //+
comment: //+	On completion, a notification is generated for friends and classmates of all members.
comment: //+	Members can edit the abstract and content of the project but only the user who started the
comment: //+	project may edit the title.  The content of a project is divided into 'sections' which are 
comment: //+	edited independantly.  Same as wiki articles.
comment: //+
comment: //+	structure of content:
comment: //+  &lt;article&gt;
comment: //+	   &lt;section&gt;
comment: //+		&lt;UID&gt;1239877129&lt;/UID&gt;
comment: //+	    &lt;title&gt;Microfauna&lt;/title&gt;
comment: //+	    &lt;weight&gt;3&lt;/weight&gt;
comment: //+	    &lt;content&gt;&lt;![CDATA[This is escaped HTML]]&gt;&lt;/content&gt;
comment: //+	  &lt;/section&gt;
comment: //+  &lt;/article&gt;
comment: //----------------------------------------------------------------------------------------------
comment: //	member variables (as retieved from database)
comment: //----------------------------------------------------------------------------------------------
comment: //_	currently loaded database record [array]
comment: //_	database table definition [array]
comment: //_	set to true when an object has been loaded [bool]
comment: //_ UID [string]
comment: //_ title [string]
comment: //_ wyswyg [string]
comment: //_ plaintext [string]
comment: //_ varchar(10) [string]
comment: //_ datetime [string]
comment: //_ datetime [string]
comment: //_ ref:Users_User [string]
comment: //_ datetime [string]
comment: //_ ref:Users_User [string]
comment: //_ alias [string]
comment: //_	the sections of this document [array]
comment: //_	set to true when page sections have been loaded [bool]
comment: //_	range of serialized Projects_Membership objects [array]
comment: //_	set to true when members have been loaded [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //. constructor
comment: //----------------------------------------------------------------------------------------------
comment: //opt: raUID - UID or alias of a Project object [string]
comment: // initialise table schema
comment: // try load an object from the database
comment: // check if we did
comment: // make new object
comment: // initialize
comment: // set default title
comment: //----------------------------------------------------------------------------------------------
comment: //. load an object from the database given its UID or an alias
comment: //----------------------------------------------------------------------------------------------
comment: //arg: raUID - UID or alias of a Project object [string]
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //. load Project object serialized as an associative array
comment: //----------------------------------------------------------------------------------------------
comment: //arg: ary - associative array of members and values [array]
comment: //returns: true on success, false on failure [bool]
comment: //if (false == $db-&gt;validate($ary, $this-&gt;dbSchema)) { return false; }
comment: //----------------------------------------------------------------------------------------------
comment: //.	save a record
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //. save the current object to database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string on success, html report of errors on failure [string]
comment: //: $db-&gt;save(...) will raise an object_updated event if successful
comment: // ensure that the user who started project is a member
comment: //----------------------------------------------------------------------------------------------
comment: //. check that object is correct before allowing it to be stored in database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string if object passes, warning message if not [string]
comment: //----------------------------------------------------------------------------------------------
comment: //. database table definition and content versioning
comment: //----------------------------------------------------------------------------------------------
comment: //returns: information for constructing SQL queries [array]
comment: //table columns
comment: //these fields will be indexed
comment: //revision history will be kept for these fields
comment: //----------------------------------------------------------------------------------------------
comment: //. serialize this object to an array
comment: //----------------------------------------------------------------------------------------------
comment: //returns: associative array of all members which define this instance [array]
comment: //----------------------------------------------------------------------------------------------
comment: //.	make an extended array of all data a view will need
comment: //----------------------------------------------------------------------------------------------
comment: //returns: extended array of member variables and metadata [array]
comment: //------------------------------------------------------------------------------------------
comment: //	permissions
comment: //------------------------------------------------------------------------------------------
comment: // TODO: decide whether project admins can delete a project
comment: // TODO: check full range of permissions
comment: //------------------------------------------------------------------------------------------
comment: //	links
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	abstract 
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	byline
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	index
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	content
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	abstract marked up for wyswyg editor
comment: //------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //.	make extended array of section data
comment: //----------------------------------------------------------------------------------------------
comment: //arg: sectionUID - UID of a section [string]
comment: //returns: associative array of section properties [array]
comment: //----------------------------------------------------------------------------------------------
comment: //. delete current object from the database
comment: //----------------------------------------------------------------------------------------------
comment: //: $db-&gt;delete(...) will raise an object_deleted event on success [bool]
comment: //returns: true on success, false on failure [bool]
comment: // nothing to do
comment: //==============================================================================================
comment: //	SECTIONS
comment: //==============================================================================================
comment: //----------------------------------------------------------------------------------------------
comment: //.	expand sections
comment: //----------------------------------------------------------------------------------------------
comment: //returns: number of sections [int]
comment: // 
comment: // children of root node
comment: //print_r($nsIds);
comment: //print_r($ent);
comment: //TODO: use KXmlDocument to fill array
comment: //----------------------------------------------------------------------------------------------
comment: //.	collapse sections
comment: //----------------------------------------------------------------------------------------------
comment: //$sF = explode('|', $this-&gt;sectionFields);
comment: //----------------------------------------------------------------------------------------------
comment: //.	sort sections by weight
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //.	add a section
comment: //----------------------------------------------------------------------------------------------
comment: //arg: title - section title [string]
comment: //arg: weight - weight of this section [int]
comment: //----------------------------------------------------------------------------------------------
comment: //.	delete a section
comment: //----------------------------------------------------------------------------------------------
comment: //arg: rmUID - UID of the section to be removed [string]
comment: //returns: true if the section was deleted, false if not found [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //.	find the section with the largest weight
comment: //----------------------------------------------------------------------------------------------
comment: //returns: weight of the heaviest section [int]
comment: //----------------------------------------------------------------------------------------------
comment: //.	increase a section's weight
comment: //----------------------------------------------------------------------------------------------
comment: //arg: sectionUID - UID of a section [string]
comment: //returns: true on success, false if unchanged [bool]
comment: // this section's weight
comment: // already max weight
comment: // dec section below
comment: // inc self
comment: //----------------------------------------------------------------------------------------------
comment: //.	decrease a section's weight
comment: //----------------------------------------------------------------------------------------------
comment: //arg: sectionUID - UID of a section [string]
comment: //returns: true if decremented, false if not [bool]
comment: // this section's weight
comment: // inc section above
comment: // inc self
comment: //----------------------------------------------------------------------------------------------
comment: //.	determine if a given user is an admin or member of a project
comment: //----------------------------------------------------------------------------------------------
comment: //arg: userUID - UID of a user [string]
comment: //returns: true if the specified user has edit permissions on this project, else false [bool]
comment: //TODO: remove, use $user-&gt;authHas(...)
comment: //----------------------------------------------------------------------------------------------
comment: //.	convert to html for diff
comment: //----------------------------------------------------------------------------------------------
comment: //returns: project title, abstract and sections compiled into html [string]
comment: //==============================================================================================
comment: //	REVISIONS
comment: //==============================================================================================
comment: //----------------------------------------------------------------------------------------------
comment: //.	save a revision
comment: //----------------------------------------------------------------------------------------------
comment: //returns: empty string on succes, html report on failure [string]
comment: //----------------------------------------------------------------------------------------------
comment: //.	get URL of this project (deprecated) //TODO: find out if anything still uses this
comment: //----------------------------------------------------------------------------------------------
comment: //returns: URL of current project [string]
comment: //----------------------------------------------------------------------------------------------
comment: //.	make an link to this project (deprecated) //TODO: find out if anything still uses this
comment: //----------------------------------------------------------------------------------------------
comment: //returns: an html anchor tag [string]
comment: //==============================================================================================
comment: //	MEMBERSHIPS	
comment: //==============================================================================================
comment: //----------------------------------------------------------------------------------------------
comment: //.	load a memberships of this project into $this-&gt;members
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //.	add a member to the project, or change the role of an existing member
comment: //----------------------------------------------------------------------------------------------
comment: //arg: userUID - UID of a user [string]
comment: //arg: role - role in the project (admin|member) [string]
comment: //returns: true on success, false on failure [bool]
comment: //------------------------------------------------------------------------------------------
comment: //	check user's role in the project if an existing member
comment: //------------------------------------------------------------------------------------------
comment: // reload memberships
comment: //------------------------------------------------------------------------------------------	
comment: //	create membership if one does not already exist
comment: //------------------------------------------------------------------------------------------	
comment: // reload memberships
comment: //----------------------------------------------------------------------------------------------
comment: //.	remove a member from the project
comment: //----------------------------------------------------------------------------------------------
comment: //arg: userUID - UID of a user to remove from the project [string]
comment: //returns: true on success, false on failure [bool]
comment: // reload memberships
comment: //----------------------------------------------------------------------------------------------
comment: //.	determine if a given user (UID) is a member of the project
comment: //----------------------------------------------------------------------------------------------
comment: //arg: userUID - UID of a user [string]
comment: //returns: membership record if a member, false if not [array][bool]
comment: //----------------------------------------------------------------------------------------------
comment: //.	determine if a given user (UID) is a member of the project
comment: //----------------------------------------------------------------------------------------------
comment: //arg: userUID - UID of a user [string]
comment: //returns: membership record if a member, false if not [array][bool]
comment: //----------------------------------------------------------------------------------------------
comment: //.	get all members of a project (exc. prospective), returns array of [userUID] =&gt; [role]
comment: //----------------------------------------------------------------------------------------------
comment: //opt: prospective - is true them embers who have asked are included [bool]
comment: //returns: array of memberships (userUID =&gt; role) [array]
comment: //% return value [array]
comment: //----------------------------------------------------------------------------------------------
comment: //.	get prospective members of a project, returns array of [userUID] =&gt; [role] 
comment: //----------------------------------------------------------------------------------------------
comment: //returns: array of membership applications (userUID =&gt; role) [array]
comment: //TODO: remove this entirely
comment: //% return value [array]
string: 'modules/projects/models/membership.mod.php'
string: 'modules/projects/models/revision.mod.php'
string: 'UID|title|weight|content'
string: '&lt;img&gt;&lt;b&gt;&lt;i&gt;&lt;a&gt;&lt;table&gt;&lt;tr&gt;&lt;td&gt;&lt;th&gt;&lt;ul&gt;&lt;ol&gt;&lt;li&gt;&lt;span&gt;&lt;p&gt;&lt;br&gt;&lt;font&gt;&lt;h1&gt;&lt;h2&gt;&lt;h3&gt;&lt;blockquote&gt;&lt;pre&gt;'
string: ''
string: ''
string: 'New Project '
string: 'open'
string: 'UID'
string: 'title'
string: 'abstract'
string: 'content'
string: 'status'
string: 'finishedOn'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: 'alias'
string: ''
string: 'admin'
string: 'projects'
string: 'projects_project'
string: "Database error.&lt;br/&gt;\n"
string: ''
string: ''
string: ''
string: "No UID.&lt;br/&gt;\n"
string: 'module'
string: 'projects'
string: 'model'
string: 'projects_project'
string: 'archive'
string: 'yes'
string: 'fields'
string: 'UID'
string: 'VARCHAR(33)'
string: 'title'
string: 'VARCHAR(255)'
string: 'abstract'
string: 'TEXT'
string: 'content'
string: 'TEXT'
string: 'status'
string: 'VARCHAR(10)'
string: 'finishedOn'
string: 'DATETIME'
string: 'createdOn'
string: 'DATETIME'
string: 'createdBy'
string: 'VARCHAR(33)'
string: 'editedOn'
string: 'DATETIME'
string: 'editedBy'
string: 'VARCHAR(33)'
string: 'alias'
string: 'VARCHAR(255)'
string: 'indices'
string: 'UID'
string: '10'
string: 'createdOn'
string: ''
string: 'createdBy'
string: '10'
string: 'editedOn'
string: ''
string: 'editedBy'
string: '10'
string: 'alias'
string: '10'
string: 'nodiff'
string: 'UID'
string: 'title'
string: 'abstract'
string: 'content'
string: 'status'
string: 'finishedOn'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: 'alias'
string: 'UID'
string: 'title'
string: 'abstract'
string: 'content'
string: 'status'
string: 'finishedOn'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: 'alias'
string: 'editUrl'
string: ''
string: 'editLink'
string: ''
string: 'viewUrl'
string: ''
string: 'viewLink'
string: ''
string: 'delUrl'
string: ''
string: 'delLink'
string: ''
string: 'newUrl'
string: ''
string: 'newLink'
string: ''
string: 'editAbstractUrl'
string: ''
string: 'editAbstractLink'
string: ''
string: 'projects'
string: 'projects_project'
string: 'edit'
string: 'admin'
string: 'projects'
string: 'projects_project'
string: 'show'
string: 'viewUrl'
string: '%%serverPath%%projects/'
string: 'viewLink'
string: "&lt;a href='"
string: 'viewUrl'
string: "'&gt;[read on &amp;gt;&amp;gt;]&lt;/a&gt;"
string: 'editUrl'
string: '%%serverPath%%projects/edit/'
string: 'editLink'
string: "&lt;a href='"
string: 'editUrl'
string: "'&gt;[edit]&lt;/a&gt;"
string: 'editAbstractUrl'
string: '%%serverPath%%projects/editabstract/'
string: 'editAbstractLink'
string: "&lt;a href='"
string: 'editAbstractUrl'
string: "'&gt;"
string: "[edit abstract]&lt;/a&gt;"
string: 'delUrl'
string: '%%serverPath%%projects/confirmdelete/UID_'
string: '/'
string: 'delLink'
string: "&lt;a href='"
string: 'delUrl'
string: "'&gt;[delete]&lt;/a&gt;"
string: 'projects'
string: 'projects_project'
string: 'new'
string: 'newUrl'
string: "%%serverPath%%projects/new/"
string: 'newLink'
string: "&lt;a href='"
string: 'newUrl'
string: "'&gt;[add new project]&lt;/a&gt;"
string: 'createdOnLong'
string: 'F nS Y'
string: 'createdOn'
string: 'editedOnLong'
string: 'F nS Y'
string: 'editedOn'
string: 'abstractHtml'
string: "&gt;\n"
string: "&gt;"
string: 'abstract'
string: 'abstractHtml'
string: "\n"
string: "&lt;br/&gt;\n"
string: 'abstractHtml'
string: 'summary'
string: 'abstract'
string: 'byline'
string: 'byline'
string: "[[:users::namelink::userUID="
string: ":]]"
string: 'byline'
string: ", \n"
string: 'byline'
string: 'indexHtml'
string: ''
string: "%%serverPath%%projects/"
string: 'alias'
string: "#s"
string: 'UID'
string: 'weight'
string: ". "
string: 'title'
string: 'indexHtml'
string: "&lt;a href='"
string: "'&gt;"
string: "&lt;/a&gt;&lt;br/&gt;\n"
string: 'contentHtml'
string: ''
string: ''
string: ''
string: '%%serverPath%%projects/editsection/'
string: 'section_'
string: 'UID'
string: '/'
string: 'alias'
string: "&lt;a href='"
string: "'&gt;[edit section]&lt;/a&gt;"
string: 'contentHtml'
string: "&lt;h3&gt;&lt;a name='s"
string: 'UID'
string: "'&gt;"
string: 'title'
string: "&lt;/a&gt;&lt;/h3&gt;\n"
string: 'content'
string: "\n"
string: 'abstract'
string: ''
string: 'abstract'
string: ' '
string: 'projectTitle'
string: 'title'
string: 'projectUID'
string: 'projectTitle'
string: 'sectionTitle'
string: 'title'
string: ''
string: '|'
string: 'UID'
string: 'title'
string: 'New Section'
string: 'weight'
string: '0'
string: 'content'
string: ''
string: 'type'
string: "UID"
string: 'UID'
string: 'value'
string: "title"
string: 'title'
string: 'value'
string: "weight"
string: 'weight'
string: 'value'
string: "content"
string: 'content'
string: 'value'
string: 'UID'
string: ''
string: 'content'
string: 'content'
string: ''
string: 'content'
string: '&lt;![CDATA[['
string: 'content'
string: ']]&gt;'
string: 'section'
string: "&lt;article&gt;\n$xml&lt;/article&gt;"
string: 'weight'
string: 'UID'
string: 'title'
string: 'weight'
string: 'content'
string: ''
string: 'UID'
string: 'weight'
string: 'weight'
string: 'weight'
string: 'weight'
string: 'weight'
string: 'weight'
string: 'weight'
string: 'weight'
string: 'weight'
string: 'weight'
string: 'weight'
string: 'admin'
string: 'admin'
string: 'member'
string: "&lt;h1&gt;"
string: "&lt;/h1&gt;"
string: "&lt;h2&gt;"
string: 'title'
string: "&lt;/h2&gt;"
string: 'content'
string: "&lt;p&gt;&lt;small&gt;weight: "
string: 'weight'
string: " uid: "
string: 'UID'
string: " title: "
string: 'title'
string: "&lt;/small&gt;&lt;/p&gt;"
string: "%%serverPath%%projects/"
string: "&lt;a href='"
string: "'&gt;"
string: "&lt;/a&gt;"
string: "projectUID='"
string: "'"
string: 'projects_membership'
string: '*'
string: 'users_user'
string: 'userUID'
string: ''
string: ''
string: 'User '
string: ' is not a member of this project.'
string: 'bad'
string: 'userUID'
string: 'userUID'
string: 'userUID'
string: 'admin'
string: 'role'
string: 'asked'
string: 'role'
string: 'userUID'
string: 'role'
string: 'asked'
string: 'role'
string: 'userUID'
string: 'role'

<b>scanning file: /var/www/an2google/trunk/modules/projects/models/membership.mod.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	index table (users &lt;-&gt; projects)
comment: //--------------------------------------------------------------------------------------------------
comment: //+	project members can all edit the project, but only the person who intiated the project may 
comment: //+	add members.
comment: //+
comment: //+	Member role may be:
comment: //+	- admin (can add members, edit project)
comment: //+	- member (can edit project)
comment: //----------------------------------------------------------------------------------------------
comment: //	member variables (as retieved from database)
comment: //----------------------------------------------------------------------------------------------
comment: //_	currently loaded database record [array]
comment: //_	database table definition [array]
comment: //_	set to true when an object has been loaded [bool]
comment: //_ UID [string]
comment: //_ varchar(33) [string]
comment: //_ varchar(33) [string]
comment: //_ varchar(10) [string]
comment: //_ datetime [string]
comment: //_ datetime [string]
comment: //_ ref:Users_User [string]
comment: //_ datetime [string]
comment: //_ ref:Users_User [string]
comment: //----------------------------------------------------------------------------------------------
comment: //. constructor
comment: //----------------------------------------------------------------------------------------------
comment: //opt: UID - UID of a Membership object [string]
comment: // initialise table schema
comment: // try load an object from the database
comment: // check if we did
comment: // make new object
comment: // initialize
comment: //----------------------------------------------------------------------------------------------
comment: //. load an object from the db given its UID
comment: //----------------------------------------------------------------------------------------------
comment: //arg: UID - UID of a Membership object [string]
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //.	load a record given project and user UIDs
comment: //----------------------------------------------------------------------------------------------
comment: //arg: projectUID - UID of a project [string]
comment: //arg: userUID - UID of a user [string]	
comment: //returns: true if record is found, false if not found [bool]
comment: //	$sql = "select * from Projects_Membership "
comment: //	 . "where projectUID='" . $db-&gt;addMarkup($projectUID) . "' "
comment: //	 . "and userUID='" . $db-&gt;addMarkup($userUID) . "'";		
comment: //----------------------------------------------------------------------------------------------
comment: //. load Membership object serialized as an associative array
comment: //----------------------------------------------------------------------------------------------
comment: //arg: ary - associative array of members and values [array]
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //. save the current object to database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string on success, html report of errors on failure [string]
comment: //: $db-&gt;save(...) will raise an object_updated event if successful
comment: //----------------------------------------------------------------------------------------------
comment: //.	verify - check that a record is correct before allowing it to be stored in the database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string if object passes, warning message if not [string]
comment: //----------------------------------------------------------------------------------------------
comment: //. database table definition and content versioning
comment: //----------------------------------------------------------------------------------------------
comment: //returns: information for constructing SQL queries [array]
comment: //table columns
comment: //these fields will be indexed
comment: //revision history will be kept for these fields
comment: //----------------------------------------------------------------------------------------------
comment: //. serialize this object to an array
comment: //----------------------------------------------------------------------------------------------
comment: //returns: associative array of all members which define this instance [array]
comment: //----------------------------------------------------------------------------------------------
comment: //. make an extended array of data views may need
comment: //----------------------------------------------------------------------------------------------
comment: //returns: associative array of members, metadata and partial views [array]
comment: //------------------------------------------------------------------------------------------
comment: //	links
comment: //------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //. delete current object from the database
comment: //----------------------------------------------------------------------------------------------
comment: //: $db-&gt;delete(...) will raise an object_deleted event on success [bool]
comment: //returns: true on success, false on failure [bool]
comment: // nothing to do
string: ''
string: ''
string: "projectUID='"
string: "'"
string: "userUID='"
string: "'"
string: 'projects_membership'
string: '*'
string: 'UID'
string: 'projectUID'
string: 'userUID'
string: 'role'
string: 'joined'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: ''
string: "Database error.&lt;br/&gt;\n"
string: ''
string: ''
string: "UID not present.\n"
string: 'users_user'
string: "Member does not exist."
string: 'projects_project'
string: "Project does not exist."
string: 'module'
string: 'projects'
string: 'model'
string: 'projects_membership'
string: 'fields'
string: 'UID'
string: 'VARCHAR(33)'
string: 'projectUID'
string: 'VARCHAR(33)'
string: 'userUID'
string: 'VARCHAR(33)'
string: 'role'
string: 'VARCHAR(10)'
string: 'joined'
string: 'DATETIME'
string: 'createdOn'
string: 'DATETIME'
string: 'createdBy'
string: 'VARCHAR(33)'
string: 'editedOn'
string: 'DATETIME'
string: 'editedBy'
string: 'VARCHAR(33)'
string: 'indices'
string: 'UID'
string: '10'
string: 'projectUID'
string: '10'
string: 'userUID'
string: '10'
string: 'createdOn'
string: ''
string: 'createdBy'
string: '10'
string: 'editedOn'
string: ''
string: 'editedBy'
string: '10'
string: 'nodiff'
string: 'projectUID'
string: 'userUID'
string: 'role'
string: 'joined'
string: 'UID'
string: 'projectUID'
string: 'userUID'
string: 'role'
string: 'joined'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: 'viewUrl'
string: ''
string: 'viewLink'
string: ''
string: 'editUrl'
string: ''
string: 'editLink'
string: ''
string: 'delUrl'
string: ''
string: 'delLink'
string: ''
string: 'newUrl'
string: ''
string: 'newLink'
string: ''
string: 'projects'
string: 'projects_membership'
string: 'show'
string: 'viewUrl'
string: "TODO"
string: 'viewLink'
string: "&lt;a href='"
string: 'viewUrl'
string: "'&gt;[ more &amp;gt;gt; ]&lt;/a&gt;"
string: 'projects'
string: 'projects_membership'
string: 'edit'
string: 'editUrl'
string: '%%serverPath%%Projects/editmembership/'
string: 'editLink'
string: "&lt;a href='"
string: 'editUrl'
string: "'&gt;[ edit ]&lt;/a&gt;"
string: 'projects'
string: 'projects_membership'
string: 'delete'
string: 'delUrl'
string: '%%serverPath%%Projects/delmembership/'
string: 'delLink'
string: "&lt;a href='"
string: 'delUrl'
string: "'&gt;[ delete ]&lt;/a&gt;"

<b>scanning file: /var/www/an2google/trunk/modules/projects/inc/relationships.inc.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	relationships between the users and objects maintained by the projects module
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: refModel - type of object [string]
comment: //arg: UID - UID of an object [string]
comment: //arg: relationship - between this object and a user [string]
comment: //arg: userUID - UID of the user related to this object [string]
comment: //returns: true if the given relationship exists, otherwise false [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //	get the user we want to know about
comment: //----------------------------------------------------------------------------------------------	
comment: //----------------------------------------------------------------------------------------------
comment: //	relationships of Project object
comment: //----------------------------------------------------------------------------------------------
comment: // try load the object
comment: // check that we did
comment: // relationship exists of user started this project
comment: //..........................................................................
comment: // is user is a member of this project
comment: //..........................................................................
comment: // is user is an administrator of this project
comment: //----------------------------------------------------------------------------------------------
comment: //	relationships of Revision object
comment: //----------------------------------------------------------------------------------------------
comment: // try load the object
comment: // check that we did
comment: // relationship exists of user started this project
comment: //..........................................................................
comment: // is user is a member of this project
comment: //..........................................................................
comment: // is user is an administrator of this project
string: 'modules/projects/models/project.mod.php'
string: 'modules/projects/models/membership.mod.php'
string: 'modules/projects/models/revision.mod.php'
string: 'projects_project'
string: 'creator'
string: 'projectmember'
string: 'projectadmin'
string: 'projects_project'
string: 'creator'
string: 'projectmember'
string: 'projectadmin'

<b>scanning file: /var/www/an2google/trunk/modules/projects/inc/maintenance.inc.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	maintain the projects module
comment: //--------------------------------------------------------------------------------------------------
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check projects
comment: //----------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	check projects
comment: //------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	compile report
comment: //---------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check memberships
comment: //----------------------------------------------------------------------------------------------
comment: //-----------------------------------------------------------------------------------------
comment: //	check reference to project
comment: //-----------------------------------------------------------------------------------------
comment: //-----------------------------------------------------------------------------------------
comment: //	check reference to user
comment: //-----------------------------------------------------------------------------------------
comment: //$model = new Projects_Membership();
comment: //$model-&gt;loadArray($row);
comment: //$model-&gt;delete();			
comment: //---------------------------------------------------------------------------------------------
comment: //	compile report
comment: //---------------------------------------------------------------------------------------------
string: 'modules/projects/models/project.mod.php'
string: 'modules/projects/models/membership.mod.php'
string: ''
string: "&lt;h2&gt;Checking project memberships...&lt;/h2&gt;"
string: 'UID'
string: 'Title'
string: 'error'
string: "SELECT * from Projects_Project"
string: 'projects'
string: 'projects_project'
string: 'UID'
string: 'UID'
string: 'UID'
string: 'title'
string: 'Added alias.'
string: "&lt;b&gt;Records Checked:&lt;/b&gt; $recordCount&lt;br/&gt;\n"
string: "&lt;b&gt;Errors Found:&lt;/b&gt; $errorCount&lt;br/&gt;\n"
string: "&lt;b&gt;Errors Fixed:&lt;/b&gt; $fixCount&lt;br/&gt;\n"
string: "&lt;h2&gt;Checking project memberships...&lt;/h2&gt;"
string: 'UID'
string: 'Title'
string: 'error'
string: "SELECT * from Projects_Membership"
string: 'projects_project'
string: 'projectUID'
string: "project not found - "
string: 'projectUID'
string: ", removed membership "
string: 'UID'
string: ".&lt;br/&gt;\n"
string: 'users_user'
string: 'userUID'
string: "user not found - "
string: 'userUID'
string: ", removed this membership.&lt;br/&gt;\n"
string: "&lt;b&gt;Records Checked:&lt;/b&gt; $recordCount&lt;br/&gt;\n"
string: "&lt;b&gt;Errors Found:&lt;/b&gt; $errorCount&lt;br/&gt;\n"
string: "&lt;b&gt;Errors Fixed:&lt;/b&gt; $fixCount&lt;br/&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/projects/inc/install.inc.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	install script for Projects module
comment: //--------------------------------------------------------------------------------------------------
comment: //+	reports are human-readable HTML, with script-readable HTML comments
comment: //--------------------------------------------------------------------------------------------------
comment: //|	install the Projects module
comment: //--------------------------------------------------------------------------------------------------
comment: //returns: html report or false if not authorized [string][bool]
comment: //----------------------------------------------------------------------------------------------
comment: //	create or upgrade Projects_Membership table
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	import any records from previous static table
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	create or upgrade Projects_Project table
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	import any records from previous table
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	create or upgrade Projects_Revision table
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	import any records from previous static table
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	done
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
comment: //|	discover if this module is installed
comment: //--------------------------------------------------------------------------------------------------
comment: //:	if installed correctly report will contain HTML comment &lt;!-- installed correctly --&gt;
comment: //returns: HTML installation status report [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	ensure the table which stores Membership objects exists and is correct
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	ensure the table which stores Project objects exists and is correct
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	ensure the table which stores Revision objects exists and is correct
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	done
comment: //----------------------------------------------------------------------------------------------
string: 'core/dbdriver/mysqladmin.dbd.php'
string: 'modules/projects/models/membership.mod.php'
string: 'modules/projects/models/project.mod.php'
string: 'modules/projects/models/revision.mod.php'
string: 'admin'
string: ''
string: 'projectmembers'
string: "&lt;b&gt;moved $count records from 'projectmembers' table.&lt;/b&gt;&lt;br/&gt;"
string: 'recordAlias'
string: 'alias'
string: 'projects'
string: "&lt;b&gt;moved $count records from 'projects' table.&lt;/b&gt;&lt;br/&gt;"
string: 'projectrevisions'
string: "&lt;b&gt;moved $count records from 'projectrevisions' table.&lt;/b&gt;&lt;br/&gt;"
string: 'admin'
string: ''
string: '&lt;!-- table installed correctly --&gt;'
string: '&lt;!-- module installed correctly --&gt;'

<b>scanning file: /var/www/an2google/trunk/modules/projects/inc/diff.inc.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	function to use command line diff
comment: //--------------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
comment: //	diff some html, split into lines first
comment: //--------------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
comment: //	add newlines to support diff operation
comment: //--------------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
comment: //	diff text
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------	
comment: //	save txt pair to disk
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------	
comment: //	run the diff
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------	
comment: //	parse the resulting text
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
comment: //	parse diff result, return array of changes
comment: //--------------------------------------------------------------------------------------------------
comment: // addition
comment: // deletion
comment: // deletion
comment: // add last operation
comment: //--------------------------------------------------------------------------------------------------
comment: //	express a diff op as html
comment: //--------------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
comment: //	write a file to disk
comment: //--------------------------------------------------------------------------------------------------
string: "\n"
string: ''
string: "\r"
string: ''
string: "|"
string: "&lt;p&gt;|&lt;ul&gt;|&lt;ol&gt;|&lt;table&gt;|&lt;h1&gt;|&lt;h2&gt;|&lt;h3&gt;|&lt;blockquote&gt;|&lt;br&gt;|&lt;br/&gt;"
string: "\n"
string: "&lt;"
string: "&lt;/"
string: "\n"
string: '&lt;inline&gt;'
string: ''
string: '&lt;/inline&gt;'
string: ''
string: 'modules/projects/difftemp/1.txt'
string: 'modules/projects/difftemp/2.txt'
string: "diff $file2 $file1"
string: ''
string: "\n"
string: '&lt;'
string: '&gt;'
string: '-'
string: ''
string: 'raw'
string: 'type'
string: ''
string: 'desc'
string: ''
string: 'from'
string: ''
string: 'to'
string: ''
string: 'a'
string: 'type'
string: 'a'
string: 'd'
string: 'type'
string: 'd'
string: 'c'
string: 'type'
string: 'c'
string: '|'
string: 'a|d|c'
string: '|'
string: 'x|x|x'
string: "x"
string: 'from'
string: 'to'
string: '---'
string: 'desc'
string: '&lt;!--fold--&gt;'
string: 'desc'
string: "\n"
string: ''
string: 'type'
string: 'a'
string: "&lt;b&gt;Added at line "
string: 'from'
string: ", becoming line "
string: 'to'
string: ":&lt;/b&gt;&lt;br/&gt;\n"
string: "&lt;div class='inlinequote'&gt;"
string: 'desc'
string: "&lt;/div&gt;\n"
string: 'd'
string: "&lt;b&gt;Removed line "
string: 'from'
string: ":&lt;/b&gt;&lt;br/&gt;\n"
string: "&lt;div class='inlinequote'&gt;"
string: 'desc'
string: "&lt;/div&gt;\n"
string: 'c'
string: 'desc'
string: '&lt;!--fold--&gt;'
string: 'desc'
string: 'desc'
string: "&lt;b&gt;Changed line "
string: 'from'
string: ":&lt;/b&gt;&lt;br/&gt;\n"
string: "&lt;div class='inlinequote'&gt;"
string: "&lt;/div&gt;\n"
string: "&lt;b&gt;To become line "
string: 'to'
string: ":&lt;/b&gt;&lt;br/&gt;\n"
string: "&lt;div class='inlinequote'&gt;"
string: "&lt;/div&gt;\n"
string: 'w+'

<b>scanning file: /var/www/an2google/trunk/modules/projects/events/images_added.on.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //	fired when an image is added 
comment: //-------------------------------------------------------------------------------------------------
comment: //arg: refModule - name of module to which a comment was attached
comment: //arg: refUID - UID of object to which comment was attached
comment: //arg: imageUID - UID of the new comment
comment: //arg: imageTitle - text/html of comment
comment: //----------------------------------------------------------------------------------------------
comment: //	send notifications to project member and friends of uplaoder
comment: //----------------------------------------------------------------------------------------------
comment: /*	TODO: re-add notifications
	$ext = $model-&gt;extArray();
	$link = "&lt;a href='" . $ext['viewUrl'] . "/'&gt;" . $ext['title'].  '&lt;/a&gt;';
	$title = $user-&gt;getNameLink() . ' added a new image to your project: ' . $link;
	$url = $ext['viewUrl'];
	$imgUID = '';

	$content = "&lt;a href='/images/show/" . $args['imageUID'] . "'&gt;[ view image &gt;&gt; ]&lt;/a&gt;";

	notifyProject($args['refUID'], $args['commentUID'], 
				  $user-&gt;getName(), $user-&gt;getUrl(),
				  $title, $content, $url, $args['imageUID'] );

	$title = $user-&gt;getNameLink() . ' added a new image to their project: ' . $link;

	notifyFriends($args['refUID'], $args['imageUID'], 
				  $user-&gt;getName(), $user-&gt;getUrl(),
				  $title, $content, $url, $args['imageUID'] );
	*/
comment: //-------------------------------------------------------------------------------------------------
string: 'modules/projects/models/project.mod.php'
string: 'refModule'
string: 'refUID'
string: 'imageUID'
string: 'imageTitle'
string: 'refUID'

<b>scanning file: /var/www/an2google/trunk/modules/projects/events/comments_added.on.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //	fired when a comment is added
comment: //-------------------------------------------------------------------------------------------------
comment: //arg: refModule - name of module to which a comment was attached
comment: //arg: refUID - UID of object to which comment was attached
comment: //arg: commentUID - UID of the new comment
comment: //arg: comment - text/html of comment
comment: //----------------------------------------------------------------------------------------------
comment: //	send notifications to project members
comment: //----------------------------------------------------------------------------------------------
comment: /*	TODO: re-add notifications
	$ext = $model-&gt;extArray();
	$commentUrl = $ext['viewUrl'] . "#comment" . $args['commentUID'];

	$link = "&lt;a href='" . $commentUrl ."'&gt;" . $ext['title'] . "&lt;/a&gt;";
	$title = $user-&gt;getNameLink() . " commented on " . $u-&gt;getName() . "'s blog post " . $link;
	$url = $ext['viewUrl'] . '#comment' . $args['commentUID'];
	$imgUID = imgGetDefaultUID('moblog', $args['refUID']);

	if ($user-&gt;UID == $u-&gt;UID) 
		{ $title = $user-&gt;getNameLink() . " commented on their own blog post " . $link; }

	notifyFriends($args['refUID'], $args['commentUID'], 
				  $user-&gt;getName(), $user-&gt;getUrl(),
				  $title, $args['comment'], $url, $imgUID );

	$title = $user-&gt;getNameLink() . " commented on your blog post " . $link;
	notifyUser($args['refUID'], $args['commentUID'], 
				  $user-&gt;getName(), $user-&gt;getUrl(),
				  $title, $args['comment'], $url, $imgUID );
	*/
comment: //-------------------------------------------------------------------------------------------------
string: 'modules/projects/models/project.mod.php'
string: 'refModule'
string: 'refUID'
string: 'commentUID'
string: 'comment'
string: 'refModule'
string: 'projects'
string: 'refUID'

<b>scanning file: /var/www/an2google/trunk/modules/projects/actions/testproject.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	test the projects model
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	administrators only
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	load test data
comment: //----------------------------------------------------------------------------------------------
comment: //if (false == $model-&gt;selectionsLoaded) { $page-&gt;do404('could not load project sections', true); }
string: 'modules/projects/models/project.mod.php'
string: 'admin'
string: " -&gt; "
string: 'title'
string: "(UID: "
string: 'UID'
string: " weight: "
string: 'weight'
string: ")&lt;br/&gt;\n"
string: "&lt;textarea rows='10' cols='80'&gt;"
string: 'content'
string: "&lt;/textarea&gt;&lt;br/&gt;&lt;br/&gt;\n"
string: "UID='"
string: "'"
string: 'projects'
string: '*'
string: "&lt;textarea rows='40' cols='80'&gt;"
string: 'content'
string: "&lt;/textarea&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/projects/actions/tag.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	show all projects with a given tag
comment: //--------------------------------------------------------------------------------------------------
comment: //note: $req-&gt;ref should be a tag name
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: permissions check here
comment: //TODO: pagination setup
comment: //----------------------------------------------------------------------------------------------
comment: //	render the page
comment: //----------------------------------------------------------------------------------------------
string: 'modules/tags/models/tag.mod.php'
string: ''
string: 'No tag given.'
string: 'Tag not recognised.'
string: 'modules/projects/actions/tag.page.php'
string: 'tagUID'
string: 'tagName'

<b>scanning file: /var/www/an2google/trunk/modules/projects/actions/showrevision.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	show current and adjacent versions of a project document
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check permissions and reference
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	render page
comment: //----------------------------------------------------------------------------------------------
comment: //$project-&gt;nav = $model-&gt;nav;
comment: //$article-&gt;wikicode-&gt;source = $model-&gt;content;
comment: //$article-&gt;expandWikiCode();
comment: //foreach($extArray as $key =&gt; $value) {  $page-&gt;blockArgs[$key] = $value; }		// messy
string: 'modules/projects/models/project.mod.php'
string: 'modules/projects/models/revision.mod.php'
string: ''
string: 'projects'
string: 'projects_revision'
string: 'show'
string: 'projects'
string: 'projects_project'
string: 'show'
string: 'modules/projects/actions/showrevision.page.php'
string: 'currentRevision'
string: 'UID'
string: 'raUID'
string: 'revisionDate'
string: 'projectUID'
string: 'projectTitle'

<b>scanning file: /var/www/an2google/trunk/modules/projects/actions/showhtml.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	show a project record (simple HTML, no page template)
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	TODO: check permissions here
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	load the model
comment: //----------------------------------------------------------------------------------------------
string: 'modules/projects/models/project.mod.php'
string: ''
string: 'projects_project'
string: "&lt;html&gt;"
string: "&lt;link href='"
string: "/themes/clockface/css/clockface.css' rel='stylesheet' type='text/css' /&gt;"
string: "&lt;title&gt;"
string: "&lt;/title&gt;&lt;body&gt;"
string: "&lt;/body&gt;&lt;/html&gt;"

<b>scanning file: /var/www/an2google/trunk/modules/projects/actions/show.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	show a project
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check references and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //if (false == $user-&gt;authHas('projects', 'projects_project', 'edit', $UID)) 
comment: //	{ $page-&gt;do403('You are not authorized to edit this project.'); }
comment: //----------------------------------------------------------------------------------------------
comment: //	load the model and determine if the current user can edit it
comment: //----------------------------------------------------------------------------------------------
comment: /*

	// only members and admins can edit projects
	if (true == $model-&gt;hasEditAuth($user-&gt;UID)) 
		{ $editUrl = $serverPath . 'projects/editabstract/' . $model-&gt;alias; }

	// only admins can delete projects
	if ('admin' == $user-&gt;role) { 
		$ext = $model-&gt;extArray();
		$delUrl = $ext['delUrl'];
	}
	
	*/
comment: //----------------------------------------------------------------------------------------------
comment: //	render page
comment: //----------------------------------------------------------------------------------------------	
comment: //$page-&gt;blockArgs['editProjectUrl'] = $editUrl;	// TODO: clunky, fix this
comment: //$page-&gt;blockArgs['delProjectUrl'] = $delUrl;
string: 'modules/projects/models/project.mod.php'
string: ''
string: 'projects_project'
string: ''
string: ''
string: 'modules/projects/actions/show.page.php'
string: 'raUID'
string: 'UID'
string: 'projectTitle'
string: 'projectRa'

<b>scanning file: /var/www/an2google/trunk/modules/projects/actions/save.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	save some change to a project
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check permissions and load model
comment: //----------------------------------------------------------------------------------------------
comment: // no such project, or UID not specified
comment: //----------------------------------------------------------------------------------------------
comment: //	save changes to title
comment: //----------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	check that it's different, make revision
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	save the record
comment: //------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	save changes to abstract
comment: //----------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------	
comment: //	note the revision
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------	
comment: //	save the record
comment: //------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	add a new section
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	save changes to a section
comment: //----------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	check for changes (revision)
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	save the changes
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	save revision (if changed)
comment: //------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	nothing doing, unsupported action requested?
comment: //----------------------------------------------------------------------------------------------
string: 'modules/projects/models/project.mod.php'
string: 'UID'
string: 'projects_project'
string: 'UID'
string: 'UID'
string: 'admin'
string: 'action'
string: 'saveChangeTitle'
string: 'action'
string: 'title'
string: 'title'
string: 'title'
string: 'projects/edit/'
string: 'action'
string: 'saveAbstract'
string: 'action'
string: 'abstract'
string: 'abstract'
string: ''
string: 'Saved revision.'
string: 'ok'
string: 'Revision not saved.'
string: 'bad'
string: 'abstract'
string: ''
string: 'Saved changes to abstract.'
string: 'ok'
string: 'Could not save changes to abstract.'
string: 'bad'
string: 'projects/edit/'
string: 'action'
string: 'addSection'
string: 'action'
string: 'sectionTitle'
string: 'sectionTitle'
string: 'sMessage'
string: "Added new section $sectionTitle&lt;br/&gt;\n"
string: ''
string: 'Saved revision.'
string: 'ok'
string: 'Revision not saved.'
string: 'bad'
string: 'projects/editindex/'
string: 'action'
string: 'saveSection'
string: 'action'
string: 'sectionUID'
string: 'sectionUID'
string: 'sectionTitle'
string: 'content'
string: 'sectionUID'
string: 'title'
string: 'sectionUID'
string: 'content'
string: ''
string: 'Saved revision.'
string: 'ok'
string: 'Revision not saved.'
string: 'bad'
string: 'projects/editsection/section_'
string: 'sectionUID'
string: '/'

<b>scanning file: /var/www/an2google/trunk/modules/projects/actions/revisions.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	show revisions to a project
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check permissions and reference
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	render the page
comment: //----------------------------------------------------------------------------------------------
string: 'modules/projects/models/project.mod.php'
string: ''
string: 'projects_project'
string: 'projects'
string: 'projects_revision'
string: 'show'
string: 'modules/projects/actions/revisions.page.php'
string: 'raUID'
string: 'projectUID'
string: 'projectRa'
string: 'projectTitle'

<b>scanning file: /var/www/an2google/trunk/modules/projects/actions/revision.act.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //*	display a project revision
comment: //-------------------------------------------------------------------------------------------------
string: 'modules/projects/models/revision.mod.php'
string: ''
string: 'Revision not found.'
string: 'Revision not found.'
string: "&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/projects/actions/new.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	add a new project
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	create project
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	create membership for current user
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	redirect to edit page
comment: //----------------------------------------------------------------------------------------------
string: 'modules/projects/models/project.mod.php'
string: 'projects'
string: 'projects_project'
string: 'new'
string: 'you are not authorized to create new projects'
string: 'public'
string: 'Only registered users can create projects.'
string: 'New Project '
string: 'title'
string: 'title'
string: ''
string: "Please choose a name to create your project with."
string: 'bad'
string: 'projects/'
string: 'admin'
string: 'projects/edit/'

<b>scanning file: /var/www/an2google/trunk/modules/projects/actions/movesection.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	change the order (weight) of sections relative to one another
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check reference, args and permissions
comment: //----------------------------------------------------------------------------------------------
comment: // check section exists
comment: //----------------------------------------------------------------------------------------------
comment: //	check user is authorised to edit this project
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	move the section up (decrease weight)
comment: //----------------------------------------------------------------------------------------------
comment: // find section with next lowest weight
comment: // exchange weights
comment: // sort sections by weight and save the project
comment: //----------------------------------------------------------------------------------------------
comment: //	move the section down (increase weight)
comment: //----------------------------------------------------------------------------------------------
comment: // find section with next heighest weight
comment: // exchange weights
comment: // sort sections by weight and save the project
comment: //----------------------------------------------------------------------------------------------
comment: //	if unhandled
comment: //----------------------------------------------------------------------------------------------
string: 'modules/projects/models/project.mod.php'
string: ''
string: 'move'
string: 'section'
string: 'section'
string: 'admin'
string: 'move'
string: 'up'
string: 'weight'
string: 'weight'
string: 'weight'
string: 'weight'
string: 'weight'
string: 'projects/edit/'
string: 'move'
string: 'down'
string: 'weight'
string: 'weight'
string: 'weight'
string: 'weight'
string: 'weight'
string: 'projects/edit/'

<b>scanning file: /var/www/an2google/trunk/modules/projects/actions/list.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	list all projects on the system, possibly constrained by school, grade or user
comment: //--------------------------------------------------------------------------------------------------
comment: //TODO: arguments for pagination, etc
string: 'projects'
string: 'projects_project'
string: 'show'
string: 'modules/projects/actions/list.page.php'

<b>scanning file: /var/www/an2google/trunk/modules/projects/actions/history.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	display complete revision history for a given project
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check reference and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	render the page
comment: //----------------------------------------------------------------------------------------------
string: 'modules/projects/models/project.mod.php'
string: ''
string: 'projects_project'
string: 'No such project.'
string: 'modules/projects/actions/history.page.php'
string: 'UID'
string: 'raUID'
string: 'articleTitle'

<b>scanning file: /var/www/an2google/trunk/modules/projects/actions/editsection.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	edit a project section
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check user is authorised to edit this project
comment: //----------------------------------------------------------------------------------------------
comment: // TODO: use a permission for this
comment: //----------------------------------------------------------------------------------------------
comment: //	load the page
comment: //----------------------------------------------------------------------------------------------
comment: //	$page-&gt;blockArgs['viewProjectUrl'] = $serverPath . 'projects/' . $model-&gt;alias;
string: 'modules/projects/models/project.mod.php'
string: ''
string: 'no project specified'
string: 'section'
string: 'section not given'
string: 'projects_project'
string: 'section'
string: 'no such project'
string: 'admin'
string: "You are not a member of this project, you can't edit it."
string: 'bad'
string: 'projects/'
string: 'modules/projects/actions/editsection.page.php'
string: 'raUID'
string: 'UID'
string: 'projectUID'
string: 'sectionUID'

<b>scanning file: /var/www/an2google/trunk/modules/projects/actions/editmembers.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	iframe to display and add/remove project members, reference should be a projects' alias
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check reference and load project
comment: //----------------------------------------------------------------------------------------------
comment: //$UID = $aliases-&gt;findRedirect('projects_project');
comment: //----------------------------------------------------------------------------------------------
comment: //	determine if current user is authorised to administer this project
comment: //----------------------------------------------------------------------------------------------	
comment: //if ($admin == false) 
comment: //	{ $page-&gt;do403("You cannot administer memberships of this project.&lt;br/&gt;\n", true); }
comment: //----------------------------------------------------------------------------------------------
comment: //	accept HTTP POSTs to add new members
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	accept HTTP GET to remove members (user UID is given)
comment: //----------------------------------------------------------------------------------------------
comment: // eg /projects/editmembers/removemember_8237146489/Some-Project
comment: //AND (true == $db-&gt;objectExists('users_user', $req-&gt;args['removemember'])) ) {
comment: //----------------------------------------------------------------------------------------------
comment: //	render the page
comment: //----------------------------------------------------------------------------------------------
string: 'modules/projects/models/project.mod.php'
string: ''
string: 'Unkonwn project.'
string: 'admin'
string: 'admin'
string: 'action'
string: 'addMember'
string: 'action'
string: 'user'
string: 'role'
string: "Added new member to project: "
string: "."
string: 'ok'
string: 'removemember'
string: 'removemember'
string: "Removed member from "
string: "."
string: 'ok'
string: 'modules/projects/actions/editmembers.if.page.php'
string: 'UID'
string: 'raUID'

<b>scanning file: /var/www/an2google/trunk/modules/projects/actions/editindex.act.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //*	show project index with edit links
comment: //-------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check user is authorised to edit this projects abstract
comment: //----------------------------------------------------------------------------------------------
comment: // TODO: use a permission for this
comment: //----------------------------------------------------------------------------------------------
comment: //	increment or decrement section weights (move up or down)
comment: //----------------------------------------------------------------------------------------------
comment: //$session-&gt;msg("incrementing section " . $req-&gt;args['inc'], 'ok');
comment: //$session-&gt;msg("decrementing section " . $req-&gt;args['inc'], 'ok');
comment: //----------------------------------------------------------------------------------------------
comment: //	load the page (or 403)
comment: //----------------------------------------------------------------------------------------------
string: 'modules/projects/models/project.mod.php'
string: 'modules/projects/models/membership.mod.php'
string: ''
string: 'projects_project'
string: 'admin'
string: "You are not a member of this project, you can't edit it."
string: 'bad'
string: 'projects/'
string: 'inc'
string: 'inc'
string: 'dec'
string: 'dec'
string: 'modules/projects/actions/editindex.if.page.php'
string: 'raUID'
string: 'UID'

<b>scanning file: /var/www/an2google/trunk/modules/projects/actions/editabstract.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	edit a project abstract
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check user is authorised to edit this projects abstract
comment: //----------------------------------------------------------------------------------------------
comment: // TODO: use a permission for this
comment: //----------------------------------------------------------------------------------------------
comment: //	render the page
comment: //----------------------------------------------------------------------------------------------
comment: //$page-&gt;blockArgs['viewProjectUrl'] = $serverPath . 'projects/' . $model-&gt;alias;
string: 'modules/projects/models/membership.mod.php'
string: 'modules/projects/models/project.mod.php'
string: ''
string: 'projects_project'
string: 'Project not found.'
string: 'admin'
string: "You are not a member of this project, you can't edit it."
string: 'bad'
string: 'projects/'
string: 'modules/projects/actions/editabstract.page.php'
string: 'raUID'
string: 'UID'

<b>scanning file: /var/www/an2google/trunk/modules/projects/actions/edit.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	edit a project abstract (since moved to editabstract.act.php) 	//TODO: remove this if possible
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check reference and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check reference and permissions
comment: //----------------------------------------------------------------------------------------------
string: ''
string: 'projects_project'
string: 'projects'
string: 'projects_project'
string: 'edit'
string: 'You are not authorized to edit this project.'
string: 'projects/editabstract/'

<b>scanning file: /var/www/an2google/trunk/modules/projects/actions/deletesection.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	delete a section of a project
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check POST variables and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	load the project and check that user has edit permissions on this project
comment: //----------------------------------------------------------------------------------------------
comment: //if (false == $model-&gt;hasEditAuth($user-&gt;UID)) { $page-&gt;do403(); }
comment: //----------------------------------------------------------------------------------------------
comment: //	delete the section and redirect back to abstract
comment: //----------------------------------------------------------------------------------------------
string: 'modules/projects/models/project.mod.php'
string: 'action'
string: 'Action not specified.'
string: 'deleteSection'
string: 'action'
string: 'Action not supported.'
string: 'UID'
string: 'Project not specified (UID)'
string: 'section'
string: 'Section not specified.'
string: 'UID'
string: 'projects'
string: 'projects_project'
string: 'edit'
string: 'You are not authozed to edit this project'
string: 'section'
string: 'title'
string: 'section'
string: 'sMessage'
string: "Deleted section: '"
string: "'"
string: 'sMessage'
string: "Section not found"
string: 'projects/editabstract/'

<b>scanning file: /var/www/an2google/trunk/modules/projects/actions/delete.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	delete a project (and all memberships, revisions, etc)
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check POST vars and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	delete the project and redirect
comment: //----------------------------------------------------------------------------------------------
string: 'modules/projects/models/project.mod.php'
string: 'action'
string: 'Action not specified.'
string: 'deleteRecord'
string: 'action'
string: 'Action not supported.'
string: 'UID'
string: 'Projects not specified (UID).'
string: 'UID'
string: 'projects'
string: 'projects_project'
string: 'delete'
string: 'You are not authorzed to delete this project.'
string: "Deleted project: "
string: 'projects/'

<b>scanning file: /var/www/an2google/trunk/modules/projects/actions/default.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	default action for projects module (ie, no action specified in URL)
comment: //--------------------------------------------------------------------------------------------------
comment: // no recordAlias/UID given in URL, list all schools
comment: // recordAlias/UID given in URL, show single school
string: ''
string: 'modules/projects/actions/list.act.php'
string: 'modules/projects/actions/show.act.php'

<b>scanning file: /var/www/an2google/trunk/modules/projects/actions/confirmdeletesection.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	confirm deletion of a project section
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the confirmation block and show section to be deleted
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: replace
comment: //TODO: descurity checks on $req-&gt;args['section']
string: 'modules/projects/models/project.mod.php'
string: 'uid'
string: 'Project (UID) not specified.'
string: 'section'
string: 'Section (UID) not specified'
string: 'uid'
string: 'Project not found.'
string: 'projects'
string: 'projects_project'
string: 'edit'
string: 'UID'
string: 'section'
string: 'section'
string: 'raUID'
string: 'modules/projects/views/confirmdeletesection.block.php'
string: 'warn'
string: 'projects/editsection/section_'
string: 'section'
string: '/'

<b>scanning file: /var/www/an2google/trunk/modules/projects/actions/confirmdelete.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	confirm deletion of a project
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------		
comment: //----------------------------------------------------------------------------------------------
comment: //	make the confirmation block
comment: //----------------------------------------------------------------------------------------------		
string: 'modules/projects/models/project.mod.php'
string: 'UID'
string: 'UID'
string: 'Project not found.'
string: 'projects'
string: 'projects_project'
string: 'delete'
string: 'You are not authorized to delete this project.'
string: 'UID'
string: 'raUID'
string: 'modules/projects/views/confirmdelete.block.php'
string: 'warn'
string: 'projects/'

<b>scanning file: /var/www/an2google/trunk/modules/projects/actions/api.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	API of projects module. No public actions.
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	list objects owned by the current user
comment: //----------------------------------------------------------------------------------------------
comment: //NOTE: this is a legacy API, still used by firefox extension, but deprecated
string: 'modules/projects/models/project.mod.php'
string: 'public'
string: 'not logged in'
string: 'myrecords'
string: "userUID='"
string: "'"
string: "(role='member' OR role='admin')"
string: 'projects_membership'
string: '*'
string: 'projectUID'
string: 'uid'
string: 'module'
string: 'projects'
string: 'model'
string: 'projects_project'
string: 'title'
string: 'recordalias'
string: 'files'
string: 'none'
string: 'images'
string: 'uploadmultiple'
string: 'videos'
string: 'none'
string: 'record'

<b>scanning file: /var/www/an2google/trunk/modules/projects/actions/addme.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	current user is requesting to join a project
comment: //--------------------------------------------------------------------------------------------------
comment: // public and banned users can't do this	
comment: //----------------------------------------------------------------------------------------------
comment: //	check for an existing request
comment: //----------------------------------------------------------------------------------------------
comment: //$sql = "select * from Projects_Membership "
comment: //	 . "where projectUID='" . $db-&gt;addMarkup($_POST['UID']) . "' "
comment: //	 . "and userUID='" . $user-&gt;UID . "'";
comment: //----------------------------------------------------------------------------------------------
comment: //	no existing request, make one 
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	notify admins of request, cc to user making it
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	return to project page
comment: //----------------------------------------------------------------------------------------------
string: 'modules/projects/models/project.mod.php'
string: 'modules/projects/models/membership.mod.php'
string: 'public'
string: 'action'
string: 'Action not given.'
string: 'askToJoin'
string: 'action'
string: 'Action not supported.'
string: 'UID'
string: 'Project not specified (UID).'
string: 'UID'
string: 'You have already asked to join this project.'
string: 'bad'
string: 'projects/'
string: 'UID'
string: 'UID'
string: 'asked'
string: 'UID'
string: "%%serverPath%%projects/"
string: "&lt;a href='"
string: "'&gt;"
string: "&lt;/a&gt;"
string: ' would like to join project: '
string: 'Request via form on the projectpage, no message attached.'
string: 'message'
string: "message attached: "
string: 'message'
string: 'projects'
string: 'projects_project'
string: "You have requested to join this project. "
string: "Please be patient in waiting for a response from the people "
string: "in charge of this project.\n"
string: 'ok'
string: 'projects/'

<b>scanning file: /var/www/an2google/trunk/modules/projects/actions/acceptmember.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	action to accept someone who has applied to join a project
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	load the request and the project it pertains to
comment: //----------------------------------------------------------------------------------------------
comment: // no membership request
comment: // no project
comment: //----------------------------------------------------------------------------------------------
comment: //	ensure that current user is admin of project, or a sysadmin
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	authorised, notify current members of new addition
comment: //----------------------------------------------------------------------------------------------
comment: /* 	TODO: $notifications-&gt;addProject()...
	$newUser = new Users_User($membership['userUID']);

	$title = $newUser-&gt;getNameLink() . " is now a member of project " . $model-&gt;getLink();
	$content = "Added by " . $user-&gt;getNameLink() . ' on ' . $db-&gt;datetime();
	
	notifyProject($membership['projectUID'], $kapenta-&gt;createUID(), $user-&gt;getName(), 
					$user-&gt;getUrl(), $title, $content, $model-&gt;getUrl(), '');
	*/
comment: //----------------------------------------------------------------------------------------------
comment: //	authorised, grant membership
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	authorised, notify new member that they are now on the project
comment: //----------------------------------------------------------------------------------------------
comment: /*
	$fromUrl = '%%serverPath%%users/profile/' . $user-&gt;alias;
	$title = "You have been added to project: " . $model-&gt;getLink();
	$content = "You were added by " . $user-&gt;getNameLink() . " and can now edit this project. " . 
				"Please be considerate of the contributions of other members.";

	notifyUser($membership['userUID'], $kapenta-&gt;createUID(), $user-&gt;getName(), 
				$fromUrl, $title, $content, $model-&gt;getUrl(), '');

	*/
comment: //----------------------------------------------------------------------------------------------
comment: //	return to project page
comment: //----------------------------------------------------------------------------------------------
string: 'modules/projects/models/membership.mod.php'
string: 'modules/projects/models/project.mod.php'
string: 'public'
string: ''
string: 'no project membership given'
string: 'Unknown request.'
string: 'No such project.'
string: 'admin'
string: 'member'
string: '[[:users::namelink::userUID='
string: ':]]'
string: ''
string: " is now a member of project '"
string: "'"
string: "Request to join was accepted by "
string: '%%serverPath%%projects/'
string: 'projects'
string: 'projects_project'
string: '[[:users::namelink::userUID='
string: ':]]'
string: "You have added $nameBlock as a new member of this project."
string: 'ok'
string: 'projects/'

<b>scanning file: /var/www/an2google/trunk/modules/notifications/views/show.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	show a single notification
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: UID - UID of a notification [string]
comment: //opt: notificationUID - overrides UID [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
string: 'modules/notifications/models/notification.mod.php'
string: ''
string: 'notificationUID'
string: 'UID'
string: 'notificationUID'
string: 'UID'
string: ''
string: 'UID'
string: ''
string: 'notifications'
string: 'notifications_notification'
string: 'show'
string: ''
string: 'modules/notifications/views/show.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/notifications/views/list.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	list a user's recent activity
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: userUID - UID of a Users_User object [string]
comment: //opt: page - page number to display, default is 1 (int) [string]
comment: //opt: num - number of records per page (default is 30) [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //if (false == $user-&gt;authHas('notifications', 'notifications_notification', 'show'))
comment: //		{ return ''; }
comment: //----------------------------------------------------------------------------------------------
comment: //	count visible notifications
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	load a page worth of notifications from the database
comment: //----------------------------------------------------------------------------------------------
string: ''
string: 'userUID'
string: '(user not specified)'
string: 'userUID'
string: 'users_user'
string: '(no such user)'
string: 'num'
string: 'num'
string: 'page'
string: 'page'
string: "userUID='"
string: "'"
string: "status='show'"
string: 'Notifications_UserIndex'
string: 'modules/notifications/views/nonotifications.block.php'
string: '%%serverPath%%notifications/'
string: "[[:theme::pagination::page="
string: "::total="
string: "::link="
string: ":]]\n"
string: 'Notifications_UserIndex'
string: '*'
string: 'createdOn DESC'
string: "[[:notifications::show::UID="
string: 'notificationUID'
string: ":]]"

<b>scanning file: /var/www/an2google/trunk/modules/notifications/views/editnotification.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	form to edit a Notification object
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: UID - UID of a Notifications_Notification object [string]//opt: notificationUID - UID of a Notifications_Notification object, overrides UID [string]
comment: //% return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check permissions and args
comment: //----------------------------------------------------------------------------------------------
comment: //% the object we're editing [object:Notifications_Notification]
comment: //----------------------------------------------------------------------------------------------
comment: //	load the block
comment: //----------------------------------------------------------------------------------------------
comment: // ^ add any labels, block args, etc here
string: 'modules/notifications/models/notification.mod.php'
string: ''
string: ''
string: 'admin'
string: 'admins only'
string: 'UID'
string: 'UID'
string: 'raUID'
string: 'raUID'
string: 'notificationUID'
string: 'notificationUID'
string: ''
string: ''
string: ''
string: 'notifications'
string: 'notifications_notification'
string: 'edit'
string: ''
string: 'modules/notifications/views/editnotification.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/notifications/models/userindex.mod.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	These link notifications to users and are aggregated to form the feed
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //member variables
comment: //----------------------------------------------------------------------------------------------
comment: //_	currently loaded database record [array]
comment: //_	database table definition [array]
comment: //_	set to true when an object has been loaded [bool]
comment: //_ UID [string]
comment: //_ ref:Users_User [string]
comment: //_ ref:Notifications_Notification [string]
comment: //_	notification status/visibility (show|hide) [string]
comment: //_ datetime [string]
comment: //_ ref:Users_User [string]
comment: //_ datetime [string]
comment: //_ ref:Users_User [string]
comment: //----------------------------------------------------------------------------------------------
comment: //. constructor
comment: //----------------------------------------------------------------------------------------------
comment: //opt: UID - UID of a UserIndex object [string]
comment: // initialise table schema
comment: // try load an object from the database
comment: // check if we did
comment: // make new object
comment: // initialize
comment: // visible in feed by default
comment: //----------------------------------------------------------------------------------------------
comment: //. load an object from the database given its UID
comment: //----------------------------------------------------------------------------------------------
comment: //arg: UID - UID of a UserIndex object [string]
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //. load UserIndex object serialized as an associative array
comment: //----------------------------------------------------------------------------------------------
comment: //arg: ary - associative array of members and values [array]
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //. save the current object to database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string on success, html report of errors on failure [string]
comment: //: $db-&gt;save(...) will raise an object_updated event if successful
comment: //----------------------------------------------------------------------------------------------
comment: //. check that object is correct before allowing it to be stored in database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string if object passes, warning message if not [string]
comment: //----------------------------------------------------------------------------------------------
comment: //. database table definition and content versioning
comment: //----------------------------------------------------------------------------------------------
comment: //returns: information for constructing SQL queries [array]
comment: //table columns
comment: //these fields will be indexed
comment: //revision history will be kept for these fields
comment: //----------------------------------------------------------------------------------------------
comment: //. serialize this object to an array
comment: //----------------------------------------------------------------------------------------------
comment: //returns: associative array of all members which define this instance [array]
comment: //----------------------------------------------------------------------------------------------
comment: //. serialize this object to xml
comment: //----------------------------------------------------------------------------------------------
comment: //arg: xmlDec - include xml declaration? [bool]
comment: //arg: indent - string with which to indent lines [bool]
comment: //returns: xml serialization of this object [string]
comment: //NOTE: any members which are not XML clean should be marked up before sending
comment: //----------------------------------------------------------------------------------------------
comment: //. make an extended array of data views may need
comment: //----------------------------------------------------------------------------------------------
comment: //returns: associative array of members, metadata and partial views [array]
comment: //% extended array of properties [array:string]
comment: //------------------------------------------------------------------------------------------
comment: //	links
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	javascript
comment: //------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //. delete current object from the database
comment: //----------------------------------------------------------------------------------------------
comment: //: $db-&gt;delete(...) will raise an object_deleted event on success [bool]
comment: //returns: true on success, false on failure [bool]
comment: // nothing to do
comment: //----------------------------------------------------------------------------------------------
comment: //. discover if a userindex exists
comment: //----------------------------------------------------------------------------------------------
comment: //returns: true on if exists, false if not [bool]
string: ''
string: ''
string: 'show'
string: 'UID'
string: 'userUID'
string: 'notificationUID'
string: 'status'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: ''
string: "Database error.&lt;br/&gt;\n"
string: ''
string: ''
string: ''
string: "No UID.&lt;br/&gt;\n"
string: 'module'
string: 'notifications'
string: 'model'
string: 'Notifications_UserIndex'
string: 'fields'
string: 'UID'
string: 'VARCHAR(33)'
string: 'userUID'
string: 'VARCHAR(33)'
string: 'notificationUID'
string: 'VARCHAR(33)'
string: 'status'
string: 'VARCHAR(20)'
string: 'createdOn'
string: 'DATETIME'
string: 'createdBy'
string: 'VARCHAR(33)'
string: 'editedOn'
string: 'DATETIME'
string: 'editedBy'
string: 'VARCHAR(33)'
string: 'indices'
string: 'UID'
string: '10'
string: 'userUID'
string: '10'
string: 'notificationUID'
string: '10'
string: 'createdOn'
string: ''
string: 'createdBy'
string: '10'
string: 'editedOn'
string: ''
string: 'editedBy'
string: '10'
string: 'nodiff'
string: 'UID'
string: 'userUID'
string: 'notificationUID'
string: 'status'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: ''
string: "&lt;kobject type='Notifications_UserIndex'&gt;\n"
string: "    &lt;UID&gt;"
string: "&lt;/UID&gt;\n"
string: "    &lt;userUID&gt;"
string: "&lt;/userUID&gt;\n"
string: "    &lt;notificationUID&gt;"
string: "&lt;/notificationUID&gt;\n"
string: "    &lt;createdOn&gt;"
string: "&lt;/createdOn&gt;\n"
string: "    &lt;createdBy&gt;"
string: "&lt;/createdBy&gt;\n"
string: "    &lt;editedOn&gt;"
string: "&lt;/editedOn&gt;\n"
string: "    &lt;editedBy&gt;"
string: "&lt;/editedBy&gt;\n"
string: "&lt;/kobject&gt;\n"
string: "&lt;?xml version='1.0' encoding='UTF-8' ?&gt;\n"
string: 'viewUrl'
string: ''
string: 'viewLink'
string: ''
string: 'editUrl'
string: ''
string: 'editLink'
string: ''
string: 'delUrl'
string: ''
string: 'delLink'
string: ''
string: 'newUrl'
string: ''
string: 'newLink'
string: ''
string: 'notifications'
string: 'Notifications_UserIndex'
string: 'show'
string: 'viewUrl'
string: '%%serverPath%%Notifications/showuserindex/'
string: 'UID'
string: 'viewLink'
string: "&lt;a href='"
string: 'viewUrl'
string: "'&gt;[ more &amp;gt;gt; ]&lt;/a&gt;"
string: 'notifications'
string: 'Notifications_UserIndex'
string: 'edit'
string: 'edit'
string: 'editUrl'
string: '%%serverPath%%Notifications/edituserindex/'
string: 'UID'
string: 'editLink'
string: "&lt;a href='"
string: 'editUrl'
string: "'&gt;[ edit ]&lt;/a&gt;"
string: 'notifications'
string: 'Notifications_UserIndex'
string: 'edit'
string: 'delete'
string: 'delUrl'
string: '%%serverPath%%Notifications/deluserindex/'
string: 'UID'
string: 'delLink'
string: "&lt;a href='"
string: 'delUrl'
string: "'&gt;[ delete ]&lt;/a&gt;"
string: 'UIDJsClean'
string: 'UID'
string: "notificationUID='"
string: "'"
string: "userUID='"
string: "'"
string: 'Notifications_UserIndex'

<b>scanning file: /var/www/an2google/trunk/modules/notifications/models/notification.mod.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	A description of an event which users may view in their feed
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //member variables
comment: //----------------------------------------------------------------------------------------------
comment: //_	currently loaded database record [array]
comment: //_	database table definition [array]
comment: //_	set to true when an object has been loaded [bool]
comment: //_ UID [string]
comment: //_ module [string]
comment: //_ model [string]
comment: //_ ref:*_* [string]
comment: //_ title [string]
comment: //_ wyswyg [string]
comment: //_ varchar(255) [string]
comment: //_ datetime [string]
comment: //_ ref:Users_User [string]
comment: //_ datetime [string]
comment: //_ ref:Users_User [string]
comment: //_	people to whom this notification was sent [array]
comment: //_	set to true when members are loaded
comment: //----------------------------------------------------------------------------------------------
comment: //. constructor
comment: //----------------------------------------------------------------------------------------------
comment: //opt: UID - UID of a Notification object [string]
comment: // initialise table schema
comment: // try load an object from the database
comment: // check if we did
comment: // make new object
comment: // initialize
comment: // set default title
comment: //----------------------------------------------------------------------------------------------
comment: //. load an object from the database given its UID
comment: //----------------------------------------------------------------------------------------------
comment: //arg: UID - UID of a Notification object [string]
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //. load Notification object serialized as an associative array
comment: //----------------------------------------------------------------------------------------------
comment: //arg: ary - associative array of members and values [array]
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //. save the current object to database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string on success, html report of errors on failure [string]
comment: //: $db-&gt;save(...) will raise an object_updated event if successful
comment: //----------------------------------------------------------------------------------------------
comment: //. check that object is correct before allowing it to be stored in database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string if object passes, warning message if not [string]
comment: //----------------------------------------------------------------------------------------------
comment: //. database table definition and content versioning
comment: //----------------------------------------------------------------------------------------------
comment: //returns: information for constructing SQL queries [array]
comment: //table columns
comment: //these fields will be indexed
comment: //revision history will be kept for these fields
comment: //----------------------------------------------------------------------------------------------
comment: //. serialize this object to an array
comment: //----------------------------------------------------------------------------------------------
comment: //returns: associative array of all members which define this instance [array]
comment: //----------------------------------------------------------------------------------------------
comment: //. serialize this object to xml
comment: //----------------------------------------------------------------------------------------------
comment: //arg: xmlDec - include xml declaration? [bool]
comment: //arg: indent - string with which to indent lines [bool]
comment: //returns: xml serialization of this object [string]
comment: //NOTE: any members which are not XML clean should be marked up before sending
comment: //----------------------------------------------------------------------------------------------
comment: //. make an extended array of data views may need
comment: //----------------------------------------------------------------------------------------------
comment: //returns: associative array of members, metadata and partial views [array]
comment: //% extended array of properties [array:string]
comment: //------------------------------------------------------------------------------------------
comment: //	links
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	general
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	javascript
comment: //------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //. delete current object from the database
comment: //----------------------------------------------------------------------------------------------
comment: //: $db-&gt;delete(...) will raise an object_deleted event on success [bool]
comment: //returns: true on success, false on failure [bool]
comment: // nothing to do
comment: //==============================================================================================
comment: //	memberships (people to whom the notification is addressed)
comment: //==============================================================================================
comment: //----------------------------------------------------------------------------------------------
comment: //. load membership of this notification
comment: //----------------------------------------------------------------------------------------------
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //. discover if a user is amember of this 
comment: //----------------------------------------------------------------------------------------------
comment: //arg: userUID - UID of a Users_User object [string]
comment: //returns: true on success, false on failure [bool]
string: ''
string: ''
string: 'New Notification '
string: 'UID'
string: 'refModule'
string: 'refModel'
string: 'refUID'
string: 'title'
string: 'content'
string: 'refUrl'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: ''
string: "Database error.&lt;br/&gt;\n"
string: ''
string: ''
string: ''
string: "No UID.&lt;br/&gt;\n"
string: 'module'
string: 'notifications'
string: 'model'
string: 'notifications_notification'
string: 'fields'
string: 'UID'
string: 'VARCHAR(33)'
string: 'refModule'
string: 'TEXT'
string: 'refModel'
string: 'TEXT'
string: 'refUID'
string: 'VARCHAR(33)'
string: 'title'
string: 'VARCHAR(255)'
string: 'content'
string: 'MEDIUMTEXT'
string: 'refUrl'
string: 'VARCHAR(255)'
string: 'createdOn'
string: 'DATETIME'
string: 'createdBy'
string: 'VARCHAR(33)'
string: 'editedOn'
string: 'DATETIME'
string: 'editedBy'
string: 'VARCHAR(33)'
string: 'indices'
string: 'UID'
string: '10'
string: 'refModule'
string: '10'
string: 'refModel'
string: '10'
string: 'refUID'
string: '10'
string: 'createdOn'
string: ''
string: 'createdBy'
string: '10'
string: 'editedOn'
string: ''
string: 'editedBy'
string: '10'
string: 'nodiff'
string: 'UID'
string: 'refModule'
string: 'refModel'
string: 'refUID'
string: 'title'
string: 'content'
string: 'refUrl'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: ''
string: "&lt;kobject type='notifications_notification'&gt;\n"
string: "    &lt;UID&gt;"
string: "&lt;/UID&gt;\n"
string: "    &lt;refModule&gt;"
string: "&lt;/refModule&gt;\n"
string: "    &lt;refModel&gt;"
string: "&lt;/refModel&gt;\n"
string: "    &lt;refUID&gt;"
string: "&lt;/refUID&gt;\n"
string: "    &lt;title&gt;"
string: "&lt;/title&gt;\n"
string: "    &lt;content&gt;&lt;![CDATA["
string: "]]&gt;&lt;/content&gt;\n"
string: "    &lt;refUrl&gt;"
string: "&lt;/refUrl&gt;\n"
string: "    &lt;createdOn&gt;"
string: "&lt;/createdOn&gt;\n"
string: "    &lt;createdBy&gt;"
string: "&lt;/createdBy&gt;\n"
string: "    &lt;editedOn&gt;"
string: "&lt;/editedOn&gt;\n"
string: "    &lt;editedBy&gt;"
string: "&lt;/editedBy&gt;\n"
string: "&lt;/kobject&gt;\n"
string: "&lt;?xml version='1.0' encoding='UTF-8' ?&gt;\n"
string: 'viewUrl'
string: ''
string: 'viewLink'
string: ''
string: 'editUrl'
string: ''
string: 'editLink'
string: ''
string: 'delUrl'
string: ''
string: 'delLink'
string: ''
string: 'newUrl'
string: ''
string: 'newLink'
string: ''
string: 'notifications'
string: 'notifications_notification'
string: 'show'
string: 'viewUrl'
string: '%%serverPath%%Notifications/shownotification/'
string: 'UID'
string: 'viewLink'
string: "&lt;a href='"
string: 'viewUrl'
string: "'&gt;[ more &amp;gt;gt; ]&lt;/a&gt;"
string: 'notifications'
string: 'notifications_notification'
string: 'edit'
string: 'edit'
string: 'editUrl'
string: '%%serverPath%%Notifications/editnotification/'
string: 'UID'
string: 'editLink'
string: "&lt;a href='"
string: 'editUrl'
string: "'&gt;[ edit ]&lt;/a&gt;"
string: 'notifications'
string: 'notifications_notification'
string: 'edit'
string: 'delete'
string: 'delUrl'
string: '%%serverPath%%Notifications/delnotification/'
string: 'UID'
string: 'delLink'
string: "&lt;a href='"
string: 'delUrl'
string: "'&gt;[ delete ]&lt;/a&gt;"
string: 'createdOnLong'
string: 'F nS Y'
string: 'createdOn'
string: 'editedOnLong'
string: 'F nS Y'
string: 'editedOn'
string: 'UIDJsClean'
string: 'UID'
string: 'contentJsVar64'
string: 'content'
string: 'UID'
string: 'Js64'
string: 'contentJs64'
string: 'contentJsVar64'
string: 'content'
string: 'contentSummary'
string: 'content'
string: "notificationUID='"
string: "'"
string: 'Notifications_UserIndex'
string: '*'
string: ''
string: 'userUID'

<b>scanning file: /var/www/an2google/trunk/modules/notifications/inc/relationships.inc.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	relationships between the current user and notifications
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: refModel - type of object [string]
comment: //arg: UID - UID of an object [string]
comment: //arg: relationship - between this object and a user [string]
comment: //arg: userUID - UID of the user related to this object [string]
comment: //returns: true if the given relationship exists, otherwise false [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //	get the user we want to know about
comment: //----------------------------------------------------------------------------------------------	
comment: //echo "checking relationship - refModel: $refModel, refUID: $UID, relationship: $relationship, userUID: $userUID &lt;br/&gt;\n";
comment: //----------------------------------------------------------------------------------------------
comment: //	relationships of Notifications objects
comment: //----------------------------------------------------------------------------------------------
comment: // try load the object
comment: // check that we did
comment: // if the user created this notification
comment: //..........................................................................
comment: // if the notification was sent to this user
comment: //..........................................................................
string: 'modules/users/models/user.mod.php'
string: 'modules/users/models/friendship.mod.php'
string: 'modules/users/models/role.mod.php'
string: 'notifications_notification'
string: 'creator'
string: 'member'

<b>scanning file: /var/www/an2google/trunk/modules/notifications/inc/maintenance.inc.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	maintenance script for Notifications module
comment: //--------------------------------------------------------------------------------------------------
comment: //+	reports are human-readable HTML, with script-readable HTML comments
comment: //--------------------------------------------------------------------------------------------------
comment: //|	install the Notifications module
comment: //--------------------------------------------------------------------------------------------------
comment: //returns: html report or false if not authorized [string][bool]
comment: //----------------------------------------------------------------------------------------------
comment: //	check all Notification objects
comment: //----------------------------------------------------------------------------------------------
comment: // remove database markup
comment: // load into model
comment: //------------------------------------------------------------------------------------------
comment: //	check references to other objects
comment: //------------------------------------------------------------------------------------------
comment: // TODO: take action here, if possibe assign valid reference to a *_*
comment: // TODO: take action here, if possibe assign valid reference to a Images_Image
comment: // TODO: take action here, if possibe assign valid reference to a Users_User
comment: // TODO: take action here, if possibe assign valid reference to a Users_User
comment: // end while Notifications_Notification
comment: //----------------------------------------------------------------------------------------------
comment: //	add Notification objects to report
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check all UserIndex objects
comment: //----------------------------------------------------------------------------------------------
comment: // remove database markup
comment: // load into model
comment: //------------------------------------------------------------------------------------------
comment: //	check references to other objects
comment: //------------------------------------------------------------------------------------------
comment: // TODO: take action here, if possibe assign valid reference to a Users_User
comment: // TODO: take action here, if possibe assign valid reference to a Notifications_Notification
comment: // TODO: take action here, if possibe assign valid reference to a Users_User
comment: // TODO: take action here, if possibe assign valid reference to a Users_User
comment: // end while Notifications_UserIndex
comment: //----------------------------------------------------------------------------------------------
comment: //	add UserIndex objects to report
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	done
comment: //----------------------------------------------------------------------------------------------
string: 'modules/notifications/models/notification.mod.php'
string: 'modules/notifications/models/userindex.mod.php'
string: 'admin'
string: ''
string: 'UID'
string: 'title'
string: 'error'
string: "select * from Notifications_Notification"
string: '*_*'
string: 'invalid reference (refUID:*_*)'
string: 'images_image'
string: 'invalid reference (imageUID:Images_Image)'
string: 'users_user'
string: 'invalid reference (createdBy:Users_User)'
string: 'users_user'
string: 'invalid reference (editedBy:Users_User)'
string: 'UID'
string: 'UID'
string: 'error'
string: "select * from Notifications_UserIndex"
string: 'users_user'
string: 'invalid reference (userUID:Users_User)'
string: 'notifications_notification'
string: 'invalid reference (notificationUID:Notifications_Notification)'
string: 'users_user'
string: 'invalid reference (createdBy:Users_User)'
string: 'users_user'
string: 'invalid reference (editedBy:Users_User)'

<b>scanning file: /var/www/an2google/trunk/modules/notifications/inc/install.inc.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	install script for Notifications module
comment: //--------------------------------------------------------------------------------------------------
comment: //+	reports are human-readable HTML, with script-readable HTML comments
comment: //--------------------------------------------------------------------------------------------------
comment: //|	install the Notifications module
comment: //--------------------------------------------------------------------------------------------------
comment: //returns: html report or false if not authorized [string][bool]
comment: //----------------------------------------------------------------------------------------------
comment: //	create or upgrade Notifications_Notification table
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	create or upgrade Notifications_UserIndex table
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	done
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
comment: //|	discover if this module is installed
comment: //--------------------------------------------------------------------------------------------------
comment: //:	if installed correctly report will contain HTML comment &lt;!-- installed correctly --&gt;
comment: //returns: HTML installation status report [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	ensure the table which stores Notification objects exists and is correct
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	ensure the table which stores UserIndex objects exists and is correct
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	done
comment: //----------------------------------------------------------------------------------------------
string: 'core/dbdriver/mysqladmin.dbd.php'
string: 'modules/notifications/models/notification.mod.php'
string: 'modules/notifications/models/userindex.mod.php'
string: 'admin'
string: ''
string: 'admin'
string: ''
string: '&lt;!-- table installed correctly --&gt;'
string: '&lt;!-- module installed correctly --&gt;'

<b>scanning file: /var/www/an2google/trunk/modules/notifications/actions/show.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	display the current user's notifications
comment: //--------------------------------------------------------------------------------------------------
comment: //TODO: allow users to see other people's activity feeds
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and authorization
comment: //----------------------------------------------------------------------------------------------
comment: // user must be logged in
comment: // only admins can see other peoples notification feed
comment: //----------------------------------------------------------------------------------------------
comment: //	render the page
comment: //----------------------------------------------------------------------------------------------
string: 'modules/users/models/user.mod.php'
string: 'public'
string: 'page'
string: 'page'
string: ''
string: 'admin'
string: 'modules/notifications/actions/show.page.php'
string: 'userUID'
string: 'userRa'
string: 'userName'
string: 'pageNo'

<b>scanning file: /var/www/an2google/trunk/modules/notifications/actions/save.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	save changes to an Notification object
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check permissions and POST variables
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	load and update the object
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: sanitize this
comment: //----------------------------------------------------------------------------------------------
comment: //	check that object was saved and redirect
comment: //----------------------------------------------------------------------------------------------
string: 'modules/notifications/models/notification.mod.php'
string: 'admin'
string: 'Only admins can use this interface.'
string: 'action'
string: 'action not specified'
string: 'saveNotification'
string: 'action'
string: 'action not supported'
string: 'UID'
string: 'UID not POSTed'
string: 'UID'
string: 'notifications'
string: 'notifications_notification'
string: 'edit'
string: 'You are not authorized to edit this Notification.'
string: 'refModule'
string: 'reference module not specified'
string: 'refModel'
string: 'reference model not specified'
string: 'refUID'
string: 'reference object UID not specified'
string: 'refModule'
string: 'specified module does not exist'
string: 'refModel'
string: 'refUID'
string: 'specified owner does not exist in database'
string: "could not load Notification $UID"
string: 'refmodule'
string: 'refmodel'
string: 'refuid'
string: 'title'
string: 'content'
string: 'refurl'
string: ''
string: 'Saved changes to Notification'
string: 'ok'
string: 'Could not save Notification:&lt;br/&gt;'
string: 'bad'
string: 'return'
string: 'return'
string: 'notifications/shownotification/'

<b>scanning file: /var/www/an2google/trunk/modules/notifications/actions/import.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	import user notifications from pervious version of module (XML)
comment: //--------------------------------------------------------------------------------------------------
comment: //$conditions[] = "user='admin'";
string: 'modules/notifications/models/notification.mod.php'
string: 'modules/notifications/models/userindex.mod.php'
string: 'admin'
string: "1=1"
string: 'notices'
string: '*'
string: "&lt;h1&gt;User: "
string: 'user'
string: "&lt;/h1&gt;"
string: "&lt;textarea rows='10' cols='80'&gt;"
string: 'notices'
string: "&lt;/textarea&gt;&lt;br/&gt;\n"
string: 'notices'
string: 'users'
string: 'users_user'
string: 'user'
string: '2010-08-23 17:19:11'
string: 'user'
string: '2010-08-23 17:19:11'
string: 'user'
string: 'value'
string: 'type'
string: 'title'
string: 'content'
string: '&lt;b&gt;&lt;i&gt;&lt;a&gt;&lt;div&gt;&lt;p&gt;&lt;small&gt;'
string: 'url'
string: 'UID'
string: 'timestamp'
string: "&lt;b&gt;"
string: 'type'
string: ":&lt;/b&gt; "
string: 'value'
string: "&lt;br/&gt;\n"
string: ''
string: "...saved ("
string: ")&lt;br/&gt;\n"
string: "...NOT saved ("
string: ")"
string: "&lt;br/&gt;&lt;hr/&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/notifications/actions/edit.act.php</b>
comment: //require_once($kapenta-&gt;installPath . 'modules/notifications/models/notification.mod.php');
comment: // ^ sometimes needed for breadcrumbs, etc
comment: //--------------------------------------------------------------------------------------------------
comment: //*	show form to edit a Notification object
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	render the page
comment: //----------------------------------------------------------------------------------------------
string: ''
string: 'Notification not specified'
string: 'admin'
string: 'Only admins can use this interface.'
string: 'notifications_notification'
string: 'notifications'
string: 'notifications_notification'
string: 'edit'
string: 'You are not authorized to edit this Notifications.'
string: 'modules/notifications/actions/edit.page.php'
string: 'UID'
string: 'notificationUID'

<b>scanning file: /var/www/an2google/trunk/modules/notifications/actions/default.act.php</b>
string: 'modules/notifications/actions/show.act.php'

<b>scanning file: /var/www/an2google/trunk/modules/moblog/views/tagged.fn.php</b>
comment: //TODO: figure out how to get rid of this dependancy
comment: //--------------------------------------------------------------------------------------------------
comment: //|	show  a list of all moblog posts sharing a given tag
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: UID - UID of a Tags_Tag object [string]
comment: //opt: tagUID - overrides UID if present [string]
comment: //opt: pageNo - TODO, pagination [string]
comment: //opt: num - TODO, number of items per page [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: permissions check here
comment: //----------------------------------------------------------------------------------------------
comment: //	get list of blog posts from database
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
string: 'modules/tags/models/tag.mod.php'
string: ''
string: 'tagUID'
string: 'UID'
string: 'tagUID'
string: 'UID'
string: ''
string: 'UID'
string: '(unknown tag)'
string: "SELECT Moblog_Post.UID as postUID from Moblog_Post, Tags_Index "
string: "WHERE Moblog_Post.UID=Tags_Index.refUID "
string: "AND Tags_Index.tagUID='"
string: "' "
string: "ORDER by Moblog_Post.title"
string: "(nothing with this tag at present)"
string: "[[:moblog::summary::raUID="
string: 'postUID'
string: ":]]"

<b>scanning file: /var/www/an2google/trunk/modules/moblog/views/summarynav.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	summarise for the nav (300 wide)
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - recordAlias or UID or groups entry [string]
comment: //opt: postUID - overrides raUID [string]
comment: //% return value [html]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/moblog/models/post.mod.php'
string: 'modules/moblog/models/precache.mod.php'
string: ''
string: 'postUID'
string: 'raUID'
string: 'postUID'
string: 'raUID'
string: ''
string: 'raUID'
string: ''
string: 'moblog'
string: 'moblog_post'
string: 'show'
string: ''
string: 'modules/moblog/views/summarynav.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/moblog/views/summarylist.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	summary list (the 'moblog itself')
comment: //--------------------------------------------------------------------------------------------------
comment: //opt: page - page no to display (default is 0) [string]
comment: //opt: num - number of records per page (default is 30) [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	count visible posts
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	load a page worth of objects from the database
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/moblog/models/post.mod.php'
string: 'modules/moblog/models/precache.mod.php'
string: ''
string: 'moblog'
string: 'moblog_post'
string: 'show'
string: ''
string: 'num'
string: 'num'
string: 'page'
string: 'page'
string: " (published='yes' or createdBy='"
string: "') "
string: 'userUID'
string: "createdBy='"
string: 'userUID'
string: "'"
string: 'schoolUID'
string: "school='"
string: 'schoolUID'
string: "'"
string: 'moblog_post'
string: '%%serverPath%%moblog/'
string: "[[:theme::pagination::page="
string: "::total="
string: "::link="
string: ":]]\n"
string: 'moblog_post'
string: '*'
string: 'createdOn DESC'
string: 'modules/moblog/views/summary.block.php'
string: 'rawblock64'
string: '[[:moblog::summary::UID='
string: 'UID'
string: ':]]'
string: 'post-'
string: 'moblog'
string: "[[:moblog::summary::UID="
string: 'UID'
string: ":]]"

<b>scanning file: /var/www/an2google/trunk/modules/moblog/views/summary.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	summary
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - Alias or UID of a blog post [string]
comment: //opt: UID - overrides raUID if present [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make and return the block
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	set AJAX triggers
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/moblog/models/post.mod.php'
string: 'modules/moblog/models/precache.mod.php'
string: ''
string: 'UID'
string: 'raUID'
string: 'UID'
string: 'raUID'
string: ''
string: 'raUID'
string: ''
string: 'moblog'
string: 'moblog_post'
string: 'show'
string: ''
string: 'modules/moblog/views/summary.block.php'
string: 'rawblock64'
string: 'rawblock'
string: 'post-'
string: 'moblog'
string: 'rawblock'

<b>scanning file: /var/www/an2google/trunk/modules/moblog/views/showauthornav.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	summary of author in the nav
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - recordAlias or UID of post [string]
comment: //opt: postUID - overrides raUID [string]
comment: //% return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions	
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/moblog/models/post.mod.php'
string: 'modules/moblog/models/precache.mod.php'
string: ''
string: 'postUID'
string: 'raUID'
string: 'postUID'
string: 'raUID'
string: ''
string: 'raUID'
string: ''
string: 'moblog'
string: 'moblog_post'
string: 'show'
string: ''
string: 'users_user'
string: "&lt;a href='/moblog/blog/"
string: "'&gt;"
string: "[[:images::default::refUID="
string: "::size=width300::link=no:]]&lt;/a&gt;\n"
string: "[[:users::summarynav::userUID="
string: ":]]\n"

<b>scanning file: /var/www/an2google/trunk/modules/moblog/views/show.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	show
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - recordAlias or UID of a post [string]
comment: //% return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions	
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	set AJAX triggers
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/moblog/models/post.mod.php'
string: 'modules/moblog/models/precache.mod.php'
string: ''
string: 'raUID'
string: ''
string: 'raUID'
string: ''
string: 'moblog'
string: 'moblog_post'
string: 'show'
string: ''
string: 'rawblock64'
string: 'rawblock'
string: 'modules/moblog/views/show.block.php'
string: 'post-'
string: 'moblog'
string: 'rawblock'

<b>scanning file: /var/www/an2google/trunk/modules/moblog/views/schoolsummarylist.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	summary list (the 'moblog itself')
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: schoolUID - UID of a Schools_School object [string]
comment: //opt: page - page no to display (default is 0) [string]
comment: //opt: num - number of records per page (default is 30) [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	count visible posts
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	load a page worth of objects from the database
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/moblog/models/post.mod.php'
string: 'modules/moblog/models/precache.mod.php'
string: ''
string: ''
string: 'moblog'
string: 'moblog_post'
string: 'show'
string: ''
string: 'schoolUID'
string: '(No schoolUID)'
string: 'schoolUID'
string: 'schools_school'
string: 'No such schoolUID'
string: 'num'
string: 'num'
string: 'page'
string: 'page'
string: 'schools_school'
string: "school='"
string: "'"
string: " (published='yes' or createdBy='"
string: "') "
string: 'moblog_post'
string: '%%serverPath%%moblog/school/'
string: '/'
string: "[[:theme::pagination::page="
string: "::total="
string: "::link="
string: ":]]\n"
string: 'moblog_post'
string: '*'
string: 'createdOn DESC'
string: 'modules/moblog/views/summary.block.php'
string: 'rawblock64'
string: '[[:moblog::summary::UID='
string: 'UID'
string: ':]]'
string: 'post-'
string: 'moblog'
string: "[[:moblog::summary::UID="
string: 'UID'
string: ":]]"

<b>scanning file: /var/www/an2google/trunk/modules/moblog/views/schoolstatsnav.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	blog stats (formatted for nav)
comment: //--------------------------------------------------------------------------------------------------
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check permissions and arguments
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: add permissions and arguments
comment: //----------------------------------------------------------------------------------------------
comment: //	load states from database	//TODO: precache this
comment: //----------------------------------------------------------------------------------------------
comment: //echo $sql;
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: remove inermodule dependancy (block on schools module?)
string: 'modules/moblog/models/post.mod.php'
string: 'modules/moblog/models/precache.mod.php'
string: ''
string: 'schools'
string: 'schools_school'
string: 'show'
string: ''
string: "SELECT count(UID) AS postCount, school "
string: "FROM Moblog_Post "
string: "GROUP BY school "
string: "ORDER BY postCount DESC"
string: 'School'
string: 'Posts'
string: 'school'
string: 'schools_school'
string: 'schools_school'
string: '[[:schools::name::schoolUID='
string: '::link=no:]]'
string: ''
string: "%%serverPath%%moblog/school/"
string: "&lt;a href='"
string: "'&gt;$schoolName&lt;/a&gt;"
string: "&lt;b&gt;"
string: "&lt;/b&gt;"
string: 'postCount'
string: "&lt;b&gt;"
string: 'postCount'
string: "&lt;/b&gt;"
string: 'postCount'

<b>scanning file: /var/www/an2google/trunk/modules/moblog/views/schoolrecentnav.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	list recent posts for nav from a particular school
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: schoolUID - UID of a school record [string]
comment: //opt: num - number of posts to show (default is 10) [string]
comment: //%	number of recent items to show [int]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //if (false == $db-&gt;objectExists('schools_school', $args['schoolUID'])) { return ''; }
comment: //----------------------------------------------------------------------------------------------
comment: //	get recent posts from this school
comment: //----------------------------------------------------------------------------------------------
comment: //$sql = "select UID from moblog " 
comment: //	 . "where school='". $db-&gt;addMarkup($args['schoolUID']) ."' and published='yes'"
comment: //	 . "order by createdOn limit " . $db-&gt;addMarkup($num);
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: make this more efficient
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/moblog/models/post.mod.php'
string: 'modules/moblog/models/precache.mod.php'
string: ''
string: 'public'
string: '[[:users::pleaselogin:]]'
string: 'schoolUID'
string: ''
string: 'num'
string: 'num'
string: "school='"
string: 'schoolUID'
string: "'"
string: "published='yes'"
string: 'moblog_post'
string: '*'
string: 'createdOn'
string: ''
string: "[[:moblog::summarynav::postUID="
string: 'UID'
string: ":]]"

<b>scanning file: /var/www/an2google/trunk/modules/moblog/views/newpostformnav.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	form to add a post to ones own blog, formatted for nav (300px wide)
comment: //--------------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/moblog/models/post.mod.php'
string: 'modules/moblog/models/precache.mod.php'
string: 'modules/moblog/views/newformnav.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/moblog/views/menunewpost.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	creates a submenu item for creating a new post, deprecated - TODO: remove or replace this
comment: //--------------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/moblog/models/post.mod.php'
string: 'modules/moblog/models/precache.mod.php'
string: 'moblog'
string: 'moblog_post'
string: 'edit'
string: 'TODO:UIDHERE'
string: '[[:theme::submenu::label=New Post::link=/moblog/new/:]]'

<b>scanning file: /var/www/an2google/trunk/modules/moblog/views/menu.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	moblog submenu
comment: //--------------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/moblog/models/post.mod.php'
string: 'modules/moblog/models/precache.mod.php'
string: 'modules/moblog/views/menu.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/moblog/views/listrecentsamenav.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	list x recent posts from the same blog (ie same user) as the post UID supplied
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - recordAlias or UID of moblog post [string]
comment: //opt: postUID - overrides raUID [string]
comment: //opt: num - max number of posts to show (default 10) [string]
comment: //%	return value [string]
comment: //% default max number of items to show [int]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	load items from database
comment: //----------------------------------------------------------------------------------------------
comment: //$sql = "select * from moblog"
comment: //	 . " where createdBy='" . $model-&gt;createdBy . "'"
comment: //	 . " and (published='yes' or createdBy='" . $user-&gt;UID . "')"
comment: //	 . " order by createdOn DESC limit $num ";	
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/moblog/models/post.mod.php'
string: 'modules/moblog/models/precache.mod.php'
string: ''
string: 'public'
string: '[[:users::pleaselogin:]]'
string: 'postUID'
string: 'raUID'
string: 'postUID'
string: 'num'
string: 'num'
string: 'raUID'
string: ''
string: 'raUID'
string: ''
string: "createdBy='"
string: "'"
string: "(published='yes' or createdBy='"
string: "')"
string: 'moblog_post'
string: '*'
string: "createdOn DESC"
string: 'modules/moblog/views/summarynav.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/moblog/views/listrecentnav.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	list x recent posts from the same blog (ie same user) as the post UID supplied
comment: //--------------------------------------------------------------------------------------------------
comment: //opt: num - max number of posts to show (default is 10) [string]
comment: //%	return value [string]
comment: //%	default number of posts to show [int]	
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	load items from database
comment: //----------------------------------------------------------------------------------------------
comment: //$sql = "select * from moblog"
comment: //	 . " where published='yes'"
comment: //	 . " order by createdOn DESC limit $num";	
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/moblog/models/post.mod.php'
string: ''
string: 'num'
string: 'num'
string: 'moblog'
string: 'moblog_post'
string: 'show'
string: ''
string: ''
string: "published='yes'"
string: 'moblog_post'
string: '*'
string: 'createdOn DESC'
string: 'modules/moblog/views/summarynav.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/moblog/views/listpopularnav.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	list x recent posts from the same blog (ie same user) as the post UID supplied
comment: //--------------------------------------------------------------------------------------------------
comment: //opt: num - max number of posts to show (default is 10) [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check permissions and arguments
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	load a set of popular posts from the database
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block and return
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/moblog/models/post.mod.php'
string: 'modules/moblog/models/precache.mod.php'
string: ''
string: 'moblog'
string: 'moblog_post'
string: 'show'
string: ''
string: 'num'
string: 'num'
string: "published='yes'"
string: 'moblog_post'
string: '*'
string: 'viewcount DESC'
string: 'modules/moblog/views/summarynav.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/moblog/views/image.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	find the first image associated with a mobblog post  //TODO: remove this
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - recordAlias or UID or groups entry [string]
comment: //opt: postUID - overrides raUID [string]
comment: //opt: size - width100, width200, width300, width570, thumb, thumbsm or thumb90 (default width300) [string]
comment: //opt: link - link to larger image (yes|no) (default is yes) [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: use a switch, or load image sizes from Images_Image module
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/moblog/models/post.mod.php'
string: 'modules/moblog/models/precache.mod.php'
string: 'width300'
string: 'yes'
string: ''
string: 'postUID'
string: 'raUID'
string: 'postUID'
string: 'raUID'
string: ''
string: 'no'
string: 'link'
string: 'no'
string: 'size'
string: 'size'
string: 'thumb'
string: 'thumb'
string: 'size'
string: 'thumbsm'
string: 'thumbsm'
string: 'size'
string: 'thumb90'
string: 'thumb90'
string: 'size'
string: 'width100'
string: 'width100'
string: 'size'
string: 'width200'
string: 'width200'
string: 'size'
string: 'width300'
string: 'width300'
string: 'size'
string: 'width570'
string: 'width570'
string: 'raUID'
string: ''
string: "[[:images::default::refModule=moblog::refModel=Moblog_Post::refUID="
string: "::size=$size::altUser="
string: ":]]"
string: 'yes'
string: "&lt;a href='/moblog/show/"
string: "'&gt;$block&lt;/a&gt;"

<b>scanning file: /var/www/an2google/trunk/modules/moblog/views/editform.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	editform
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - recordAlias or UID of post to edit [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check permissions and arguments
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/moblog/models/post.mod.php'
string: 'modules/moblog/models/precache.mod.php'
string: ''
string: 'raUID'
string: ''
string: 'raUID'
string: ''
string: 'moblog'
string: 'moblog_post'
string: 'edit'
string: ''
string: 'contentJs64'
string: 'contentJs64'
string: 'content'
string: 'modules/moblog/views/editform.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/moblog/models/precache.mod.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	object for moblog precache
comment: //--------------------------------------------------------------------------------------------------
comment: //+	to avoid making 9001 queries to create a feed combining blog posts by a user's network,
comment: //+	the feed is generated in advance as items are created and removed.
comment: //
comment: //+	the precache is stored as a php array of postUID =&gt; timestamp, sorted by timestamp
comment: //
comment: //+	at present precaching is only done for users networks, but could concievably be done for groups,
comment: //+	projects, etc
comment: //----------------------------------------------------------------------------------------------
comment: //	member variables (as retieved from database)
comment: //----------------------------------------------------------------------------------------------
comment: // currently loaded record [array]
comment: // database structure [array]
comment: // 
comment: //----------------------------------------------------------------------------------------------
comment: //.	constructor
comment: //----------------------------------------------------------------------------------------------
comment: //arg: refTable - name of a database table [string]
comment: //arg: refUID - UID [string]
comment: //--------------------------------------------------------------------------------------
comment: //	precache doesn't exist, create it
comment: //--------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //.	load an object given its UID
comment: //----------------------------------------------------------------------------------------------
comment: //arg: UID - UID of a prcache object [string]
comment: //----------------------------------------------------------------------------------------------
comment: //.	load an object provided as an associative array
comment: //----------------------------------------------------------------------------------------------
comment: //arg: ary - associative array of fields and values [array]
comment: //----------------------------------------------------------------------------------------------
comment: //.	save the current object to database
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //.	discover if a precache exists for a given user, returns UID on success
comment: //----------------------------------------------------------------------------------------------
comment: //arg: refTable - name of a database table [string]
comment: //arg: refUID - UID [string]	
comment: //returns: precache object UID or false if none found [string][bool]
comment: //TODO: use dbLoadRange
comment: //----------------------------------------------------------------------------------------------
comment: //.	verify - check that a object is valid before allowing it to be stored in the database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string if object passes, warning message if not [string]
comment: //----------------------------------------------------------------------------------------------
comment: //.	sql information
comment: //----------------------------------------------------------------------------------------------
comment: //returns: database table layout [array]
comment: //----------------------------------------------------------------------------------------------
comment: //.	serialize this object as an array
comment: //----------------------------------------------------------------------------------------------
comment: //returns: associative array of all variables which define this instance [array]
comment: //----------------------------------------------------------------------------------------------
comment: //.	make an extended array of all data a view will need
comment: //----------------------------------------------------------------------------------------------
comment: //returns: extended array of member variables and metadata [array]
comment: //----------------------------------------------------------------------------------------------
comment: //.	install this module
comment: //----------------------------------------------------------------------------------------------
comment: //returns: html report lines [string]
comment: //, deprecated, this should be handled by ../inc/install.inc.php
comment: //----------------------------------------------------------------------------------------------
comment: //.	expand precache
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //.	collapse precache
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //.	add a blog post to the precache
comment: //----------------------------------------------------------------------------------------------
comment: //arg: postUID - UID of a blog post [string]
comment: //arg: timestamp - then the item was added to the cache [int]
comment: //----------------------------------------------------------------------------------------------
comment: //.	remove a blog post from the precache
comment: //----------------------------------------------------------------------------------------------
comment: //arg: postUID - UID of a blog post [string]
comment: //returns: true on success, false on failure [bool]
string: ''
string: "select UID from moblogprecache "
string: "where refTable='"
string: "' "
string: "and refUID='"
string: "'"
string: 'UID'
string: ''
string: "UID not present.\n"
string: 'model'
string: 'moblogprecache'
string: 'fields'
string: 'UID'
string: 'VARCHAR(30)'
string: 'refTable'
string: 'VARCHAR(30)'
string: 'refUID'
string: 'VARCHAR(30)'
string: 'precache'
string: 'VARCHAR(30)'
string: 'createdOn'
string: 'datetime'
string: 'createdBy'
string: 'VARCHAR(30)'
string: 'editedOn'
string: 'datetime'
string: 'editedBy'
string: 'VARCHAR(30)'
string: 'indices'
string: 'UID'
string: '10'
string: 'refTable'
string: '5'
string: 'refUID'
string: '5'
string: 'nodiff'
string: 'UID'
string: 'precache'
string: "&lt;h3&gt;Installing Moblog Precache&lt;/h3&gt;\n"
string: 'moblogprecache'
string: 'created moblog precache...&lt;br/&gt;'
string: 'moblog precache already installed...&lt;br/&gt;'
string: "\n"
string: 'precache'
string: "|"
string: ''
string: 'delete'
string: "|"
string: 'precache'
string: 'delete'

<b>scanning file: /var/www/an2google/trunk/modules/moblog/models/post.mod.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	object for managing moblog posts
comment: //--------------------------------------------------------------------------------------------------
comment: //+ NOTES:
comment: //+ content can contain a special '{fold}' keyword, which determines how much of the post is included
comment: //+ in the summary.
comment: //
comment: //+ 'published' field allows posts to be invisible to the public while they are being composed or 
comment: //+ until they should be released, values can be 'yes', 'no'.  admins and the user which created a 
comment: //+ post can see unpublished content.
comment: //----------------------------------------------------------------------------------------------
comment: //	member variables (as retieved from database)
comment: //----------------------------------------------------------------------------------------------
comment: //_	currently loaded database record [array]
comment: //_	database table definition [array]
comment: //_	set to true when an object has been loaded [bool]
comment: //_ UID [string]
comment: //_ varchar(33) [string]
comment: //_ varchar(30) [string]
comment: //_ title [string]
comment: //_ wyswyg [string]
comment: //_ varchar(10) [string]
comment: //_ viewcount [string]
comment: //_ datetime [string]
comment: //_ ref:Users_User [string]
comment: //_ datetime [string]
comment: //_ ref:Users_User [string]
comment: //_ alias [string]
comment: //----------------------------------------------------------------------------------------------
comment: //.	constructor
comment: //----------------------------------------------------------------------------------------------
comment: //opt: raUID - alias or UID of a moblog post [string]
comment: // initialise table schema
comment: // try load an object from the database
comment: // check if we did
comment: // make new object
comment: // initialize
comment: // set default title
comment: //----------------------------------------------------------------------------------------------
comment: //. load an object from the database given its UID or an alias
comment: //----------------------------------------------------------------------------------------------
comment: //arg: raUID - UID or alias of a Post object [string]
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //. load Post object serialized as an associative array
comment: //----------------------------------------------------------------------------------------------
comment: //arg: ary - associative array of members and values [array]
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //. save the current object to database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string on success, html report of errors on failure [string]
comment: //: $db-&gt;save(...) will raise an object_updated event if successful
comment: //----------------------------------------------------------------------------------------------
comment: //. check that object is correct before allowing it to be stored in database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string if object passes, warning message if not [string]
comment: //----------------------------------------------------------------------------------------------
comment: //. database table definition and content versioning
comment: //----------------------------------------------------------------------------------------------
comment: //returns: information for constructing SQL queries [array]
comment: //table columns
comment: //these fields will be indexed
comment: //revision history will be kept for these fields
comment: //----------------------------------------------------------------------------------------------
comment: //. serialize this object to an array
comment: //----------------------------------------------------------------------------------------------
comment: //returns: associative array of all members which define this instance [array]
comment: //----------------------------------------------------------------------------------------------
comment: //.	make an extended array of all data a view will need
comment: //----------------------------------------------------------------------------------------------
comment: //returns: associative array of object properties in context of the current user [array]
comment: //------------------------------------------------------------------------------------------
comment: //	authorisation
comment: //------------------------------------------------------------------------------------------
comment: //TODO: full permission set checks
comment: //------------------------------------------------------------------------------------------
comment: //	links
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	namespace conflict - TODO: remove this
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	user
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	unpublished items
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	summarysm (first 300 chars, for nav summary)
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	summary (clipped to {fold})
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	marked up for wyswyg editor
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	all done
comment: //------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //. delete current object from the database
comment: //----------------------------------------------------------------------------------------------
comment: //: $db-&gt;delete(...) will raise an object_deleted event on success [bool]
comment: //returns: true on success, false on failure [bool]
comment: // nothing to do
comment: //----------------------------------------------------------------------------------------------
comment: //.	increment hit count
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: this
comment: //$db-&gt;updateQuiet('moblog', $this-&gt;UID, 'viewcount', ($this-&gt;data['viewcount'] + 1)); 
string: ''
string: ''
string: 'New Post '
string: 'no'
string: 'UID'
string: 'school'
string: 'grade'
string: 'title'
string: 'content'
string: 'published'
string: 'viewcount'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: 'alias'
string: ''
string: 'moblog'
string: 'moblog_post'
string: "Database error.&lt;br/&gt;\n"
string: ''
string: ''
string: ''
string: "No UID.&lt;br/&gt;\n"
string: ''
string: "Please choose a title for this post.&lt;br/&gt;\n"
string: 'module'
string: 'moblog'
string: 'model'
string: 'moblog_post'
string: 'fields'
string: 'UID'
string: 'VARCHAR(33)'
string: 'school'
string: 'VARCHAR(33)'
string: 'grade'
string: 'VARCHAR(30)'
string: 'title'
string: 'VARCHAR(255)'
string: 'content'
string: 'MEDIUMTEXT'
string: 'published'
string: 'VARCHAR(3)'
string: 'viewcount'
string: 'BIGINT(20)'
string: 'createdOn'
string: 'DATETIME'
string: 'createdBy'
string: 'VARCHAR(33)'
string: 'editedOn'
string: 'DATETIME'
string: 'editedBy'
string: 'VARCHAR(33)'
string: 'alias'
string: 'VARCHAR(255)'
string: 'indices'
string: 'UID'
string: '10'
string: 'createdOn'
string: ''
string: 'createdBy'
string: '10'
string: 'editedOn'
string: ''
string: 'editedBy'
string: '10'
string: 'alias'
string: '10'
string: 'nodiff'
string: 'alias'
string: 'UID'
string: 'school'
string: 'grade'
string: 'title'
string: 'content'
string: 'published'
string: 'viewcount'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: 'alias'
string: 'editUrl'
string: ''
string: 'editLink'
string: ''
string: 'viewUrl'
string: ''
string: 'viewLink'
string: ''
string: 'newUrl'
string: ''
string: 'newLink'
string: ''
string: 'delUrl'
string: ''
string: 'delLink'
string: ''
string: 'admin'
string: 'createdBy'
string: 'moblog'
string: 'moblog_post'
string: 'show'
string: 'viewUrl'
string: '%%serverPath%%moblog/'
string: 'viewLink'
string: "&lt;a href='"
string: 'viewUrl'
string: "'&gt;[permalink]&lt;/a&gt;"
string: 'editUrl'
string: '%%serverPath%%moblog/edit/'
string: 'editLink'
string: "&lt;a href='"
string: 'editUrl'
string: "'&gt;[edit]&lt;/a&gt;"
string: 'delUrl'
string: '%%serverPath%%moblog/confirmdelete/UID_'
string: '/'
string: 'delLink'
string: "&lt;a href='"
string: 'delUrl'
string: "'&gt;[delete]&lt;/a&gt;"
string: 'newUrl'
string: "%%serverPath%%moblog/new/"
string: 'newLink'
string: "&lt;a href='"
string: 'newUrl'
string: "'&gt;[new post]&lt;/a&gt;"
string: 'mbTitle'
string: 'title'
string: 'mbContent'
string: 'content'
string: 'createdBy'
string: 'userName'
string: '[[:users::name::userUID='
string: 'createdBy'
string: ':]]'
string: 'userUrl'
string: '%%serverPath%%users/profile/'
string: 'createdBy'
string: 'userLink'
string: '[[:users::namelink::userUID='
string: 'createdBy'
string: ':]]'
string: 'unpublished'
string: ''
string: 'no'
string: 'published'
string: 'unpublished'
string: "&lt;font color='red'&gt;&lt;b&gt;(unpublished)&lt;/b&gt;&lt;/font&gt;"
string: 'summarysm'
string: 'content'
string: 'aboveFold'
string: 'aboveFold'
string: '{fold}'
string: 'aboveFold'
string: 'aboveFold'
string: 'aboveFold'
string: "\n"
string: "&lt;br/&gt;\n"
string: 'aboveFold'
string: 'contentHtml'
string: "\n"
string: "&lt;br/&gt;\n"
string: 'content'
string: 'contentHtml'
string: '{fold}'
string: ''
string: 'contentHtml'
string: 'content'
string: '{fold}'
string: ''
string: 'content'

<b>scanning file: /var/www/an2google/trunk/modules/moblog/inc/relationships.inc.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	relationships between the users and blog posts
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: refModel - type of object [string]
comment: //arg: UID - UID of an object [string]
comment: //arg: relationship - between this object and a user [string]
comment: //arg: userUID - UID of the user related to this object [string]
comment: //returns: true if the given relationship exists, otherwise false [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //	get the user we want to know about
comment: //----------------------------------------------------------------------------------------------	
comment: //----------------------------------------------------------------------------------------------
comment: //	relationships of Gallery object
comment: //----------------------------------------------------------------------------------------------
comment: // try load the object
comment: // check that we did
comment: // relationship exists of user started this project
comment: //..........................................................................
string: 'modules/moblog/models/post.mod.php'
string: 'moblog_post'
string: 'creator'

<b>scanning file: /var/www/an2google/trunk/modules/moblog/inc/maintenance.inc.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //	maintain the moblog
comment: //-------------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	check that all blog posts are correctly aliased
comment: //---------------------------------------------------------------------------------------------
comment: //echo "alias count of moblog '" . $row['title'] . "' is " . count($raAll) . "&lt;br/&gt;\n";
comment: //---------------------------------------------------------------------------------
comment: //	no recordAlias for this blog post, create one
comment: //---------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	compile report
comment: //---------------------------------------------------------------------------------------------
string: 'modules/moblog/models/post.mod.php'
string: "&lt;h2&gt;Checking Aliases...&lt;/h2&gt;"
string: 'UID'
string: 'title'
string: 'alias'
string: "select UID, title, alias from Moblog_Post"
string: 'moblog'
string: 'moblog_post'
string: 'UID'
string: 'UID'
string: 'UID'
string: 'UID'
string: 'title'
string: "&lt;b&gt;Records Checked:&lt;/b&gt; $recordCount&lt;br/&gt;\n"
string: "&lt;b&gt;Errors Found:&lt;/b&gt; $errorCount&lt;br/&gt;\n"
string: "&lt;b&gt;Errors Fixed:&lt;/b&gt; $fixCount&lt;br/&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/moblog/inc/install.inc.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	install script for Moblog module
comment: //--------------------------------------------------------------------------------------------------
comment: //+	reports are human-readable HTML, with script-readable HTML comments
comment: //--------------------------------------------------------------------------------------------------
comment: //|	install the Moblog module
comment: //--------------------------------------------------------------------------------------------------
comment: //returns: html report or false if not authorized [string][bool]
comment: //----------------------------------------------------------------------------------------------
comment: //	create or upgrade Moblog_Post table
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	import objects from old table if upgrading
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	done
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
comment: //|	discover if this module is installed
comment: //--------------------------------------------------------------------------------------------------
comment: //:	if installed correctly report will contain HTML comment &lt;!-- installed correctly --&gt;
comment: //returns: HTML installation status report [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	ensure the table which stores Post objects exists and is correct
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	done
comment: //----------------------------------------------------------------------------------------------
string: 'core/dbdriver/mysqladmin.dbd.php'
string: 'modules/moblog/models/post.mod.php'
string: 'admin'
string: ''
string: 'recordAlias'
string: 'alias'
string: 'hitcount'
string: 'viewcount'
string: 'moblog'
string: "&lt;h3&gt;Imported $count objects from 'moblog' table&lt;/h3&gt;\n"
string: 'admin'
string: ''
string: '&lt;!-- table installed correctly --&gt;'
string: '&lt;!-- module installed correctly --&gt;'

<b>scanning file: /var/www/an2google/trunk/modules/moblog/events/object_updated.on.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //|	fired when an object is saved to database
comment: //-------------------------------------------------------------------------------------------------
comment: //arg: module - module which owned the deleted object [string]
comment: //arg: model - type of deleted object [string]
comment: //arg: UID - UID of deleted object [string]
comment: //---------------------------------------------------------------------------------------------
comment: //	pull triggers
comment: //---------------------------------------------------------------------------------------------
comment: //-------------------------------------------------------------------------------------------------
string: 'modules/moblog/models/post.mod.php'
string: 'in moblog callback: '
string: 'module'
string: 'model'
string: 'UID'
string: 'data'
string: 'moblog'
string: 'module'
string: 'in moblog callback, setting triggers '
string: 'moblog'
string: 'post-any'
string: 'moblog'
string: 'post-'
string: 'UID'
string: 'createdBy'
string: 'data'
string: 'moblog'
string: 'post-by-'
string: 'data'
string: 'createdBy'

<b>scanning file: /var/www/an2google/trunk/modules/moblog/events/comments_added.on.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //	fired when a comment is added
comment: //-------------------------------------------------------------------------------------------------
comment: //arg: refModule - name of module to which a comment was attached
comment: //arg: refUID - UID of object to which comment was attached
comment: //arg: commentUID - UID of the new comment
comment: //arg: comment - text/html of comment
comment: //----------------------------------------------------------------------------------------------
comment: //	send notifications to blogger and their friends
comment: //----------------------------------------------------------------------------------------------
comment: /*  TODO: re-add notifications
	notifyFriends($args['refUID'], $args['commentUID'], 
				  $user-&gt;getName(), $user-&gt;getUrl(),
				  $title, $args['comment'], $url, $imgUID );


	$title = $user-&gt;getNameLink() . " commented on your blog post " . $link;
	notifyUser($args['refUID'], $args['commentUID'], 
				  $user-&gt;getName(), $user-&gt;getUrl(),
				  $title, $args['comment'], $url, $imgUID );

	*/
comment: //-------------------------------------------------------------------------------------------------
string: 'modules/moblog/models/post.mod.php'
string: 'refModule'
string: 'refUID'
string: 'commentUID'
string: 'comment'
string: 'refModule'
string: 'moblog'
string: 'moblog_post'
string: 'refUID'
string: 'refUID'
string: 'viewUrl'
string: "#comment"
string: 'commentUID'
string: "&lt;a href='"
string: "'&gt;"
string: 'title'
string: "&lt;/a&gt;"
string: " commented on "
string: "'s blog post "
string: 'viewUrl'
string: '#comment'
string: 'commentUID'
string: 'moblog'
string: 'refUID'
string: " commented on their own blog post "

<b>scanning file: /var/www/an2google/trunk/modules/moblog/actions/tag.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	show all blog posts with a given tag
comment: //--------------------------------------------------------------------------------------------------
comment: //note: $req-&gt;ref should be a tag name
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: permissions check here
comment: //TODO: pagination setup
comment: //----------------------------------------------------------------------------------------------
comment: //	render the page
comment: //----------------------------------------------------------------------------------------------
string: 'modules/tags/models/tag.mod.php'
string: ''
string: 'No tag given.'
string: 'Tag not recognised.'
string: 'modules/moblog/actions/tag.page.php'
string: 'tagUID'
string: 'tagName'

<b>scanning file: /var/www/an2google/trunk/modules/moblog/actions/show.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	display a moblog post
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check auth and recordAlias
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	find user whose post this is
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	user can create new posts on their own blog
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	increment hit count if not viewed by this user this session
comment: //----------------------------------------------------------------------------------------------
comment: /*
	$viewKey = $model-&gt;UID . '_' . $user-&gt;UID;
	if (array_key_exists('sMoblogView', $_SESSION) == false) { $_SESSION['sMoblogView'] = array(); }
	if (array_key_exists($viewKey , $_SESSION['sMoblogView']) == false) {
		//$_SESSION['sMoblogView'][$viewKey] = 'viewed';
		//$model-&gt;incHitCount();
	} 
	*/
comment: //----------------------------------------------------------------------------------------------
comment: //	render the page
comment: //----------------------------------------------------------------------------------------------
string: 'modules/moblog/models/post.mod.php'
string: 'moblog_post'
string: 'moblog'
string: 'moblog_post'
string: 'show'
string: ''
string: "[[:moblog::newpostformnav:]]\n"
string: ''
string: 'modules/moblog/actions/show.page.php'
string: 'raUID'
string: 'UID'
string: 'userUID'
string: 'userRa'
string: 'userName'
string: 'postTitle'
string: 'newPostForm'

<b>scanning file: /var/www/an2google/trunk/modules/moblog/actions/school.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	display all blog posts from a particular school
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	which school blog to show?
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	show the page
comment: //----------------------------------------------------------------------------------------------
string: 'modules/schools/models/school.mod.php'
string: 'moblog'
string: 'moblog_post'
string: 'show'
string: ''
string: 'modules/moblog/actions/school.page.php'
string: 'raUID'
string: 'schoolUID'
string: 'schoolName'
string: 'schoolRa'
string: 'page,tag'

<b>scanning file: /var/www/an2google/trunk/modules/moblog/actions/save.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	save a blog post
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check POST vars and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: pick an action and implement it
comment: //----------------------------------------------------------------------------------------------
comment: //	update the record	//TODO: use a switch here
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	save it and redirect
comment: //----------------------------------------------------------------------------------------------
string: 'modules/moblog/models/post.mod.php'
string: 'action'
string: 'Action not specified.'
string: 'saveRecord'
string: 'action'
string: 'Action not supported.'
string: 'UID'
string: 'UID not given.'
string: 'UID'
string: 'moblog'
string: 'moblog_post'
string: 'edit'
string: 'You cannot edit this blog post.'
string: 'title'
string: 'title'
string: 'content'
string: 'content'
string: 'published'
string: 'published'
string: ''
string: 'Could not have blog post: '
string: 'bad'
string: 'Blog post updated: '
string: 'ok'
string: 'moblog/'

<b>scanning file: /var/www/an2google/trunk/modules/moblog/actions/new.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	create a new Post object
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check permissions and any POST variables
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	create the object
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check that object was created and redirect
comment: //----------------------------------------------------------------------------------------------
string: 'modules/moblog/models/post.mod.php'
string: 'moblog'
string: 'moblog_post'
string: 'new'
string: 'You are not authorized to create new Posts.'
string: 'school'
string: 'grade'
string: 'title'
string: 'content'
string: 'published'
string: 'viewcount'
string: 'alias'
string: ''
string: 'Created new blog post.&lt;br/&gt;'
string: 'ok'
string: 'moblog/edit/'
string: 'Could not create new Post:&lt;br/&gt;'
string: 'moblog/blog/'

<b>scanning file: /var/www/an2google/trunk/modules/moblog/actions/moblog.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	moblog, all posts of from all blogs ordered by date
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	page variables
comment: //----------------------------------------------------------------------------------------------
comment: // if not specified
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	render the page
comment: //----------------------------------------------------------------------------------------------
string: 'moblog'
string: 'moblog_post'
string: 'show'
string: ''
string: 'You are not authorized to view blog posts.'
string: 'page'
string: 'page'
string: 'modules/moblog/actions/moblog.page.php'
string: 'pageno'

<b>scanning file: /var/www/an2google/trunk/modules/moblog/actions/list.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	list all moblog posts by date
comment: //--------------------------------------------------------------------------------------------------
string: 'moblog'
string: 'moblog_post'
string: 'show'
string: 'modules/moblog/actions/list.page.php'

<b>scanning file: /var/www/an2google/trunk/modules/moblog/actions/edit.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	edit a moblog post and associated files/images
comment: //--------------------------------------------------------------------------------------------------
comment: //	users can edit their own blog, admins can do as they please
comment: //----------------------------------------------------------------------------------------------
comment: //	check authorisation
comment: //----------------------------------------------------------------------------------------------
comment: // no such post
comment: //----------------------------------------------------------------------------------------------
comment: //	show the edit page
comment: //----------------------------------------------------------------------------------------------
string: 'modules/moblog/models/post.mod.php'
string: ''
string: 'No blog post specified.'
string: 'moblog'
string: 'moblog_post'
string: 'edit'
string: 'You are not authorized to edit this blog post.'
string: 'modules/moblog/actions/edit.page.php'
string: 'raUID'
string: 'UID'
string: 'postUID'
string: 'postTitle'
string: 'userRa'
string: 'userName'

<b>scanning file: /var/www/an2google/trunk/modules/moblog/actions/delete.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	delete a moblog post
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	load the post in question
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	delete it
comment: //----------------------------------------------------------------------------------------------
string: 'modules/moblog/models/post.mod.php'
string: 'action'
string: 'sction not specified'
string: 'deleteRecord'
string: 'action'
string: 'action not supported'
string: 'UID'
string: 'UID of post not given'
string: 'UID'
string: 'Post not found.'
string: 'moblog'
string: 'moblog_post'
string: 'delete'
string: "Deleted moblog post: "
string: 'ok'
string: 'moblog/blog/'

<b>scanning file: /var/www/an2google/trunk/modules/moblog/actions/default.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	default action for moblog module is to show all posts if no reference given
comment: //--------------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: // no post specified, list most recent x posts
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: // specific post has been specified, display along ith comments, etc
comment: //------------------------------------------------------------------------------------------
string: ''
string: 'modules/moblog/actions/moblog.act.php'
string: 'modules/moblog/actions/show.act.php'

<b>scanning file: /var/www/an2google/trunk/modules/moblog/actions/confirmdelete.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	confirm deletion of a moblog post
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check permissions and reference
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make confirmation form
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	redirect back to post to be deleted
comment: //----------------------------------------------------------------------------------------------	
string: 'modules/moblog/models/post.mod.php'
string: 'UID'
string: 'UID not given'
string: 'UID'
string: 'moblog'
string: 'moblog_post'
string: 'edit'
string: 'You are not authorized to delete this blog post.'
string: 'UID'
string: 'raUID'
string: 'modules/moblog/views/confirmdelete.block.php'
string: 'warn'
string: 'moblog/'

<b>scanning file: /var/www/an2google/trunk/modules/moblog/actions/blog.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	show all posts from a particular users blog, ordered by date and paginated
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	decide which users blog to show
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: more advanced permisions for blog - tie to profile
comment: //----------------------------------------------------------------------------------------------
comment: //	user can create new posts on their own blog
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	show the page
comment: //----------------------------------------------------------------------------------------------
string: 'moblog'
string: 'moblog_post'
string: 'show'
string: ''
string: "[[:moblog::newpostformnav:]]\n"
string: ''
string: 'modules/moblog/actions/blog.page.php'
string: 'userUID'
string: 'userRa'
string: 'userName'
string: 'newPostForm'
string: 'page,tag'
string: 'awareNet - blogs - '

<b>scanning file: /var/www/an2google/trunk/modules/moblog/actions/api.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	API of moblog module. No public actions.
comment: //--------------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
comment: //	list records owned by the current user
comment: //--------------------------------------------------------------------------------------------------
comment: //echo arrayToXml2d($ary, 'record', '  '); 
comment: //TODO: re-implement this
string: 'public'
string: 'not logged in'
string: 'myrecords'
string: "select * from Moblog_Post where createdBy='"
string: "' order by title"
string: "&lt;?xml version=\"1.0\"?&gt;\n"
string: "&lt;recordset&gt;\n"
string: 'uid'
string: 'UID'
string: 'module'
string: 'moblog'
string: 'title'
string: 'title'
string: 'recordalias'
string: 'alias'
string: 'files'
string: 'none'
string: 'images'
string: 'uploadmultiple'
string: 'videos'
string: 'none'
string: "&lt;/recordset&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/messages/views/summarynav.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	summarize a folder for the nav
comment: //--------------------------------------------------------------------------------------------------
comment: //opt: folder - folder to summarize (default is 'inbox') [string]
comment: //opt: owner - UID of message owner (default is current user) [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	count all messages
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: $db-&gt;countRange
comment: //----------------------------------------------------------------------------------------------
comment: //	count unread messages
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make HTML snippet
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/messages/models/message.mod.php'
string: 'inbox'
string: ''
string: 'public'
string: ''
string: 'owner'
string: 'owner'
string: 'folder'
string: 'folder'
string: "select count(UID) as allMsgs from Messages_Message "
string: "where owner='"
string: "' and folder='"
string: "'"
string: 'allMsgs'
string: "select count(UID) as allMsgs from Messages_Message "
string: "where owner='"
string: "' and folder='"
string: "' and status='unread'"
string: 'allMsgs'
string: ''
string: 'outbox'
string: 'n/a'
string: "&lt;small&gt;Unread: $newMessages messages&lt;/small&gt;&lt;br/&gt;&lt;hr/&gt;\n"
string: "&lt;a href='%%serverPath%%messages/$folder/'&gt;&lt;b&gt;$folder&lt;/b&gt;&lt;/a&gt;&lt;br/&gt;\n"
string: "&lt;small&gt;Total: $totalMessages messages&lt;/small&gt;&lt;br/&gt;\n"
string: "$unread"

<b>scanning file: /var/www/an2google/trunk/modules/messages/views/show.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	display a message
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: UID - UID of a message [string]
comment: //opt: noreply - kill the reply button (yes|no) [string]
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/messages/models/message.mod.php'
string: 'no'
string: 'UID'
string: 'UID'
string: 'replybutton'
string: ''
string: 'folder'
string: 'outbox'
string: "%%serverPath%%messages/reply/re_%%UID%%"
string: 'replybutton'
string: "&lt;td&gt;&lt;form name='sendReply' method='GET' action='"
string: "'&gt;"
string: "&lt;input type='submit' value='Send Reply' /&gt;&lt;/form&gt;&lt;/td&gt;"
string: 'noreply'
string: 'noreply'
string: 'yes'
string: 'yes'
string: 'yes'
string: 'replybutton'
string: ''
string: 'modules/messages/views/show.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/messages/views/menu.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	menu for forums, no arguments
comment: //--------------------------------------------------------------------------------------------------
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------	
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/messages/models/message.mod.php'
string: ''
string: 'newEntry'
string: ''
string: 'messages'
string: 'messages_message'
string: 'send'
string: 'newEntry'
string: '[[:theme::submenu::label=Compose::link=/messages/compose/:]]'
string: 'modules/messages/views/menu.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/messages/views/inboxcount.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	count new messages in inbox
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	count unread messages
comment: //----------------------------------------------------------------------------------------------
string: 'modules/messages/models/message.mod.php'
string: 'public'
string: '0'
string: "folder='inbox'"
string: "status='unread'"
string: "owner='"
string: "'"
string: 'messages_message'

<b>scanning file: /var/www/an2google/trunk/modules/messages/views/folder.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	show a user's mail folder
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: owner - whose folder? (default is current user) [string]
comment: //arg: folder - folder to display [string]
comment: //opt: page - page to display (default is 1) [string]
comment: //opt: num - number of messages to show (default is 50) [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: permissions check here 
comment: // prevent HTML/SQL injection
comment: //----------------------------------------------------------------------------------------------
comment: //	count total records owned by this module
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	load page of messages
comment: //----------------------------------------------------------------------------------------------
comment: //	$sql = "select * from messages "
comment: //		 . "where owner='" . $owner . "' and folder='" . $folder . "' "
comment: //		 . "order by createdOn DESC " . $limit;	
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
comment: /*
	// deprecated, see http://code.google.com/p/awarenet/issues/detail?id=152
	$block = $theme-&gt;loadBlock('modules/messages/views/inboxrow.block.php');
	
	$html .= "&lt;table noborder width='100%'&gt;\n";
	$html .= "&lt;tr&gt;&lt;td class='title'&gt;From&lt;/td&gt;&lt;td class='title'&gt;To&lt;/td&gt;&lt;td class='title'&gt;Subject&lt;/td&gt;&lt;/tr&gt;";

	foreach ($range as $row) {
		$thisMsg = new Messages_Message();
		$thisMsg-&gt;loadArray($row);
		$ext = $thisMsg-&gt;extArray();
		if ('outbox' == $ext['folder']) { $ext['status'] = 'sent'; }
		$html .= $theme-&gt;replaceLabels($ext, $block);
	}
	$html .= "&lt;/table&gt;\n";
	*/
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/messages/models/message.mod.php'
string: 'thumb'
string: ''
string: 'inbox'
string: 'createdOn DESC'
string: 'public'
string: ''
string: 'page'
string: 'page'
string: 'num'
string: 'num'
string: 'owner'
string: 'owner'
string: 'folder'
string: 'folder'
string: 'inbox'
string: 'outbox'
string: '(unknown folder)'
string: 'orderBy'
string: 'orderBy'
string: 'title'
string: 'title ASC'
string: 'fromName'
string: 'fromName ASC'
string: 'toName'
string: 'toName ASC'
string: 'createdOn'
string: 'createdOn DESC'
string: 'status'
string: 'status DESC'
string: "owner='"
string: "'"
string: "folder='"
string: "'"
string: 'messages_message'
string: 'messages_message'
string: '*'
string: "&lt;img src='%%serverPath%%modules/messages/assets/arrowdown.png' border='0' /&gt;"
string: '%%serverPath%%messages/'
string: '/orderBy_'
string: "&lt;a href='"
string: "fromName'&gt;$arrowDown&lt;/a&gt;"
string: "&lt;a href='"
string: "title'&gt;$arrowDown&lt;/a&gt;"
string: "&lt;a href='"
string: "createdOn'&gt;$arrowDown&lt;/a&gt;"
string: "&lt;a href='"
string: "status'&gt;$arrowDown&lt;/a&gt;"
string: "&lt;a href='"
string: "toName'&gt;$arrowDown&lt;/a&gt;"
string: 'From'
string: 'outbox'
string: 'To'
string: '&amp;nbsp;'
string: '&amp;nbsp;'
string: 'Subject'
string: '&amp;nbsp;'
string: 'Date'
string: '&amp;nbsp;'
string: 'modules/messages/assets/graydot.png'
string: 'unread'
string: 'status'
string: 'modules/messages/assets/greendot.png'
string: "&lt;img src='%%serverPath%%"
string: "' /&gt;"
string: '%%serverPath%%users/profile/'
string: 'fromUID'
string: "&lt;a href='$fromUrl'&gt;"
string: 'fromName'
string: "&lt;/a&gt;"
string: 'outbox'
string: '%%serverPath%%users/profile/'
string: 'toUID'
string: "&lt;a href='$fromUrl'&gt;"
string: 'toName'
string: "&lt;/a&gt;"
string: '%%serverPath%%messages/'
string: 'UID'
string: "&lt;a href='$msgUrl'&gt;"
string: 'title'
string: "&lt;/a&gt;"
string: '&lt;small&gt;'
string: 'createdOn'
string: '&lt;/small&gt;'
string: "(you have no new messages)"
string: '%%serverPath%%messages/inbox/'
string: "[[:theme::pagination::page="
string: "::total="
string: "::link="
string: ":]]\n"

<b>scanning file: /var/www/an2google/trunk/modules/messages/views/contactlist.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	list of contacts a person messages most often //| TODO: pagination
comment: //--------------------------------------------------------------------------------------------------
comment: //opt: owner - UID of message owner (default is current user) [string]
comment: //opt: num - number of contacts to display (not implemented) [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the contact list
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/messages/models/message.mod.php'
string: ''
string: 'public'
string: 'owner'
string: 'owner'
string: "select count(UID) as numSent, toUID from Messages_Message "
string: "where owner='"
string: "' and fromUID='"
string: "' "
string: "group by toUID order by numSent"
string: ''
string: 'toUID'
string: "&lt;a href='/messages/compose/to_"
string: 'toUID'
string: "'&gt;[send message]&lt;/a&gt;"
string: "[[:users::summarynav::userUID="
string: 'toUID'
string: "::extra="
string: ":]]"

<b>scanning file: /var/www/an2google/trunk/modules/messages/views/composeform.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	form for composing email
comment: //--------------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/messages/models/message.mod.php'
string: 'modules/messages/views/composeform.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/messages/models/message.mod.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	object for personal messages, like webmail
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	member variables (as retieved from database)
comment: //----------------------------------------------------------------------------------------------
comment: //_	currently loaded database record [array]
comment: //_	database table definition [array]
comment: //_	set to true when an object has been loaded [bool]
comment: //_ UID [string]
comment: //_ varchar(33) [string]
comment: //_ varchar(33) [string]
comment: //_ varchar(33) [string]
comment: //_	varchar(255) [string]
comment: //_ varchar(33) [string]
comment: //_	varchar(255) [string]
comment: //_ text [string]
comment: //_ title [string]
comment: //_ wyswyg [string]
comment: //_ varchar(10) [string]
comment: //_ varchar(33) [string]
comment: //_ datetime [string]
comment: //_ ref:Users_User [string]
comment: //_ datetime [string]
comment: //_ ref:Users_User [string]
comment: //----------------------------------------------------------------------------------------------
comment: //. constructor
comment: //----------------------------------------------------------------------------------------------
comment: //opt: UID - UID of a Message object [string]
comment: // initialise table schema
comment: // try load an object from the database
comment: // check if we did
comment: // make new object
comment: // initialize
comment: // set default title
comment: //----------------------------------------------------------------------------------------------
comment: //. load an object from the db given its UID
comment: //----------------------------------------------------------------------------------------------
comment: //arg: UID - UID of a Message object [string]
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //. load Message object serialized as an associative array
comment: //----------------------------------------------------------------------------------------------
comment: //arg: ary - associative array of members and values [array]
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //. save the current object to database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string on success, html report of errors on failure [string]
comment: //: $db-&gt;save(...) will raise an object_updated event if successful
comment: //----------------------------------------------------------------------------------------------
comment: //. check that object is correct before allowing it to be stored in database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string if object passes, warning message if not [string]
comment: //----------------------------------------------------------------------------------------------
comment: //. database table definition and content versioning
comment: //----------------------------------------------------------------------------------------------
comment: //returns: information for constructing SQL queries [array]
comment: //table columns
comment: //these fields will be indexed
comment: //revision history will be kept for these fields
comment: //----------------------------------------------------------------------------------------------
comment: //. serialize this object to an array
comment: //----------------------------------------------------------------------------------------------
comment: //returns: associative array of all members which define this instance [array]
comment: //----------------------------------------------------------------------------------------------
comment: //.	make an extended array of all data a view will need
comment: //----------------------------------------------------------------------------------------------
comment: //returns: extended array of member variables and metadata [array]
comment: //------------------------------------------------------------------------------------------
comment: //	check authorisation
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	links
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	strandardise date format to previous website
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	redundant - namespace issue
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	look up user
comment: //------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //. delete current object from the database
comment: //----------------------------------------------------------------------------------------------
comment: //: $db-&gt;delete(...) will raise an object_deleted event on success [bool]
comment: //returns: true on success, false on failure [bool]
comment: // nothing to do
string: ''
string: ''
string: 'New Message '
string: 'UID'
string: 'owner'
string: 'folder'
string: 'fromUID'
string: 'fromName'
string: 'toUID'
string: 'toName'
string: 'cc'
string: 'title'
string: 'content'
string: 'status'
string: 're'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: ''
string: "Database error.&lt;br/&gt;\n"
string: ''
string: ''
string: ''
string: "No UID.&lt;br/&gt;\n"
string: 'module'
string: 'messages'
string: 'model'
string: 'messages_message'
string: 'archive'
string: 'yes'
string: 'fields'
string: 'UID'
string: 'VARCHAR(33)'
string: 'owner'
string: 'VARCHAR(33)'
string: 'folder'
string: 'VARCHAR(33)'
string: 'fromUID'
string: 'VARCHAR(33)'
string: 'fromName'
string: 'VARCHAR(255)'
string: 'toUID'
string: 'VARCHAR(33)'
string: 'toName'
string: 'VARCHAR(255)'
string: 'cc'
string: 'TEXT'
string: 'title'
string: 'VARCHAR(255)'
string: 're'
string: 'VARCHAR(33)'
string: 'content'
string: 'TEXT'
string: 'status'
string: 'VARCHAR(10)'
string: 'createdOn'
string: 'DATETIME'
string: 'createdBy'
string: 'VARCHAR(33)'
string: 'editedOn'
string: 'DATETIME'
string: 'editedBy'
string: 'VARCHAR(33)'
string: 'indices'
string: 'UID'
string: '10'
string: 'createdOn'
string: ''
string: 'createdBy'
string: '10'
string: 'editedOn'
string: ''
string: 'editedBy'
string: '10'
string: 'nodiff'
string: 'UID'
string: 'owner'
string: 'folder'
string: 'fromUID'
string: 'fromName'
string: 'toUID'
string: 'toName'
string: 'cc'
string: 'title'
string: 'content'
string: 'status'
string: 're'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: 'editUrl'
string: ''
string: 'editLink'
string: ''
string: 'viewUrl'
string: ''
string: 'viewLink'
string: ''
string: 'newUrl'
string: ''
string: 'newLink'
string: ''
string: 'delUrl'
string: ''
string: 'delLink'
string: ''
string: 'admin'
string: 'createdBy'
string: 'messages'
string: 'messages_message'
string: 'show'
string: 'viewUrl'
string: '%%serverPath%%messages/'
string: 'UID'
string: 'viewLink'
string: "&lt;a href='"
string: 'viewUrl'
string: "'&gt;[see all threads &amp;gt;&amp;gt;]&lt;/a&gt;"
string: 'editUrl'
string: '%%serverPath%%messages/edit/'
string: 'UID'
string: 'editLink'
string: "&lt;a href='"
string: 'editUrl'
string: "'&gt;[edit]&lt;/a&gt;"
string: 'newUrl'
string: "%%serverPath%%messages/new/"
string: 'newLink'
string: "&lt;a href='"
string: 'newUrl'
string: "'&gt;[create new messages]&lt;/a&gt;"
string: 'addChildUrl'
string: "%%serverPath%%messages/addchild/"
string: 'UID'
string: 'addChildLink'
string: "&lt;a href='"
string: 'addChildUrl'
string: "'&gt;[add child messages]&lt;/a&gt;"
string: 'delUrl'
string: "%%serverPath%%messages/confirmdelete/UID_"
string: 'UID'
string: '/'
string: 'delLink'
string: "&lt;a href='"
string: 'delUrl'
string: "'&gt;[delete messages]&lt;/a&gt;"
string: 'longdate'
string: 'jS F, Y'
string: 'createdOn'
string: 'titleUpper'
string: 'title'
string: 'messageTitle'
string: 'title'
string: 'createdBy'
string: 'userName'
string: ' '
string: 'userRa'
string: 'userUrl'
string: '%%serverPath%%users/profile/'
string: 'userRa'
string: 'userLink'
string: "&lt;a href='"
string: 'userUrl'
string: "'&gt;"
string: 'userRa'
string: "&lt;/a&gt;"

<b>scanning file: /var/www/an2google/trunk/modules/messages/inc/maintenance.inc.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	maintenance script for Messages module
comment: //--------------------------------------------------------------------------------------------------
comment: //+	reports are human-readable HTML, with script-readable HTML comments
comment: //--------------------------------------------------------------------------------------------------
comment: //|	Messages module
comment: //--------------------------------------------------------------------------------------------------
comment: //returns: html report or false if not authorized [string][bool]
comment: //----------------------------------------------------------------------------------------------
comment: //	check all Message objects
comment: //----------------------------------------------------------------------------------------------
comment: // remove database markup
comment: // load into model
comment: //------------------------------------------------------------------------------------------
comment: //	check references to other objects
comment: //------------------------------------------------------------------------------------------
comment: /*
		if (false == $db-&gt;objectExists('users_user', $model-&gt;createdBy)) {
			// TODO: take action here, if possibe assign valid reference to a Users_User
			$errors[] = array($model-&gt;UID, $model-&gt;title, 'invalid reference (createdBy:Users_User)');
			$errorCount++;
		}

		if (false == $db-&gt;objectExists('users_user', $model-&gt;editedBy)) {
			// TODO: take action here, if possibe assign valid reference to a Users_User
			$errors[] = array($model-&gt;UID, $model-&gt;title, 'invalid reference (editedBy:Users_User)');
			$errorCount++;
		}
		*/
comment: //------------------------------------------------------------------------------------------
comment: //	check that fromName and toName are set
comment: //------------------------------------------------------------------------------------------
comment: // end while Messages_Message
comment: //----------------------------------------------------------------------------------------------
comment: //	add Message objects to report
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	done
comment: //----------------------------------------------------------------------------------------------
string: 'modules/messages/models/message.mod.php'
string: 'admin'
string: ''
string: 'UID'
string: 'title'
string: 'error'
string: "select * from Messages_Message"
string: ''
string: '[[:users::name::userUID='
string: ':]]'
string: ''
string: 'missing fromName'
string: ''
string: '[[:users::name::userUID='
string: ':]]'
string: ''
string: 'missing toName'
string: "&lt;b&gt;Records Checked:&lt;/b&gt; $recordCount&lt;br/&gt;\n"
string: "&lt;b&gt;Errors Found:&lt;/b&gt; $errorCount&lt;br/&gt;\n"
string: "&lt;b&gt;Errors Fixed:&lt;/b&gt; $fixCount&lt;br/&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/messages/inc/install.inc.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	install script for Messages module
comment: //--------------------------------------------------------------------------------------------------
comment: //+	reports are human-readable HTML, with script-readable HTML comments
comment: //--------------------------------------------------------------------------------------------------
comment: //|	install the Messages module
comment: //--------------------------------------------------------------------------------------------------
comment: //returns: html report or false if not authorized [string][bool]
comment: //----------------------------------------------------------------------------------------------
comment: //	create or upgrade Messages_Message table
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	import any records from previous static table
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	done
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
comment: //|	discover if this module is installed
comment: //--------------------------------------------------------------------------------------------------
comment: //:	if installed correctly report will contain HTML comment &lt;!-- installed correctly --&gt;
comment: //returns: HTML installation status report [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	ensure the table which stores Message objects exists and is correct
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	done
comment: //----------------------------------------------------------------------------------------------
string: 'core/dbdriver/mysqladmin.dbd.php'
string: 'modules/messages/models/message.mod.php'
string: 'admin'
string: ''
string: 'messages'
string: "&lt;b&gt;moved $count records from 'messages' table.&lt;/b&gt;&lt;br/&gt;"
string: 'admin'
string: ''
string: '&lt;!-- table installed correctly --&gt;'
string: '&lt;!-- module installed correctly --&gt;'

<b>scanning file: /var/www/an2google/trunk/modules/messages/actions/toadmins.act.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //	add a message posted from the public 'contact us' form to administrator's mail queue
comment: //-------------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	authorization (TODO: captcha)
comment: //---------------------------------------------------------------------------------------------
comment: //anyone can post to the admins
comment: //---------------------------------------------------------------------------------------------
comment: //	verify that a message was posted
comment: //---------------------------------------------------------------------------------------------
comment: //-----------------------------------------------------------------------------------------
comment: //	get form vars  (TODO: lots of security checks)
comment: //-----------------------------------------------------------------------------------------
comment: //-----------------------------------------------------------------------------------------
comment: //	send to all admins
comment: //-----------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------
comment: //	add to inbox
comment: //---------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------
comment: //	send notification (TODO)
comment: //---------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	recirect back to home page (TODO: redirect back to wherever the user made this from)
comment: //---------------------------------------------------------------------------------------------
string: 'modules/messages/models/message.mod.php'
string: 'action'
string: 'sendMessage'
string: 'action'
string: ''
string: ''
string: ''
string: 'contactName'
string: 'contactName'
string: 'contactEmail'
string: 'contactEmail'
string: 'message'
string: 'message'
string: ''
string: "Contact Name: "
string: "&lt;br/&gt;\n"
string: "Contact Email: "
string: "&lt;br/&gt;\n"
string: "Message:&lt;br/&gt;&lt;br/&gt;"
string: "\n"
string: "&lt;br/&gt;\n"
string: "\n&lt;br/&gt;&lt;br/&gt;\n"
string: "&lt;div class='inlinequote'&gt;&lt;small&gt;&lt;b&gt;NOTE: This was posted through the public comment "
string: "form by an unregistered user.&lt;/b&gt;&lt;/small&gt;&lt;/div&gt;\n"
string: "role='admin'"
string: 'users_user'
string: '*'
string: ''
string: ''
string: ''
string: 'UID'
string: 'inbox'
string: 'public'
string: 'UID'
string: 'Public comment: '
string: 'unread'
string: 'sMessage'
string: "sent to "
string: 'username'
string: "&lt;br/&gt;\n"
string: 'sMessage'
string: "Your message has been sent :-)&lt;br/&gt;\n"
string: 'sMessage'
string: "Message was not sent.&lt;br/&gt;\n"
string: 'sMessage'
string: "No message was posted.&lt;br/&gt;\n"
string: ''

<b>scanning file: /var/www/an2google/trunk/modules/messages/actions/show.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	show a mail item
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check the user is authorised to view the message
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	mark as read
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	render the page
comment: //----------------------------------------------------------------------------------------------
string: 'modules/messages/models/message.mod.php'
string: 'public'
string: 'Please log in to view messages.'
string: ''
string: 'Message not specified (UID).'
string: 'Message not found.'
string: 'You cannot view this message.'
string: 'unread'
string: 'read'
string: 'modules/messages/actions/show.page.php'
string: 'UID'
string: 'folder'
string: 'owner'

<b>scanning file: /var/www/an2google/trunk/modules/messages/actions/send.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	send a message
comment: //--------------------------------------------------------------------------------------------------
comment: // recipients field is a string of user UIDs separated by pipes
comment: //----------------------------------------------------------------------------------------------
comment: //	public user cannot send messages
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check submitted form
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make array of all recipients
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: tidy
comment: //----------------------------------------------------------------------------------------------
comment: //	send to all recipients
comment: //----------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	recipient's copy
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	sender's copy
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	redirect back to inbox
comment: //------------------------------------------------------------------------------------------
string: 'modules/messages/models/message.mod.php'
string: 'public'
string: 'action'
string: 'Action not specified.'
string: 'sendMessage'
string: 'action'
string: 'Action not supported.'
string: 'recipients'
string: 'Recipients unspecified.'
string: "|"
string: 'recipients'
string: 'users_user'
string: 'subject'
string: ''
string: '(no subject)'
string: '[[:users::name::userUID='
string: ':]]'
string: ''
string: 'inbox'
string: '|'
string: 'content'
string: 'unread'
string: "outbox"
string: 'messages/inbox/'

<b>scanning file: /var/www/an2google/trunk/modules/messages/actions/reply.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	show form to create a new message
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	public user cannot send mail
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	is this to be sent to a specific user, or in response to another message
comment: //----------------------------------------------------------------------------------------------
comment: // TODO: better removal of querystring
comment: // not your message
comment: //----------------------------------------------------------------------------------------------
comment: //	show the form
comment: //----------------------------------------------------------------------------------------------
string: 'modules/messages/models/message.mod.php'
string: 'public'
string: 're'
string: 'message not specified'
string: '?'
string: ''
string: 're'
string: 'Message not found'
string: 'not owner of message'
string: "[[:users::summarynav::userUID="
string: ":]]"
string: ''
string: "&lt;div id='usrd"
string: "'&gt;"
string: "&lt;table noborder&gt;&lt;td&gt;&lt;a href='#' onClick=\"mcRemoveRecipient('"
string: "')\"&gt;"
string: "&lt;img src='/themes/clockface/icons/arrow_x.jpg' border='0' /&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;"
string: "$userBlock&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;"
string: '|'
string: '|'
string: 'modules/messages/actions/reply.page.php'
string: 'toUser'
string: 'reMsg'
string: 'UID'
string: 'folder'
string: 'owner'
string: 'subject'
string: 'RE: '
string: 'jsRecipientUID'
string: 'jsRecipientHtml'

<b>scanning file: /var/www/an2google/trunk/modules/messages/actions/outbox.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	display the current user's sent items
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	public user cannot check mail
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check for any arguments
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	render the page
comment: //----------------------------------------------------------------------------------------------
string: 'public'
string: 'page'
string: 'page'
string: 'createdOn'
string: 'orderBy'
string: 'orderBy'
string: 'createdOn'
string: 'createdOn'
string: 'title'
string: 'title'
string: 'toName'
string: 'toName'
string: 'status'
string: 'status'
string: 'createdOn'
string: 'modules/messages/actions/outbox.page.php'
string: 'raUID'
string: 'UID'
string: 'pageno'
string: 'userName'
string: 'userRa'
string: 'orderBy'

<b>scanning file: /var/www/an2google/trunk/modules/messages/actions/inbox.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	display the current user's inbox
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	public user cannot check mail
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check for any arguments
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	render the page
comment: //----------------------------------------------------------------------------------------------
string: 'public'
string: 'page'
string: 'page'
string: 'createdOn'
string: 'orderBy'
string: 'orderBy'
string: 'createdOn'
string: 'createdOn'
string: 'title'
string: 'title'
string: 'fromName'
string: 'fromName'
string: 'status'
string: 'status'
string: 'createdOn'
string: 'modules/messages/actions/inbox.page.php'
string: 'raUID'
string: 'UID'
string: 'orderBy'
string: 'pageno'
string: 'userRa'
string: 'userName'

<b>scanning file: /var/www/an2google/trunk/modules/messages/actions/delete.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	delete a message
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check POST vars and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	delete the message
comment: //----------------------------------------------------------------------------------------------
string: 'modules/messages/models/message.mod.php'
string: 'action'
string: 'Action not specified.'
string: 'deleteMessage'
string: 'action'
string: 'Action not supported.'
string: 'UID'
string: 'Message not specified (UID)'
string: 'UID'
string: 'Message not found.'
string: 'Not authorized to delete this message.'
string: "Deleted message."
string: 'ok'
string: 'messages/inbox/'

<b>scanning file: /var/www/an2google/trunk/modules/messages/actions/default.act.php</b>
comment: //----------------------------------------------------------------------------------------------
comment: //	redirect to users inbox unless message UID is supplied
comment: //----------------------------------------------------------------------------------------------
string: ''
string: 'modules/messages/actions/inbox.act.php'
string: 'modules/messages/actions/show.act.php'

<b>scanning file: /var/www/an2google/trunk/modules/messages/actions/compose.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	show form to create a new message
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	public user cannot send mail
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	is this to be sent to a specific user, or in response to another message
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	show the form
comment: //----------------------------------------------------------------------------------------------
string: 'public'
string: ''
string: ''
string: ''
string: ''
string: 'to'
string: 'users_user'
string: 'to'
string: 'to'
string: "[[:users::summarynav::userUID="
string: ":]]"
string: ''
string: "&lt;div id='usrd"
string: "'&gt;"
string: "&lt;table noborder&gt;&lt;td&gt;&lt;a href='#' onClick=\"mcRemoveRecipient('"
string: "')\"&gt;"
string: "&lt;img src='/themes/clockface/icons/arrow_x.jpg' border='0' /&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;"
string: "$userBlock&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;"
string: '|'
string: '|'
string: 'modules/messages/actions/compose.page.php'
string: 'owner'
string: 'toUser'
string: 'reMsg'
string: 'subject'
string: ''
string: 'jsRecipientUID'
string: 'jsRecipientHtml'

<b>scanning file: /var/www/an2google/trunk/modules/live/models/trigger.mod.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	Event triggers for AJAX clients to receive updates.
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //member variables
comment: //----------------------------------------------------------------------------------------------
comment: //_	currently loaded database record [array]
comment: //_	database table definition [array]
comment: //_	set to true when an object has been loaded [bool]
comment: //_ UID [string]
comment: //_ ref:*_* [string]
comment: //_ varchar(100) [string]
comment: //_ varchar(255) [string]
comment: //_ text [string]
comment: //_ datetime [string]
comment: //_ ref:Users_User [string]
comment: //_ datetime [string]
comment: //_ ref:Users_User [string]
comment: //----------------------------------------------------------------------------------------------
comment: //. constructor
comment: //----------------------------------------------------------------------------------------------
comment: //opt: UID - UID of a Trigger object [string]
comment: // initialise table schema
comment: // try load an object from the database
comment: // check if we did
comment: // make new object
comment: // initialize
comment: //----------------------------------------------------------------------------------------------
comment: //. load an object from the database given its UID
comment: //----------------------------------------------------------------------------------------------
comment: //arg: UID - UID of a Trigger object [string]
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //. load Trigger object serialized as an associative array
comment: //----------------------------------------------------------------------------------------------
comment: //arg: ary - associative array of members and values [array]
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //. save the current object to database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string on success, html report of errors on failure [string]
comment: //: $db-&gt;save(...) will raise an object_updated event if successful
comment: //----------------------------------------------------------------------------------------------
comment: //. check that object is correct before allowing it to be stored in database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string if object passes, warning message if not [string]
comment: //----------------------------------------------------------------------------------------------
comment: //. database table definition and content versioning
comment: //----------------------------------------------------------------------------------------------
comment: //returns: information for constructing SQL queries [array]
comment: //table columns
comment: //these fields will be indexed
comment: //revision history will be kept for these fields
comment: //----------------------------------------------------------------------------------------------
comment: //. serialize this object to an array
comment: //----------------------------------------------------------------------------------------------
comment: //returns: associative array of all members which define this instance [array]
comment: //----------------------------------------------------------------------------------------------
comment: //. serialize this object to xml
comment: //----------------------------------------------------------------------------------------------
comment: //arg: xmlDec - include xml declaration? [bool]
comment: //arg: indent - string with which to indent lines [bool]
comment: //returns: xml serialization of this object [string]
comment: //NOTE: any members which are not XML clean should be marked up before sending
comment: //----------------------------------------------------------------------------------------------
comment: //. make an extended array of data views may need
comment: //----------------------------------------------------------------------------------------------
comment: //returns: associative array of members, metadata and partial views [array]
comment: //% extended array of properties [array:string]
comment: //------------------------------------------------------------------------------------------
comment: //	links
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	javascript
comment: //------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //. send message to AJAX client when trigger is pulled
comment: //----------------------------------------------------------------------------------------------
comment: //returns: true on success, false on failure [bool]
comment: // orphan trigger
comment: //----------------------------------------------------------------------------------------------
comment: //. delete current object from the database
comment: //----------------------------------------------------------------------------------------------
comment: //: $db-&gt;delete(...) will raise an object_deleted event on success [bool]
comment: //returns: true on success, false on failure [bool]
comment: // nothing to do
string: ''
string: ''
string: 'UID'
string: 'pageUID'
string: 'module'
string: 'channel'
string: 'block'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: ''
string: "Database error.&lt;br/&gt;\n"
string: ''
string: ''
string: ''
string: "No UID.&lt;br/&gt;\n"
string: 'module'
string: 'live'
string: 'model'
string: 'live_trigger'
string: 'archive'
string: 'no'
string: 'fields'
string: 'UID'
string: 'VARCHAR(33)'
string: 'pageUID'
string: 'VARCHAR(33)'
string: 'module'
string: 'VARCHAR(100)'
string: 'channel'
string: 'VARCHAR(50)'
string: 'block'
string: 'TEXT'
string: 'createdOn'
string: 'DATETIME'
string: 'createdBy'
string: 'VARCHAR(33)'
string: 'editedOn'
string: 'DATETIME'
string: 'editedBy'
string: 'VARCHAR(33)'
string: 'indices'
string: 'UID'
string: '10'
string: 'pageUID'
string: '10'
string: 'module'
string: '10'
string: 'channel'
string: '10'
string: 'createdOn'
string: ''
string: 'createdBy'
string: '10'
string: 'editedOn'
string: ''
string: 'editedBy'
string: '10'
string: 'nodiff'
string: 'UID'
string: 'pageUID'
string: 'module'
string: 'channel'
string: 'block'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: 'UID'
string: 'pageUID'
string: 'module'
string: 'channel'
string: 'block'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: ''
string: "&lt;kobject type='live_trigger'&gt;\n"
string: "    &lt;UID&gt;"
string: "&lt;/UID&gt;\n"
string: "    &lt;pageUID&gt;"
string: "&lt;/pageUID&gt;\n"
string: "    &lt;module&gt;"
string: "&lt;/module&gt;\n"
string: "    &lt;channel&gt;"
string: "&lt;/channel&gt;\n"
string: "    &lt;block&gt;"
string: "&lt;/block&gt;\n"
string: "    &lt;createdOn&gt;"
string: "&lt;/createdOn&gt;\n"
string: "    &lt;createdBy&gt;"
string: "&lt;/createdBy&gt;\n"
string: "    &lt;editedOn&gt;"
string: "&lt;/editedOn&gt;\n"
string: "    &lt;editedBy&gt;"
string: "&lt;/editedBy&gt;\n"
string: "&lt;/kobject&gt;\n"
string: "&lt;?xml version='1.0' encoding='UTF-8' ?&gt;\n"
string: 'viewUrl'
string: ''
string: 'viewLink'
string: ''
string: 'editUrl'
string: ''
string: 'editLink'
string: ''
string: 'delUrl'
string: ''
string: 'delLink'
string: ''
string: 'newUrl'
string: ''
string: 'newLink'
string: ''
string: 'live'
string: 'live_trigger'
string: 'show'
string: 'viewUrl'
string: '%%serverPath%%Live/showtrigger/'
string: 'UID'
string: 'viewLink'
string: "&lt;a href='"
string: 'viewUrl'
string: "'&gt;[ more &amp;gt;gt; ]&lt;/a&gt;"
string: 'live'
string: 'live_trigger'
string: 'edit'
string: 'edit'
string: 'editUrl'
string: '%%serverPath%%Live/edittrigger/'
string: 'UID'
string: 'editLink'
string: "&lt;a href='"
string: 'editUrl'
string: "'&gt;[ edit ]&lt;/a&gt;"
string: 'live'
string: 'live_trigger'
string: 'edit'
string: 'delete'
string: 'delUrl'
string: '%%serverPath%%Live/deltrigger/'
string: 'UID'
string: 'delLink'
string: "&lt;a href='"
string: 'delUrl'
string: "'&gt;[ delete ]&lt;/a&gt;"
string: 'UIDJsClean'
string: 'UID'
string: 'block:'
string: "\n"
string: ''

<b>scanning file: /var/www/an2google/trunk/modules/live/models/mailbox.mod.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	Stores messages for AJAX clients.
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //member variables
comment: //----------------------------------------------------------------------------------------------
comment: //_	currently loaded database record [array]
comment: //_	database table definition [array]
comment: //_	set to true when an object has been loaded [bool]
comment: //_ UID [string]
comment: //_ ref:*_* [string]
comment: //_ ref:Users_User [string]
comment: //_ plaintext [string]
comment: //_ timestamp (int) [string]
comment: //_ datetime [string]
comment: //_ ref:Users_User [string]
comment: //_ datetime [string]
comment: //_ ref:Users_User [string]
comment: //----------------------------------------------------------------------------------------------
comment: //. constructor
comment: //----------------------------------------------------------------------------------------------
comment: //opt: UID - UID of a Mailbox object [string]
comment: //opt: isPage - set to true if this is a page UID and not a mailbox UID [bool]
comment: // initialise table schema
comment: // try load an object from the database
comment: // ... UID of a Live_Mailbox object
comment: // ... UID of a page in the browser
comment: // check if we did
comment: // make new object
comment: // initialize
comment: // when mailbox was last accessed
comment: //----------------------------------------------------------------------------------------------
comment: //. load an object from the database given its UID
comment: //----------------------------------------------------------------------------------------------
comment: //arg: UID - UID of a Mailbox object [string]
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //. 
comment: //----------------------------------------------------------------------------------------------
comment: //arg: pageUID - UID of a page in the browser (Javascript message pump object)
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //. load Mailbox object serialized as an associative array
comment: //----------------------------------------------------------------------------------------------
comment: //arg: ary - associative array of members and values [array]
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //. save the current object to database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string on success, html report of errors on failure [string]
comment: //: $db-&gt;save(...) will raise an object_updated event if successful
comment: //----------------------------------------------------------------------------------------------
comment: //. check that object is correct before allowing it to be stored in database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string if object passes, warning message if not [string]
comment: //----------------------------------------------------------------------------------------------
comment: //. database table definition and content versioning
comment: //----------------------------------------------------------------------------------------------
comment: //returns: information for constructing SQL queries [array]
comment: //table columns
comment: //these fields will be indexed
comment: //revision history will be kept for these fields
comment: //----------------------------------------------------------------------------------------------
comment: //. serialize this object to an array
comment: //----------------------------------------------------------------------------------------------
comment: //returns: associative array of all members which define this instance [array]
comment: //----------------------------------------------------------------------------------------------
comment: //. serialize this object to xml
comment: //----------------------------------------------------------------------------------------------
comment: //arg: xmlDec - include xml declaration? [bool]
comment: //arg: indent - string with which to indent lines [bool]
comment: //returns: xml serialization of this object [string]
comment: //NOTE: any members which are not XML clean should be marked up before sending
comment: //----------------------------------------------------------------------------------------------
comment: //. make an extended array of data views may need
comment: //----------------------------------------------------------------------------------------------
comment: //returns: associative array of members, metadata and partial views [array]
comment: //% extended array of properties [array:string]
comment: //------------------------------------------------------------------------------------------
comment: //	links
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	javascript
comment: //------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //. delete current object from the database
comment: //----------------------------------------------------------------------------------------------
comment: //: $db-&gt;delete(...) will raise an object_deleted event on success [bool]
comment: //returns: true on success, false on failure [bool]
comment: // nothing to do
comment: // clear any triggers belonging to this page
string: ''
string: ''
string: "pageUID='"
string: "'"
string: 'live_mailbox'
string: '*'
string: 'UID'
string: 'pageUID'
string: 'userUID'
string: 'messages'
string: 'lastChecked'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: ''
string: "Database error.&lt;br/&gt;\n"
string: ''
string: ''
string: ''
string: "No UID.&lt;br/&gt;\n"
string: 'module'
string: 'live'
string: 'model'
string: 'live_mailbox'
string: 'archive'
string: 'no'
string: 'fields'
string: 'UID'
string: 'VARCHAR(33)'
string: 'pageUID'
string: 'VARCHAR(33)'
string: 'userUID'
string: 'VARCHAR(33)'
string: 'messages'
string: 'MEDIUMTEXT'
string: 'lastChecked'
string: 'BIGINT(20)'
string: 'createdOn'
string: 'DATETIME'
string: 'createdBy'
string: 'VARCHAR(33)'
string: 'editedOn'
string: 'DATETIME'
string: 'editedBy'
string: 'VARCHAR(33)'
string: 'indices'
string: 'UID'
string: '10'
string: 'pageUID'
string: '10'
string: 'userUID'
string: '10'
string: 'lastChecked'
string: ''
string: 'createdOn'
string: ''
string: 'createdBy'
string: '10'
string: 'editedOn'
string: ''
string: 'editedBy'
string: '10'
string: 'nodiff'
string: 'pageUID'
string: 'userUID'
string: 'messages'
string: 'lastChecked'
string: 'UID'
string: 'pageUID'
string: 'userUID'
string: 'messages'
string: 'lastChecked'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: ''
string: "&lt;kobject type='live_mailbox'&gt;\n"
string: "    &lt;UID&gt;"
string: "&lt;/UID&gt;\n"
string: "    &lt;pageUID&gt;"
string: "&lt;/pageUID&gt;\n"
string: "    &lt;userUID&gt;"
string: "&lt;/userUID&gt;\n"
string: "    &lt;messages&gt;"
string: "&lt;/messages&gt;\n"
string: "    &lt;lastChecked&gt;"
string: "&lt;/lastChecked&gt;\n"
string: "    &lt;createdOn&gt;"
string: "&lt;/createdOn&gt;\n"
string: "    &lt;createdBy&gt;"
string: "&lt;/createdBy&gt;\n"
string: "    &lt;editedOn&gt;"
string: "&lt;/editedOn&gt;\n"
string: "    &lt;editedBy&gt;"
string: "&lt;/editedBy&gt;\n"
string: "&lt;/kobject&gt;\n"
string: "&lt;?xml version='1.0' encoding='UTF-8' ?&gt;\n"
string: 'viewUrl'
string: ''
string: 'viewLink'
string: ''
string: 'editUrl'
string: ''
string: 'editLink'
string: ''
string: 'delUrl'
string: ''
string: 'delLink'
string: ''
string: 'newUrl'
string: ''
string: 'newLink'
string: ''
string: 'live'
string: 'live_mailbox'
string: 'show'
string: 'viewUrl'
string: '%%serverPath%%Live/showmailbox/'
string: 'UID'
string: 'viewLink'
string: "&lt;a href='"
string: 'viewUrl'
string: "'&gt;[ more &amp;gt;gt; ]&lt;/a&gt;"
string: 'live'
string: 'live_mailbox'
string: 'edit'
string: 'edit'
string: 'editUrl'
string: '%%serverPath%%Live/editmailbox/'
string: 'UID'
string: 'editLink'
string: "&lt;a href='"
string: 'editUrl'
string: "'&gt;[ edit ]&lt;/a&gt;"
string: 'live'
string: 'live_mailbox'
string: 'edit'
string: 'delete'
string: 'delUrl'
string: '%%serverPath%%Live/delmailbox/'
string: 'UID'
string: 'delLink'
string: "&lt;a href='"
string: 'delUrl'
string: "'&gt;[ delete ]&lt;/a&gt;"
string: 'UIDJsClean'
string: 'UID'
string: "delete from Live_Trigger where pageUID='"
string: "'"

<b>scanning file: /var/www/an2google/trunk/modules/live/models/chat.mod.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	Temporary chat buffer for ongoing conversations.
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //member variables
comment: //----------------------------------------------------------------------------------------------
comment: //_	currently loaded database record [array]
comment: //_	database table definition [array]
comment: //_	set to true when an object has been loaded [bool]
comment: //_ UID [string]
comment: //_ ref:Users_User [string]
comment: //_ ref:Users_User [string]
comment: //_ ref:Users_User [string]
comment: //_ plaintext [string]
comment: //_ varchar(30) [string]
comment: //_ varchar(30) [string]
comment: //_ datetime [string]
comment: //_ ref:Users_User [string]
comment: //_ datetime [string]
comment: //_ ref:Users_User [string]
comment: //----------------------------------------------------------------------------------------------
comment: //. constructor
comment: //----------------------------------------------------------------------------------------------
comment: //opt: UID - UID of a Chat object [string]
comment: // initialise table schema
comment: // try load an object from the database
comment: // check if we did
comment: // make new object
comment: // initialize
comment: //----------------------------------------------------------------------------------------------
comment: //. load an object from the database given its UID
comment: //----------------------------------------------------------------------------------------------
comment: //arg: UID - UID of a Chat object [string]
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //. load Chat object serialized as an associative array
comment: //----------------------------------------------------------------------------------------------
comment: //arg: ary - associative array of members and values [array]
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //. save the current object to database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string on success, html report of errors on failure [string]
comment: //: $db-&gt;save(...) will raise an object_updated event if successful
comment: //----------------------------------------------------------------------------------------------
comment: //. check that object is correct before allowing it to be stored in database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string if object passes, warning message if not [string]
comment: //----------------------------------------------------------------------------------------------
comment: //. database table definition and content versioning
comment: //----------------------------------------------------------------------------------------------
comment: //returns: information for constructing SQL queries [array]
comment: //table columns
comment: //these fields will be indexed
comment: //revision history will be kept for these fields
comment: //----------------------------------------------------------------------------------------------
comment: //. serialize this object to an array
comment: //----------------------------------------------------------------------------------------------
comment: //returns: associative array of all members which define this instance [array]
comment: //----------------------------------------------------------------------------------------------
comment: //. serialize this object to xml
comment: //----------------------------------------------------------------------------------------------
comment: //arg: xmlDec - include xml declaration? [bool]
comment: //arg: indent - string with which to indent lines [bool]
comment: //returns: xml serialization of this object [string]
comment: //NOTE: any members which are not XML clean should be marked up before sending
comment: //----------------------------------------------------------------------------------------------
comment: //. make an extended array of data views may need
comment: //----------------------------------------------------------------------------------------------
comment: //returns: associative array of members, metadata and partial views [array]
comment: //% extended array of properties [array:string]
comment: //------------------------------------------------------------------------------------------
comment: //	links
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	javascript
comment: //------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //. delete current object from the database
comment: //----------------------------------------------------------------------------------------------
comment: //: $db-&gt;delete(...) will raise an object_deleted event on success [bool]
comment: //returns: true on success, false on failure [bool]
comment: // nothing to do
string: ''
string: ''
string: 'UID'
string: 'fromUID'
string: 'toUID'
string: 'ownerUID'
string: 'msg'
string: 'sent'
string: 'state'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: ''
string: "Database error.&lt;br/&gt;\n"
string: ''
string: ''
string: ''
string: "No UID.&lt;br/&gt;\n"
string: 'module'
string: 'live'
string: 'model'
string: 'live_chat'
string: 'archive'
string: 'no'
string: 'fields'
string: 'UID'
string: 'VARCHAR(33)'
string: 'fromUID'
string: 'VARCHAR(33)'
string: 'toUID'
string: 'VARCHAR(33)'
string: 'ownerUID'
string: 'VARCHAR(33)'
string: 'msg'
string: 'MEDIUMTEXT'
string: 'sent'
string: 'VARCHAR(30)'
string: 'state'
string: 'VARCHAR(30)'
string: 'createdOn'
string: 'DATETIME'
string: 'createdBy'
string: 'VARCHAR(33)'
string: 'editedOn'
string: 'DATETIME'
string: 'editedBy'
string: 'VARCHAR(33)'
string: 'indices'
string: 'UID'
string: '10'
string: 'fromUID'
string: '10'
string: 'toUID'
string: '10'
string: 'createdOn'
string: ''
string: 'createdBy'
string: '10'
string: 'editedOn'
string: ''
string: 'editedBy'
string: '10'
string: 'nodiff'
string: 'fromUID'
string: 'toUID'
string: 'msg'
string: 'sent'
string: 'state'
string: 'UID'
string: 'fromUID'
string: 'toUID'
string: 'owerUID'
string: 'msg'
string: 'sent'
string: 'state'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: ''
string: "&lt;kobject type='live_chat'&gt;\n"
string: "    &lt;UID&gt;"
string: "&lt;/UID&gt;\n"
string: "    &lt;fromUID&gt;"
string: "&lt;/fromUID&gt;\n"
string: "    &lt;toUID&gt;"
string: "&lt;/toUID&gt;\n"
string: "    &lt;ownerUID&gt;"
string: "&lt;/ownerUID&gt;\n"
string: "    &lt;msg&gt;"
string: "&lt;/msg&gt;\n"
string: "    &lt;sent&gt;"
string: "&lt;/sent&gt;\n"
string: "    &lt;state&gt;"
string: "&lt;/state&gt;\n"
string: "    &lt;createdOn&gt;"
string: "&lt;/createdOn&gt;\n"
string: "    &lt;createdBy&gt;"
string: "&lt;/createdBy&gt;\n"
string: "    &lt;editedOn&gt;"
string: "&lt;/editedOn&gt;\n"
string: "    &lt;editedBy&gt;"
string: "&lt;/editedBy&gt;\n"
string: "&lt;/kobject&gt;\n"
string: "&lt;?xml version='1.0' encoding='UTF-8' ?&gt;\n"
string: 'viewUrl'
string: ''
string: 'viewLink'
string: ''
string: 'editUrl'
string: ''
string: 'editLink'
string: ''
string: 'delUrl'
string: ''
string: 'delLink'
string: ''
string: 'newUrl'
string: ''
string: 'newLink'
string: ''
string: 'live'
string: 'live_chat'
string: 'show'
string: 'viewUrl'
string: '%%serverPath%%Live/showchat/'
string: 'UID'
string: 'viewLink'
string: "&lt;a href='"
string: 'viewUrl'
string: "'&gt;[ more &amp;gt;gt; ]&lt;/a&gt;"
string: 'live'
string: 'live_chat'
string: 'edit'
string: 'edit'
string: 'editUrl'
string: '%%serverPath%%Live/editchat/'
string: 'UID'
string: 'editLink'
string: "&lt;a href='"
string: 'editUrl'
string: "'&gt;[ edit ]&lt;/a&gt;"
string: 'live'
string: 'live_chat'
string: 'edit'
string: 'delete'
string: 'delUrl'
string: '%%serverPath%%Live/delchat/'
string: 'UID'
string: 'delLink'
string: "&lt;a href='"
string: 'delUrl'
string: "'&gt;[ delete ]&lt;/a&gt;"
string: 'UIDJsClean'
string: 'UID'

<b>scanning file: /var/www/an2google/trunk/modules/live/inc/install.inc.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	install script for Live module
comment: //--------------------------------------------------------------------------------------------------
comment: //+	reports are human-readable HTML, with script-readable HTML comments
comment: //--------------------------------------------------------------------------------------------------
comment: //|	install the Live module
comment: //--------------------------------------------------------------------------------------------------
comment: //returns: html report or false if not authorized [string][bool]
comment: //----------------------------------------------------------------------------------------------
comment: //	create or upgrade Live_Chat table
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	create or upgrade Live_Mailbox table
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	create or upgrade Live_Trigger table
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	done
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
comment: //|	discover if this module is installed
comment: //--------------------------------------------------------------------------------------------------
comment: //:	if installed correctly report will contain HTML comment &lt;!-- installed correctly --&gt;
comment: //returns: HTML installation status report [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	ensure the table which stores Chat objects exists and is correct
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	ensure the table which stores Mailbox objects exists and is correct
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	ensure the table which stores Trigger objects exists and is correct
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	done
comment: //----------------------------------------------------------------------------------------------
string: 'core/dbdriver/mysqladmin.dbd.php'
string: 'modules/live/models/chat.mod.php'
string: 'modules/live/models/mailbox.mod.php'
string: 'modules/live/models/trigger.mod.php'
string: 'admin'
string: ''
string: 'admin'
string: ''
string: '&lt;!-- table installed correctly --&gt;'
string: '&lt;!-- module installed correctly --&gt;'

<b>scanning file: /var/www/an2google/trunk/modules/live/inc/cron.inc.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	processes run regularly to keep things tidy
comment: //--------------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
comment: //|	ten minute cron
comment: //--------------------------------------------------------------------------------------------------
comment: //returns: HTML report of any actions taken [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	remove any mailboxes which have not been checked in 10 mins or more
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	done
comment: //----------------------------------------------------------------------------------------------
string: 'modules/live/models/mailbox.mod.php'
string: "&lt;h2&gt;live_cron_tenmins&lt;/h2&gt;\n"
string: "select * from Live_Mailbox where lastChecked &lt; $expired ;"
string: "[i] Removed old mailbox (UID: "
string: " page: "
string: " )&lt;br/&gt;"

<b>scanning file: /var/www/an2google/trunk/modules/live/actions/testwindows.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	test of kapenta window manager
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	admins only
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	test
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	render the page
comment: //----------------------------------------------------------------------------------------------
string: 'admin'
string: 'live/chat/admin'
string: "
	&lt;br/&gt;
	&lt;input type='button' value='Make Window' "
string: "onClick=\"kwindowmanager.createWindow('Window Test', '"
string: "');\" /&gt;\n"
string: 'modules/live/actions/testwindows.page.php'
string: 'testcontents'

<b>scanning file: /var/www/an2google/trunk/modules/live/actions/test.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	test of getblock
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	render the page
comment: //----------------------------------------------------------------------------------------------
string: "
&lt;script language='Javascript'&gt;

	function testGBMChange() {
		var theTxt = document.getElementById('txtGBMPlain');
		var theB64 = document.getElementById('txtGBMB64');
		theB64.value = base64_encode(theTxt.value);
	}

	function testGBXChange() {
		var theTxt = document.getElementById('txtGBXPlain');
		var theB64 = document.getElementById('txtGBXB64');
		theB64.value = base64_encode(theTxt.value);
	}

	function testXHRPost() {
		var theTxt = document.getElementById('txtGBXPlain');
		var theB64 = document.getElementById('txtGBXB64');
		theB64.value = base64_encode(theTxt.value);
	
		var params = 'b=' + escape(theB64.value);
		//alert('sending: ' + params);

		var req = new XMLHttpRequest();  
		req.open('POST', 'http://kapenta.co.za/live/getblock/', true);  
		req.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
		//req.setRequestHeader('Content-length', params.length);
		req.setRequestHeader('Connection', 'close'); 
		req.onreadystatechange = function (aEvt) {  
			var theTa = document.getElementById('taXHR');
			theTa.value = 'loading: ' + req.status;
			if ((4 == req.readyState) &amp;&amp; (200 == req.status))  {
				theTa.value = req.responseText; 
			}
		}
		req.send(params);
	}

&lt;/script&gt;

&lt;h2&gt;/getblock/ - Manual Post&lt;/h2&gt;

&lt;form name='testGetblockManual' method='POST' action='%%serverPath%%live/getblock/'&gt;
&lt;table noborder&gt;
  &lt;tr&gt;
    &lt;td&gt;&lt;b&gt;Plain:&lt;/b&gt;&lt;/td&gt;
    &lt;td&gt;&lt;input type='text' name='p' id='txtGBMPlain' value='[~[:blog::summary::UID=932122408179773414:]~]'
			onChange=\"testGBMChange();\" size='50'&gt;&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td&gt;&lt;b&gt;base64:&lt;/b&gt;&lt;/td&gt;
    &lt;td&gt;&lt;input type='text' name='b' id='txtGBMB64' size='50'&gt;&lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;
&lt;input type='submit' value='POST' /&gt;
&lt;/form&gt;

&lt;h2&gt;/getblock/ - XmlHTTPRequest POST&lt;/h2&gt;

&lt;form name='testGetblockXHR' method='POST' action='#'&gt;
&lt;table noborder&gt;
  &lt;tr&gt;
    &lt;td&gt;&lt;b&gt;Plain:&lt;/b&gt;&lt;/td&gt;
    &lt;td&gt;&lt;input type='text' name='xp' id='txtGBXPlain' value='[~[:blog::summary::UID=932122408179773414:]~]'
			onChange=\"testGBXChange();\" size='50'&gt;&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td&gt;&lt;b&gt;base64:&lt;/b&gt;&lt;/td&gt;
    &lt;td&gt;&lt;input type='text' name='xb' id='txtGBXB64' size='50'&gt;&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td&gt;&lt;b&gt;XHR:&lt;/b&gt;&lt;/td&gt;
    &lt;td&gt;&lt;textarea rows='10' cols='50' id='taXHR'&gt;&lt;/textarea&gt;&lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;
&lt;input type='button' value='POST' onClick='testXHRPost();' /&gt;
&lt;/form&gt;

"
string: 'modules/live/actions/test.page.php'
string: 'testcontents'

<b>scanning file: /var/www/an2google/trunk/modules/live/actions/sendmsg.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	send a chat message from one user to another
comment: //--------------------------------------------------------------------------------------------------
comment: //note: this is called by individual chat windows as defined in ../js/chatwindow.js
comment: //----------------------------------------------------------------------------------------------
comment: //	check permissions and POST vars
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	save creator's copy (outbox)
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	save recipient's copy (inbox)
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	done
comment: //----------------------------------------------------------------------------------------------
string: 'modules/live/models/chat.mod.php'
string: 'public'
string: 'Not logged in.'
string: 'banned'
string: 'Banhammered.'
string: 'UID'
string: 'UID not given.'
string: 'fromUID'
string: 'fromUID not given.'
string: 'toUID'
string: 'toUID not given.'
string: 'msg'
string: 'msg not given.'
string: 'UID'
string: 'fromUID'
string: 'toUID'
string: 'msg'
string: 'Not logged in.'
string: 'users_user'
string: 'No such user (fromUID)'
string: 'users_user'
string: 'No such user (fromUID)'
string: 'new'
string: 'new'
string: "OK"

<b>scanning file: /var/www/an2google/trunk/modules/live/actions/getmessages.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	get all messages belonging to a page
comment: //--------------------------------------------------------------------------------------------------
comment: //+	reference should be a page UID (ID of rendered page in the browser)
comment: //+
comment: //+	optional argument: chatsince [datetime] may be POSTed, any messages for the current user since
comment: //+	this time will be added to output
comment: //----------------------------------------------------------------------------------------------
comment: //	check reference, arguments and user
comment: //----------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	no such mailbox, create it
comment: //------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	return any (block) messages
comment: //----------------------------------------------------------------------------------------------
comment: // empty mailbox
comment: //----------------------------------------------------------------------------------------------
comment: //	return any (chat) messages
comment: //----------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	check argument and user role
comment: //------------------------------------------------------------------------------------------
comment: // no public users
comment: // banhammered
comment: //------------------------------------------------------------------------------------------
comment: //	load any new messsages from the database
comment: //------------------------------------------------------------------------------------------
comment: //TODO: update UserLogin here
string: 'modules/live/models/mailbox.mod.php'
string: ''
string: "ERROR: no UID given\n"
string: "NEW: creating mailbox ID "
string: " for page "
string: "\n"
string: ''
string: "EMPTY: no messages\n"
string: ''
string: 'chatsince'
string: 'public'
string: 'please log in.'
string: 'banned'
string: 'banned.'
string: 'chatsince'
string: ''
string: '0'
string: 'undefined'
string: "createdOn &gt; cast('"
string: "' as datetime)"
string: "ownerUID='"
string: "'"
string: "state='new'"
string: 'live_chat'
string: '*'
string: 'createdOn ASC'
string: "NOCHAT: no new messages ($datetime)\n"
string: 'chat:'
string: 'UID'
string: '|'
string: 'fromUID'
string: '|'
string: 'toUID'
string: '|'
string: 'msg'
string: '|'
string: 'sent'
string: '|'
string: 'state'
string: "|"
string: 'createdOn'
string: "\n"

<b>scanning file: /var/www/an2google/trunk/modules/live/actions/getblock.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	render and retun a block with at the current user's privilege
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments (permissions should be checked by blocks)
comment: //----------------------------------------------------------------------------------------------
comment: //echo $block . "&lt;br/&gt;\n";
comment: //TODO: more page/block args here
string: 'b'
string: 'no request sent'
string: 'b'
string: ''
string: '%%serverPath%%'

<b>scanning file: /var/www/an2google/trunk/modules/live/actions/endchat.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	end a chat discussion between two users
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	change state of all messages to dismissed
comment: //----------------------------------------------------------------------------------------------
string: 'userUID'
string: 'No userUID'
string: 'partnerUID'
string: 'No partnerUID'
string: 'userUID'
string: 'partnerUID'
string: 'Not your chat.'
string: "UPDATE Live_Chat SET state='dismissed' "
string: "WHERE (fromUID='"
string: "' AND toUID='"
string: "') "
string: "OR (fromUID='"
string: "' AND toUID='"
string: "')"
string: "DISMISSED CHAT MESSAGES"

<b>scanning file: /var/www/an2google/trunk/modules/live/actions/chat.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	creates a chat iframe
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check reference and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	render the page  //TODO: make a generic window template
comment: //----------------------------------------------------------------------------------------------
string: 'modules/users/models/user.mod.php'
string: 'public'
string: 'Please log in to use the chat.'
string: ''
string: 'User not specified.'
string: 'User not found.'
string: "&lt;!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'&gt;
&lt;head&gt;
&lt;title&gt;:: kapenta :: live :: test getblock&lt;/title&gt;
&lt;meta http-equiv='Content-Type' content='text/html; charset=utf-8' /&gt;
&lt;link href='"
string: "themes/clockface/css/windows.css' rel='stylesheet' type='text/css' /&gt;
&lt;script src='"
string: "core/utils.js'&gt;&lt;/script&gt;
&lt;script src='"
string: "modules/live/js/chatwindow.js'&gt;&lt;/script&gt;
&lt;style type='text/css'&gt;

body {
	padding: 0;
	margin: 0;
	background: #eeeeee;
	font-family: Verdana, Arial, Helvetica, sans-serif;
	font-size: smaller;
	color: #303030;
}

a { text-decoration: none; color: #365a10 }

a h1 {
	color: #303030;
}

a h2 {
	color: #303030;
}

.style1 {font-size: 9px}
&lt;/style&gt;

&lt;script src='"
string: "core/utils.js'&gt;&lt;/script&gt;
&lt;script language='javascript'&gt;

	jsServerPath = '"
string: "';
	jsUserUID = '"
string: "';
	jsUserName = \""
string: "\";
	jsPartnerUID = '"
string: "';
	jsPartnerName = \""
string: "\";
	
	windowUID = '';
	windowIdx = 0;

	kchatwindow = 0;

	//----------------------------------------------------------------------------------------------
	//	onLoad
	//----------------------------------------------------------------------------------------------

	function kPageInit() {
		//------------------------------------------------------------------------------------------
		//	create chat window object and register this window with chat server
		//------------------------------------------------------------------------------------------
		windowUID = window.name.replace('ifc', '');
		windowIdx = window.parent.kwindowmanager.getIndex(windowUID)

		kchatwindow = new Live_ChatWindow(
			jsServerPath, 
			'divMessages', 
			jsUserUID, 
			jsUserName, 
			jsPartnerUID, 
			jsPartnerName,
			windowIdx
		);

		window.parent.kchatclient.registerLoaded(windowIdx);

		//------------------------------------------------------------------------------------------
		//	register events (TODO: should ony be registered during drag)
		//------------------------------------------------------------------------------------------
		document.onmousemove = function(e) {
			var wndThis = window.parent.kwindowmanager.windows[windowIdx];
			var ifThis = window.parent.document.getElementsByName(window.name);	//%	this iframe
			var txtBox = document.getElementById('content');					//% textarea

			docX = e.clientX + ifThis[0].offsetLeft + wndThis.left;
			docY = e.clientY + ifThis[0].offsetTop + wndThis.top;

			// only these properties neede by the window manager
			var newEvt = function() { 
				this.clientX = 0;	
				this.clientY = 0; 
			}

			newEvt.clientX = docX;
			newEvt.clientY = docY;

			//txtBox.value = (docX) + ', ' + (docY) + ' -- ' + wndThis.top + ', ' + wndThis.left;
			window.parent.kmouse.onMouseMove(newEvt);
		}

		//------------------------------------------------------------------------------------------
		//	resize controls
		//------------------------------------------------------------------------------------------
		resizeWindow();
	}

	//----------------------------------------------------------------------------------------------
	//	re/scale controls to fit inside iFrame
	//----------------------------------------------------------------------------------------------

	function resizeWindow() {
		//------------------------------------------------------------------------------------------
		//	resize controls
		//------------------------------------------------------------------------------------------
		var divCPS = document.getElementById('divChatPartnerSummary');		//%	div
		var divM = document.getElementById('divMessages');					//%	div
		var txtBox = document.getElementById('content');					//% textarea
		
		txtBox.cHeight = extractNumberCW(txtBox.style.height)
		txtBox.style.top = (window.innerHeight - txtBox.cHeight - 8) + 'px';
		txtBox.style.width = (window.innerWidth - 6) + 'px';

		divM.style.height = (window.innerHeight - divCPS.clientHeight - txtBox.cHeight - 25) + 'px';
		divM.style.width = (window.innerWidth - 6) + 'px';
	}

	//----------------------------------------------------------------------------------------------
	//	remove 'px' from numbers //TODO: add this to /core/utils.js
	//----------------------------------------------------------------------------------------------
	
	function extractNumberCW(value) { 
		var n = parseInt(value); 
		return n == null || isNaN(n) ? 0 : n; 
	} 

	//----------------------------------------------------------------------------------------------
	//	remove 'px' from numbers //TODO: add this to /core/utils.js
	//----------------------------------------------------------------------------------------------

	function windowTxtChange() {
		var txtBox = document.getElementById('content');
		if ((txtBox.value.indexOf(\"\\n\") != -1) || (txtBox.value.indexOf(\"\\r\") != -1)) {
			kchatwindow.sendMessage(txtBox.value);
			txtBox.value = '';
		}
	}

&lt;/script&gt;

&lt;/head&gt;

&lt;body onLoad='kPageInit();' onResize='resizeWindow();'&gt; 
&lt;div id='divChatPartnerSummary' style='background-color: #ffffff;'&gt;
[[:users::summarynav::userUID="
string: ":]]
&lt;/div&gt;
&lt;hr/&gt;
&lt;div id='divMessages' 
	style='width: 200px; height: 60px; position: absolute; overflow: auto;' &gt;&lt;/div&gt;

&lt;textarea name='content' id='content'
	style='width: 200px; height: 60px; left: 0px; top: 100px; position:absolute;'
	onkeyup=\"windowTxtChange()\"&gt; &lt;/textarea&gt;&lt;br/&gt;
&lt;/body&gt;
&lt;/html&gt;"
string: ''

<b>scanning file: /var/www/an2google/trunk/modules/images/views/widtheditor.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	display a single image 560px wide
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - record alias or UID [string]
comment: //opt: imageUID - overrides raUID [string]
comment: //opt: link - link to larger version (yes|no) [string]
comment: //echo "image rauid: " . $args['raUID'] . "&lt;br/&gt;\n";
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/images/models/image.mod.php'
string: 'modules/images/inc/images__widthx.inc.php'
string: 'yes'
string: 'no'
string: 'width300'
string: ''
string: ''
string: 'imageUID'
string: 'raUID'
string: 'imageUID'
string: 'raUID'
string: 'c'
string: 'c'
string: 'caption'
string: 'caption'
string: 'size'
string: 'size'
string: 'align'
string: 'align'
string: 'images/'
string: 'raUID'
string: 'images/'
string: '/'
string: 'raUID'
string: "&lt;img src='"
string: "' border='0' /&gt;"
string: 'yes'
string: "&lt;a href='"
string: "'&gt;$html&lt;/a&gt;"
string: 'yes'
string: 'raUID'
string: 'left'
string: "style='float: left;'"
string: 'right'
string: "style='float: right;'"
string: "&lt;div class='caption' $align&gt;$html&lt;br/&gt;&lt;small&gt;"
string: "&lt;/small&gt;&lt;/div&gt;"
string: 'width300'
string: "class='caption'"
string: "class='captionpad'"

<b>scanning file: /var/www/an2google/trunk/modules/images/views/width570.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	display a single image 570px wide
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - record alias or UID [string]
comment: //opt: imageUID - overrides raUID [string]
comment: //opt: link - link to larger version (yes|no) [string]
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/images/models/image.mod.php'
string: 'modules/images/inc/images__widthx.inc.php'
string: 'size'
string: 'width570'

<b>scanning file: /var/www/an2google/trunk/modules/images/views/width560.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	display a single image 560px wide
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - record alias or UID [string]
comment: //opt: imageUID - overrides raUID [string]
comment: //opt: link - link to larger version (yes|no) [string]
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/images/models/image.mod.php'
string: 'modules/images/inc/images__widthx.inc.php'
string: 'size'
string: 'width560'

<b>scanning file: /var/www/an2google/trunk/modules/images/views/width300.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	display a single image 300px wide
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - record alias or UID [string]
comment: //opt: imageUID - overrides raUID [string]
comment: //opt: link - link to larger version (yes|no) [string]
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/images/models/image.mod.php'
string: 'modules/images/inc/images__widthx.inc.php'
string: 'size'
string: 'width300'

<b>scanning file: /var/www/an2google/trunk/modules/images/views/width290.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	display a single image 290px wide
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - record alias or UID [string]
comment: //opt: imageUID - overrides raUID [string]
comment: //opt: link - link to larger version (yes|no) [string]
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/images/models/image.mod.php'
string: 'modules/images/inc/images__widthx.inc.php'
string: 'size'
string: 'width290'

<b>scanning file: /var/www/an2google/trunk/modules/images/views/width200.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	display a single image 200px wide
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - record alias or UID [string]
comment: //opt: imageUID - overrides raUID [string]
comment: //opt: link - link to larger version (yes|no) [string]
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/images/models/image.mod.php'
string: 'modules/images/inc/images__widthx.inc.php'
string: 'size'
string: 'width200'

<b>scanning file: /var/www/an2google/trunk/modules/images/views/width145.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	display a single image 145px wide
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - record alias or UID [string]
comment: //opt: imageUID - overrides raUID [string]
comment: //opt: link - link to larger version (yes|no) [string]
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/images/models/image.mod.php'
string: 'modules/images/inc/images__widthx.inc.php'
string: 'size'
string: 'width145'

<b>scanning file: /var/www/an2google/trunk/modules/images/views/width100.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	display a single image 100px wide
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - record alias or UID [string]
comment: //opt: imageUID - overrides raUID [string]
comment: //opt: link - link to larger version (yes|no) [string]
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/images/models/image.mod.php'
string: 'modules/images/inc/images__widthx.inc.php'
string: 'size'
string: 'width100'

<b>scanning file: /var/www/an2google/trunk/modules/images/views/uploadsingle.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	display upload/view for a single image (eg, user profile picture)
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: refModule - name of a module [string]
comment: //arg: refModel - object type [string]
comment: //arg: refUID - UID of object which owns image [string]
comment: //opt: category - category of image, eg userprofile [string]
comment: //opt: width - width of image (?) [string]
comment: //%	return value [string]
comment: //%	a kapenta module name [string]
comment: //%	a model type name [string]
comment: //%	UID of object which owns this [string]
comment: //%	no default category [string]
comment: //%	default width to display current image at [int]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: check permission for uploading images
comment: //----------------------------------------------------------------------------------------------
comment: //	add block
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/images/models/image.mod.php'
string: ''
string: ''
string: ''
string: ''
string: ''
string: '300'
string: 'refModule'
string: ''
string: 'refModel'
string: ''
string: 'refUID'
string: ''
string: 'refModule'
string: 'refModel'
string: 'refUID'
string: ''
string: ''
string: ''
string: 'images-add'
string: ''
string: 'category'
string: 'category'
string: 'width'
string: 'width'
string: 'refModule'
string: 'refModel'
string: 'refUID'
string: 'modules/images/views/uploadsingle.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/images/views/uploadmultipleform.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	form for uploading multiple images
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: refModule - name of a kapenta module [string]
comment: //arg: refModel - object type [string]
comment: //arg: refUID - UID of object which may own images [string]
comment: //opt: tags - display block tags on return instead of draggable buttons (yes|no) [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check args and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	add the form
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/images/models/image.mod.php'
string: ''
string: 'no'
string: 'tags'
string: 'yes'
string: 'tags'
string: 'yes'
string: 'refModule'
string: '(no refModule)'
string: 'refModel'
string: '(no refModel)'
string: 'refUID'
string: '(no refUID)'
string: 'refModule'
string: 'refModel'
string: 'refUID'
string: '(no such module)'
string: '(owner not found)'
string: 'images-add'
string: ''
string: 'refModule'
string: 'refModel'
string: 'refUID'
string: 'tags'
string: 'modules/images/views/uploadmultiple.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/images/views/uploadmultiple.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	iframe to upload multiple images
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: refModule - module to list on [string]
comment: //arg: refModel - type of object [string]
comment: //arg: refUID - UID of item which own images [string]
comment: //opt: categories - comma delimited list of categories these pictures can belong to [string]
comment: //opt: tags - display block tags instead of draggable buttons, default is no (yes|no) [string]
comment: //%	return value [string]
comment: //%	not yet implemented [string]
comment: //%	diplay block tags instead of draggable buttons (yes|no) [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments as permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the iframe
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/images/models/image.mod.php'
string: ''
string: ''
string: 'no'
string: 'tags'
string: 'yes'
string: 'tags'
string: 'yes'
string: 'refModule'
string: '(no module)'
string: 'refModel'
string: '(no module)'
string: 'refUID'
string: '(no UID)'
string: 'refModule'
string: 'refModel'
string: 'refUID'
string: '(no such module)'
string: '(no such object)'
string: 'images-add'
string: ''
string: 'images/uploadmultiple/'
string: 'refModule_'
string: 'refModule'
string: '/'
string: 'refModel_'
string: 'refModel'
string: '/'
string: 'refUID_'
string: 'refUID'
string: '/'
string: 'tags_'
string: '/'
string: 'categories'
string: '/cats_'
string: 'categories'
string: "&lt;iframe src='"
string: "' name='imgMul"
string: "'"
string: " width='570' height='200' frameborder='0'&gt;&lt;/iframe&gt;"

<b>scanning file: /var/www/an2google/trunk/modules/images/views/thumbsm.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	display a single image at some size or other
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - record alias or UID [string]
comment: //opt: imageUID - overrides raUID [string]
comment: //opt: link - link to larger version (yes|no) [string]
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/images/models/image.mod.php'
string: 'modules/images/inc/images__widthx.inc.php'
string: 'size'
string: 'thumbsm'

<b>scanning file: /var/www/an2google/trunk/modules/images/views/thumb90.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	display a single image thumbnail 90px square
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - record alias or UID [string]
comment: //opt: imageUID - overrides raUID [string]
comment: //opt: link - link to larger version (yes|no) [string]
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/images/models/image.mod.php'
string: 'modules/images/inc/images__widthx.inc.php'
string: 'size'
string: 'thumb90'

<b>scanning file: /var/www/an2google/trunk/modules/images/views/thumb.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	display an image thumbnail
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - record alias or UID [string]
comment: //opt: imageUID - overrides raUID [string]
comment: //opt: link - link to larger version (yes|no) [string]
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/images/models/image.mod.php'
string: 'modules/images/inc/images__widthx.inc.php'
string: 'size'
string: 'thumb'

<b>scanning file: /var/www/an2google/trunk/modules/images/views/swapbutton.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	make an image which acts as a button, swapping div contents
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - record alias or UID [string]
comment: //arg: from - id of a div [string]
comment: //arg: to - id of a div [string]
comment: //opt: imageUID - overrides raUID [string]
comment: //opt: size - size do display, default is width300 [string]
comment: // TODO: check for JS injection here
comment: //For Learners
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/images/models/image.mod.php'
string: 'modules/images/inc/images__widthx.inc.php'
string: 'from'
string: ''
string: 'to'
string: ''
string: 'size'
string: 'size'
string: 'width300'
string: 'link'
string: 'no'
string: "onClick=\"divCopyInnerHtml('"
string: 'from'
string: "', '"
string: 'to'
string: "');\" "
string: "style='cursor: pointer;' "
string: '&lt;img '
string: '&lt;img '

<b>scanning file: /var/www/an2google/trunk/modules/images/views/slideshow.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	add a slideshow
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: refModule - module to list on [string]
comment: //arg: refModel - type of object which may own images [string]
comment: //arg: refUID - UID of object which owns images [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check args and authorisation
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: permissions check here
comment: //----------------------------------------------------------------------------------------------
comment: //	add the form
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/images/models/image.mod.php'
string: 'refModule'
string: '(no refModule)'
string: 'refModel'
string: '(no refModel)'
string: 'refUID'
string: '(no refUID)'
string: 'refModule'
string: 'refModel'
string: 'refUID'
string: '(no such module)'
string: '(no such owner)'
string: 'images/slideshow'
string: '/refModule_'
string: '/refModel_'
string: '/refUID_'
string: '/'
string: "&lt;iframe name='slideShow"
string: 'refUID'
string: "' src='"
string: "' width='570' height='200' frameborder='no' &gt;&lt;/iframe&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/images/views/slide.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	display a single image scaled to fit the slideshow
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - image recordAlias or UID [string]
comment: //opt: imageUID - overrides raUID [string]
comment: //opt: link - link to larger version (yes|no) [string]
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/images/models/image.mod.php'
string: 'modules/images/inc/images__widthx.inc.php'
string: 'size'
string: 'slide'

<b>scanning file: /var/www/an2google/trunk/modules/images/views/single.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	display a single image (eg, user profile picture)
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: refModule - name of a module [string]
comment: //arg: refUID - record which owns this image [string]
comment: //opt: category - category of image, eg userprofile [string]
comment: //opt: size - size of image (default is width300) [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	find the image matching this space
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/images/models/image.mod.php'
string: ''
string: 'width300'
string: 'refModule'
string: 'refUID'
string: 'category'
string: 'category'
string: 'size'
string: 'size'
string: 'refModule'
string: 'refUID'
string: "&lt;img src='/themes/clockface/unavailable/"
string: ".jpg' /&gt;"
string: "&lt;img src='/images/"
string: "/"
string: "' /&gt;"

<b>scanning file: /var/www/an2google/trunk/modules/images/views/showfullnav.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	small column of full-page display of an image + caption, etc
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - recordAlias or UID of an image record [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	add the form
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	find related inages
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	mix and settle
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/images/models/image.mod.php'
string: 'raUID'
string: 'raUID'
string: ''
string: ''
string: "select * from Images_Image where refModule='"
string: "' order by refUID='"
string: "' limit 20"
string: 'UID'
string: 'images/show/'
string: 'alias'
string: 'images/thumb90/'
string: 'alias'
string: "&lt;a href='"
string: "'&gt;&lt;img src='"
string: "' border='0' alt='"
string: 'title'
string: "' /&gt;&lt;/a&gt;\n"
string: ''
string: '(no images are related to this one)'
string: 'related'
string: 'modules/images/views/showfullnav.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/images/views/showfull.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	full-page display of an image + caption, etc
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - recordAlias or UID of image record [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/images/models/image.mod.php'
string: 'raUID'
string: ''
string: 'images_image'
string: 'raUID'
string: ''
string: 'raUID'
string: ''
string: 'modules/images/views/showfull.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/images/views/randomuserimages.fn.php</b>
comment: //REMOVED

<b>scanning file: /var/www/an2google/trunk/modules/images/views/randomuids.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	list UIDs of random images owned by some object on a given module
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: refUID - recordAlias or UID of owner record [string]
comment: //arg: refModule - module owner recod belongs to [string]
comment: //opt: limit - maximum number of UIDs to show (integer) [string]
comment: //opt: separator - list separator, default is pipe [string]
comment: //: images are ordered by weight, future versions may have more options if need arises
comment: //TODO: remove this
comment: //---------------------------------------------------------------------------------------------
comment: //	check arguments
comment: //---------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	load UIDs
comment: //---------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	return as string
comment: //---------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/images/models/image.mod.php'
string: ''
string: '|'
string: 'refUID'
string: 'refModule'
string: 'separator'
string: 'separator'
string: 'limit'
string: 'limit'
string: "refUID='"
string: 'refUID'
string: "'"
string: "refModule='"
string: 'refModule'
string: "'"
string: 'images_image'
string: 'UID'
string: 'RAND()'
string: ''
string: 'UID'

<b>scanning file: /var/www/an2google/trunk/modules/images/views/randomimages.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	display random images owned by some object on a given module
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: refModule - a module [string]
comment: //arg: refModel - owner object's type [string]
comment: //arg: refUID - UID of object which may own images [string]
comment: //opt: size - size of image [string]
comment: //opt: limit - maximum number of results to return [string]
comment: //opt: link - link to image's page on images module (yes|no) [string]
comment: //opt: altUser - UID of user, display avatar if no images [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permission
comment: //----------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	load the image UIDs
comment: //---------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'thumbsm'
string: 'yes'
string: ''
string: 'refUID'
string: ''
string: 'refModule'
string: ''
string: 'size'
string: 'size'
string: 'limit'
string: 'limit'
string: 'link'
string: 'link'
string: 'refModule'
string: 'refUID'
string: "[[:images::randomuids::refModule=$refModule::refUID=$refUID::limit=$limit:]]"
string: ''
string: '|'
string: '%%serverPath%%gallery/TODO-ALIAS_HERE-RANDOMIMAGES'
string: "[[:images::$size::imageUID=$uid::link=$link:]]"

<b>scanning file: /var/www/an2google/trunk/modules/images/views/minigal.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	add a minitaure gallery - like a slideshow, but with bigger thumbs, no next/prev
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: refModule - module to list on [string]
comment: //arg: refUID - UID of item this owns images [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check args and authorisation
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: permissions check here
comment: //----------------------------------------------------------------------------------------------
comment: //	add the form
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/images/models/image.mod.php'
string: 'refModule'
string: '(no refModule)'
string: 'refModel'
string: '(no refModel)'
string: 'refUID'
string: '(no refUID)'
string: 'refModule'
string: 'refModel'
string: 'refUID'
string: '(no such module)'
string: '(no owner object)'
string: 'images/minigal'
string: '/refModule_'
string: '/refModel_'
string: '/refUID_'
string: '/'
string: "&lt;iframe name='miniGalley"
string: 'refUID'
string: "' src='"
string: "' width='570' height='200' frameborder='no' &gt;&lt;/iframe&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/images/views/listuids.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	list UIDs of images owned by some object on a given module
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: refUID - recordAlias or UID of owner record [string]
comment: //arg: refModule - module owner recod belongs to [string]
comment: //opt: limit - maximum number of UIDs to show (integer) [string]
comment: //opt: separator - list separator, default is pipe [string]
comment: //: images are ordered by weight, future versions may have more options if need arises
comment: //TODO: improve this
comment: //---------------------------------------------------------------------------------------------
comment: //	check arguments
comment: //---------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	load UIDs
comment: //---------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	return as string
comment: //---------------------------------------------------------------------------------------------	
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/images/models/image.mod.php'
string: ''
string: '|'
string: 'refUID'
string: ''
string: 'refModule'
string: ''
string: 'refModule'
string: ''
string: 'limit'
string: 'limit'
string: 'separator'
string: 'separator'
string: "refUID='"
string: 'refUID'
string: "'"
string: "refModule='"
string: 'refModule'
string: "'"
string: 'images_image'
string: 'UID'
string: 'weight'
string: ''
string: 'UID'

<b>scanning file: /var/www/an2google/trunk/modules/images/views/listfiles.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	list all original image files known to image module and present on this peer
comment: //--------------------------------------------------------------------------------------------------
comment: //opt: status - status of files (all|present|missing), default all [string]
comment: //opt: format - format of list to return (xml|csv|html), default xml [string]
comment: //---------------------------------------------------------------------------------------------
comment: //	check arguments
comment: //---------------------------------------------------------------------------------------------
comment: //if ('admin' != $user-&gt;role) { return ''; } // TODO: sync auth
comment: //---------------------------------------------------------------------------------------------
comment: //	consider files of all image records
comment: //---------------------------------------------------------------------------------------------
comment: //TODO: consider dbLoadRange (possible memory issue)
comment: //-------------------------------------------------------------------------------------
comment: // all files, regardless of whether they're present on this peer 			
comment: //-------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------
comment: // only files present on this peer
comment: //---------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------
comment: // only files not present on this peer
comment: //---------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	format list of files
comment: //---------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------
comment: //	return file list in XML format
comment: //---------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------
comment: //	return file list in CSV format
comment: //---------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------
comment: //	make HTML table
comment: //---------------------------------------------------------------------------------
comment: // TODO
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/images/models/image.mod.php'
string: 'modules/images/inc/images__widthx.inc.php'
string: 'all'
string: 'xml'
string: ''
string: 'status'
string: 'status'
string: 'format'
string: 'format'
string: "select UID, fileName from Images_Image"
string: 'UID'
string: 'fileName'
string: 'all'
string: 'fileName'
string: 'present'
string: 'missing'
string: 'xml'
string: "&lt;file&gt;\n"
string: "  &lt;refModule&gt;images&lt;/refModule&gt;\n"
string: "  &lt;refModel&gt;Images_Image&lt;/refModel&gt;\n"
string: "  &lt;refUID&gt;"
string: "&lt;/refUID&gt;\n"
string: "  &lt;location&gt;"
string: "&lt;/location&gt;\n"
string: "&lt;/file&gt;\n"
string: 'csv'
string: "images, Images_Image, "
string: ", "
string: "\n"
string: 'html'

<b>scanning file: /var/www/an2google/trunk/modules/images/views/listallfiles.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	list all original image files known to image module
comment: //--------------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/images/models/image.mod.php'
string: 'modules/images/inc/images__widthx.inc.php'
string: 'admin'
string: ''
string: ''
string: "select fileName from Images_Image"
string: 'fileName'
string: "\n"

<b>scanning file: /var/www/an2google/trunk/modules/images/views/listall.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	make a set of x thumbnails
comment: //--------------------------------------------------------------------------------------------------
comment: //opt: page - results page (default is 1) [string]
comment: //opt: num - number of images per page (default is 30) [string]
comment: //%	number of items per page [int]
comment: //%	page number, starts from 1 [int]
comment: //%	position in SQL results [int]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	load page of items from the database and make the block
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: add any conditions here
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/images/models/image.mod.php'
string: ''
string: 'images'
string: 'images_image'
string: 'show'
string: 'num'
string: 'num'
string: 'page'
string: 'page'
string: 'images_image'
string: '*'
string: ''
string: 'createdOn'
string: 'modules/images/summary.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/images/views/imagesetdetail.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	display a set of images associated with something, along with some metadata
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: refModule - module to list on [string]
comment: //arg: refModel - type of object which own images [string]
comment: //arg: refUID - UID of item which owns images [string]
comment: //opt: tags - display block tags instead of draggable buttons (yes|no) [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: check the permission, work out naming convention for inheritance
comment: //----------------------------------------------------------------------------------------------
comment: //	load images from database
comment: //----------------------------------------------------------------------------------------------
comment: //$sql = "select * from Images_Image where refModule='" . $db-&gt;addMarkup($args['refModule']) 
comment: //     . "' and refUID='" . $db-&gt;addMarkup($args['refUID']) . "' order by floor(weight)";
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: tidy this
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/images/models/image.mod.php'
string: ''
string: 'tags'
string: 'yes'
string: 'tags'
string: 'refModule'
string: '(no refModule)'
string: 'refModel'
string: '(no refModel)'
string: 'refUID'
string: '(no refUID)'
string: 'refModule'
string: 'refModel'
string: 'refUID'
string: '(no such module)'
string: '(no owner)'
string: 'images-show'
string: ''
string: "refUID='"
string: "'"
string: "refModule='"
string: "'"
string: 'images_image'
string: '*'
string: 'floor(weight)'
string: 'modules/images/views/imagedetail.block.php'
string: 'tags'
string: ''
string: 'imgblocks'
string: ''
string: 'thumbUrl'
string: '%%serverPath%%images/thumb/'
string: 'alias'
string: 'editUrl'
string: '%%serverPath%%images/edit/return_uploadmultiple/'
string: 'alias'
string: 'images-edit'
string: 'editUrl'
string: '%%serverPath%%images/viewset/return_uploadmultiple/'
string: ''
string: 'caption'
string: 'caption'
string: 'none.'
string: '/images/uploadmultiple/refModule_'
string: '/refModel_'
string: '/refUID_'
string: '/'
string: 'tags'
string: "
			&lt;small&gt;
			To use this image, copy one of the following tags into your text.&lt;br/&gt;
	        &lt;b&gt;Tag:&lt;/b&gt; [&amp;#91;:images::thumb::imageUID="
string: ":&amp;#93;]&lt;br/&gt;
	        &lt;b&gt;Tag:&lt;/b&gt; [&amp;#91;:images::width300::imageUID="
string: ":&amp;#93;]&lt;br/&gt;
	        &lt;b&gt;Tag:&lt;/b&gt; [&amp;#91;:images::width570::imageUID="
string: ":&amp;#93;]&lt;br/&gt;	
			&lt;/small&gt;
			"
string: 'imgblocks'
string: "
			&lt;small&gt;To use this image, drag one of the buttons below into your text:&lt;/small&gt;&lt;br/&gt;
			[[:theme::button::label=thumbnail::alt=images|raUID="
string: "|size=thumb|:]]
			[[:theme::button::label=width300::alt=images|raUID="
string: "|size=width300|:]]
			[[:theme::button::label=width570::alt=images|raUID="
string: "|size=widtheditor|:]]
			&lt;br/&gt;
			"
string: 'deleteForm'
string: "
		&lt;form name='deleteImage' method='POST' action='%%serverPath%%images/delete/' &gt;
		&lt;input type='hidden' name='action' value='deleteImage' /&gt;
		&lt;input type='hidden' name='UID' value='"
string: "' /&gt;
		&lt;input type='hidden' name='return' value='"
string: "' /&gt;
		&lt;input type='image' src='%%serverPath%%themes/clockface/images/btn-del.png' alt='delete' /&gt;
		&lt;/form&gt;
		"

<b>scanning file: /var/www/an2google/trunk/modules/images/views/imageset.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	display a set of images associated with something
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: refModule - module to list on [string]
comment: //arg: refUID - UID of item which owns the images [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check args and authorisation
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	load the image records and make html
comment: //----------------------------------------------------------------------------------------------
comment: //$sql = "select * from Images_Image where refModule='" . $db-&gt;addMarkup($args['refModule']) 
comment: //    . "' and refUID='" . $db-&gt;addMarkup($args['refUID']) . "'";
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/images/models/image.mod.php'
string: ''
string: 'refModule'
string: '(no refModule)'
string: 'refUID'
string: '(no refUID)'
string: 'refModule'
string: 'refModel'
string: 'images-show'
string: 'refUID'
string: ''
string: "refModule='"
string: 'refModule'
string: "'"
string: "refUID='"
string: 'refUID'
string: "'"
string: 'images_image'
string: '*'
string: 'weight'
string: '%%serverPath%%images/thumb/'
string: 'alias'
string: '%%serverPath%%images/edit/return_uploadmultiple/'
string: 'alias'
string: 'refModule'
string: 'refModel'
string: 'images-edit'
string: 'refUID'
string: 'images/viewset/return_uploadmultiple/'
string: "&lt;a href='"
string: "'&gt;"
string: "&lt;img src='"
string: "' border='0' /&gt;&lt;/a&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/images/views/editform.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	form for editing images
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - recordAlias or UID of image record [string]
comment: //opt: return - return to upload dialog (set to 'uploadmultiple') [string]
comment: //%	return value [html]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: check permissions here
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/images/models/image.mod.php'
string: ''
string: 'raUID'
string: ''
string: 'return'
string: 'return'
string: 'raUID'
string: '(image not found)'
string: 'return'
string: 'returnLink'
string: ''
string: 'uploadmultiple'
string: 'returnUrl'
string: '/images/uploadmultiple'
string: '/refModule_'
string: '/refModel_'
string: '/refUID_'
string: '/'
string: 'returnLink'
string: "&lt;a href='"
string: 'returnUrl'
string: "'&gt;[&amp;lt;&amp;lt; return to upload form ]&lt;/a&gt;"
string: 'modules/images/views/editform.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/images/views/downloadmultipleform.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	form for downloading multiple images
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: refModule - module to which image may be exported [string]
comment: //arg: refModel - type of object which will own image [string]
comment: //arg: refUID - object which will own the downloaded image [string]
comment: //opt: tags - display block tags on return instead of draggable buttons (yes|no) [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check args and authorisation
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the form
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/images/models/image.mod.php'
string: ''
string: 'no'
string: 'tags'
string: 'yes'
string: 'tags'
string: 'yes'
string: 'refModule'
string: '(no refModule)'
string: 'refModel'
string: '(no refModel)'
string: 'refUID'
string: '(no refUID)'
string: 'refModule'
string: 'refModel'
string: 'images-add'
string: 'refUID'
string: ''
string: 'refModule'
string: 'refModule'
string: 'refModel'
string: 'refModel'
string: 'refUID'
string: 'refUID'
string: 'tags'
string: 'tags'
string: 'modules/images/views/downloadmultiple.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/images/views/default.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	find and display the default image of some object
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: refUID - alias or UID of owner object [string]
comment: //opt: altUser - UID of a Users_User object [string]
comment: //opt: size - width100, width200, width300, width570, thumb, thumbsm or thumb90 [string]
comment: //opt: link - link to larger image (yes|no) [string]
comment: //: if there is no default image, a user's default image may be used instead by filling altUser
comment: //TODO: add refModule and refModel checks
comment: //----------------------------------------------------------------------------------------------
comment: //	check permissions and arguments
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: check permissions
comment: // TODO - make this a setting
comment: //----------------------------------------------------------------------------------------------
comment: //	find default (lowest weight image), if any
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------
comment: // no images found for this item
comment: //--------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------
comment: // try the user's image
comment: //--------------------------------------------------------------------------------------
comment: //-----------------------------------------------------------------------------------------
comment: //	item owns at least one image, return default (the one with lowest weight)
comment: //-----------------------------------------------------------------------------------------
comment: //-------------------------------------------------------------------------------------
comment: // image with link to self on images module
comment: //-------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/images/models/image.mod.php'
string: 'width300'
string: 'yes'
string: ''
string: ''
string: 'refUID'
string: 'link'
string: 'link'
string: 'altUser'
string: 'altUser'
string: 'size'
string: 'size'
string: 'thumb'
string: 'thumb'
string: 'size'
string: 'thumbsm'
string: 'thumbsm'
string: 'size'
string: 'thumb90'
string: 'thumb90'
string: 'size'
string: 'width100'
string: 'width100'
string: 'size'
string: 'width200'
string: 'width200'
string: 'size'
string: 'width300'
string: 'width300'
string: 'size'
string: 'width570'
string: 'width570'
string: "refUID='"
string: 'refUID'
string: "'"
string: 'images_image'
string: '*'
string: 'weight ASC'
string: '1'
string: ''
string: 'users_user'
string: 'themes/clockface/unavailable/'
string: '.jpg'
string: "&lt;img src='"
string: "' border='0' /&gt;"
string: '[[:images::default::size='
string: '::link=no::refUID='
string: ':]]'
string: "%%serverPath%%images/"
string: "/"
string: 'alias'
string: "&lt;img src='"
string: "' border='0' alt='"
string: 'title'
string: "' /&gt;"
string: 'yes'
string: '%%serverPath%%images/show/'
string: 'alias'
string: "&lt;a href='"
string: "'&gt;$html&lt;/a&gt;"

<b>scanning file: /var/www/an2google/trunk/modules/images/views/count.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	count images belonging to a given UID on some module specified
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: refUID - recordAlias or UID of owner record [string]
comment: //arg: refModule - module owner recod belongs to [string]
comment: //TODO: $db-&gt;countRange
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/images/models/image.mod.php'
string: ''
string: 'refUID'
string: ''
string: 'refModule'
string: ''
string: "SELECT count(UID) as countImages FROM Images_Image "
string: "WHERE refUID='"
string: 'refUID'
string: "' "
string: "AND refModule='"
string: 'refModule'
string: "'"
string: 'countImages'

<b>scanning file: /var/www/an2google/trunk/modules/images/views/allthumbs.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	list all thumbnails for a site, module, model or object - paginated
comment: //--------------------------------------------------------------------------------------------------
comment: //opt: refModule - kapenta module name [string]
comment: //opt: refModel - object type [string]
comment: //opt: refModel - object type [string]
comment: //opt: pageNo - page number (integer) [string]
comment: //opt: pageSize - number or items per page (integer) [string]
comment: //opt: orderBy - field to order the list by (defualt is createdOn) [string]
comment: //opt: paginate - use pagination (yes|no) [string]
comment: //%	first page if not specified [int]
comment: //%	default number of items per page [int]
comment: //%	default list order [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check permissions and args
comment: //----------------------------------------------------------------------------------------------
comment: // users may list by these fields
comment: //----------------------------------------------------------------------------------------------
comment: //	count and load list items
comment: //----------------------------------------------------------------------------------------------
comment: //% to filter list by [array:string]
comment: //% list ordinal of first item [int]	
comment: //% total number of items [int]
comment: //% number of pages [int]
comment: //----------------------------------------------------------------------------------------------
comment: //	make the table
comment: //----------------------------------------------------------------------------------------------
comment: //$link = 'images/listimage/';	//% relative to serverPath [string]
comment: //$html .= "[[:theme::pagination::page=$pageNo::total=$totalPages::link=$link:]]\n";
comment: //$html .= $theme-&gt;arrayToHtmlTable($table, true, true);
string: 'modules/images/models/image.mod.php'
string: 'title'
string: ''
string: 'images'
string: 'images_image'
string: 'list'
string: ''
string: 'page'
string: 'pageNo'
string: 'num'
string: 'pageSize'
string: 'by'
string: 'by'
string: 'title'
string: 'title'
string: 'createdon'
string: 'createdOn'
string: 'refModule'
string: "refModule='"
string: 'refModule'
string: "'"
string: 'refModel'
string: "refModel='"
string: 'refModel'
string: "'"
string: 'refUID'
string: "refUID='"
string: 'refUID'
string: "'"
string: 'images_image'
string: 'images_image'
string: '*'
string: "&lt;div class='inlinequote'&gt;(no images)&lt;/div&gt;&lt;br/&gt;\n"
string: "[[:images::thumb::imageUID="
string: 'UID'
string: "::link=no:]]\n"

<b>scanning file: /var/www/an2google/trunk/modules/images/views/adminconsole.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	list of controls for this module as displayed on the admin console
comment: //--------------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'admin'
string: ''
string: 'modules/images/views/adminconsole.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/images/views/_widthx.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	display a single image at a given size
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - recordAlias or UID of an image record [string]
comment: //opt: link - link to larger version (yes|no) [string]
comment: //opt: size - scale type, default is width300 [string]
comment: //opt: align - deprecated (left|right) [string]
comment: //opt: caption - display caption, deprecated (yes|no) [string]
comment: //opt: imageUID - overrides raUID [string]
comment: //opt: pad - blank space to elave around image [string]
string: 'modules/images/models/image.mod.php'
string: 'yes'
string: 'no'
string: 'width300'
string: ''
string: ''
string: 'imageUID'
string: 'raUID'
string: 'imageUID'
string: 'raUID'
string: 'link'
string: 'link'
string: 'c'
string: 'c'
string: 'caption'
string: 'caption'
string: 'size'
string: 'size'
string: 'align'
string: 'align'
string: 'images/'
string: 'raUID'
string: 'images/'
string: '/'
string: 'raUID'
string: ''
string: 'pad'
string: 'pad'
string: "vspace='"
string: "px' hspace='"
string: "px'"
string: "&lt;img src='"
string: "' border='0' $pad /&gt;"
string: 'yes'
string: "&lt;a href='"
string: "'&gt;$html&lt;/a&gt;"
string: 'yes'
string: 'raUID'
string: 'left'
string: "style='float: left;'"
string: 'right'
string: "style='float: right;'"
string: "&lt;div class='caption' $align&gt;$html&lt;br/&gt;&lt;small&gt;"
string: "&lt;/small&gt;&lt;/div&gt;"
string: 'width300'
string: "class='caption'"
string: "class='captionpad'"

<b>scanning file: /var/www/an2google/trunk/modules/images/models/image.mod.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	object for managing images
comment: //--------------------------------------------------------------------------------------------------
comment: //+	The following types are supported: jpeg, gif, png
comment: //+
comment: //+	Transforms are derivative images that do not need their own record, such as thumbnails.  They 
comment: //+	are automatically created as needed and destroyed if unused for a period of time, to free disk 
comment: //+	space.
comment: //+
comment: //+	examples: /images/width300/someimage.jpg /images/thumb/someimage.jpg
comment: //+
comment: //+	Transform scripts can be modifed to perform actions such as automatically watermarking images
comment: //+	uploaded to a website.
comment: //----------------------------------------------------------------------------------------------
comment: //	member variables (as retieved from database)
comment: //----------------------------------------------------------------------------------------------
comment: //_	currently loaded database record [array]
comment: //_	database table definition [array]
comment: //_	set to true when an object has been loaded [bool]
comment: //_ UID [string]
comment: //_ module [string]
comment: //_ model [string]
comment: //_ ref:*-* [string]
comment: //_ title [string]
comment: //_ varchar(30) [string]
comment: //_ varchar(255) [string]
comment: //_ varchar(255) [string]
comment: //_ varchar(255) [string]
comment: //_	SHA1 varchar(50) [string]
comment: //_ varchar(30) [string]
comment: //_ plaintext [string]
comment: //_ plaintext [string]
comment: //_ varchar(100) [string]
comment: //_ int [string]
comment: //_ datetime [string]
comment: //_ ref:Users_User [string]
comment: //_ datetime [string]
comment: //_ ref:Users_User [string]
comment: //_ alias [string]
comment: // image handle
comment: //----------------------------------------------------------------------------------------------
comment: //. constructor
comment: //----------------------------------------------------------------------------------------------
comment: //opt: raUID - UID or alias of a Image object [string]
comment: // initialise table schema
comment: // try load an object from the database
comment: // check if we did
comment: // make new object
comment: // initialize
comment: // set default title
comment: // no transforms yet
comment: // end of list (corrected on save())
comment: //----------------------------------------------------------------------------------------------
comment: //. load an object from the database given its UID or an alias
comment: //----------------------------------------------------------------------------------------------
comment: //arg: raUID - UID or alias of a Image object [string]
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //. load Image object serialized as an associative array
comment: //----------------------------------------------------------------------------------------------
comment: //arg: ary - associative array of members and values [array]
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //. save the current object to database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string on success, html report of errors on failure [string]
comment: //: $db-&gt;save(...) will raise an object_updated event if successful
comment: // update image weights
comment: //----------------------------------------------------------------------------------------------
comment: //. check that object is correct before allowing it to be stored in database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string if object passes, warning message if not [string]
comment: //----------------------------------------------------------------------------------------------
comment: //. database table definition and content versioning
comment: //----------------------------------------------------------------------------------------------
comment: //returns: information for constructing SQL queries [array]
comment: //table columns
comment: //these fields will be indexed
comment: //revision history will be kept for these fields
comment: // end getDbSchema
comment: //----------------------------------------------------------------------------------------------
comment: //. serialize this object to an array
comment: //----------------------------------------------------------------------------------------------
comment: //returns: associative array of all members which define this instance [array]
comment: //----------------------------------------------------------------------------------------------
comment: //. serialize this object to xml
comment: //----------------------------------------------------------------------------------------------
comment: //arg: xmlDec - include xml declaration? [bool]
comment: //arg: indent - string with which to indent lines [bool]
comment: //returns: xml serialization of this object [string]
comment: //NOTE: any members which are not XML clean should be marked up before sending
comment: //----------------------------------------------------------------------------------------------
comment: //. make an extended array of data views may need
comment: //----------------------------------------------------------------------------------------------
comment: //returns: associative array of members, metadata and partial views [array]
comment: //------------------------------------------------------------------------------------------
comment: //	links
comment: //------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //.	expand transforms
comment: //----------------------------------------------------------------------------------------------
comment: //arg: serialized - serialized transforms [string]
comment: //returns: array of transforms, size =&gt; fileName [string]
comment: //----------------------------------------------------------------------------------------------
comment: //.	collapse transforms
comment: //----------------------------------------------------------------------------------------------
comment: //arg: transforms - transforms array [array]
comment: //returns: transforms serialized to string [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //.	check if a given transform exists
comment: //----------------------------------------------------------------------------------------------
comment: //arg: transName - name of a transform, eg thumb [string]
comment: //returns: location of transformed file if it exists, false if not [string][bool]
comment: //----------------------------------------------------------------------------------------------
comment: //.	get sha1 hash of image file (if any)
comment: //----------------------------------------------------------------------------------------------
comment: //returns: SHA1 hash of image file, null string if none [string]
comment: //----------------------------------------------------------------------------------------------
comment: //.	load actual image (rather than the record)
comment: //----------------------------------------------------------------------------------------------
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //.	scale the image to a given width
comment: //----------------------------------------------------------------------------------------------
comment: //arg: width - width in pixels [int]
comment: //returns: handle to new image [int]
comment: //----------------------------------------------------------------------------------------------
comment: //.	scale and crop the image to fit a given box
comment: //----------------------------------------------------------------------------------------------
comment: //arg: toWidth - box width [int]
comment: //arg: toHeight - box height [int]
comment: //returns: handle of new image [int]
comment: //--------------------------------------------------------------------------------------
comment: // resize to common width, trim top and bottom edges
comment: // think: if they had the same width, what would be the difference in height?
comment: //--------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------
comment: // resize to common height, trim left and right edges
comment: // think: if they had the same height, what would be the difference in width?
comment: //--------------------------------------------------------------------------------------
comment: //echo $chatty;
comment: //----------------------------------------------------------------------------------------------
comment: //.	find a single image on a given object and module, and load it
comment: //----------------------------------------------------------------------------------------------
comment: //arg: refModule - module which controls this image's owner [string]
comment: //arg: refUID - UID of object which owns this image [string]
comment: //arg: category - unused at present [string]
comment: //returns: UID of image, or false if one was not found [string][bool]
comment: //----------------------------------------------------------------------------------------------
comment: //.	save an image to disk and record the filename in $this-&gt;fileName
comment: //----------------------------------------------------------------------------------------------
comment: //arg: img - an image handle [int]
comment: //TODO: make JPEG quality a setting
comment: //------------------------------------------------------------------------------------------
comment: //	save the file
comment: //------------------------------------------------------------------------------------------
comment: // ensure directory exists
comment: // save it
comment: //---------------------------------------------------------------------------------------------
comment: //.	nominally delete the current record, dissociate from owner
comment: //---------------------------------------------------------------------------------------------
comment: //, due to some messed up events of March 2010, images are not deleted first time round
comment: //------------------------------------------------------------------------------------------
comment: //	send specific event to module responsible for object which owned the deleted image
comment: //------------------------------------------------------------------------------------------
comment: //$args = array('module' =&gt; 'images', 'UID' =&gt; $this-&gt;UID, 'title' =&gt; $ext['title']);
comment: //eventSendSingle($ext['refModule'], 'images_deleted', $args);
comment: //TODO: this
comment: //---------------------------------------------------------------------------------------------
comment: //.	delete current image and all transforms
comment: //---------------------------------------------------------------------------------------------
comment: //-----------------------------------------------------------------------------------------
comment: //	delete the file and any transforms
comment: //-----------------------------------------------------------------------------------------
comment: // TODO: kapenta should hand this
comment: //-----------------------------------------------------------------------------------------
comment: //	delete the record
comment: //-----------------------------------------------------------------------------------------
comment: // nothing to do
comment: //-----------------------------------------------------------------------------------------
comment: //	send specific event to module responsible for object which owned the deleted image
comment: //-----------------------------------------------------------------------------------------
comment: //$args = array('module' =&gt; 'images', 'UID' =&gt; $this-&gt;UID, 'title' =&gt; $ext['title']);
comment: //eventSendSingle($ext['refModule'], 'image_deleted', $args);
comment: //TODO: this
string: 'modules/images/inc/imageset.class.php'
string: ''
string: ''
string: 'New Image '
string: ''
string: ''
string: 'UID'
string: 'refModule'
string: 'refModel'
string: 'refUID'
string: 'title'
string: 'licence'
string: 'attribName'
string: 'attribUrl'
string: 'fileName'
string: 'hash'
string: 'format'
string: 'transforms'
string: 'caption'
string: 'category'
string: 'weight'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: 'alias'
string: ''
string: 'images'
string: 'images_image'
string: "Database error.&lt;br/&gt;\n"
string: ''
string: ''
string: ''
string: "No UID.&lt;br/&gt;\n"
string: ''
string: "No refModule.&lt;br/&gt;\n"
string: ''
string: "No refModel.&lt;br/&gt;\n"
string: ''
string: "No refUID.&lt;br/&gt;\n"
string: 'module'
string: 'images'
string: 'model'
string: 'images_image'
string: 'fields'
string: 'UID'
string: 'VARCHAR(33)'
string: 'refModule'
string: 'VARCHAR(50)'
string: 'refModel'
string: 'VARCHAR(50)'
string: 'refUID'
string: 'VARCHAR(33)'
string: 'title'
string: 'VARCHAR(255)'
string: 'licence'
string: 'VARCHAR(30)'
string: 'attribName'
string: 'VARCHAR(255)'
string: 'attribUrl'
string: 'VARCHAR(255)'
string: 'fileName'
string: 'VARCHAR(255)'
string: 'hash'
string: 'VARCHAR(50)'
string: 'format'
string: 'VARCHAR(30)'
string: 'transforms'
string: 'TEXT'
string: 'caption'
string: 'TEXT'
string: 'category'
string: 'VARCHAR(100)'
string: 'weight'
string: 'BIGINT(20)'
string: 'createdOn'
string: 'DATETIME'
string: 'createdBy'
string: 'VARCHAR(33)'
string: 'editedOn'
string: 'DATETIME'
string: 'editedBy'
string: 'VARCHAR(33)'
string: 'alias'
string: 'VARCHAR(255)'
string: 'indices'
string: 'UID'
string: '10'
string: 'refModule'
string: '10'
string: 'refModel'
string: '10'
string: 'refUID'
string: '10'
string: 'createdOn'
string: ''
string: 'createdBy'
string: '10'
string: 'editedOn'
string: ''
string: 'editedBy'
string: '10'
string: 'alias'
string: '10'
string: 'nodiff'
string: 'UID'
string: 'hash'
string: 'editedOn'
string: 'editedBy'
string: 'weight'
string: 'UID'
string: 'refModule'
string: 'refModel'
string: 'refUID'
string: 'title'
string: 'licence'
string: 'attribName'
string: 'attribUrl'
string: 'fileName'
string: 'hash'
string: 'format'
string: 'transforms'
string: 'caption'
string: 'category'
string: 'weight'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: 'alias'
string: ''
string: 'hash'
string: 'hash'
string: ''
string: 'kobject'
string: 'image'
string: "&lt;$xType type='images_image'&gt;\n"
string: "    &lt;UID&gt;"
string: "&lt;/UID&gt;\n"
string: "    &lt;refModule&gt;"
string: "&lt;/refModule&gt;\n"
string: "    &lt;refModel&gt;"
string: "&lt;/refModel&gt;\n"
string: "    &lt;refUID&gt;"
string: "&lt;/refUID&gt;\n"
string: "    &lt;title&gt;"
string: "&lt;/title&gt;\n"
string: "    &lt;licence&gt;"
string: "&lt;/licence&gt;\n"
string: "    &lt;attribName&gt;"
string: "&lt;/attribName&gt;\n"
string: "    &lt;attribUrl&gt;"
string: "&lt;/attribUrl&gt;\n"
string: "    &lt;fileName&gt;"
string: "&lt;/fileName&gt;\n"
string: "    &lt;hash&gt;"
string: "&lt;/hash&gt;\n"
string: "    &lt;format&gt;"
string: "&lt;/format&gt;\n"
string: "    &lt;transforms&gt;"
string: "&lt;/transforms&gt;\n"
string: "    &lt;caption&gt;"
string: "&lt;/caption&gt;\n"
string: "    &lt;category&gt;"
string: "&lt;/category&gt;\n"
string: "    &lt;weight&gt;"
string: "&lt;/weight&gt;\n"
string: "    &lt;createdOn&gt;"
string: "&lt;/createdOn&gt;\n"
string: "    &lt;createdBy&gt;"
string: "&lt;/createdBy&gt;\n"
string: "    &lt;editedOn&gt;"
string: "&lt;/editedOn&gt;\n"
string: "    &lt;editedBy&gt;"
string: "&lt;/editedBy&gt;\n"
string: "    &lt;alias&gt;"
string: "&lt;/alias&gt;\n"
string: "&lt;/$xType&gt;\n"
string: "&lt;?xml version='1.0' encoding='UTF-8' ?&gt;\n"
string: 'viewUrl'
string: ''
string: 'viewLink'
string: ''
string: 'editUrl'
string: ''
string: 'editLink'
string: ''
string: 'delUrl'
string: ''
string: 'delLink'
string: ''
string: 'newUrl'
string: ''
string: 'newLink'
string: ''
string: 'images'
string: 'images_image'
string: 'show'
string: 'viewUrl'
string: ""
string: 'viewLink'
string: "&lt;a href='"
string: 'viewUrl'
string: "'&gt;[ more &amp;gt;gt; ]&lt;/a&gt;"
string: 'images'
string: 'images_image'
string: 'edit'
string: 'editUrl'
string: '%~%serverPath%~%images/edit/'
string: 'alias'
string: 'editLink'
string: "&lt;a href='"
string: 'editUrl'
string: "'&gt;[ edit ]&lt;/a&gt;"
string: 'images'
string: 'images_image'
string: 'delete'
string: 'delUrl'
string: '%~%serverPath%~%images/delimage/'
string: 'alias'
string: 'delLink'
string: "&lt;a href='"
string: 'delUrl'
string: "'&gt;[ delete ]&lt;/a&gt;"
string: "\n"
string: '|'
string: ''
string: '|'
string: "\n"
string: ''
string: ''
string: ''
string: ''
string: 'jpg'
string: 'png'
string: 'gif'
string: ''
string: "source aspect ratio: $srcAspect &lt;br/&gt;\n"
string: "dest aspect ratio: $destAspect &lt;br/&gt;\n"
string: "dest width: $toWidth &lt;br/&gt;"
string: "dest height: $toHeight &lt;br/&gt;"
string: "scaleHeight: $scaleHeight &lt;br/&gt;\n"
string: "destY: $destY &lt;br/&gt;\n"
string: "here ---!--- "
string: "scale width: $scaleWidth &lt;br/&gt;\n"
string: "dest x: $destX &lt;br/&gt;\n"
string: "refModule='"
string: "'"
string: "refUID='"
string: "'"
string: "category='"
string: "'"
string: 'images_image'
string: '*'
string: 'weight'
string: '1'
string: ''
string: 'UID'
string: 'UID'
string: 'data/images/'
string: '/'
string: '/'
string: '/'
string: '.jpg'
string: 'jpg'
string: 'del-'
string: ''
string: 'del-'
string: ''
string: 'del-'
string: 'del-'

<b>scanning file: /var/www/an2google/trunk/modules/images/inc/sendimg.inc.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //	send an image at the specified size
comment: //-------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	load the image record
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check for If-Modified-Since header
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	create the thumbnail if it does not exist
comment: //----------------------------------------------------------------------------------------------
comment: //-------------------------------------------------------------------------------------
comment: //	full sized image exists on this peer
comment: //-------------------------------------------------------------------------------------
comment: //-------------------------------------------------------------------------------------
comment: //	full sized image does not exist on this peer
comment: //-------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	return the transform
comment: //------------------------------------------------------------------------------------------
comment: //-------------------------------------------------------------------------------------
comment: //	file exists on this peer
comment: //-------------------------------------------------------------------------------------
comment: //-------------------------------------------------------------------------------------
comment: //	file does not exist on this peer, find it
comment: //-------------------------------------------------------------------------------------
comment: //$sync-&gt;requestFile($model-&gt;transforms[$size]);	//TODO: re-add this with sync object
string: 'modules/images/models/image.mod.php'
string: ''
string: 'Image not specified.'
string: 'Image not found'
string: ''
string: 'File missing.'
string: 'HTTP_IF_MODIFIED_SINCE'
string: 'HTTP_IF_NONE_MATCH'
string: 'Last-Modified: '
string: "ETag: \""
string: "\""
string: 'Cache-Control: max-age=3600'
string: 'HTTP/1.0 304 Not Modified'
string: ""
string: ''
string: 'thumb'
string: 'thumbsm'
string: 'thumb90'
string: 'width100'
string: 'width145'
string: 'width190'
string: 'width200'
string: 'width290'
string: 'width300'
string: 'width560'
string: 'width570'
string: 'widtheditor'
string: 'slide'
string: '.jpg'
string: '_'
string: '.jpg'
string: 'Content-Type: image/jpeg'
string: 'Last-Modified: '
string: "ETag: \""
string: "\""
string: 'Cache-Control: max-age=3600'
string: 'themes/'
string: '/unavailable/'
string: '.jpg'
string: 'Content-Type: image/jpeg'
string: 'Last-Modified: '
string: "ETag: \""
string: "\""
string: 'Cache-Control: max-age=3600'
string: 'themes/'
string: '/unavailable/loading'
string: '.jpg'

<b>scanning file: /var/www/an2google/trunk/modules/images/inc/relationships.inc.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	relationships between images and users
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: refModel - type of object [string]
comment: //arg: UID - UID of a Images_Image object [string]
comment: //arg: relationship - between this object and a user [string]
comment: //arg: userUID - UID of the user related to this object [string]
comment: //returns: true if the given relationship exists, otherwise false [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //	get the user we want to know about
comment: //----------------------------------------------------------------------------------------------	
comment: //----------------------------------------------------------------------------------------------
comment: //	relationships of Images_Image object
comment: //----------------------------------------------------------------------------------------------
comment: // try load the object
comment: // check that we did
comment: //TODO: other relationships here
string: 'modules/images/models/image.mod.php'
string: 'images_image'
string: 'creator'
string: 'Unknown model: '
string: 'bug'

<b>scanning file: /var/www/an2google/trunk/modules/images/inc/maintenance.inc.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //	maintain the images table
comment: //-------------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	check image data
comment: //---------------------------------------------------------------------------------------------
comment: //-----------------------------------------------------------------------------------------
comment: //	check that this record has a recordAlias
comment: //-----------------------------------------------------------------------------------------
comment: // not fixed
comment: // fixed
comment: //-------------------------------------------------------------------------------------
comment: //	make sure image file is in /data/images/ (security)
comment: //-------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------
comment: //	check that image file is valid
comment: //--------------------------------------------------------------------------------------
comment: //TODO:
comment: //$model-&gt;fileName = '/data/images/error';
comment: //$model-&gt;save();
comment: //-----------------------------------------------------------------------------------------
comment: //	check transforms
comment: //-----------------------------------------------------------------------------------------
comment: //-------------------------------------------------------------------------------------
comment: //	make sure it's in /data/images
comment: //-------------------------------------------------------------------------------------
comment: // file exists
comment: // has extension .jpg
comment: // is not valid image
comment: // delete it
comment: //TODO:
comment: //---------------------------------------------------------------------------------------------
comment: //	compile report
comment: //---------------------------------------------------------------------------------------------
string: 'modules/images/models/image.mod.php'
string: "&lt;h2&gt;Checking images table...&lt;/h2&gt;"
string: 'UID'
string: 'Title'
string: 'error'
string: "select * from Images_Image"
string: ''
string: 'alias'
string: 'UID'
string: ''
string: 'UID'
string: 'title'
string: 'added alias'
string: 'UID'
string: 'title'
string: 'added alias'
string: 'data/images/'
string: 'UID'
string: 'title'
string: 'removed broken image file'
string: "TODO: remove this record (security)&lt;br/&gt;"
string: 'data/images/'
string: '.jpg'
string: 'removed broken transform ('
string: ')'
string: 'UID'
string: 'title'
string: "NOT in /data/images/ TODO: remove this transform"
string: "&lt;b&gt;Records Checked:&lt;/b&gt; $recordCount&lt;br/&gt;\n"
string: "&lt;b&gt;Errors Found:&lt;/b&gt; $errorCount&lt;br/&gt;\n"
string: "&lt;b&gt;Errors Fixed:&lt;/b&gt; $fixCount&lt;br/&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/images/inc/install.inc.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	install script for Images module
comment: //--------------------------------------------------------------------------------------------------
comment: //+	reports are human-readable HTML, with script-readable HTML comments
comment: //--------------------------------------------------------------------------------------------------
comment: //|	install the Images module
comment: //--------------------------------------------------------------------------------------------------
comment: //returns: html report or false if not authorized [string][bool]
comment: //----------------------------------------------------------------------------------------------
comment: //	create or upgrade Images_Image table
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	import any records from previous images table
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	done
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
comment: //|	discover if this module is installed
comment: //--------------------------------------------------------------------------------------------------
comment: //:	if installed correctly report will contain HTML comment &lt;!-- installed correctly --&gt;
comment: //returns: HTML installation status report [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	ensure the table which stores Image objects exists and is correct
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	done
comment: //----------------------------------------------------------------------------------------------
string: 'core/dbdriver/mysqladmin.dbd.php'
string: 'modules/images/models/image.mod.php'
string: 'admin'
string: ''
string: 'record'
string: 'images'
string: "&lt;b&gt;moved $count records from 'images' table.&lt;/b&gt;&lt;br/&gt;"
string: 'admin'
string: ''
string: '&lt;!-- table installed correctly --&gt;'
string: '&lt;!-- module installed correctly --&gt;'

<b>scanning file: /var/www/an2google/trunk/modules/images/inc/imageset.class.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	object to represent the set of all images owned by some object
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	memebr variables
comment: //----------------------------------------------------------------------------------------------
comment: //_	range of serialized Images_Image objects [array]
comment: //_ is set to true when a range has been loaded [bool]
comment: //_ kapenta module [string]
comment: //_	type of object [string]
comment: //_	UID of object which owns images [string]
comment: //----------------------------------------------------------------------------------------------
comment: //.	constructor (loads all images belonging to some object)
comment: //----------------------------------------------------------------------------------------------
comment: //arg: refModule - a kapenta module [string]
comment: //arg: refModel - type of object which owns images [string]
comment: //arg: refUID - UID of object which may own images
comment: //----------------------------------------------------------------------------------------------
comment: //.	load the set of images
comment: //----------------------------------------------------------------------------------------------
comment: //returns: true of success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //.	ensure that weights are contiguous
comment: //----------------------------------------------------------------------------------------------
comment: //returns: true on succes, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //.	get the index of an image in $this-&gt;images give its UID
comment: //----------------------------------------------------------------------------------------------
comment: //returns: index on success, -1 on failure [int]
comment: //----------------------------------------------------------------------------------------------
comment: //.	bump an image up in the list of weights
comment: //----------------------------------------------------------------------------------------------
comment: //arg: UID - UID of an Images_Image object [string]
comment: //------------------------------------------------------------------------------------------
comment: //	increase weight by 1
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	decrease weight of next image by 1 (if any)
comment: //------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //.	bump an image down in the list of weights
comment: //----------------------------------------------------------------------------------------------
comment: //arg: UID - UID of an Images_Image object [string]
comment: //------------------------------------------------------------------------------------------
comment: //	decrease weight by 1
comment: //------------------------------------------------------------------------------------------
comment: // nothing to do
comment: //------------------------------------------------------------------------------------------
comment: //	increase weight of previous image by 1 (if any)
comment: //------------------------------------------------------------------------------------------
string: 'modules/images/models/image.mod.php'
string: "refModule='"
string: "'"
string: "refModel='"
string: "'"
string: "refUID='"
string: "'"
string: 'Images_Image'
string: '*'
string: 'weight'
string: 'weight'
string: 'UID'
string: 'UID'
string: 'UID'
string: 'UID'

<b>scanning file: /var/www/an2google/trunk/modules/images/inc/images__widthx.inc.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	display a single image at a given size
comment: //--------------------------------------------------------------------------------------------------
comment: // * $args['imageUID'] = overrides raUID
comment: // * $args['raUID'] = record alias or UID
comment: // * $args['link'] = link to larger version (yes|no)
comment: // * $args['size'] = scale type
comment: // * $args['align'] = left|right
comment: // * $args['caption'] = yes|no - display caption
comment: //---------------------------------------------------------------------------------------------
comment: //	read and check arguments
comment: //---------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	make html
comment: //---------------------------------------------------------------------------------------------
comment: //echo "image rauid: " . $args['raUID'] . "&lt;br/&gt;\n";
string: 'modules/images/models/image.mod.php'
string: 'yes'
string: 'no'
string: 'width300'
string: ''
string: ''
string: ''
string: 'imageUID'
string: 'raUID'
string: 'imageUID'
string: 'raUID'
string: 'link'
string: 'link'
string: 'c'
string: 'c'
string: 'caption'
string: 'caption'
string: 'size'
string: 'size'
string: 'align'
string: 'align'
string: 'pad'
string: 'pad'
string: "vspace='"
string: "px' hspace='"
string: "px' "
string: 'images/'
string: 'raUID'
string: 'images/'
string: '/'
string: 'raUID'
string: "&lt;img src='"
string: "' border='0' $pad/&gt;"
string: 'yes'
string: "&lt;a href='"
string: "'&gt;$html&lt;/a&gt;"
string: 'yes'
string: 'raUID'
string: 'left'
string: "style='float: left;'"
string: 'right'
string: "style='float: right;'"
string: "&lt;div class='caption' $align&gt;$html&lt;br/&gt;&lt;small&gt;"
string: "&lt;/small&gt;&lt;/div&gt;"
string: 'width300'
string: "class='caption'"
string: "class='captionpad'"

<b>scanning file: /var/www/an2google/trunk/modules/images/inc/images__weight.inc.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //*	functions for arranging images by weight (DEPRECATED)
comment: //-------------------------------------------------------------------------------------------------
comment: //-------------------------------------------------------------------------------------------------
comment: //|	ensure that all images attached to an item have consecutive weight
comment: //-------------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	ensure that all images are weighted 0-n
comment: //---------------------------------------------------------------------------------------------
comment: // for all images attached to this item
comment: // if this one is not in order
comment: // load record
comment: // set weight to idx
comment: // save it
comment: //-------------------------------------------------------------------------------------------------
comment: //	get UID of next heaviest item, false if none (TODO: find only one record, not all)
comment: //-------------------------------------------------------------------------------------------------
comment: //-------------------------------------------------------------------------------------------------
comment: //	get UID of next heaviest item, false if none (TODO: find only one record, not all)
comment: //-------------------------------------------------------------------------------------------------
comment: //-------------------------------------------------------------------------------------------------
comment: //	get weight of heaviest image attached to an item
comment: //-------------------------------------------------------------------------------------------------
string: 'modules/images/models/image.mod.php'
string: "select UID, weight from Images_Image "
string: "where refUID='"
string: "' "
string: "and refModule='"
string: "' "
string: "order by floor(weight)"
string: 'weight'
string: 'UID'
string: "select UID, weight from Images_Image "
string: "where refUID='"
string: "' "
string: "and refModule='"
string: "' "
string: "order by floor(weight)"
string: 'weight'
string: 'UID'
string: "select UID, weight from Images_image "
string: "where refUID='"
string: "' "
string: "and refModule='"
string: "' "
string: "order by floor(weight)"
string: 'weight'
string: 'UID'
string: "select UID, weight from Images_Image "
string: "where refUID='"
string: "' "
string: "and refModule='"
string: "' "
string: "order by floor(weight)"
string: 'weight'
string: 'weight'

<b>scanning file: /var/www/an2google/trunk/modules/images/events/object_deleted.on.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //	fired when a record is deleted
comment: //-------------------------------------------------------------------------------------------------
comment: //arg: module - module which owned the deleted record
comment: //arg: UID - UID of deleted record
comment: //----------------------------------------------------------------------------------------------
comment: //	delete any images owned by this record
comment: //----------------------------------------------------------------------------------------------
comment: //-------------------------------------------------------------------------------------------------
string: 'modules/images/models/image.mod.php'
string: 'module'
string: 'UID'
string: "refUID='"
string: 'UID'
string: "'"
string: "refModule='"
string: 'module'
string: "'"
string: 'images_image'
string: '*'
string: ''
string: ''
string: ''
string: "images module is deleting record "
string: " in response to event&lt;br/&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/images/events/callbacks.inc.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	callbacks allow modules to interact with being necessarily dependant on one another
comment: //--------------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
comment: //	when a record is deleted on another module
comment: //--------------------------------------------------------------------------------------------------
comment: // * args['module']  = table the record belonged to
comment: // * args['UID'] = UID of the record which was deleted
comment: //----------------------------------------------------------------------------------------------
comment: //	discover if any images belonging this record and delete them
comment: //----------------------------------------------------------------------------------------------
string: 'modules/images/models/image.mod.php'
string: 'module'
string: 'UID'
string: "select UID from Images_Image "
string: "where refUID='"
string: 'UID'
string: "' "
string: "and refModule='"
string: 'module'
string: "'"
string: 'UID'
string: 'sMessage'
string: "Deleted image "
string: "&lt;br/&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/images/actions/widtheditor.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	display an image scaled to 530 px wide
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/images/inc/sendimg.inc.php'
string: 'widtheditor'

<b>scanning file: /var/www/an2google/trunk/modules/images/actions/width570.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	display an image scaled to 570 px wide 
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/images/inc/sendimg.inc.php'
string: 'width570'

<b>scanning file: /var/www/an2google/trunk/modules/images/actions/width560.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	display an image scaled to 560 px wide
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/images/inc/sendimg.inc.php'
string: 'width560'

<b>scanning file: /var/www/an2google/trunk/modules/images/actions/width300.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	display an image scaled to 300 px wide
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/images/inc/sendimg.inc.php'
string: 'width300'

<b>scanning file: /var/www/an2google/trunk/modules/images/actions/width290.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	display an image scaled to 290 px wide
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/images/inc/sendimg.inc.php'
string: 'width290'

<b>scanning file: /var/www/an2google/trunk/modules/images/actions/width200.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	display an image scaled to 200 px wide
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/images/inc/sendimg.inc.php'
string: 'width200'

<b>scanning file: /var/www/an2google/trunk/modules/images/actions/width190.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	display an image scaled to 200 px wide
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/images/inc/sendimg.inc.php'
string: 'width190'

<b>scanning file: /var/www/an2google/trunk/modules/images/actions/width145.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	display an image scaled to 145 px wide
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/images/inc/sendimg.inc.php'
string: 'width145'

<b>scanning file: /var/www/an2google/trunk/modules/images/actions/width100.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	display an image scaled to 100 px wide
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/images/inc/sendimg.inc.php'
string: 'width100'

<b>scanning file: /var/www/an2google/trunk/modules/images/actions/uploadsingle.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	page for uploading a single image
comment: //--------------------------------------------------------------------------------------------------
comment: //	because images are bound to a specific UID on some other module, we need some arguments
comment: //	specified in the url:
comment: //		refModule - the module to which owner object belongs
comment: //		refModel - type of object which may have an imge
comment: //		refUID - UID of an object (not and alias)
comment: //		category - a text label to differentiate between different categories of picture (reserved)
comment: //
comment: //	note that the refModule must have 'xxxxxx' permission for appropriate users/groups
comment: //	TODO: choose a permission, add it
comment: //----------------------------------------------------------------------------------------------
comment: //	control variables
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: check this image permission
comment: //----------------------------------------------------------------------------------------------
comment: //	load and render the page
comment: //----------------------------------------------------------------------------------------------
string: ''
string: ''
string: ''
string: ''
string: 'refModule'
string: 'module not given'
string: 'refModel'
string: 'model not specified'
string: 'refUID'
string: 'UID of owner object not specified'
string: 'refModule'
string: 'refModel'
string: 'refUID'
string: 'no such module'
string: 'model not recognized'
string: 'owner object does not exist'
string: 'images-add'
string: 'modules/images/actions/uploadsingle.if.page.php'
string: 'refModule'
string: 'refModel'
string: 'refUID'
string: 'category'

<b>scanning file: /var/www/an2google/trunk/modules/images/actions/uploadmultiple.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	iframe to upload multiple images
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: check this permission name
comment: /*
			//--------------------------------------------------------------------------------------
			//	not authorised to edit images, just display
			//--------------------------------------------------------------------------------------
			$page-&gt;load('modules/images/actions/imageset.if.page.php');
			$page-&gt;blockArgs['refModule'] = $refModule;
			$page-&gt;blockArgs['refUID'] = $refUID;
			$page-&gt;render();
	*/
comment: //----------------------------------------------------------------------------------------------
comment: //	render the page
comment: //----------------------------------------------------------------------------------------------
string: 'refModule'
string: 'Module not specified.'
string: 'refModel'
string: 'Model not specified.'
string: 'refUID'
string: 'UID not specified.'
string: 'refModule'
string: 'refModel'
string: 'refUID'
string: 'No such module.'
string: 'Object type not recognized.'
string: 'Owner object does not exist.'
string: 'images-add'
string: 'You are not authorized to add images to this object.'
string: 'no'
string: 'tags'
string: 'yes'
string: 'tags'
string: 'yes'
string: 'modules/images/actions/uploadmultiple.if.page.php'
string: 'refModule'
string: 'refModel'
string: 'refUID'
string: 'tags'

<b>scanning file: /var/www/an2google/trunk/modules/images/actions/upload.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	page for accepting upload of images and associating them with records
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	control variables
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	security and validation
comment: //----------------------------------------------------------------------------------------------
comment: //TODO
comment: //TODO: chck this permission name
comment: //----------------------------------------------------------------------------------------------
comment: //	get the upload
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	load as image
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	get image name
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	handle upload of single images (delete any others before saving)
comment: //----------------------------------------------------------------------------------------------
comment: //$sql = "select * from Images_Image "
comment: //	 . "where refUID='" . $db-&gt;addMarkup($refUID) . "'"
comment: // . " and refModule='" . $sb-&gt;addMarkup($refModule) . "'";
comment: //----------------------------------------------------------------------------------------------
comment: //	create image record and save file
comment: //----------------------------------------------------------------------------------------------
comment: //NOTE: weight is set by $model-&gt;save()
comment: //------------------------------------------------------------------------------------------
comment: //	send 'images_added' event to module whose record owns this image
comment: //------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	return xml or redirect back 
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------
comment: //	image saved
comment: //--------------------------------------------------------------------------------------
comment: //echo "returnURL: $returnUrl &lt;br/&gt;\n";
string: 'modules/images/models/image.mod.php'
string: ''
string: ''
string: ''
string: ''
string: ''
string: ''
string: ''
string: ''
string: 'no'
string: 'refModule'
string: 'refModule'
string: 'refModel'
string: 'refModel'
string: 'refUID'
string: 'refUID'
string: 'category'
string: 'category'
string: 'return'
string: 'return'
string: 'tags'
string: 'yes'
string: 'tags'
string: 'yes'
string: ''
string: ''
string: ''
string: ''
string: ''
string: ''
string: '(missing arguments to image upload)'
string: 'uploadmultiple'
string: 'images/uploadmultiple/'
string: 'refModule_'
string: '/'
string: 'refModel_'
string: '/'
string: 'refUID_'
string: '/'
string: 'tags_'
string: '/'
string: 'uploadsingle'
string: 'images/uploadsingle/'
string: 'refModule_'
string: '/'
string: 'refModel_'
string: '/'
string: 'refUID_'
string: '/'
string: 'tags_'
string: '/'
string: 'xml'
string: 'unknown return argument'
string: 'images-add'
string: 'xml'
string: 'Not authorized.'
string: 'You are not authorised to add images to this item.'
string: 'bad'
string: 'userfile'
string: 'userfile'
string: 'tmp_name'
string: 'userfile'
string: 'name'
string: ''
string: 'xml'
string: 'No file uploaded.'
string: 'No file uploaded.'
string: 'bad'
string: 'No file uploaded.'
string: 'bad'
string: ''
string: 'xml'
string: 'Could not validate image.'
string: 'Could not validate image.'
string: 'bad'
string: '.jpg'
string: ''
string: '.jpeg'
string: ''
string: '.png'
string: ''
string: '.gif'
string: ''
string: ''
string: '.jpg'
string: 'action'
string: 'uploadSingleImage'
string: 'action'
string: "refUID='"
string: "'"
string: "refModel='"
string: "'"
string: "refModule='"
string: "'"
string: 'images_image'
string: '*'
string: 'UID'
string: 'unknown'
string: ''
string: 'refModule'
string: 'refUID'
string: 'imageUID'
string: 'UID'
string: 'imageTitle'
string: 'title'
string: '*'
string: 'images_added'
string: 'xml'
string: ''
string: ''
string: "Uploaded image: $srcName &lt;br/&gt;\n"
string: 'ok'

<b>scanning file: /var/www/an2google/trunk/modules/images/actions/thumbsm.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	display an image thumbnail
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/images/inc/sendimg.inc.php'
string: 'thumbsm'

<b>scanning file: /var/www/an2google/trunk/modules/images/actions/thumb90.act.php</b>
comment: //--------------------------------------------------------------------------------------------------------------
comment: //	display an image thumbnail
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/images/inc/sendimg.inc.php'
string: 'thumb90'

<b>scanning file: /var/www/an2google/trunk/modules/images/actions/thumb.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	display an image thumbnail
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/images/inc/sendimg.inc.php'
string: 'thumb'

<b>scanning file: /var/www/an2google/trunk/modules/images/actions/test.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	discover and delete images which do not exist on either server
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	authentication
comment: //----------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	split into lines
comment: //---------------------------------------------------------------------------------------------
comment: //echo $parts[0] . " - $found&lt;br/&gt;\n";
string: 'modules/images/models/image.mod.php'
string: 'admin'
string: "
184709872312493152 - data/images/1/8/4/184709872312493152.jpg does not exist on local server.
112166452863516971 - data/images/1/1/2/112166452863516971.jpg does not exist on local server.
198973078218398657 - data/images/1/9/8/198973078218398657.jpg does not exist on local server.
178556432413361141 - data/images/1/7/8/178556432413361141.jpg does not exist on local server.
201012151015618072 - data/images/2/0/1/201012151015618072.jpg does not exist on local server.
395453046104664883 - data/images/3/9/5/395453046104664883.jpg does not exist on local server.
112744419614423329 - data/images/1/1/2/112744419614423329.jpg does not exist on local server.
998307799131490029 - data/images/9/9/8/998307799131490029.jpg does not exist on local server.
187941414735855352 - data/images/1/8/7/187941414735855352.jpg does not exist on local server.
104018138559834807 - data/images/1/0/4/104018138559834807.jpg does not exist on local server.
102499340356768363 - data/images/1/0/2/102499340356768363.jpg does not exist on local server.
108999442180855738 - data/images/1/0/8/108999442180855738.jpg does not exist on local server.
159653801611468950 - data/images/1/5/9/159653801611468950.jpg does not exist on local server.
259967471119493529 - data/images/2/5/9/259967471119493529.jpg does not exist on local server.
674398732226026685 - data/images/6/7/4/674398732226026685.jpg does not exist on local server.
363831936205838211 - data/images/3/6/3/363831936205838211.jpg does not exist on local server.
381692683191889595 - data/images/3/8/1/381692683191889595.jpg does not exist on local server.
114730159517695878 - data/images/1/1/4/114730159517695878.jpg does not exist on local server.
822343848368721970 - data/images/8/2/2/822343848368721970.jpg does not exist on local server.
170416521812476750 - data/images/1/7/0/170416521812476750.jpg does not exist on local server.
630556499126622189 - data/images/6/3/0/630556499126622189.jpg does not exist on local server.
489082881752318308 - data/images/4/8/9/489082881752318308.jpg does not exist on local server.
147060735910111367 - data/images/1/4/7/147060735910111367.jpg does not exist on local server.
149571784221216896 - data/images/1/4/9/149571784221216896.jpg does not exist on local server.
136859865416834298 - data/images/1/3/6/136859865416834298.jpg does not exist on local server.
416416027104130289 - data/images/4/1/6/416416027104130289.jpg does not exist on local server.
116654792717878284 - data/images/1/1/6/116654792717878284.jpg does not exist on local server.
128470618985435325 - data/images/1/2/8/128470618985435325.jpg does not exist on local server.
207517281122478525 - data/images/2/0/7/207517281122478525.jpg does not exist on local server.
145547579299996483 - data/images/1/4/5/145547579299996483.jpg does not exist on local server.
389019112833020992 - data/images/3/8/9/389019112833020992.jpg does not exist on local server.
904371555153117891 - data/images/9/0/4/904371555153117891.jpg does not exist on local server.
142858230599200855 - data/images/1/4/2/142858230599200855.jpg does not exist on local server.
249448570262576140 - data/images/2/4/9/249448570262576140.jpg does not exist on local server.
187270872235014461 - data/images/1/8/7/187270872235014461.jpg does not exist on local server.
162770845411716234 - data/images/1/6/2/162770845411716234.jpg does not exist on local server.
203491260116116873 - data/images/2/0/3/203491260116116873.jpg does not exist on local server.
211869712841070450 - data/images/2/1/1/211869712841070450.jpg does not exist on local server.
890287478749627273 - data/images/8/9/0/890287478749627273.jpg does not exist on local server.
179383277816518405 - data/images/1/7/9/179383277816518405.jpg does not exist on local server.
609702880475556600 - data/images/6/0/9/609702880475556600.jpg does not exist on local server.
110965668635566190 - data/images/1/1/0/110965668635566190.jpg does not exist on local server.
113797285720829570 - data/images/1/1/3/113797285720829570.jpg does not exist on local server.
629852621125817275 - data/images/6/2/9/629852621125817275.jpg does not exist on local server.
530310251748347698 - data/images/5/3/0/530310251748347698.jpg does not exist on local server.
643032647193717503 - data/images/6/4/3/643032647193717503.jpg does not exist on local server.
694773348101221895 - data/images/6/9/4/694773348101221895.jpg does not exist on local server.
115762424317828426 - data/images/1/1/5/115762424317828426.jpg does not exist on local server.
156988098750763962 - data/images/1/5/6/156988098750763962.jpg does not exist on local server.
248897071715934974 - data/images/2/4/8/248897071715934974.jpg does not exist on local server.
418149260211452967 - data/images/4/1/8/418149260211452967.jpg does not exist on local server.
815131667836382068 - data/images/8/1/5/815131667836382068.jpg does not exist on local server.
209670489847316898 - data/images/2/0/9/209670489847316898.jpg does not exist on local server.
601356892156698059 - data/images/6/0/1/601356892156698059.jpg does not exist on local server.
524513125743908835 - data/images/5/2/4/524513125743908835.jpg does not exist on local server.
145268103310118104 - data/images/1/4/5/145268103310118104.jpg does not exist on local server.
196286107914051046 - data/images/1/9/6/196286107914051046.jpg does not exist on local server.
927677991188157426 - data/images/9/2/7/927677991188157426.jpg does not exist on local server.
115848830071231279 - data/images/1/1/5/115848830071231279.jpg does not exist on local server.
625438624185600497 - data/images/6/2/5/625438624185600497.jpg does not exist on local server.
128317614384365879 - data/images/1/2/8/128317614384365879.jpg does not exist on local server.
453240606184171233 - data/images/4/5/3/453240606184171233.jpg does not exist on local server.
432612723106563205 - data/images/4/3/2/432612723106563205.jpg does not exist on local server.
875414506432100534 - data/images/8/7/5/875414506432100534.jpg does not exist on local server.
207194086013265411 - data/images/2/0/7/207194086013265411.jpg does not exist on local server.
807644135174388446 - data/images/8/0/7/807644135174388446.jpg does not exist on local server.
502763092114058895 - data/images/5/0/2/502763092114058895.jpg does not exist on local server.
162524663471091827 - data/images/1/6/2/162524663471091827.jpg does not exist on local server.
171210735911031162 - data/images/1/7/1/171210735911031162.jpg does not exist on local server.
121999918018436037 - data/images/1/2/1/121999918018436037.jpg does not exist on local server.
295141751921756981 - data/images/2/9/5/295141751921756981.jpg does not exist on local server.
615087759200871622 - data/images/6/1/5/615087759200871622.jpg does not exist on local server.
800122230143801276 - data/images/8/0/0/800122230143801276.jpg does not exist on local server.
194275658315148515 - data/images/1/9/4/194275658315148515.jpg does not exist on local server.
791230551201514787 - data/images/7/9/1/791230551201514787.jpg does not exist on local server.
152877764631094936 - data/images/1/5/2/152877764631094936.jpg does not exist on local server.
580871027121154058 - data/images/5/8/0/580871027121154058.jpg does not exist on local server.
210498707671568939 - data/images/2/1/0/210498707671568939.jpg does not exist on local server.
193322436924809693 - data/images/1/9/3/193322436924809693.jpg does not exist on local server.
761739503156282973 - data/images/7/6/1/761739503156282973.jpg does not exist on local server.
248993588116973557 - data/images/2/4/8/248993588116973557.jpg does not exist on local server.
191088431499910849 - data/images/1/9/1/191088431499910849.jpg does not exist on local server.
185217504020161022 - data/images/1/8/5/185217504020161022.jpg does not exist on local server.
174691385051912404 - data/images/1/7/4/174691385051912404.jpg does not exist on local server.
443199102604310849 - data/images/4/4/3/443199102604310849.jpg does not exist on local server.
465511175624701485 - data/images/4/6/5/465511175624701485.jpg does not exist on local server.
809022895972899481 - data/images/8/0/9/809022895972899481.jpg does not exist on local server.
120511219660327436 - data/images/1/2/0/120511219660327436.jpg does not exist on local server.
189100096012863772 - data/images/1/8/9/189100096012863772.jpg does not exist on local server.
808379414954958231 - data/images/8/0/8/808379414954958231.jpg does not exist on local server.
389478702855243009 - data/images/3/8/9/389478702855243009.jpg does not exist on local server.
751779278199233466 - data/images/7/5/1/751779278199233466.jpg does not exist on local server.
992166938147130052 - data/images/9/9/2/992166938147130052.jpg does not exist on local server.
199695507818663895 - data/images/1/9/9/199695507818663895.jpg does not exist on local server.
"
string: "136859865416834298 - data/images/1/3/6/136859865416834298.jpg does not exist on local server.
112744419614423329 - data/images/1/1/2/112744419614423329.jpg does not exist on local server.
416416027104130289 - data/images/4/1/6/416416027104130289.jpg does not exist on local server.
643032647193717503 - data/images/6/4/3/643032647193717503.jpg does not exist on local server.
116654792717878284 - data/images/1/1/6/116654792717878284.jpg does not exist on local server.
807644135174388446 - data/images/8/0/7/807644135174388446.jpg does not exist on local server.
198973078218398657 - data/images/1/9/8/198973078218398657.jpg does not exist on local server.
102499340356768363 - data/images/1/0/2/102499340356768363.jpg does not exist on local server.
178556432413361141 - data/images/1/7/8/178556432413361141.jpg does not exist on local server.
128317614384365879 - data/images/1/2/8/128317614384365879.jpg does not exist on local server.
395453046104664883 - data/images/3/9/5/395453046104664883.jpg does not exist on local server.
108999442180855738 - data/images/1/0/8/108999442180855738.jpg does not exist on local server.
201012151015618072 - data/images/2/0/1/201012151015618072.jpg does not exist on local server.
890287478749627273 - data/images/8/9/0/890287478749627273.jpg does not exist on local server.
998307799131490029 - data/images/9/9/8/998307799131490029.jpg does not exist on local server.
822343848368721970 - data/images/8/2/2/822343848368721970.jpg does not exist on local server.
927677991188157426 - data/images/9/2/7/927677991188157426.jpg does not exist on local server.
502763092114058895 - data/images/5/0/2/502763092114058895.jpg does not exist on local server.
162770845411716234 - data/images/1/6/2/162770845411716234.jpg does not exist on local server.
196286107914051046 - data/images/1/9/6/196286107914051046.jpg does not exist on local server.
791230551201514787 - data/images/7/9/1/791230551201514787.jpg does not exist on local server.
381692683191889595 - data/images/3/8/1/381692683191889595.jpg does not exist on local server.
184709872312493152 - data/images/1/8/4/184709872312493152.jpg does not exist on local server.
162524663471091827 - data/images/1/6/2/162524663471091827.jpg does not exist on local server.
389019112833020992 - data/images/3/8/9/389019112833020992.jpg does not exist on local server.
609702880475556600 - data/images/6/0/9/609702880475556600.jpg does not exist on local server.
625438624185600497 - data/images/6/2/5/625438624185600497.jpg does not exist on local server.
453240606184171233 - data/images/4/5/3/453240606184171233.jpg does not exist on local server.
249448570262576140 - data/images/2/4/9/249448570262576140.jpg does not exist on local server.
110965668635566190 - data/images/1/1/0/110965668635566190.jpg does not exist on local server.
113797285720829570 - data/images/1/1/3/113797285720829570.jpg does not exist on local server.
152877764631094936 - data/images/1/5/2/152877764631094936.jpg does not exist on local server.
630556499126622189 - data/images/6/3/0/630556499126622189.jpg does not exist on local server.
209670489847316898 - data/images/2/0/9/209670489847316898.jpg does not exist on local server.
904371555153117891 - data/images/9/0/4/904371555153117891.jpg does not exist on local server.
580871027121154058 - data/images/5/8/0/580871027121154058.jpg does not exist on local server.
601356892156698059 - data/images/6/0/1/601356892156698059.jpg does not exist on local server.
187270872235014461 - data/images/1/8/7/187270872235014461.jpg does not exist on local server.
629852621125817275 - data/images/6/2/9/629852621125817275.jpg does not exist on local server.
171210735911031162 - data/images/1/7/1/171210735911031162.jpg does not exist on local server.
112166452863516971 - data/images/1/1/2/112166452863516971.jpg does not exist on local server.
432612723106563205 - data/images/4/3/2/432612723106563205.jpg does not exist on local server.
363831936205838211 - data/images/3/6/3/363831936205838211.jpg does not exist on local server.
248897071715934974 - data/images/2/4/8/248897071715934974.jpg does not exist on local server.
418149260211452967 - data/images/4/1/8/418149260211452967.jpg does not exist on local server.
815131667836382068 - data/images/8/1/5/815131667836382068.jpg does not exist on local server.
524513125743908835 - data/images/5/2/4/524513125743908835.jpg does not exist on local server.
211869712841070450 - data/images/2/1/1/211869712841070450.jpg does not exist on local server.
170416521812476750 - data/images/1/7/0/170416521812476750.jpg does not exist on local server.
145268103310118104 - data/images/1/4/5/145268103310118104.jpg does not exist on local server.
530310251748347698 - data/images/5/3/0/530310251748347698.jpg does not exist on local server.
615087759200871622 - data/images/6/1/5/615087759200871622.jpg does not exist on local server.
489082881752318308 - data/images/4/8/9/489082881752318308.jpg does not exist on local server.
147060735910111367 - data/images/1/4/7/147060735910111367.jpg does not exist on local server.
149571784221216896 - data/images/1/4/9/149571784221216896.jpg does not exist on local server.
156988098750763962 - data/images/1/5/6/156988098750763962.jpg does not exist on local server.
800122230143801276 - data/images/8/0/0/800122230143801276.jpg does not exist on local server.
194275658315148515 - data/images/1/9/4/194275658315148515.jpg does not exist on local server.
207194086013265411 - data/images/2/0/7/207194086013265411.jpg does not exist on local server.
128470618985435325 - data/images/1/2/8/128470618985435325.jpg does not exist on local server.
694773348101221895 - data/images/6/9/4/694773348101221895.jpg does not exist on local server.
115762424317828426 - data/images/1/1/5/115762424317828426.jpg does not exist on local server.
295141751921756981 - data/images/2/9/5/295141751921756981.jpg does not exist on local server.
203491260116116873 - data/images/2/0/3/203491260116116873.jpg does not exist on local server.
115848830071231279 - data/images/1/1/5/115848830071231279.jpg does not exist on local server.
259967471119493529 - data/images/2/5/9/259967471119493529.jpg does not exist on local server.
159653801611468950 - data/images/1/5/9/159653801611468950.jpg does not exist on local server.
114730159517695878 - data/images/1/1/4/114730159517695878.jpg does not exist on local server.
179383277816518405 - data/images/1/7/9/179383277816518405.jpg does not exist on local server.
207517281122478525 - data/images/2/0/7/207517281122478525.jpg does not exist on local server.
674398732226026685 - data/images/6/7/4/674398732226026685.jpg does not exist on local server.
145547579299996483 - data/images/1/4/5/145547579299996483.jpg does not exist on local server.
142858230599200855 - data/images/1/4/2/142858230599200855.jpg does not exist on local server.
104018138559834807 - data/images/1/0/4/104018138559834807.jpg does not exist on local server.
875414506432100534 - data/images/8/7/5/875414506432100534.jpg does not exist on local server.
187941414735855352 - data/images/1/8/7/187941414735855352.jpg does not exist on local server.
121999918018436037 - data/images/1/2/1/121999918018436037.jpg does not exist on local server.
"
string: "\n"
string: "-"
string: 'no'
string: 'yes'
string: 'yes'
string: "deleted "
string: "&lt;br/&gt;\n"
string: "could not delete "
string: "&lt;br/&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/images/actions/slideshow.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	make a slideshow  //TODO: this is very old code, replace wiuth standard page/block templates
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check permissions and arguments
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	load all images associated with this record
comment: //----------------------------------------------------------------------------------------------
comment: //$sql = "select * from Images_Image where refModule='" . $db-&gt;addMarkup($req-&gt;args['refmodule']) 
comment: //		. "' and refUID='" . $db-&gt;addMarkup($req-&gt;args['refuid']) . "' order by weight";
comment: //----------------------------------------------------------------------------------------------
comment: //	show the current image
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the nav bar
comment: //----------------------------------------------------------------------------------------------
string: 'refModule'
string: 'refModule not given'
string: 'refModel'
string: 'refModel not given'
string: 'refUID'
string: 'refUID not given'
string: 'refModule'
string: 'refModel'
string: 'refUID'
string: ''
string: "refModule='"
string: "'"
string: "refUID='"
string: "'"
string: 'images_image'
string: '*'
string: 'weight'
string: ''
string: 'UID'
string: 'UID'
string: 'UID'
string: 'index'
string: 'show'
string: 'show'
string: "
		&lt;img src='/images/slide/"
string: 'alias'
string: "' /&gt;&lt;br/&gt;
		&lt;b&gt;"
string: 'title'
string: "&lt;/b&gt; "
string: 'caption'
string: "
		&lt;a href='#' onClick=\"window.parent.location='"
string: "images/show/"
string: 'alias'
string: "'\"&gt;[view larger]&lt;/a&gt;
		&lt;br/&gt;&lt;br/&gt;
		"
string: ''
string: '/images/thumbsm/'
string: 'alias'
string: '/images/slideshow'
string: '/refModule_'
string: '/refModel_'
string: '/refUID_'
string: '/show_'
string: '/'
string: "&lt;a href='"
string: "'&gt;&lt;img src='"
string: "' border='0' alt='"
string: 'title'
string: "' /&gt;&lt;/a&gt;\n"
string: 'modules/images/actions/slideshow.page.php'

<b>scanning file: /var/www/an2google/trunk/modules/images/actions/slide.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	display an image thumbnail
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/images/inc/sendimg.inc.php'
string: 'slide'

<b>scanning file: /var/www/an2google/trunk/modules/images/actions/showall.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	display all images in the database ordered by dat added to the system
comment: //--------------------------------------------------------------------------------------------------
string: 'images'
string: 'images_image'
string: 'list'
string: 'TODO:UIDHERE'
string: 'modules/images/actions/showall.page.php'
string: 'page,refMod'

<b>scanning file: /var/www/an2google/trunk/modules/images/actions/show.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	page to display a single image
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	authentication (no public users)
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: use a permission
comment: //----------------------------------------------------------------------------------------------
comment: //	check reference
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	render the page
comment: //----------------------------------------------------------------------------------------------
string: 'public'
string: 'banned'
string: ''
string: 'images_image'
string: 'modules/images/actions/show.page.php'
string: 'raUID'

<b>scanning file: /var/www/an2google/trunk/modules/images/actions/save.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	save changes to an image
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	control variables
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check permissions and POST variables
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the changes
comment: //----------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	redirect back
comment: //------------------------------------------------------------------------------------------
string: 'modules/images/models/image.mod.php'
string: 'modules/images/inc/images__weight.inc.php'
string: 'uploadmultiple'
string: ''
string: 'action'
string: 'action not specified'
string: 'saveImage'
string: 'action'
string: 'action not supported'
string: 'UID'
string: 'reference object not specified'
string: 'UID'
string: 'No such image'
string: 'images-edit'
string: 'You are not authorized to edit this Image.'
string: 'title'
string: 'licence'
string: 'attribname'
string: 'attriburl'
string: 'caption'
string: 'category'
string: ''
string: 'bad'
string: 'uploadmultiple'
string: 'images/uploadmultiple'
string: '/refModule_'
string: '/refModel_'
string: '/refUID_'
string: '/'
string: 'uploadsingle'
string: 'images/uploadsingle'
string: '/refModule_'
string: '/refModel_'
string: '/refUID_'
string: '/'
string: 'images/edit/'

<b>scanning file: /var/www/an2google/trunk/modules/images/actions/repairrefs.act.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //	repair damaged image references
comment: //-------------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	must be admin
comment: //---------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	gather some system data
comment: //---------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	go through image table looking for dead references
comment: //---------------------------------------------------------------------------------------------
comment: // some are just shorter
comment: // administrator
comment: //-------------------------------------------------------------------------------------
comment: //	OK, so the reference is probably bad
comment: //-------------------------------------------------------------------------------------
comment: //-------------------------------------------------------------------------------------
comment: //	discover if refModule corresponds to a table
comment: //-------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------
comment: //	look for a similar UID
comment: //---------------------------------------------------------------------------------
comment: // found it, repair
comment: // no such record
comment: //---------------------------------------------------------------------------------
comment: //	unsure which table to search
comment: //---------------------------------------------------------------------------------
comment: //-----------------------------------------------------------------------------------------
comment: //	save the image
comment: //-----------------------------------------------------------------------------------------
string: 'modules/images/models/image.mod.php'
string: 'admin'
string: "select UID, refUID, refModule, title from Images_Image"
string: 'refUID'
string: 'admin'
string: 'refUID'
string: "image "
string: 'title'
string: " ("
string: 'UID'
string: ") is not linked to owner "
string: "('"
string: 'refUID'
string: "...' on "
string: 'refModule'
string: " module)&lt;br/&gt;\n"
string: 'refModule'
string: "select UID from "
string: 'refModule'
string: " "
string: "where LEFT(UID, "
string: 'refUID'
string: ") = '"
string: 'refUID'
string: "'"
string: "found matching UID: "
string: 'UID'
string: " ~ "
string: 'refUID'
string: "&lt;br/&gt;\n"
string: "update Images_Image set refUID='"
string: 'UID'
string: "' where UID='"
string: 'UID'
string: "'"
string: "&lt;br/&gt;\n"
string: "no matching record found in table "
string: 'refModule'
string: "&lt;br/&gt;\n"
string: "unsure which table to search for module '"
string: 'refModule'
string: "'&lt;br/&gt;\n"
string: 'UID'

<b>scanning file: /var/www/an2google/trunk/modules/images/actions/minigal.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	make a small gallery (as on a blog post or calendar item)
comment: //--------------------------------------------------------------------------------------------------
comment: //TODO: this is a very old action, make blocks to take care of this
comment: //----------------------------------------------------------------------------------------------
comment: //	check req arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	load all images associated with this record
comment: //----------------------------------------------------------------------------------------------
comment: //	$sql = "select * from Images_Image where refModule='" . $db-&gt;addMarkup($req-&gt;args['refmodule']) 
comment: //		. "' and refUID='" . $db-&gt;addMarkup($req-&gt;args['refuid']) . "' order by weight";
comment: //TODO: make this less clumsy
comment: //------------------------------------------------------------------------------------------
comment: //	show the current image
comment: //------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the nav bar
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	render the page
comment: //----------------------------------------------------------------------------------------------
string: 'refModule'
string: 'refModule not given'
string: 'refModel'
string: 'refModel not given'
string: 'refUID'
string: 'refUID not given'
string: 'refModule'
string: 'refModel'
string: 'refUID'
string: "No such module."
string: "No such owner."
string: ''
string: "refModule='"
string: "'"
string: "refModel='"
string: "'"
string: "refUID='"
string: "'"
string: 'images_image'
string: '*'
string: 'weight'
string: 'modules/images/actions/minigal.page.php'
string: ''
string: ''
string: 'UID'
string: 'UID'
string: 'UID'
string: 'index'
string: 'show'
string: 'show'
string: ''
string: 'attribName'
string: ''
string: 'attribName'
string: 'attribURL'
string: ''
string: "&lt;a href='"
string: 'attribURL'
string: "'&gt;$attrib&lt;/a&gt;"
string: "
	&lt;img src='/images/width560/"
string: 'alias'
string: "' /&gt;&lt;br/&gt;
	&lt;b&gt;"
string: 'title'
string: "&lt;/b&gt; "
string: 'caption'
string: "
	&lt;a href='#' onClick=\"window.parent.location='"
string: "images/full/"
string: 'alias'
string: "'\"&gt;[view larger]&lt;/a&gt;
	&lt;br/&gt;
	&lt;small&gt;image licence: "
string: 'licence'
string: " $attrib&lt;/small&gt;
	&lt;br/&gt;
	"
string: ''
string: '/images/thumbsm/'
string: 'alias'
string: '/images/minigal'
string: '/refModule_'
string: '/refModel_'
string: '/refUID_'
string: '/show_'
string: '/'
string: "&lt;a href='"
string: "'&gt;&lt;img src='"
string: "' border='0' /&gt;&lt;/a&gt;\n"
string: 'modules/images/actions/minigal.page.php'

<b>scanning file: /var/www/an2google/trunk/modules/images/actions/listfiles.act.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //	list everything in /data/images
comment: //-------------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	auth
comment: //---------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	list all files
comment: //---------------------------------------------------------------------------------------------
string: 'admin'
string: 'find '
string: 'data/images/'
string: "\n"
string: "&lt;br/&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/images/actions/incweight.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	increment the weight of an image
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check permissions and request args
comment: //----------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	redirect back
comment: //------------------------------------------------------------------------------------------
string: 'modules/images/models/image.mod.php'
string: 'modules/images/inc/imageset.class.php'
string: 'uploadmultiple'
string: ''
string: ''
string: 'Image not specified'
string: 'Image not found'
string: 'editimage'
string: 'You are not authorized to edit this image.'
string: 'images/edit/'
string: 'uploadmultiple'
string: 'images/uploadmultiple'
string: '/refModule_'
string: '/refModel_'
string: '/refUID_'
string: '/'
string: 'uploadsingle'
string: 'images/uploadsingle'
string: '/refModule_'
string: '/refModel_'
string: '/refUID_'
string: '/'
string: 'images/edit/'

<b>scanning file: /var/www/an2google/trunk/modules/images/actions/full.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	display an image at its original size
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	load the image record
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	return the transform
comment: //----------------------------------------------------------------------------------------------
string: 'modules/images/models/image.mod.php'
string: ''
string: ''
string: 'Content-Type: image/jpeg'
string: 'Content-Type: image/jpeg'
string: 'themes/'
string: '/unavailable/loading.jpg'

<b>scanning file: /var/www/an2google/trunk/modules/images/actions/edit.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	edit an image
comment: //--------------------------------------------------------------------------------------------------
comment: //	needs the image's UID/recordAlias and optionally /return_uploadmultiple
comment: //----------------------------------------------------------------------------------------------
comment: //	check page arguments and authorisation
comment: //----------------------------------------------------------------------------------------------
comment: //if ('' == $model-&gt;fileName) { $page-&gt;do404(); }
comment: //TODO: add more auth options here
comment: //----------------------------------------------------------------------------------------------
comment: //	load the page :-)
comment: //----------------------------------------------------------------------------------------------
string: 'modules/images/models/image.mod.php'
string: ''
string: 'Image not found.'
string: 'images-edit'
string: 'You are not authorized to edit this image.'
string: ''
string: 'return'
string: 'return'
string: 'modules/images/actions/edit.if.page.php'
string: 'UID'
string: 'raUID'
string: 'return'

<b>scanning file: /var/www/an2google/trunk/modules/images/actions/download.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	downloads images and associating them with other objects
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	control variables
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	security and validation
comment: //----------------------------------------------------------------------------------------------
comment: // TODO
comment: //----------------------------------------------------------------------------------------------
comment: //	download the file
comment: //----------------------------------------------------------------------------------------------
comment: // use HTTP proxy
comment: // use file wrapper
comment: //----------------------------------------------------------------------------------------------
comment: //	load as image
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	get image name
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	create image record and save file
comment: //----------------------------------------------------------------------------------------------
comment: //NOTE: weight is set by $model-&gt;save()
comment: //------------------------------------------------------------------------------------------
comment: //	send 'images_added' event to all modules
comment: //------------------------------------------------------------------------------------------
comment: // send to all modules
comment: //$kapenta-&gt;raiseEvent($refModule, 'images_added', $args);	// send to owner module
comment: //----------------------------------------------------------------------------------------------
comment: //	redirect back 
comment: //----------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	image saved
comment: //------------------------------------------------------------------------------------------
string: 'modules/images/models/image.mod.php'
string: ''
string: ''
string: ''
string: 'uploadmultiple'
string: ''
string: 'no'
string: 'refModule'
string: 'refModule'
string: 'refModel'
string: 'refModel'
string: 'refUID'
string: 'refUID'
string: 'return'
string: 'return'
string: 'URL'
string: 'URL'
string: 'tags'
string: 'yes'
string: 'tags'
string: 'yes'
string: ''
string: ''
string: ''
string: ''
string: ''
string: ''
string: 'xml'
string: 'Missing arguments to image download.'
string: 'Missing arguments to image download.'
string: 'uploadmultiple'
string: 'images/uploadmultiple/'
string: 'refModule_'
string: '/'
string: 'refModel_'
string: '/'
string: 'refUID_'
string: '/'
string: 'tags_'
string: '/'
string: 'uploadsingle'
string: 'images/uploadsingle/'
string: 'refModule_'
string: '/'
string: 'refModel_'
string: '/'
string: 'refUID_'
string: '/'
string: 'tags_'
string: '/'
string: 'xml'
string: 'unknown return argument'
string: 'images-add'
string: 'xml'
string: 'Not authorized.'
string: 'You are not authorised to add images to this item.'
string: 'bad'
string: ''
string: 'yes'
string: ''
string: 'xml'
string: 'Image could not be downloaded.'
string: 'Image could not be downloaded, check the URL?'
string: 'bad'
string: 'xml'
string: 'Could not validate image.'
string: 'Could not validate image.'
string: 'bad'
string: '.jpg'
string: ''
string: '.jpeg'
string: ''
string: '.png'
string: ''
string: '.gif'
string: ''
string: ''
string: '.jpg'
string: 'unknown'
string: ''
string: 'Downloaded image: '
string: 'ok'
string: 'Could not save image: '
string: 'bad'
string: ''
string: 'refModule'
string: 'refUID'
string: 'imageUID'
string: 'UID'
string: 'imageTitle'
string: 'title'
string: '*'
string: 'images_added'
string: 'xml'
string: ''

<b>scanning file: /var/www/an2google/trunk/modules/images/actions/deleted.act.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //	show deleted images
comment: //-------------------------------------------------------------------------------------------------
string: "select * from Images_Image"
string: 'UID'
string: 'refUID'
string: 'refModule'
string: 'title'
string: 'fileName'
string: 'editedOn'
string: 'editedBy'
string: 'refUID'
string: 'del-'
string: 'refUID'
string: 'del-'
string: ''
string: 'refUID'
string: 'refModule'
string: 'del-'
string: ''
string: 'refModule'
string: "update Images_Image set refUID='"
string: 'refUID'
string: "' where UID='"
string: 'UID'
string: "'"
string: "update Images_Image set refModule='"
string: 'refModule'
string: "' where UID='"
string: 'UID'
string: "'"

<b>scanning file: /var/www/an2google/trunk/modules/images/actions/delete.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	delete an image and associated record, derivative files, etc
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check POST vars and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: add other permissions here?
comment: //----------------------------------------------------------------------------------------------
comment: //	delete the image
comment: //----------------------------------------------------------------------------------------------
string: 'modules/images/models/image.mod.php'
string: 'modules/images/inc/images__weight.inc.php'
string: 'UID'
string: 'Image not specified (UID).'
string: 'UID'
string: 'Image not found.'
string: 'images-remove'
string: 'You cannot delete this image.'
string: "deleteing image "
string: "via form on images module.\n"
string: 'return'
string: 'xml'
string: 'return'
string: "&lt;?xml version=\"1.0\"?&gt;\n"
string: "&lt;notice&gt;Image "
string: " deleted&lt;/notice&gt;\n"
string: 'return'
string: '/images/'

<b>scanning file: /var/www/an2google/trunk/modules/images/actions/default.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	display an image, or the entire gallery of all images
comment: //--------------------------------------------------------------------------------------------------
string: ''
string: 'modules/images/actions/showall.act.php'
string: 'modules/images/actions/show.act.php'

<b>scanning file: /var/www/an2google/trunk/modules/images/actions/decweight.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	decrement the weight of an image
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check permissions and request args
comment: //----------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	redirect back
comment: //------------------------------------------------------------------------------------------
comment: // redundant, remove?
string: 'modules/images/models/image.mod.php'
string: 'modules/images/inc/imageset.class.php'
string: 'uploadmultiple'
string: ''
string: 'Image not specified'
string: 'Image not found'
string: 'editimage'
string: 'You are not authorized to edit this image.'
string: 'return'
string: 'return'
string: 'images/uploadmultiple'
string: '/refModule_'
string: '/refModel_'
string: '/refUID_'
string: '/'
string: 'uploadmultiple'
string: 'images/uploadmultiple'
string: '/refModule_'
string: '/refModel_'
string: '/refUID_'
string: '/'
string: 'uploadsingle'
string: 'images/uploadsingle'
string: '/refModule_'
string: '/refModel_'
string: '/refUID_'
string: '/'
string: 'images/edit/'

<b>scanning file: /var/www/an2google/trunk/modules/images/actions/api.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	images API (DEPRECATED)
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check that user is logged in and refmodule, refuid supplied
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	list images 
comment: //----------------------------------------------------------------------------------------------
string: 'public'
string: 'not logged in'
string: 'refuid'
string: 'refUID not given'
string: 'refmodule'
string: 'module not specified'
string: 'list'
string: 'refuid'
string: "refUID='"
string: 'refuid'
string: "'"
string: 'refmodule'
string: "refModule='"
string: 'refmodule'
string: "'"
string: 'images_image'
string: '*'
string: "&lt;?xml version=\"1.0\"?&gt;\n"
string: "&lt;imageset&gt;\n"
string: '    '
string: "&lt;/imageset&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/home/views/summary.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	summary
comment: //--------------------------------------------------------------------------------------------------------------
comment: //args: UID - UID of a static page [string]
comment: //--------------------------------------------------------------------------------------------------------------
string: 'modules/static/models/static.mod.php'
string: 'home'
string: 'home_static'
string: 'show'
string: 'TODO:UIDHERE'
string: ''
string: 'UID'
string: 'UID'
string: 'modules/static/summary.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/home/views/menu.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	this is the top menu bar
comment: //--------------------------------------------------------------------------------------------------
string: 'menuAdmin'
string: "[[:theme::menu::label=Admin::link=/admin/::alt=admin console:]]\n"
string: 'menuLogin'
string: "[[:theme::menu::label=Log in::link=/users/login/::alt=log in:]]\n"
string: 'menuLogout'
string: "[[:theme::menu::label=Log out::link=/users/logout/::alt=log out:]]\n"
string: 'admin'
string: 'menuAdmin'
string: ''
string: 'public'
string: 'menuLogout'
string: ''
string: 'public'
string: 'menuLogin'
string: ''
string: 'modules/home/views/menu.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/home/views/list.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	summary list (list of all static pages)
comment: //--------------------------------------------------------------------------------------------------
comment: //opt: page - page no to display (default is 1) [string]
comment: //opt: num - number of records per page (default 300) [string]
comment: //%	number of items per page [int]
comment: //%	page number starts at 1 [int]
comment: //%	starting position within SQL results [int]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	query database
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: use $theme-&gt;arrayToHtmlTable();
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/home/models/static.mod.php'
string: ''
string: 'home'
string: 'home_static'
string: 'show'
string: ''
string: ''
string: 'num'
string: 'num'
string: 'page'
string: 'page'
string: 'home_static'
string: '*'
string: ''
string: 'title'
string: "&lt;table noborder&gt;\n"
string: 'home'
string: 'home_static'
string: 'edit'
string: "&lt;tr&gt;&lt;td class='title'&gt;UID&lt;/td&gt;&lt;td class='title'&gt;Page&lt;/td&gt;&lt;/tr&gt;"
string: "&lt;tr&gt;&lt;td class='title'&gt;UID&lt;/td&gt;&lt;td class='title'&gt;Page&lt;/td&gt;"
string: "&lt;td class='title'&gt;Edit&lt;/td&gt;&lt;td class='title'&gt;Delete&lt;/td&gt;&lt;/tr&gt;"
string: 'modules/home/views/list.block.php'
string: "&lt;/table&gt;"

<b>scanning file: /var/www/an2google/trunk/modules/home/views/editform.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	form for editing static pages
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - alias or UID of static page to edit [string]
string: 'modules/home/models/static.mod.php'
string: 'raUID'
string: 'raUID'
string: 'home'
string: 'home_static'
string: 'edit'
string: ''
string: '['
string: '&amp;#91;'
string: ']'
string: '&amp;#93;'
string: '&lt;'
string: '&amp;lt;'
string: '&gt;'
string: '&amp;gt;'
string: 'p_'
string: 'modules/home/views/editform.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/home/views/contactform.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	public-facing contact form, to send an email to admins
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/home/views/contactform.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/home/models/static.mod.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	object representing static pages
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	member variables (as retieved from database)
comment: //----------------------------------------------------------------------------------------------
comment: //_	currently loaded database record [array]
comment: //_	database table definition [array]
comment: //_	set to true when an object has been loaded [bool]
comment: //_ UID [string]
comment: //_ title [string]
comment: //_ varchar(30) [string]
comment: //_ text [string]
comment: //_ text [string]
comment: //_ plaintext [string]
comment: //_ plaintext [string]
comment: //_ plaintext [string]
comment: //_ varchar(255) [string]
comment: //_ plaintext [string]
comment: //_ plaintext [string]
comment: //_ plaintext [string]
comment: //_ varchar(255) [string]
comment: //_ varchar(255) [string]
comment: //_ datetime [string]
comment: //_ ref:users-user [string]
comment: //_ datetime [string]
comment: //_ ref:users-user [string]
comment: //_ alias [string]
comment: //----------------------------------------------------------------------------------------------
comment: //.	constructor
comment: //----------------------------------------------------------------------------------------------
comment: //opt: raUID - alias or UID of a static page [string]
comment: // initialise table schema
comment: // try load an object from the database
comment: // check if we did
comment: // make new object
comment: // initialize
comment: //----------------------------------------------------------------------------------------------
comment: //. load an object from the database given its UID or an alias
comment: //----------------------------------------------------------------------------------------------
comment: //arg: raUID - UID or alias of a Static object [string]
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //. load Static object serialized as an associative array
comment: //----------------------------------------------------------------------------------------------
comment: //arg: ary - associative array of members and values [array]
comment: //----------------------------------------------------------------------------------------------
comment: //. save the current object to database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string on success, html report of errors on failure [string]
comment: //: $db-&gt;save(...) will raise an object_updated event if successful
comment: //----------------------------------------------------------------------------------------------
comment: //.	verify - check that a record is correct before allowing it to be stored in the database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string if object passes, warning message if not [string]
comment: //----------------------------------------------------------------------------------------------
comment: //. database table definition and content versioning
comment: //----------------------------------------------------------------------------------------------
comment: //returns: information for constructing SQL queries [array]
comment: //table columns
comment: //these fields will be indexed
comment: //revision history will be kept for these fields
comment: //----------------------------------------------------------------------------------------------
comment: //. serialize this object to an array
comment: //----------------------------------------------------------------------------------------------
comment: //returns: associative array of all members which define this instance [array]
comment: //----------------------------------------------------------------------------------------------
comment: //.	make an extended array of all data a view will need
comment: //----------------------------------------------------------------------------------------------
comment: //returns: extended array of member variables and metadata [array]
comment: //------------------------------------------------------------------------------------------
comment: //	links
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	done
comment: //------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //. delete current object from the database
comment: //----------------------------------------------------------------------------------------------
comment: //: $db-&gt;delete(...) will raise an object_deleted event on success [bool]
comment: //returns: true on success, false on failure [bool]
comment: // nothing to do
string: ''
string: ''
string: 'New Static Page '
string: 'UID'
string: 'title'
string: 'template'
string: 'content'
string: 'nav1'
string: 'nav2'
string: 'script'
string: 'jsinit'
string: 'banner'
string: 'menu1'
string: 'menu2'
string: 'breadcrumb'
string: 'section'
string: 'subsection'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: 'alias'
string: ''
string: 'home'
string: 'home_static'
string: "Database error.&lt;br/&gt;\n"
string: ''
string: "UID not present.\n"
string: 'module'
string: 'home'
string: 'model'
string: 'home_static'
string: 'archive'
string: 'yes'
string: 'fields'
string: 'UID'
string: 'VARCHAR(33)'
string: 'title'
string: 'VARCHAR(255)'
string: 'template'
string: 'VARCHAR(30)'
string: 'content'
string: 'TEXT'
string: 'nav1'
string: 'TEXT'
string: 'nav2'
string: 'TEXT'
string: 'script'
string: 'TEXT'
string: 'jsinit'
string: 'TEXT'
string: 'banner'
string: 'VARCHAR(255)'
string: 'menu1'
string: 'TEXT'
string: 'menu2'
string: 'TEXT'
string: 'breadcrumb'
string: 'TEXT'
string: 'section'
string: 'VARCHAR(255)'
string: 'subsection'
string: 'VARCHAR(255)'
string: 'createdOn'
string: 'DATETIME'
string: 'createdBy'
string: 'VARCHAR(33)'
string: 'editedOn'
string: 'DATETIME'
string: 'editedBy'
string: 'VARCHAR(33)'
string: 'alias'
string: 'VARCHAR(255)'
string: 'indices'
string: 'UID'
string: '10'
string: 'createdOn'
string: ''
string: 'createdBy'
string: '10'
string: 'editedOn'
string: ''
string: 'editedBy'
string: '10'
string: 'alias'
string: '10'
string: 'nodiff'
string: 'UID'
string: 'title'
string: 'template'
string: 'content'
string: 'nav1'
string: 'nav2'
string: 'script'
string: 'jsinit'
string: 'banner'
string: 'menu1'
string: 'menu2'
string: 'breadcrumb'
string: 'section'
string: 'subsection'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: 'alias'
string: 'editLink'
string: ''
string: 'viewLink'
string: ''
string: 'newLink'
string: ''
string: 'delLink'
string: ''
string: 'editUrl'
string: ''
string: 'viewUrl'
string: ''
string: 'newUrl'
string: ''
string: 'newLink'
string: ''
string: 'home'
string: 'home_static'
string: 'show'
string: 'viewUrl'
string: '%%serverPath%%home/'
string: 'viewLink'
string: "&lt;a href='"
string: 'viewUrl'
string: "'&gt;[permalink]&lt;/a&gt;"
string: 'home'
string: 'home_static'
string: 'edit'
string: 'editUrl'
string: '%%serverPath%%home/edit/'
string: 'editLink'
string: "&lt;a href='"
string: 'editUrl'
string: "'&gt;[edit]&lt;/a&gt;"
string: 'home'
string: 'home_static'
string: 'edit'
string: 'newUrl'
string: "%%serverPath%%home/new/"
string: 'newLink'
string: "&lt;a href='"
string: 'newUrl'
string: "'&gt;[new]&lt;/a&gt;"
string: 'home'
string: 'home_static'
string: 'edit'
string: 'delUrl'
string: '%%serverPath%%home/confirmdelete/'
string: 'delLink'
string: "&lt;a href='"
string: 'delUrl'
string: "'&gt;[delete]&lt;/a&gt;"
string: 'contentJs'
string: 'content'
string: 'contentJs'
string: "'"
string: '--squote--'
string: 'contentJs'
string: 'contentJs'
string: "'"
string: '--dquote--'
string: 'contentJs'

<b>scanning file: /var/www/an2google/trunk/modules/home/inc/maintenance.inc.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //	maintain the gallery table
comment: //-------------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	check image count of all gallery tables
comment: //---------------------------------------------------------------------------------------------
comment: //TODO: check alias
comment: //---------------------------------------------------------------------------------------------
comment: //	compile report
comment: //---------------------------------------------------------------------------------------------
string: 'modules/home/models/static.mod.php'
string: "&lt;h2&gt;Checking Home_Static table...&lt;/h2&gt;"
string: 'UID'
string: 'Title'
string: 'error'
string: "select * from Home_Static"
string: "&lt;b&gt;Records Checked:&lt;/b&gt; $recordCount&lt;br/&gt;\n"
string: "&lt;b&gt;Errors Found:&lt;/b&gt; $errorCount&lt;br/&gt;\n"
string: "&lt;b&gt;Errors Fixed:&lt;/b&gt; $fixCount&lt;br/&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/home/inc/install.inc.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	install script for home module (static pages)
comment: //--------------------------------------------------------------------------------------------------
comment: //+	reports are human-readable HTML, with script-readable HTML comments
comment: //--------------------------------------------------------------------------------------------------
comment: //|	install the Home_Static module
comment: //--------------------------------------------------------------------------------------------------
comment: //returns: html report, or false if not authorized [string][bool]
comment: // only admins can do this
comment: //----------------------------------------------------------------------------------------------
comment: //	create Home_Static table if it does not exist, upgrade it if it does
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	import any records from previous static table
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	done
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
comment: //|	discover if this module is installed
comment: //--------------------------------------------------------------------------------------------------
comment: //:	if installed correctly report will contain HTML comment &lt;!-- installed correctly --&gt;
comment: //returns: HTML installation status report [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	ensure the table which stores Static objects exists and is correct
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	done
comment: //----------------------------------------------------------------------------------------------
string: 'modules/home/models/static.mod.php'
string: 'admin'
string: "&lt;h3&gt;Installing Home_Static Module&lt;/h3&gt;\n"
string: 'recordAlias'
string: 'alias'
string: 'static'
string: "&lt;b&gt;moved $count records from 'static' table.&lt;/b&gt;&lt;br/&gt;"
string: 'admin'
string: ''
string: '&lt;!-- table installed correctly --&gt;'
string: '&lt;!-- module installed correctly --&gt;'

<b>scanning file: /var/www/an2google/trunk/modules/home/actions/show.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	display a static page, given its UID or an alias as reference
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check references and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	render the page
comment: //----------------------------------------------------------------------------------------------
string: 'modules/home/models/static.mod.php'
string: ''
string: 'frontpage'
string: 'home_static'
string: 'frontpage'
string: 'no front page'
string: 'page not found'
string: 'home'
string: 'home_static'
string: 'show'
string: 'twocol-rightnav.template.php'
string: 'admin'
string: "&lt;br/&gt;&lt;a href='/home/edit/"
string: "'&gt;[edit static page]&lt;/a&gt;&lt;br/&gt;\n"
string: 'staticTitle'

<b>scanning file: /var/www/an2google/trunk/modules/home/actions/save.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	save submitted changes, redirect to /home/Saved-Page
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check POST vars and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	save changes to static page
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	redirect back to edited page
comment: //----------------------------------------------------------------------------------------------
string: 'modules/home/models/static.mod.php'
string: 'action'
string: 'action not specified'
string: 'UID'
string: 'UID not given'
string: 'saveStaticPage'
string: 'action'
string: 'action not supported'
string: 'UID'
string: 'home'
string: 'home_static'
string: 'edit'
string: 'UID'
string: 'title'
string: 'template'
string: 'content'
string: 'nav1'
string: 'nav2'
string: 'script'
string: 'jsinit'
string: 'banner'
string: 'menu1'
string: 'menu2'
string: 'breadcrumb'
string: 'section'
string: 'subsection'
string: ''
string: 'Saved changes to '
string: '&lt;br/&gt;'
string: 'ok'
string: 'Could not save Static:&lt;br/&gt;'
string: 'home/'

<b>scanning file: /var/www/an2google/trunk/modules/home/actions/new.act.php</b>
comment: //--------------------------------------------------------------------------------------------------------------
comment: //*	create a new static page
comment: //--------------------------------------------------------------------------------------------------------------
comment: //if ($user-&gt;authHas('home', 'home_static', 'create', 'TODO:UIDHERE') == false) { $page-&gt;do403(); }
string: 'modules/home/models/static.mod.php'
string: '[[:home::menu:]]'
string: 'home/edit/'

<b>scanning file: /var/www/an2google/trunk/modules/home/actions/makedefault.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	make default home page (temporary development script)
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the page and redirect to it
comment: //----------------------------------------------------------------------------------------------
string: 'modules/home/models/static.mod.php'
string: 'admin'
string: 'twocol-rightnav.template.php'
string: 'frontpage'
string: "&lt;h1&gt;Welcome&lt;/h1&gt;&lt;p&gt;Thanks for installing Kapenta.&lt;/p&gt;"
string: 'home/'

<b>scanning file: /var/www/an2google/trunk/modules/home/actions/list.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	list static pages
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: paginate
comment: //----------------------------------------------------------------------------------------------
comment: //	render page
comment: //----------------------------------------------------------------------------------------------
string: 'home'
string: 'home_static'
string: 'show'
string: ''
string: 'modules/home/actions/list.page.php'

<b>scanning file: /var/www/an2google/trunk/modules/home/actions/home.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	action to show the home page
comment: //--------------------------------------------------------------------------------------------------
comment: //+	this is a stub.  a more advanced version would allow one to choose which static page is Home
comment: //+	according to a system setting.  TODO
string: 'frontpage'
string: 'modules/home/actions/show.act.php'

<b>scanning file: /var/www/an2google/trunk/modules/home/actions/edit.act.php</b>
comment: // (?)
comment: //--------------------------------------------------------------------------------------------------
comment: //*	edit a static page
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check reference and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	render the page
comment: //----------------------------------------------------------------------------------------------	
string: 'modules/home/models/static.mod.php'
string: ''
string: 'home/list/'
string: 'home_static'
string: 'home'
string: 'home_static'
string: 'edit'
string: 'you cannot edit this static page'
string: 'modules/home/actions/edit.page.php'
string: 'UID'
string: 'raUID'

<b>scanning file: /var/www/an2google/trunk/modules/home/actions/delete.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	delete a static page (Home_Static object)
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check POST vars and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	delete the page and redirect
comment: //----------------------------------------------------------------------------------------------
string: 'modules/home/models/static.mod.php'
string: 'action'
string: 'Action not specified.'
string: 'deleteStaticPage'
string: 'action'
string: 'Action not supported.'
string: 'UID'
string: 'Page not specified (UID).'
string: 'UID'
string: 'home'
string: 'home_static'
string: 'delete'
string: 'You are not authorzed to delete this page.'
string: "Deleted static page: "
string: '/'

<b>scanning file: /var/www/an2google/trunk/modules/home/actions/default.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	this is the default action of the home module, it loads a static page or the home page
comment: //--------------------------------------------------------------------------------------------------
string: ''
string: 'modules/home/actions/home.act.php'
string: 'modules/home/actions/show.act.php'

<b>scanning file: /var/www/an2google/trunk/modules/home/actions/confirmdelete.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	confirm deletion of a static page
comment: //--------------------------------------------------------------------------------------------------
comment: //$req-&gt;ref should contain UID of Home_Static object to be deleted
comment: //----------------------------------------------------------------------------------------------
comment: //	check reference and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the confirmation form and show it on the item to be deleted
comment: //----------------------------------------------------------------------------------------------
string: 'modules/home/models/static.mod.php'
string: ''
string: 'static/list/'
string: 'Static page not found.'
string: 'home'
string: 'home_static'
string: 'edit'
string: 'You are not authorized to delete this page.'
string: 'UID'
string: 'alias'
string: 'modules/home/views/confirmdelete.block.php'
string: 'warn'
string: 'home/show/'

<b>scanning file: /var/www/an2google/trunk/modules/groups/views/summarynav.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	summarise for the nav (300 wide)
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - recordAlias or UID or groups entry [string]
comment: //arg: groupUID - overrides raUID [string]
comment: // TODO: stop using [[groups::image::...::]]
comment: //% return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check permissions and args
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	load the group
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/groups/models/group.mod.php'
string: 'modules/groups/models/membership.mod.php'
string: ''
string: 'public'
string: '[[:users::pleaselogin:]]'
string: 'groupUID'
string: 'raUID'
string: 'groupUID'
string: 'raUID'
string: 'raUID'
string: ''
string: 'groups'
string: 'groups_group'
string: 'show'
string: ''
string: 'modules/groups/views/summarynav.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/groups/views/summary.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	summarise
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - recordAlias or UID or groups entry [string]
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/groups/models/group.mod.php'
string: 'modules/groups/models/membership.mod.php'
string: 'raUID'
string: 'raUID'
string: 'modules/groups/views/summary.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/groups/views/show.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	show a record
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - recordAlias or UID of a group [string]
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/groups/models/group.mod.php'
string: 'modules/groups/models/membership.mod.php'
string: 'raUID'
string: 'raUID'
string: 'modules/groups/views/show.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/groups/views/select.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	return a list of groups
comment: //--------------------------------------------------------------------------------------------------
comment: //opt: varname - name of variable (default is 'group') [string]
comment: //opt: default - set default value (should be a group UID) [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: permissions check here
comment: //----------------------------------------------------------------------------------------------
comment: //	make and return the select element
comment: //----------------------------------------------------------------------------------------------
comment: //$sql = "select * from Groups_Group order by name";
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/groups/models/group.mod.php'
string: 'modules/groups/models/membership.mod.php'
string: 'group'
string: ''
string: ''
string: 'varname'
string: 'varname'
string: 'default'
string: 'default'
string: 'groups_group'
string: '*'
string: ''
string: 'name'
string: "&lt;select name='"
string: "'&gt;\n"
string: 'UID'
string: "&lt;option value='"
string: 'UID'
string: "' CHECKED='CHECKED'&gt;"
string: 'name'
string: "&lt;/option&gt;\n"
string: "&lt;option value='"
string: 'UID'
string: "'&gt;"
string: 'name'
string: "&lt;/option&gt;\n"
string: "&lt;/select&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/groups/views/newgroupform.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	form to add a new group, shown in nav
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: schoolUID - UID of the school this group belongs to [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/groups/models/group.mod.php'
string: 'modules/groups/models/membership.mod.php'
string: ''
string: 'groups'
string: 'groups_group'
string: 'new'
string: ''
string: 'schoolUID'
string: ''
string: 'schoolUID'
string: 'schoolUID'
string: 'modules/groups/views/newgroupform.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/groups/views/name.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	return a group's name
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - recordAlias or UID or groups entry [string]
comment: //opt: groupUID - overrides $raUID [string]
comment: //opt: link = link to this record? (yes|no) (default is 'no') [string]
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/groups/models/group.mod.php'
string: 'modules/groups/models/membership.mod.php'
string: 'no'
string: 'groupUID'
string: 'raUID'
string: 'groupUID'
string: 'raUID'
string: 'link'
string: 'link'
string: 'raUID'
string: 'no'
string: "&lt;a href='/groups/"
string: "'&gt;"
string: "&lt;/a&gt;"

<b>scanning file: /var/www/an2google/trunk/modules/groups/views/menu.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	menu for groups, no arguments
comment: //--------------------------------------------------------------------------------------------------
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments (if any) and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make and return the block
comment: //----------------------------------------------------------------------------------------------	
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/groups/models/group.mod.php'
string: 'modules/groups/models/membership.mod.php'
string: ''
string: 'newEntry'
string: ''
string: 'groups'
string: 'groups_group'
string: 'edit'
string: 'newEntry'
string: '[[:theme::submenu::label=Add Group::link=/groups/new/:]]'
string: 'editCurrentGroup'
string: ''
string: 'viewCurrentGroup'
string: ''
string: 'editGroupUrl'
string: 'editGroupUrl'
string: ''
string: 'editCurrentGroup'
string: "[[:theme::submenu::label=Edit This Group"
string: "::link="
string: 'editGroupUrl'
string: ":]]"
string: 'viewGroupUrl'
string: 'viewCurrentGroup'
string: "[[:theme::submenu::label=View This Group"
string: "::link="
string: 'viewGroupUrl'
string: ":]]"
string: 'modules/groups/views/menu.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/groups/views/membercount.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	return number of members in group
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: groupUID - UID of a group (NOT alais) [string]
comment: //opt: UID - overrides groupUID [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check permissions and args
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/groups/models/group.mod.php'
string: 'modules/groups/models/membership.mod.php'
string: '0'
string: 'UID'
string: 'groupUID'
string: 'UID'
string: 'groupUID'
string: ''
string: 'raUID'
string: 'groups'
string: 'groups_group'
string: 'show'
string: ''

<b>scanning file: /var/www/an2google/trunk/modules/groups/views/listusergroupsnav.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	list all groups which a user belongs to (formatted for nav)
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: userUID - UID of a user [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check permissions and args
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	load the user's groups (if any)
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/groups/models/group.mod.php'
string: 'modules/groups/models/membership.mod.php'
string: ''
string: 'groups'
string: 'groups_group'
string: 'list'
string: ''
string: 'userUID'
string: ''
string: "userUID='"
string: 'userUID'
string: "'"
string: 'groups_membership'
string: '*'
string: "admin='yes'"
string: "[[:groups::summarynav::groupUID="
string: 'groupUID'
string: ":]]"

<b>scanning file: /var/www/an2google/trunk/modules/groups/views/listmembersnav.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	list group members for the nav (300 px wide)
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - recordAlias or UID or groups entry [string]
comment: //opt: groupUID - overrides raUID [string]
comment: //opt: editmode - set to yes to show 'remove member' links [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: use permission for this
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/groups/models/group.mod.php'
string: 'modules/groups/models/membership.mod.php'
string: 'no'
string: ''
string: 'editmode'
string: 'editmode'
string: 'groupUID'
string: 'raUID'
string: 'groupUID'
string: 'raUID'
string: ''
string: 'raUID'
string: ''
string: 'groups'
string: 'groups_group'
string: 'show'
string: ''
string: "[[:users::summarynav::userUID="
string: 'userUID'
string: "::extra=("
string: 'position'
string: ")::target=_parent:]]\n"
string: 'userUID'
string: 'yes'
string: "%%serverPath%%groups/editmembers/removemember_"
string: "/"
string: 'groupUID'
string: "&lt;a href='"
string: "'&gt;[ remove member &amp;gt;&amp;gt; ]&lt;/a&gt;&lt;br/&gt;&lt;br/&gt;"

<b>scanning file: /var/www/an2google/trunk/modules/groups/views/listallnav.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	list all formatted for navigation bar
comment: //--------------------------------------------------------------------------------------------------
comment: //opt: school - UID of a school, constrains results [string]
comment: //opt: sameschool - UID of a group, constrains results to those of the same school [string]
comment: //%	return value [string]
comment: //%	array of conditions to filter groups table by [array]
comment: //----------------------------------------------------------------------------------------------
comment: //	check permissions and arguments
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: permissions check here
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/groups/models/group.mod.php'
string: 'modules/groups/models/membership.mod.php'
string: ''
string: 'public'
string: '[[:users::pleaselogin:]]'
string: 'school'
string: "school='"
string: 'school'
string: "'"
string: 'sameschool'
string: 'sameschool'
string: ''
string: "school='"
string: "'"
string: 'groups_group'
string: '*'
string: 'name'
string: "[[:groups::summarynav::groupUID="
string: 'UID'
string: ":]]\n"

<b>scanning file: /var/www/an2google/trunk/modules/groups/views/listall.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	list all TODO: add school argument?
comment: //--------------------------------------------------------------------------------------------------
comment: //TODO: fix this up
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/groups/models/group.mod.php'
string: 'modules/groups/models/membership.mod.php'
string: ''
string: "select * from Groups_Group"
string: "[[:groups::summary::raUID="
string: 'UID'
string: ":]]"

<b>scanning file: /var/www/an2google/trunk/modules/groups/views/listadmins.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	list administrators of a group
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: groupUID - UID of a group [string]
comment: //opt: target = link target (for frames, etc) [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------	
comment: //TODO: more checks here
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/groups/models/group.mod.php'
string: 'modules/groups/models/membership.mod.php'
string: ''
string: ''
string: 'groupUID'
string: 'raUID'
string: 'groupUID'
string: 'raUID'
string: ''
string: 'target'
string: '::target='
string: 'target'
string: 'raUID'
string: ''
string: 'groups'
string: 'groups_group'
string: 'show'
string: ''
string: 'yes'
string: 'admin'
string: '[[:users::namelink::userUID='
string: 'userUID'
string: ':]]'
string: "(This group has no administrators, only sysadmins can edit it)&lt;br/&gt;"
string: "This group is administered by "
string: ", "
string: " and "
string: "."

<b>scanning file: /var/www/an2google/trunk/modules/groups/views/image.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	find the group's logo/picture (300px) or a blank image
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - recordAlias or UID or groups entry [string]
comment: //opt: groupUID - overrides raUID [string]
comment: //opt: size - width100, width200, width300, width570, thumb, thumbsm or thumb90 [string]
comment: //opt: link - link to larger image (yes|no) [string]
comment: // no images found for this group
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/groups/models/group.mod.php'
string: 'modules/groups/models/membership.mod.php'
string: 'width300'
string: 'yes'
string: 'groupUID'
string: 'raUID'
string: 'groupUID'
string: 'raUID'
string: 'link'
string: 'no'
string: 'no'
string: 'size'
string: 'size'
string: 'thumb'
string: 'thumb'
string: 'size'
string: 'thumbsm'
string: 'thumbsm'
string: 'size'
string: 'thumb90'
string: 'thumb90'
string: 'size'
string: 'width100'
string: 'width100'
string: 'size'
string: 'width200'
string: 'width200'
string: 'size'
string: 'width300'
string: 'width300'
string: 'size'
string: 'width570'
string: 'width570'
string: 'raUID'
string: ''
string: "select * from Images_Image where refModule='groups' and refUID='"
string: "' order by weight"
string: 'yes'
string: "&lt;a href='/images/show/"
string: 'alias'
string: "'&gt;"
string: "&lt;img src='/images/"
string: "/"
string: 'alias'
string: "' border='0' alt='"
string: "'&gt;&lt;/a&gt;"
string: "&lt;img src='/images/"
string: "/"
string: 'alias'
string: "' border='0' alt='"
string: "'&gt;"
string: "&lt;img src='/themes/clockface/unavailable/"
string: ".jpg' border='0'&gt;"

<b>scanning file: /var/www/an2google/trunk/modules/groups/views/haseditauth.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	returns whether current user is a group admin
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - group UID or recordAlias [string]
string: 'modules/groups/models/group.mod.php'
string: 'modules/groups/models/membership.mod.php'
string: 'admin'
string: 'yes'
string: 'raUID'
string: 'raUID'
string: 'yes'
string: 'no'

<b>scanning file: /var/www/an2google/trunk/modules/groups/views/editform.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	show the edit form
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - recordAlias or UID or groups entry [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/groups/models/group.mod.php'
string: 'modules/groups/models/membership.mod.php'
string: ''
string: 'raUID'
string: ''
string: 'raUID'
string: ''
string: 'groups'
string: 'groups_group'
string: 'edit'
string: ''
string: 'descriptionJs64'
string: 'descriptionJs64'
string: 'description'
string: 'modules/groups/views/editform.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/groups/views/allthumbs.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	all images of all groups (thumbnails, no arguments) TODO: school argument?
comment: //--------------------------------------------------------------------------------------------------
comment: //TODO: this should be moved to the images module
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	load images from the database
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------	
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/groups/models/group.mod.php'
string: 'modules/groups/models/membership.mod.php'
string: ''
string: 'public'
string: ''
string: "refModule='groups'"
string: 'images_image'
string: '*'
string: 'weight'
string: ''
string: 'groups_group'
string: 'refUID'
string: '-'
string: ' '
string: "&lt;a href='/groups/show/"
string: "'&gt;"
string: "&lt;img src='/images/thumb90/"
string: 'alias'
string: "' border='0' alt='"
string: "'&gt;&lt;/a&gt; "

<b>scanning file: /var/www/an2google/trunk/modules/groups/views/addmemberform.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	form to add group members
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - recordAlias or UID of a group [string]
comment: //opt: groupUID - overrides raUID [string]
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/groups/models/group.mod.php'
string: 'modules/groups/models/membership.mod.php'
string: 'groupUID'
string: 'raUID'
string: 'groupUID'
string: 'raUID'
string: 'raUID'
string: 'raUID'
string: 'modules/groups/views/addmemberform.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/groups/models/membership.mod.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	relationship object for group membership (Users_User &lt;-&gt; Groups_Group)
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	member variables (as retieved from database)
comment: //----------------------------------------------------------------------------------------------
comment: //_	currently loaded database record [array]
comment: //_	database table definition [array]
comment: //_	set to true when an object has been loaded [bool]
comment: //_ UID [string]
comment: //_ ref:Users_User [string]
comment: //_ ref:Groups_Group [string]
comment: //_ position within group [string]
comment: //_ is group admin? (yes|no) [string]
comment: //_ datetime [string]
comment: //_ datetime [string]
comment: //_ ref:Users_User [string]
comment: //_ datetime [string]
comment: //_ ref:Users_User [string]
comment: //----------------------------------------------------------------------------------------------
comment: //. constructor
comment: //----------------------------------------------------------------------------------------------
comment: //opt: UID - UID of a Membership object [string]
comment: // initialise table schema
comment: // try load an object from the database
comment: // check if we did
comment: // make new object
comment: // initialize
comment: //----------------------------------------------------------------------------------------------
comment: //. load an object from the db given its UID
comment: //----------------------------------------------------------------------------------------------
comment: //arg: UID - UID of a Membership object [string]
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //. load (first) object from the db given user and group UIDs
comment: //----------------------------------------------------------------------------------------------
comment: //arg: userUID - UID of a Users_User object [string]
comment: //arg: groupUID - UID of a Groups_Group object [string]
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //. load Membership object serialized as an associative array
comment: //----------------------------------------------------------------------------------------------
comment: //arg: ary - associative array of members and values [array]
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //. save the current object to database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string on success, html report of errors on failure [string]
comment: //: $db-&gt;save(...) will raise an object_updated event if successful
comment: //----------------------------------------------------------------------------------------------
comment: //.	verify - check that object is correct before allowing it to be stored in the database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string if object passes, warning message if not [string]
comment: //----------------------------------------------------------------------------------------------
comment: //. database table definition and content versioning
comment: //----------------------------------------------------------------------------------------------
comment: //returns: information for constructing SQL queries [array]
comment: //table columns
comment: //these fields will be indexed
comment: //revision history will be kept for these fields
comment: //----------------------------------------------------------------------------------------------
comment: //. serialize this object to an array
comment: //----------------------------------------------------------------------------------------------
comment: //returns: associative array of all members which define this instance [array]
comment: //----------------------------------------------------------------------------------------------
comment: //. delete current object from the database
comment: //----------------------------------------------------------------------------------------------
comment: //: $db-&gt;delete(...) will raise an object_deleted event on success [bool]
comment: //returns: true on success, false on failure [bool]
comment: // nothing to do
string: ''
string: ''
string: "userUID='"
string: "'"
string: "groupUID='"
string: "'"
string: 'groups_membership'
string: '*'
string: 'UID'
string: 'userUID'
string: 'groupUID'
string: 'position'
string: 'admin'
string: 'joined'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: ''
string: "Database error.&lt;br/&gt;\n"
string: ''
string: ''
string: "UID not present.\n"
string: 'users_user'
string: "Member does not exist."
string: 'groups_group'
string: "Group does not exist."
string: 'module'
string: 'groups'
string: 'model'
string: 'groups_membership'
string: 'fields'
string: 'UID'
string: 'VARCHAR(30)'
string: 'userUID'
string: 'VARCHAR(33)'
string: 'groupUID'
string: 'VARCHAR(33)'
string: 'position'
string: 'VARCHAR(30)'
string: 'admin'
string: 'VARCHAR(10)'
string: 'joined'
string: 'DATETIME'
string: 'createdOn'
string: 'DATETIME'
string: 'createdBy'
string: 'VARCHAR(33)'
string: 'editedOn'
string: 'DATETIME'
string: 'editedBy'
string: 'VARCHAR(33)'
string: 'indices'
string: 'UID'
string: '10'
string: 'userUID'
string: '10'
string: 'groupUID'
string: '10'
string: 'createdOn'
string: ''
string: 'createdBy'
string: '10'
string: 'editedOn'
string: ''
string: 'editedBy'
string: '10'
string: 'nodiff'
string: 'UID'
string: 'userUID'
string: 'groupUID'
string: 'position'
string: 'admin'
string: 'joined'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'

<b>scanning file: /var/www/an2google/trunk/modules/groups/models/group.mod.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	object representing user groups
comment: //--------------------------------------------------------------------------------------------------
comment: //+	group type could be Team/Club/Society, etc
comment: //----------------------------------------------------------------------------------------------
comment: //	member variables (as retieved from database)
comment: //----------------------------------------------------------------------------------------------
comment: //_	currently loaded database record [array]
comment: //_	database table definition [array]
comment: //_	set to true when an object has been loaded [bool]
comment: //_ UID [string]
comment: //_ varchar(33) [string]
comment: //_ title [string]
comment: //_ varchar(30) [string]
comment: //_ wyswyg [string]
comment: //_ datetime [string]
comment: //_ ref:Users_User [string]
comment: //_ datetime [string]
comment: //_ ref:Users_User [string]
comment: //_ alias [string]
comment: //_ range of serialized objects [array]
comment: //----------------------------------------------------------------------------------------------
comment: //. constructor
comment: //----------------------------------------------------------------------------------------------
comment: //opt: raUID - UID or alias of a Group object [string]
comment: // initialise table schema
comment: // try load an object from the database
comment: // check if we did
comment: // make new object
comment: // initialize
comment: // set default name
comment: //----------------------------------------------------------------------------------------------
comment: //. load an object from the database given its UID or an alias
comment: //----------------------------------------------------------------------------------------------
comment: //arg: raUID - UID or alias of a Group object [string]
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //. load Group object serialized as an associative array
comment: //----------------------------------------------------------------------------------------------
comment: //arg: ary - associative array of members and values [array]
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //. save the current object to database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string on success, html report of errors on failure [string]
comment: //: $db-&gt;save(...) will raise an object_updated event if successful
comment: //----------------------------------------------------------------------------------------------
comment: //. check that object is correct before allowing it to be stored in database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string if object passes, warning message if not [string]
comment: //----------------------------------------------------------------------------------------------
comment: //. database table definition and content versioning
comment: //----------------------------------------------------------------------------------------------
comment: //returns: information for constructing SQL queries [array]
comment: //table columns
comment: //these fields will be indexed
comment: //revision history will be kept for these fields
comment: //----------------------------------------------------------------------------------------------
comment: //. serialize this object to an array
comment: //----------------------------------------------------------------------------------------------
comment: //returns: associative array of all members which define this instance [array]
comment: //----------------------------------------------------------------------------------------------
comment: //.	make an extended array of all data a view will need
comment: //----------------------------------------------------------------------------------------------
comment: //returns: extended array of member variables and metadata [array]
comment: //------------------------------------------------------------------------------------------
comment: //	links
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	look up school info
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	summary 
comment: //------------------------------------------------------------------------------------------
comment: //TODO: theme summary fn
comment: //------------------------------------------------------------------------------------------
comment: //	marked up for wyswyg editor
comment: //------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //. delete current object from the database
comment: //----------------------------------------------------------------------------------------------
comment: //: $db-&gt;delete(...) will raise an object_deleted event on success [bool]
comment: //returns: true on success, false on failure [bool]
comment: // nothing to do
comment: //==============================================================================================
comment: //	MEMBERS
comment: //==============================================================================================
comment: //----------------------------------------------------------------------------------------------
comment: //.	load list of members
comment: //----------------------------------------------------------------------------------------------
comment: //returns: range of serialized Groups_Membership objects [array]
comment: //$sql = "select Groups_Membership.* from Groups_Membership, users "
comment: //	 . "where Groups_Membership.groupUID='" . $this-&gt;UID . "' "
comment: //	 . "and Groups_Membership.userUID = users.UID "
comment: //	 . "order by users.firstname";
comment: //----------------------------------------------------------------------------------------------
comment: //.	add a new member to the group
comment: //----------------------------------------------------------------------------------------------
comment: //arg: userUID - UID of a user [string]
comment: //arg: position - position or role within the group [string]
comment: //arg: admin - whether the member is an admin of this group (yes|no) [string]
comment: //----------------------------------------------------------------------------------------------
comment: //.	remove a member from the group
comment: //----------------------------------------------------------------------------------------------
comment: //arg: userUID - UID of a user [string]
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //.	determine if user can edit the group's membership /page (DEPRECATED) TODO: remove
comment: //----------------------------------------------------------------------------------------------
comment: //arg: userUID - UID of a user [string]
comment: //returns: true if use is a group admin, teacher or site admin, otherwise false [bool]
comment: //TODO: user permission set
string: 'modules/schools/models/school.mod.php'
string: 'modules/groups/models/membership.mod.php'
string: ''
string: ''
string: 'New Group '
string: 'UID'
string: 'school'
string: 'name'
string: 'type'
string: 'description'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: 'alias'
string: ''
string: 'groups'
string: 'groups_group'
string: "Database error.&lt;br/&gt;\n"
string: ''
string: ''
string: ''
string: "No UID.&lt;br/&gt;\n"
string: 'module'
string: 'groups'
string: 'model'
string: 'groups_group'
string: 'fields'
string: 'UID'
string: 'VARCHAR(33)'
string: 'school'
string: 'VARCHAR(33)'
string: 'name'
string: 'VARCHAR(255)'
string: 'type'
string: 'VARCHAR(30)'
string: 'description'
string: 'TEXT'
string: 'createdOn'
string: 'DATETIME'
string: 'createdBy'
string: 'VARCHAR(33)'
string: 'editedOn'
string: 'DATETIME'
string: 'editedBy'
string: 'VARCHAR(33)'
string: 'alias'
string: 'VARCHAR(255)'
string: 'indices'
string: 'UID'
string: '10'
string: 'createdOn'
string: ''
string: 'createdBy'
string: '10'
string: 'editedOn'
string: ''
string: 'editedBy'
string: '10'
string: 'alias'
string: '10'
string: 'nodiff'
string: 'UID'
string: 'school'
string: 'name'
string: 'type'
string: 'description'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: 'alias'
string: 'editUrl'
string: ''
string: 'editLink'
string: ''
string: 'viewUrl'
string: ''
string: 'viewLink'
string: ''
string: 'delUrl'
string: ''
string: 'delLink'
string: ''
string: 'newUrl'
string: ''
string: 'newLink'
string: ''
string: 'groups'
string: 'groups_group'
string: 'view'
string: 'viewUrl'
string: '%%serverPath%%groups/'
string: 'viewLink'
string: "&lt;a href='"
string: 'viewUrl'
string: "'&gt;[read on &amp;gt;&amp;gt;]&lt;/a&gt;"
string: 'groups'
string: 'groups_group'
string: 'edit'
string: 'editUrl'
string: '%%serverPath%%groups/edit/'
string: 'editLink'
string: "&lt;a href='"
string: 'editUrl'
string: "'&gt;[edit]&lt;/a&gt;"
string: 'groups'
string: 'groups_group'
string: 'edit'
string: 'delUrl'
string: '%%serverPath%%groups/confirmdelete/UID_'
string: '/'
string: 'delLink'
string: "&lt;a href='"
string: 'delUrl'
string: "'&gt;[delete]&lt;/a&gt;"
string: 'groups'
string: 'groups_group'
string: 'new'
string: 'newUrl'
string: "%%serverPath%%groups/new/"
string: 'newLink'
string: "&lt;a href='"
string: 'newUrl'
string: "'&gt;[add new group]&lt;/a&gt;"
string: 'schoolName'
string: 'schoolCountry'
string: 'schoolRecordAlias'
string: 'schoolUrl'
string: '%%serverPath%%/schools/'
string: 'schoolLink'
string: "&lt;a href='"
string: 'schoolUrl'
string: "'&gt;"
string: "&lt;/a&gt;"
string: 'contentHtml'
string: "&gt;\n"
string: "&gt;"
string: 'description'
string: 'contentHtml'
string: "\n"
string: "&lt;br/&gt;\n"
string: 'contentHtml'
string: 'summary'
string: 'description'
string: 'groups_membership'
string: "Groups_Membership.groupUID='"
string: "'"
string: 'groups_membership'
string: '*'
string: 'deprecated: Groups_Group::authHas() =&gt; Users_User::authHas()'
string: 'bug'
string: 'admin'
string: 'teacher'
string: 'userUID'
string: 'yes'
string: 'admin'

<b>scanning file: /var/www/an2google/trunk/modules/groups/inc/relationships.inc.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	relationships between the current user and groups they may belong to
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: refModel - type of object [string]
comment: //arg: UID - UID of an object [string]
comment: //arg: relationship - between this object and a user [string]
comment: //arg: userUID - UID of the user related to this object [string]
comment: //returns: true if the given relationship exists, otherwise false [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //	get the user we want to know about
comment: //----------------------------------------------------------------------------------------------	
comment: //----------------------------------------------------------------------------------------------
comment: //	relationships of User object
comment: //----------------------------------------------------------------------------------------------
comment: // try load the object
comment: // check that we did
comment: // if the user greated the group
comment: //..........................................................................
comment: // if the user is a member of this group
comment: //..........................................................................
comment: // if the user is an administrator of this group
comment: //----------------------------------------------------------------------------------------------
comment: //	relationships of Groups_Membership object go here, if any come up
comment: //----------------------------------------------------------------------------------------------
comment: //placeholder
string: 'modules/groups/models/group.mod.php'
string: 'modules/groups/models/membership.mod.php'
string: 'groups_group'
string: 'creator'
string: 'groupmember'
string: 'userUID'
string: 'groupadmin'
string: 'userUID'
string: 'yes'
string: 'admin'

<b>scanning file: /var/www/an2google/trunk/modules/groups/inc/install.inc.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	install script for Groups module
comment: //--------------------------------------------------------------------------------------------------
comment: //+	reports are human-readable HTML, with script-readable HTML comments
comment: //--------------------------------------------------------------------------------------------------
comment: //|	install the Groups module
comment: //--------------------------------------------------------------------------------------------------
comment: //returns: html report or false if not authorized [string][bool]
comment: //----------------------------------------------------------------------------------------------
comment: //	create or upgrade Groups_Group table
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	copy all records from previous table
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	create or upgrade Groups_Membership table
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	copy all records from previous table
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	done
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
comment: //|	discover if this module is installed
comment: //--------------------------------------------------------------------------------------------------
comment: //:	if installed correctly report will contain HTML comment &lt;!-- installed correctly --&gt;
comment: //returns: HTML installation status report [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	ensure the table which stores Group objects exists and is correct
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	ensure the table which stores Membership objects exists and is correct
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	done
comment: //----------------------------------------------------------------------------------------------
string: 'core/dbdriver/mysqladmin.dbd.php'
string: 'modules/groups/models/group.mod.php'
string: 'modules/groups/models/membership.mod.php'
string: 'admin'
string: ''
string: 'recordAlias'
string: 'alias'
string: 'groups'
string: "&lt;b&gt;moved $count records from 'groups' table.&lt;/b&gt;&lt;br/&gt;"
string: 'groupmembers'
string: "&lt;b&gt;moved $count records from 'groupmembers' table.&lt;/b&gt;&lt;br/&gt;"
string: 'admin'
string: ''
string: '&lt;!-- table installed correctly --&gt;'
string: '&lt;!-- module installed correctly --&gt;'

<b>scanning file: /var/www/an2google/trunk/modules/groups/actions/show.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	show a group record
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions (no public users)
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------	
comment: //	render the page
comment: //----------------------------------------------------------------------------------------------	
string: 'modules/groups/models/group.mod.php'
string: ''
string: 'public'
string: 'banned'
string: ''
string: 'groups_group'
string: 'Could not load group.'
string: 'groups'
string: 'groups_group'
string: 'edit'
string: '%%serverPath%%groups/edit/'
string: 'modules/groups/actions/show.page.php'
string: 'raUID'
string: 'UID'
string: 'groupName'
string: 'editGroupUrl'

<b>scanning file: /var/www/an2google/trunk/modules/groups/actions/save.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	save changes to a Groups_Group object
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check permissions and POST variables
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	load and update the object
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: sanitize description
comment: //----------------------------------------------------------------------------------------------
comment: //	check that object was saved and redirect
comment: //----------------------------------------------------------------------------------------------
string: 'modules/groups/models/group.mod.php'
string: 'action'
string: 'action not specified'
string: 'saveRecord'
string: 'action'
string: 'action not supported'
string: 'UID'
string: 'UID not POSTed'
string: 'UID'
string: 'groups'
string: 'groups_group'
string: 'edit'
string: 'You are not authorized to edit this Group.'
string: "Group not found."
string: 'school'
string: 'name'
string: 'type'
string: 'description'
string: ''
string: 'Group updated.'
string: 'Could not save Group:&lt;br/&gt;'
string: 'return'
string: 'return'
string: '/groups/show/'

<b>scanning file: /var/www/an2google/trunk/modules/groups/actions/new.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	add a new group
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/groups/models/group.mod.php'
string: 'groups'
string: 'groups_group'
string: 'new'
string: ''
string: 'You are not authorized to create new groups.'
string: 'groups/edit/'

<b>scanning file: /var/www/an2google/trunk/modules/groups/actions/list.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	list all groups in a school (default to user's school)
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: add school-based permission?
comment: //----------------------------------------------------------------------------------------------
comment: //	render the page
comment: //----------------------------------------------------------------------------------------------
string: 'groups'
string: 'groups_group'
string: 'show'
string: 'sc'
string: 'sc'
string: 'modules/groups/actions/list.page.php'
string: 'schoolUID'

<b>scanning file: /var/www/an2google/trunk/modules/groups/actions/editmembers.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	iframe to display and add group members, reference should be a group's recordalias
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check permissions and arguments
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	determine if current user is authorised to administer this group
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: use a permission for this
comment: //----------------------------------------------------------------------------------------------
comment: //	accept HTTP POSTs to add new members
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	accept HTTP POSTs to remove members
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	accept HTTP GET to remove members (user UID is given)
comment: //----------------------------------------------------------------------------------------------
comment: // eg /groups/editmembers/removemember_8237146489/Some-group
comment: //----------------------------------------------------------------------------------------------
comment: //	render the page
comment: //----------------------------------------------------------------------------------------------
string: 'modules/groups/models/group.mod.php'
string: ''
string: 'groups_group'
string: 'no such group'
string: 'user'
string: 'admin'
string: 'yes'
string: 'action'
string: 'action'
string: 'addMember'
string: 'user'
string: 'position'
string: 'admin'
string: "Added new member to "
string: "."
string: 'ok'
string: 'action'
string: 'removemember'
string: 'action'
string: 'user'
string: "Removed member from "
string: "."
string: 'ok'
string: 'removemember'
string: 'users_user'
string: 'removemember'
string: 'removemember'
string: "Removed member from "
string: "."
string: 'ok'
string: 'modules/groups/actions/editmembers.if.page.php'
string: 'UID'
string: 'raUID'

<b>scanning file: /var/www/an2google/trunk/modules/groups/actions/edit.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	edit a group record
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check permissions and reference
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	render the page
comment: //----------------------------------------------------------------------------------------------
string: 'modules/groups/models/group.mod.php'
string: 'groups_group'
string: 'Could not load group.'
string: 'groups'
string: 'groups_group'
string: 'edit'
string: 'You cannot edit the group.'
string: 'modules/groups/actions/edit.page.php'
string: 'raUID'
string: 'viewGroupUrl'
string: '%%serverPath%%groups/'

<b>scanning file: /var/www/an2google/trunk/modules/groups/actions/delete.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	delete a Groups_Group object
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check POST vars and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	delete the group and redirect
comment: //----------------------------------------------------------------------------------------------
string: 'modules/groups/models/group.mod.php'
string: 'action'
string: 'Action not specified.'
string: 'deleteRecord'
string: 'action'
string: 'Action not supported.'
string: 'UID'
string: 'Group not specified (UID).'
string: 'UID'
string: 'groups'
string: 'groups_group'
string: 'delete'
string: "Deleted group: "
string: 'groups/'

<b>scanning file: /var/www/an2google/trunk/modules/groups/actions/default.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	default action for groups module (ie, no action specified in URL)
comment: //--------------------------------------------------------------------------------------------------
comment: // no recordAlias/UID given in URL, list all groups in current users school
comment: // recordAlias/UID given in URL, show single group
string: ''
string: 'modules/groups/actions/list.act.php'
string: 'modules/groups/actions/show.act.php'

<b>scanning file: /var/www/an2google/trunk/modules/groups/actions/confirmdelete.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	confirm deletion of a Groups_Group object
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------		
comment: //----------------------------------------------------------------------------------------------
comment: //	make the confirmation block
comment: //----------------------------------------------------------------------------------------------		
string: 'modules/groups/models/group.mod.php'
string: 'uid'
string: 'uid'
string: 'Group not found.'
string: 'groups'
string: 'groups_group'
string: 'delete'
string: 'You are not authorized to delete this group.'
string: 'UID'
string: 'raUID'
string: 'modules/groups/views/confirmdelete.block.php'
string: 'warn'
string: 'groups/'

<b>scanning file: /var/www/an2google/trunk/modules/gallery/views/thumbs.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	return thumbnails of gallery images
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: UID - UID of gallery (and not recordAlias) [string]
comment: //opt: size - size to show thumbs (default is 'thumb') [string]
comment: //opt: num - maximum number of thumbs to show (most recent first) (default is no limit) [string]
comment: //---------------------------------------------------------------------------------------------
comment: //	check arguments
comment: //---------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	load images
comment: //---------------------------------------------------------------------------------------------
comment: //$thumbUrl = '%%serverPath%%images/' . $size . '/' . $row['UID'];
comment: //	  . "&lt;img src='" . $thumbUrl . "' title='" . $row['title'] . "' border='0' vspace='2px' hspace='2px' /&gt;&lt;/a&gt;\n";
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/gallery/models/gallery.mod.php'
string: ''
string: ''
string: 'thumb'
string: 'UID'
string: 'size'
string: 'size'
string: 'num'
string: 'num'
string: "refModule='gallery'"
string: "refUID='"
string: 'UID'
string: "'"
string: 'images_image'
string: '*'
string: 'weight ASC'
string: ''
string: '%%serverPath%%gallery/image/'
string: 'alias'
string: "&lt;a href='"
string: "'&gt;"
string: "[[:images::$size::imageUID="
string: 'UID'
string: "::pad=2::link=no:]]"
string: "&lt;/a&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/gallery/views/summarynav.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	summarise for the nav (300 wide)
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: galleryUID - UID of a gallery record, required [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/gallery/models/gallery.mod.php'
string: ''
string: 'galleryUID'
string: ''
string: 'galleryUID'
string: ''
string: 'galleryUID'
string: 'galleryUID'
string: 'modules/gallery/views/summarynav.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/gallery/views/summarylistuser.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	list all galleries belonging to a specified user	//TODO: fix this up
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: userUID - user whose galleries to list [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	load user's galleries from database
comment: //----------------------------------------------------------------------------------------------
comment: //$sql = "select * from Gallery_Gallery "
comment: //	 . "where parent='root' and createdBy='" . $db-&gt;addMarkup($args['userUID']) . "' "
comment: //	 . "order by title DESC";
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/gallery/models/gallery.mod.php'
string: ''
string: 'userUID'
string: ''
string: "createdBy='"
string: 'userUID'
string: "'"
string: 'gallery_gallery'
string: '*'
string: 'title DESC'
string: "(this user has not created any image galleries yet)&lt;br/&gt;\n"
string: "[[:gallery::summary::raUID="
string: 'UID'
string: ":]]"

<b>scanning file: /var/www/an2google/trunk/modules/gallery/views/summarylist.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	list all galleries belonging to a specified user
comment: //--------------------------------------------------------------------------------------------------
comment: //opt: orderBy - field to order by, default is title (title|imagecount|createdOn|editedOn) [string]
comment: //opt: pageNo - page number to display, default is '1' [string]
comment: //opt: pageSize - number of records per page, default '10' [string]
comment: //: galleries which do not contain any images are not displayed
comment: //returns: html list [string]
comment: //---------------------------------------------------------------------------------------------
comment: //	check arguments
comment: //---------------------------------------------------------------------------------------------
comment: // prevent SQL injection
comment: //---------------------------------------------------------------------------------------------
comment: //	count galleries, set start and end rows and load the recordset
comment: //---------------------------------------------------------------------------------------------
comment: // do not show galleries with no images
comment: //---------------------------------------------------------------------------------------------
comment: //	render html
comment: //---------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/gallery/models/gallery.mod.php'
string: 'title'
string: ''
string: 'DESC'
string: 'orderBy'
string: 'orderBy'
string: 'pageNo'
string: 'pageNo'
string: 'pageSize'
string: 'pageSize'
string: 'createdOn'
string: 'DESC'
string: 'editedOn'
string: 'DESC'
string: 'title'
string: 'ASC'
string: 'imagecount'
string: 'DESC'
string: 'ownerName'
string: 'ASC'
string: 'schoolName'
string: 'ASC'
string: 'createdOn'
string: 'imagecount &gt; 0'
string: 'gallery'
string: 'gallery_gallery'
string: '*'
string: ' '
string: '%%serverPath%%gallery/listall/orderby_'
string: "[[:theme::pagination::page="
string: "::total="
string: "::link="
string: '/'
string: ":]]\n"
string: "&lt;table noborder width='100%'&gt;&lt;tr&gt;&lt;td bgcolor='#dddddd'&gt;"
string: "&amp;nbsp;&amp;nbsp; list by: "
string: "&lt;a href='"
string: "title'&gt;[title]&lt;/a&gt; "
string: "&lt;a href='"
string: "ownerName'&gt;[creator]&lt;/a&gt; "
string: "&lt;a href='"
string: "schoolName'&gt;[school]&lt;/a&gt; "
string: "&lt;a href='"
string: "imagecount'&gt;[number of images]&lt;/a&gt; "
string: "&lt;a href='"
string: "createdOn'&gt;[creation date]&lt;/a&gt;"
string: "&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;hr/&gt;"
string: "[[:gallery::summary::raUID="
string: 'UID'
string: ":]]"
string: "(no galleries match criteria)"

<b>scanning file: /var/www/an2google/trunk/modules/gallery/views/summary.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	summarise
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - recordAlias or UID of a gallery [string]
comment: //opt: pageUID - overrides raUID [string]
comment: //% return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: permissions check here
comment: //TODO: live JS
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/gallery/models/gallery.mod.php'
string: ''
string: 'public'
string: '[[:users::pleaselogin:]]'
string: 'pageUID'
string: 'raUID'
string: 'pageUID'
string: 'raUID'
string: ''
string: 'raUID'
string: ''
string: 'modules/gallery/views/summary.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/gallery/views/showchildren.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	show child galleries - currently unused in awareNet
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: UID - UID of a gallery [string]
comment: // nested galleries not enabled on awareNet
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/gallery/models/gallery.mod.php'
string: ''
string: "&lt;h2&gt;Read More&lt;/h2&gt;\n"
string: 'UID'
string: ''
string: "select * from Gallery_Gallery where parent='"
string: 'UID'
string: "' order by title DESC"
string: "[[:gallery::summary::pageUID="
string: 'UID'
string: ":]]"
string: "&lt;br/&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/gallery/views/show.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	show a record
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - recordAlias or UID of a gallery [string]
comment: //% return value;
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/gallery/models/gallery.mod.php'
string: ''
string: 'raUID'
string: ''
string: 'raUID'
string: ''
string: 'modules/gallery/views/show.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/gallery/views/recentthumbsall.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	return thumbnails of random gallery images
comment: //--------------------------------------------------------------------------------------------------
comment: //opt: size - default is 'thumb' [string]
comment: //opt: page - page we're at, default is 1 (int) [string]
comment: //opt: num - maximum number of thumbs to show, most recent first, default is 20 (int) [string]
comment: //%	page number as shown to users, starts at 1 [int]
comment: //%	number of items per page [int]
comment: //%	image size, as supported by images module [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: check permissions here
comment: //----------------------------------------------------------------------------------------------
comment: //	count total records owned by this module
comment: //----------------------------------------------------------------------------------------------
comment: //$sql = "select count(UID) as numRecords from Images_Image where refModule='gallery'";	
comment: //----------------------------------------------------------------------------------------------
comment: //	make thumbs of images on this page
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/gallery/models/gallery.mod.php'
string: 'thumb'
string: ''
string: 'size'
string: 'size'
string: 'page'
string: 'page'
string: 'num'
string: 'num'
string: "refModule='gallery'"
string: 'images_image'
string: 'images_image'
string: '*'
string: 'createdOn DESC'
string: '%%serverPath%%gallery/image/'
string: 'alias'
string: '%%serverPath%%images/'
string: '/'
string: 'alias'
string: "&lt;a href='"
string: "'&gt;"
string: "&lt;img src='"
string: "' title='"
string: 'title'
string: "' border='0' vspace='2px' hspace='2px' /&gt;&lt;/a&gt;\n"
string: "[[:theme::pagination::page="
string: "::total="
string: "::link=%%serverPath%%gallery/supergallery/:]]\n"

<b>scanning file: /var/www/an2google/trunk/modules/gallery/views/randomthumbs.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	return thumbnails of random gallery images
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: userUID - UID of a user (and not recordAlias) [string]
comment: //opt: size - size to show thumbs (optional) [string]
comment: //opt: num - maximum number of thumbs to show (most recent first) (default is all images) [string]
comment: //: note the direct use of images table - TODO: work around this
comment: //---------------------------------------------------------------------------------------------
comment: //	check arguments
comment: //---------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	get random image UIDs
comment: //---------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/gallery/models/gallery.mod.php'
string: ''
string: ''
string: 'thumbsm'
string: 'userUID'
string: 'size'
string: 'size'
string: 'num'
string: 'num'
string: "createdBy='"
string: 'userUID'
string: "'"
string: "refModule='gallery'"
string: 'images_image'
string: '*'
string: 'RAND()'
string: ''
string: '%%serverPath%%gallery/image/'
string: 'alias'
string: '%%serverPath%%images/'
string: '/'
string: 'alias'
string: "&lt;a href='"
string: "'&gt;"
string: "&lt;img src='"
string: "' title='"
string: 'title'
string: "' border='0' vspace='2px' hspace='2px' /&gt;&lt;/a&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/gallery/views/randomimage.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	display a random image from a gallery
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: galleryUID - UID of a gallery [string]
comment: //opt: size  - size of image [string]
comment: //TODO: move this to the images module
comment: //%	default size of thumbnail [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: permissions check on gallery object
comment: //----------------------------------------------------------------------------------------------
comment: //	load a random image from the databse
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/gallery/models/gallery.mod.php'
string: 'thumbsm'
string: ''
string: 'galleryUID'
string: ''
string: 'size'
string: 'size'
string: 'galleryUID'
string: ''
string: "select * from Images_Image "
string: "where refUID='"
string: 'galleryUID'
string: "' and refModule='gallery' "
string: "order by RAND() limit 0,1"
string: '%%serverPath%%images/'
string: '/'
string: 'alias'
string: '%%serverPath%%gallery/'
string: "&lt;a href='"
string: "'&gt;&lt;img src='"
string: "' border='0'&gt;&lt;/a&gt;"

<b>scanning file: /var/www/an2google/trunk/modules/gallery/views/randomgalleriesnav.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	list some random gallery summaries (formatted for the nav)
comment: //--------------------------------------------------------------------------------------------------
comment: // opt: num = max number to show, default is 10 (int) [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	load x random galleries from the database
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
comment: //$sql = "select * from gallery where imagecount &gt; 0 order by RAND() limit 0," . $db-&gt;addMarkup($num);
string: 'modules/gallery/models/gallery.mod.php'
string: ''
string: 'num'
string: 'num'
string: 'imagecount &gt; 0'
string: 'gallery_gallery'
string: '*'
string: 'RAND()'
string: 'modules/gallery/views/summarynav.block.php'
string: 'galleryUID'
string: 'UID'

<b>scanning file: /var/www/an2google/trunk/modules/gallery/views/newgalleryform.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	form to create a new gallery (formatted for nav, noargs)
comment: //--------------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/gallery/models/gallery.mod.php'
string: 'gallery'
string: 'gallery_gallery'
string: 'new'
string: ''
string: 'modules/gallery/views/newgalleryform.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/gallery/views/navlist.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	list all galleries for the nav 
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: userUID - user whose galleries we wish to show [string]
comment: //$sql = "select * from gallery "
comment: //	 . "where parent='root' and createdBy='" . $db-&gt;addMarkup($args['userUID']) . "' "
comment: //	 . "order by title";
comment: // TODO: input and permissions checks here
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/gallery/models/gallery.mod.php'
string: ''
string: 'userUID'
string: ''
string: "createdBy='"
string: 'userUID'
string: "'"
string: 'gallery_gallery'
string: '*'
string: 'title'
string: 'modules/gallery/views/summarynav.block.php'
string: 'galleryUID'
string: 'UID'
string: "&lt;div class='inlinequote'&gt;(no galleries)&lt;/div&gt;&lt;br/&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/gallery/views/movetogallery.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	form for moving an image from user gallery to another
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - alias or UID of an Images_Image object [string]
comment: //opt: imageUID - oveerrides raUID if present [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and current user (only creator can reshuffle galleries)
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	load list of user galleries from database
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
string: 'modules/images/models/image.mod.php'
string: ''
string: 'imageUID'
string: 'raUID'
string: 'imageUID'
string: 'raUID'
string: '(no raUID)'
string: 'raUID'
string: '(no such image)'
string: ''
string: "createdBy='"
string: "'"
string: "(UID != '"
string: "')"
string: 'gallery_gallery'
string: '*'
string: 'title'
string: 'modules/gallery/views/movetogallery.block.php'
string: ''
string: "\t&lt;option value='"
string: 'UID'
string: "'&gt;"
string: 'title'
string: "&lt;/option&gt;\n"
string: 'UID'
string: 'gals'

<b>scanning file: /var/www/an2google/trunk/modules/gallery/views/menu.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	menu for gallery, no arguments
comment: //--------------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/gallery/models/gallery.mod.php'
string: 'newEntry'
string: '[[:theme::submenu::label=Create New Gallery::link=/gallery/new/:]]'
string: 'gallery'
string: 'gallery_gallery'
string: 'edit'
string: 'newEntry'
string: ''
string: 'modules/gallery/views/menu.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/gallery/views/imagecount.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	count the number of images in a gallery
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: galleryUID - UID of a gallery [string]
comment: //TODO: use $db-&gt;countRange
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/gallery/models/gallery.mod.php'
string: 'galleryUID'
string: ''
string: "select count(UID) as numRecords from Images_Image "
string: "where refModule='gallery' and refUID='"
string: 'galleryUID'
string: "'"
string: 'numRecords'

<b>scanning file: /var/www/an2google/trunk/modules/gallery/views/gallerynav.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	display gallery navigation (TODO: make more efficient, only load the records we need, by weight)
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: galleryUID - UID of a gallery [string]
comment: //arg: imageUID - UID of current image [string]
comment: //opt: size - image size (thumb90, thumbsm, width300, etc) [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permission
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	load images js into array
comment: //----------------------------------------------------------------------------------------------
comment: //$sql = "select UID, title, weight, recordAlias from Images_Image "
comment: //	 . "where refUID='" . $db-&gt;addMarkup($args['galleryUID']) . "' and refModule='gallery' "
comment: //	 . "order by weight ";
comment: //----------------------------------------------------------------------------------------------
comment: //	display
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/gallery/models/gallery.mod.php'
string: ''
string: 'thumbsm'
string: 'galleryUID'
string: ''
string: 'imageUID'
string: ''
string: 'size'
string: 'size'
string: "refUID='"
string: 'galleryUID'
string: "'"
string: "refModule='gallery'"
string: 'images_image'
string: '*'
string: 'weight'
string: "var galThumbs = new Array();\n"
string: 'UID'
string: 'imageUID'
string: 'UID'
string: 'title'
string: 'alias'
string: "galThumbs[$idx] = new Array('"
string: "','"
string: "', '"
string: "');\n"
string: "var galleryNavCurrIdx = "
string: ";\n"
string: "&lt;script src='%%serverPath%%modules/gallery/js/gallerynav.js'&gt;&lt;/script&gt;\n"
string: "&lt;div id='galleryNavJs'&gt;&lt;span class='ajaxmsg'&gt;Loading...&lt;/span&gt;&lt;/div&gt;"
string: "&lt;script&gt;\n"
string: "&lt;/script&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/gallery/views/editform.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	show the edit form
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - recordAlias or UID of a gallery [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/gallery/models/gallery.mod.php'
string: ''
string: 'raUID'
string: ''
string: 'raUID'
string: ''
string: 'gallery'
string: 'gallery_gallery'
string: 'edit'
string: ''
string: 'descriptionJs64'
string: 'descriptionJs64'
string: 'description'
string: 'modules/gallery/views/editform.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/gallery/views/addchildform.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	form to add a child page - not currently used in awareNet
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: UID - UID of a gallery [string]
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/gallery/models/gallery.mod.php'
string: 'UID'
string: ''
string: 'UID'
string: 'UID'
string: 'modules/gallery/views/addchild.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/gallery/models/gallery.mod.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	object to represent user galleries
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //member variables
comment: //----------------------------------------------------------------------------------------------
comment: //_	currently loaded database record [array]
comment: //_	database table definition [array]
comment: //_	set to true when an object has been loaded [bool]
comment: //_ UID [string]
comment: //_ title [string]
comment: //_ wyswyg [string]
comment: //_ bigint [string]
comment: //_ name of user who created this gallery [string]
comment: //_ for sorting [string]
comment: //_ datetime [string]
comment: //_ ref:Users_User [string]
comment: //_ datetime [string]
comment: //_ ref:Users_User [string]
comment: //_ alias [string]
comment: //----------------------------------------------------------------------------------------------
comment: //. constructor
comment: //----------------------------------------------------------------------------------------------
comment: //opt: raUID - UID or alias of a Gallery object [string]
comment: // initialise table schema
comment: // try load an object from the database
comment: // check if we did
comment: // make new object
comment: // initialize
comment: // for listing by creator
comment: // for listing by school
comment: //----------------------------------------------------------------------------------------------
comment: //. load an object from the database given its UID or an alias
comment: //----------------------------------------------------------------------------------------------
comment: //arg: raUID - UID or alias of a Gallery object [string]
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //. load Gallery object serialized as an associative array
comment: //----------------------------------------------------------------------------------------------
comment: //arg: ary - associative array of members and values [array]
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //. save the current object to database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string on success, html report of errors on failure [string]
comment: //: $db-&gt;save(...) will raise an object_updated event if successful
comment: //----------------------------------------------------------------------------------------------
comment: //. check that object is correct before allowing it to be stored in database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string if object passes, warning message if not [string]
comment: //----------------------------------------------------------------------------------------------
comment: //. database table definition and content versioning
comment: //----------------------------------------------------------------------------------------------
comment: //returns: information for constructing SQL queries [array]
comment: //table columns
comment: //these fields will be indexed
comment: //no revision history will be kept for these fields
comment: //----------------------------------------------------------------------------------------------
comment: //. serialize this object to an array
comment: //----------------------------------------------------------------------------------------------
comment: //returns: associative array of all members which define this instance [array]
comment: //----------------------------------------------------------------------------------------------
comment: //. make an extended array of data views may need
comment: //----------------------------------------------------------------------------------------------
comment: //returns: associative array of members, metadata and partial views [array]
comment: //------------------------------------------------------------------------------------------
comment: //	check authorisation
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	links
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	strandardise date format to previous website
comment: //------------------------------------------------------------------------------------------
comment: //$ary['longdate'] = date('jS F, Y', strtotime($ary['date']));
comment: //------------------------------------------------------------------------------------------
comment: //	redundant - namespace issue
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	summary
comment: //------------------------------------------------------------------------------------------
comment: //TODO: remove this to view?
comment: //------------------------------------------------------------------------------------------
comment: //	look up user
comment: //------------------------------------------------------------------------------------------
comment: //TODO: remove this, use views of user module instead
comment: //----------------------------------------------------------------------------------------------
comment: //.	update image count of the current gallery
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //. delete current object from the database
comment: //----------------------------------------------------------------------------------------------
comment: //: $db-&gt;delete(...) will raise an object_deleted event on success [bool]
comment: //returns: true on success, false on failure [bool]
comment: // nothing to do
string: ''
string: ''
string: 'New Gallery '
string: 'UID'
string: 'title'
string: 'description'
string: 'imagecount'
string: 'ownerName'
string: 'schoolName'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: 'alias'
string: ''
string: 'gallery'
string: 'gallery_gallery'
string: "Database error.&lt;br/&gt;\n"
string: ''
string: ''
string: ''
string: "No UID.&lt;br/&gt;\n"
string: 'module'
string: 'gallery'
string: 'model'
string: 'gallery_gallery'
string: 'fields'
string: 'UID'
string: 'VARCHAR(33)'
string: 'title'
string: 'VARCHAR(255)'
string: 'description'
string: 'TEXT'
string: 'imagecount'
string: 'BIGINT(20)'
string: 'ownerName'
string: 'VARCHAR(255)'
string: 'schoolName'
string: 'VARCHAR(255)'
string: 'createdOn'
string: 'DATETIME'
string: 'createdBy'
string: 'VARCHAR(33)'
string: 'editedOn'
string: 'DATETIME'
string: 'editedBy'
string: 'VARCHAR(33)'
string: 'alias'
string: 'VARCHAR(255)'
string: 'indices'
string: 'UID'
string: '10'
string: 'title'
string: '10'
string: 'imagecount'
string: ''
string: 'ownerName'
string: '10'
string: 'schoolName'
string: '10'
string: 'createdOn'
string: ''
string: 'createdBy'
string: '10'
string: 'editedOn'
string: ''
string: 'editedBy'
string: '10'
string: 'alias'
string: '10'
string: 'nodiff'
string: 'UID'
string: 'imagecount'
string: 'UID'
string: 'title'
string: 'description'
string: 'imagecount'
string: 'ownerName'
string: 'schoolName'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: 'alias'
string: 'editUrl'
string: ''
string: 'editLink'
string: ''
string: 'viewUrl'
string: ''
string: 'viewLink'
string: ''
string: 'newUrl'
string: ''
string: 'newLink'
string: ''
string: 'addChildUrl'
string: ''
string: 'addChildLink'
string: ''
string: 'delUrl'
string: ''
string: 'delLink'
string: ''
string: 'admin'
string: 'createdBy'
string: 'gallery'
string: 'gallery_gallery'
string: 'show'
string: 'viewUrl'
string: '%%serverPath%%gallery/'
string: 'alias'
string: 'viewLink'
string: "&lt;a href='"
string: 'viewUrl'
string: "'&gt;[read on &amp;gt;&amp;gt;]&lt;/a&gt;"
string: 'editUrl'
string: '%%serverPath%%gallery/edit/'
string: 'alias'
string: 'editLink'
string: "&lt;a href='"
string: 'editUrl'
string: "'&gt;[edit]&lt;/a&gt;"
string: 'newUrl'
string: "%%serverPath%%gallery/new/"
string: 'newLink'
string: "&lt;a href='"
string: 'newUrl'
string: "'&gt;[create new gallery]&lt;/a&gt;"
string: 'addChildUrl'
string: "%%serverPath%%gallery/addchild/"
string: 'alias'
string: 'addChildLink'
string: "&lt;a href='"
string: 'addChildUrl'
string: "'&gt;[add child gallery]&lt;/a&gt;"
string: 'delUrl'
string: "%%serverPath%%gallery/confirmdelete/UID_"
string: 'UID'
string: '/'
string: 'delLink'
string: "&lt;a href='"
string: 'delUrl'
string: "'&gt;[delete gallery]&lt;/a&gt;"
string: 'titleUpper'
string: 'title'
string: 'galleryTitle'
string: 'title'
string: 'summary'
string: 'description'
string: 'createdBy'
string: 'userName'
string: ' '
string: 'userRa'
string: 'userUrl'
string: '%%serverPath%%users/profile/'
string: 'userRa'
string: 'userLink'
string: "&lt;a href='"
string: 'userUrl'
string: "'&gt;"
string: 'userRa'
string: "&lt;/a&gt;"
string: "[[:images::count::refModule=gallery::refUID="
string: ":]]"
string: ''

<b>scanning file: /var/www/an2google/trunk/modules/gallery/inc/relationships.inc.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	relationships between the users and image galleries
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: refModel - type of object [string]
comment: //arg: UID - UID of an object [string]
comment: //arg: relationship - between this object and a user [string]
comment: //arg: userUID - UID of the user related to this object [string]
comment: //returns: true if the given relationship exists, otherwise false [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //	get the user we want to know about
comment: //----------------------------------------------------------------------------------------------	
comment: //----------------------------------------------------------------------------------------------
comment: //	relationships of Gallery object
comment: //----------------------------------------------------------------------------------------------
comment: // try load the object
comment: // check that we did
comment: // relationship exists of user started this project
comment: //..........................................................................
string: 'modules/gallery/models/gallery.mod.php'
string: 'gallery_gallery'
string: 'creator'

<b>scanning file: /var/www/an2google/trunk/modules/gallery/inc/maintenance.inc.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //	maintain the gallery table
comment: //-------------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	check image count of all gallery tables
comment: //---------------------------------------------------------------------------------------------
comment: //-----------------------------------------------------------------------------------------
comment: //	count images belonging to this gallery
comment: //-----------------------------------------------------------------------------------------
comment: //-----------------------------------------------------------------------------------------
comment: //	change recorded value if wrong
comment: //-----------------------------------------------------------------------------------------
comment: //-----------------------------------------------------------------------------------------
comment: //	make sure this gallery has an owner name
comment: //-----------------------------------------------------------------------------------------
comment: //-----------------------------------------------------------------------------------------
comment: //	make sure this gallery has a school name
comment: //-----------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	compile report
comment: //---------------------------------------------------------------------------------------------
string: 'modules/gallery/models/gallery.mod.php'
string: "&lt;h2&gt;Checking gallery table...&lt;/h2&gt;"
string: 'UID'
string: 'Title'
string: 'Image Count'
string: 'error'
string: "select * from Gallery_Gallery"
string: 'imagecount'
string: " [[:images::count::refModule=gallery::refUID="
string: 'UID'
string: ":]] "
string: ''
string: ''
string: 'ownerName'
string: '[[:users::name::userUID='
string: 'createdBy'
string: ':]]'
string: ''
string: ''
string: 'schoolName'
string: '[[:users::schoolname::link=no::userUID='
string: 'createdBy'
string: ':]]'
string: ''
string: "&lt;b&gt;Records Checked:&lt;/b&gt; $recordCount&lt;br/&gt;\n"
string: "&lt;b&gt;Errors Found:&lt;/b&gt; $errorCount&lt;br/&gt;\n"
string: "&lt;b&gt;Errors Fixed:&lt;/b&gt; $fixCount&lt;br/&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/gallery/inc/install.inc.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	install script for Gallery module
comment: //--------------------------------------------------------------------------------------------------
comment: //+	reports are human-readable HTML, with script-readable HTML comments
comment: //--------------------------------------------------------------------------------------------------
comment: //|	install the Gallery module
comment: //--------------------------------------------------------------------------------------------------
comment: //returns: html report or false if not authorized [string][bool]
comment: //----------------------------------------------------------------------------------------------
comment: //	create or upgrade Gallery_Gallery table
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	copy all records from previous table
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	done
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
comment: //|	discover if this module is installed
comment: //--------------------------------------------------------------------------------------------------
comment: //:	if installed correctly report will contain HTML comment &lt;!-- installed correctly --&gt;
comment: //returns: HTML installation status report [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	ensure the table which stores Gallery objects exists and is correct
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	done
comment: //----------------------------------------------------------------------------------------------
string: 'core/dbdriver/mysqladmin.dbd.php'
string: 'modules/gallery/models/gallery.mod.php'
string: 'admin'
string: ''
string: 'recordAlias'
string: 'alias'
string: 'gallery'
string: "&lt;b&gt;moved $count records from 'gallery' table.&lt;/b&gt;&lt;br/&gt;"
string: 'admin'
string: ''
string: '&lt;!-- table installed correctly --&gt;'
string: '&lt;!-- module installed correctly --&gt;'

<b>scanning file: /var/www/an2google/trunk/modules/gallery/events/images_deleted.on.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //	fired when an image is deleted
comment: //-------------------------------------------------------------------------------------------------
comment: //arg: refModule - name of module to which a comment was attached
comment: //arg: refUID - UID of object to which comment was attached
comment: //arg: imageUID - UID of the new comment
comment: //arg: imageTitle - text/html of comment
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	update image count
comment: //----------------------------------------------------------------------------------------------
comment: //-------------------------------------------------------------------------------------------------
string: 'modules/gallery/models/gallery.mod.php'
string: 'refModule'
string: 'refUID'
string: 'imageUID'
string: 'imageTitle'
string: 'refModule'
string: 'gallery'
string: 'refUID'

<b>scanning file: /var/www/an2google/trunk/modules/gallery/events/images_added.on.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //	fired when an image is added 
comment: //-------------------------------------------------------------------------------------------------
comment: //arg: refModule - name of module to which a comment was attached
comment: //arg: refUID - UID of object to which comment was attached
comment: //arg: imageUID - UID of the new comment
comment: //arg: imageTitle - text/html of comment
comment: //----------------------------------------------------------------------------------------------
comment: //	update image count
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	send notification to friends
comment: //----------------------------------------------------------------------------------------------
comment: /* TODO: add notification back

	$link = "&lt;a href='" . $ext['viewUrl'] . "/'&gt;" . $ext['title'].  '&lt;/a&gt;';

	$url = $ext['viewUrl'];
	$imgUID = '';



	$title = $user-&gt;getNameLink() . ' added a new image to their gallery: ' . $link;

	notifyFriends($args['refUID'], $args['imageUID'], 
				  $user-&gt;getName(), $user-&gt;getUrl(),
				  $title, $content, $url, $args['imageUID'] );
	*/
comment: //-------------------------------------------------------------------------------------------------
string: 'modules/gallery/models/gallery.mod.php'
string: 'refModule'
string: 'refUID'
string: 'imageUID'
string: 'imageTitle'
string: 'refModule'
string: 'gallery'
string: 'refUID'
string: 'viewUrl'
string: "&lt;a href='"
string: "'&gt;"
string: "&lt;/a&gt;"
string: ' added a new image.'
string: "&lt;a href='/gallery/image/"
string: 'imageUID'
string: "'&gt;"
string: "[[:images::width300::raUID="
string: 'imageUID'
string: "::link=no:]]"
string: "&lt;br/&gt;[ view image &amp;gt;&amp;gt; ]&lt;/a&gt;&lt;br/&gt;"
string: "&lt;a href='"
string: "'&gt;[ view gallery &amp;gt;&amp;gt; ]&lt;/a&gt;"
string: 'gallery'
string: 'gallery_gallery'

<b>scanning file: /var/www/an2google/trunk/modules/gallery/actions/supergallery.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	display recent images from everybody
comment: //--------------------------------------------------------------------------------------------------
comment: // check basic permissions
string: 'gallery'
string: 'gallery_gallery'
string: 'show'
string: 'TODO:UIDHERE'
string: 'modules/gallery/actions/supergallery.page.php'
string: 'page'

<b>scanning file: /var/www/an2google/trunk/modules/gallery/actions/show.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	display a gallery page
comment: //--------------------------------------------------------------------------------------------------
comment: //if ($user-&gt;authHas('gallery', 'gallery_gallery', 'show', 'TODO:UIDHERE') == false) { $page-&gt;do403(); }		// check basic permissions
comment: // check ref
comment: // check correct ref
string: 'modules/gallery/models/gallery.mod.php'
string: ''
string: 'gallery_gallery'
string: 'users_user'
string: 'modules/gallery/actions/show.page.php'
string: 'UID'
string: 'raUID'
string: 'userUID'
string: 'userRa'
string: 'galleryRa'
string: 'galleryTitle'

<b>scanning file: /var/www/an2google/trunk/modules/gallery/actions/save.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	save a gallery entry
comment: //--------------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	save from 'add child page' form 
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	save from edit form
comment: //------------------------------------------------------------------------------------------
string: 'gallery'
string: 'gallery_gallery'
string: 'edit'
string: 'TODO:UIDHERE'
string: 'modules/gallery/models/gallery.mod.php'
string: 'action'
string: 'action'
string: 'addChildPage'
string: 'UID'
string: 'title'
string: 'description'
string: 'gallery/'
string: 'action'
string: 'saveRecord'
string: 'UID'
string: 'title'
string: 'description'
string: 'sMessage'
string: "Saved changes to gallery.&lt;br/&gt;\n"
string: 'gallery/'

<b>scanning file: /var/www/an2google/trunk/modules/gallery/actions/new.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	add a new (root) gallery
comment: //--------------------------------------------------------------------------------------------------
comment: //TODO: replace with standard generated code
comment: //----------------------------------------------------------------------------------------------
comment: //	create a gallery given a title
comment: //----------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	invalid title
comment: //------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	create gallery
comment: //----------------------------------------------------------------------------------------------
string: 'modules/gallery/models/gallery.mod.php'
string: 'gallery'
string: 'gallery_gallery'
string: 'new'
string: 'action'
string: 'Action not specified.'
string: 'createGallery'
string: 'action'
string: 'Action not supported.'
string: 'title'
string: ''
string: 'title'
string: "Please choose a title for your new gallery."
string: 'gallery/list/'
string: 'title'
string: ''
string: 'Could not create gallery: '
string: 'bad'
string: 'gallery/list/'
string: 'Gallery created: '
string: 'ok'
string: 'gallery/edit/'

<b>scanning file: /var/www/an2google/trunk/modules/gallery/actions/move.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	move a user image from one gallery to another
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check POST vars and user identity
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	move the image
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	redirect back to new gallery
comment: //----------------------------------------------------------------------------------------------
string: 'modules/gallery/models/gallery.mod.php'
string: 'modules/images/models/image.mod.php'
string: 'action'
string: 'Action not specified.'
string: 'moveImage'
string: 'action'
string: 'Action not supported.'
string: 'UID'
string: '(Image) UID not given.'
string: 'gallery'
string: '(Gallery) UID not given.'
string: 'UID'
string: 'Image not found.'
string: 'gallery'
string: 'Gallery not found.'
string: 'gallery'
string: 'gallery_gallery'
string: ''
string: "Moved image '"
string: "' to gallery '"
string: "'"
string: 'ok'
string: "Could not move image '"
string: "':&lt;br/&gt;"
string: 'bad'
string: 'gallery/'

<b>scanning file: /var/www/an2google/trunk/modules/gallery/actions/listall.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	list all galleries by creation date, title or number of images
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: // check basic permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	get order and page
comment: //----------------------------------------------------------------------------------------------
comment: // prevent HTML inject
comment: //----------------------------------------------------------------------------------------------
comment: //	render the page
comment: //----------------------------------------------------------------------------------------------
string: 'gallery'
string: 'gallery_gallery'
string: 'show'
string: 'createdOn'
string: ''
string: 'page'
string: 'page'
string: 'orderby'
string: 'orderby'
string: 'createdOn'
string: 'by creation date'
string: 'title'
string: 'by title'
string: 'imagecount'
string: 'by image count'
string: 'ownerName'
string: 'by owner'
string: 'schoolName'
string: 'by school'
string: 'createdOn'
string: 'modules/gallery/actions/listall.page.php'
string: 'pageNo'
string: 'orderBy'
string: 'orderLabel'
string: 'userUID'
string: 'userRa'
string: 'awareNet - all galleries '
string: ' (page '
string: ')'

<b>scanning file: /var/www/an2google/trunk/modules/gallery/actions/list.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	list all galleries created by a user (in root if nesting)
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: // check basic permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	decide which users galleries to show
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	render the page
comment: //----------------------------------------------------------------------------------------------
string: 'gallery'
string: 'gallery_gallery'
string: 'show'
string: ''
string: 'modules/gallery/actions/list.page.php'
string: 'userUID'
string: 'userRa'
string: 'userName'
string: 'awareNet - galleries by '
string: 'userName'

<b>scanning file: /var/www/an2google/trunk/modules/gallery/actions/image.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	show an image from a users gallery
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	anyone can view images TODO: add permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	load models
comment: //----------------------------------------------------------------------------------------------
comment: //if (false == $gallery-&gt;loaded) { $page-&gt;do404('Gallery not found.'); } TODO
comment: //----------------------------------------------------------------------------------------------
comment: //	render the page
comment: //----------------------------------------------------------------------------------------------
string: 'modules/images/models/image.mod.php'
string: 'modules/gallery/models/gallery.mod.php'
string: ''
string: 'images_image'
string: 'Image not found.'
string: 'users_user'
string: 'modules/gallery/actions/image.page.php'
string: 'imageUID'
string: 'imageRa'
string: 'imageTitle'
string: 'userUID'
string: 'userRa'
string: 'galleryUID'
string: 'galleryTitle'
string: 'galleryRa'

<b>scanning file: /var/www/an2google/trunk/modules/gallery/actions/edit.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	edit an image gallery
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	load the model
comment: //----------------------------------------------------------------------------------------------
comment: // check for ref
comment: // check correct ref
comment: //----------------------------------------------------------------------------------------------
comment: //	check permissions (must be admin or own gallery to edit)
comment: //----------------------------------------------------------------------------------------------
comment: // possibly more to come here...
comment: //----------------------------------------------------------------------------------------------
comment: //	render the page
comment: //----------------------------------------------------------------------------------------------
string: 'modules/gallery/models/gallery.mod.php'
string: ''
string: 'gallery_gallery'
string: 'Gallery not found'
string: 'gallery'
string: 'gallery_gallery'
string: 'edit'
string: 'admin'
string: 'modules/gallery/actions/edit.page.php'
string: 'UID'
string: 'raUID'

<b>scanning file: /var/www/an2google/trunk/modules/gallery/actions/delete.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	delete a Gallery_Gallery object
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check POST vars and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	delete the gallery and redirect
comment: //----------------------------------------------------------------------------------------------
string: 'modules/gallery/models/gallery.mod.php'
string: 'action'
string: 'Action not specified.'
string: 'deleteRecord'
string: 'action'
string: 'Action not supported.'
string: 'UID'
string: 'Gallery not specified (UID).'
string: 'UID'
string: 'gallery'
string: 'gallery_gallery'
string: 'delete'
string: 'You are not authorzed to delete this gallery.'
string: "Deleted gallery: "
string: 'gallery/'

<b>scanning file: /var/www/an2google/trunk/modules/gallery/actions/default.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	default action for user galleries module (ie, no action specified in URL)
comment: //--------------------------------------------------------------------------------------------------
comment: // no recordAlias/UID given in URL, list all galleries
comment: // recordAlias/UID given in URL, show a specific gallery
string: ''
string: 'modules/gallery/actions/list.act.php'
string: 'modules/gallery/actions/show.act.php'

<b>scanning file: /var/www/an2google/trunk/modules/gallery/actions/confirmdelete.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	confirm deletion of a Gallery_Gallery object
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------		
comment: //----------------------------------------------------------------------------------------------
comment: //	make the confirmation block
comment: //----------------------------------------------------------------------------------------------		
string: 'modules/gallery/models/gallery.mod.php'
string: 'UID'
string: 'UID'
string: 'Gallery not found.'
string: 'gallery'
string: 'gallery_gallery'
string: 'delete'
string: 'You are not authorized to delete this gallery.'
string: 'UID'
string: 'raUID'
string: 'modules/gallery/views/confirmdelete.block.php'
string: 'warn'
string: 'gallery/'

<b>scanning file: /var/www/an2google/trunk/modules/gallery/actions/api.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	API of galleries module. No public actions.
comment: //--------------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
comment: //	list records owned by the current user
comment: //--------------------------------------------------------------------------------------------------
string: 'public'
string: 'not logged in'
string: 'myrecords'
string: "select * from Gallery_Gallery where createdBy='"
string: "' order by title"
string: "&lt;?xml version=\"1.0\"?&gt;\n"
string: "&lt;recordset&gt;\n"
string: 'uid'
string: 'UID'
string: 'module'
string: 'gallery'
string: 'title'
string: 'title'
string: 'recordalias'
string: 'alias'
string: 'files'
string: 'none'
string: 'images'
string: 'uploadmultiple'
string: 'videos'
string: 'none'
string: 'record'
string: '  '
string: "&lt;/recordset&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/gallery/actions/adminlist.act.php</b>

<b>scanning file: /var/www/an2google/trunk/modules/forums/views/thumbs.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	return thumbnails of forums images &lt;-- NOT USED AS YET
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: UID - UID of a forum (and not recordAlias) [string]
comment: //opt: size - size to show thumbs (default is 'thumb')  [string]
comment: //opt: num - maximum number of thumbs to show (most recent first) (default is no limit) [string]
comment: //TODO: move this to the images module
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/forums/models/board.mod.php'
string: 'modules/forums/models/reply.mod.php'
string: 'modules/forums/models/thread.mod.php'
string: ''
string: ''
string: 'thumb'
string: 'UID'
string: ''
string: 'size'
string: 'size'
string: 'num'
string: 'limit '
string: 'num'
string: "select * from Images_Image "
string: "where refUID='"
string: 'UID'
string: "' and refModule='forums' "
string: "order by createdOn DESC $limit"
string: '%%serverPath%%forums/image/'
string: 'alias'
string: '%%serverPath%%images/'
string: '/'
string: 'alias'
string: "&lt;a href='"
string: "'&gt;"
string: "&lt;img src='"
string: "' title='"
string: 'title'
string: "'"
string: " border='0' vspace='2px' hspace='2px' /&gt;&lt;/a&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/forums/views/summarynav.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	summarise for the nav (300 wide)
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - recordAlias or UID of forum [string]
comment: //opt: forumUID - overrides raUID [string]
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/forums/models/board.mod.php'
string: 'modules/forums/models/reply.mod.php'
string: 'modules/forums/models/thread.mod.php'
string: 'forumUID'
string: 'raUID'
string: 'forumUID'
string: 'raUID'
string: 'raUID'
string: 'modules/forums/views/summarynav.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/forums/views/summarylistnav.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	list all forums at a specific school (formatted for nav)
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: school - UID of a school (not recordAlias) [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: permissions check here
comment: //----------------------------------------------------------------------------------------------
comment: //	load the boards
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/forums/models/board.mod.php'
string: 'modules/forums/models/reply.mod.php'
string: 'modules/forums/models/thread.mod.php'
string: ''
string: 'school'
string: ''
string: "select * from Forums_Board "
string: "where school='"
string: 'school'
string: "' "
string: "order by weight DESC"
string: "[[:forums::summarynav::forumUID="
string: 'UID'
string: ":]]\n"
string: "(no forums as yet)&lt;br/&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/forums/views/summarylistall.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	list all forums, grouped by school (noargs)
comment: //--------------------------------------------------------------------------------------------------
comment: //opt: num - max number of threads to show per board (int) [string]
comment: //% return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: check permissions here
comment: //----------------------------------------------------------------------------------------------
comment: //	load list of schools from database, order by weight
comment: //----------------------------------------------------------------------------------------------
comment: //$sql = "SELECT count(UID) as numForums, school FROM Forums_Board GROUP BY school";
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/forums/models/board.mod.php'
string: 'modules/forums/models/reply.mod.php'
string: 'modules/forums/models/thread.mod.php'
string: ''
string: 'num'
string: 'num'
string: "SELECT count(UID) as numForums, sum(weight) as totalWeight, school FROM Forums_Board "
string: "GROUP BY school "
string: "ORDER BY totalWeight"
string: "(no forums as yet)&lt;br/&gt;\n"
string: ''
string: ''
string: 'school'
string: 'General'
string: 'schools_school'
string: 'school'
string: "[[:theme::navtitlebox::width=570::label=$schoolName:]]\n"
string: "[[:forums::summarylist::school="
string: 'school'
string: ":]]\n"

<b>scanning file: /var/www/an2google/trunk/modules/forums/views/summarylist.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	list all forums at a specific school (null string for general forums)
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: school - UID of a school (not recordAlias) [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	load boards from database
comment: //----------------------------------------------------------------------------------------------
comment: //$sql = "select * from Forums_Board "
comment: //	 . "where school='" . $db-&gt;addMarkup($args['school']) . "' "
comment: //	 . "order by weight DESC";
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/forums/models/board.mod.php'
string: 'modules/forums/models/reply.mod.php'
string: 'modules/forums/models/thread.mod.php'
string: ''
string: 'school'
string: ''
string: 'forums'
string: 'forums_board'
string: 'show'
string: ''
string: "school='"
string: 'school'
string: "'"
string: 'forums_board'
string: '*'
string: 'weight DESC'
string: "(no forums as yet)&lt;br/&gt;\n"
string: "[[:forums::summary::raUID="
string: 'UID'
string: ":]]\n"
string: "[[:forums::showthreads::num=10::forumUID="
string: 'UID'
string: ":]]"

<b>scanning file: /var/www/an2google/trunk/modules/forums/views/summary.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	summarise
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - recordAlias or UID of forums page [string]
comment: //opt: forumUID - overrides raUID [string]
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/forums/models/board.mod.php'
string: 'modules/forums/models/reply.mod.php'
string: 'modules/forums/models/thread.mod.php'
string: 'forumUID'
string: 'forumUID'
string: 'pageUID'
string: 'raUID'
string: 'raUID'
string: 'modules/forums/views/summary.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/forums/views/showthreads.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	list threads in a forum
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: forumUID - UID of a forum [string]
comment: //opt: pageno - page number (default is 1) [string]
comment: //opt: num - number of threads per page (default is 20) [string]
comment: //%	current page number [int]
comment: //%	number of threads per page [int]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	count all threads on this forum
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	show the current page
comment: //----------------------------------------------------------------------------------------------
comment: //$sql = "select * from Forums_Thread where forum='" . $fUID . "' order by updated DESC " . $limit;	
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/forums/models/board.mod.php'
string: 'modules/forums/models/reply.mod.php'
string: 'modules/forums/models/thread.mod.php'
string: ''
string: 'forumUID'
string: ''
string: 'pageno'
string: 'pageno'
string: 'num'
string: 'num'
string: 'forumUID'
string: ''
string: "board='"
string: "'"
string: 'forums_thread'
string: 'forums_thread'
string: '*'
string: 'updated DESC'
string: 'modules/forums/views/threadrow.block.php'
string: "&lt;table noborder&gt;"
string: "&lt;/table&gt;"
string: '%%serverPath%%forums/show/'
string: '/'
string: "[[:theme::pagination::page="
string: "::total="
string: "::link="
string: ":]]\n"
string: "(no threads in this forum as yet)"

<b>scanning file: /var/www/an2google/trunk/modules/forums/views/showthread.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	display a thread
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: threadUID - UID of a forum thread [string]
comment: // TODO: auth
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/forums/models/board.mod.php'
string: 'modules/forums/models/reply.mod.php'
string: 'modules/forums/models/thread.mod.php'
string: 'threadUID'
string: 'threadUID'
string: 'modules/forums/views/showthread.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/forums/views/showreplies.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	display a thread and paginated replies
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: threadUID - UID of a forum thread [string]
comment: //opt: pageno - page to display, default is 1 (int) [string]
comment: //opt: num - number of replies per page, default is 5 (int) [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	load thread model
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: check permission here
comment: //----------------------------------------------------------------------------------------------
comment: //	count all replies in this thread
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	show the current page
comment: //----------------------------------------------------------------------------------------------
comment: //$sql = "select * from Forums_Reply "
comment: //	 . "where thread='" . $model-&gt;UID . "' "
comment: //	 . "order by createdOn ASC " . $limit;	
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/forums/models/board.mod.php'
string: 'modules/forums/models/reply.mod.php'
string: 'modules/forums/models/thread.mod.php'
string: ''
string: 'threadUID'
string: ''
string: 'pageno'
string: 'pageno'
string: 'num'
string: 'num'
string: 'threadUID'
string: ''
string: "thread='"
string: "'"
string: 'forums_reply'
string: 'forums_reply'
string: '*'
string: 'createdOn ASC'
string: 'modules/forums/views/reply.block.php'
string: 'threadTitle'
string: '%%serverPath%%forums/showthread/'
string: '/'
string: "[[:theme::pagination::page="
string: "::total="
string: "::link="
string: ":]]\n"
string: "(no replies yet)"

<b>scanning file: /var/www/an2google/trunk/modules/forums/views/show.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	show a record
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - recordAlias or UID or forums entry [string]
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/forums/models/board.mod.php'
string: 'modules/forums/models/reply.mod.php'
string: 'modules/forums/models/thread.mod.php'
string: 'raUID'
string: 'raUID'
string: 'modules/forums/views/show.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/forums/views/selectforum.fn.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //	make an HTML select box for choosing a forum
comment: //-------------------------------------------------------------------------------------------------
comment: //opt: varname - variabnle name, default is 'forum' [string]
comment: //opt: default - UID of a forum for default item [string]
comment: //%	return value [string]
comment: //---------------------------------------------------------------------------------------------
comment: //	check variables and auth
comment: //---------------------------------------------------------------------------------------------
comment: //TODO: permissions check here
comment: //---------------------------------------------------------------------------------------------
comment: //	load all forums into a select box
comment: //---------------------------------------------------------------------------------------------
comment: // nb, XHTML
string: ''
string: ''
string: 'forum'
string: 'varname'
string: 'varname'
string: 'default'
string: 'default'
string: 'forums_board'
string: '*'
string: ''
string: 'title'
string: ''
string: ''
string: "&lt;select name='"
string: "'&gt;\n"
string: ''
string: 'UID'
string: "selected='selected'"
string: "\t&lt;option value='"
string: 'UID'
string: "' $sel&gt;"
string: 'title'
string: "&lt;/option&gt;\n"
string: "&lt;/select&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/forums/views/replyform.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	add a reply form
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: threadUID - UID of a forum thread [string]
comment: // TODO: auth
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/forums/models/board.mod.php'
string: 'modules/forums/models/reply.mod.php'
string: 'modules/forums/models/thread.mod.php'
string: 'threadUID'
string: 'threadUID'
string: 'modules/forums/views/replyform.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/forums/views/recentthumbsall.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	return thumbnails of random forums images &lt;--- NOT USED YET
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: page - page we're at (default is 1) [string]
comment: //opt: size - size of images, default is thumb [int]
comment: //opt: num - maximum number of thumbs to show (most recent first) (default is 20) [string]
comment: //%	page number, starts at 1 [int]
comment: //%	number number of items per page [int]
comment: //%	image size [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	count total records owned by this module
comment: //----------------------------------------------------------------------------------------------
comment: //$sql = "select count(UID) as numRecords from Images_Image where refModule='forums'";	
comment: //----------------------------------------------------------------------------------------------
comment: //	make thumbs of images on this page
comment: //----------------------------------------------------------------------------------------------
comment: //$sql = "select * from Images_Image where refModule='forums' order by createdOn DESC " . $limit;	
comment: //CONSIDER: load a model here
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/forums/models/board.mod.php'
string: 'modules/forums/models/reply.mod.php'
string: 'modules/forums/models/thread.mod.php'
string: 'thumb'
string: ''
string: 'size'
string: 'size'
string: 'page'
string: 'page'
string: 'num'
string: 'num'
string: "refModule='forums'"
string: 'images_image'
string: 'images_image'
string: '*'
string: 'createdOn DESC'
string: '%%serverPath%%forums/image/'
string: 'alias'
string: '%%serverPath%%images/'
string: '/'
string: 'alias'
string: "&lt;a href='"
string: "'&gt;"
string: "&lt;img src='"
string: "' title='"
string: 'title'
string: "' border='0' vspace='2px' hspace='2px' /&gt;&lt;/a&gt;\n"
string: '%%serverPath%%forums/superforums/'
string: "[[:theme::pagination::page="
string: "::total="
string: "::link="
string: ":]]\n"

<b>scanning file: /var/www/an2google/trunk/modules/forums/views/randomthumbs.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	return thumbnails of random forums images &lt;---- NOT USED AS YET
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: userUID - UID of user (and not recordAlias) [string]
comment: //opt: size - size to show thumbs (default is 'thumbsm') [string]
comment: //opt: num - maximum number of thumbs to show (most recent first) (default is no limit) [string]
comment: //TODO: move this to the images module
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/forums/models/board.mod.php'
string: 'modules/forums/models/reply.mod.php'
string: 'modules/forums/models/thread.mod.php'
string: ''
string: 'thumbsm'
string: ''
string: 'userUID'
string: ''
string: 'size'
string: 'size'
string: 'num'
string: 'limit '
string: 'num'
string: "select * from Images_Image "
string: "where createdBy='"
string: 'userUID'
string: "' and refModule='forums' "
string: "order by RAND() $limit"
string: '%%serverPath%%forums/image/'
string: 'alias'
string: '%%serverPath%%images/'
string: '/'
string: 'alias'
string: "&lt;a href='"
string: "'&gt;"
string: "&lt;img src='"
string: "' title='"
string: 'title'
string: "' border='0' vspace='2px' hspace='2px' /&gt;&lt;/a&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/forums/views/randomimage.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	display a random image from a forum  &lt;--- TODO: pass this off to images module
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: forumsUID - UID of a forums [string]
comment: //opt: size - size of image (default is 'thumbsm') [string]
comment: //TODO: get rid of this $aliases check, 
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/forums/models/board.mod.php'
string: 'modules/forums/models/reply.mod.php'
string: 'modules/forums/models/thread.mod.php'
string: 'thumbsm'
string: 'forumsUID'
string: ''
string: 'size'
string: 'size'
string: "select * from Images_Image "
string: "where refUID='"
string: 'forumsUID'
string: "' and refModule='forums' "
string: "order by RAND() limit 0,1"
string: '%%serverPath%%images/'
string: '/'
string: 'alias'
string: '%%serverPath%%forums/'
string: 'forums'
string: 'forumsUID'
string: "&lt;a href='"
string: "'&gt;&lt;img src='"
string: "' border='0'&gt;&lt;/a&gt;"

<b>scanning file: /var/www/an2google/trunk/modules/forums/views/newthreadform.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	form to create a new thread
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: forumUID - UID of a forum [string]
comment: // TODO: auth
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/forums/models/board.mod.php'
string: 'modules/forums/models/reply.mod.php'
string: 'modules/forums/models/thread.mod.php'
string: 'forumUID'
string: 'forumUID'
string: 'modules/forums/views/newthreadform.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/forums/views/navlist.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|+	list all forums for the nav //TODO: fix this up
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: school - UID of school to show forums for [string]
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/forums/models/board.mod.php'
string: 'modules/forums/models/reply.mod.php'
string: 'modules/forums/models/thread.mod.php'
string: 'school'
string: ''
string: ''
string: "select * from Forums_Board "
string: "where school='"
string: 'school'
string: "' "
string: "order by weight"
string: 'modules/forums/views/summarynav.block.php'
string: 'forumsUID'
string: 'UID'
string: "(no forums)&lt;br/&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/forums/views/movethreadform.fn.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //	makes a form for moving a forum thread
comment: //-------------------------------------------------------------------------------------------------
comment: //arg: raUID - UID or recordAlias fo a forum thread
comment: //opt: thread - replaces raUID if present
comment: //opt: UID - replaces raUID if present
comment: //---------------------------------------------------------------------------------------------
comment: //	check arguments and auth
comment: //---------------------------------------------------------------------------------------------
comment: //TODO: permissions check here	
comment: //---------------------------------------------------------------------------------------------
comment: //	load the model
comment: //---------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	make and return the block
comment: //---------------------------------------------------------------------------------------------
string: 'modules/forums/models/thread.mod.php'
string: ''
string: 'thread'
string: 'raUID'
string: 'thread'
string: 'UID'
string: 'raUID'
string: 'UID'
string: 'raUID'
string: ''
string: 'raUID'
string: ''
string: 'modules/forums/views/movethreadform.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/forums/views/movelinkjs.fn.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //	makes a link which will make a link for moving a thread to a different forum
comment: //-------------------------------------------------------------------------------------------------
comment: //args: UID - UID of a forum thread
comment: //TODO: make this better
comment: //--------------------------------------------------------------------------------------------
comment: //	check arguments and auth
comment: //--------------------------------------------------------------------------------------------
comment: //TODO: permissions check here
comment: //--------------------------------------------------------------------------------------------
comment: //	make and return the block
comment: //--------------------------------------------------------------------------------------------
string: ''
string: 'UID'
string: ''
string: 'admin'
string: ''
string: 'modules/forums/views/movelinkjs.block.php'
string: 'UID'
string: 'UID'

<b>scanning file: /var/www/an2google/trunk/modules/forums/views/menu.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	menu for forums, no arguments
comment: //--------------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'forums'
string: 'forums_board'
string: 'new'
string: 'newEntry'
string: '[[:theme::submenu::label=Create New Forum::link=/forums/new/:]]'
string: 'newEntry'
string: ''
string: 'modules/forums/views/menu.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/forums/views/listlinksnav.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	list all boards in the nav as links grouped by school displaying weight
comment: //--------------------------------------------------------------------------------------------------
comment: //TODO: opt to show with or without schools
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //TODO:
comment: //----------------------------------------------------------------------------------------------
comment: //	load list from database and sort by school
comment: //----------------------------------------------------------------------------------------------
comment: // TODO: remove this second loop
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
string: ''
string: 'forums_board'
string: 'UID, school, title, weight'
string: ''
string: 'weight ASC'
string: "(no forums yet)"
string: ''
string: 'school'
string: 'school'
string: 'none'
string: 'school'
string: 'General'
string: ''
string: 'school'
string: "[[:schools::name::schoolUID="
string: 'school'
string: ":]]"
string: ''
string: 'school'
string: 'school'
string: 'totalWeight'
string: 'school'
string: 'schoolName'
string: 'school'
string: 'boards'
string: 'school'
string: 'boards'
string: 'school'
string: 'totalWeight'
string: 'weight'
string: 'totalWeight'
string: "&lt;h3&gt;"
string: 'schoolName'
string: " ("
string: 'totalWeight'
string: ")&lt;/h3&gt;"
string: 'boards'
string: '%%serverPath%%forums/show/'
string: 'UID'
string: "&lt;a href='"
string: "'&gt;"
string: 'title'
string: " ("
string: 'weight'
string: ")&lt;/a&gt;"
string: "&lt;br/&gt;\n"
string: "&lt;hr/&gt;"

<b>scanning file: /var/www/an2google/trunk/modules/forums/views/imagecount.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	count the number of images in a forums &lt;--- NOT USED YET
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: forumUID - UID of a forum [string]
comment: //TODO: move to images module or discard
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/forums/models/board.mod.php'
string: 'modules/forums/models/reply.mod.php'
string: 'modules/forums/models/thread.mod.php'
string: 'forumUID'
string: ''
string: "select count(UID) as numRecords from Images_Image "
string: "where refModule='forums' and refUID='"
string: 'forumUID'
string: "'"
string: 'numRecords'

<b>scanning file: /var/www/an2google/trunk/modules/forums/views/editform.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	show the edit form
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - recordAlias or UID or forums entry [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/forums/models/board.mod.php'
string: 'modules/forums/models/reply.mod.php'
string: 'modules/forums/models/thread.mod.php'
string: 'raUID'
string: ''
string: 'raUID'
string: ''
string: 'forums'
string: 'forums_board'
string: 'edit'
string: ''
string: 'descriptionJs64'
string: 'descriptionJs64'
string: 'description'
string: 'modules/forums/views/editform.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/forums/views/busiestthreads.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	list busiest threads on all forums (formatted for nav)
comment: //--------------------------------------------------------------------------------------------------
comment: //opt: num - number of threads to show (default is 10) [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: // TODO: permissions check here
comment: // thread with the smallest ammount of time between replies is the winner
string: 'modules/forums/models/board.mod.php'
string: 'modules/forums/models/reply.mod.php'
string: 'modules/forums/models/thread.mod.php'
string: ''
string: 'num'
string: 'num'
string: "select *, ((now() - TIMESTAMP(createdOn)) / replies) as score from Forums_Thread "
string: "where replies &gt; 0 order by score"
string: 'modules/forums/views/threadsummarynav.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/forums/views/atmyschoolnav.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	list all forums at current user's school (formatted for nav)
comment: //--------------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/forums/models/board.mod.php'
string: 'modules/forums/models/reply.mod.php'
string: 'modules/forums/models/thread.mod.php'
string: "[[:forums::summarylistnav::school="
string: ":]]"

<b>scanning file: /var/www/an2google/trunk/modules/forums/views/adminconsole.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	the admin module's own admin console
comment: //--------------------------------------------------------------------------------------------------
string: 'admin'
string: ''
string: 'modules/forums/views/adminconsole.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/forums/models/thread.mod.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	object representing forum threads
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //member variables
comment: //----------------------------------------------------------------------------------------------
comment: //_	currently loaded database record [array]
comment: //_	database table definition [array]
comment: //_	set to true when an object has been loaded [bool]
comment: //_ UID [string]
comment: //_ varchar(33) [string]
comment: //_ title [string]
comment: //_ wyswyg [string]
comment: //_ varchar(10) [string]
comment: //_ varchar(10) [string]
comment: //_ datetime [string]
comment: //_ datetime [string]
comment: //_ ref:Users_User [string]
comment: //_ datetime [string]
comment: //_ ref:Users_User [string]
comment: //_ alias [string]
comment: //----------------------------------------------------------------------------------------------
comment: //. constructor
comment: //----------------------------------------------------------------------------------------------
comment: //opt: raUID - UID or alias of a Thread object [string]
comment: // initialise table schema
comment: // try load an object from the database
comment: // check if we did
comment: // make new object
comment: // initialize
comment: //----------------------------------------------------------------------------------------------
comment: //. load an object from the database given its UID or an alias
comment: //----------------------------------------------------------------------------------------------
comment: //arg: raUID - UID or alias of a Thread object [string]
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //. load Thread object serialized as an associative array
comment: //----------------------------------------------------------------------------------------------
comment: //arg: ary - associative array of members and values [array]
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //. save the current object to database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string on success, html report of errors on failure [string]
comment: //: $db-&gt;save(...) will raise an object_updated event if successful
comment: //----------------------------------------------------------------------------------------------
comment: //. check that object is correct before allowing it to be stored in database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string if object passes, warning message if not [string]
comment: //----------------------------------------------------------------------------------------------
comment: //. database table definition and content versioning
comment: //----------------------------------------------------------------------------------------------
comment: //returns: information for constructing SQL queries [array]
comment: //table columns
comment: //these fields will be indexed
comment: //revision history will be kept for these fields
comment: //----------------------------------------------------------------------------------------------
comment: //. serialize this object to an array
comment: //----------------------------------------------------------------------------------------------
comment: //returns: associative array of all members which define this instance [array]
comment: //----------------------------------------------------------------------------------------------
comment: //.	make an extended array of all data a view will need
comment: //----------------------------------------------------------------------------------------------
comment: //returns: extended array of member variables and metadata [array]
comment: //------------------------------------------------------------------------------------------
comment: //	check authorisation
comment: //------------------------------------------------------------------------------------------
comment: //if ($user-&gt;UID == $ary['createdBy']) { $auth = true; }
comment: //------------------------------------------------------------------------------------------
comment: //	links
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	strandardise date format to previous website
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	redundant - namespace issue
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	summary
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	look up user
comment: //------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //. delete current object from the database
comment: //----------------------------------------------------------------------------------------------
comment: //: $db-&gt;delete(...) will raise an object_deleted event on success [bool]
comment: //returns: true on success, false on failure [bool]
comment: // nothing to do
comment: //----------------------------------------------------------------------------------------------
comment: //. update the 'replies' field on this thread
comment: //----------------------------------------------------------------------------------------------
string: ''
string: ''
string: 'UID'
string: 'board'
string: 'title'
string: 'content'
string: 'sticky'
string: 'replies'
string: 'updated'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: 'alias'
string: ''
string: 'forums'
string: 'forums_thread'
string: "Database error.&lt;br/&gt;\n"
string: ''
string: ''
string: ''
string: "No UID.&lt;br/&gt;\n"
string: 'module'
string: 'forums'
string: 'model'
string: 'forums_thread'
string: 'fields'
string: 'UID'
string: 'VARCHAR(33)'
string: 'board'
string: 'TEXT'
string: 'title'
string: 'VARCHAR(255)'
string: 'content'
string: 'TEXT'
string: 'sticky'
string: 'VARCHAR(10)'
string: 'replies'
string: 'VARCHAR(10)'
string: 'updated'
string: 'TEXT'
string: 'createdOn'
string: 'DATETIME'
string: 'createdBy'
string: 'VARCHAR(33)'
string: 'editedOn'
string: 'DATETIME'
string: 'editedBy'
string: 'VARCHAR(33)'
string: 'alias'
string: 'VARCHAR(255)'
string: 'indices'
string: 'UID'
string: '10'
string: 'board'
string: '10'
string: 'sticky'
string: '2'
string: 'updated'
string: '10'
string: 'createdOn'
string: ''
string: 'createdBy'
string: '10'
string: 'editedOn'
string: ''
string: 'editedBy'
string: '10'
string: 'alias'
string: '10'
string: 'nodiff'
string: 'UID'
string: 'board'
string: 'title'
string: 'content'
string: 'sticky'
string: 'replies'
string: 'updated'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: 'alias'
string: 'editUrl'
string: ''
string: 'editLink'
string: ''
string: 'viewUrl'
string: ''
string: 'viewLink'
string: ''
string: 'newUrl'
string: ''
string: 'newLink'
string: ''
string: 'addChildUrl'
string: ''
string: 'addChildLink'
string: ''
string: 'delUrl'
string: ''
string: 'delLink'
string: ''
string: 'admin'
string: 'forums'
string: 'Forum_Thread'
string: 'view'
string: 'viewUrl'
string: '%%serverPath%%forumthreads/'
string: 'alias'
string: 'viewLink'
string: "&lt;a href='"
string: 'viewUrl'
string: "'&gt;[read on &amp;gt;&amp;gt;]&lt;/a&gt;"
string: 'editUrl'
string: '%%serverPath%%forumthreads/edit/'
string: 'alias'
string: 'editLink'
string: "&lt;a href='"
string: 'editUrl'
string: "'&gt;[edit]&lt;/a&gt;"
string: 'newUrl'
string: "%%serverPath%%forums/newthread/"
string: 'newLink'
string: "&lt;a href='"
string: 'newUrl'
string: "'&gt;[create new forumthreads]&lt;/a&gt;"
string: 'delUrl'
string: "%%serverPath%%forums/confirmdeletethread/UID_"
string: 'UID'
string: '/'
string: 'delLink'
string: "&lt;a href='"
string: 'delUrl'
string: "'&gt;[delete this thread]&lt;/a&gt;"
string: 'longdate'
string: 'jS F, Y'
string: 'createdOn'
string: 'titleUpper'
string: 'title'
string: 'replies'
string: 'replies'
string: 'threadTitle'
string: 'title'
string: 'summary'
string: 'content'
string: 'contentHtml'
string: "\n"
string: "&lt;br/&gt;\n"
string: 'content'
string: 'createdBy'
string: 'userName'
string: 'userRa'
string: 'userUrl'
string: '%%serverPath%%users/profile/'
string: 'userRa'
string: 'userLink'
string: "&lt;a href='"
string: 'userUrl'
string: "'&gt;"
string: 'userRa'
string: "&lt;/a&gt;"
string: 'userGrade'
string: 'userSchoolLink'
string: "[[:schools::name::schoolUID="
string: "::link=yes:]]"
string: "thread='"
string: "'"
string: 'forums_reply'

<b>scanning file: /var/www/an2google/trunk/modules/forums/models/reply.mod.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	object representing replies to forum threads
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //member variables
comment: //----------------------------------------------------------------------------------------------
comment: //_	currently loaded database record [array]
comment: //_	database table definition [array]
comment: //_	set to true when an object has been loaded [bool]
comment: //_ UID [string]
comment: //_ varchar(33) [string]
comment: //_ varchar(33) [string]
comment: //_ wyswyg [string]
comment: //_ datetime [string]
comment: //_ ref:Users_User [string]
comment: //_ datetime [string]
comment: //_ ref:Users_User [string]
comment: //----------------------------------------------------------------------------------------------
comment: //. constructor
comment: //----------------------------------------------------------------------------------------------
comment: //opt: UID - UID of a Reply object [string]
comment: // initialise table schema
comment: // try load an object from the database
comment: // check if we did
comment: // make new object
comment: // initialize
comment: //----------------------------------------------------------------------------------------------
comment: //. load an object from the db given its UID
comment: //----------------------------------------------------------------------------------------------
comment: //arg: UID - UID of a Reply object [string]
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //. load Reply object serialized as an associative array
comment: //----------------------------------------------------------------------------------------------
comment: //arg: ary - associative array of members and values [array]
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //. save the current object to database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string on success, html report of errors on failure [string]
comment: //: $db-&gt;save(...) will raise an object_updated event if successful
comment: //----------------------------------------------------------------------------------------------
comment: //. check that object is correct before allowing it to be stored in database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string if object passes, warning message if not [string]
comment: //----------------------------------------------------------------------------------------------
comment: //. database table definition and content versioning
comment: //----------------------------------------------------------------------------------------------
comment: //returns: information for constructing SQL queries [array]
comment: //table columns
comment: //these fields will be indexed
comment: //revision history will be kept for these fields
comment: //----------------------------------------------------------------------------------------------
comment: //. serialize this object to an array
comment: //----------------------------------------------------------------------------------------------
comment: //returns: associative array of all members which define this instance [array]
comment: //----------------------------------------------------------------------------------------------
comment: //.	make an extended array of all data a view will need
comment: //----------------------------------------------------------------------------------------------
comment: //returns: extended array of member variables and metadata [array]
comment: //------------------------------------------------------------------------------------------
comment: //	check authorisation
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	links
comment: //------------------------------------------------------------------------------------------
comment: //TODO: replay
comment: //	$ary['viewUrl'] = '%%serverPath%%forums/replies/' . $ary['alias'];
comment: //	$ary['viewLink'] = "&lt;a href='" . $ary['viewUrl'] . "'&gt;[read on &amp;gt;&amp;gt;]&lt;/a&gt;"; 
comment: //	$ary['editUrl'] =  '%%serverPath%%forumreplies/edit/' . $ary['alias'];
comment: //	$ary['editLink'] = "&lt;a href='" . $ary['editUrl'] . "'&gt;[edit]&lt;/a&gt;"; 
comment: //	$ary['newUrl'] = "%%serverPath%%forumreplies/new/";
comment: //	$ary['newLink'] = "&lt;a href='" . $ary['newUrl'] . "'&gt;[create new forumreplies]&lt;/a&gt;";  
comment: //	$ary['delUrl'] = "%%serverPath%%forumreplies/confirmdelete/UID_" . $ary['UID'] . '/';
comment: //	$ary['delLink'] = "&lt;a href='" . $ary['delUrl'] . "'&gt;[delete forumreplies]&lt;/a&gt;";  
comment: //------------------------------------------------------------------------------------------
comment: //	strandardise date format to previous website
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	summary
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	look up user
comment: //------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //. delete current object from the database
comment: //----------------------------------------------------------------------------------------------
comment: //: $db-&gt;delete(...) will raise an object_deleted event on success [bool]
comment: //returns: true on success, false on failure [bool]
comment: // nothing to do
string: ''
string: ''
string: 'UID'
string: 'forum'
string: 'thread'
string: 'content'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: ''
string: "Database error.&lt;br/&gt;\n"
string: ''
string: ''
string: ''
string: "No UID.&lt;br/&gt;\n"
string: 'module'
string: 'forums'
string: 'model'
string: 'forums_reply'
string: 'fields'
string: 'UID'
string: 'VARCHAR(33)'
string: 'forum'
string: 'VARCHAR(33)'
string: 'thread'
string: 'VARCHAR(33)'
string: 'content'
string: 'TEXT'
string: 'createdOn'
string: 'DATETIME'
string: 'createdBy'
string: 'VARCHAR(33)'
string: 'editedOn'
string: 'DATETIME'
string: 'editedBy'
string: 'VARCHAR(33)'
string: 'indices'
string: 'UID'
string: '10'
string: 'forum'
string: '10'
string: 'thread'
string: '10'
string: 'createdOn'
string: ''
string: 'createdBy'
string: '10'
string: 'editedOn'
string: ''
string: 'editedBy'
string: '10'
string: 'nodiff'
string: 'UID'
string: 'forum'
string: 'thread'
string: 'content'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: 'editUrl'
string: ''
string: 'editLink'
string: ''
string: 'viewUrl'
string: ''
string: 'viewLink'
string: ''
string: 'newUrl'
string: ''
string: 'newLink'
string: ''
string: 'addChildUrl'
string: ''
string: 'addChildLink'
string: ''
string: 'delUrl'
string: ''
string: 'delLink'
string: ''
string: 'admin'
string: 'createdBy'
string: 'forums'
string: 'forums_reply'
string: 'show'
string: 'longdate'
string: 'jS F, Y'
string: 'createdOn'
string: 'summary'
string: 'content'
string: 'contentHtml'
string: 'content'
string: 'createdBy'
string: 'userName'
string: ' '
string: 'userRa'
string: 'userUrl'
string: '%%serverPath%%users/profile/'
string: 'userRa'
string: 'userLink'
string: "&lt;a href='"
string: 'userUrl'
string: "'&gt;"
string: 'userRa'
string: "&lt;/a&gt;"

<b>scanning file: /var/www/an2google/trunk/modules/forums/models/board.mod.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	object to represent forum boards
comment: //--------------------------------------------------------------------------------------------------
comment: //+	A very limited phpBB clone.  Forums may be general bound to a school.  Everyone can view forums,
comment: //+	but posting may be limited.  Special members - moderators - can delete unwanted posts, change
comment: //+	the forum's title and description, add more moderators, etc.
comment: //+
comment: //+	What type a forum is is dependant on the 'school' field, if it contains the UID of a school,
comment: //+	it is bound to that school, if blank, it is general, if 'private' it is limited to whomever
comment: //+	is in the 'members' field
comment: //----------------------------------------------------------------------------------------------
comment: //member variables
comment: //----------------------------------------------------------------------------------------------
comment: //_	currently loaded database record [array]
comment: //_	database table definition [array]
comment: //_	set to true when an object has been loaded [bool]
comment: //_ UID [string]
comment: //_ varchar(50) [string]
comment: //_ varchar(255) [string]
comment: //_ wyswyg [string]
comment: //_ varchar(10) [string]
comment: //_ varchar(30) [string]
comment: //_ varchar(30) [string]
comment: //_ datetime [string]
comment: //_ ref:Users_User [string]
comment: //_ datetime [string]
comment: //_ ref:Users_User [string]
comment: //_ alias [string]
comment: //----------------------------------------------------------------------------------------------
comment: //. constructor
comment: //----------------------------------------------------------------------------------------------
comment: //opt: raUID - UID or alias of a Board object [string]
comment: // initialise table schema
comment: // try load an object from the database
comment: // check if we did
comment: // make new object
comment: // initialize
comment: // default title
comment: // hmmm...
comment: //----------------------------------------------------------------------------------------------
comment: //. load an object from the database given its UID or an alias
comment: //----------------------------------------------------------------------------------------------
comment: //arg: raUID - UID or alias of a Board object [string]
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //. load Board object serialized as an associative array
comment: //----------------------------------------------------------------------------------------------
comment: //arg: ary - associative array of members and values [array]
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //. save the current object to database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string on success, html report of errors on failure [string]
comment: //: $db-&gt;save(...) will raise an object_updated event if successful
comment: //----------------------------------------------------------------------------------------------
comment: //. check that object is correct before allowing it to be stored in database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string if object passes, warning message if not [string]
comment: //----------------------------------------------------------------------------------------------
comment: //. database table definition and content versioning
comment: //----------------------------------------------------------------------------------------------
comment: //returns: information for constructing SQL queries [array]
comment: //table columns
comment: //these fields will be indexed
comment: //revision history will be kept for these fields
comment: //----------------------------------------------------------------------------------------------
comment: //. serialize this object to an array
comment: //----------------------------------------------------------------------------------------------
comment: //returns: associative array of all members which define this instance [array]
comment: //----------------------------------------------------------------------------------------------
comment: //.	expand moderators, members, banned //TODO
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //.	collapse back to flat record //TODO
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //.	make an extended array of all data a view will need
comment: //----------------------------------------------------------------------------------------------
comment: //returns: extended array of member variables and metadata [array]
comment: //------------------------------------------------------------------------------------------
comment: //	check authorisation
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	links
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	strandardise date format to previous website
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	redundant - namespace issue
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	summary
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	look up user
comment: //------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //. delete current object from the database
comment: //----------------------------------------------------------------------------------------------
comment: //: $db-&gt;delete(...) will raise an object_deleted event on success [bool]
comment: //returns: true on success, false on failure [bool]
comment: // nothing to do
string: 'modules/forums/models/thread.mod.php'
string: 'modules/forums/models/reply.mod.php'
string: ''
string: ''
string: 'New Forum '
string: '(describe your forum here)'
string: 'UID'
string: 'school'
string: 'title'
string: 'description'
string: 'weight'
string: 'threads'
string: 'replies'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: 'alias'
string: ''
string: 'forums'
string: 'forums_board'
string: "Database error.&lt;br/&gt;\n"
string: ''
string: ''
string: ''
string: "No UID.&lt;br/&gt;\n"
string: 'module'
string: 'forums'
string: 'model'
string: 'forums_board'
string: 'fields'
string: 'UID'
string: 'VARCHAR(33)'
string: 'school'
string: 'VARCHAR(33)'
string: 'title'
string: 'VARCHAR(255)'
string: 'description'
string: 'TEXT'
string: 'weight'
string: 'VARCHAR(10)'
string: 'threads'
string: 'VARCHAR(30)'
string: 'replies'
string: 'VARCHAR(30)'
string: 'createdOn'
string: 'DATETIME'
string: 'createdBy'
string: 'VARCHAR(33)'
string: 'editedOn'
string: 'DATETIME'
string: 'editedBy'
string: 'VARCHAR(33)'
string: 'alias'
string: 'VARCHAR(255)'
string: 'indices'
string: 'UID'
string: '10'
string: 'school'
string: '10'
string: 'createdOn'
string: ''
string: 'createdBy'
string: '10'
string: 'editedOn'
string: ''
string: 'editedBy'
string: '10'
string: 'alias'
string: '10'
string: 'nodiff'
string: 'threads'
string: 'replies'
string: 'UID'
string: 'school'
string: 'title'
string: 'description'
string: 'weight'
string: ''
string: 'threads'
string: 'replies'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: 'alias'
string: "|"
string: ''
string: "|"
string: ''
string: "|"
string: ''
string: '|'
string: '|'
string: '|'
string: 'editUrl'
string: ''
string: 'editLink'
string: ''
string: 'viewUrl'
string: ''
string: 'viewLink'
string: ''
string: 'newUrl'
string: ''
string: 'newLink'
string: ''
string: 'addChildUrl'
string: ''
string: 'addChildLink'
string: ''
string: 'delUrl'
string: ''
string: 'delLink'
string: ''
string: 'admin'
string: 'createdBy'
string: 'forums'
string: 'forums_board'
string: 'show'
string: 'viewUrl'
string: '%%serverPath%%forums/'
string: 'alias'
string: 'viewLink'
string: "&lt;a href='"
string: 'viewUrl'
string: "'&gt;[see all threads &amp;gt;&amp;gt;]&lt;/a&gt;"
string: 'editUrl'
string: '%%serverPath%%forums/edit/'
string: 'alias'
string: 'editLink'
string: "&lt;a href='"
string: 'editUrl'
string: "'&gt;[edit]&lt;/a&gt;"
string: 'newUrl'
string: "%%serverPath%%forums/new/"
string: 'newLink'
string: "&lt;a href='"
string: 'newUrl'
string: "'&gt;[create new forums]&lt;/a&gt;"
string: 'addChildUrl'
string: "%%serverPath%%forums/addchild/"
string: 'alias'
string: 'addChildLink'
string: "&lt;a href='"
string: 'addChildUrl'
string: "'&gt;[add child forums]&lt;/a&gt;"
string: 'delUrl'
string: "%%serverPath%%forums/confirmdelete/UID_"
string: 'UID'
string: '/'
string: 'delLink'
string: "&lt;a href='"
string: 'delUrl'
string: "'&gt;[delete forums]&lt;/a&gt;"
string: 'longdate'
string: 'jS F, Y'
string: 'createdOn'
string: 'titleUpper'
string: 'title'
string: 'forumTitle'
string: 'title'
string: 'summary'
string: 'description'
string: 'createdBy'
string: 'userName'
string: ' '
string: 'userRa'
string: 'userUrl'
string: '%%serverPath%%users/profile/'
string: 'userRa'
string: 'userLink'
string: "&lt;a href='"
string: 'userUrl'
string: "'&gt;"
string: 'userRa'
string: "&lt;/a&gt;"

<b>scanning file: /var/www/an2google/trunk/modules/forums/inc/maintenance.inc.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	maintain the forums module
comment: //--------------------------------------------------------------------------------------------------
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check boards
comment: //----------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	check alias
comment: //------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------
comment: //	board has no alias, create one
comment: //--------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	check weight
comment: //------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	compile report
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check threads
comment: //----------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	check thread aliases
comment: //------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------
comment: //	no recordAlias for this blog post, create one
comment: //---------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	check reply counts
comment: //------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	compile report
comment: //---------------------------------------------------------------------------------------------
string: 'modules/forums/models/board.mod.php'
string: 'modules/forums/models/thread.mod.php'
string: ''
string: "&lt;h2&gt;Checking boards ...&lt;/h2&gt;"
string: 'UID'
string: 'Title'
string: 'error'
string: "SELECT * from Forums_Board"
string: 'forums'
string: 'forums_board'
string: 'UID'
string: 'UID'
string: 'UID'
string: 'title'
string: " (set alias)"
string: ''
string: 'weight'
string: 'UID'
string: 'UID'
string: 'title'
string: "set weight to 0 ("
string: ")"
string: "&lt;b&gt;Records Checked:&lt;/b&gt; $recordCount&lt;br/&gt;\n"
string: "&lt;b&gt;Errors Found:&lt;/b&gt; $errorCount&lt;br/&gt;\n"
string: "&lt;b&gt;Errors Fixed:&lt;/b&gt; $fixCount&lt;br/&gt;\n"
string: "&lt;h2&gt;Checking threads...&lt;/h2&gt;"
string: 'UID'
string: 'Title'
string: 'error'
string: "SELECT * from Forums_Thread"
string: 'forums'
string: 'forums_thread'
string: 'UID'
string: 'UID'
string: 'UID'
string: 'title'
string: "thread='"
string: 'UID'
string: "'"
string: 'forums_reply'
string: 'replies'
string: 'UID'
string: 'UID'
string: 'title'
string: 'Set reply count to '
string: "&lt;b&gt;Records Checked:&lt;/b&gt; $recordCount&lt;br/&gt;\n"
string: "&lt;b&gt;Errors Found:&lt;/b&gt; $errorCount&lt;br/&gt;\n"
string: "&lt;b&gt;Errors Fixed:&lt;/b&gt; $fixCount&lt;br/&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/forums/inc/install.inc.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	install script for Forums module
comment: //--------------------------------------------------------------------------------------------------
comment: //+	reports are human-readable HTML, with script-readable HTML comments
comment: //--------------------------------------------------------------------------------------------------
comment: //|	install the Forums module
comment: //--------------------------------------------------------------------------------------------------
comment: //returns: html report or false if not authorized [string][bool]
comment: //----------------------------------------------------------------------------------------------
comment: //	create or upgrade Forums_Board table
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	copy all records from previous table
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	create or upgrade Forums_Reply table
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	copy all records from previous table
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	create or upgrade Forums_Thread table
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	copy all records from previous table
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	done
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
comment: //|	discover if this module is installed
comment: //--------------------------------------------------------------------------------------------------
comment: //:	if installed correctly report will contain HTML comment &lt;!-- installed correctly --&gt;
comment: //returns: HTML installation status report [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	ensure the table which stores Board objects exists and is correct
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	ensure the table which stores Reply objects exists and is correct
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	ensure the table which stores Thread objects exists and is correct
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	done
comment: //----------------------------------------------------------------------------------------------
string: 'core/dbdriver/mysqladmin.dbd.php'
string: 'modules/forums/models/board.mod.php'
string: 'modules/forums/models/reply.mod.php'
string: 'modules/forums/models/thread.mod.php'
string: 'admin'
string: ''
string: 'recordAlias'
string: 'alias'
string: 'forums'
string: "&lt;b&gt;moved $count records from 'forums' table.&lt;/b&gt;&lt;br/&gt;"
string: 'forumreplies'
string: "&lt;b&gt;moved $count records from 'forumreplies' table.&lt;/b&gt;&lt;br/&gt;"
string: 'recordAlias'
string: 'alias'
string: 'forum'
string: 'board'
string: 'forumthreads'
string: "&lt;b&gt;moved $count records from 'forumthreads' table.&lt;/b&gt;&lt;br/&gt;"
string: 'admin'
string: ''
string: '&lt;!-- table installed correctly --&gt;'
string: '&lt;!-- module installed correctly --&gt;'

<b>scanning file: /var/www/an2google/trunk/modules/forums/actions/showthread.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	show a forum thread
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	control variables
comment: //----------------------------------------------------------------------------------------------
comment: //% default page to show [int]
comment: //----------------------------------------------------------------------------------------------
comment: //	check permissions and reference ( TODO: banned, moderator, etc)
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	redner the page
comment: //----------------------------------------------------------------------------------------------
string: 'modules/forums/models/board.mod.php'
string: 'modules/forums/models/thread.mod.php'
string: 'forums_thread'
string: 'page'
string: 'page'
string: 'forums'
string: 'forums_thread'
string: 'show'
string: 'forums'
string: 'forums_board'
string: 'show'
string: 'modules/forums/actions/showthread.page.php'
string: 'raUID'
string: 'threadUID'
string: 'forumUID'
string: 'pageno'
string: 'forumRa'
string: 'forumTitle'
string: 'threadRa'
string: 'threadTitle'
string: 'createdBy'

<b>scanning file: /var/www/an2google/trunk/modules/forums/actions/show.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	display a forum
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------	
comment: // control variables
comment: //----------------------------------------------------------------------------------------------	
comment: //% list page to show (default is 1) [int]
comment: //----------------------------------------------------------------------------------------------	
comment: // check permissions and reference
comment: //----------------------------------------------------------------------------------------------	
comment: // check ref
comment: // check correct ref
comment: //----------------------------------------------------------------------------------------------	
comment: // load the model
comment: //----------------------------------------------------------------------------------------------	
comment: //----------------------------------------------------------------------------------------------	
comment: // render the page
comment: //----------------------------------------------------------------------------------------------	
string: 'modules/forums/models/board.mod.php'
string: ''
string: 'no such forum'
string: 'forums_board'
string: 'forums'
string: 'forums_board'
string: 'show'
string: 'You are not authorized to view this forum.'
string: 'page'
string: 'page'
string: 'modules/forums/actions/show.page.php'
string: 'UID'
string: 'raUID'
string: 'pageno'
string: 'school'
string: 'forumTitle'

<b>scanning file: /var/www/an2google/trunk/modules/forums/actions/save.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	save changes to a Forums_Board object
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check POST vars and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	save any changes
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: sanitize description
comment: //----------------------------------------------------------------------------------------------
comment: //	add a user to list of moderators/members/bans
comment: //----------------------------------------------------------------------------------------------
comment: /*	TODO: make this a separate action
	if ($_POST['action'] == 'addForumUser') {
		// TODO			
		$_SESSION['sMessage'] .= "Saved changes to forums.&lt;br/&gt;\n";
		$page-&gt;do302('forums/' . $model-&gt;alias);			
	}
	*/
string: 'modules/forums/models/board.mod.php'
string: 'action'
string: 'Action not specified.'
string: 'saveRecord'
string: 'action'
string: 'Action not supported.'
string: 'UID'
string: 'Board not found.'
string: 'forums'
string: 'forums_board'
string: 'edit'
string: 'You are not authorised to edit this board.'
string: 'title'
string: 'description'
string: 'weight'
string: 'school'
string: 'schools_school'
string: ''
string: 'Saved changes to forum: '
string: 'ok'
string: 'Could not save changes:&lt;br/&gt;'
string: 'bad'
string: 'forums/'

<b>scanning file: /var/www/an2google/trunk/modules/forums/actions/newthread.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	create a new forum thread
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check permissions and reference
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	create thread
comment: //----------------------------------------------------------------------------------------------
comment: // TODO: allow some tags 
comment: // redirect back to forum if thread was nto created
comment: //----------------------------------------------------------------------------------------------
comment: //	increment thread count on the forum
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	redirect to new thread
comment: //----------------------------------------------------------------------------------------------
string: 'modules/forums/models/board.mod.php'
string: 'modules/forums/models/thread.mod.php'
string: 'action'
string: 'Action not given.'
string: 'newThread'
string: 'action'
string: 'Action not supported.'
string: 'forum'
string: 'Forum not specified.'
string: 'forum'
string: 'Forum not found.'
string: 'forums'
string: 'forums_board'
string: 'makethread'
string: 'You cannot create new threads in this forum.'
string: ''
string: 'title'
string: 'title'
string: ''
string: '(No Subject)'
string: 'content'
string: ''
string: "Cound not create thread:&lt;br/&gt;$report"
string: 'bad'
string: 'forums/'
string: 'forums/showthread/'

<b>scanning file: /var/www/an2google/trunk/modules/forums/actions/newreply.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	add a new reply to a forum thread
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check POST vars and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	add the reply
comment: //------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	increment reply count on thread
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	increment reply count on forum
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: add a method to board to count replies
comment: //----------------------------------------------------------------------------------------------
comment: //	send a notification to poster
comment: //----------------------------------------------------------------------------------------------
comment: //TODO:	send a notification to poster
comment: //----------------------------------------------------------------------------------------------
comment: //	redirect back to thread
comment: //----------------------------------------------------------------------------------------------
string: 'modules/forums/models/board.mod.php'
string: 'action'
string: 'Action not specified.'
string: 'newThreadReply'
string: 'action'
string: 'Action not supported.'
string: 'thread'
string: 'Thread not specified.'
string: 'thread'
string: 'forums'
string: 'forums_reply'
string: 'new'
string: 'thread'
string: 'content'
string: ''
string: 'Could not add reply: &lt;br/&gt;'
string: 'bad'
string: 'forums/showthread/'

<b>scanning file: /var/www/an2google/trunk/modules/forums/actions/new.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	add a new forum (by default, bound to the admin's school)
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check that user is authorized to create new forums
comment: //----------------------------------------------------------------------------------------------
comment: //if (false == $user-&gt;authHas('forums', 'forums_board', 'new')) { $page-&gt;do403(); }
comment: //----------------------------------------------------------------------------------------------
comment: //	make a new board and redirect to edit form (TODO: use stanard generated code here)
comment: //----------------------------------------------------------------------------------------------
string: 'modules/forums/models/board.mod.php'
string: 'admin'
string: 'Only administrators can create new boards.'
string: 'forums/edit/'

<b>scanning file: /var/www/an2google/trunk/modules/forums/actions/movethread.act.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //*	move a thread from one forum to another
comment: //-------------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	check permissions and variables
comment: //---------------------------------------------------------------------------------------------
comment: //TODO: standard permissions check
comment: //---------------------------------------------------------------------------------------------
comment: //	...
comment: //---------------------------------------------------------------------------------------------
comment: //-----------------------------------------------------------------------------------------
comment: //	instruction is correct and user is authorized
comment: //-----------------------------------------------------------------------------------------
comment: //-----------------------------------------------------------------------------------------
comment: //	something went wrong
comment: //-----------------------------------------------------------------------------------------
string: 'modules/forums/models/thread.mod.php'
string: 'admin'
string: 'teacher'
string: 'action'
string: 'No action specified.'
string: 'action'
string: 'moveThread'
string: 'Unsupported action.'
string: 'forum'
string: 'No forum specified.'
string: 'forums_board'
string: 'forum'
string: 'Forum not found.'
string: 'thread'
string: 'No thread specified.'
string: 'forums_thread'
string: 'thread'
string: 'Thread not found.'
string: 'thread'
string: 'forum'
string: "Thread moved: "
string: 'ok'
string: 'forums/showthread/'
string: "Could not move forum thread: $msg"
string: 'bad'
string: 'forums/'

<b>scanning file: /var/www/an2google/trunk/modules/forums/actions/mergethread.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	merge two forum threads into one
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check POST vars and user role
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	recast orignal thread as reply
comment: //----------------------------------------------------------------------------------------------
comment: //update Users_User set editedOn='2010-10-07 14:57:47' where UID='public';
comment: //----------------------------------------------------------------------------------------------
comment: //	add replies of fromThread to toThread
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	delete fromThread
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	update postcount on toThread
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	redirect to merged thread
comment: //----------------------------------------------------------------------------------------------
string: 'modules/forums/models/board.mod.php'
string: 'modules/forums/models/thread.mod.php'
string: 'modules/forums/models/reply.mod.php'
string: 'admin'
string: 'fromThread'
string: 'fromThread not POSTed'
string: 'toThread'
string: 'toThread not POSTed'
string: 'fromThread'
string: 'No such fromThread.'
string: 'toThread'
string: 'No such toThread.'
string: 'Cannot merge thread with itself.'
string: "&lt;br/&gt;&lt;div class='inlinequote'&gt;Moved by "
string: " on "
string: "&lt;/div&gt;"
string: ''
string: "Converted thread "
string: " ("
string: ") into a reply on "
string: " ("
string: ")"
string: 'ok'
string: "Could not convert thread "
string: " ("
string: ") into a reply on "
string: " ("
string: ")"
string: 'bad'
string: "thread='"
string: "'"
string: 'forums_reply'
string: '*'
string: 'Thread has no replies, none to move.'
string: 'info'
string: 'UID'
string: ''
string: "Moved thread reply "
string: " by [[:users::name::userUID="
string: ":]] to thread "
string: "("
string: ")"
string: 'ok'
string: "Could not move reply "
string: " by [[:users::name::userUID="
string: ":]]"
string: 'bad'
string: 'forums/showthread/'

<b>scanning file: /var/www/an2google/trunk/modules/forums/actions/list.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	list all galleries in root
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	render the page
comment: //----------------------------------------------------------------------------------------------
string: 'forums'
string: 'forums_board'
string: 'show'
string: 'modules/forums/actions/list.page.php'

<b>scanning file: /var/www/an2google/trunk/modules/forums/actions/edit.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	edit a forum
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	load the model
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check permissions (must be site admin or forum moderator)
comment: //----------------------------------------------------------------------------------------------
comment: //$auth = false;
comment: //if ('admin' == $user-&gt;role) { $auth = true; }
comment: //foreach($model-&gt;moderators as $modUID) { if ($modUID == $user-&gt;UID) { $auth = true; } }
comment: // possibly more to come here...
comment: //if ($auth == false) { $page-&gt;do404(); }
comment: //----------------------------------------------------------------------------------------------
comment: //	render the page
comment: //----------------------------------------------------------------------------------------------
string: 'modules/forums/models/board.mod.php'
string: ''
string: 'forums'
string: 'forums_board'
string: 'edit'
string: 'modules/forums/actions/edit.page.php'
string: 'UID'
string: 'raUID'

<b>scanning file: /var/www/an2google/trunk/modules/forums/actions/deletethread.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	delete a forums thread (and all replies)
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check POST vars and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	delete the thread and redirect back to forum
comment: //----------------------------------------------------------------------------------------------  
string: 'modules/forums/models/thread.mod.php'
string: 'action'
string: 'Action not specified.'
string: 'deleteThread'
string: 'action'
string: 'Action not supported.'
string: 'UID'
string: 'Thread not specified (UID).'
string: 'UID'
string: 'Thread not found.'
string: 'forums'
string: 'forums_thread'
string: 'delete'
string: 'You are not permitted to delete this thread.'
string: "Deleted forum thread: "
string: 'ok'
string: 'forums/'

<b>scanning file: /var/www/an2google/trunk/modules/forums/actions/delete.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	delete a Forums_Board object
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check POST vars and permssions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	delete the board
comment: //----------------------------------------------------------------------------------------------
string: 'modules/forums/models/board.mod.php'
string: 'action'
string: 'Action not specified.'
string: 'deleteRecord'
string: 'action'
string: 'Action not supported.'
string: 'UID'
string: 'Board not specified (UID).'
string: 'UID'
string: 'Unknown board.'
string: 'forums'
string: 'forums_board'
string: 'edit'
string: "Deleted forum: "
string: 'ok'
string: 'forums/'

<b>scanning file: /var/www/an2google/trunk/modules/forums/actions/default.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	default action for user galleries module (ie, no action specified in URL)
comment: //--------------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: // no recordAlias/UID given in URL, list all forums
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: // recordAlias/UID given in URL, show a specific forum
comment: //------------------------------------------------------------------------------------------
string: ''
string: 'modules/forums/actions/list.act.php'
string: 'modules/forums/actions/show.act.php'

<b>scanning file: /var/www/an2google/trunk/modules/forums/actions/confirmdeletethread.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	confirm deletion of a forum thread
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check permissions and reference
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the cofirmation form
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	show confirmation form on item to be deleted
comment: //----------------------------------------------------------------------------------------------
string: 'modules/forums/models/thread.mod.php'
string: 'UID'
string: 'UID not given.'
string: 'UID'
string: 'Forum thread not found'
string: 'forums'
string: 'forums_thread'
string: 'delete'
string: 'You are not authorized to delete this forum thread.'
string: 'UID'
string: 'raUID'
string: 'modules/forums/views/confirmdeletethread.block.php'
string: 'warn'
string: 'forums/showthread/'

<b>scanning file: /var/www/an2google/trunk/modules/forums/actions/confirmdelete.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	confirm deletion of a Forums_Board object
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check permissions and reference
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the confirmation form
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	show confirmation for above item to be deleted
comment: //----------------------------------------------------------------------------------------------
string: 'modules/forums/models/board.mod.php'
string: 'UID'
string: 'UID not given.'
string: 'UID'
string: 'No such forum.'
string: 'forums'
string: 'forums_board'
string: 'delete'
string: 'You cannot delete this forum (insufficient privilege).'
string: 'UID'
string: 'raUID'
string: 'modules/forums/views/confirmdelete.block.php'
string: 'warn'
string: 'forums/'

<b>scanning file: /var/www/an2google/trunk/modules/files/views/uploadmultipleform.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	form for uploading multiple files
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: refModule - module to list on [string]
comment: //arg: refUID - UID of item which owns these files [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check args and authorisation
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	add the form
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/files/models/file.mod.php'
string: 'refModule'
string: 'refUID'
string: 'UID'
string: 'refUID'
string: 'refModule'
string: 'files'
string: 'refModule'
string: 'refModule'
string: 'refUID'
string: 'refUID'
string: 'modules/files/views/uploadmultiple.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/files/views/uploadmultiple.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	iframe to upload multiple files
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: refModule - module to list on [string]
comment: //arg: refModel - type of object which will own files [string]
comment: //arg: refUID - UID of object which will own files [string]
comment: //opt: categories - comma delimited list of categories these files can belong to [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	input validation
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the iframe
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/files/models/file.mod.php'
string: 'refModule'
string: '(no module)'
string: 'refModel'
string: '(no model)'
string: 'refUID'
string: '(no UID)'
string: ''
string: 'refModule'
string: 'refModel'
string: 'files-add'
string: 'refUID'
string: ''
string: 'files/uploadmultiple'
string: '/refModule_'
string: 'refModule'
string: '/refModel_'
string: 'refModel'
string: '/refUID_'
string: 'refUID'
string: '/'
string: 'categories'
string: '/cats_'
string: 'categories'
string: "&lt;iframe src='"
string: "' name='filesMul"
string: 'refModule'
string: "'"
string: " width='570' height='200' frameborder='0'&gt;&lt;/iframe&gt;"

<b>scanning file: /var/www/an2google/trunk/modules/files/views/thumb.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	return an file tag for a thumbnail
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - recordAlias or UID of record [string]
comment: //arg: link - link to file page (yes|no) [string]
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/files/models/file.mod.php'
string: 'raUID'
string: 'raUID'
string: ''
string: "&lt;img src='/files/thumb/"
string: "' border='0' /&gt;"
string: 'link'
string: 'link'
string: 'yes'
string: "&lt;a href='/files/show/"
string: "'&gt;$html&lt;/a&gt;"

<b>scanning file: /var/www/an2google/trunk/modules/files/views/tags.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	tags (no args)
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: fileUID - overrides raUID [string]
comment: //arg: raUID - recordAlias or UID [string]
string: 'modules/files/models/file.mod.php'
string: 'fileUID'
string: 'raUID'
string: 'fileUID'
string: 'raUID'
string: ''
string: "&lt;b&gt;Tag:&lt;/b&gt; &amp;#91;&amp;#91;:files::link::fileUID="
string: 'raUID'
string: ":&amp;#93;&amp;#93;&lt;br/&gt;\n"
string: "&lt;b&gt;Tag:&lt;/b&gt; &amp;#91;&amp;#91;:files::dnbox::fileUID="
string: 'raUID'
string: ":&amp;#93;&amp;#93;&lt;br/&gt;\n"
string: "&lt;b&gt;Tag:&lt;/b&gt; &amp;#91;&amp;#91;:files::dnboxnav::fileUID="
string: 'raUID'
string: ":&amp;#93;&amp;#93;&lt;br/&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/files/views/slide.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	return an file tag for a slide (560w)
comment: //--------------------------------------------------------------------------------------------------
comment: // * $args['raUID'] = recordAlias or UID of record
comment: // * $args['link'] = link to file page (yes|no)
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/files/models/files.mod.php'
string: 'raUID'
string: 'raUID'
string: ''
string: "&lt;img src='/files/slide/"
string: "' border='0' /&gt;"
string: 'link'
string: 'link'
string: 'yes'
string: "&lt;a href='/files/show/"
string: "'&gt;$html&lt;/a&gt;"

<b>scanning file: /var/www/an2google/trunk/modules/files/views/showfullnav.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	full-page display of an file + caption, etc (TODO: see if this can be removed)
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - alias or UID of an object [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	add the form
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: permissions check here	
comment: //----------------------------------------------------------------------------------------------
comment: //	find related files
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	mix and settle
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/files/models/file.mod.php'
string: ''
string: 'raUID'
string: ''
string: 'raUID'
string: ''
string: ''
string: "select * from Files_File where refModule='"
string: "' order by refUID='"
string: "' limit 20"
string: 'UID'
string: '%%serverPathfiles/show/'
string: 'alias'
string: '%%serverPath%%files/thumb90/'
string: 'alias'
string: "&lt;a href='"
string: "'&gt;&lt;img src='"
string: "' border='0' alt='"
string: 'title'
string: "' /&gt;&lt;/a&gt;\n"
string: ''
string: '(no files are related to this one)'
string: 'related'
string: 'modules/files/showfullnav.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/files/views/showfull.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	full-page display of an file + caption, etc
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - recordAlias or UID of record [string]
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/files/models/file.mod.php'
string: 'raUID'
string: 'raUID'
string: ''
string: 'modules/files/showfull.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/files/views/listing.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	add a list of files on a modules
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: refModule - module to list on [string]
comment: //arg: refUID - UID of object which owns these files [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check args and authorisation
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	add the form
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/files/models/file.mod.php'
string: 'refModule'
string: 'refUID'
string: 'UID'
string: 'refUID'
string: 'files/listing/refModule_'
string: 'refModule'
string: '/refUID_'
string: 'refUID'
string: '/'
string: "&lt;iframe name='listFiles"
string: 'refUID'
string: "' src='"
string: "' width='570' height='200' frameborder='no' &gt;&lt;/iframe&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/files/views/listall.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	make a list of x files, ordered by date uploaded to system
comment: //--------------------------------------------------------------------------------------------------
comment: //opt: refModule - module to list on [string]
comment: //opt: page - results page [string]
comment: //opt: num - number of files per page [string]
comment: //%	number of items per page [int]
comment: //%	page number, starts at 1 [int]
comment: //%	position in SQL results [int]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	load the files
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/files/models/file.mod.php'
string: ''
string: 'files'
string: 'files_file'
string: 'list'
string: 'num'
string: 'num'
string: 'page'
string: 'page'
string: 'files_file'
string: '*'
string: ''
string: 'createdOn'
string: 'modules/blog/summary.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/files/views/link.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	make a link to a file
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - recordAlias or UID [string]
comment: //opt: fileUID - overrides raUID [string]
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/files/models/file.mod.php'
string: 'fileUID'
string: 'raUID'
string: 'fileUID'
string: 'raUID'
string: 'raUID'
string: "&lt;a href='/files/dn/"
string: "' title='"
string: "'&gt;"
string: "&lt;/a&gt;"

<b>scanning file: /var/www/an2google/trunk/modules/files/views/filesetdetail.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	display a set of files associated with something, along with some metadata
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: refModule - module to list on [string]
comment: //arg: refUID - UID of item which owns these files [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check args and authorisation
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	load the file records and make html
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/files/models/file.mod.php'
string: 'refModule'
string: 'refUID'
string: 'UID'
string: 'refUID'
string: 'refModule'
string: 'files'
string: "select * from files where refModule='"
string: 'refModule'
string: "' and refUID='"
string: 'refUID'
string: "'"
string: ''
string: 'modules/files/listing.block.php'
string: 'editUrl'
string: 'files/edit/return_uploadmultiple/'
string: 'refModule'
string: 'files'
string: ''
string: 'editUrl'
string: 'files/viewset/return_uploadmultiple/'
string: '/files/uploadmultiple/refModule_'
string: '/refUID_'
string: '/'
string: 'deleteForm'
string: "
		&lt;form name='deletefile' method='POST' action='%%serverPath%%files/delete/' &gt;
		&lt;input type='hidden' name='action' value='deletefile' /&gt;
		&lt;input type='hidden' name='UID' value='"
string: "' /&gt;
		&lt;input type='hidden' name='return' value='"
string: "' /&gt;
		&lt;input type='submit' value='delete' /&gt;
		&lt;/form&gt;
		"

<b>scanning file: /var/www/an2google/trunk/modules/files/views/fileset.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	display a set of files associated with something
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: refModule - module to list on [string]
comment: //arg: refUID - number of files per page [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check args and authorisation
comment: //----------------------------------------------------------------------------------------------
comment: //$authArgs = array('UID' =&gt; $args['refUID']);
comment: //if (authHas($args['refModule'], 'files', $authArgs) == false) { return false; }
comment: //TODO: permissions check
comment: //----------------------------------------------------------------------------------------------
comment: //	load the file records and make html
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: $db-&gt;loadRange
comment: //if (authHas($row['refModule'], 'files', '') == false) {
comment: //	$editURL = $serverPath . 'files/viewset/return_uploadmultiple/' . $recordAlias;
comment: //}
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/files/models/file.mod.php'
string: ''
string: 'refModule'
string: 'refUID'
string: "select * from Files_File where refModule='"
string: 'refModule'
string: "' and refUID='"
string: 'refUID'
string: "'"
string: 'files/thumb/'
string: 'alias'
string: 'files/edit/return_uploadmultiple/'
string: 'alias'
string: "&lt;a href='"
string: "'&gt;"
string: "&lt;img src='"
string: "' border='0' /&gt;&lt;/a&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/files/views/editform.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	form for editing file metadata
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - recordAlias or UID of record [string]
comment: //opt: return - return to upload dialog [string]
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/files/models/file.mod.php'
string: ''
string: 'raUID'
string: 'return'
string: 'return'
string: 'raUID'
string: ''
string: '(file not found)'
string: 'return'
string: 'returnLink'
string: ''
string: 'uploadmultiple'
string: 'returnUrl'
string: '/files/uploadmultiple/refModule_'
string: 'refModule'
string: '/refUID_'
string: 'refUID'
string: '/'
string: 'returnLink'
string: "&lt;a href='"
string: 'returnUrl'
string: "'&gt;[&amp;lt;&amp;lt; return to upload form ]&lt;/a&gt;"
string: 'modules/files/views/editform.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/files/views/downloadmultipleform.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	form for downloading multiple files
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: refModule - module to list on [string]
comment: //arg: refUID - number of files per page [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check args and authorisation
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	add the form
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/files/models/file.mod.php'
string: 'refModule'
string: 'refUID'
string: 'UID'
string: 'refUID'
string: 'refModule'
string: 'files'
string: 'refModule'
string: 'refModule'
string: 'refUID'
string: 'refUID'
string: 'modules/files/views/downloadmultiple.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/files/views/dnboxnav.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	make file info/download box no more than 300px wide
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - recordAlias or UID [string]
comment: //opt: fileUID - overrides raUID [string]
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/files/models/file.mod.php'
string: 'fileUID'
string: 'raUID'
string: 'fileUID'
string: 'raUID'
string: 'raUID'
string: 'modules/files/views/dnboxnav.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/files/views/dnbox.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	make file info/download box
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - recordAlias or UID [string]
comment: //opt: fileUID - overrides raUID [string]
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/files/models/file.mod.php'
string: 'fileUID'
string: 'raUID'
string: 'fileUID'
string: 'raUID'
string: 'raUID'
string: 'modules/files/views/dnbox.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/files/models/folder.mod.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	object for user folders
comment: //--------------------------------------------------------------------------------------------------
comment: //+	Folders can nest, parent may be 'root' or the UID of another folder, users can manage their 
comment: //+	own folders, admins can change any folder.  Description field is currently unused, same as 
comment: //+	galleries.
comment: //+	
comment: //+	children and files fields contain simple serialized arrays of precached queries.  children
comment: //+	array does not contain these two fields.
comment: //+
comment: //+	Might add: thumbnails, as opposed to generic icons for file types
comment: //----------------------------------------------------------------------------------------------
comment: //	member variables (as retieved from database)
comment: //----------------------------------------------------------------------------------------------
comment: //_	currently loaded database record [array]
comment: //_	database table definition [array]
comment: //_	set to true when an object has been loaded [bool]
comment: //_ UID [string]
comment: //_ varchar(33) [string]
comment: //_ title [string]
comment: //_ plaintext [string]
comment: //_ datetime [string]
comment: //_ ref:Users_User [string]
comment: //_ datetime [string]
comment: //_ ref:Users_User [string]
comment: //_ alias [string]
comment: //----------------------------------------------------------------------------------------------
comment: //. constructor
comment: //----------------------------------------------------------------------------------------------
comment: //opt: raUID - UID or alias of a Folder object [string]
comment: // initialise table schema
comment: // try load an object from the database
comment: // check if we did
comment: // make new object
comment: // initialize
comment: // set default title
comment: //----------------------------------------------------------------------------------------------
comment: //. load an object from the database given its UID or an alias
comment: //----------------------------------------------------------------------------------------------
comment: //arg: raUID - UID or alias of a Folder object [string]
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //. load Folder object serialized as an associative array
comment: //----------------------------------------------------------------------------------------------
comment: //arg: ary - associative array of members and values [array]
comment: //returns: true on success, false on failure [bool]
comment: //TODO: serialize and userialize children, files?
comment: //----------------------------------------------------------------------------------------------
comment: //. save the current object to database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string on success, html report of errors on failure [string]
comment: //: $db-&gt;save(...) will raise an object_updated event if successful
comment: //----------------------------------------------------------------------------------------------
comment: //. check that object is correct before allowing it to be stored in database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string if object passes, warning message if not [string]
comment: //----------------------------------------------------------------------------------------------
comment: //. database table definition and content versioning
comment: //----------------------------------------------------------------------------------------------
comment: //returns: information for constructing SQL queries [array]
comment: //table columns
comment: //these fields will be indexed
comment: //revision history will be kept for these fields
comment: //----------------------------------------------------------------------------------------------
comment: //. serialize this object to an array
comment: //----------------------------------------------------------------------------------------------
comment: //returns: associative array of all members which define this instance [array]
comment: //----------------------------------------------------------------------------------------------
comment: //.	make an extended array of all data a view will need
comment: //----------------------------------------------------------------------------------------------
comment: //returns: extended array of member variables and metadata [array]
comment: //------------------------------------------------------------------------------------------
comment: //	check authorisation
comment: //------------------------------------------------------------------------------------------
comment: //TODO: full permission set
comment: //------------------------------------------------------------------------------------------
comment: //	links
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	strandardise date format to previous website
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	redundant - namespace issue
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	summary
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	format for WYSWYG editor
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	look up user
comment: //------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //. delete current object from the database
comment: //----------------------------------------------------------------------------------------------
comment: //: $db-&gt;delete(...) will raise an object_deleted event on success [bool]
comment: //returns: true on success, false on failure [bool]
comment: // nothing to do
comment: //----------------------------------------------------------------------------------------------
comment: //.	update array of children
comment: //----------------------------------------------------------------------------------------------
comment: // TODO: use XML?
comment: // remove list of subfolders
comment: // but retain count
comment: // TODO: use XML?
comment: // remove list of files
comment: // but retain count
comment: //----------------------------------------------------------------------------------------------
comment: //.	update array of files
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //.	update parent (for when this record changes name, description)
comment: //----------------------------------------------------------------------------------------------
comment: //returns: true on success, false on failure [bool]
string: ''
string: ''
string: 'New Folder '
string: 'UID'
string: 'parent'
string: 'title'
string: 'children'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: 'alias'
string: ''
string: 'files'
string: 'files_folder'
string: "Database error.&lt;br/&gt;\n"
string: ''
string: ''
string: ''
string: "No UID.&lt;br/&gt;\n"
string: 'module'
string: 'files'
string: 'model'
string: 'files_folder'
string: 'fields'
string: 'UID'
string: 'VARCHAR(33)'
string: 'parent'
string: 'TEXT'
string: 'title'
string: 'VARCHAR(255)'
string: 'children'
string: 'VARCHAR(255)'
string: 'createdOn'
string: 'DATETIME'
string: 'createdBy'
string: 'VARCHAR(33)'
string: 'editedOn'
string: 'DATETIME'
string: 'editedBy'
string: 'VARCHAR(33)'
string: 'alias'
string: 'VARCHAR(255)'
string: 'indices'
string: 'UID'
string: '10'
string: 'parent'
string: '10'
string: 'createdOn'
string: ''
string: 'createdBy'
string: '10'
string: 'editedOn'
string: ''
string: 'editedBy'
string: '10'
string: 'alias'
string: '10'
string: 'nodiff'
string: 'UID'
string: 'parent'
string: 'title'
string: 'children'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: 'alias'
string: 'editUrl'
string: ''
string: 'editLink'
string: ''
string: 'viewUrl'
string: ''
string: 'viewLink'
string: ''
string: 'newUrl'
string: ''
string: 'newLink'
string: ''
string: 'addChildUrl'
string: ''
string: 'addChildLink'
string: ''
string: 'delUrl'
string: ''
string: 'delLink'
string: ''
string: 'admin'
string: 'createdBy'
string: 'files'
string: 'files_folder'
string: 'show'
string: 'viewUrl'
string: '%%serverPath%%folders/'
string: 'alias'
string: 'viewLink'
string: "&lt;a href='"
string: 'viewUrl'
string: "'&gt;[read on &amp;gt;&amp;gt;]&lt;/a&gt;"
string: 'editUrl'
string: '%%serverPath%%folders/edit/'
string: 'alias'
string: 'editLink'
string: "&lt;a href='"
string: 'editUrl'
string: "'&gt;[edit]&lt;/a&gt;"
string: 'newUrl'
string: "%%serverPath%%folders/new/"
string: 'newLink'
string: "&lt;a href='"
string: 'newUrl'
string: "'&gt;[create new folder]&lt;/a&gt;"
string: 'addChildUrl'
string: "%%serverPath%%folders/addchild/"
string: 'alias'
string: 'addChildLink'
string: "&lt;a href='"
string: 'addChildUrl'
string: "'&gt;[add child folder]&lt;/a&gt;"
string: 'delUrl'
string: "%%serverPath%%folders/confirmdelete/UID_"
string: 'UID'
string: '/'
string: 'delLink'
string: "&lt;a href='"
string: 'delUrl'
string: "'&gt;[delete folder]&lt;/a&gt;"
string: 'longdate'
string: 'jS F, Y'
string: 'date'
string: 'titleUpper'
string: 'title'
string: 'folderTitle'
string: 'title'
string: 'summary'
string: 'description'
string: 'summary'
string: 'summary'
string: '...'
string: 'descriptionJs'
string: 'description'
string: 'descriptionJs'
string: "'"
string: '--squote--'
string: 'descriptionJs'
string: 'descriptionJs'
string: "'"
string: '--dquote--'
string: 'descriptionJs'
string: 'summary'
string: 'description'
string: '...'
string: 'createdBy'
string: 'userName'
string: ' '
string: 'userRa'
string: 'userUrl'
string: '%%serverPath%%users/profile/'
string: 'userRa'
string: 'userLink'
string: "&lt;a href='"
string: 'userUrl'
string: "'&gt;"
string: 'userRa'
string: "&lt;/a&gt;"
string: "select * from Files_Folder where parent='"
string: "' order by title"
string: 'children'
string: 'children'
string: ''
string: 'childrenCount'
string: 'files'
string: 'files'
string: ''
string: 'fileCount'
string: 'UID'
string: "select * from Files_File "
string: "where refModule='files' and refUID='"
string: "' "
string: "order by title"
string: 'UID'
string: 'root'

<b>scanning file: /var/www/an2google/trunk/modules/files/models/file.mod.php</b>
comment: //--------------------------------------------------------------------------------------------------------------
comment: //*	object for managing user files
comment: //--------------------------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------------------
comment: //	member variables (as retieved from database)
comment: //------------------------------------------------------------------------------------------------------
comment: //_	currently loaded database record [array]
comment: //_	database table definition [array]
comment: //_	set to true when an object has been loaded [bool]
comment: //_ UID [string]
comment: //_ module [string]
comment: //_ model [string]
comment: //_ ref:*-* [string]
comment: //_ title [string]
comment: //_ varchar(100) [string]
comment: //_ varchar(255) [string]
comment: //_ varchar(255) [string]
comment: //_ varchar(255) [string]
comment: //_ varchar(255) [string]
comment: //_ plaintext [string]
comment: //_ plaintext [string]
comment: //_ int [string]
comment: //_ datetime [string]
comment: //_ ref:Users_User [string]
comment: //_ datetime [string]
comment: //_ ref:Users_User [string]
comment: //_ alias [string]
comment: //----------------------------------------------------------------------------------------------
comment: //. constructor
comment: //----------------------------------------------------------------------------------------------
comment: //opt: raUID - UID or alias of a File object [string]
comment: // initialise table schema
comment: // try load an object from the database
comment: // check if we did
comment: // make new object
comment: // initialize
comment: //----------------------------------------------------------------------------------------------
comment: //. load an object from the database given its UID or an alias
comment: //----------------------------------------------------------------------------------------------
comment: //arg: raUID - UID or alias of a File object [string]
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //. load File object serialized as an associative array
comment: //----------------------------------------------------------------------------------------------
comment: //arg: ary - associative array of members and values [array]
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //. save the current object to database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string on success, html report of errors on failure [string]
comment: //: $db-&gt;save(...) will raise an object_updated event if successful
comment: //----------------------------------------------------------------------------------------------
comment: //. check that object is correct before allowing it to be stored in database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string if object passes, warning message if not [string]
comment: //----------------------------------------------------------------------------------------------
comment: //. database table definition and content versioning
comment: //----------------------------------------------------------------------------------------------
comment: //returns: information for constructing SQL queries [array]
comment: //table columns
comment: //these fields will be indexed
comment: //revision history will be kept for these fields
comment: //----------------------------------------------------------------------------------------------
comment: //. serialize this object to an array
comment: //----------------------------------------------------------------------------------------------
comment: //returns: associative array of all members which define this instance [array]
comment: //----------------------------------------------------------------------------------------------
comment: //.	make an extended array of all data a view will need
comment: //----------------------------------------------------------------------------------------------
comment: //returns: extended array of member variables and metadata [array]
comment: //----------------------------------------------------------------------------------------------
comment: //	links
comment: //----------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------------------
comment: //.	expand transforms
comment: //------------------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------------------
comment: //.	check if a given transform exists
comment: //------------------------------------------------------------------------------------------------------
comment: //arg: transName - transform name [string]
comment: //returns: location of transform if it exists, false if it does not [string][bool]
comment: //------------------------------------------------------------------------------------------------------
comment: //.	find a single file on a given record and module
comment: //------------------------------------------------------------------------------------------------------
comment: //arg: refModule - a kapenta module [string]
comment: //arg: refMmodel - a model name [string]
comment: //arg: refUID - UID of object which owns the file [string]
comment: //returns: file record in array form, or false if not found [array][false]
comment: //TODO: discover if this is used by anything, remove if not
comment: // $sql = "select * from Files_File where refModule='" . $db-&gt;addMarkup($refModule) 
comment: //    . "' and refUID='" . $db-&gt;addMarkup($refUID) . "' "
comment: //	  . " and category = '" . $db-&gt;addMarkup($category). "'";
comment: //------------------------------------------------------------------------------------------------------
comment: //.	save a file to disk and record the filename in $this-&gt;fileName
comment: //------------------------------------------------------------------------------------------------------
comment: //arg: str - file contents [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	ensure directory exists
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	save the file
comment: //----------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------------------
comment: //.	delete current file and all transforms
comment: //------------------------------------------------------------------------------------------------------
comment: //-----------------------------------------------------------------------------------------
comment: //	delete file from /data/ and any transforms
comment: //-----------------------------------------------------------------------------------------
comment: //TODO: $kapenta should do this
comment: //-----------------------------------------------------------------------------------------
comment: //	delete the record
comment: //-----------------------------------------------------------------------------------------		
comment: // nothing to do
string: ''
string: ''
string: 'UID'
string: 'refModule'
string: 'refModel'
string: 'refUID'
string: 'title'
string: 'licence'
string: 'attribName'
string: 'attribUrl'
string: 'fileName'
string: 'format'
string: 'transforms'
string: 'caption'
string: 'weight'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: 'alias'
string: ''
string: 'files'
string: 'files_file'
string: "Database error.&lt;br/&gt;\n"
string: ''
string: ''
string: ''
string: "No UID.&lt;br/&gt;\n"
string: 'module'
string: 'files'
string: 'model'
string: 'files_file'
string: 'fields'
string: 'UID'
string: 'VARCHAR(33)'
string: 'refModule'
string: 'VARCHAR(50)'
string: 'refModel'
string: 'VARCHAR(50)'
string: 'refUID'
string: 'VARCHAR(33)'
string: 'title'
string: 'VARCHAR(255)'
string: 'licence'
string: 'VARCHAR(100)'
string: 'attribName'
string: 'VARCHAR(255)'
string: 'attribUrl'
string: 'VARCHAR(255)'
string: 'fileName'
string: 'VARCHAR(255)'
string: 'format'
string: 'VARCHAR(255)'
string: 'transforms'
string: 'TEXT'
string: 'caption'
string: 'TEXT'
string: 'weight'
string: 'TEXT'
string: 'createdOn'
string: 'DATETIME'
string: 'createdBy'
string: 'VARCHAR(33)'
string: 'editedOn'
string: 'DATETIME'
string: 'editedBy'
string: 'VARCHAR(33)'
string: 'alias'
string: 'VARCHAR(255)'
string: 'indices'
string: 'UID'
string: '10'
string: 'refModule'
string: '10'
string: 'refModel'
string: '10'
string: 'refUID'
string: '10'
string: 'createdOn'
string: ''
string: 'createdBy'
string: '10'
string: 'editedOn'
string: ''
string: 'editedBy'
string: '10'
string: 'alias'
string: '10'
string: 'nodiff'
string: 'UID'
string: 'refModule'
string: 'refModel'
string: 'refUID'
string: 'title'
string: 'licence'
string: 'attribName'
string: 'attribUrl'
string: 'fileName'
string: 'format'
string: 'transforms'
string: 'caption'
string: 'weight'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: 'alias'
string: 'editUrl'
string: ''
string: 'editLink'
string: ''
string: 'viewUrl'
string: ''
string: 'viewLink'
string: ''
string: 'dnUrl'
string: ''
string: 'dnLink'
string: ''
string: 'delUrl'
string: ''
string: 'delLink'
string: ''
string: 'files'
string: 'files_file'
string: 'view'
string: 'viewUrl'
string: '%%serverPath%%files/'
string: 'viewLink'
string: "&lt;a href='"
string: 'viewUrl'
string: "'&gt;[read on &amp;gt;&amp;gt;]&lt;/a&gt;"
string: 'files'
string: 'files_file'
string: 'edit'
string: 'editUrl'
string: '%%serverPath%%files/edit/'
string: 'editLink'
string: "&lt;a href='"
string: 'editUrl'
string: "'&gt;[edit]&lt;/a&gt;"
string: 'files'
string: 'files_file'
string: 'delete'
string: 'delUrl'
string: '%%serverPath%%files/delete/rmfile_'
string: '/'
string: 'delLink'
string: "&lt;a href='"
string: 'delUrl'
string: "'&gt;[delete]&lt;/a&gt;"
string: 'dnUrl'
string: "%%serverPath%%files/dn/"
string: 'dnLink'
string: "&lt;a href='"
string: 'dnUrl'
string: "'&gt;[download]&lt;/a&gt;"
string: 'thumbUrl'
string: '/themes/clockface/images/arrow_down.jpg'
string: "\n"
string: '|'
string: "refModule='"
string: "'"
string: "refUID='"
string: "'"
string: 'files_file'
string: '*'
string: 'UID'
string: 'UID'
string: 'data/files/'
string: '/'
string: '/'
string: '/'
string: '.xxx'
string: 'w+'
string: ''
string: 'xxx'
string: ''

<b>scanning file: /var/www/an2google/trunk/modules/files/inc/install.inc.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	install script for Files module
comment: //--------------------------------------------------------------------------------------------------
comment: //+	reports are human-readable HTML, with script-readable HTML comments
comment: //--------------------------------------------------------------------------------------------------
comment: //|	install the Files module
comment: //--------------------------------------------------------------------------------------------------
comment: //returns: html report or false if not authorized [string][bool]
comment: //----------------------------------------------------------------------------------------------
comment: //	create or upgrade Files_File table
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	copy all records from previous table
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	create or upgrade Files_Folder table
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	copy all records from previous table
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	done
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
comment: //|	discover if this module is installed
comment: //--------------------------------------------------------------------------------------------------
comment: //:	if installed correctly report will contain HTML comment &lt;!-- installed correctly --&gt;
comment: //returns: HTML installation status report [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	ensure the table which stores File objects exists and is correct
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	ensure the table which stores Folder objects exists and is correct
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	done
comment: //----------------------------------------------------------------------------------------------
string: 'core/dbdriver/mysqladmin.dbd.php'
string: 'modules/files/models/file.mod.php'
string: 'modules/files/models/folder.mod.php'
string: 'admin'
string: ''
string: 'recordAlias'
string: 'alias'
string: 'files'
string: "&lt;b&gt;moved $count records from 'files' table.&lt;/b&gt;&lt;br/&gt;"
string: 'recordAlias'
string: 'alias'
string: 'folders'
string: "&lt;b&gt;moved $count records from 'folders' table.&lt;/b&gt;&lt;br/&gt;"
string: 'admin'
string: ''
string: '&lt;!-- table installed correctly --&gt;'
string: '&lt;!-- module installed correctly --&gt;'

<b>scanning file: /var/www/an2google/trunk/modules/files/inc/callbacks.inc.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	callbacks allow modules to interact with being necessarily dependant on one another
comment: //--------------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
comment: //	when a record is deleted on another module
comment: //--------------------------------------------------------------------------------------------------
comment: // * args['module']  = table the record belonged to
comment: // * args['UID'] = UID of the record which was deleted
comment: //----------------------------------------------------------------------------------------------
comment: //	discover if any announcements belonging this record and delete them
comment: //----------------------------------------------------------------------------------------------
string: 'modules/files/models/files.mod.php'
string: 'module'
string: 'UID'
string: "select UID from files "
string: "where refUID='"
string: 'UID'
string: "' "
string: "and refModule='"
string: 'module'
string: "'"
string: 'UID'
string: 'sMessage'
string: "Deleted file "
string: "&lt;br/&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/files/events/object_deleted.on.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //	fired when a record is deleted
comment: //-------------------------------------------------------------------------------------------------
comment: //arg: module - module which owned the deleted record
comment: //arg: model - type of object which owned the deleted record
comment: //arg: UID - UID of deleted record
comment: //if (false == array_key_exists('model', $args)) { return false; }
comment: //----------------------------------------------------------------------------------------------
comment: //	delete any comments owned by this record
comment: //----------------------------------------------------------------------------------------------
comment: //-------------------------------------------------------------------------------------------------
string: 'modules/files/models/file.mod.php'
string: 'module'
string: 'UID'
string: "refUID='"
string: 'UID'
string: "'"
string: "refModule='"
string: 'module'
string: "'"
string: 'files_file'
string: '*'
string: ''
string: ''
string: ''

<b>scanning file: /var/www/an2google/trunk/modules/files/actions/uploadmultiple.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	iframe to upload multiple files
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	render the (iframe) page
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: further permissions here
comment: //------------------------------------------------------------------------------------------
comment: //	not authorised to edit files, just display
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	authorised to edit files, show upload form
comment: //------------------------------------------------------------------------------------------
string: 'refModule'
string: '(no module)'
string: 'refModel'
string: '(no model)'
string: 'refUID'
string: '(no UID)'
string: 'refModule'
string: 'refModel'
string: 'refUID'
string: 'files-edit'
string: 'modules/files/actions/fileset.if.page.php'
string: 'refModule'
string: 'refUID'
string: 'modules/files/actions/uploadmultiple.if.page.php'
string: 'refModule'
string: 'refUID'

<b>scanning file: /var/www/an2google/trunk/modules/files/actions/upload.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	page for accepting upload of files and associating them with records
comment: //--------------------------------------------------------------------------------------------------
comment: //TODO: improve and document this
comment: //----------------------------------------------------------------------------------------------
comment: //	control variables
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check POST vars
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	security and validation
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	get the upload
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	get file name
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	create file record and save file
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	redirect back 
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: more security checks here
string: 'modules/files/models/file.mod.php'
string: ''
string: ''
string: ''
string: ''
string: ''
string: ''
string: ''
string: ''
string: ''
string: 'refModule'
string: 'refModule'
string: 'refModel'
string: 'refModel'
string: 'refUID'
string: 'refUID'
string: 'return'
string: 'return'
string: ''
string: ''
string: "(missing arguments to file download)"
string: ''
string: 'files'
string: "(not authorised)"
string: ''
string: 'userfile'
string: 'userfile'
string: 'tmp_name'
string: 'userfile'
string: 'name'
string: ''
string: '(no file uploaded)'
string: '(no file uploaded)'
string: ''
string: ''
string: '.xxx'
string: ''
string: 'unknown'
string: '0'
string: "Uploaded file: $srcName &lt;br/&gt;\n"
string: 'uploadmultiple'
string: 'files/uploadmultiple'
string: '/refModule_'
string: '/refModel_'
string: '/refUID_'
string: '/'

<b>scanning file: /var/www/an2google/trunk/modules/files/actions/showall.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	display all files in the database ordered by date added to the system
comment: //--------------------------------------------------------------------------------------------------
string: 'files'
string: 'list'
string: ''
string: 'modules/files/actions/showall.page.php'
string: 'page,refMod'

<b>scanning file: /var/www/an2google/trunk/modules/files/actions/show.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	page to display a single file
comment: //--------------------------------------------------------------------------------------------------
string: ''
string: 'modules/files/actions/show.page.php'
string: 'raUID'

<b>scanning file: /var/www/an2google/trunk/modules/files/actions/save.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	save changes to a Files_File object
comment: //--------------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	check reference and authorisation
comment: //------------------------------------------------------------------------------------------
comment: //TODO: more permission options here
comment: //------------------------------------------------------------------------------------------
comment: //	make the changes
comment: //------------------------------------------------------------------------------------------
comment: //TODO: more checking/cleanign here *security risk
comment: //------------------------------------------------------------------------------------------
comment: //	redirect back
comment: //------------------------------------------------------------------------------------------
string: 'modules/files/models/file.mod.php'
string: 'action'
string: 'savefile'
string: 'action'
string: 'UID'
string: 'UID'
string: 'files-edit'
string: ''
string: 'title'
string: 'caption'
string: 'licence'
string: 'attribName'
string: 'attribURL'
string: ''
string: 'Changes could not be saved:&lt;br/&gt;'
string: 'bad'
string: 'return'
string: 'uploadmultiple'
string: 'return'
string: 'files/uploadmultiple'
string: '/refModule_'
string: '/refModel_'
string: '/refUID_'
string: '/'
string: 'files/edit/'

<b>scanning file: /var/www/an2google/trunk/modules/files/actions/listing.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	make a file listing
comment: //--------------------------------------------------------------------------------------------------
comment: //TODO: fix this up
comment: //------------------------------------------------------------------------------------------
comment: //	load all files associated with this record
comment: //------------------------------------------------------------------------------------------
comment: //TODO: $db-&gt;loadRange
comment: //------------------------------------------------------------------------------------------
comment: //	make list of files
comment: //------------------------------------------------------------------------------------------
string: 'refmodule'
string: 'refuid'
string: "select * from Files_File where refModule='"
string: 'refmodule'
string: "' and refUID='"
string: 'refuid'
string: "' order by weight"
string: ''
string: 'UID'
string: 'UID'
string: 'UID'
string: 'index'
string: ''
string: 'thumbUrl'
string: '/themes/clockface/images/arrow_down.jpg'
string: 'dnUrl'
string: '/files/dn/'
string: 'title'
string: 'modules/files/listing.block.php'
string: 'modules/files/listing.page.php'

<b>scanning file: /var/www/an2google/trunk/modules/files/actions/edit.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	edit a Files_File object
comment: //--------------------------------------------------------------------------------------------------
comment: //	needs the file's UID/recordAlias and optionally /return_uploadmultiple
comment: //----------------------------------------------------------------------------------------------
comment: //	check page arguments and authorisation
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	load the page :-)
comment: //----------------------------------------------------------------------------------------------
string: 'modules/files/models/file.mod.php'
string: ''
string: 'File not specified (UID).'
string: 'File not found.'
string: 'files-add'
string: ''
string: 'return'
string: 'return'
string: 'modules/files/actions/edit.if.page.php'
string: 'raUID'
string: 'return'

<b>scanning file: /var/www/an2google/trunk/modules/files/actions/download.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	page for downloading files and associating them with records
comment: //--------------------------------------------------------------------------------------------------
comment: //TODO: improve and document this
comment: //----------------------------------------------------------------------------------------------
comment: //	control variables
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check POST vars
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	security and validation
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	download the file
comment: //----------------------------------------------------------------------------------------------
comment: //echo "downloading URL: $URL &lt;br/&gt;\n"; flush();
comment: //----------------------------------------------------------------------------------------------
comment: //	get file name
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	create file record and save file
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	redirect back 
comment: //----------------------------------------------------------------------------------------------
comment: //echo "message: " . $msg . "&lt;br/&gt;\n";
string: 'modules/files/models/file.mod.php'
string: ''
string: ''
string: ''
string: ''
string: ''
string: ''
string: ''
string: ''
string: 'refModule'
string: 'refModule'
string: 'refModel'
string: 'refModel'
string: 'refUID'
string: 'refUID'
string: 'return'
string: 'return'
string: 'URL'
string: 'URL'
string: ''
string: ''
string: ''
string: "(missing arguments to file download)"
string: ''
string: 'files-add'
string: "(not authorised)"
string: ''
string: "file could not be downloaded, check the URL?"
string: ''
string: ''
string: '.xxx'
string: ''
string: "saving record&lt;br/&gt;\n"
string: 'unknown'
string: '0'
string: "Downloaded file: $URL &lt;br/&gt;\n"
string: 'uploadmultiple'
string: 'files/uploadmultiple'
string: '/refModule_'
string: '/refModel_'
string: '/refUID_'
string: '/'

<b>scanning file: /var/www/an2google/trunk/modules/files/actions/dn.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	load a file and return to browser as a download
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	load the file record
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	return the file
comment: //----------------------------------------------------------------------------------------------
string: 'modules/files/models/file.mod.php'
string: ''
string: 'files_file'
string: ''
string: "Content-type: application/force-download"
string: 'Content-Disposition: inline; filename="'
string: '"'
string: "Content-Transfer-Encoding: Binary"
string: "Content-length: "
string: 'Content-Type: application/octet-stream'
string: 'Content-Disposition: attachment; filename="'
string: '"'

<b>scanning file: /var/www/an2google/trunk/modules/files/actions/delete.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	delete a Files_File object
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	delete file passed in GET request as argument
comment: //----------------------------------------------------------------------------------------------
comment: // dangerous, consider replacing this with something else
comment: //----------------------------------------------------------------------------------------------
comment: //	delete file passed in POST request as form var
comment: //----------------------------------------------------------------------------------------------
comment: // TODO: 302 back to wherever the request came from, user may not have permission
comment: // to view files and could be redirected to a 403.  Confusing.
string: 'modules/files/models/file.mod.php'
string: 'rmfile'
string: 'rmfile'
string: 'File not found.'
string: 'files-delete'
string: 'files'
string: 'files_file'
string: 'deleteall'
string: 'HTTP_REFERER'
string: ''
string: 'HTTP_REFERER'
string: '/files/'
string: 'UID'
string: 'UID'
string: 'files-delete'
string: 'files'
string: 'files_file'
string: 'deleteall'
string: 'return'
string: 'return'
string: '/files/'

<b>scanning file: /var/www/an2google/trunk/modules/files/actions/default.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	display an file, or the entire gallery of all files
comment: //--------------------------------------------------------------------------------------------------
string: ''
string: 'modules/files/actions/showall.act.php'
string: 'modules/files/actions/show.act.php'

<b>scanning file: /var/www/an2google/trunk/modules/files/TODO/folders/models/folder.mod.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	object for user folders
comment: //--------------------------------------------------------------------------------------------------
comment: //+	Folders can nest, parent may be 'root' or the UID of another folder, users can manage their 
comment: //+	own folders, admins can change any folder.  Description field is currently unused, same as 
comment: //+	galleries.
comment: //+	
comment: //+	children and files fields contain simple serialized arrays of precached queries.  children
comment: //+	array does not contain these two fields.
comment: //+
comment: //+	Might add: thumbnails, as opposed to generic icons for file types
comment: //----------------------------------------------------------------------------------------------
comment: //	member variables (as retieved from database)
comment: //----------------------------------------------------------------------------------------------
comment: // currently loaded record
comment: // subfolders (array of)
comment: // from files table (array of)
comment: // database table structure
comment: //----------------------------------------------------------------------------------------------
comment: //.	constructor
comment: //----------------------------------------------------------------------------------------------
comment: //opt: raUID - UID or recordAlias of a folder [string]
comment: //----------------------------------------------------------------------------------------------
comment: //.	load a record by UID or recordAlias
comment: //----------------------------------------------------------------------------------------------
comment: //arg: raUID - UID or recordAlias of a folder record [string]
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //.	load a record provided as an associative array
comment: //----------------------------------------------------------------------------------------------
comment: //arg: ary - associative array of fields and values [array]
comment: //----------------------------------------------------------------------------------------------
comment: //.	save a record
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //.	verify - check that a record is correct before allowing it to be stored in the database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string if object passes, warning message if not [string]
comment: // strip out all chars except for A-Z, a-z, 0-9, -, _ and space
comment: // in /core/utils.inc.php
comment: // checks
comment: //----------------------------------------------------------------------------------------------
comment: //.	sql information
comment: //----------------------------------------------------------------------------------------------
comment: //returns: database table layout [array]
comment: //----------------------------------------------------------------------------------------------
comment: //.	serialize this object to an array
comment: //----------------------------------------------------------------------------------------------
comment: //returns: associative array of all variables which define this instance [array]
comment: //----------------------------------------------------------------------------------------------
comment: //.	make an extended array of all data a view will need
comment: //----------------------------------------------------------------------------------------------
comment: //returns: extended array of member variables and metadata [array]
comment: //------------------------------------------------------------------------------------------
comment: //	check authorisation
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	links
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	strandardise date format to previous website
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	redundant - namespace issue
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	format for WYSWYG editor
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	look up user
comment: //------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //.	install this module
comment: //----------------------------------------------------------------------------------------------
comment: //returns: html report lines [string]
comment: //, deprecated, this should be handled by ../inc/install.inc.inc.php
comment: //------------------------------------------------------------------------------------------
comment: //	create folder table if it does not exist
comment: //------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //.	delete a record
comment: //----------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	delete subfolders
comment: //------------------------------------------------------------------------------------------
comment: /*
		foreach($this-&gt;children as $UID =&gt; $ary) {
			$model = new Folder($ary['UID']);
			$model-&gt;delete();
		}
		*/
comment: //TODO: event handler should take care of this
comment: //------------------------------------------------------------------------------------------
comment: //	delete files
comment: //------------------------------------------------------------------------------------------
comment: /*
		foreach($this-&gt;files as $UID =&gt; $ary) {
			$model = new Files($ary['UID']);
			$model-&gt;delete();
		}
		*/
comment: //TODO: event handler should take care of this
comment: //------------------------------------------------------------------------------------------
comment: //	delete this record and its recordAlias
comment: //------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //.	update array of children
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: $db-&gt;loadRange
comment: // TODO: use XML?
comment: // remove list of subfolders
comment: // but retain count
comment: // TODO: use XML?
comment: // remove list of files
comment: // but retain count
comment: //----------------------------------------------------------------------------------------------
comment: //.	update array of files
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //.	update parent (for when this record changes name, description)
comment: //----------------------------------------------------------------------------------------------
comment: //returns: true on success, false on failure [bool]
string: ''
string: 'root'
string: 'New folder '
string: ''
string: ''
string: ''
string: 'children'
string: 'files'
string: ''
string: 'folder'
string: 'folder'
string: ''
string: ' '
string: '--space--'
string: '--space--'
string: ' '
string: "UID not present.\n"
string: ''
string: "folder must have a name.\n"
string: 'model'
string: 'folders'
string: 'fields'
string: 'UID'
string: 'VARCHAR(30)'
string: 'parent'
string: 'VARCHAR(30)'
string: 'title'
string: 'VARCHAR(255)'
string: 'description'
string: 'TEXT'
string: 'createdBy'
string: 'VARCHAR(30)'
string: 'createdOn'
string: 'DATETIME'
string: 'alias'
string: 'VARCHAR(255)'
string: 'indices'
string: 'UID'
string: '10'
string: 'parent'
string: 'createdBy'
string: '10'
string: 'alias'
string: '20'
string: 'nodiff'
string: 'UID'
string: 'alias'
string: 'children'
string: 'files'
string: 'editUrl'
string: ''
string: 'editLink'
string: ''
string: 'viewUrl'
string: ''
string: 'viewLink'
string: ''
string: 'newUrl'
string: ''
string: 'newLink'
string: ''
string: 'addChildUrl'
string: ''
string: 'addChildLink'
string: ''
string: 'delUrl'
string: ''
string: 'delLink'
string: ''
string: 'admin'
string: 'createdBy'
string: 'files'
string: 'files_folder'
string: 'show'
string: 'viewUrl'
string: '%%serverPath%%folders/'
string: 'alias'
string: 'viewLink'
string: "&lt;a href='"
string: 'viewUrl'
string: "'&gt;[read on &amp;gt;&amp;gt;]&lt;/a&gt;"
string: 'editUrl'
string: '%%serverPath%%folders/edit/'
string: 'alias'
string: 'editLink'
string: "&lt;a href='"
string: 'editUrl'
string: "'&gt;[edit]&lt;/a&gt;"
string: 'newUrl'
string: "%%serverPath%%folders/new/"
string: 'newLink'
string: "&lt;a href='"
string: 'newUrl'
string: "'&gt;[create new folder]&lt;/a&gt;"
string: 'addChildUrl'
string: "%%serverPath%%folders/addchild/"
string: 'alias'
string: 'addChildLink'
string: "&lt;a href='"
string: 'addChildUrl'
string: "'&gt;[add child folder]&lt;/a&gt;"
string: 'delUrl'
string: "%%serverPath%%folders/confirmdelete/UID_"
string: 'UID'
string: '/'
string: 'delLink'
string: "&lt;a href='"
string: 'delUrl'
string: "'&gt;[delete folder]&lt;/a&gt;"
string: 'longdate'
string: 'jS F, Y'
string: 'date'
string: 'titleUpper'
string: 'title'
string: 'folderTitle'
string: 'title'
string: 'descriptionJs'
string: 'description'
string: 'descriptionJs'
string: "'"
string: '--squote--'
string: 'descriptionJs'
string: 'descriptionJs'
string: "'"
string: '--dquote--'
string: 'descriptionJs'
string: 'summary'
string: 'description'
string: 'createdBy'
string: 'userName'
string: ' '
string: 'userRa'
string: 'userUrl'
string: '%%serverPath%%users/profile/'
string: 'userRa'
string: 'userLink'
string: "&lt;a href='"
string: 'userUrl'
string: "'&gt;"
string: 'userRa'
string: "&lt;/a&gt;"
string: "&lt;h3&gt;Installing folder Module&lt;/h3&gt;\n"
string: 'folder'
string: "installing folder module\n"
string: 'created folder table and indices...&lt;br/&gt;'
string: 'folder table already exists...&lt;br/&gt;'
string: "select * from folders where parent='"
string: "' order by title"
string: 'children'
string: 'children'
string: ''
string: 'childrenCount'
string: 'files'
string: 'files'
string: ''
string: 'fileCount'
string: 'UID'
string: "select * from files "
string: "where refModule='folders' and refUID='"
string: "' "
string: "order by title"
string: 'UID'
string: 'root'

<b>scanning file: /var/www/an2google/trunk/modules/files/TODO/folders/inc/install.inc.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	installer for folders module (creates table)
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/folders/models/folder.mod.php'
string: 'admin'

<b>scanning file: /var/www/an2google/trunk/modules/files/TODO/folders/actions/tree.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	list all galleries in root (NOT YET USED IN AWARENET)
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: // check permissions and reference
comment: //----------------------------------------------------------------------------------------------
comment: //if (false == $user-&gt;authHas('files', 'files_folder', 'show', 'TODO:UIDHERE'))
comment: //	{ $page-&gt;do403(); }
comment: //TODO: will this work on this module?
comment: //----------------------------------------------------------------------------------------------
comment: //	render the page
comment: //----------------------------------------------------------------------------------------------
string: ''
string: 'users_user'
string: 'modules/folders/actions/tree.page.php'
string: 'userUID'

<b>scanning file: /var/www/an2google/trunk/modules/files/TODO/folders/actions/show.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	display a folder
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check permissions and reference
comment: //----------------------------------------------------------------------------------------------
comment: // check ref
comment: // check correct ref
comment: //----------------------------------------------------------------------------------------------
comment: //	render the page
comment: //----------------------------------------------------------------------------------------------
string: 'modules/folders/models/folder.mod.php'
string: ''
string: 'files_folder'
string: 'no such folder'
string: 'files'
string: 'files_folder'
string: 'show'
string: 'modules/folders/actions/show.page.php'
string: 'UID'
string: 'raUID'
string: 'userUID'

<b>scanning file: /var/www/an2google/trunk/modules/files/TODO/folders/actions/save.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	save a folder entry
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	load model and check against current user
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	authorised, save any changes
comment: //----------------------------------------------------------------------------------------------
comment: //$model-&gt;parent = $_POST['UID'];				// moving folders is on hold for now
comment: // not currently used
string: 'files'
string: 'files_folder'
string: 'edit'
string: 'TODO:UIDHERE'
string: 'UID'
string: 'folders'
string: 'UID'
string: 'modules/folders/models/folder.mod.php'
string: 'UID'
string: 'admin'
string: 'title'
string: 'description'
string: 'folders/'

<b>scanning file: /var/www/an2google/trunk/modules/files/TODO/folders/actions/new.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	add a new (root) folder
comment: //--------------------------------------------------------------------------------------------------
comment: //TODO: fix this up, probably with autogenerated code
string: 'modules/folders/models/folder.mod.php'
string: 'files'
string: 'files_folder'
string: 'new'
string: 'folders/edit/'

<b>scanning file: /var/www/an2google/trunk/modules/files/TODO/folders/actions/edit.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	edit an image folder
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	load the model
comment: //----------------------------------------------------------------------------------------------
comment: // check basic permissions
comment: // check for ref
comment: //----------------------------------------------------------------------------------------------
comment: //	check permissions (must be admin or own folder to edit)
comment: //----------------------------------------------------------------------------------------------
comment: // possibly more to come here...
comment: //----------------------------------------------------------------------------------------------
comment: //	render the page
comment: //----------------------------------------------------------------------------------------------
string: 'files'
string: 'files_folder'
string: 'edit'
string: 'TODO:UIDHERE'
string: ''
string: 'modules/folder/folder.mod.php'
string: 'admin'
string: 'modules/folder/edit.page.php'
string: 'UID'
string: 'raUID'

<b>scanning file: /var/www/an2google/trunk/modules/files/TODO/folders/actions/delete.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	delete a record
comment: //--------------------------------------------------------------------------------------------------
string: 'files'
string: 'files_folder'
string: 'edit'
string: 'TODO:UIDHERE'
string: 'action'
string: 'action'
string: 'deleteRecord'
string: 'UID'
string: 'folder'
string: 'UID'
string: 'modules/folder/folder.mod.php'
string: 'UID'
string: 'sMessage'
string: "Deleted folder: "
string: 'folder/'

<b>scanning file: /var/www/an2google/trunk/modules/files/TODO/folders/actions/default.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	default action for user folders module (ie, no action specified in URL)
comment: //--------------------------------------------------------------------------------------------------
comment: // no recordAlias/UID given in URL, list all folders
comment: // recordAlias/UID given in URL, show a specific folder
string: ''
string: 'modules/folders/actions/tree.act.php'
string: 'modules/folders/actions/show.act.php'

<b>scanning file: /var/www/an2google/trunk/modules/files/TODO/folders/actions/confirmdelete.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	confirm deletion of a folder
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block and show the item to be deleted
comment: //----------------------------------------------------------------------------------------------
string: 'uid'
string: 'uid'
string: 'Folder not found.'
string: 'files'
string: 'files_folder'
string: 'delete'
string: 'UID'
string: 'uid'
string: 'raUID'
string: 'modules/folder/confirmdelete.block.php'
string: 'warn'
string: 'folder/'

<b>scanning file: /var/www/an2google/trunk/modules/editor/addme.view.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	view fragment for adding this helper to an edit form at design time
comment: //--------------------------------------------------------------------------------------------------
comment: // requires:
comment: //	$fieldName - name of database field
comment: //	$fieldValue - preset value of editor
comment: //	$helper - the name of this helper (consider removing this, helpers know their own names)
string: 'JSEHR'
string: "
&lt;input type='hidden' id='"
string: "-edit-hidden' name='"
string: "-loader' 
	value='"
string: "' /&gt;
&lt;script language='JavaScript' type='text/javascript' 
	src='"
string: "helper/editor/HyperTextArea.js'&gt;&lt;/script&gt;
&lt;script language='JavaScript' type='text/javascript'&gt;
&lt;!--
// strip temporary markup
var $refFieldName = '';
"
string: " = document.getElementById('"
string: "-edit-hidden');
"
string: ".value = "
string: ".value.replace(/--squote--/g, String.fromCharCode(39));
"
string: ".value = "
string: ".value.replace(/--dquote--/g, String.fromCharCode(34));

area = new HyperTextArea('"
string: "', "
string: ".value, 500, 600,'"
string: "helper/editor/');
//--&gt;
&lt;/script&gt;
	"

<b>scanning file: /var/www/an2google/trunk/modules/editor/views/jsta.fn.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //|	add a javascript textarea loader
comment: //-------------------------------------------------------------------------------------------------

<b>scanning file: /var/www/an2google/trunk/modules/editor/views/base64.fn.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //|	add a WYSWYG editor to an HTML page and initialize with 
comment: //-------------------------------------------------------------------------------------------------
comment: //arg: jsvar - name of javascript variable which holds content to be edited [string]
comment: //arg: name - name of html field [string]
comment: //opt: width - width of editor in pixels [string]
comment: //opt: height - height of editor in pixels [string]
comment: //---------------------------------------------------------------------------------------------
comment: //	check arguments
comment: //---------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	make the script block
comment: //---------------------------------------------------------------------------------------------
comment: //-------------------------------------------------------------------------------------------------
string: 'jsvar'
string: ''
string: 'name'
string: ''
string: 'width'
string: 'width'
string: 'height'
string: 'height'
string: ''
string: ''
string: '/modules/editor/HyperTextArea.js'
string: "&lt;script language='JavaScript' src='"
string: "'&gt;&lt;/script&gt;\n"
string: "&lt;script language='JavaScript' type='text/javascript'&gt;\n"
string: 'jsvar'
string: " = base64_decode("
string: 'jsvar'
string: ");\n"
string: "area = new HyperTextArea('"
string: 'name'
string: "', "
string: 'jsvar'
string: ","
string: " $width, $height,'/modules/editor/');\n"
string: "&lt;/script&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/editor/views/add.fn.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //|	add a WYSWYG editor to an HTML page (empty)
comment: //-------------------------------------------------------------------------------------------------
comment: //arg: name - name of html field [string]
comment: //opt: width - width of editor in pixels [string]
comment: //opt: height - height of editor in pixels [string]
comment: //---------------------------------------------------------------------------------------------
comment: //	check arguments
comment: //---------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	make the script block
comment: //---------------------------------------------------------------------------------------------
comment: //-------------------------------------------------------------------------------------------------
string: 'name'
string: ''
string: 'width'
string: 'width'
string: 'height'
string: 'height'
string: ''
string: ''
string: '/modules/editor/HyperTextArea.js'
string: "&lt;script language='JavaScript' src='"
string: "'&gt;&lt;/script&gt;\n"
string: "&lt;script language='JavaScript' type='text/javascript'&gt;\n"
string: "area = new HyperTextArea('"
string: 'name'
string: "', '',"
string: " $width, $height,'/modules/editor/');\n"
string: "&lt;/script&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/editor/inc/install.inc.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	install scripts for WYSWYG editor
comment: //--------------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
comment: //	install the WYSWYG editor module
comment: //--------------------------------------------------------------------------------------------------
comment: //returns: html report [string]
comment: // only admins can do this
comment: //------------------------------------------------------------------------------------------
comment: //	admin module has no database presence at now
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	done
comment: //------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
comment: //	discover if this module is installed
comment: //--------------------------------------------------------------------------------------------------
comment: //returns: HTML installation report [string]
comment: // if installed correctly report will contain HTML comment &lt;!-- installed correctly --&gt;
comment: // only admins can do this
string: 'admin'
string: "&lt;h3&gt;Installing WYSWYG Editor&lt;/h3&gt;\n"
string: "WYSWYG editor module has no objects serialized to the database."
string: 'admin'
string: "&lt;p&gt;WYSWYG editor module requires no further configuration.&lt;/p&gt;"
string: "&lt;!-- installed correctly --&gt;"

<b>scanning file: /var/www/an2google/trunk/modules/editor/actions/jstatest.act.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //	test of javascript testarea loader
comment: //-------------------------------------------------------------------------------------------------
string: 'admin'
string: "&#8218;&#402;&#8218;&#8218;&#382;&#129;&#8218;&#710;&#8218;&#338;&#129;&#8364;&#129;&#8211;&#8220;&#129;&#352;&#339;&#8218;&#8218;&#8217;&#8226;&#8482;&#129;&#710;&#129;&#376;&#129;&#129;&#8218;&#402;&#8218;&#8218;&#8218;&#8218;&#8218;&#129;&#129;&#8218;&#8218;&#8249;&#8364;&#8218;&#339;&#8218;&#339;&#339;&#129;&#382;&#129;&#8211;&#8218;&#143;&#8218;&#352;&#129;&#143;&#129;&#143;&#8364;&#129;&#8218;&#402;&#353;&#8218;&#402;&#129;&#8218;&#402;&#402;&#8249;&#8218;&#382;&#376;&#129;&#8482;&#8249;&#129;&#8226;&#8218;&#338;&#129;&#376;&#8222;1&#8225;&#8240;&#141;&#129;&#129;&#8221;&#129;&#339;&#8218;&#129;&#129;&#8249;&#8218;&#8240;&#339;&#339;&#8218;&#8217;&#143;&#8211;&#8218;&#8249;&#8364;&#129;&#129;&#338;&#143;&#143;&#129;&#8249;&#8218;&#338;&#129;&#129;&#8222;&#8218;&#8249;&#8364;&#8218;&#402;&#8218;&#402;&#157;&#8218;&#402;&#376;&#8218;&#8211;&#8225;&#732;&#381;&#129;&#8211;&#8225;&#8212;&#129;&#8218;&#8218;&#339;&#8218;&#339;&#339;&#129;&#8211;&#129;&#8482;&#8218;&#8249;&#129;&#8220;&#129;&#129;&#338;&#8218;&#8240;&#129;&#338;&#732;&#8240;&#129;&#8226;&#8218;&#338;&#8364;&#129;&#143;&#8218;&#8218;&#402;&#8212;&#402;&#710;&#129;&#129;&#8221;&#129;&#352;&#339;&#8218;&#129;&#732;&#144;&#129;&#338;&#129;&#710;&#129;&#338;&#129;&#8249;&#8218;&#338;&#129;&#129;&#8222;&#8218;&#8249;&#8364;&#8218;&#129;&#129;&#376;&#8364;&#129;&#339;&#8218;&#339;&#339;&#129;&#129;&#8220;&#129;&#8218;&#710;&#129;&#8224;&#129;&#143;&#129;&#8249;&#8218;&#8240;&#8211;&#8226;&#338;&#339;&#8364;&#143;&#129;&#8221;&#732;&#8216;&#8211;&#8482;&#129;&#8218;&#8218;&#129;&#8222;&#8218;&#143;&#8218;&#338;&#129;&#129;&#8222;&#8218;&#8249;&#8364;&#8218;

&#143;&#8218;&#402;&#8218;&#8218;&#129;&#8220;&#8364;&#8230;&#402;&#8218;&#402;&#8218;&#402;&#710;&#402;&#8224;&#402;&#8218;&#129;&#8216;&#8212;&#8250;&#8364;&#381;&#8249;&#8226;&#8240;&#338;&#8364;&#143;&#129;&#129;&#8364;&#129;&#352;&#339;&#8218;&#129;&#129;&#129;&#8222;&#129;&#732;&#129;&#8212;&#129;&#129;&#8222;&#8218;&#8249;&#8364;&#8218;&#129;&#157;&#129;&#8220;&#129;&#129;&#402;&#376;&#402;&#8222;&#402;&#144;&#402;&#129;&#129;&#338;&#8250;&#8224;&#8218;&#129;&#8218;&#8249;&#339;&#339;&#129;&#352;&#129;&#710;&#8224;&#338;&#8240;&#129;&#129;&#129;&#129;&#143;&#8364;&#129;&#352;&#129;&#129;&#129;&#376;&#129;&#129;&#129;&#376;&#339;&#129;&#129;&#8218;&#8218;&#8249;&#129;&#129;&#129;&#129;&#8222;&#8218;&#8249;&#8364;&#8218;

&#8212;&#8222;&#129;&#8211;&#8250;&#129;&#129;&#8218;&#8218;&#402;&#8218;&#402;&#129;&#8222;&#157;&#376;&#129;&#339;&#402;&#8218;&#402;&#352;&#402;&#129;&#338;&#8364;&#338;&#129;&#339;&#339;&#129;&#129;&#8218;&#338;&#8218;&#8249;&nbsp;&#8240;&#8364;&#8364;&#141;&#129;&#143;&#143;&#8224;&#8482;&#129;&#8226;&#8218;&#338;&#129;&#129;&#352;&#8218;&#352;&#8364;&#129;&#402;&#143;&#402;&#129;&#402;&#376;&#402;&#8222;&#129;&#352;&#8217;&#129;&#8226;&#129;&#8218;&#402;&#402;&#339;&#402;&#129;&#129;&#8212;&#129;&#8240;&#8218;&#143;&#8218;&#338;&#129;&#129;&#8222;&#8218;&#8249;&#8364;&#8218;

&#8211;&#402;&#402;&#402;&#402;&#402;&#402;&#8216;&#129;&#129;&#8230;&#732;&#381;&#8221;&#129;&#402;&#8218;&#8218;&#8218;&#129;&#381;&#376;&#8211;&#8482;&#129;&#129;&#8218;&#8218;&#8249;&#339;&#339;&#157;&#8249;&#8218;&#8217;&#129;&#8218;&#8249;&#129;&#376;&#8218;&#129;&#129;&#8364;&#129;&#129;&#8220;&#8482;&#129;&#129;&#129;&#352;&#339;&#8218;&#129;&#338;&#8250;&#8250;&#8218;&#8220;&#129;&#338;&#8218;&#143;&#8218;&#338;&#129;&#376;&#8364;&#8218;

19&#8211;&#8364;&#129;&#129;&#8222;&#129;&#376;&#8218;&#8249;&#129;&#129;&#129;&#339;&#8218;&#339;&#339;&#8218;&#8217;&#8212;&#8218;&#8249;&#129;&#129;&#339;&#8218;&#129;&#8218;&#8217;&#352;&#129;&#8212;&#129;&#8218;&#402;&#402;&#8249;&#402;&#8218;&#8217;&#352;&#8230;&#129;&#8226;&#129;&#8250;&#8364;&#129;&#157;&#8218;&#8217;&#143;&#8211;&#8218;&#352;&#8225;&#129;&#8482;&#129;&#8212;&#129;&#8249;&#129;&#129;&#8249;&#129;&#129;&#376;&#8364;&#8218;1853&#8364;&#129;&#8218;&#402;&#402;&#8218;&#129;&#402;&#402;&#8218;&#8218;&#402;&#710;&#402;&#8218;&#710;L.L.Langstroth&#8240;&#129;&#8364;&#129;&#143;&#8249;&#8226;&#143;&#382;&nbsp;&#8218;&#8217;&#8218;&#8482;&#129;&#710;&#129;&#376;&#8218;&#8222;&#339;&#339;&#8218;&#8217;&#382;&#8218;&#8249;&#129;&#376;&#8218;&#129;&#129;&#129;&nbsp;&#402;&#710;&#8224;&#8250;&#8482;&#8218;&#8217;&#8482;&#732;&#381;&#129;&#8212;&#8364;&#129;&#339;&#8218;&#339;&#339;&#8218;&#8222;&#339;&#339;&#157;&#8249;&#129;&#381;&#143;&#8211;&#8482;&#8218;&#129;&#8218;&#402;&#402;&#8249;&#402;&#8218;&#8217;&#352;&#129;&#8226;&#129;&#8250;&#129;&#353;&#129;&#338;&#129;&#353;&#353;&#8222;&#129;&#402;&#376;&#402;&#8222;&#402;&#144;&#402;&#129;&#8218;&#8217;&#8218;&#129;&#8482;&#8218;&#8249;&#352;&#8364;&#8220;&#129;&#129;&#8218;&#8218;&#8249;&#8216;&#352;&#339;&#8218;&#129;&#8211;&#8249;&#8482;&#129;&#710;&#144;&#352;&#376;&#129;&#8212;&#129;&#376;&#8364;&#8218;&#129;&#129;&#8220;&#129;&#710;&#144;&#382;&#339;&#8218;&#8217;&#8364;&#381;&#129;&#402;&#376;&#402;&#8222;&#402;&#144;&#402;&#129;&#8364;&#143;'The Hive and the Honey Bee'&#129;&#8216;&#8212;&#129;&#8212;&#129;&#129;&#8222;&#8218;&#8249;&#8364;&#8218;&#143;&#339;&#129;&#8225;&#8218;&#8249;&#129;&#129;&#352;&#339;&#8218;&#129;&#376;&#339;&#353;&#8222;&#129;&#8240;&#8249;&#8226;&#129;&#402;&#402;&#8218;&#8218;&#402;&#710;&#402;&#8218;&#129;&#8211;&#8226;&#129;&#8240;&#338;&#8211;&#129;&#8212;&#129;&#129;&#8222;&#129;&#129;&#8222;&#8364;&#8218;

&#8212;&#339;&#129;&#129;&#352;&#129;&#8216;&#8218;&#8249;&#352;&#339;&#8218;&#129;&#129;&#129;&#732;&#129;&#8218;&#352;&#129;&#8364;&#381;&#8212;&#339;&#143;&#8364;&#143;&#129;&#8218;&#710;&#8218;&#338;&#129;642&#129;&#129;&#8226;&#8218;&#338;&#129;&#129;&#8222;&#8218;&#8249;&#8364;&#8218;&#8240;&#8482;&#8218;&#129;&#129;&#8364;&#129;&#129;&#129;&#338;&#352;&#8220;&#129;&#129;&#129;&#339;&#8218;&#339;&#339;&#129;&#732;&#338;&#129;&#338;&#129;&#8218;&#8218;&#8249;&#8364;&#8218;&#376;&#710;&#8482;&#8218;&#129;&#129;&#8364;&#129;&#8218;&#8217;&#8221;&#129;&#8222;&#129;&#376;&#352;&#339;&#8218;&#129;&#129;&#129;&#338;&#129;&#129;&#732;&#129;&#129;&#129;&#376;&#129;&#129;&#8226;&#8218;&#338;&#8218;&#8249;&#8364;&#8218;&#8212;&#339;&#129;&#129;&#352;&#129;&#8216;&#8218;&#8249;&#143;&#8230;&#353;&#8222;&#129;&#352;&#339;&#8218;&#129;&#402;&#8249;&#402;&#8250;&#402;&#402;&#376;&#402;&#8222;&#402;&#144;&#402;&#129;&#8218;&#8217;&#129;&#129;&#376;&#8218;&#8218;&#129;&#129;&#129;&#8218;&#8218;&#352;&#8364;&#129;&#143;&#339;&#129;&#8364;&#710;&#353;&#8222;&#129;&#8218;&#8218;&#402;&#8218;&#402;&#376;&#402;&#8222;&#402;&#144;&#402;&#129;&#129;&#8218;&#710;&#8218;&#8249;&#129;&#157;&#8218;&#338;&#129;&#129;&#8218;&#8222;&#8218;&#8222;&#8226;&#129;&#8218;&#8249;&#8364;&#8218;&#143;&#339;&#8218;&#8218;&#8211;&#8220;&#402;&#129;&#129;&#402;&#8249;&#402;&#8250;&#402;&#402;&#376;&#402;&#8222;&#402;&#144;&#402;&#129;&#129;&#8218;&#710;&#8218;&#8249;&#352;&#339;&#8218;&#129;&#338;&#338;&#8218;&#143;&#8218;&#338;&#129;&#129;&#8222;&#8218;&#8249;&#339;&#376;&#376;&#129;&#338;&#129;&#8218;&#8218;&#8249;&#8364;&#8218;&#732;&#381;&#8482;&#8218;&#129;&#8230;&#8218;&#352;&#8249;&#129;&#402;&#376;&#402;&#8222;&#402;&#144;&#402;&#129;&#129;&#338;&#8230;&#129;&#8226;&#8218;&#338;&#8364;&#129;&#8216;&#353;&#8222;&#129;&#352;&#339;&#8218;&#8482;&#8230;&#129;&#338;&#8218;&#143;&#8218;&#338;&#8218;&#8249;&#8218;&#710;&#129;&#8224;&#129;&#129;&#8218;&#352;&#352;&#339;&#8218;&#129;&#338;&#129;&#8226;&#129;&#8249;&#8218;&#8220;&#129;&#129;&#8218;&#8249;&#8364;&#8218;&#143;&#339;&#8364;&#129;&#8218;&nbsp;&#129;&#8230;&#8218;&#8217;&#710;&#129;&#8249;&#129;&#8250;&#8218;&#8249;&#339;&#8218;&#339;&#339;&#129;&#8250;&#129;&#129;&#129;&#8249;&#8218;&#8240;&#129;&#8240;&#129;&#8230;&#8220;&#129;&#129;&#8364;&#402;&#129;&#8250;&#129;&#8249;&#8218;&#8240;&#129;&#8230;&#8218;&#8222;&#8250;&#8221;&#129;&#732;&#353;&#339;&#8218;&#339;&#339;&#129;&#338;&#710;&#8224;&#338;&#8211;&#129;&#8212;&#129;&#129;&#8222;&#8218;&#8249;&#8364;&#8218;"
string: "&lt;h2&gt;utf8/base64 Javascript Test&lt;/h2&gt;"
string: "&lt;textarea id='taContent' rows='30' cols='80'&gt;&lt;/textarea&gt;\n"
string: "&lt;script src='"
string: "core/utils.js'&gt;&lt;/script&gt;\n"
string: "&lt;script&gt;\n"
string: 'content'
string: "base64_loadTextArea('taContent', content);\n"
string: "&lt;/script&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/docgen/views/views.fn.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //|	list and describe all views on a module
comment: //-------------------------------------------------------------------------------------------------
comment: //arg: module - module to display views for [string]
comment: //---------------------------------------------------------------------------------------------
comment: //	find all views and blocks
comment: //---------------------------------------------------------------------------------------------
string: 'modules/docgen/inc/readcomments.inc.php'
string: 'module'
string: ''
string: "/"
string: ''
string: 'module'
string: ''
string: 'modules/'
string: "/views/"
string: '.fn.php'
string: 'modules/'
string: "/views/"
string: '.block.php'
string: '.fn.php'
string: ''
string: "&lt;h3&gt;$view&lt;/h3&gt;\n"
string: 'modules/'
string: '/views/'
string: 'functions'
string: 'summary'
string: "Summary: "
string: " "
string: 'summary'
string: "&lt;br/&gt;\n"
string: "summary: &lt;span class='ajaxerror'&gt;none.&lt;/span&gt;&lt;br/&gt;\n"
string: 'desc'
string: "notes: "
string: "&lt;br/&gt;\n"
string: 'desc'
string: "&lt;br/&gt;\n"
string: "Function name: "
string: 'name'
string: " - parameters are passed in \$arg array&lt;br/&gt;\n"
string: "[["
string: "[*["
string: "Block Example: "
string: "&lt;br/&gt;&lt;br/&gt;\n"
string: "&lt;br/&gt;\n&lt;hr/&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/docgen/views/modulesummarynav.fn.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //|	summarize a module for the nav
comment: //-------------------------------------------------------------------------------------------------
comment: //arg: module - name of a module [string]
string: 'module'
string: ''
string: '%%serverPath%%docgen/describemodule/'
string: 'module'
string: "%%serverPath%%themes/clockface/icons/folder.png"
string: "&lt;img src='$imgUrl' border='0' /&gt;"
string: "&lt;b&gt;&lt;a href='$docUrl'&gt;"
string: 'module'
string: "&lt;/a&gt;&lt;/b&gt;&lt;br/&gt;"
string: "&lt;small&gt;"
string: 'module'
string: " actions, "
string: 'module'
string: " pages, "
string: 'module'
string: " models, "
string: 'module'
string: " views, "
string: 'module'
string: " blocks, "
string: 'module'
string: " includes."
string: "&lt;/small&gt;&lt;br/&gt;\n"
string: "&lt;table noborder&gt;
	&lt;tr&gt;
		&lt;td valign='top'&gt;&lt;a href='$docUrl'&gt;$img&lt;/a&gt;&lt;/td&gt;
		&lt;td valign='top'&gt;$desc&lt;/td&gt;
	&lt;/tr&gt;
	&lt;/table&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/docgen/views/moduleabout.fn.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //|	list and describe all models on a module
comment: //-------------------------------------------------------------------------------------------------
comment: //arg: module - module to display views for [string]
string: 'modules/docgen/inc/readcomments.inc.php'
string: 'module'
string: ''
string: 'modules/'
string: 'module'
string: '/about.txt'
string: "\r"
string: ''
string: "&lt;"
string: "&amp;lt;"
string: "&gt;"
string: "&amp;gt;"
string: "\n"
string: "&lt;br/&gt;\n"
string: ''

<b>scanning file: /var/www/an2google/trunk/modules/docgen/views/models.fn.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //|	list and describe all models on a module
comment: //-------------------------------------------------------------------------------------------------
comment: //arg: module - module to display views for [string]
comment: //---------------------------------------------------------------------------------------------
comment: //	find all models
comment: //---------------------------------------------------------------------------------------------
comment: //-----------------------------------------------------------------------------------------
comment: //	show model summary and notes
comment: //-----------------------------------------------------------------------------------------
comment: //-----------------------------------------------------------------------------------------
comment: //	show model summary and notes
comment: //-----------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	if no models on this module
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	done
comment: //----------------------------------------------------------------------------------------------
string: 'modules/docgen/inc/readcomments.inc.php'
string: 'module'
string: ''
string: "/"
string: ''
string: 'module'
string: ''
string: 'modules/'
string: "/models/"
string: '.mod.php'
string: '.mod.php'
string: ''
string: 'modules/'
string: '/models/'
string: 'functions'
string: "&lt;h2&gt;$model - "
string: 'summary'
string: "&lt;/h2&gt;\n"
string: "\n"
string: 'desc'
string: "&lt;div class='inlinequote'&gt;$modelDesc&lt;/div&gt;&lt;/small&gt;&lt;br/&gt;"
string: 'functions'
string: '$model-&gt;'
string: 'name'
string: '(...)'
string: 'arg'
string: '(...)'
string: '()'
string: " "
string: 'summary'
string: "\n"
string: 'summary'
string: "&lt;span class='ajaxerror'&gt;none.&lt;/span&gt;&lt;br/&gt;\n"
string: "&lt;b&gt;$method - $summary&lt;/b&gt;&lt;br/&gt;\n"
string: "&lt;br/&gt;\n"
string: 'desc'
string: "\n"
string: 'desc'
string: "notes: "
string: "&lt;br/&gt;\n"
string: "&lt;hr/&gt;\n"
string: 'functions'
string: "&lt;br/&gt;"
string: "&lt;p&gt;(this module has no models)&lt;/p&gt;"

<b>scanning file: /var/www/an2google/trunk/modules/docgen/views/listmodulesnav.fn.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //|	list and all modules for the nav
comment: //-------------------------------------------------------------------------------------------------
comment: //%	return value [string]
string: 'modules/docgen/inc/readcomments.inc.php'
string: ''
string: "[[:docgen::modulesummarynav::module="
string: ":]]\n"

<b>scanning file: /var/www/an2google/trunk/modules/docgen/models/sourcestatementif.mod.php</b>
comment: // delete this

<b>scanning file: /var/www/an2google/trunk/modules/docgen/models/sourcestatement.mod.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //	represents a simple statement such as a variable assignment or function call
comment: //-------------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	member variables
comment: //---------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	constructor
comment: //---------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------
comment: //	read code from cells
comment: //--------------------------------------------------------------------------------------------
string: 'modules/docgen/inc/lexer.inc.php'
string: 'statement'
string: ''

<b>scanning file: /var/www/an2google/trunk/modules/docgen/models/sourcefunction.mod.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //	represents a function or class method
comment: //-------------------------------------------------------------------------------------------------
comment: //	$args is an array of 'varName', 'optional', 'default', 'byref'
comment: //--------------------------------------------------------------------------------------------
comment: //	member variables
comment: //--------------------------------------------------------------------------------------------
comment: // before any structure is read
comment: // source code as string
comment: //--------------------------------------------------------------------------------------------
comment: //	constructor
comment: //--------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------
comment: //	init (expand structures within this one)
comment: //--------------------------------------------------------------------------------------------
comment: //-----------------------------------------------------------------------------------------
comment: //	get function name
comment: //-----------------------------------------------------------------------------------------
comment: //-----------------------------------------------------------------------------------------
comment: //	get argument list
comment: //-----------------------------------------------------------------------------------------		
comment: //-----------------------------------------------------------------------------------------
comment: //	process class body
comment: //-----------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------
comment: //	read code from cells
comment: //--------------------------------------------------------------------------------------------
string: 'modules/docgen/inc/lexer.inc.php'
string: 'function'
string: ''
string: '{'
string: 'abs'
string: 'cblevel'
string: '}'
string: 'abs'
string: 'cblevel'
string: 'abs'
string: "cbStart: $cbStart cbEnd: $dbEnd &lt;br/&gt;\n"
string: "def&lt;br/&gt;&lt;textarea rows=10 cols=80&gt;"
string: "&lt;/textarea&gt;&lt;br/&gt;"
string: '('
string: 'abs'
string: 'plevel'
string: ')'
string: 'abs'
string: 'plevel'
string: "args&lt;br/&gt;&lt;textarea rows=1 cols=80&gt;"
string: "&lt;/textarea&gt;&lt;br/&gt;"
string: "range&lt;br/&gt;&lt;textarea rows=10 cols=80&gt;"
string: "&lt;/textarea&gt;&lt;br/&gt;"

<b>scanning file: /var/www/an2google/trunk/modules/docgen/models/sourcefile.mod.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //	represents a php source file, may contain statements, classes, functions, variables, constants
comment: //-------------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	member variables
comment: //---------------------------------------------------------------------------------------------
comment: // tokenizer output
comment: // source code as string
comment: //---------------------------------------------------------------------------------------------
comment: //	constructor
comment: //---------------------------------------------------------------------------------------------
string: 'sourcefile'
string: ''

<b>scanning file: /var/www/an2google/trunk/modules/docgen/models/sourceexpression.mod.php</b>
comment: // delete this

<b>scanning file: /var/www/an2google/trunk/modules/docgen/models/sourceclass.mod.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //	represents a php source file, may contain statements, classes, functions, variables, constants
comment: //-------------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	member variables
comment: //---------------------------------------------------------------------------------------------
comment: // tokenizer output
comment: // plain text of code
comment: //---------------------------------------------------------------------------------------------
comment: //	constructor
comment: //---------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------
comment: //	init (expand structures within this one)
comment: //--------------------------------------------------------------------------------------------
comment: //-----------------------------------------------------------------------------------------
comment: //	get class name
comment: //-----------------------------------------------------------------------------------------
comment: //-----------------------------------------------------------------------------------------
comment: //	process class body
comment: //-----------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------
comment: //	read source code from cells
comment: //--------------------------------------------------------------------------------------------
string: 'sourceclass'
string: ''
string: '{'
string: 'abs'
string: 'cblevel'
string: '}'
string: 'abs'
string: 'cblevel'
string: 'abs'
string: "cbStart: $cbStart cbEnd: $dbEnd &lt;br/&gt;\n"
string: "def&lt;br/&gt;&lt;textarea rows=10 cols=80&gt;"
string: "&lt;/textarea&gt;"
string: "range&lt;br/&gt;&lt;textarea rows=10 cols=80&gt;"
string: "&lt;/textarea&gt;"

<b>scanning file: /var/www/an2google/trunk/modules/docgen/inc/tokenizer.inc.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //	Source highlighter
comment: //-------------------------------------------------------------------------------------------------
comment: //#	- used to highlight tokens in a string of PHP code (one dimensional grid)
comment: //#	- state of a cells variables change in response to changes in variables of neighbouring cells
comment: //#	- most state changes propogate in only one direction (towards end of file)
comment: //#
comment: //# - cells are stored serialized in a straight array, unserialized into jagged array:
comment: //#	  - char (character in this cell)
comment: //#   - abs (absolute position within text document)
comment: //#   - inphp (only short opener is recognised)
comment: //#   - type (character describing what type of cell this is
comment: //#     - e (php escape)
comment: //#     - s (single quoted string)
comment: //#     - d (double quoted string)
comment: //#     - i (numeric literal)
comment: //#     - l (long comment /* this */ )
comment: //#	    - c (short comment // this \n )
comment: //#		- v (variable)
comment: //#		- p (property of a class)
comment: //#		- m (method of a class)
comment: //#     - w (whitespace)
comment: //#     - n (newline CR or LF)
comment: //#     - k (keyword; include, class, function, if, else, for, etc)
comment: //#		- t (token)
comment: //#		- x (escaped in string literal, eg \t)
comment: //#     - u (unknown)
comment: //#		- self ([]{}+-
comment: //#   - cblevel (how deep are we inside curly braces {} ?)
comment: //#   - blevel (how deep are we inside braces [] ?)
comment: //#   - plevel (how deep are we inside parentheses () ?)
comment: //#   - lclevel (how deep are we inside nested long comments ?)
comment: //#   - color (for printout, array of rgb)
comment: //#   - bgcolor (for printout, array of rgb)
comment: //#   - line
comment: //#   - col
comment: //#
comment: //# - heredoc and nowdoc syntax not yet supported
comment: //#
comment: //-------------------------------------------------------------------------------------------------
comment: //	read source into array
comment: //-------------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	forward pass (from beginning to end)
comment: //---------------------------------------------------------------------------------------------
comment: //-------------------------------------------------------------------------------------
comment: //	separate out this cell and its neighbours
comment: //-------------------------------------------------------------------------------------
comment: // only explicitly loaded the first time
comment: // use result of last cycle
comment: // shortcuts, change these rather than arrays which contain them
comment: //-------------------------------------------------------------------------------------
comment: //	check if we're in a php section
comment: //-------------------------------------------------------------------------------------
comment: //-------------------------------------------------------------------------------------
comment: //	the rest of these apply only to php
comment: //-------------------------------------------------------------------------------------
comment: //-------------------------------------------------------------------------------------
comment: //	set types
comment: //-------------------------------------------------------------------------------------
comment: // long comments
comment: // in something else
comment: // beginning of short (single line) comment
comment: // beginning of single quoted string
comment: // beginning of double quoted string
comment: //	new lines
comment: // continue short comments to end of line
comment: // continue single quoted strings to closing single quote
comment: // continue double quoted strings to closing couble quote
comment: //-------------------------------------------------------------------------------------
comment: // operators with more than once character
comment: //-------------------------------------------------------------------------------------
comment: //-------------------------------------------------------------------------------------
comment: // special chars
comment: //-------------------------------------------------------------------------------------
comment: // continue variables, properties and methods to end of name
comment: // numeric literal
comment: // some characters represent themselves
comment: //-------------------------------------------------------------------------------------
comment: // class properties and methods
comment: //-------------------------------------------------------------------------------------
comment: //-------------------------------------------------------------------------------------
comment: // set or adjust cblevel (but not if occurs in strings or comments)
comment: //-------------------------------------------------------------------------------------
comment: //are we currently inside a string literal or a comment?
comment: //-------------------------------------------------------------------------------------
comment: // set or adjust cblevel (but not if occurs in strings or comments)
comment: //-------------------------------------------------------------------------------------
comment: //-------------------------------------------------------------------------------------
comment: // set or adjust blevel (but not if occurs in strings or comments)
comment: //-------------------------------------------------------------------------------------
comment: //-------------------------------------------------------------------------------------
comment: // set or adjust plevel (but not if occurs in strings or comments)
comment: //-------------------------------------------------------------------------------------
comment: //-------------------------------------------------------------------------------------
comment: // tidy up
comment: //-------------------------------------------------------------------------------------
comment: // anything unknown is a 'token'
comment: // patch up closing single quote
comment: // patch up closing double quote
comment: //-----------------------------------------------------------------------------------------
comment: //	replace shortcuts
comment: //-----------------------------------------------------------------------------------------
comment: // end for each cell (forward)
comment: //---------------------------------------------------------------------------------------------
comment: //	backward pass (from end to beginning)
comment: //---------------------------------------------------------------------------------------------
comment: //-------------------------------------------------------------------------------------
comment: //	separate out this cell and its neighbours
comment: //-------------------------------------------------------------------------------------
comment: // shortcuts, change these rather than arrays which contain them
comment: //-------------------------------------------------------------------------------------
comment: //	patch up escaped \ in single quoted strings
comment: //-------------------------------------------------------------------------------------
comment: //-------------------------------------------------------------------------------------
comment: //	class methods and variable functions
comment: //-------------------------------------------------------------------------------------
comment: //-------------------------------------------------------------------------------------
comment: //	replace shortcuts
comment: //-------------------------------------------------------------------------------------
comment: //-------------------------------------------------------------------------------------------------
comment: //	read source into array
comment: //-------------------------------------------------------------------------------------------------
comment: // terminal cells
comment: //-------------------------------------------------------------------------------------------------
comment: //	work out the color
comment: //-------------------------------------------------------------------------------------------------
comment: //-----------------------------------------------------------------------------------------
comment: //	highlight php
comment: //-----------------------------------------------------------------------------------------
comment: //-----------------------------------------------------------------------------------------
comment: //	darken background according to cblevel (depth in curly braces)
comment: //-----------------------------------------------------------------------------------------
comment: //-----------------------------------------------------------------------------------------
comment: //	darken background according to blevel (depth in curly braces)
comment: //-----------------------------------------------------------------------------------------
comment: //-----------------------------------------------------------------------------------------
comment: //	darken background according to blevel (depth in curly braces)
comment: //-----------------------------------------------------------------------------------------
comment: //-----------------------------------------------------------------------------------------
comment: //	set foreground color of various elements
comment: //-----------------------------------------------------------------------------------------
comment: // short comment
comment: // long comment
comment: // string ''
comment: // string ""
comment: //case 'i': $color = array('r' =&gt; 106, 'g' =&gt; 90, 'b' =&gt; 205); break; // numeric literal
comment: // variable
comment: // token
comment: // class method
comment: // class method
comment: // class properties
comment: // class properties
comment: //$htmlColor = imgRgbToHex($color['r'], $color['g'], $color['b']);
comment: //echo $cell['type'] . $htmlColor . ' ';
comment: //-------------------------------------------------------------------------------------------------
comment: //	print it out
comment: //-------------------------------------------------------------------------------------------------
comment: // replace whitespace with HTML equivalent
comment: // specify color only when it changes
comment: //$htmlBgColor = '#ffff';
comment: // . $cell['type'];
comment: //-------------------------------------------------------------------------------------------------
comment: //	collapse a cell array
comment: //-------------------------------------------------------------------------------------------------
comment: //-------------------------------------------------------------------------------------------------
comment: //	expand a cell array
comment: //-------------------------------------------------------------------------------------------------
comment: //-------------------------------------------------------------------------------------------------
comment: //	go through source file, throw each token to the specified function
comment: //-------------------------------------------------------------------------------------------------
string: '0'
string: '1'
string: '2'
string: '3'
string: '4'
string: '5'
string: '6'
string: '7'
string: '8'
string: '9'
string: ";"
string: ":"
string: ","
string: "."
string: "{"
string: "}"
string: "["
string: "]"
string: "("
string: ")"
string: "!"
string: "+"
string: "-"
string: "*"
string: "/"
string: "="
string: "^"
string: "%"
string: "&lt;"
string: "&gt;"
string: '_'
string: 'a'
string: 'z'
string: 'A'
string: 'Z'
string: 'char'
string: 'char'
string: 'char'
string: 'type'
string: 'type'
string: 'type'
string: 'col'
string: 'col'
string: 'line'
string: 'line'
string: "\n"
string: 'col'
string: 'line'
string: 'c'
string: 'l'
string: 's'
string: 'd'
string: '&lt;?'
string: 'inphp'
string: 'e'
string: 'e'
string: 'inphp'
string: 'inphp'
string: 'inphp'
string: '?&gt;'
string: 'inphp'
string: 'e'
string: 'e'
string: 'inphp'
string: 'inphp'
string: 'lclevel'
string: 'lclevel'
string: 'c'
string: 's'
string: 'd'
string: '/*'
string: 'lclevel'
string: 'lclevel'
string: 'l'
string: '*'
string: '/'
string: 'lclevel'
string: '/'
string: '/'
string: 'l'
string: 'c'
string: '#'
string: 'l'
string: 'c'
string: "'"
string: 'l'
string: 'c'
string: 's'
string: 'd'
string: 'u'
string: 's'
string: "\""
string: 'l'
string: 'c'
string: 's'
string: 'u'
string: 'd'
string: "\n"
string: "\r"
string: 'n'
string: 'c'
string: 'n'
string: 'c'
string: 's'
string: '\\'
string: "\\"
string: " \\"
string: "escaped \\ in single quoted string&lt;br/&gt;\n"
string: "'"
string: "\\"
string: 'sc'
string: 's'
string: 'd'
string: '\\'
string: "\\"
string: " \\"
string: "escaped \\ in double quoted string&lt;br/&gt;\n"
string: "\""
string: "\\"
string: 'dc'
string: 'd'
string: '-'
string: 'v'
string: 'v'
string: '&gt;'
string: 'v'
string: 'v'
string: 'u'
string: 'v'
string: 'v'
string: 'p'
string: 'p'
string: 'm'
string: 'm'
string: 't'
string: 'v'
string: 'p'
string: 'm'
string: 'i'
string: 'x'
string: '.'
string: 'i'
string: 'i'
string: ' '
string: 'w'
string: "\t"
string: 'w'
string: '$'
string: 'v'
string: '&gt;'
string: 'v'
string: 'p'
string: 'cblevel'
string: 'cblevel'
string: 'c'
string: 's'
string: 'd'
string: 'l'
string: '}'
string: 'cblevel'
string: 'cblevel'
string: 'type'
string: 'c'
string: 's'
string: 'd'
string: 'l'
string: '{'
string: 'cblevel'
string: 'cblevel'
string: 'c'
string: 's'
string: 'd'
string: 'l'
string: 'c'
string: 's'
string: 'd'
string: 'l'
string: 'cblevel'
string: 'cblevel'
string: '}'
string: 'cblevel'
string: 'cblevel'
string: '{'
string: 'cblevel'
string: 'blevel'
string: 'blevel'
string: ']'
string: 'blevel'
string: 'blevel'
string: '['
string: 'blevel'
string: 'plevel'
string: 'plevel'
string: ')'
string: 'plevel'
string: 'plevel'
string: '('
string: 'plevel'
string: 'u'
string: 't'
string: 'sc'
string: 's'
string: 'dc'
string: 'd'
string: 'char'
string: 'type'
string: 'type'
string: 'type'
string: 'char'
string: 'char'
string: 'char'
string: 'type'
string: 'type'
string: 'type'
string: " \\"
string: '\\'
string: '('
string: 'p'
string: 'm'
string: 'p'
string: 'm'
string: 'm'
string: 'char'
string: 'type'
string: 'type'
string: 'type'
string: ' '
string: ' '
string: 'char'
string: 'abs'
string: 'inphp'
string: 'type'
string: 'u'
string: 'cblevel'
string: 'blevel'
string: 'plevel'
string: 'lclevel'
string: 'color'
string: 'r'
string: 'g'
string: 'b'
string: 'bgcolor'
string: 'r'
string: 'g'
string: 'b'
string: 'line'
string: 'col'
string: 'color'
string: 'bgcolor'
string: 'inphp'
string: 'r'
string: 'b'
string: 'g'
string: 'g'
string: 'b'
string: 'b'
string: 'cblevel'
string: 'r'
string: 'b'
string: 'g'
string: 'g'
string: 'b'
string: 'b'
string: 'blevel'
string: 'g'
string: 'g'
string: 'b'
string: 'b'
string: 'plevel'
string: 'r'
string: 'r'
string: 'g'
string: 'g'
string: 'type'
string: 'c'
string: 'r'
string: 'g'
string: 'b'
string: 'l'
string: 'r'
string: 'g'
string: 'b'
string: 's'
string: 'r'
string: 'g'
string: 'b'
string: 'd'
string: 'r'
string: 'g'
string: 'b'
string: 'v'
string: 'r'
string: 'g'
string: 'b'
string: 't'
string: 'r'
string: 'g'
string: 'b'
string: 'm'
string: 'r'
string: 'g'
string: 'b'
string: 'i'
string: 'r'
string: 'g'
string: 'b'
string: 'p'
string: 'r'
string: 'g'
string: 'b'
string: 'e'
string: 'r'
string: 'g'
string: 'b'
string: 'bgcolor'
string: 'color'
string: ''
string: "&lt;tt&gt;\n"
string: 'color'
string: 'bgcolor'
string: 'char'
string: "\n"
string: 'char'
string: "&lt;br/&gt;\n"
string: "\t"
string: 'char'
string: "&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;"
string: " "
string: 'char'
string: "&amp;nbsp;"
string: "&lt;"
string: 'char'
string: "&amp;lt;"
string: "&gt;"
string: 'char'
string: "&amp;gt;"
string: "&amp;"
string: 'char'
string: "&amp;amp;"
string: 'r'
string: 'g'
string: 'b'
string: 'r'
string: 'g'
string: 'b'
string: ''
string: '&lt;/span&gt;'
string: "color: #"
string: "; background-color: #"
string: "&lt;span style='$style'&gt;"
string: 'char'
string: ''
string: '&lt;/span&gt;'
string: "&lt;/tt&gt;\n"
string: 'char'
string: '|'
string: 'char'
string: 'pipe'
string: 'color'
string: ','
string: 'color'
string: 'bgcolor'
string: ','
string: 'bgcolor'
string: '|'
string: '|'
string: 'char'
string: 'abs'
string: 'inphp'
string: 'type'
string: 'cblevel'
string: 'blevel'
string: 'plevel'
string: 'lclevel'
string: 'color'
string: 'bgcolor'
string: 'line'
string: 'col'
string: 'char'
string: 'pipe'
string: 'char'
string: '|'
string: ','
string: 'color'
string: 'color'
string: 'color'
string: 'r'
string: 'color'
string: 'g'
string: 'color'
string: 'b'
string: ','
string: 'bgcolor'
string: 'bgcolor'
string: 'bgcolor'
string: 'r'
string: 'bgcolor'
string: 'g'
string: 'bgcolor'
string: 'b'
string: ''
string: 'type'
string: 'type'

<b>scanning file: /var/www/an2google/trunk/modules/docgen/inc/readcomments.inc.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //*	read comments in source code to extract documentation
comment: //-------------------------------------------------------------------------------------------------
comment: //+	syntax - comment begins with
comment: //+	* file summary
comment: //+	+ explanation (file)
comment: //+	| function summary
comment: //+	: explanation (function)
comment: //+ . class method summary
comment: //+ , explanation (class method)
comment: //+	arg: mandatory argument - description
comment: //+	opt: optional argument - description
comment: //+	returns: return value of the function
comment: //---------------------------------------------------------------------------------------------
comment: // file summary
comment: // file description
comment: // function summary
comment: // function summary
comment: // function description
comment: // function description
comment: // mandatory argument
comment: // optional argument
comment: //-----------------------------------------------------------------------------------------
comment: //	look for function declarations
comment: //-----------------------------------------------------------------------------------------
comment: //-------------------------------------------------------------------------------------
comment: //	read function definition
comment: //-------------------------------------------------------------------------------------
comment: //-------------------------------------------------------------------------------------
comment: //	look for undocumented parameters
comment: //-------------------------------------------------------------------------------------
comment: //	get rid of the arg: part
comment: //	break at '-'
comment: // because of views, etc
comment: //-------------------------------------------------------------------------------------
comment: //	add to file array
comment: //-------------------------------------------------------------------------------------
comment: //-------------------------------------------------------------------------------------------------
comment: //|	read function definition (name and arguments)
comment: //-------------------------------------------------------------------------------------------------
comment: //arg: line - line containing function definition [string]
comment: //returns: array containing a description of the function [array]
comment: // 
comment: // not empty list of parameters
comment: // optional argument
comment: //-------------------------------------------------------------------------------------------------
comment: //|	make argument tables for a function
comment: //-------------------------------------------------------------------------------------------------
comment: //arg: fn - function array produced by docRead [array]
comment: //returns: html [string]
comment: //-------------------------------------------------------------------------------------------------
comment: //|	look for variable type tags in current line
comment: //-------------------------------------------------------------------------------------------------
comment: //arg: line - a line of PHP code [string]
comment: //returns: list of types [string]
comment: //-------------------------------------------------------------------------------------------------
comment: //|	make an example block for a view
comment: //-------------------------------------------------------------------------------------------------
comment: //arg: fn - function array produced by docRead [array]
comment: //returns: html [string]
comment: //-------------------------------------------------------------------------------------------------
comment: //|	get the name of the parameter from an arg or opt descriptopm
comment: //-------------------------------------------------------------------------------------------------
comment: //arg: line - comment dexcribing the argument
comment: //returns: parameter name [string]
string: 'summary'
string: 'desc'
string: 'functions'
string: 'summary'
string: 'arg'
string: 'opt'
string: 'desc'
string: "\n"
string: '//'
string: '//*'
string: 'summary'
string: '//+'
string: 'desc'
string: '//|'
string: 'summary'
string: '//.'
string: 'summary'
string: '//:'
string: 'desc'
string: '//,'
string: 'desc'
string: '//a'
string: 'arg'
string: 'a'
string: '//o'
string: 'arg'
string: 'o'
string: 'function'
string: 'name'
string: 'name'
string: 'arg'
string: 'arg'
string: "-"
string: 'args'
string: 'arg'
string: 'arg: '
string: " - &lt;span class='ajaxerror'&gt;(undocumented)&lt;/span&gt;"
string: 'functions'
string: 'name'
string: 'summary'
string: 'arg'
string: 'opt'
string: 'desc'
string: "("
string: "{"
string: 'name'
string: 'paren'
string: 'arg'
string: 'opt'
string: '('
string: ''
string: 'paren'
string: ')'
string: ''
string: ","
string: '='
string: 'arg'
string: '$'
string: ''
string: 'arg'
string: '$'
string: ''
string: ''
string: 'Argument'
string: 'Label'
string: 'Required'
string: 'Type'
string: 'arg'
string: 'opt'
string: 'arg:'
string: "yes"
string: 'opt:'
string: "no"
string: "-"
string: "No Parameters."
string: 'none'
string: 'bool'
string: 'string'
string: 'array'
string: 'object'
string: 'int'
string: 'float'
string: '['
string: ']'
string: ', '
string: "&lt;span class='ajaxerror'&gt;unknown&lt;/span&gt;"
string: "&lt;small&gt;&lt;small&gt;&lt;small&gt; &lt;/small&gt;&lt;/small&gt;&lt;/small&gt;"
string: 'arg'
string: '=param'
string: 'opt'
string: '=optional '
string: '[%%delme%%[:'
string: '::'
string: '::'
string: '::'
string: ':]]'
string: ":::"
string: ":"
string: '//'
string: ''
string: 'arg:'
string: ''
string: 'opt:'
string: ''
string: '-'

<b>scanning file: /var/www/an2google/trunk/modules/docgen/inc/lexer.inc.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: // use lexer output to create tree structure to represent program, dependancies, etc
comment: //-------------------------------------------------------------------------------------------------
comment: //-------------------------------------------------------------------------------------------------
comment: //	general knowledge
comment: //-------------------------------------------------------------------------------------------------
comment: //-------------------------------------------------------------------------------------------------
comment: //	parse lexer output
comment: //-------------------------------------------------------------------------------------------------
comment: //-------------------------------------------------------------------------------------------------
comment: //	read the cells array into a SourceFile object
comment: //-------------------------------------------------------------------------------------------------
comment: // collects the token or statement we're dealing with
comment: // string for comparison
comment: //---------------------------------------------------------------------------------------------
comment: //	go though all php in the cells and build tree
comment: //---------------------------------------------------------------------------------------------
comment: // ignore all cells up to this point
comment: //-------------------------------------------------------------------------------------
comment: //	type changes when we've reached the end of a token
comment: //-------------------------------------------------------------------------------------
comment: // php escapes (ignore)
comment: // just clear the buffer
comment: // end of a simple statement						
comment: // clear the buffer
comment: // generic token, may be a fn name, etc
comment: // may have scanned ahead
comment: // prevent adding this to buffer;
comment: // clear the buffer
comment: // done with this tokern
comment: //-------------------------------------------------------------------------------------
comment: //	add cell to buffer if it is php code (ie, not a comment)
comment: //-------------------------------------------------------------------------------------
comment: // add to buffer
comment: // add to lit 
comment: // set last type;
comment: // return $model;
comment: //-------------------------------------------------------------------------------------------------
comment: //	handle class and function definitions, control statements, etc
comment: //-------------------------------------------------------------------------------------------------
comment: // level of indentation
comment: // end of class abs pos
comment: // level of indentation
comment: // get end of block
comment: //-------------------------------------------------------------------------------------------------
comment: //	return a subset of cells given starting and closing absolute positions
comment: //-------------------------------------------------------------------------------------------------
comment: //-------------------------------------------------------------------------------------------------
comment: //	find the absolute position of the next brace at a given depth (returns false if not found)
comment: //-------------------------------------------------------------------------------------------------
comment: //echo "dgGetBrace char: $char len: $len start: $start cblevel: $cblevel&lt;br/&gt;";
comment: //-------------------------------------------------------------------------------------------------
comment: //	find the abs position of the next parenthesis at a given depth (returns false if not found)
comment: //-------------------------------------------------------------------------------------------------
comment: //echo "dgGetParen char: $char len: $len start: $start plevel: $plevel&lt;br/&gt;";
comment: //-------------------------------------------------------------------------------------------------
comment: //	convert cells array to string
comment: //-------------------------------------------------------------------------------------------------
comment: //-------------------------------------------------------------------------------------------------
comment: //	strip newlines out of the buffer
comment: //-------------------------------------------------------------------------------------------------
comment: //function dgCellsToString($cells) {
comment: //	$str = '';
comment: //	foreach($cells as $cell) { $str .= $cell['char']; }
comment: //	return $str;
comment: //}
string: 'modules/docgen/models/sourcefile.mod.php'
string: 'modules/docgen/models/sourceclass.mod.php'
string: 'modules/docgen/models/sourcefunction.mod.php'
string: 'modules/docgen/models/sourcestatement.mod.php'
string: "abstract and array as break case catch cfunction class clone const continue "
string: "declare default do else elseif enddeclare endfor endforeach endif endswitch "
string: "endwhile extends final for foreach function global goto if implements "
string: "interface instanceof namespace new old_function or private protected public "
string: "static switch throw try use var while xor"
string: " "
string: "cells array not set&lt;br/&gt;\n"
string: ''
string: ''
string: 'abs'
string: 'inphp'
string: 'type'
string: 'e'
string: ';'
string: 't'
string: 'abs'
string: 'type'
string: 'c'
string: ''
string: 'type'
string: 'c'
string: 'type'
string: 'l'
string: 'char'
string: 'type'
string: "checking token: $lit &lt;br/&gt;\n"
string: 'class'
string: 'cblevel'
string: '}'
string: 'abs'
string: 'abs'
string: "added class:&lt;br/&gt; &lt;textarea rows='20' cols='100'&gt;"
string: "&lt;/textarea&gt;&lt;br/&gt;\n"
string: 'function'
string: "buf start: "
string: 'abs'
string: " token end: "
string: "&lt;br/&gt;\n"
string: 'cblevel'
string: '}'
string: 'abs'
string: 'abs'
string: "start: "
string: 'abs'
string: " cbPos: $cbPos &lt;br/&gt;\n"
string: "added function:&lt;br/&gt; &lt;textarea rows='20' cols='100'&gt;"
string: "&lt;/textarea&gt;&lt;br/&gt;\n"
string: 'abs'
string: 'abs'
string: 'abs'
string: 'abs'
string: 'type'
string: 'cblevel'
string: 'abs'
string: 'abs'
string: 'type'
string: 'plevel'
string: 'abs'
string: ''
string: 'char'

<b>scanning file: /var/www/an2google/trunk/modules/docgen/actions/testreadcomments.act.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //	test readingcomments.inc.php
comment: //-------------------------------------------------------------------------------------------------
string: 'modules/docgen/inc/readcomments.inc.php'
string: 'core/mysql.inc.php'
string: ''
string: "file summary: "
string: "&lt;br/&gt;\n"
string: 'summary'
string: "&lt;br/&gt;\n"
string: "file description: "
string: "&lt;br/&gt;\n"
string: 'desc'
string: "&lt;br/&gt;\n"
string: 'functions'
string: "&lt;h2&gt;"
string: 'name'
string: " - "
string: " "
string: 'summary'
string: "&lt;/h2&gt;"
string: "notes: "
string: "&lt;br/&gt;\n"
string: 'desc'
string: "&lt;br/&gt;\n"
string: "&lt;br/&gt;\n"
string: 'modules/docgen/actions/testreadcomments.page.php'
string: 'docgentest'

<b>scanning file: /var/www/an2google/trunk/modules/docgen/actions/test.act.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //	initialize
comment: //-------------------------------------------------------------------------------------------------
comment: //require_once($kapenta-&gt;installPath . 'modules/docgen/models/source.class.php');
comment: //$testFile = $installPath. 'modules/docgen/GlobalFunctions.txt';
string: 'modules/docgen/inc/tokenizer.inc.php'
string: 'modules/docgen/inc/lexer.inc.php'
string: 'modules/docgen/test.txt'
string: " cells&lt;br/&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/docgen/actions/searchandreplace.act.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //	search for and replace a string in awareNet source code
comment: //-------------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	authorization
comment: //---------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	check for any post variables
comment: //---------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	print a simple form
comment: //---------------------------------------------------------------------------------------------
string: 'admin'
string: ''
string: ''
string: ''
string: 'action'
string: 'action'
string: 'find'
string: 'find'
string: 'replace'
string: 'replace'
string: "&lt;html&gt;&lt;body&gt;
	&lt;form name='findReplace'&gt;
	&lt;input type='hidden' name='action' value='findReplace' /&gt;
	&lt;b&gt;Find:&lt;/b&gt;
	&lt;input type='
	&lt;b&gt;Replace:&lt;/b&gt;

	&lt;/form&gt;
	&lt;/body&gt;&lt;/html&gt;"

<b>scanning file: /var/www/an2google/trunk/modules/docgen/actions/findfndef.act.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //	find function definitions, mark up source
comment: //-------------------------------------------------------------------------------------------------
comment: //require_once($kapenta-&gt;installPath . 'modules/docgen/models/source.class.php');
comment: //---------------------------------------------------------------------------------------------
comment: //	lioad and parse source
comment: //---------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	make array of tokens
comment: //---------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	scan backward for function definitions
comment: //---------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	scan forward for file synopsis and description
comment: //---------------------------------------------------------------------------------------------
comment: //
comment: //echo "token: (" . $token['type'] . ") " . $token['lit'] . "&lt;br/&gt;\n";
comment: //---------------------------------------------------------------------------------------------
comment: //	print all source
comment: //---------------------------------------------------------------------------------------------
string: 'modules/docgen/inc/tokenizer.inc.php'
string: 'modules/docgen/inc/lexer.inc.php'
string: 'modules/docgen/test.txt'
string: " cells&lt;br/&gt;\n"
string: 'catchToken'
string: 'type'
string: 'n'
string: 'w'
string: 'c'
string: '----'
string: 'h'
string: 't'
string: 'function'
string: 'f'
string: 'cells'
string: 'type'
string: 'lit'
string: ''
string: 'type'
string: 't'
string: 'type'
string: 'f'
string: 'lit'
string: "function: $fnName &lt;br/&gt;\n"
string: "token: ("
string: 'type'
string: ") "
string: 'lit'
string: "&lt;br/&gt;\n"
string: ''
string: ''
string: 'u'
string: 'n'
string: 'c'
string: 'l'
string: 'e'
string: 'w'
string: 'h'
string: ''
string: 'type'
string: "othertoken: "
string: 'type'
string: " &lt;br/&gt;\n"
string: 'type'
string: 'h'
string: "hcount: $hcount &lt;br/&gt;\n"
string: 'type'
string: 'c'
string: 'lit'
string: "\n"
string: 'lit'
string: "\n"
string: "file synopsis: $fileSynopsis &lt;br/&gt;\nfile description: $fileDesc &lt;br/&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/docgen/actions/describemodule.act.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //*	describe a module
comment: //-------------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	check that the module exists
comment: //---------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	render the page
comment: //---------------------------------------------------------------------------------------------
string: ''
string: 'modules/docgen/actions/describemodule.page.php'
string: 'modname'

<b>scanning file: /var/www/an2google/trunk/modules/docgen/actions/default.act.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //	show extracted documentation
comment: //-------------------------------------------------------------------------------------------------

<b>scanning file: /var/www/an2google/trunk/modules/docgen/actions/addviewc.act.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //*	fix up view documentation
comment: //-------------------------------------------------------------------------------------------------
comment: //role: admin - only administrators by run this action
comment: //---------------------------------------------------------------------------------------------
comment: //	only admins can do this
comment: //---------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	find all views on all modules
comment: //---------------------------------------------------------------------------------------------
comment: // ignore
string: 'modules/docgen/inc/readcomments.inc.php'
string: 'admin'
string: "&lt;h2&gt;$mod&lt;/h2&gt;\n"
string: 'modules/'
string: '/views/'
string: 'yes'
string: "//|"
string: 'no'
string: " ($done)&lt;br/&gt;\n"
string: 'no'
string: "&lt;textarea rows=10 cols=80&gt;"
string: '&lt;/textarea&gt;'
string: '&lt;./textarea&gt;'
string: "&lt;/textarea&gt;&lt;br/&gt;\n"
string: 'w'
string: "could not open file&lt;br/&gt;\n"
string: "saved"
string: "\r"
string: ""
string: "\n"
string: ''
string: '//'
string: '//-'
string: "//"
string: "//|"
string: '//arg:'
string: "&lt;span class='ajaxerror'&gt;unknown&lt;/span&gt;"
string: "$line + [string]&lt;br/&gt;\n"
string: " [string]"
string: "type known: "
string: "&lt;br/&gt;\n"
string: '//opt:'
string: "&lt;span class='ajaxerror'&gt;unknown&lt;/span&gt;"
string: "$line + [string]&lt;br/&gt;\n"
string: " [string]"
string: "type known: "
string: "&lt;br/&gt;\n"
string: "\n"

<b>scanning file: /var/www/an2google/trunk/modules/docgen/actions/addmodc.act.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //*	add documentation to models
comment: //-------------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	admin only
comment: //---------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	make list of all models
comment: //---------------------------------------------------------------------------------------------
string: 'admin'
string: "&lt;h2&gt;$mod&lt;/h2&gt;\n"
string: "&lt;br/&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/contact/views/show.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	display contact details as a table
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: refModule - name of a kapenta module [string]
comment: //arg: refModel - type of object which may have contact details [string]
comment: //arg: refUID - UID of object which may have contact details [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	load any contact details from database
comment: //----------------------------------------------------------------------------------------------
comment: //	$sql = "select * from Contact_Detail"
comment: //	 . " where refModule='" . $refModule . "' and refUID='" . $refUID . "'"
comment: //	 . " order by isDefault='true'";
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
string: 'modules/contact/models/detail.mod.php'
string: ''
string: 'refModule'
string: '(no refModule)'
string: 'refModel'
string: '(no refModel)'
string: 'refUID'
string: '(no refUID)'
string: 'refModule'
string: 'refModel'
string: 'refUID'
string: 'contacts-edit'
string: '403'
string: "refModule='"
string: "'"
string: "refUID='"
string: "'"
string: 'contact_detail'
string: '*'
string: ""
string: "&lt;b&gt;Contact:&lt;/b&gt;&lt;br/&gt;"
string: 'Description'
string: 'Contact'
string: 'description'
string: 'extValue'

<b>scanning file: /var/www/an2google/trunk/modules/contact/views/list.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	show contact details belonging to some owner object
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: refModule - name of a kapenta module [string]
comment: //arg: refModel - type of object which may have contact details [string]
comment: //arg: refUID - UID of obejct which may have contact details [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	load any contact details from database
comment: //----------------------------------------------------------------------------------------------
comment: //	$sql = "select * from Contact_Detail"
comment: //	 . " where refModule='" . $refModule . "' and refUID='" . $refUID . "'"
comment: //	 . " order by isDefault='true'";
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
string: 'modules/contact/models/detail.mod.php'
string: ''
string: 'refModule'
string: '(no refModule)'
string: 'refModel'
string: '(no refModel)'
string: 'refUID'
string: '(no refUID)'
string: 'refModule'
string: 'refModel'
string: 'refUID'
string: 'contacts-edit'
string: '403'
string: "refModule='"
string: "'"
string: "refUID='"
string: "'"
string: 'contact_detail'
string: '*'
string: "(no contact details yet added)\n&lt;br/&gt;"
string: 'Type'
string: 'Contact'
string: '[x]'
string: '[x]'
string: 'type'
string: 'extValue'
string: 'editLink'
string: 'delLink'
string: '%%serverPath%%contact/new'
string: '/refModule_'
string: '/refModel_'
string: '/refUID_'
string: "&lt;a href='$newUrl'&gt;[add new contact detail]&lt;/a&gt;"

<b>scanning file: /var/www/an2google/trunk/modules/contact/views/editform.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	make contact detail edit form
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: UID - UID of a Contact_Detail object [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
string: ''
string: 'UID'
string: '(UID not given)'
string: 'UID'
string: ''
string: 'modules/contact/views/editform.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/contact/views/editdetails.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	display iframe for editing contact details
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: refModule - name of a kapenta module [string]
comment: //arg: refModel - type of object which may have contact details associated with it [string]
comment: //arg: refUID- UID of object which may have contact details associated with it [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: permission check here
comment: //----------------------------------------------------------------------------------------------
comment: //	make the iframe
comment: //----------------------------------------------------------------------------------------------
string: ''
string: 'refModule'
string: '(no refModule)'
string: 'refModel'
string: '(no refModel)'
string: 'refUID'
string: '(no refUID)'
string: 'refModule'
string: 'refModel'
string: 'refUID'
string: 'refModule'
string: '(bad refModule)'
string: 'refModel'
string: 'refUID'
string: '(no owner)'
string: 'ifUrl'
string: '%%serverPath%%contact/show'
string: '/refModule_'
string: '/refModel_'
string: '/refUID_'
string: '/'
string: 'modules/contact/views/editdetails.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/contact/models/detail.mod.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	Records individual contact particulars for an entity (eg, phone numbers, email addresses, etc)
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //member variables
comment: //----------------------------------------------------------------------------------------------
comment: //_	currently loaded database record [array]
comment: //_	database table definition [array]
comment: //_	set to true when an object has been loaded [bool]
comment: //_ UID [string]
comment: //_ module [string]
comment: //_ model [string]
comment: //_ ref:*_* [string]
comment: //_ varchar(50) [string]
comment: //_ varchar(255) [string]
comment: //_ text [string]
comment: //_ eg, default email address (yes|no) [string]
comment: //_ datetime [string]
comment: //_ ref:Users_User [string]
comment: //_ datetime [string]
comment: //_ ref:Users_User [string]
comment: //----------------------------------------------------------------------------------------------
comment: //. constructor
comment: //----------------------------------------------------------------------------------------------
comment: //opt: UID - UID of a Detail object [string]
comment: // initialise table schema
comment: // try load an object from the database
comment: // check if we did
comment: // make new object
comment: // initialize
comment: //----------------------------------------------------------------------------------------------
comment: //. load an object from the database given its UID
comment: //----------------------------------------------------------------------------------------------
comment: //arg: UID - UID of a Detail object [string]
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //. load Detail object serialized as an associative array
comment: //----------------------------------------------------------------------------------------------
comment: //arg: ary - associative array of members and values [array]
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //. save the current object to database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string on success, html report of errors on failure [string]
comment: //: $db-&gt;save(...) will raise an object_updated event if successful
comment: //----------------------------------------------------------------------------------------------
comment: //. check that object is correct before allowing it to be stored in database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string if object passes, warning message if not [string]
comment: //----------------------------------------------------------------------------------------------
comment: //. database table definition and content versioning
comment: //----------------------------------------------------------------------------------------------
comment: //returns: information for constructing SQL queries [array]
comment: //table columns
comment: //these fields will be indexed
comment: //revision history will be kept for these fields
comment: //----------------------------------------------------------------------------------------------
comment: //. serialize this object to an array
comment: //----------------------------------------------------------------------------------------------
comment: //returns: associative array of all members which define this instance [array]
comment: //----------------------------------------------------------------------------------------------
comment: //. serialize this object to xml
comment: //----------------------------------------------------------------------------------------------
comment: //arg: xmlDec - include xml declaration? [bool]
comment: //arg: indent - string with which to indent lines [bool]
comment: //returns: xml serialization of this object [string]
comment: //NOTE: any members which are not XML clean should be marked up before sending
comment: //----------------------------------------------------------------------------------------------
comment: //. make an extended array of data views may need
comment: //----------------------------------------------------------------------------------------------
comment: //returns: associative array of members, metadata and partial views [array]
comment: //% extended array of properties [array:string]
comment: //------------------------------------------------------------------------------------------
comment: //	links
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	convert links, etc
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	javascript
comment: //------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //. delete current object from the database
comment: //----------------------------------------------------------------------------------------------
comment: //: $db-&gt;delete(...) will raise an object_deleted event on success [bool]
comment: //returns: true on success, false on failure [bool]
comment: // nothing to do
string: ''
string: ''
string: 'UID'
string: 'refModule'
string: 'refModel'
string: 'refUID'
string: 'type'
string: 'description'
string: 'value'
string: 'isDefault'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: ''
string: "Database error.&lt;br/&gt;\n"
string: ''
string: ''
string: ''
string: "No UID.&lt;br/&gt;\n"
string: 'module'
string: 'contact'
string: 'model'
string: 'contact_detail'
string: 'archive'
string: 'yes'
string: 'fields'
string: 'UID'
string: 'VARCHAR(33)'
string: 'refModule'
string: 'TEXT'
string: 'refModel'
string: 'TEXT'
string: 'refUID'
string: 'VARCHAR(33)'
string: 'type'
string: 'VARCHAR(50)'
string: 'description'
string: 'VARCHAR(255)'
string: 'value'
string: 'TEXT'
string: 'isDefault'
string: 'VARCHAR(3)'
string: 'createdOn'
string: 'DATETIME'
string: 'createdBy'
string: 'VARCHAR(33)'
string: 'editedOn'
string: 'DATETIME'
string: 'editedBy'
string: 'VARCHAR(33)'
string: 'indices'
string: 'UID'
string: '10'
string: 'refModule'
string: '10'
string: 'refModel'
string: '10'
string: 'refUID'
string: '10'
string: 'type'
string: '10'
string: 'createdOn'
string: ''
string: 'createdBy'
string: '10'
string: 'editedOn'
string: ''
string: 'editedBy'
string: '10'
string: 'nodiff'
string: 'type'
string: 'description'
string: 'value'
string: 'isDefault'
string: 'UID'
string: 'refModule'
string: 'refModel'
string: 'refUID'
string: 'type'
string: 'description'
string: 'value'
string: 'isDefault'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: ''
string: "&lt;kobject type='contact_detail'&gt;\n"
string: "    &lt;UID&gt;"
string: "&lt;/UID&gt;\n"
string: "    &lt;refModule&gt;"
string: "&lt;/refModule&gt;\n"
string: "    &lt;refModel&gt;"
string: "&lt;/refModel&gt;\n"
string: "    &lt;refUID&gt;"
string: "&lt;/refUID&gt;\n"
string: "    &lt;type&gt;"
string: "&lt;/type&gt;\n"
string: "    &lt;description&gt;"
string: "&lt;/description&gt;\n"
string: "    &lt;value&gt;"
string: "&lt;/value&gt;\n"
string: "    &lt;isDefault&gt;"
string: "&lt;/isDefault&gt;\n"
string: "    &lt;createdOn&gt;"
string: "&lt;/createdOn&gt;\n"
string: "    &lt;createdBy&gt;"
string: "&lt;/createdBy&gt;\n"
string: "    &lt;editedOn&gt;"
string: "&lt;/editedOn&gt;\n"
string: "    &lt;editedBy&gt;"
string: "&lt;/editedBy&gt;\n"
string: "&lt;/kobject&gt;\n"
string: "&lt;?xml version='1.0' encoding='UTF-8' ?&gt;\n"
string: 'viewUrl'
string: ''
string: 'viewLink'
string: ''
string: 'editUrl'
string: ''
string: 'editLink'
string: ''
string: 'delUrl'
string: ''
string: 'delLink'
string: ''
string: 'newUrl'
string: ''
string: 'newLink'
string: ''
string: 'ifUrl'
string: ''
string: 'contact'
string: 'contact_detail'
string: 'show'
string: 'viewUrl'
string: '%%serverPath%%contact/showdetail/'
string: 'UID'
string: 'viewLink'
string: "&lt;a href='"
string: 'viewUrl'
string: "'&gt;[ more &amp;gt;gt; ]&lt;/a&gt;"
string: 'contact'
string: 'contact_detail'
string: 'edit'
string: 'edit'
string: 'editUrl'
string: '%%serverPath%%contact/edit/'
string: 'UID'
string: 'editLink'
string: "&lt;a href='"
string: 'editUrl'
string: "'&gt;[ edit ]&lt;/a&gt;"
string: 'contact'
string: 'contact_detail'
string: 'edit'
string: 'delete'
string: 'delUrl'
string: '%%serverPath%%contact/delete/'
string: 'UID'
string: 'delLink'
string: "&lt;a href='"
string: 'delUrl'
string: "'&gt;[ delete ]&lt;/a&gt;"
string: 'ifUrl'
string: 'contact/show'
string: '/refModule_'
string: 'refModule'
string: '/refModel_'
string: 'refModel'
string: '/refUID_'
string: 'refUID'
string: '/'
string: 'extValue'
string: "\n"
string: "&lt;br/&gt;\n"
string: 'value'
string: 'type'
string: 'web page'
string: 'extValue'
string: ''
string: "&lt;a href='"
string: 'value'
string: "' target='"
string: "'&gt;"
string: 'value'
string: "&lt;/a&gt;"
string: 'email address'
string: 'extValue'
string: ''
string: "&lt;a href='mailto:"
string: 'value'
string: "'&gt;"
string: 'value'
string: "&lt;/a&gt;"
string: 'UIDJsClean'
string: 'UID'

<b>scanning file: /var/www/an2google/trunk/modules/contact/models/contact.mod.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	object for managing directory posts
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	member variables (as retieved from database)
comment: //----------------------------------------------------------------------------------------------
comment: // currently loaded record
comment: // database structure
comment: //----------------------------------------------------------------------------------------------
comment: //	constructor
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	load a record by UID or recordAlias
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	save a record
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	verify - check that a record is correct before allowing it to be stored in the database
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	sql information
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	return the data
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make and extended array of all data a view will need
comment: //----------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	links and URLs
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	special types
comment: //------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	install this module
comment: //----------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	create directory table if it does not exist
comment: //------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	delete the current entry
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make a record the default for its type
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	set default for all contact detail types for which there is only one entry
comment: //----------------------------------------------------------------------------------------------
string: ''
string: ''
string: 'contact'
string: ''
string: ''
string: 'UID'
string: "UID not present.\n"
string: 'table'
string: 'contact'
string: 'fields'
string: 'UID'
string: 'VARCHAR(30)'
string: 'refUID'
string: 'VARCHAR(30)'
string: 'refModule'
string: 'VARCHAR(255)'
string: 'type'
string: 'VARCHAR(50)'
string: 'description'
string: 'VARCHAR(255)'
string: 'value'
string: 'TEXT'
string: 'isDefault'
string: 'VARCHAR(4)'
string: 'indices'
string: 'UID'
string: '10'
string: 'refUID'
string: '10'
string: 'refModule'
string: '10'
string: 'type'
string: '10'
string: 'nodiff'
string: 'UID'
string: 'refModule'
string: 'refUID'
string: 'ifUrl'
string: '/contact/refModule_'
string: 'refModule'
string: '/refUID_'
string: 'refUID'
string: '/'
string: 'mkDefaultUrl'
string: ''
string: 'mkDefaultLink'
string: ''
string: 'editUrl'
string: ''
string: 'editLink'
string: ''
string: 'newUrl'
string: ''
string: 'newLink'
string: ''
string: 'delUrl'
string: ''
string: 'delLink'
string: ''
string: 'refModule'
string: 'editcontact'
string: ''
string: 'editUrl'
string: '/contact/edit/'
string: 'UID'
string: 'editLink'
string: "&lt;a href='"
string: 'editUrl'
string: "'&gt;[edit]&lt;/a&gt;"
string: 'newUrl'
string: 'ifUrl'
string: 'new/'
string: 'newLink'
string: "&lt;a href='"
string: 'newUrl'
string: "'&gt;[create new]&lt;/a&gt;"
string: 'delUrl'
string: '/contact/delete/'
string: 'UID'
string: 'delLink'
string: "&lt;a href='"
string: 'delUrl'
string: "'&gt;[delete]&lt;/a&gt;"
string: 'isDefault'
string: 'true'
string: 'mkDefaultUrl'
string: '/contact/mkdefault/'
string: 'UID'
string: 'mkDefaultLink'
string: "&lt;a href='"
string: "'&gt;[mk default]&lt;/a&gt;"
string: 'mkDefaultLink'
string: "(default)"
string: 'extValue'
string: "\n"
string: "&lt;br/&gt;\n"
string: 'value'
string: 'type'
string: 'web page'
string: 'extValue'
string: "&lt;a href='"
string: 'value'
string: "' target='"
string: "'&gt;"
string: 'value'
string: "&lt;/a&gt;"
string: 'email address'
string: 'extValue'
string: "&lt;a href='mailto:"
string: 'value'
string: "'&gt;"
string: 'value'
string: "&lt;/a&gt;"
string: "&lt;h3&gt;Installing Contact Details Module&lt;/h3&gt;\n"
string: 'contact'
string: 'created contact table and indices...&lt;br/&gt;'
string: 'contact table already exists...&lt;br/&gt;'
string: 'contact'
string: 'UID'
string: "UPDATE contact SET isDefault='false'"
string: " WHERE refUID='"
string: "'"
string: " AND refModule='"
string: "'"
string: " AND type='"
string: "'"
string: "UPDATE contact SET isDefault='true' WHERE UID='"
string: "'"
string: "select type, count(UID) as num from contact"
string: " where refUID='"
string: "' group by type"
string: 'num'
string: "UPDATE contact SET isDefault='true'"
string: " WHERE refUID='"
string: "'"
string: " AND type='"
string: 'type'
string: "'"

<b>scanning file: /var/www/an2google/trunk/modules/contact/inc/install.inc.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	install script for Contact module
comment: //--------------------------------------------------------------------------------------------------
comment: //+	reports are human-readable HTML, with script-readable HTML comments
comment: //--------------------------------------------------------------------------------------------------
comment: //|	install the Contact module
comment: //--------------------------------------------------------------------------------------------------
comment: //returns: html report or false if not authorized [string][bool]
comment: //----------------------------------------------------------------------------------------------
comment: //	create or upgrade Contact_Detail table
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	done
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
comment: //|	discover if this module is installed
comment: //--------------------------------------------------------------------------------------------------
comment: //:	if installed correctly report will contain HTML comment &lt;!-- installed correctly --&gt;
comment: //returns: HTML installation status report [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	ensure the table which stores Detail objects exists and is correct
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	done
comment: //----------------------------------------------------------------------------------------------
string: 'core/dbdriver/mysqladmin.dbd.php'
string: 'modules/contact/models/detail.mod.php'
string: 'admin'
string: ''
string: 'admin'
string: ''
string: '&lt;!-- table installed correctly --&gt;'
string: '&lt;!-- module installed correctly --&gt;'

<b>scanning file: /var/www/an2google/trunk/modules/contact/actions/show.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	show Contact_Details owned by some other object
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: permissions check here
comment: //----------------------------------------------------------------------------------------------
comment: //	show the page
comment: //----------------------------------------------------------------------------------------------
string: 'modules/contact/models/detail.mod.php'
string: 'refUID'
string: 'refUID not given'
string: 'refModel'
string: 'no refModel'
string: 'refModule'
string: 'no refModule'
string: 'refModule'
string: 'refModel'
string: 'refUID'
string: 'no such refModule'
string: 'no such owner'
string: 'modules/contact/actions/contact.if.page.php'
string: 'refUID'
string: 'refModel'
string: 'refModule'

<b>scanning file: /var/www/an2google/trunk/modules/contact/actions/save.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	save changes to a contact detail (if permissions allow) and redirect to listing iframe
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check permissions and POST variables
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	load and update the object
comment: //----------------------------------------------------------------------------------------------
comment: //	case 'refmodule':	$model-&gt;refModule = $utils-&gt;cleanString($value); break;
comment: //	case 'refmodel':	$model-&gt;refModel = $utils-&gt;cleanString($value); break;
comment: //	case 'refuid':	$model-&gt;refUID = $utils-&gt;cleanString($value); break;
comment: //----------------------------------------------------------------------------------------------
comment: //	check that object was saved and redirect
comment: //----------------------------------------------------------------------------------------------
string: 'modules/contact/models/detail.mod.php'
string: 'action'
string: 'Action not specified.'
string: 'saveDetail'
string: 'action'
string: 'Action not supported.'
string: 'UID'
string: 'UID not POSTed.'
string: 'UID'
string: "could not load Detail $UID"
string: 'contact'
string: 'contact_detail'
string: 'edit'
string: 'You are not authorized to edit this Detail.'
string: 'type'
string: 'description'
string: 'value'
string: 'isdefault'
string: ''
string: 'Saved changes to contact'
string: 'ok'
string: 'Could not save contact:&lt;br/&gt;'
string: 'bad'
string: 'contact/show'
string: '/refModule_'
string: '/refModel_'
string: '/refUID_'
string: '/'
string: 'return'
string: 'return'

<b>scanning file: /var/www/an2google/trunk/modules/contact/actions/new.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	add a new contact detail to some object
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	all OK, make the new obejct
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	redirect to edit form
comment: //----------------------------------------------------------------------------------------------
string: 'modules/contact/models/detail.mod.php'
string: 'refUID'
string: 'refUID not given'
string: 'refModel'
string: 'no refModel'
string: 'refModule'
string: 'no refModule'
string: 'refModule'
string: 'refModel'
string: 'refUID'
string: 'contacts-edit'
string: 'not authorized to edit contact details'
string: 'new contact'
string: ''
string: 'contact/edit/'
string: 'could not create new contact detail:'

<b>scanning file: /var/www/an2google/trunk/modules/contact/actions/edit.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	action to edit a contact detail (in iframe)
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check reference and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the page
comment: //----------------------------------------------------------------------------------------------
string: 'modules/contact/models/detail.mod.php'
string: ''
string: 'no reference given'
string: 'contact detail not found'
string: 'contacts-edit'
string: '403 - not authorised'
string: 'modules/contact/actions/edit.if.page.php'
string: 'refModule'
string: 'refModel'
string: 'refUID'
string: 'UID'

<b>scanning file: /var/www/an2google/trunk/modules/contact/actions/delete.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	delete a Contact_Detail object
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check reference and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	delete and redirect back to listing page
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: checks		
string: 'modules/contact/models/detail.mod.php'
string: ''
string: 'No contact detail specified'
string: 'Contact detail not found.'
string: 'contacts-edit'
string: 'Not authorized'
string: "Contact deleted.&lt;br/&gt;"
string: 'ok'
string: 'ifUrl'

<b>scanning file: /var/www/an2google/trunk/modules/contact/actions/default.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	default action of contacts module is to list contact details
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/contact/actions/show.act.php'

<b>scanning file: /var/www/an2google/trunk/modules/contact/actions/add.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	create a new Contact_Detail object and associate with an owner object
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //*	check permissions and any POST variables
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //*	create the object
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //*	check that object was created and redirect
comment: //----------------------------------------------------------------------------------------------
string: 'modules/contact/models/detail.mod.php'
string: 'contact'
string: 'contact_detail'
string: 'new'
string: 'You are not authorized to create new Details.'
string: 'refModule'
string: 'reference module not specified'
string: 'refModel'
string: 'reference model not specified'
string: 'refUID'
string: 'reference object UID not specified'
string: 'module'
string: 'specified module does not exist'
string: 'model'
string: 'UID'
string: 'specified owner does not exist in database'
string: 'refmodule'
string: 'refmodel'
string: 'refuid'
string: 'type'
string: 'description'
string: 'value'
string: 'isdefault'
string: 'contact'
string: '/refModule_'
string: '/refModel_'
string: '/refUID_'
string: ''
string: "Added "
string: "&lt;br/&gt;"
string: 'Could not add contact detail:&lt;br/&gt;'

<b>scanning file: /var/www/an2google/trunk/modules/comments/views/summarynav.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	summary
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: UID - UID of a comment [string]
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/comments/models/comment.mod.php'
string: 'comments'
string: 'Comment_Comment'
string: 'show'
string: 'TODO:UIDHERE'
string: ''
string: 'UID'
string: 'UID'
string: 'modules/comments/views/summarynav.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/comments/views/summarylist.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	summary list
comment: //--------------------------------------------------------------------------------------------------
comment: //opt: page - page no to display (default 0) [string]
comment: //opt: num - number of records per page (default 30) [string]
comment: //%	number of items per page [int]
comment: //%	page number, starts from 1 [int]
comment: //%	starting position within SQL results [int]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	arguments
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	query database and make block
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/comments/models/comment.mod.php'
string: ''
string: 'comments'
string: 'Comment_Comment'
string: 'list'
string: ''
string: 'comments'
string: 'Comment_Comment'
string: 'show'
string: ''
string: 'num'
string: 'num'
string: 'page'
string: 'page'
string: 'comments_comment'
string: '*'
string: ''
string: 'createdOn'
string: 'modules/comments/views/summary.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/comments/views/summary.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	summary
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: UID - UID of comment [string]
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/comments/models/comment.mod.php'
string: 'comments'
string: 'Comment_Comment'
string: 'show'
string: 'TODO:UIDHERE'
string: ''
string: 'UID'
string: 'UID'
string: 'modules/comments/views/summary.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/comments/views/show.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	show
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - recordAlias or UID of post to edit [string]
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/comments/models/comment.mod.php'
string: 'raUID'
string: 'raUID'
string: ''
string: 'modules/comments/show.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/comments/views/newlink.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	create a link to add a new comment to something
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: refModule - the module that will own the new comment [string]
comment: //arg: refUID - the record that will own the new announcment [string]
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/comments/models/comment.mod.php'
string: 'comments'
string: 'Comment_Comment'
string: 'edit'
string: 'refModule'
string: 'refUID'
string: "&lt;a href='/comments/new/refModule_"
string: 'refModule'
string: "/refUID_"
string: 'refUID'
string: "/'&gt;[add a new comment]&lt;/a&gt;"

<b>scanning file: /var/www/an2google/trunk/modules/comments/views/menu.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	menu
comment: //--------------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/comments/models/comment.mod.php'
string: 'modules/comments/menu.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/comments/views/listnavjs.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	list all most recent x comments owned by a particular record on a given module
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: refUID - record which owns the comments [string]
comment: //arg: refModel - type of object [string]
comment: //arg: refModule - module which owns the record [string]
comment: //opt: num - number of records per page (default is 4) [string]
comment: //%	default number of comments per page [int]
comment: //%	return value [string]
comment: //%	javascript [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check permissions and arguments
comment: //----------------------------------------------------------------------------------------------
comment: //if ($user-&gt;authHas('comments', 'Comment_Comment', 'list', 'TODO:UIDHERE') == false) { return false; }
comment: //if ($user-&gt;authHas('comments', 'Comment_Comment', 'show', 'TODO:UIDHERE') == false) { return false; }
comment: //----------------------------------------------------------------------------------------------
comment: //	load comments from database
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	query database
comment: //----------------------------------------------------------------------------------------------
comment: // nothing to do?
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/comments/models/comment.mod.php'
string: ''
string: ''
string: 'modules/comments/views/summarynav.block.php'
string: '%%serverPath%%modules/comments/js/comments.js'
string: 'public'
string: '[[:users::pleaselogin:]]'
string: 'refModule'
string: 'refUID'
string: 'num'
string: 'num'
string: "refModule='"
string: 'refModule'
string: "'"
string: "refUID='"
string: 'refUID'
string: "'"
string: 'comments_comment'
string: '*'
string: 'createdOn DESC'
string: "&lt;script src='"
string: "' language='javascript'&gt;&lt;/script&gt;"
string: "&lt;script language='javascript'&gt;\n"
string: "var commentsPageSize = "
string: ";\n"
string: "var commentsPage = 0;\n"
string: "var aryComments = new Array();\n"
string: ''
string: 'b64c'
string: 'UID'
string: "aryComments.push(new Array(\""
string: 'UID'
string: "\", b64c"
string: 'UID'
string: "));\n\n"
string: ""
string: "&lt;/script&gt;\n"
string: "&lt;div id='divCommentsJs'&gt;&lt;span class='ajaxmsg'&gt;Loading comments...&lt;/span&gt;&lt;/div&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/comments/views/listnav.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	list all most recent x comments owned by a particular record on a given module, naarow for nav
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: refModule - a kapenta module [string]
comment: //arg: refModel - type of object which may have comments [string]
comment: //arg: refUID - UID of object which owns comments [string]
comment: //opt: num - number of records per page (default 10) [string]
comment: //TODO: pagination here
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	load a page of comments from the database
comment: //----------------------------------------------------------------------------------------------
comment: //$sql = "select * from Comments_Comment "
comment: //	 . "where refModule='" . $db-&gt;addMarkup($args['refModule']) . "' "
comment: //	 . "and refUID='" . $db-&gt;addMarkup($args['refUID']) . "' "
comment: //	 . "order by createdOn DESC limit " . $db-&gt;addMarkup($num) . "";
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/comments/models/comment.mod.php'
string: ''
string: 'refModule'
string: '(no refModule)'
string: 'refModel'
string: '(no refModel)'
string: 'refUID'
string: '(no refUID)'
string: 'refModule'
string: 'refModel'
string: 'refUID'
string: 'comments-show'
string: ''
string: 'num'
string: 'num'
string: "refModule='"
string: 'refModule'
string: "'"
string: "refUID='"
string: 'refUID'
string: "'"
string: 'comments_comment'
string: '*'
string: 'createdOn DESC'
string: 'modules/comments/views/summarynav.block.php'
string: "(no comments at present)&lt;br/&gt;"

<b>scanning file: /var/www/an2google/trunk/modules/comments/views/listjs.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	list all most recent x comments owned by a particular record on a given module
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: refUID - record which owns the comments [string]
comment: //arg: refModule - module which owns the record [string]
comment: //opt: num - number of records per page (default 10) [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	query database
comment: //----------------------------------------------------------------------------------------------
comment: // nothing to do?
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/comments/models/comment.mod.php'
string: 'public'
string: '[[:users::pleaselogin:]]'
string: 'comments'
string: 'Comment_Comment'
string: 'list'
string: 'TODO:UIDHERE'
string: 'comments'
string: 'Comment_Comment'
string: 'show'
string: 'TODO:UIDHERE'
string: 'refModule'
string: 'refUID'
string: 'num'
string: 'num'
string: ''
string: ''
string: "select * from Comments_Comment "
string: "where refModule='"
string: 'refModule'
string: "' "
string: "and refUID='"
string: 'refUID'
string: "' "
string: "order by createdOn DESC"
string: 'modules/comments/views/summary.block.php'
string: 'modules/comments/js/comments.js'
string: "&lt;script src='"
string: "' language='javascript'&gt;&lt;/script&gt;"
string: "&lt;script language='javascript'&gt;\n"
string: "var commentsPageSize = "
string: ";\n"
string: "var commentsPage = 0;\n"
string: "var aryComments = new Array();\n"
string: ''
string: 'b64c'
string: 'UID'
string: "aryComments.push(new Array(\""
string: 'UID'
string: "\", b64c"
string: 'UID'
string: "));\n\n"
string: ""
string: "&lt;/script&gt;\n"
string: "&lt;div id='divCommentsJs'&gt;&lt;span class='ajaxmsg'&gt;Loading comments...&lt;/span&gt;&lt;/div&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/comments/views/list.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	list all most recent x comments owned by a particular record on a given module
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: refModule - module to check for permissions on [string]
comment: //arg: refModel - type of object which may on comments [string]
comment: //arg: refUID - object which may own comments [string]
comment: //opt: num - number of records per page [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: // blanket permissions on comments
comment: // permission granted by reference module
comment: //----------------------------------------------------------------------------------------------
comment: //	load a page of comments from the database
comment: //----------------------------------------------------------------------------------------------
comment: //$sql = "select * from Comments_Comment "
comment: //	 . "where refModule='" . $db-&gt;addMarkup($args['refModule']) . "' "
comment: //	 . "and refUID='" . $db-&gt;addMarkup($args['refUID']) . "' "
comment: //	 . "order by createdOn DESC limit " . $db-&gt;addMarkup($num) . "";
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	set triggers
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/comments/models/comment.mod.php'
string: ''
string: 'refModule'
string: '(no module)'
string: 'refModel'
string: '(no model)'
string: 'refUID'
string: '(no UID)'
string: 'num'
string: 'num'
string: 'refModule'
string: 'refModel'
string: 'refUID'
string: 'comments'
string: 'Comment_Comment'
string: 'list'
string: 'comments'
string: 'Comment_Comment'
string: 'show'
string: 'comments-show'
string: ''
string: "refModule='"
string: 'refModule'
string: "'"
string: "refUID='"
string: 'refUID'
string: "'"
string: 'comments_comment'
string: '*'
string: 'createdOn DESC'
string: 'modules/comments/views/summary.block.php'
string: "(no comments at present)"
string: 'rawblock'
string: "&lt;div id='blockCommentsL"
string: "'&gt;\n"
string: "&lt;!-- REGISTERBLOCK:blockCommentsL"
string: ":"
string: " --&gt;"
string: "&lt;/div&gt;"
string: 'comment-'
string: '-'
string: "set trigger on channel: $channel"
string: 'comments'
string: 'rawblock'

<b>scanning file: /var/www/an2google/trunk/modules/comments/views/image.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	find the first picture on the comment (if there is one) or return info icon
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - UID of comment  [string]
comment: //opt: size - width100, width200, width300, width570, thumb, thumbsm or thumb90 (default width300) [string]
comment: //opt: link - link to larger image (yes|no) [string]
comment: //opt: commentUID - overrides raUID [string]
comment: // no images found for this group
string: 'modules/comments/models/comment.mod.php'
string: 'width300'
string: 'yes'
string: 'commentUID'
string: 'raUID'
string: 'commentUID'
string: 'raUID'
string: 'link'
string: 'no'
string: 'no'
string: 'size'
string: 'size'
string: 'thumb'
string: 'thumb'
string: 'size'
string: 'thumbsm'
string: 'thumbsm'
string: 'size'
string: 'thumb90'
string: 'thumb90'
string: 'size'
string: 'width100'
string: 'width100'
string: 'size'
string: 'width200'
string: 'width200'
string: 'size'
string: 'width300'
string: 'width300'
string: 'size'
string: 'width570'
string: 'width570'
string: 'raUID'
string: "select * from Images_Image where refModule='comments' and refUID='"
string: "' order by weight"
string: 'yes'
string: "&lt;a href='/images/show/"
string: 'alias'
string: "'&gt;"
string: "&lt;img src='/images/"
string: "/"
string: 'alias'
string: "' border='0' alt='"
string: "'&gt;&lt;/a&gt;"
string: "&lt;img src='/images/"
string: "/"
string: 'alias'
string: "' border='0' alt='"
string: "'&gt;"
string: "&lt;img src='/themes/clockface/images/info.png' border='0'&gt;"

<b>scanning file: /var/www/an2google/trunk/modules/comments/views/editform.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	editform
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - recordAlias or UID of comment to edit [string]
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/comments/models/comment.mod.php'
string: 'comments'
string: 'Comment_Comment'
string: 'edit'
string: 'raUID'
string: 'raUID'
string: ''
string: 'modules/comments/editform.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/comments/views/channelauth.fn.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //|	generate authorization for channel subscriptions
comment: //-------------------------------------------------------------------------------------------------
comment: //arg: channel - id of channel [string]
comment: // TODO: check with module which owns comments
string: 'channel'
string: ''
string: 'public'
string: 'yes'

<b>scanning file: /var/www/an2google/trunk/modules/comments/views/addcommentformnavjs.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	form to add new comments, submitted by xmlHTTPrequest
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: refModule - module to which comment is exported, required [string]
comment: //arg: refModel - type of object which owns the comment, required [string]
comment: //arg: refUID - UID of object which owns the comment, required [string]
comment: //arg: return - page to return to, required [string]
comment: //opt: invitation - text encouraging someone to leave a comment, optional [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/comments/models/comment.mod.php'
string: 'Add a comment'
string: ''
string: 'public'
string: '[[:users::pleaselogin:]]'
string: 'refModule'
string: '(no refModule)'
string: 'refModel'
string: '(no refModel)'
string: 'refUID'
string: '(no refUID)'
string: 'return'
string: '(no return destination)'
string: 'refModule'
string: 'refModel'
string: 'refUID'
string: 'invitation'
string: 'invitiation'
string: 'comments-add'
string: ''
string: 'invitation'
string: 'refModule'
string: 'refModel'
string: 'refUID'
string: 'return'
string: 'return'
string: 'modules/comments/views/addcommentnavjs.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/comments/views/addcommentformnav.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	form to add new comments, narrow version for the nav
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: refModule - owner module to which this is exported, required [string]
comment: //arg: refUID - type of object which owns the comment, required [string]
comment: //arg: refUID - object which owns the comment, required [string]
comment: //arg: return - page to return to, required [string]
comment: //opt: invitation - text encouraging someone to leave a comment, optional [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check permissions and arguments
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/comments/models/comment.mod.php'
string: ''
string: 'Add a comment'
string: 'refModule'
string: '(no refModule)'
string: 'refModel'
string: '(no refModel)'
string: 'refUID'
string: '(no refUID)'
string: 'return'
string: '(no return)'
string: 'refModule'
string: 'refModel'
string: 'refUID'
string: 'invitation'
string: 'invitiation'
string: 'comments-add'
string: ''
string: 'invitation'
string: 'refModule'
string: 'refModel'
string: 'refUID'
string: 'return'
string: 'return'
string: 'modules/comments/views/addcommentnav.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/comments/views/addcommentformjs.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	form to add new comments, submitted by xmlHTTPrequest
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: refModule - module which owns the object which may have comments, required [string]
comment: //arg: refModel - type of object, required [string]
comment: //arg: refUID - UID of object which owns the comment, required [string]
comment: //arg: return - page to return to, required [string]
comment: //opt: invitation - text encouraging someone to leave a comment, optional [string]
comment: //%	default call to action [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/comments/models/comment.mod.php'
string: 'Add a comment'
string: ''
string: 'public'
string: '[[:users::pleaselogin:]]'
string: 'refModule'
string: ''
string: 'refModel'
string: ''
string: 'refUID'
string: ''
string: 'return'
string: ''
string: 'invitation'
string: 'invitiation'
string: 'refModule'
string: 'refModel'
string: 'comments-add'
string: 'refUID'
string: ''
string: 'invitation'
string: 'refModule'
string: 'refModule'
string: 'refModel'
string: 'refModel'
string: 'refUID'
string: 'refUID'
string: 'return'
string: 'return'
string: 'modules/comments/views/addcommentjs.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/comments/views/addcommentform.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	form to add new comments
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: refModule - module to which comment is exported, required [string]
comment: //arg: refModel - type of object which owns the comment, required [string]
comment: //arg: refUID - object which owns the comment, required [string]
comment: //arg: return - page to return to, required [string]
comment: //opt: invitation - text encouraging someone to leave a comment, optional [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/comments/models/comment.mod.php'
string: 'Add a comment'
string: ''
string: 'refModule'
string: '(no refModule)'
string: 'refModel'
string: '(no refModel)'
string: 'refUID'
string: '(no refUID)'
string: 'return'
string: 'refModule'
string: 'refModel'
string: 'refUID'
string: 'invitation'
string: 'invitiation'
string: 'comments-add'
string: ''
string: 'invitation'
string: 'refModule'
string: 'refModel'
string: 'refUID'
string: 'return'
string: 'return'
string: 'modules/comments/views/addcomment.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/comments/models/comment.mod.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	object for to represent user comments
comment: //--------------------------------------------------------------------------------------------------
comment: //+	comments are owned by some record on another module (allowing comments to have comments would
comment: //+  cause threading, but we can do without that for now, complicates and clutters things, and
comment: //+	causes discussions to fragment).
comment: //+
comment: //+	comments can be retracted by whoever made them, and can be edited or deleted by admins
comment: //----------------------------------------------------------------------------------------------
comment: //	member variables (as retieved from database)
comment: //----------------------------------------------------------------------------------------------
comment: //_	currently loaded database record [array]
comment: //_	database table definition [array]
comment: //_	set to true when an object has been loaded [bool]
comment: //_ UID [string]
comment: //_ module [string]
comment: //_ model [string]
comment: //_ ref:*-* [string]
comment: //_ wyswyg [string]
comment: //_ datetime [string]
comment: //_ ref:Users_User [string]
comment: //_ datetime [string]
comment: //_ ref:Users_User [string]
comment: //----------------------------------------------------------------------------------------------
comment: //. constructor
comment: //----------------------------------------------------------------------------------------------
comment: //opt: UID - UID of a Comment object [string]
comment: // initialise table schema
comment: // try load an object from the database
comment: // check if we did
comment: // make new object
comment: // initialize
comment: //----------------------------------------------------------------------------------------------
comment: //. load an object from the db given its UID
comment: //----------------------------------------------------------------------------------------------
comment: //arg: UID - UID of a Comment object [string]
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //. load Comment object serialized as an associative array
comment: //----------------------------------------------------------------------------------------------
comment: //arg: ary - associative array of members and values [array]
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //. save the current object to database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string on success, html report of errors on failure [string]
comment: //: $db-&gt;save(...) will raise an object_updated event if successful
comment: //----------------------------------------------------------------------------------------------
comment: //.	verify - check that a record is correct before allowing it to be stored in the database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string if object passes, warning message if not [string]
comment: //----------------------------------------------------------------------------------------------
comment: //. database table definition and content versioning
comment: //----------------------------------------------------------------------------------------------
comment: //returns: information for constructing SQL queries [array]
comment: //table columns
comment: //these fields will be indexed
comment: //revision history will be kept for these fields
comment: //----------------------------------------------------------------------------------------------
comment: //. serialize this object to an array
comment: //----------------------------------------------------------------------------------------------
comment: //returns: associative array of all members which define this instance [array]
comment: //----------------------------------------------------------------------------------------------
comment: //.	make an extended array of all data a view will need
comment: //----------------------------------------------------------------------------------------------
comment: //returns: extended array of member variables and metadata [array]
comment: //------------------------------------------------------------------------------------------
comment: //	links
comment: //------------------------------------------------------------------------------------------
comment: //-----------------------------------------------------------------------------------------
comment: //	retraction URL
comment: //-----------------------------------------------------------------------------------------
comment: //-----------------------------------------------------------------------------------------
comment: //	user details
comment: //-----------------------------------------------------------------------------------------
comment: //-----------------------------------------------------------------------------------------
comment: //	summary 
comment: //-----------------------------------------------------------------------------------------
comment: //-----------------------------------------------------------------------------------------
comment: //	marked up for wyswyg editor
comment: //-----------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //. delete current object from the database
comment: //----------------------------------------------------------------------------------------------
comment: //: $db-&gt;delete(...) will raise an object_deleted event on success [bool]
comment: //returns: true on success, false on failure [bool]
comment: // nothing to do
string: ''
string: ''
string: 'UID'
string: 'refModule'
string: 'refModel'
string: 'refUID'
string: 'comment'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: ''
string: "Database error.&lt;br/&gt;\n"
string: ''
string: ''
string: ''
string: "No UID.&lt;br/&gt;\n"
string: "Nothing said.\n"
string: 'module'
string: 'comments'
string: 'model'
string: 'comments_comment'
string: 'fields'
string: 'UID'
string: 'VARCHAR(33)'
string: 'refModule'
string: 'VARCHAR(50)'
string: 'refModel'
string: 'VARCHAR(50)'
string: 'refUID'
string: 'VARCHAR(33)'
string: 'comment'
string: 'TEXT'
string: 'createdOn'
string: 'DATETIME'
string: 'createdBy'
string: 'VARCHAR(33)'
string: 'editedOn'
string: 'DATETIME'
string: 'editedBy'
string: 'VARCHAR(33)'
string: 'indices'
string: 'UID'
string: '10'
string: 'refModule'
string: '10'
string: 'refModel'
string: '10'
string: 'refUID'
string: '10'
string: 'createdOn'
string: ''
string: 'createdBy'
string: '10'
string: 'editedOn'
string: ''
string: 'editedBy'
string: '10'
string: 'nodiff'
string: 'UID'
string: 'refModule'
string: 'refModel'
string: 'refUID'
string: 'comment'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: 'editUrl'
string: ''
string: 'editLink'
string: ''
string: 'viewUrl'
string: ''
string: 'viewLink'
string: ''
string: 'delUrl'
string: ''
string: 'delLink'
string: ''
string: 'newUrl'
string: ''
string: 'newLink'
string: ''
string: 'comments'
string: 'Comment_Comment'
string: 'show'
string: 'viewUrl'
string: '%%serverPath%%comments/'
string: 'viewLink'
string: "&lt;a href='"
string: 'viewUrl'
string: "'&gt;[read on &amp;gt;&amp;gt;]&lt;/a&gt;"
string: 'comments'
string: 'Comment_Comment'
string: 'edit'
string: 'editUrl'
string: '%%serverPath%%comments/edit/'
string: 'editLink'
string: "&lt;a href='"
string: 'editUrl'
string: "'&gt;[edit]&lt;/a&gt;"
string: 'comments'
string: 'Comment_Comment'
string: 'edit'
string: 'delUrl'
string: '%%serverPath%%comments/confirmdelete/UID_'
string: '/'
string: 'delLink'
string: "&lt;a href='"
string: 'delUrl'
string: "'&gt;[delete]&lt;/a&gt;"
string: 'comments'
string: 'Comment_Comment'
string: 'new'
string: 'newUrl'
string: "%%serverPath%%comments/new/"
string: 'newLink'
string: "&lt;a href='"
string: 'newUrl'
string: "'&gt;[add new comment]&lt;/a&gt;"
string: 'createdBy'
string: 'userUrl'
string: '/users/profile/'
string: 'userName'
string: 'userLink'
string: "&lt;a href='"
string: 'userUrl'
string: "'&gt;"
string: 'userName'
string: "&lt;/a&gt;"
string: 'retractUrl'
string: ''
string: 'retractLink'
string: ''
string: 'createdBy'
string: 'comments'
string: 'Comment_Comment'
string: 'retractall'
string: 'retractUrl'
string: '/comments/retract/'
string: 'retractLink'
string: "&lt;a href='"
string: 'retractUrl'
string: "'&gt;[retract]&lt;/a&gt;"
string: 'userName'
string: ' '
string: 'userUrl'
string: '/users/profile/'
string: 'userLink'
string: "&lt;a href='"
string: 'userUrl'
string: "'&gt;"
string: 'userName'
string: "&lt;/a&gt;"
string: 'userThumb'
string: "[[:images::default::refModule=users::size=thumbsm::link=no"
string: "::refUID="
string: ':]]'
string: 'contentHtml'
string: "&gt;\n"
string: "&gt;"
string: 'comment'
string: 'contentHtml'
string: "\n"
string: "&lt;br/&gt;\n"
string: 'contentHtml'
string: 'summary'
string: 'comment'
string: 'contentJs'
string: 'comment'
string: 'contentJs'
string: "'"
string: '--squote--'
string: 'contentJs'
string: 'contentJs'
string: "'"
string: '--dquote--'
string: 'contentJs'

<b>scanning file: /var/www/an2google/trunk/modules/comments/inc/relationships.inc.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	relationships between comments and users
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: refModel - type of object [string]
comment: //arg: UID - UID of a Comments_Comment object [string]
comment: //arg: relationship - between this object and a user [string]
comment: //arg: userUID - UID of the user related to this object [string]
comment: //returns: true if the given relationship exists, otherwise false [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //	get the user we want to know about
comment: //----------------------------------------------------------------------------------------------	
comment: //----------------------------------------------------------------------------------------------
comment: //	relationships of Comments_Comment object
comment: //----------------------------------------------------------------------------------------------
comment: // try load the object
comment: // check that we did
comment: //TODO: other relationships here
string: 'modules/comments/models/comment.mod.php'
string: 'comments_comment'
string: 'creator'
string: 'Unknown model: '
string: 'bug'

<b>scanning file: /var/www/an2google/trunk/modules/comments/inc/install.inc.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	install script for Comments module
comment: //--------------------------------------------------------------------------------------------------
comment: //+	reports are human-readable HTML, with script-readable HTML comments
comment: //--------------------------------------------------------------------------------------------------
comment: //|	install the Comments module
comment: //--------------------------------------------------------------------------------------------------
comment: //returns: html report or false if not authorized [string][bool]
comment: //----------------------------------------------------------------------------------------------
comment: //	create or upgrade Comments_Comment table
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	copy all records from previous table
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	done
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
comment: //|	discover if this module is installed
comment: //--------------------------------------------------------------------------------------------------
comment: //:	if installed correctly report will contain HTML comment &lt;!-- installed correctly --&gt;
comment: //returns: HTML installation status report [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	ensure the table which stores Comment objects exists and is correct
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	done
comment: //----------------------------------------------------------------------------------------------
string: 'core/dbdriver/mysqladmin.dbd.php'
string: 'modules/comments/models/comment.mod.php'
string: 'admin'
string: ''
string: 'comments'
string: "&lt;b&gt;moved $count records from 'comments' table.&lt;/b&gt;&lt;br/&gt;"
string: 'admin'
string: ''
string: '&lt;!-- table installed correctly --&gt;'
string: '&lt;!-- module installed correctly --&gt;'

<b>scanning file: /var/www/an2google/trunk/modules/comments/inc/callbacks.inc.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	callbacks allow modules to interact with being necessarily dependant on one another
comment: //--------------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
comment: //	when a record is deleted on another module
comment: //--------------------------------------------------------------------------------------------------
comment: // * args['table']  = table the record belonged to
comment: // * args['UID'] = UID of the record which was deleted
comment: //----------------------------------------------------------------------------------------------
comment: //	discover if any images belonging this record and delete them
comment: //----------------------------------------------------------------------------------------------
string: 'modules/comments/models/comments.mod.php'
string: 'module'
string: 'UID'
string: "select UID from Comments_Comment "
string: "where refUID='"
string: 'UID'
string: "' "
string: "and refModule='"
string: 'module'
string: "'"
string: 'UID'
string: ""
string: 'sMessage'
string: "Deleted comment posted on "
string: " by "
string: "[[:users::name::"
string: ":]] &lt;br/&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/comments/events/object_updated.on.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //|	fired when an object is saved to database
comment: //-------------------------------------------------------------------------------------------------
comment: //arg: module - module which owned the deleted object [string]
comment: //arg: model - type of deleted object [string]
comment: //arg: UID - UID of deleted object [string]
comment: //---------------------------------------------------------------------------------------------
comment: //	pull triggers
comment: //---------------------------------------------------------------------------------------------
comment: //-------------------------------------------------------------------------------------------------
string: 'modules/comments/models/comment.mod.php'
string: 'in comments callback: '
string: 'module'
string: 'module'
string: 'model'
string: 'UID'
string: 'data'
string: 'comments'
string: 'module'
string: 'in comments callback, setting triggers '
string: 'comments'
string: 'comment-any'
string: 'refModel'
string: 'data'
string: 'refUID'
string: 'data'
string: 'comment-'
string: 'data'
string: 'refModel'
string: '-'
string: 'data'
string: 'refUID'
string: 'setting trigger on channel: '
string: 'comments'
string: 'createdBy'
string: 'data'
string: 'comments'
string: 'comment-by-'
string: 'data'
string: 'createdBy'

<b>scanning file: /var/www/an2google/trunk/modules/comments/events/object_deleted.on.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //	fired when a record is deleted
comment: //-------------------------------------------------------------------------------------------------
comment: //arg: module - module which owned the deleted record
comment: //arg: UID - UID of deleted record
comment: //----------------------------------------------------------------------------------------------
comment: //	delete any comments owned by this record
comment: //----------------------------------------------------------------------------------------------
comment: //-------------------------------------------------------------------------------------------------
string: 'modules/comments/models/comment.mod.php'
string: 'module'
string: 'UID'
string: "refUID='"
string: 'UID'
string: "'"
string: "refModule='"
string: 'module'
string: "'"
string: 'comments_comment'
string: '*'
string: ''
string: ''
string: ''

<b>scanning file: /var/www/an2google/trunk/modules/comments/actions/retract.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	retract a comment (users can retract their own comments, admins can just blast away)
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check reference, permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	blank the comment body
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	return to page comment was retected from, or user profile if none supplied
comment: //----------------------------------------------------------------------------------------------
comment: // TODO, conside the security implications of this
string: 'modules/comments/models/comment.mod.php'
string: ''
string: 'comments'
string: 'comments_comment'
string: 'retractall'
string: 'comments'
string: 'comments_comment'
string: 'retract'
string: 'comments-retract'
string: '&lt;small&gt;This comment has been retracted by the poster. '
string: '&lt;/small&gt;'
string: "Your comment has been retracted."
string: 'HTTP_REFERER'
string: 'HTTP_REFERER'
string: ''
string: '//'
string: '/'
string: '/'
string: 'users/profile/'

<b>scanning file: /var/www/an2google/trunk/modules/comments/actions/orphan.act.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //	search the sync logs for orphan Comments
comment: //-------------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	make list of all sync logs
comment: //---------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
comment: //	process a sync log one item at a tiem looking for comments
comment: //--------------------------------------------------------------------------------------------------
comment: // read another KB into the buffer
comment: //echo "throwing chunk:&lt;br/&gt;\n";
comment: //echo "&lt;textarea rows='10' cols='80'&gt;$chunk&lt;/textarea&gt;&lt;br/&gt;\n";
comment: //-------------------------------------------------------------------------------------------------
comment: //	find Comment xml
comment: //-------------------------------------------------------------------------------------------------
comment: //echo "Comment found &lt;br/&gt;\n"; 
comment: //echo "startPos: $startPos &lt;br/&gt;\n";
comment: // end while
comment: //$xml = str_replace("&lt;update&gt;", '', $xml);
comment: //$xml = str_replace("&lt;/update&gt;", '', $xml);
comment: //echo $print . "&lt;br/&gt;\n";
comment: //echo "&lt;img src='http://awarenet.org.za/" . $data['fields']['fileName'] . "' /&gt;";
comment: //echo "wget http://awarenet.org.za/" . $data['fields']['fileName'] . "&lt;br/&gt;\n";
string: 'modules/comments/models/comments.mod.php'
string: 'admin'
string: "ls "
string: "data/log/*c.log.php"
string: "\n"
string: "&lt;h2&gt;"
string: "&lt;/h2&gt;\n"
string: '*******************************************************'
string: ''
string: 'r'
string: '&lt;/update&gt;'
string: "&lt;update&gt;"
string: "&lt;/update&gt;"
string: "&lt;table&gt;comments&lt;/table&gt;"
string: "&lt;table&gt;comments"
string: "&lt;/fields&gt;"
string: "&lt;update&gt;\n"
string: "\n"
string: "&lt;/update&gt;"
string: "\n"
string: "&lt;br/&gt;\n"
string: "&lt;"
string: "&amp;lt;"
string: "&gt;"
string: "&amp;gt;"
string: "found comment: "
string: 'fields'
string: 'UID'
string: "&lt;br/&gt;\n"
string: 'comments'
string: 'fields'
string: 'UID'
string: 'fields'
string: 'UID'
string: 'fields'
string: 'UID'
string: 'fields'
string: "saved "
string: " &lt;br/&gt;\n"
string: 'comments'
string: "delete from delitems where refUID='"
string: "'"
string: "removed from delitems ("
string: ")...&lt;br/&gt;\n"
string: "comment is already known to this script.&lt;br/&gt;\n"
string: "comment is already in database.&lt;br/&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/comments/actions/new.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	add a new announcements post
comment: //--------------------------------------------------------------------------------------------------
string: 'announcements'
string: 'announcements_announcement'
string: 'edit'
string: 'TODO:UIDHERE'
string: 'refmodule'
string: 'refuid'
string: 'modules/announcements/models/announcement.mod.php'
string: 'init'
string: ''
string: 'refmodule'
string: 'refuid'
string: 'announcements/edit/'

<b>scanning file: /var/www/an2google/trunk/modules/comments/actions/add.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	add a comment to something
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check request vars 
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check permissions, valid module
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: check that model exists
comment: //----------------------------------------------------------------------------------------------
comment: //	dont save blank comments
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	save the record
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: better clean function here
comment: //----------------------------------------------------------------------------------------------
comment: //	raise 'comment_added' event on refModule
comment: //----------------------------------------------------------------------------------------------
comment: /*	TODO: this
	$args = array(	'refModule' =&gt; $refModule, 
					'refUID' =&gt; $refUID, 
					'commentUID' =&gt; $commentUID, 
					'comment' =&gt; $ext['comment']    );

	eventSendSingle($refModule, 'comments_added', $args);
	*/
comment: //----------------------------------------------------------------------------------------------
comment: //	send out page notifications
comment: //----------------------------------------------------------------------------------------------
comment: /*	TODO: to be handled by page triggers
	$channelID = 'comments-' . $refModule . '-' . $refUID;
	$blockHtml = $theme-&gt;expandBlocks('[[:comments::summary::UID=' . $ext['UID'] . ':]]', '');
	$data = base64_encode($ext['UID'] . '|' . base64_encode($blockHtml));
	notifyChannel($channelID, 'add', $data);

	$channelID = 'comments-' . $refModule . '-' . $refUID . '-nav';
	$blockHtml = $theme-&gt;expandBlocks('[[:comments::summarynav::UID=' . $ext['UID'] . ':]]', '');
	$data = base64_encode($ext['UID'] . '|' . base64_encode($blockHtml));
	notifyChannel($channelID, 'add', $data);
	*/
comment: //----------------------------------------------------------------------------------------------
comment: //	return to whence the comment came
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: XML option
string: 'modules/comments/models/comment.mod.php'
string: 'refModule'
string: 'refModule not given'
string: 'refModel'
string: 'refModel not given'
string: 'refUID'
string: 'refUID not given'
string: 'return'
string: 'no return url'
string: 'refModule'
string: 'refModel'
string: 'refUID'
string: 'return'
string: 'comments-add'
string: ''
string: 'comment'
string: 'No comment entered'
string: 'bad'
string: 'comment'
string: 'none'
string: '#COMMENT ADDED\n'

<b>scanning file: /var/www/an2google/trunk/modules/chat/views/testform.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	display test message form (admins only, no arguments)
comment: //--------------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/chat/models/chat.mod.php'
string: 'admin'
string: 'modules/chat/views/testaddmessage.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/chat/views/showqueue.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	display contents of a single message queue, formatted as a table
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: user - UID of user to show queue for, default to current user [string]
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/chat/models/chat.mod.php'
string: ''
string: 'user'
string: 'user'
string: "&lt;table noborder&gt;\n"
string: "\t&lt;tr&gt;\n"
string: "\t\t&lt;td valign='top'&gt;"
string: 'timestamp'
string: "&lt;/td&gt;\n"
string: "\t\t&lt;td valign='top'&gt;"
string: 'from'
string: "&lt;/td&gt;\n"
string: "\t\t&lt;td valign='top'&gt;"
string: 'content'
string: "&lt;/td&gt;\n"
string: "\t&lt;/tr&gt;\n"
string: "&lt;/table&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/chat/views/showallqueues.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	display contents of all message queues (admin only, no arguments as yet)
comment: //--------------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/chat/models/chat.mod.php'
string: 'admin'
string: ''
string: "select * from Users_User order by surname, firstname"
string: "&lt;h2&gt;"
string: 'surname'
string: ', '
string: 'firstname'
string: "&lt;/h2&gt;\n"
string: "&lt;input type='button' onClick=\"cookieAddWindow('"
string: 'UID'
string: "', '100', '100'); cookieSetChatUpdate();\" "
string: "value='chat' &gt; ("
string: 'UID'
string: ")\n"
string: "[[:chat::showqueue::user="
string: 'UID'
string: ":]]&lt;br/&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/chat/views/listallbegin.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	list all users with links to start a chat
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/chat/models/chat.mod.php'
string: ''
string: "select * from Users_User order by role"
string: "&lt;table noborder&gt;\n"
string: "&lt;a href='/chat/begin/"
string: 'UID'
string: "'&gt;[begin chat]&lt;/a&gt;"
string: "\t&lt;tr&gt;\n"
string: "\t\t&lt;td&gt;"
string: 'username'
string: "&lt;/td&gt;\n"
string: "\t\t&lt;td&gt;"
string: 'role'
string: "&lt;/td&gt;\n"
string: "\t\t&lt;td&gt;"
string: "&lt;/td&gt;\n"
string: "\t&lt;/tr&gt;\n"
string: "&lt;/table&gt;"

<b>scanning file: /var/www/an2google/trunk/modules/chat/views/channelauth.fn.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //|	generate authorization for channel subscriptions
comment: //-------------------------------------------------------------------------------------------------
comment: //arg: channel - id of channel [string]
comment: // NOTE: user may only subscribe to their own chat channel, may not eavesdrop on others
comment: //-------------------------------------------------------------------------------------------------
string: 'channel'
string: ''
string: 'checking channel auth: '
string: 'channel'
string: "\n"
string: 'channel'
string: 'user-'
string: 'channel'
string: 'public'
string: 'passed channel auth: '
string: 'channel'
string: "\n"
string: 'yes'
string: ''

<b>scanning file: /var/www/an2google/trunk/modules/chat/models/chat.mod.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	object for managing chat queues
comment: //--------------------------------------------------------------------------------------------------
comment: //+ every user has a chat queue, a record to collect IMs sent to the user.  When the user is logged
comment: //+ in the message pump will periodically check (and thus clear) the users chat queue, displaying
comment: //+ messages via AJAX.
comment: //+
comment: //+	message structure:
comment: //+
comment: //+	&lt;message&gt;
comment: //+    &lt;UID&gt;UID&lt;/UID&gt;							// messages have small UIDs, like TX5Y2
comment: //+    &lt;from&gt;UID&lt;/from&gt;
comment: //+	  &lt;timestamp&gt;12351253&lt;/timestamp&gt;
comment: //+    &lt;content&gt;this is a message.&lt;/content&gt;
comment: //+    &lt;mine&gt;yes|no&lt;/mine&gt;						// yes for messages I sent, no for incoming
comment: //+  &lt;/message&gt;
comment: //----------------------------------------------------------------------------------------------
comment: //	member variables (as retieved from database)
comment: //----------------------------------------------------------------------------------------------
comment: // currently loaded record [array]
comment: // database table structure [array]
comment: // expanded set of messages [array]
comment: // maximum number of messages held in the queue [int]
comment: // [string]
comment: //----------------------------------------------------------------------------------------------
comment: //.	constructor
comment: //----------------------------------------------------------------------------------------------
comment: //opt: userUID - UID of a user [string]
comment: //----------------------------------------------------------------------------------------------
comment: //.	load a record given user UID, create one if none exists
comment: //----------------------------------------------------------------------------------------------
comment: //arg: userUID - UID of a user record [string]
comment: //returns: true on success, false on failure [bool]
comment: // no chat queue, create one
comment: //----------------------------------------------------------------------------------------------
comment: //.	load a record provided as an associative array
comment: //----------------------------------------------------------------------------------------------
comment: //arg: ary - associative array of fields and values [array]
comment: //----------------------------------------------------------------------------------------------
comment: //.	save a record
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //.	because its playing up
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //.	verify - check that a record is correct before allowing it to be stored in the database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string if object passes, warning message if not [string]
comment: // nothing to check at this stage
comment: //----------------------------------------------------------------------------------------------
comment: //.	sql information
comment: //----------------------------------------------------------------------------------------------
comment: //returns: database table layout [array]
comment: //----------------------------------------------------------------------------------------------
comment: //.	serialize this object to an array
comment: //----------------------------------------------------------------------------------------------
comment: //returns: associative array of all variables which define this instance  [array]
comment: //----------------------------------------------------------------------------------------------
comment: //.	make an extended array of all data a view will need
comment: //----------------------------------------------------------------------------------------------
comment: //returns: extended array of member variables and metadata [array]
comment: //----------------------------------------------------------------------------------------------
comment: //.	install this module
comment: //----------------------------------------------------------------------------------------------
comment: //, deprecated, this should be handled by ../inc/install.inc.inc.php
comment: //returns: html report lines [string]
comment: //------------------------------------------------------------------------------------------
comment: //	create book table if it does not exist
comment: //------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //.	expand messages (XML -&gt; array)
comment: //----------------------------------------------------------------------------------------------
comment: //returns: nested array of messages [array]
comment: //----------------------------------------------------------------------------------------------
comment: //.	collapse messages (Array -&gt; XML) (returns true when the queue is full)
comment: //----------------------------------------------------------------------------------------------
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //.	clear message queue
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //.	add a message
comment: //----------------------------------------------------------------------------------------------
comment: //arg: msgUID - message UID [string]
comment: //arg: fromUID - UID of user who sent this message [string]
comment: //arg: toUID - UID of recipient user [string]
comment: //arg: message - chat message [string]
comment: //arg: mine - whether the message was sent by the current user [string]
comment: //returns: true on success, false on failure
comment: //----------------------------------------------------------------------------------------------
comment: //.	make a message UID
comment: //----------------------------------------------------------------------------------------------
comment: //returns: a new message UID [string]
string: 'UID|from|timestamp|content|mine'
string: ''
string: ''
string: "select * from Chat_Discussion where chat.user='"
string: "'"
string: ''
string: ''
string: "update Chat_Discussion set queue='"
string: "'"
string: " where chat.user='"
string: "'"
string: ''
string: "&lt;chatqueue&gt;\n&lt;/chatqueue&gt;"
string: ''
string: 'model'
string: 'chat'
string: 'fields'
string: 'UID'
string: 'VARCHAR(30)'
string: 'user'
string: 'VARCHAR(30)'
string: 'queue'
string: 'TEXT'
string: 'indices'
string: 'UID'
string: '10'
string: 'user'
string: '10'
string: 'nodiff'
string: 'UID'
string: 'user'
string: 'queue'
string: "&lt;h3&gt;Installing Chat Module&lt;/h3&gt;\n"
string: 'chat'
string: "installing chat module\n"
string: 'created chat table and indices...&lt;br/&gt;'
string: 'chat table already exists...&lt;br/&gt;'
string: ''
string: 'UID'
string: 'UID'
string: 'from'
string: 'from'
string: 'timestamp'
string: 'timestamp'
string: 'content'
string: 'content'
string: 'mine'
string: 'mine'
string: ''
string: '|'
string: 'chatqueue'
string: 'UID'
string: ''
string: 'message'
string: ''
string: ''
string: 'UID'
string: 'from'
string: 'timestamp'
string: 'content'
string: 'mine'
string: ""

<b>scanning file: /var/www/an2google/trunk/modules/chat/inc/install.inc.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	installer for images module (creates table)
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/chat/models/chat.mod.php'
string: 'admin'
string: ''

<b>scanning file: /var/www/an2google/trunk/modules/chat/inc/bots.inc.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	code for interfacing with chatbots
comment: //--------------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
comment: //	get a list of bots installed on the system
comment: //--------------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
comment: //	process a message
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check for /cmd
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------			
comment: //	help is a special command impemented by this interface
comment: //--------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------
comment: //	check if a bot has been named, eg /help math cosine
comment: //----------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------
comment: //	a bot has been named, let its help() function handle this
comment: //------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------
comment: //	bot not named or name not recognised, list bots
comment: //------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------			
comment: //	other stuff is handled by bots
comment: //--------------------------------------------------------------------------------------
string: 'ls '
string: 'modules/chat/bots/'
string: "\n"
string: "."
string: ""
string: 'sender'
string: 'recipient'
string: ' '
string: '/'
string: ' '
string: '/'
string: ''
string: 'help'
string: 'recipient'
string: ''
string: '/help '
string: ''
string: ''
string: ''
string: ' '
string: ''
string: 'modules/chat/bots/'
string: '/'
string: '.bot.php'
string: 'chat_bot_'
string: '_help'
string: 'sender'
string: 'sender'
string: "&lt;font color='black'&gt;The following bots are "
string: "installed on this system:&lt;br/&gt;"
string: "&lt;font color=red&gt;/help&lt;/font&gt;&lt;br/&gt;"
string: 'sender'
string: "&lt;font color='red'&gt;/"
string: "&lt;/font&gt;&lt;br/&gt;"
string: 'sender'
string: "Type /help [bot name] for more information.&lt;/font&gt;"
string: 'modules/chat/bots/'
string: '/'
string: '.bot.php'
string: 'chat_bot_'
string: '_submit'

<b>scanning file: /var/www/an2google/trunk/modules/chat/bots/translate/translate.bot.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	chat bot to translate text using the google AJAX API 
comment: //--------------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
comment: //	language codes as used by google languages API  // TODO: find out which of these work
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	Supported by Google Language API // TODO: find out which of these translate
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	clean the request, check for quiet mode
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	decide which language pair we're using
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------
comment: //	laguage pair specified in request, check if it's good
comment: //--------------------------------------------------------------------------------------
comment: // skip hyphen
comment: // all good, store this for future requests
comment: // languages not recognised
comment: //--------------------------------------------------------------------------------------
comment: //	no language pair given, perhaps it is already stored in session
comment: //--------------------------------------------------------------------------------------
comment: // alrighty then
comment: // languages not recognised
comment: //----------------------------------------------------------------------------------------------
comment: //	perform the translation
comment: //----------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	CURL request to Google AJAX API
comment: //------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	done
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
comment: //	nothing special at this point
comment: //--------------------------------------------------------------------------------------------------
string: ''
string: ''
string: 'sender'
string: 'recipient'
string: 'ARABIC'
string: 'ar'
string: 'ARMENIAN'
string: 'hy'
string: 'AZERBAIJANI'
string: 'az'
string: 'BASQUE'
string: 'eu'
string: 'BELARUSIAN'
string: 'be'
string: 'BENGALI'
string: 'bn'
string: 'BIHARI'
string: 'bh'
string: 'BULGARIAN'
string: 'bg'
string: 'BURMESE'
string: 'my'
string: 'CATALAN'
string: 'ca'
string: 'CHEROKEE'
string: 'chr'
string: 'CHINESE'
string: 'zh'
string: 'CROATIAN'
string: 'hr'
string: 'CZECH'
string: 'cs'
string: 'DANISH'
string: 'da'
string: 'DHIVEHI'
string: 'dv'
string: 'DUTCH'
string: 'nl'
string: 'ENGLISH'
string: 'en'
string: 'ESPERANTO'
string: 'eo'
string: 'ESTONIAN'
string: 'et'
string: 'FILIPINO'
string: 'tl'
string: 'FINNISH'
string: 'fi'
string: 'FRENCH'
string: 'fr'
string: 'GALICIAN'
string: 'gl'
string: 'GEORGIAN'
string: 'ka'
string: 'GERMAN'
string: 'de'
string: 'GREEK'
string: 'el'
string: 'GUARANI'
string: 'gn'
string: 'GUJARATI'
string: 'gu'
string: 'HEBREW'
string: 'iw'
string: 'HINDI'
string: 'hi'
string: 'HUNGARIAN'
string: 'hu'
string: 'ICELANDIC'
string: 'is'
string: 'INDONESIAN'
string: 'id'
string: 'INUKTITUT'
string: 'iu'
string: 'ITALIAN'
string: 'it'
string: 'JAPANESE'
string: 'ja'
string: 'KANNADA'
string: 'kn'
string: 'KAZAKH'
string: 'kk'
string: 'KHMER'
string: 'km'
string: 'KOREAN'
string: 'ko'
string: 'KURDISH'
string: 'ku'
string: 'KYRGYZ'
string: 'ky'
string: 'LAOTHIAN'
string: 'lo'
string: 'LATVIAN'
string: 'lv'
string: 'LITHUANIAN'
string: 'lt'
string: 'MACEDONIAN'
string: 'mk'
string: 'MALAY'
string: 'ms'
string: 'MALAYALAM'
string: 'ml'
string: 'MALTESE'
string: 'mt'
string: 'MARATHI'
string: 'mr'
string: 'MONGOLIAN'
string: 'mn'
string: 'NEPALI'
string: 'ne'
string: 'NORWEGIAN'
string: 'no'
string: 'ORIYA'
string: 'or'
string: 'PASHTO'
string: 'ps'
string: 'PERSIAN'
string: 'fa'
string: 'POLISH'
string: 'pl'
string: 'PORTUGUESE'
string: 'pt-PT'
string: 'PUNJABI'
string: 'pa'
string: 'ROMANIAN'
string: 'ro'
string: 'RUSSIAN'
string: 'ru'
string: 'SANSKRIT'
string: 'sa'
string: 'SERBIAN'
string: 'sr'
string: 'SINDHI'
string: 'sd'
string: 'SINHALESE'
string: 'si'
string: 'SLOVAK'
string: 'sk'
string: 'SLOVENIAN'
string: 'sl'
string: 'SPANISH'
string: 'es'
string: 'SWAHILI'
string: 'sw'
string: 'SWEDISH'
string: 'sv'
string: 'TAJIK'
string: 'tg'
string: 'TAMIL'
string: 'ta'
string: 'TAGALOG'
string: 'tl'
string: 'TELUGU'
string: 'te'
string: 'THAI'
string: 'th'
string: 'TIBETAN'
string: 'bo'
string: 'TURKISH'
string: 'tr'
string: 'UKRAINIAN'
string: 'uk'
string: 'URDU'
string: 'ur'
string: 'UZBEK'
string: 'uz'
string: 'UIGHUR'
string: 'ug'
string: 'VIETNAMESE'
string: 'vi'
string: '/translate '
string: 'q '
string: ' '
string: '-'
string: '|'
string: 'sChatBot'
string: 'sender'
string: "&lt;br/&gt;&lt;i&gt;not translated: language pair not recognised, type "
string: "/help translate for more information.&lt;/i&gt;"
string: 'sChatBotTranslate'
string: 'sChatBotTranslate'
string: 'sender'
string: "&lt;br/&gt;&lt;i&gt;not translated: language pair not set, type "
string: "/help translate for more information.&lt;/i&gt;"
string: "http://ajax.googleapis.com/ajax/services/language/translate"
string: "?v=1.0&amp;q="
string: "&amp;langpair="
string: "%7C"
string: 'http://196.210.143.195/'
string: 'translatedText'
string: "\"}"
string: "&lt;font color=red&gt;&lt;i&gt;translation error.&lt;/i&gt;&lt;/font&gt;"
string: 'sender'
string: "&lt;i&gt;translated into $langTo: $result&lt;/i&gt;"
string: 'recipient'
string: "$result&lt;i&gt;[translated from $langFrom]&lt;/i&gt;"
string: 'CATALAN'
string: 'ca'
string: 'CHINESE'
string: 'zh'
string: 'DUTCH'
string: 'nl'
string: 'ENGLISH'
string: 'en'
string: 'FILIPINO'
string: 'tl'
string: 'FINNISH'
string: 'fi'
string: 'FRENCH'
string: 'fr'
string: 'GALICIAN'
string: 'gl'
string: 'GEORGIAN'
string: 'ka'
string: 'GERMAN'
string: 'de'
string: 'GREEK'
string: 'el'
string: 'HEBREW'
string: 'iw'
string: 'HINDI'
string: 'hi'
string: 'HUNGARIAN'
string: 'hu'
string: 'INDONESIAN'
string: 'id'
string: 'ITALIAN'
string: 'it'
string: 'JAPANESE'
string: 'ja'
string: 'KOREAN'
string: 'ko'
string: 'LATVIAN'
string: 'lv'
string: 'LITHUANIAN'
string: 'lt'
string: 'MALTESE'
string: 'mt'
string: 'NORWEGIAN'
string: 'no'
string: 'POLISH'
string: 'pl'
string: 'ROMANIAN'
string: 'ro'
string: 'RUSSIAN'
string: 'ru'
string: 'SERBIAN'
string: 'sr'
string: 'SLOVAK'
string: 'sk'
string: 'SLOVENIAN'
string: 'sl'
string: 'SPANISH'
string: 'es'
string: 'SWEDISH'
string: 'sv'
string: 'THAI'
string: 'th'
string: 'TURKISH'
string: 'tr'
string: 'UKRAINIAN'
string: 'uk'
string: 'VIETNAMESE'
string: 'vi'
string: "&lt;font color=black&gt;To use this bot, type /translate [language pair] [message] and press enter."
string: "The language pair can be any two of the following, separated by a hyphen, "
string: "for example: en-de for english-to-german, it-zh for italian to chinese:&lt;br/&gt;"
string: " (&lt;font color=red&gt;$langCode&lt;/font&gt;), "
string: "&lt;/font&gt;"

<b>scanning file: /var/www/an2google/trunk/modules/chat/bots/orly/orly.bot.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	dummy bot to test chatbot API
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make response
comment: //----------------------------------------------------------------------------------------------
string: 'modules/chat/bots/orly/orly.jpg'
string: "&lt;img src='"
string: "' width='180' height='180' /&gt;"
string: 'sender'
string: 'recipient'
string: '&lt;font color=black&gt;chicken is a type of pie.&lt;/font&gt;'

<b>scanning file: /var/www/an2google/trunk/modules/chat/actions/testadd.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	add a test message to an abritrary queue 
comment: //--------------------------------------------------------------------------------------------------
string: 'admin'
string: 'action'
string: 'action'
string: 'addTestMessage'
string: 'modules/chat/models/chat.mod.php'
string: 'from'
string: 'to'
string: 'message'
string: 'chat/test/'
string: 'error, incorrect action.'

<b>scanning file: /var/www/an2google/trunk/modules/chat/actions/test.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	testing page for sending messages to/from arbitrary users
comment: //--------------------------------------------------------------------------------------------------
string: 'admin'
string: 'modules/chat/actions/test.page.php'

<b>scanning file: /var/www/an2google/trunk/modules/chat/actions/sendmsg.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	user has sent a message
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make sure public users cannot send messages (spam)
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	OK, send the message
comment: //----------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	perform any bot actions
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	recipients copy 
comment: //------------------------------------------------------------------------------------------
comment: //$recipient = new Chat($_POST['toUser']);
comment: //$msgUID = $recipient-&gt;createMsgUID();
comment: //$recipient-&gt;addMessage ('r' . $msgUID, 
comment: //						$user-&gt;UID, 
comment: //					 	$db-&gt;addMarkup($_POST['toUser']), 
comment: //						chatMarkup($msgPair['recipient']),
comment: //						'no');
comment: //$recipient-&gt;save();
comment: //------------------------------------------------------------------------------------------
comment: //	senders copy
comment: //------------------------------------------------------------------------------------------
comment: //$sender = new Chat($user-&gt;UID);
comment: //$msgUID = $sender-&gt;createMsgUID();
comment: //$sender-&gt;addMessage('s' . $msgUID, 
comment: //					$db-&gt;addMarkup($_POST['toUser']), 
comment: //					$user-&gt;UID, 
comment: //					chatMarkup($msgPair['sender']), 
comment: //					'yes');
comment: //$sender-&gt;save();
string: 'modules/chat/models/chat.mod.php'
string: 'modules/chat/inc/bots.inc.php'
string: 'public'
string: 'please log in'
string: 'toUser'
string: 'users_user'
string: 'toUser'
string: 'content'
string: 'content'
string: "\r"
string: ''
string: "\n"
string: '&lt;br/&gt;'
string: '|'
string: '|'
string: '|'
string: '|'
string: '|0'
string: 'chat-user-'
string: 'toUser'
string: 'add'
string: '|'
string: 'toUser'
string: '|'
string: '|'
string: '|'
string: '|1'
string: 'chat-user-'
string: 'add'

<b>scanning file: /var/www/an2google/trunk/modules/chat/actions/history.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	view chat history (ones own, admins can view anyones history)
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: permissions check here
comment: //----------------------------------------------------------------------------------------------
comment: //	render the page
comment: //----------------------------------------------------------------------------------------------
string: '1'
string: 'page'
string: 'page'
string: 'ref'
string: ''
string: 'users_user'
string: 'chat'
string: 'chat_discussion'
string: 'viewhistory'
string: 'modules/chat/actions/history.page.php'
string: 'userUID'

<b>scanning file: /var/www/an2google/trunk/modules/chat/actions/endchat.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	user has closed a chat window, remove its contents from the queue
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	public users can't chat
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	remove messages from the queue
comment: //----------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	send javascript to close the calling iframe
comment: //------------------------------------------------------------------------------------------
string: 'public'
string: "Not logged in."
string: 'modules/chat/models/chat.mod.php'
string: 'fromuid'
string: 'fromuid'
string: 'from'
string: 'UID'
string: ''
string: "&lt;html&gt;&lt;head&gt;&lt;title&gt;close chat window&lt;/title&gt;
			&lt;script&gt;
			window.parent.windowRemove('"
string: "');
			&lt;/script&gt;&lt;/head&gt;&lt;body&gt;nothing to see here&lt;/body&gt;
			&lt;/html&gt;"

<b>scanning file: /var/www/an2google/trunk/modules/chat/actions/default.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	default action for chat is to view history, admins can view anyones history
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/chat/actions/history.act.php'

<b>scanning file: /var/www/an2google/trunk/modules/chat/actions/checkmsg.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	send messages for the current user
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make sure public user cannot chat
comment: //----------------------------------------------------------------------------------------------
comment: // close all open windows and die
comment: //----------------------------------------------------------------------------------------------
comment: //	update user's lastonline field
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	get time of last message received by the client
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	send all messages more recent than that
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	chat utility functions
comment: //----------------------------------------------------------------------------------------------
comment: //	mark up HTML so that it doesn't form child elements in the chatqueue XML
comment: //	DEPRECATED, TODO: fidn out if anything still uses this after switching from iframes
comment: //function chatMarkup($txt) {
comment: //	$txt = str_replace('&lt;', '{*[', $txt);	
comment: //	$txt = str_replace('&gt;', ']*}', $txt);
comment: //	$txt = str_replace("\"", "'", $txt);		// javascript safe
comment: //	return $txt;
comment: //}
string: 'modules/chat/models/chat.mod.php'
string: 'public'
string: 'chatwindows'
string: ''
string: " "
string: "update Users_User set lastOnline='"
string: "' "
string: "where UID='"
string: "'"
string: 'since'
string: " "
string: 'since'
string: "queue contains "
string: " messages...&lt;br/&gt;\n"
string: ''
string: 'timestamp'
string: 'UID'
string: ''
string: 'content'
string: "\twindow.parent.messageAdd("
string: "\""
string: 'UID'
string: "\", "
string: "\""
string: 'from'
string: "\", "
string: "\""
string: "l, Y-m-j H:i:s"
string: 'timestamp'
string: "\", "
string: "\""
string: 'timestamp'
string: "\", "
string: "\""
string: "\","
string: "\""
string: 'mine'
string: "\""
string: ");\n"
string: "
&lt;html&gt;
&lt;head&gt;
&lt;script language='Javascript'&gt;
	$js;
&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;/body&gt;
&lt;/html&gt;"
string: '{*['
string: '&lt;'
string: ']*}'
string: '&gt;'

<b>scanning file: /var/www/an2google/trunk/modules/chat/actions/bottest.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	for debugging the chat bots
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check for submitted messages
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	form for sending a message
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	render page
comment: //----------------------------------------------------------------------------------------------
string: 'modules/chat/inc/bots.inc.php'
string: ''
string: ''
string: 'msg'
string: 'msg'
string: '124289610010992581'
string: "&lt;h2&gt;sender&lt;/h2&gt;&lt;textarea rows='10' cols='40'&gt;"
string: 'sender'
string: "&lt;/textarea&gt;\n"
string: "&lt;h2&gt;recipient&lt;/h2&gt;&lt;textarea rows='10' cols='40'&gt;"
string: 'recipient'
string: "&lt;/textarea&gt;\n"
string: "&lt;form name='sned' method='POST'&gt;
&lt;textarea name='msg' rows='5' cols='40'&gt;$msg&lt;/textarea&gt;
&lt;br/&gt;&lt;input type='submit' /&gt;
&lt;/form&gt;"
string: 'modules/chat/actions/testbot.page.php'
string: 'html'

<b>scanning file: /var/www/an2google/trunk/modules/chat/actions/begin.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	page to list users to begin chat with, or to start one by adding a blank message to the users
comment: //	queue
comment: //--------------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: // start the chat
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	list all users
comment: //------------------------------------------------------------------------------------------
string: 'modules/chat/models/chat.mod.php'
string: ''
string: '(***)'
string: '(***)'
string: 'modules/chat/actions/begin.page.php'

<b>scanning file: /var/www/an2google/trunk/modules/chat/actions/bca.act.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //	broadcast a test message to admin from Chisai.Gondo
comment: //-------------------------------------------------------------------------------------------------
string: '748248257198046057'
string: 'this is a test message '
string: '|'
string: '|'
string: '|'
string: '|'
string: 'chat-user-admin'
string: 'add'
string: "sent notification: $msg \n"

<b>scanning file: /var/www/an2google/trunk/modules/chart/inc/install.inc.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	install scripts for chart widget
comment: //--------------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
comment: //	install the chart widget module
comment: //--------------------------------------------------------------------------------------------------
comment: //returns: html report [string]
comment: // only admins can do this
comment: //------------------------------------------------------------------------------------------
comment: //	admin module has no database presence at now
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	done
comment: //------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
comment: //	discover if this module is installed
comment: //--------------------------------------------------------------------------------------------------
comment: //returns: HTML installation report [string]
comment: // if installed correctly report will contain HTML comment &lt;!-- installed correctly --&gt;
comment: // only admins can do this
string: 'admin'
string: "&lt;h3&gt;Installing Charts&lt;/h3&gt;\n"
string: "Charts module has no objects serialized to the database."
string: 'admin'
string: "&lt;p&gt;Charts module requires no further configuration.&lt;/p&gt;"
string: "&lt;!-- installed correctly --&gt;"

<b>scanning file: /var/www/an2google/trunk/modules/chart/actions/default.act.php</b>
string: "deprecated."

<b>scanning file: /var/www/an2google/trunk/modules/central/modules/login.mod.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	Records user logins on peer servers
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //member variables
comment: //----------------------------------------------------------------------------------------------
comment: //_	currently loaded database record [array]
comment: //_	database table definition [array]
comment: //_	set to true when an object has been loaded [bool]
comment: //_ UID [string]
comment: //_ ref:Users_User [string]
comment: //_ varchar(255) [string]
comment: //_ datetime [string]
comment: //_ datetime [string]
comment: //_ ref:Users_User [string]
comment: //_ datetime [string]
comment: //_ ref:Users_User [string]
comment: //----------------------------------------------------------------------------------------------
comment: //. constructor
comment: //----------------------------------------------------------------------------------------------
comment: //opt: UID - UID of a Login object [string]
comment: // initialise table schema
comment: // try load an object from the database
comment: // check if we did
comment: // make new object
comment: // initialize
comment: //----------------------------------------------------------------------------------------------
comment: //. load an object from the database given its UID
comment: //----------------------------------------------------------------------------------------------
comment: //arg: UID - UID of a Login object [string]
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //. load Login object serialized as an associative array
comment: //----------------------------------------------------------------------------------------------
comment: //arg: ary - associative array of members and values [array]
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //. save the current object to database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string on success, html report of errors on failure [string]
comment: //: $db-&gt;save(...) will raise an object_updated event if successful
comment: //----------------------------------------------------------------------------------------------
comment: //. check that object is correct before allowing it to be stored in database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string if object passes, warning message if not [string]
comment: //----------------------------------------------------------------------------------------------
comment: //. database table definition and content versioning
comment: //----------------------------------------------------------------------------------------------
comment: //returns: information for constructing SQL queries [array]
comment: //table columns
comment: //these fields will be indexed
comment: //revision history will be kept for these fields
comment: //----------------------------------------------------------------------------------------------
comment: //. serialize this object to an array
comment: //----------------------------------------------------------------------------------------------
comment: //returns: associative array of all members which define this instance [array]
comment: //----------------------------------------------------------------------------------------------
comment: //. serialize this object to xml
comment: //----------------------------------------------------------------------------------------------
comment: //arg: xmlDec - include xml declaration? [bool]
comment: //arg: indent - string with which to indent lines [bool]
comment: //returns: xml serialization of this object [string]
comment: //NOTE: any members which are not XML clean should be marked up before sending
comment: //----------------------------------------------------------------------------------------------
comment: //. make an extended array of data views may need
comment: //----------------------------------------------------------------------------------------------
comment: //returns: associative array of members, metadata and partial views [array]
comment: //% extended array of properties [array:string]
comment: //------------------------------------------------------------------------------------------
comment: //	links
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	javascript
comment: //------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //. delete current object from the database
comment: //----------------------------------------------------------------------------------------------
comment: //: $db-&gt;delete(...) will raise an object_deleted event on success [bool]
comment: //returns: true on success, false on failure [bool]
comment: // nothing to do
string: ''
string: ''
string: 'UID'
string: 'userUID'
string: 'peerURL'
string: 'lastAssert'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: ''
string: "Database error.&lt;br/&gt;\n"
string: ''
string: ''
string: ''
string: "No UID.&lt;br/&gt;\n"
string: 'module'
string: 'central'
string: 'model'
string: 'Central_Login'
string: 'archive'
string: 'yes'
string: 'fields'
string: 'UID'
string: 'VARCHAR(33)'
string: 'userUID'
string: 'VARCHAR(33)'
string: 'peerURL'
string: 'VARCHAR(255)'
string: 'lastAssert'
string: 'DATETIME'
string: 'createdOn'
string: 'DATETIME'
string: 'createdBy'
string: 'VARCHAR(33)'
string: 'editedOn'
string: 'DATETIME'
string: 'editedBy'
string: 'VARCHAR(33)'
string: 'indices'
string: 'UID'
string: '10'
string: 'userUID'
string: '10'
string: 'lastAssert'
string: ''
string: 'createdOn'
string: ''
string: 'createdBy'
string: '10'
string: 'editedOn'
string: ''
string: 'editedBy'
string: '10'
string: 'nodiff'
string: 'userUID'
string: 'peerURL'
string: 'lastAssert'
string: 'UID'
string: 'userUID'
string: 'peerURL'
string: 'lastAssert'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: ''
string: "&lt;kobject type='Central_Login'&gt;\n"
string: "    &lt;UID&gt;"
string: "&lt;/UID&gt;\n"
string: "    &lt;userUID&gt;"
string: "&lt;/userUID&gt;\n"
string: "    &lt;peerURL&gt;"
string: "&lt;/peerURL&gt;\n"
string: "    &lt;lastAssert&gt;"
string: "&lt;/lastAssert&gt;\n"
string: "    &lt;createdOn&gt;"
string: "&lt;/createdOn&gt;\n"
string: "    &lt;createdBy&gt;"
string: "&lt;/createdBy&gt;\n"
string: "    &lt;editedOn&gt;"
string: "&lt;/editedOn&gt;\n"
string: "    &lt;editedBy&gt;"
string: "&lt;/editedBy&gt;\n"
string: "&lt;/kobject&gt;\n"
string: "&lt;?xml version='1.0' encoding='UTF-8' ?&gt;\n"
string: 'viewUrl'
string: ''
string: 'viewLink'
string: ''
string: 'editUrl'
string: ''
string: 'editLink'
string: ''
string: 'delUrl'
string: ''
string: 'delLink'
string: ''
string: 'newUrl'
string: ''
string: 'newLink'
string: ''
string: 'central'
string: 'Central_Login'
string: 'show'
string: 'viewUrl'
string: '%%serverPath%%Central/showlogin/'
string: 'UID'
string: 'viewLink'
string: "&lt;a href='"
string: 'viewUrl'
string: "'&gt;[ more &amp;gt;gt; ]&lt;/a&gt;"
string: 'central'
string: 'Central_Login'
string: 'edit'
string: 'edit'
string: 'editUrl'
string: '%%serverPath%%Central/editlogin/'
string: 'UID'
string: 'editLink'
string: "&lt;a href='"
string: 'editUrl'
string: "'&gt;[ edit ]&lt;/a&gt;"
string: 'central'
string: 'Central_Login'
string: 'edit'
string: 'delete'
string: 'delUrl'
string: '%%serverPath%%Central/dellogin/'
string: 'UID'
string: 'delLink'
string: "&lt;a href='"
string: 'delUrl'
string: "'&gt;[ delete ]&lt;/a&gt;"
string: 'UIDJsClean'
string: 'UID'

<b>scanning file: /var/www/an2google/trunk/modules/central/actions/cryptotest.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	test of encryption and signing using OpenSSL library
comment: //--------------------------------------------------------------------------------------------------
comment: //+	overview: The intent of this system is to encrypt a message using a symmetric cypher (AES) with 
comment: //+	a random key, and then to encrpt this symmetric key with the public key (RSA) of a peer server.
comment: //+	the AES cyphertext . RSA cyphertext are then signed with DSA using the public key of this 
comment: //+	server.
comment: //----------------------------------------------------------------------------------------------
comment: //	check user role
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	some variables
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	choose random symmetric key
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	encrypt message with AES
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	encrypt symmetric key with RSA, using peer's public key
comment: //----------------------------------------------------------------------------------------------
string: 'admin'
string: "A visitor to Afghanistan who ventures outside the American security bubble sees 
pretty quickly that President Obama&#8364;&#8482;s decision to triple the number of troops in Afghanistan has 
resulted, with some exceptions, mostly in more dead Americans and Afghans alike.

So what can we do instead? Some useful guidance comes from the man whom Afghans refer to as 
&#8364;&#339;Dr. Greg&#8364;&#157; &#8364;&#8221; Greg Mortenson, an American who runs around in Afghan clothing building schools, as 
chronicled in the best-selling book &#8364;&#339;Three Cups of Tea.&#8364;&#157;

The conventional wisdom is that education and development are impossible in insecure parts of 
Afghanistan that the Taliban control. That view is wrong.

An organization set up by Mr. Mortenson and a number of others are showing that it is quite 
possible to run schools in Taliban-controlled areas. I visited some of Mr. Mortenson&#8364;&#8482;s schools, 
literacy centers and vocational training centers, and they survive the Taliban not because of 
military protection (which they eschew) but because local people feel &#8364;&#339;ownership&#8364;&#157; rather than 
&#8364;&#339;occupation.&#8364;&#157;

&#8364;&#339;Aid can be done anywhere, including where Taliban are,&#8364;&#157; Mr. Mortenson said. &#8364;&#339;But it&#8364;&#8482;s imperative 
the elders are consulted, and that the development staff is all local, with no foreigners.&#8364;&#157;

In volatile Kunar Province, which borders Pakistan, the Taliban recently ordered a halt to a 
school being built by Mr. Mortenson&#8364;&#8482;s organization, the Central Asia Institute. But the villagers 
rushed to the school&#8364;&#8482;s defense. The Taliban, which have been mounting a campaign for hearts and 
minds, dropped the issue, according to Wakil Karimi, who leads Mr. Mortenson&#8364;&#8482;s team in Afghanistan.

In another part of Kunar Province, the Central Asia Institute is running a girls&#8364;&#8482; primary school 
and middle school in the heart of a Taliban-controlled area. Some of the girls are 17 or 18, which 
is particularly problematic for fundamentalists (who don&#8364;&#8482;t always mind girls getting an education 
as long as they drop out by puberty). Yet this school is expanding, and now has 320 girls, Mr. 
Karimi said."

<b>scanning file: /var/www/an2google/trunk/modules/central/actions/assertonline.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	peers asserts that a given user is online
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and credentials
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: peer signature check here
comment: //----------------------------------------------------------------------------------------------
comment: //
comment: //----------------------------------------------------------------------------------------------

<b>scanning file: /var/www/an2google/trunk/modules/captcha/inc/recaptchalib.php</b>
comment: /*
 * This is a PHP library that handles calling reCAPTCHA.
 *    - Documentation and latest version
 *          http://recaptcha.net/plugins/php/
 *    - Get a reCAPTCHA API Key
 *          https://www.google.com/recaptcha/admin/create
 *    - Discussion group
 *          http://groups.google.com/group/recaptcha
 *
 * Copyright (c) 2007 reCAPTCHA -- http://recaptcha.net
 * AUTHORS:
 *   Mike Crawford
 *   Ben Maurer
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */
comment: /**
 * The reCAPTCHA server URL's
 */
comment: /**
 * Encodes the given data into a query string format
 * @param $data - array of string elements to be encoded
 * @return string - encoded request
 */
comment: // Cut the last '&amp;'
comment: /**
 * Submits an HTTP POST to a reCAPTCHA server
 * @param string $host
 * @param string $path
 * @param array $data
 * @param int port
 * @return array response
 */
comment: // One TCP-IP packet
comment: /**
 * Gets the challenge HTML (javascript and non-javascript version).
 * This is called from the browser, and the resulting reCAPTCHA HTML widget
 * is embedded within the HTML form it was called from.
 * @param string $pubkey A public key for reCAPTCHA
 * @param string $error The error given by reCAPTCHA (optional, default is null)
 * @param boolean $use_ssl Should the request be made over ssl? (optional, default is false)

 * @return string - The HTML to be embedded in the user's form.
 */
comment: /**
 * A ReCaptchaResponse is returned from recaptcha_check_answer()
 */
comment: /**
  * Calls an HTTP POST function to verify if the user's guess was correct
  * @param string $privkey
  * @param string $remoteip
  * @param string $challenge
  * @param string $response
  * @param array $extra_params an array of extra variables to post to the server
  * @return ReCaptchaResponse
  */
comment: //discard spam submissions
comment: /**
 * gets a URL where the user can sign up for reCAPTCHA. If your application
 * has a configuration page where you enter a key, you should provide a link
 * using this function.
 * @param string $domain The domain where the page is hosted
 * @param string $appname The name of your application
 */
comment: /* Mailhide related code */
comment: /* gets the reCAPTCHA Mailhide url for a given email, public key and private key */
comment: /**
 * gets the parts of the email to expose to the user.
 * eg, given johndoe@example,com return ["john", "example.com"].
 * the email is then displayed as john...@example.com
 */
comment: /**
 * Gets html to display an email address given a public an private key.
 * to get a key, go to:
 *
 * http://www.google.com/recaptcha/mailhide/apikey
 */
string: "RECAPTCHA_API_SERVER"
string: "http://www.google.com/recaptcha/api"
string: "RECAPTCHA_API_SECURE_SERVER"
string: "https://www.google.com/recaptcha/api"
string: "RECAPTCHA_VERIFY_SERVER"
string: "www.google.com"
string: ""
string: '='
string: '&amp;'
string: "POST $path HTTP/1.0\r\n"
string: "Host: $host\r\n"
string: "Content-Type: application/x-www-form-urlencoded;\r\n"
string: "Content-Length: "
string: "\r\n"
string: "User-Agent: reCAPTCHA/PHP\r\n"
string: "\r\n"
string: ''
string: 'Could not open socket'
string: "\r\n\r\n"
string: ''
string: "To use reCAPTCHA you must get an API key from &lt;a href='https://www.google.com/recaptcha/admin/create'&gt;https://www.google.com/recaptcha/admin/create&lt;/a&gt;"
string: ""
string: "&amp;amp;error="
string: '&lt;script type="text/javascript" src="'
string: '/challenge?k='
string: '"&gt;&lt;/script&gt;

	&lt;noscript&gt;
  		&lt;iframe src="'
string: '/noscript?k='
string: '" height="300" width="500" frameborder="0"&gt;&lt;/iframe&gt;&lt;br/&gt;
  		&lt;textarea name="recaptcha_challenge_field" rows="3" cols="40"&gt;&lt;/textarea&gt;
  		&lt;input type="hidden" name="recaptcha_response_field" value="manual_challenge"/&gt;
	&lt;/noscript&gt;'
string: ''
string: "To use reCAPTCHA you must get an API key from &lt;a href='https://www.google.com/recaptcha/admin/create'&gt;https://www.google.com/recaptcha/admin/create&lt;/a&gt;"
string: ''
string: "For security reasons, you must pass the remote ip to reCAPTCHA"
string: 'incorrect-captcha-sol'
string: "/recaptcha/api/verify"
string: 'privatekey'
string: 'remoteip'
string: 'challenge'
string: 'response'
string: "\n"
string: 'true'
string: "https://www.google.com/recaptcha/admin/create?"
string: 'domains'
string: 'app'
string: "mcrypt_encrypt"
string: "To use reCAPTCHA Mailhide, you need to have the mcrypt php module installed."
string: "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
string: '+/'
string: '-_'
string: ''
string: ""
string: "To use reCAPTCHA Mailhide, you have to sign up for a public and private key, "
string: "you can do so at &lt;a href='http://www.google.com/recaptcha/mailhide/apikey'&gt;http://www.google.com/recaptcha/mailhide/apikey&lt;/a&gt;"
string: 'H*'
string: "http://www.google.com/recaptcha/mailhide/d?k="
string: "&amp;c="
string: "/@/"
string: "&lt;a href='"
string: "' onclick=\"window.open('"
string: "', '', 'toolbar=0,scrollbars=0,location=0,statusbar=0,menubar=0,resizable=0,width=500,height=300'); return false;\" title=\"Reveal this e-mail address\"&gt;...&lt;/a&gt;@"

<b>scanning file: /var/www/an2google/trunk/modules/captcha/inc/recaptcha.inc.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	object for interacting with reCAPTCHA servers
comment: //--------------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
comment: //	original file header
comment: //--------------------------------------------------------------------------------------------------
comment: /*
 * This is a PHP library that handles calling reCAPTCHA.
 *    - Documentation and latest version
 *          http://recaptcha.net/plugins/php/
 *    - Get a reCAPTCHA API Key
 *          https://www.google.com/recaptcha/admin/create
 *    - Discussion group
 *          http://groups.google.com/group/recaptcha
 *
 * Copyright (c) 2007 reCAPTCHA -- http://recaptcha.net
 * AUTHORS:
 *   Mike Crawford
 *   Ben Maurer
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */
comment: //--------------------------------------------------------------------------------------------------
comment: //	this object has been modified for use with kapenta
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	member variables
comment: //----------------------------------------------------------------------------------------------
comment: // The reCAPTCHA server URLs:
comment: //define("RECAPTCHA_API_SERVER", "http://www.google.com/recaptcha/api");
comment: //define("RECAPTCHA_API_SECURE_SERVER", "https://www.google.com/recaptcha/api");
comment: //define("RECAPTCHA_VERIFY_SERVER", "");
comment: //----------------------------------------------------------------------------------------------
comment: //. Encodes the given data into a query string format
comment: //----------------------------------------------------------------------------------------------
comment: //arg: data - array of string elements to be encoded [array]
comment: //returns: encoded request [string]
comment: // Cut the last '&amp;'
comment: //----------------------------------------------------------------------------------------------
comment: //. Submits an HTTP POST to a reCAPTCHA server
comment: //----------------------------------------------------------------------------------------------
comment: //arg: host - internet host / HTTP server [string]
comment: //arg: path - HTTP location [string]
comment: //arg: data - array of form values / parameters [array]
comment: //opt: port - port number, default is 80 [int]
comment: //returns: HTTP response string or false on failure [string][bool]
comment: //%	return value [string]
comment: //TODO: fail gracefully
comment: // One TCP-IP packet
comment: //----------------------------------------------------------------------------------------------
comment: //. Gets the challenge HTML (javascript and non-javascript version).
comment: //----------------------------------------------------------------------------------------------
comment: //; This is called from the browser, and the resulting reCAPTCHA HTML widget
comment: //; is embedded within the HTML form it was called from.
comment: //arg: pubkey - A public key for reCAPTCHA [string]
comment: //opt: error - The error given by reCAPTCHA (optional, default is null) [string]
comment: //opt: use_ssl - Should the request be made over ssl? (optional, default is false) [bool]
comment: //returns: The HTML to be embedded in the user's form. [string]
comment: //----------------------------------------------------------------------------------------------
comment: //. Calls an HTTP POST function to verify if the user's guess was correct
comment: //----------------------------------------------------------------------------------------------
comment: //arg: privkey - private key [string]
comment: //arg: remoteip - browser client ip? [string]
comment: //arg: challenge - unkown [string]
comment: //arg: response - unknown [string]
comment: //arg: extra_params - an array of extra variables to post to the server [array]
comment: //returns: empty string on succes, error message on failure
comment: //discard spam submissions
comment: //----------------------------------------------------------------------------------------------
comment: //. gets a URL where the user can sign up for reCAPTCHA. If your application
comment: //----------------------------------------------------------------------------------------------
comment: //; has a configuration page where you enter a key, you should provide a link 
comment: //; using this method.
comment: //opt: domain - The domain where the page is hosted [string]
comment: //opt: appname - The name of your application [string]
comment: //----------------------------------------------------------------------------------------------
comment: //. pas a string to AES block size //TODO: check this
comment: //----------------------------------------------------------------------------------------------
comment: //arg: val - value to be padded [string]
comment: //returns: padded value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //. AES encrypts a string //TODO: research this
comment: //----------------------------------------------------------------------------------------------
comment: //arg: val - value to be encoded [string]
comment: //arg: ky - key [string]
comment: //returns: encrypted value [string]
comment: //TODO: fail gracefully
comment: //----------------------------------------------------------------------------------------------
comment: //.	base64 encodes a URL, replacing + and / with - and _ (I think, TODO: check this)
comment: //----------------------------------------------------------------------------------------------
comment: //arg: url - url, or part thereof [string]
comment: //----------------------------------------------------------------------------------------------
comment: //.	gets the reCAPTCHA Mailhide url for a given email, public key and private key
comment: //----------------------------------------------------------------------------------------------
comment: //arg: pubkey - public key [string]
comment: //arg: privkey - private key [string]
comment: //arg: email - email addres [string]
comment: //----------------------------------------------------------------------------------------------
comment: //.	gets the parts of the email to expose to the user.
comment: //----------------------------------------------------------------------------------------------
comment: //; eg, given johndoe@example,com return ["john", "example.com"].
comment: //; the email is then displayed as john...@example.com
comment: //arg: email - an email address [string]
comment: //----------------------------------------------------------------------------------------------
comment: //. Gets html to display an email address given a public an private key.
comment: //----------------------------------------------------------------------------------------------
comment: //arg: pubkey - public key [string]
comment: //arg: privkey - private key [string]
comment: //arg: email - email address? [string]
comment: //; to get a key, go to: http://www.google.com/recaptcha/mailhide/apikey
string: "http://www.google.com/recaptcha/api"
string: "https://www.google.com/recaptcha/api"
string: "www.google.com"
string: ""
string: '='
string: '&amp;'
string: ''
string: "POST $path HTTP/1.0\r\n"
string: "Host: $host\r\n"
string: "Content-Type: application/x-www-form-urlencoded;\r\n"
string: "Content-Length: "
string: "\r\n"
string: "User-Agent: reCAPTCHA/PHP\r\n"
string: "\r\n"
string: 'Could not open socket'
string: "\r\n\r\n"
string: ''
string: "&lt;div class='blockquote'&gt;To use reCAPTCHA you must get an API key from "
string: "&lt;a href='https://www.google.com/recaptcha/admin/create'&gt;"
string: "https://www.google.com/recaptcha/admin/create&lt;/a&gt;&lt;/div&gt;\n"
string: ""
string: "&amp;amp;error="
string: '/challenge?k='
string: '/noscript?k='
string: "
			&lt;script type=\"text/javascript\" src=\""
string: "\"&gt;&lt;/script&gt;
			&lt;noscript&gt;
  			&lt;iframe 
				src=\""
string: "\" 
				height="
string: " 
				width="
string: " 
				frameborder="
string: "&gt;
			&lt;/iframe&gt;&lt;br/&gt;
	  		&lt;textarea name='recaptcha_challenge_field' rows='3' cols='40'&gt;&lt;/textarea&gt;
	  		&lt;input type='hidden' name='recaptcha_response_field' value='manual_challenge'/&gt;
			&lt;/noscript&gt;
		"
string: ''
string: "To use reCAPTCHA you must get an API key from "
string: "&lt;a href='https://www.google.com/recaptcha/admin/create'&gt;"
string: "https://www.google.com/recaptcha/admin/create&lt;/a&gt;"
string: ''
string: "For security reasons, you must pass the remote ip to reCAPTCHA"
string: 'incorrect-captcha-sol'
string: 'incorrect-captcha-sol'
string: 'privatekey'
string: 'remoteip'
string: 'challenge'
string: 'response'
string: "/recaptcha/api/verify"
string: "\n"
string: 'true'
string: ''
string: "https://www.google.com/recaptcha/admin/create?"
string: 'domains'
string: 'app'
string: "mcrypt_encrypt"
string: "To use reCAPTCHA Mailhide, you need to have the mcrypt php module installed."
string: "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
string: '+/'
string: '-_'
string: ''
string: ""
string: "To use reCAPTCHA Mailhide, you have to sign up for a public and private key, "
string: "you can do so at &lt;a href='http://www.google.com/recaptcha/mailhide/apikey'&gt;"
string: "http://www.google.com/recaptcha/mailhide/apikey&lt;/a&gt;"
string: 'H*'
string: "http://www.google.com/recaptcha/mailhide/d?"
string: "k="
string: "&amp;c="
string: "/@/"
string: ''
string: 'toolbar=0, '
string: 'scrollbars=0, '
string: 'location=0, '
string: 'statusbar=0,'
string: 'menubar=0, '
string: 'resizable=0, '
string: 'width=500, '
string: 'height=300'
string: "onclick=\"window.open('"
string: "', '', '$wndOpts'); return false;\""
string: "&lt;a href='$url' $onClick title=\"Reveal this e-mail address\"&gt;...&lt;/a&gt;@"

<b>scanning file: /var/www/an2google/trunk/modules/calendar/views/yearsubnav.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	subnav for day display
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: year - year (yyyy) [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: permissions check here
comment: //TODO: replace with utility/collection class
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/calendar/models/entry.mod.php'
string: ''
string: '1970'
string: '01'
string: '01'
string: 'year'
string: ''
string: 'year'
string: 'prevYearUrl'
string: 'calendar/list/year_'
string: 'year'
string: 'nextYearUrl'
string: 'calendar/list/year_'
string: 'year'
string: 'modules/calendar/views/yearsubnav.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/calendar/views/upcomingnav.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	get next [num] events
comment: //--------------------------------------------------------------------------------------------------
comment: //opt: num - number of events to show [string]
string: 'modules/calendar/models/entry.mod.php'
string: 'num'
string: 'num'
string: ''
string: 'calendar/'
string: 'year'
string: '-'
string: 'month'
string: '-'
string: 'day'
string: 'jS F Y'
string: "&lt;a class='black' href='$link'&gt;$desc&lt;br/&gt;&lt;small&gt;$date&lt;/small&gt;&lt;/a&gt;&lt;br/&gt;"

<b>scanning file: /var/www/an2google/trunk/modules/calendar/views/thismonthnav.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	make calendar for current month
comment: //--------------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/calendar/models/entry.mod.php'
string: 'm'
string: 'Y'
string: 'small'

<b>scanning file: /var/www/an2google/trunk/modules/calendar/views/show.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	show a record
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - recordAlias or UID or calendar entry [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: permissions check here
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/calendar/models/entry.mod.php'
string: 'raUID'
string: ''
string: 'raUID'
string: ''
string: 'modules/calendar/views/show.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/calendar/views/samemonthnav.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	show a mini calendar of events in the same month
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - recordAlias or UID or calendar entry [string]
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/calendar/models/entry.mod.php'
string: 'raUID'
string: 'raUID'
string: 'small'

<b>scanning file: /var/www/an2google/trunk/modules/calendar/views/samecategorynav.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	show list of upcoming events in the same category
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - recordAlias or UID or calendar entry [string]
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/calendar/models/entry.mod.php'
string: 'raUID'
string: 'raUID'
string: ''
string: "&lt;table noborder&gt;\n"
string: "&lt;tr&gt;\n"
string: "&lt;td class='title' width='90px'&gt;&amp;nbsp;Date&amp;nbsp;&lt;/td&gt;\n"
string: "&lt;td class='title'&gt;&amp;nbsp;Event&amp;nbsp;&lt;/td&gt;\n"
string: "&lt;/tr&gt;\n"
string: 'calendar/'
string: 'alias'
string: "&lt;tr&gt;\n"
string: "&lt;td valign='top'&gt;"
string: 'year'
string: '-'
string: 'month'
string: '-'
string: 'day'
string: "&lt;/td&gt;\n"
string: "&lt;td&gt;&lt;a href='"
string: "'&gt;"
string: 'title'
string: "&lt;/a&gt;&lt;/td&gt;\n"
string: "&lt;/tr&gt;\n"
string: "&lt;/table&gt;\n"
string: '(no upcoming events)'

<b>scanning file: /var/www/an2google/trunk/modules/calendar/views/monthsubnav.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	subnav for month display
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: year - year (yyyy) [string]
comment: //arg: month - month (mm) 01 to 12 [string]
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/calendar/models/entry.mod.php'
string: 'month'
string: 'year'
string: 'year'
string: 'month'
string: ''
string: 'prevMonthUrl'
string: '%%serverPath%%calendar/month_'
string: 'year'
string: '_'
string: 'month'
string: 'nextMonthUrl'
string: '%%serverPath%%calendar/month_'
string: 'year'
string: '_'
string: 'month'
string: 'plus1'
string: 'month'
string: 'year'
string: 'small'
string: 'month'
string: 'year'
string: 'plus2'
string: 'month'
string: 'year'
string: 'small'
string: 'month'
string: 'year'
string: 'plus3'
string: 'month'
string: 'year'
string: 'small'
string: 'month'
string: 'year'
string: 'plus4'
string: 'month'
string: 'year'
string: 'small'
string: 'modules/calendar/views/monthsubnav.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/calendar/views/menu.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	menu for calendar, no arguments
comment: //--------------------------------------------------------------------------------------------------
comment: //TODO: fix up permissions check for editing calendar items, add submenu item for it
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/calendar/models/entry.mod.php'
string: 'thisYear'
string: 'year_'
string: 'Y'
string: 'thisMonth'
string: 'month_'
string: 'Y'
string: '_'
string: 'm'
string: 'today'
string: 'day_'
string: 'Y'
string: '_'
string: 'm'
string: '_'
string: 'j'
string: 'nextMonth'
string: 'month_'
string: 'Y'
string: '_'
string: 'm'
string: 'm'
string: 'nextMonth'
string: 'month_'
string: 'Y'
string: '_01'
string: 'newEntry'
string: '[[:theme::submenu::label=Add Calendar Entry::link=/calendar/new/:]]'
string: 'calendar'
string: 'calendar_entry'
string: 'new'
string: 'newEntry'
string: ''
string: 'modules/calendar/views/menu.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/calendar/views/listyear.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	display upload/view for a single image (eg, user profile picture)
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: year - show a year [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check input
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: permissions check here
comment: //----------------------------------------------------------------------------------------------
comment: //	make the listing
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/calendar/models/entry.mod.php'
string: ''
string: 'year'
string: ''
string: 'year'
string: "&lt;h2&gt;&lt;a class='black' href='/calendar/month_"
string: 'year'
string: "_"
string: "'&gt;$monthName "
string: 'year'
string: "&lt;/a&gt;&lt;/h2&gt;"
string: 'year'
string: "&lt;table noborder&gt;\n"
string: "&lt;tr&gt;\n"
string: "&lt;td class='title'&gt;&amp;nbsp;Day&amp;nbsp;&lt;/td&gt;\n"
string: "&lt;td class='title'&gt;&amp;nbsp;Category&amp;nbsp;&lt;/td&gt;\n"
string: "&lt;td class='title'&gt;&amp;nbsp;Event&amp;nbsp;&lt;/td&gt;\n"
string: "&lt;tr&gt;\n"
string: "&lt;tr&gt;\n"
string: "&lt;td&gt;"
string: 'day'
string: "&lt;/td&gt;\n"
string: "&lt;td&gt;"
string: 'category'
string: "&lt;/td&gt;\n"
string: "&lt;td&gt;&lt;A href='/calendar/"
string: 'alias'
string: "'&gt;"
string: 'title'
string: "&lt;/a&gt;&lt;/td&gt;\n"
string: "&lt;/tr&gt;\n"
string: "&lt;/table&gt;\n"
string: "&lt;p&gt;(no events recorded for this month)&lt;/p&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/calendar/views/listmonth.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	show list of events in a given month
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: year - year (yyyy) [string]
comment: //arg: month - month (mm) 01 to 12 [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/calendar/models/entry.mod.php'
string: 'month'
string: ''
string: 'year'
string: ''
string: 'year'
string: 'month'
string: ''
string: 'large'
string: "&lt;br/&gt;[[:theme::navtitlebox::width=570::label=Entries:]]\n"
string: "&lt;h2&gt;All Calendar Events For "
string: " $year&lt;/h2&gt;"
string: 'modules/calendar/views/entry.block.php'
string: '&lt;p&gt;(no events are recorded for this month)&lt;/p&gt;'

<b>scanning file: /var/www/an2google/trunk/modules/calendar/views/listday.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	show list of events on a given day
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: year - year (yyyy) [string]
comment: //arg: month - month (mm) 01 to 12 [string]
comment: //arg: day - day (dd) 01 to 31 [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------	
comment: //TODO: move this database work out of the model
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/calendar/models/entry.mod.php'
string: ''
string: 'day'
string: ''
string: 'month'
string: ''
string: 'year'
string: ''
string: 'year'
string: 'month'
string: 'day'
string: '0'
string: 'large'
string: "&lt;br/&gt;[[:theme::navtitlebox::width=570::label=Entries:]]\n"
string: "&lt;h2&gt;All Calendar Events For "
string: " $day "
string: " $year&lt;/h2&gt;"
string: 'modules/calendar/views/show.block.php'
string: '&lt;p&gt;(no events are recorded for this date)&lt;/p&gt;'

<b>scanning file: /var/www/an2google/trunk/modules/calendar/views/editform.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	show the edit form
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - recordAlias or UID or calendar entry [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/calendar/models/entry.mod.php'
string: ''
string: 'raUID'
string: ''
string: 'raUID'
string: ''
string: 'calendar'
string: 'calendar_entry'
string: 'edit'
string: ''
string: 'contentJs64'
string: 'contentJs64'
string: 'content'
string: 'modules/calendar/views/editform.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/calendar/views/daysubnav.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	subnav for day display
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: year - year (yyyy) [string]
comment: //arg: month - day (mm) 01 to 12 [string]
comment: //arg: day - day (dd) 01 to 31 [string]
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/calendar/models/entry.mod.php'
string: 'day'
string: 'month'
string: 'year'
string: 'year'
string: 'month'
string: 'day'
string: ''
string: 'prevDayUrl'
string: '%%serverPath%%calendar/day_'
string: 'year'
string: '_'
string: 'month'
string: '_'
string: 'day'
string: 'nextDayUrl'
string: '%%serverPath%%calendar/day_'
string: 'year'
string: '_'
string: 'month'
string: '_'
string: 'day'
string: 'plus1'
string: 'month'
string: 'year'
string: 'small'
string: 'month'
string: 'year'
string: 'plus2'
string: 'month'
string: 'year'
string: 'small'
string: 'month'
string: 'year'
string: 'plus3'
string: 'month'
string: 'year'
string: 'small'
string: 'month'
string: 'year'
string: 'plus4'
string: 'month'
string: 'year'
string: 'small'
string: 'modules/calendar/views/daysubnav.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/calendar/views/blank.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	display a blank calendar (testing)
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: month - show a day, month or year [string]
comment: //arg: year - day, month or year to show [string]
comment: //arg: size - large or small [string]
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/calendar/models/entry.mod.php'
string: '10'
string: '2008'
string: 'large'
string: 'month'
string: 'month'
string: 'year'
string: 'year'
string: 'size'
string: 'size'
string: 'bgcolor'
string: '#cccccc'
string: 'label'
string: '0 entries'

<b>scanning file: /var/www/an2google/trunk/modules/calendar/views/allmonthsnav.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	mini nav of all months
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: year - year (yyyy) [string]
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/calendar/models/entry.mod.php'
string: 'year'
string: 'year'
string: ''
string: 'year'
string: 'small'

<b>scanning file: /var/www/an2google/trunk/modules/calendar/models/entry.mod.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	object for managing calendar entries
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	member variables (as retieved from database)
comment: //----------------------------------------------------------------------------------------------
comment: //_	currently loaded database record [array]
comment: //_	database table definition [array]
comment: //_	set to true when an object has been loaded [bool]
comment: //_ UID [string]
comment: //_ title [string]
comment: //_ varchar(100) [string]
comment: //_ varchar(255) [string]
comment: //_ wyswyg [string]
comment: //_ varchar(10) [string]
comment: //_ varchar(10) [string]
comment: //_ varchar(10) [string]
comment: //_ varchar(50) [string]
comment: //_ varchar(50) [string]
comment: //_ varchar(30) [string]
comment: //_ datetime [string]
comment: //_ ref:Users_User [string]
comment: //_ datetime [string]
comment: //_ ref:Users_User [string]
comment: //_ alias [string]
comment: //----------------------------------------------------------------------------------------------
comment: //.	constructor
comment: //----------------------------------------------------------------------------------------------
comment: //opt: raUID - UID or alias of a calendar entry [string]
comment: // initialise table schema
comment: // try load an object from the database
comment: // check if we did
comment: // make new object
comment: // initialize
comment: //----------------------------------------------------------------------------------------------
comment: //. load an object from the database given its UID or an alias
comment: //----------------------------------------------------------------------------------------------
comment: //arg: raUID - UID or alias of a Entry object [string]
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //. load Entry object serialized as an associative array
comment: //----------------------------------------------------------------------------------------------
comment: //arg: ary - associative array of members and values [array]
comment: //returns: true on success, false on failure [bool]
comment: //if (false == $db-&gt;validate($ary, $this-&gt;dbSchema)) { return false; }
comment: //TODO: complete this feature
comment: //----------------------------------------------------------------------------------------------
comment: //. save the current object to database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string on success, html report of errors on failure [string]
comment: //: $db-&gt;save(...) will raise an object_updated event if successful
comment: //----------------------------------------------------------------------------------------------
comment: //. check that object is correct before allowing it to be stored in database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string if object passes, warning message if not [string]
comment: //----------------------------------------------------------------------------------------------
comment: //. database table definition and content versioning
comment: //----------------------------------------------------------------------------------------------
comment: //returns: information for constructing SQL queries [array]
comment: //table columns
comment: //these fields will be indexed
comment: //revision history will be kept for these fields
comment: //----------------------------------------------------------------------------------------------
comment: //. serialize this object to an array
comment: //----------------------------------------------------------------------------------------------
comment: //returns: associative array of all members which define this instance [array]
comment: //----------------------------------------------------------------------------------------------
comment: //.	make an extended array of all data a view will need
comment: //----------------------------------------------------------------------------------------------
comment: //returns: extended array of member variables and metadata [array]
comment: //------------------------------------------------------------------------------------------
comment: //	links
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	summary 
comment: //------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //.	draw a calendar month
comment: //----------------------------------------------------------------------------------------------
comment: //arg: month - month number ('01'-'12') [string]
comment: //arg: year - four digit year [string]
comment: //arg: days - an array of day =&gt; bgcolor,label [array]
comment: //arg: size - may be rendered large for content column or sidebar size (large|small) [string]
comment: //returns: html [string]
comment: //------------------------------------------------------------------------------------------
comment: //	empty blocks at beginning of month
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	draw the blocks
comment: //------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //.	find out how many days are in a month
comment: //----------------------------------------------------------------------------------------------
comment: //arg: month - month number ('01'-'12') [string]
comment: //arg: year - four digit year [string]
comment: //,	month is 01 through 12, year is four digits
comment: //----------------------------------------------------------------------------------------------
comment: //.	find first day of month (mon-sun)
comment: //----------------------------------------------------------------------------------------------
comment: //arg: month - month number ('01'-'12') [string]
comment: //arg: year - four digit year [string]
comment: //returns: 3 letter day abbreviation [string]
comment: //,	month is 01 through 12, year is four digits
comment: //----------------------------------------------------------------------------------------------
comment: //.	get month name, 01 =&gt; January
comment: //----------------------------------------------------------------------------------------------
comment: //arg: month - month number ('01'-'12') [string]
comment: //returns: full name of month or false on failure [string][bool]
comment: //----------------------------------------------------------------------------------------------
comment: //.	get day name, Monday - Sunday
comment: //----------------------------------------------------------------------------------------------
comment: //arg: day - two digit day number ('00'-'31') [string]
comment: //arg: month - month number ('01'-'12') [string]
comment: //arg: year - four digit year [string]
comment: //returns: full day name (Monday-Sunday) [string]
comment: //----------------------------------------------------------------------------------------------
comment: //.	load a month's worth of data into an array
comment: //----------------------------------------------------------------------------------------------
comment: //arg: month - month number ('01'-'12') [string]
comment: //arg: year - four digit year [string]
comment: //returns: nested array of calendar entries [array]	
comment: // $sql = "select * from Calendar_Entry where year='". $db-&gt;addMarkup($year) ."' and month=" 
comment: //     . $db-&gt;addMarkup($month) . " and published='yes' order by year, month, day, eventStart";
comment: //----------------------------------------------------------------------------------------------
comment: //.	load a day's worth of data into an array
comment: //----------------------------------------------------------------------------------------------
comment: //arg: day - two digit day number ('00'-'31') [string]
comment: //arg: month - month number ('01'-'12') [string]
comment: //arg: year - four digit year [string]
comment: //returns: nested array of calendar entries [array]	
comment: // $sql = "select * from Calendar_Entry where year='". $db-&gt;addMarkup($year) ."' and month=" 
comment: //   . $db-&gt;addMarkup($month) . " and day=" . $db-&gt;addMarkup($day) . " and published='yes' " 
comment: //   . "order by year, month, day, eventStart";
comment: //----------------------------------------------------------------------------------------------
comment: //.	make an html calendar for a given month, $size = large|small, $month = mm, $year = yyyy
comment: //----------------------------------------------------------------------------------------------
comment: //arg: month - month number ('01'-'12') [string]
comment: //arg: year - four digit year [string]
comment: //arg: size - may be rendered large for content column or sidebar size (large|small) [string]
comment: //returns: html table [string]
comment: //------------------------------------------------------------------------------------------
comment: //	make days array
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	populate with events for this month
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	update bgcolor and label
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	render to html
comment: //------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //.	load upcoming events in a certain category
comment: //----------------------------------------------------------------------------------------------
comment: //arg: category - an event category [string]
comment: //arg: num - maximum number of entrie to return [string]
comment: //returns: nested array of calendar entries [array]	
comment: //$sql = "select * from Calendar_Entry where category='" . $category . "' and year &gt;= " . date('Y') 
comment: //	  . " and month &gt;= " . date('m') . " and day &gt;= " . date('j') . " and published='yes' " 
comment: //    . "order by year, month, day, eventStart limit " . (int)$num;
comment: //----------------------------------------------------------------------------------------------
comment: //.	load all upcoming events 
comment: //----------------------------------------------------------------------------------------------
comment: //arg: num - maximum number of entrie to return [string]	
comment: //returns: nested array of calendar entries [array]	
comment: //$sql = "select * from Calendar_Entry where year &gt;= " . date('Y') . " and month &gt;= " 
comment: //     . date('m') . " and day &gt;= " . date('j') . " and published='yes' " 
comment: //     . "order by year, month, day, eventStart limit $num";
comment: //----------------------------------------------------------------------------------------------
comment: //.	ensure a number has two digits (9 =&gt; 09)
comment: //----------------------------------------------------------------------------------------------
comment: //arg: num - string representing a number [string]
comment: //returns: two digit number [string]
comment: //----------------------------------------------------------------------------------------------
comment: //.	find the next calendar month ()
comment: //----------------------------------------------------------------------------------------------
comment: //arg: month - month number ('01'-'12') [string]
comment: //arg: year - four digit year [string]
comment: //returns: array of {year, month} [array]
comment: //----------------------------------------------------------------------------------------------
comment: //.	find the previous calendar month (returns array [year][month])
comment: //----------------------------------------------------------------------------------------------
comment: //arg: month - month number ('01'-'12') [string]
comment: //arg: year - four digit year [string]
comment: //returns: array of {year, month} [array]
comment: //----------------------------------------------------------------------------------------------
comment: //.	find the next calendar day (returns array [year][month][day])
comment: //----------------------------------------------------------------------------------------------
comment: //arg: day - two digit day number ('01'-'31') [string]
comment: //arg: month - month number ('01'-'12') [string]
comment: //arg: year - four digit year [string]
comment: //returns: array of {year, month, day} [array]
comment: // add one day
comment: //----------------------------------------------------------------------------------------------
comment: //.	find the previous calendar day (returns array [year][month][day])
comment: //----------------------------------------------------------------------------------------------
comment: //arg: day - two digit day number ('01'-'31') [string]
comment: //arg: month - month number ('01'-'12') [string]
comment: //arg: year - four digit year [string]
comment: //returns: array of {year, month, day} [array]		
comment: // add one day
comment: //----------------------------------------------------------------------------------------------
comment: //. delete current object from the database
comment: //----------------------------------------------------------------------------------------------
comment: //: $db-&gt;delete(...) will raise an object_deleted event on success [bool]
comment: //returns: true on success, false on failure [bool]
comment: // nothing to do
string: ''
string: ''
string: 'New Calendar Item '
string: ''
string: 'Y'
string: 'm'
string: 'd'
string: '00:00'
string: '00:00'
string: 'yes'
string: ''
string: 'UID'
string: 'title'
string: 'category'
string: 'venue'
string: 'content'
string: 'year'
string: 'month'
string: 'day'
string: 'eventStart'
string: 'eventEnd'
string: 'published'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: 'alias'
string: 'yes'
string: ''
string: 'calendar'
string: 'calendar_entry'
string: "Database error.&lt;br/&gt;\n"
string: ''
string: ''
string: ''
string: "No UID.&lt;br/&gt;\n"
string: 'module'
string: 'calendar'
string: 'model'
string: 'calendar_entry'
string: 'archive'
string: 'yes'
string: 'fields'
string: 'UID'
string: 'VARCHAR(33)'
string: 'title'
string: 'VARCHAR(255)'
string: 'category'
string: 'VARCHAR(100)'
string: 'venue'
string: 'VARCHAR(255)'
string: 'content'
string: 'TEXT'
string: 'year'
string: 'VARCHAR(10)'
string: 'month'
string: 'VARCHAR(10)'
string: 'day'
string: 'VARCHAR(10)'
string: 'eventStart'
string: 'VARCHAR(50)'
string: 'eventEnd'
string: 'VARCHAR(50)'
string: 'published'
string: 'VARCHAR(30)'
string: 'createdOn'
string: 'DATETIME'
string: 'createdBy'
string: 'VARCHAR(33)'
string: 'editedOn'
string: 'DATETIME'
string: 'editedBy'
string: 'VARCHAR(33)'
string: 'alias'
string: 'VARCHAR(255)'
string: 'indices'
string: 'UID'
string: '10'
string: 'createdOn'
string: ''
string: 'createdBy'
string: '10'
string: 'editedOn'
string: ''
string: 'editedBy'
string: '10'
string: 'alias'
string: '10'
string: 'nodiff'
string: 'title'
string: 'category'
string: 'venue'
string: 'content'
string: 'year'
string: 'month'
string: 'day'
string: 'eventStart'
string: 'eventEnd'
string: 'published'
string: 'UID'
string: 'title'
string: 'category'
string: 'venue'
string: 'content'
string: 'year'
string: 'month'
string: 'day'
string: 'eventStart'
string: 'eventEnd'
string: 'published'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: 'alias'
string: 'editUrl'
string: ''
string: 'editLink'
string: ''
string: 'viewUrl'
string: ''
string: 'viewLink'
string: ''
string: 'delUrl'
string: ''
string: 'delLink'
string: ''
string: 'newUrl'
string: ''
string: 'newLink'
string: ''
string: 'calendar'
string: 'calendar_entry'
string: 'show'
string: 'viewUrl'
string: '%%serverPath%%calendar/'
string: 'alias'
string: 'viewLink'
string: "&lt;a href='"
string: 'viewUrl'
string: "'&gt;[read on &amp;gt;&amp;gt;]&lt;/a&gt;"
string: 'calendar'
string: 'calendar_entry'
string: 'edit'
string: 'editUrl'
string: '%%serverPath%%calendar/edit/'
string: 'alias'
string: 'editLink'
string: "&lt;a href='"
string: 'editUrl'
string: "'&gt;[edit]&lt;/a&gt;"
string: 'calendar'
string: 'calendar_entry'
string: 'delete'
string: 'delUrl'
string: '%%serverPath%%calendar/confirmdelete/UID_'
string: '/'
string: 'delLink'
string: "&lt;a href='"
string: 'delUrl'
string: "'&gt;[delete]&lt;/a&gt;"
string: 'calendar'
string: 'calendar_entry'
string: 'new'
string: 'newUrl'
string: "%%serverPath%%calendar/new/"
string: 'newLink'
string: "&lt;a href='"
string: 'newUrl'
string: "'&gt;[create new coin]&lt;/a&gt;"
string: 'summary'
string: 'content'
string: 'contentJs'
string: 'content'
string: 'contectJs'
string: "'"
string: '--squote--'
string: 'contentJs'
string: 'contentJs'
string: "'"
string: '--dquote--'
string: 'contentJs'
string: ''
string: 'Mon'
string: 'Tue'
string: 'Wed'
string: 'Thu'
string: 'Fri'
string: 'Sat'
string: 'Sun'
string: "&lt;td&gt;&lt;/td&gt;\n"
string: 'label'
string: 'label'
string: ''
string: "onClick=\"window.location='"
string: "calendar/day_"
string: "_"
string: "_"
string: "'\""
string: 'large'
string: "&lt;td bgcolor='"
string: 'bgcolor'
string: "' width='80' valign='top' $dayLink&gt;"
string: "&lt;h3&gt;$dayNum&lt;/h3&gt;"
string: 'label'
string: "&lt;/td&gt;\n"
string: "&lt;td bgcolor='"
string: 'bgcolor'
string: "' width='40' $dayLink&gt;$dayNum&lt;/td&gt;"
string: "&lt;h2&gt;&lt;a class='black' href='/calendar/month_"
string: "_"
string: "'&gt;"
string: ' '
string: "&lt;/a&gt;&lt;/h2&gt;"
string: "&lt;table noborder&gt;\n"
string: "&lt;tr&gt;&lt;td&gt;Mon&lt;/td&gt;&lt;td&gt;Tue&lt;/td&gt;&lt;td&gt;Wed&lt;/td&gt;&lt;td&gt;Thu&lt;/td&gt;&lt;td&gt;Fri&lt;/td&gt;"
string: "&lt;td&gt;Sat&lt;/td&gt;&lt;td&gt;Sun&lt;/td&gt;&lt;/tr&gt;\n"
string: "&lt;tr&gt;\n"
string: "&lt;/tr&gt;\n"
string: "&lt;/table&gt;\n"
string: '04'
string: '06'
string: '09'
string: '11'
string: '02'
string: '/'
string: '/01'
string: "D"
string: '01'
string: 'January'
string: '02'
string: 'February'
string: '03'
string: 'March'
string: '04'
string: 'April'
string: '05'
string: 'May'
string: '06'
string: 'June'
string: '07'
string: 'July'
string: '08'
string: 'August'
string: '09'
string: 'September'
string: '10'
string: 'October'
string: '11'
string: 'November'
string: '12'
string: 'December'
string: '/'
string: '/'
string: "l"
string: '0'
string: "year='"
string: "'"
string: "month='"
string: "'"
string: "published='yes'"
string: 'calendar_entry'
string: '*'
string: 'year, month, day, eventStart'
string: 'UID'
string: '0'
string: "year='"
string: "'"
string: "month='"
string: "'"
string: "day='"
string: "'"
string: "published='yes'"
string: 'calendar_entry'
string: '*'
string: 'year, month, day, eventStart'
string: 'UID'
string: 'bgcolor'
string: '#bbbbbb'
string: 'numEvents'
string: 'day'
string: ''
string: 'numEvents'
string: 'numEvents'
string: 'label'
string: 'numEvents'
string: ' events'
string: 'bgcolor'
string: '#7777bb'
string: 'm'
string: 'Y'
string: 'j'
string: 'bgcolor'
string: '#77bb77'
string: "category='"
string: "'"
string: "year &gt;= "
string: 'Y'
string: "month &gt;= "
string: 'm'
string: "day &gt;= "
string: 'j'
string: "published='yes'"
string: "year, month, day, eventStart"
string: 'calendar_entry'
string: '*'
string: ''
string: 'UID'
string: "year &gt;= "
string: 'Y'
string: "month &gt;= "
string: 'm'
string: "day &gt;= "
string: 'j'
string: "published='yes'"
string: "year, month, day, eventStart"
string: 'calendar_entry'
string: '*'
string: ''
string: 'UID'
string: '0'
string: 'month'
string: 'year'
string: '12'
string: 'month'
string: '01'
string: 'year'
string: 'month'
string: 'month'
string: 'year'
string: '01'
string: 'month'
string: '12'
string: 'year'
string: 'month'
string: '/'
string: '/'
string: 'day'
string: 'd'
string: 'month'
string: 'm'
string: 'year'
string: 'Y'
string: '/'
string: '/'
string: 'day'
string: 'd'
string: 'month'
string: 'm'
string: 'year'
string: 'Y'

<b>scanning file: /var/www/an2google/trunk/modules/calendar/inc/relationships.inc.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	relationships between the users and calendar entries
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: refModel - type of object [string]
comment: //arg: UID - UID of an object [string]
comment: //arg: relationship - between this object and a user [string]
comment: //arg: userUID - UID of the user related to this object [string]
comment: //returns: true if the given relationship exists, otherwise false [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //	get the user we want to know about
comment: //----------------------------------------------------------------------------------------------	
comment: //----------------------------------------------------------------------------------------------
comment: //	relationships of Entry object
comment: //----------------------------------------------------------------------------------------------
comment: // try load the object
comment: // check that we did
comment: // relationship exists of user started this project
comment: //..........................................................................
string: 'modules/calendar/models/entry.mod.php'
string: 'calendar_entry'
string: 'creator'

<b>scanning file: /var/www/an2google/trunk/modules/calendar/inc/install.inc.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	install script for Calendar module
comment: //--------------------------------------------------------------------------------------------------
comment: //+	reports are human-readable HTML, with script-readable HTML comments
comment: //--------------------------------------------------------------------------------------------------
comment: //|	install the Calendar module
comment: //--------------------------------------------------------------------------------------------------
comment: //returns: html report or false if not authorized [string][bool]
comment: //----------------------------------------------------------------------------------------------
comment: //	create or upgrade Calendar_Entry table
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	copy all records from previous table
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	done
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
comment: //|	discover if this module is installed
comment: //--------------------------------------------------------------------------------------------------
comment: //:	if installed correctly report will contain HTML comment &lt;!-- installed correctly --&gt;
comment: //returns: HTML installation status report [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	ensure the table which stores Entry objects exists and is correct
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	done
comment: //----------------------------------------------------------------------------------------------
string: 'core/dbdriver/mysqladmin.dbd.php'
string: 'modules/calendar/models/entry.mod.php'
string: 'admin'
string: ''
string: 'recordAlias'
string: 'alias'
string: 'calendar'
string: "&lt;b&gt;moved $count records from 'calendar' table.&lt;/b&gt;&lt;br/&gt;"
string: 'admin'
string: ''
string: '&lt;!-- table installed correctly --&gt;'
string: '&lt;!-- module installed correctly --&gt;'

<b>scanning file: /var/www/an2google/trunk/modules/calendar/actions/show.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	view a calendar entry
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check reference and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	render the page
comment: //----------------------------------------------------------------------------------------------
string: 'modules/calendar/models/entry.mod.php'
string: ''
string: 'No entry specified.'
string: 'calendar/'
string: 'calendar_entry'
string: 'No such calendar entry.'
string: 'modules/calendar/actions/show.page.php'
string: 'raUID'
string: 'UID'
string: 'calendarTitle'
string: 'calendarCategory'

<b>scanning file: /var/www/an2google/trunk/modules/calendar/actions/save.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	save changes to a Calendar_Entry object
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check permissions and POST variables
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	load and update the object
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: error checking /sanitation here
comment: //----------------------------------------------------------------------------------------------
comment: //	check that object was saved and redirect
comment: //----------------------------------------------------------------------------------------------
string: 'modules/calendar/models/entry.mod.php'
string: 'action'
string: 'action not specified'
string: 'saveCalendar'
string: 'action'
string: 'action not supported'
string: 'UID'
string: 'UID not POSTed'
string: 'UID'
string: 'calendar'
string: 'calendar_entry'
string: 'edit'
string: 'You are not authorized to edit this Entry.'
string: "could not load Entry $UID"
string: 'title'
string: 'category'
string: 'venue'
string: 'content'
string: 'year'
string: 'month'
string: 'day'
string: 'eventstart'
string: 'eventend'
string: 'published'
string: ''
string: 'Calendar entry updated.'
string: 'Could not save Entry:&lt;br/&gt;'
string: 'return'
string: 'return'
string: '/calendar/show/'

<b>scanning file: /var/www/an2google/trunk/modules/calendar/actions/new.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	add a new calendar entry
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/calendar/models/entry.mod.php'
string: 'calendar'
string: 'calendar_entry'
string: 'new'
string: 'calendar/edit/'

<b>scanning file: /var/www/an2google/trunk/modules/calendar/actions/list.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	list all events for a given day, month or year
comment: //--------------------------------------------------------------------------------------------------
comment: //TODO: replace this with three different actions for listing dats, months and years
comment: //TODO: set cache/spider/robots controls for listings without entries to index/store
comment: //----------------------------------------------------------------------------------------------
comment: //	authentication (disallow public access)
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	show calendar events for given period
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	default, show this month
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	show a year
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	show a month
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	show a day
comment: //----------------------------------------------------------------------------------------------
string: 'modules/calendar/models/entry.mod.php'
string: 'public'
string: 'banned'
string: ''
string: ''
string: 'day'
string: 'day'
string: 'day'
string: 'month'
string: 'month'
string: 'month'
string: 'year'
string: 'year'
string: 'year'
string: ''
string: 'modules/calendar/actions/month.page.php'
string: 'year'
string: 'Y'
string: 'month'
string: 'm'
string: 'monthName'
string: 'F'
string: 'year'
string: 'modules/calendar/actions/year.page.php'
string: 'scope'
string: 'year'
string: 'nextyear'
string: 'prevyear'
string: 'month'
string: '_'
string: 'modules/calendar/actions/month.page.php'
string: 'year'
string: 'month'
string: 'monthName'
string: 'day'
string: '_'
string: 'modules/calendar/actions/day.page.php'
string: 'year'
string: 'month'
string: 'day'
string: 'monthName'

<b>scanning file: /var/www/an2google/trunk/modules/calendar/actions/edit.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	edit a calendar entry
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check reference and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the page
comment: //----------------------------------------------------------------------------------------------
string: 'modules/calendar/models/entry.mod.php'
string: ''
string: 'Calendar entry not found.'
string: 'calendar'
string: 'calendar_entry'
string: 'edit'
string: 'You cannot edit this calendar entry.'
string: 'modules/calendar/actions/edit.page.php'
string: 'raUID'

<b>scanning file: /var/www/an2google/trunk/modules/calendar/actions/delete.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	delete a Calendar_Entry object
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check POST vars and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	delete the entry and redirect back to the calendar front page
comment: //----------------------------------------------------------------------------------------------	
string: 'modules/calendar/models/entry.mod.php'
string: 'action'
string: 'Action not specified.'
string: 'deleteRecord'
string: 'action'
string: 'Action not supported.'
string: 'UID'
string: 'Entry not specified (UID)'
string: 'UID'
string: 'calendar'
string: 'calendar_entry'
string: 'delete'
string: 'Deleted calendar entry: '
string: 'ok'
string: 'calendar/'

<b>scanning file: /var/www/an2google/trunk/modules/calendar/actions/default.act.php</b>
string: ''
string: 'modules/calendar/actions/list.act.php'
string: 'modules/calendar/actions/show.act.php'

<b>scanning file: /var/www/an2google/trunk/modules/calendar/actions/confirmdelete.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	confirm deletion of a calendar entry
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the confirmation block and redirect to the entry page
comment: //----------------------------------------------------------------------------------------------
string: 'modules/calendar/models/entry.mod.php'
string: 'UID'
string: 'Calendar entry not specified.'
string: 'UID'
string: 'Calendar entry not found.'
string: 'calendar'
string: 'calendar_entry'
string: 'delete'
string: 'You are not authorized to delete this calendar entry.'
string: 'UID'
string: 'raUID'
string: 'modules/calendar/views/confirmdelete.block.php'
string: 'warn'
string: 'calendar/'

<b>scanning file: /var/www/an2google/trunk/modules/badges/views/show.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	show a badge
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - alias or UID of a Badges_Badge object [string]
comment: //opt: badgeUID - replaces raUID if present [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: permissions check here
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/badges/models/badge.mod.php'
string: 'modules/badges/models/userindex.mod.php'
string: ''
string: 'badgeUID'
string: 'raUID'
string: 'badgeUID'
string: 'raUID'
string: ''
string: 'raUID'
string: ''
string: 'modules/badges/views/show.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/badges/views/select.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	form for awarding badges to users from their profile
comment: //--------------------------------------------------------------------------------------------------
comment: //opt: varname - name of HTML form field [string]
comment: //%	return value [string]
comment: //%	select field name [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	query the database
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
string: ''
string: 'badgeUID'
string: 'admin'
string: ''
string: 'varname'
string: 'varName'
string: 'badges_badge'
string: '*'
string: ''
string: 'name'
string: "&lt;select name='"
string: "'&gt;\n"
string: "\t&lt;option value='"
string: 'UID'
string: "'&gt;"
string: 'name'
string: "&lt;/option&gt;\n"
string: "&lt;/select&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/badges/views/recipients.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	list all users who recieved badge
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - alias or UID of a Bades_Badge object [string]
comment: //opt: badgeUID - overrides raUID if present [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permisisons
comment: //----------------------------------------------------------------------------------------------
comment: // no public users, for now
comment: //----------------------------------------------------------------------------------------------
comment: //	query database
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: use a permission for this
string: 'modules/badges/models/badge.mod.php'
string: ''
string: 'public'
string: '[[:users::pleaslogin:]]'
string: 'badgeUID'
string: 'raUID'
string: 'badgeUID'
string: 'raUID'
string: ''
string: 'raUID'
string: '(unkown badge)'
string: "badgeUID='"
string: "'"
string: 'Badges_UserIndex'
string: '*'
string: ''
string: 'admin'
string: '%%serverPath%%badges/revoke/'
string: 'UID'
string: "&lt;a href='$rmUrl'&gt;[revoke]&lt;/a&gt;"
string: "[[:users::summarynav::userUID="
string: 'userUID'
string: "::extra=$rmLink:]]&lt;br/&gt;\n"
string: "(no recipients yet)"

<b>scanning file: /var/www/an2google/trunk/modules/badges/views/listbadges.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	list all Badge objects, paginated
comment: //--------------------------------------------------------------------------------------------------
comment: //opt: pageNo - page number (integer) [string]
comment: //opt: pageSize - number or items per page (integer) [string]
comment: //opt: orderBy - field to order the list by (defualt is createdOn) [string]
comment: //%	first page if not specified [int]
comment: //%	default number of items per page [int]
comment: //%	default list order [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check permissions and args
comment: //----------------------------------------------------------------------------------------------
comment: // users may list by these fields
comment: //----------------------------------------------------------------------------------------------
comment: //	count and load list items
comment: //----------------------------------------------------------------------------------------------
comment: //% to filter list by [array:string]
comment: //add any conditions here, eg: $conditions[] = "published='yes'";
comment: //% list ordinal of first item [int]	
comment: //% total number of items [int]
comment: //% number of pages [int]
comment: //----------------------------------------------------------------------------------------------
comment: //	make the table
comment: //----------------------------------------------------------------------------------------------
comment: //% 2d [array]
comment: //% add column names here [array:string]
comment: //% add columns here [array:string]
comment: //% relative to serverPath [string]
string: 'modules/badges/models/badge.mod.php'
string: 'createdOn'
string: ''
string: 'badges'
string: 'badges_badge'
string: 'list'
string: ''
string: 'page'
string: 'pageNo'
string: 'num'
string: 'pageSize'
string: 'by'
string: 'by'
string: 'createdon'
string: 'createdOn'
string: 'editedon'
string: 'editedOn'
string: 'badges_badge'
string: 'badges_badge'
string: '*'
string: "&lt;div class='inlinequote'&gt;(no badges yet added)&lt;/div&gt;&lt;br/&gt;\n"
string: 'Img'
string: 'Name'
string: "::refModule=badges::refModel=Badges_Badge::size=thumb::link=no"
string: '[[:images::default'
string: '::refUID='
string: 'UID'
string: ':]]'
string: 'nameLink'
string: 'badges/listbadge/'
string: "[[:theme::pagination::page=$pageNo::total=$totalPages::link=$link:]]\n"

<b>scanning file: /var/www/an2google/trunk/modules/badges/views/listallnav.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	list all  badges formatted for the nav
comment: //--------------------------------------------------------------------------------------------------
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: arguments and permissions check
comment: //----------------------------------------------------------------------------------------------
comment: //	load badges from the database
comment: //----------------------------------------------------------------------------------------------
comment: //% to filter list by [array:string]
comment: //add any conditions here, eg: $conditions[] = "published='yes'";
comment: //----------------------------------------------------------------------------------------------
comment: //	show all badge images
comment: //----------------------------------------------------------------------------------------------
string: ''
string: 'badges_badge'
string: '*'
string: 'name'
string: "[[:theme::navtitlebox::label=All Badges:]]\n"
string: "::refModule=badges::refModel=Badges_Badge::size=thumb::link=no"
string: '[[:images::default'
string: '::refUID='
string: 'UID'
string: ':]]'
string: '%%serverPath%%badges/show/'
string: 'alias'
string: "&lt;a href='$badgeUrl'&gt;$imgBlock&lt;/a&gt;"
string: "&lt;br/&gt;&lt;br/&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/badges/views/editbadge.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	form to edit a Badge object
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - alias or UID of a Badges_Badge object [string]
comment: //opt: UID - UID of a Badges_Badge object, overrides raUID [string]
comment: //opt: badgeUID - UID of a Badges_Badge object, overrides raUID [string]
comment: //% return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check permissions and args
comment: //----------------------------------------------------------------------------------------------
comment: //% the object we're editing [object:Badges_Badge]
comment: //----------------------------------------------------------------------------------------------
comment: //	load the block
comment: //----------------------------------------------------------------------------------------------
comment: // ^ add any labels, block args, etc here
string: 'modules/badges/models/badge.mod.php'
string: ''
string: ''
string: 'UID'
string: 'UID'
string: 'raUID'
string: 'raUID'
string: 'badgeUID'
string: 'badgeUID'
string: ''
string: ''
string: ''
string: 'badges'
string: 'badges_badge'
string: 'edit'
string: ''
string: 'modules/badges/views/editbadge.block.php'
string: 'descriptionJs64'
string: 'descriptionJs64'
string: 'description'
string: 'descriptionJsVar64'
string: 'descriptionJs64'

<b>scanning file: /var/www/an2google/trunk/modules/badges/views/awarded.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	list all badges awarded to a user
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: userUID - UID of a Users_User object [string]
comment: //% return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: permissions check here
comment: //----------------------------------------------------------------------------------------------
comment: //	query database and make the block
comment: //----------------------------------------------------------------------------------------------
string: ''
string: 'userUID'
string: '(userUID not supplied)'
string: "userUID='"
string: 'userUID'
string: "'"
string: 'Badges_UserIndex'
string: '*'
string: 'createdOn DESC'
string: ''
string: "size=thumb::link=no::refModule=badges::refModel=Badges_Badge::"
string: "[[:theme::navtitlebox::label=Badges:]]\n"
string: "[[:images::default::"
string: "refUID="
string: 'badgeUID'
string: ":]]\n"
string: '%%serverPath%%badges/'
string: 'badgeUID'
string: "&lt;a href='$badgeUrl'&gt;$block&lt;/a&gt;\n"
string: "&lt;br/&gt;&lt;br/&gt;"

<b>scanning file: /var/www/an2google/trunk/modules/badges/views/award.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	form for awarding badges to users from their profile
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: userUID - UID of a Users_User object [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
string: ''
string: 'admin'
string: ''
string: 'userUID'
string: '(userUID not supplied)'
string: 'userUID'
string: '(user not found)'
string: 'modules/badges/views/award.block.php'
string: 'userUID'

<b>scanning file: /var/www/an2google/trunk/modules/badges/views/adminconsole.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	list of controls for this module as displayed on the admin console
comment: //--------------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'admin'
string: ''
string: 'modules/badges/views/adminconsole.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/badges/views/addbadgenav.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	form to add a new Badge object, formatted for nav
comment: //--------------------------------------------------------------------------------------------------
comment: //% return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check permissions and args
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	load the block
comment: //----------------------------------------------------------------------------------------------
string: 'modules/badges/models/badge.mod.php'
string: ''
string: 'badges'
string: 'badges_badge'
string: 'new'
string: ''
string: 'modules/badges/views/addbadgenav.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/badges/models/userindex.mod.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	Associates users with their badges.
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //member variables
comment: //----------------------------------------------------------------------------------------------
comment: //_	currently loaded database record [array]
comment: //_	database table definition [array]
comment: //_	set to true when an object has been loaded [bool]
comment: //_ UID [string]
comment: //_ ref:Users_User [string]
comment: //_ ref:Badges_Badge [string]
comment: //_ datetime [string]
comment: //_ ref:Users_User [string]
comment: //_ datetime [string]
comment: //_ ref:Users_User [string]
comment: //----------------------------------------------------------------------------------------------
comment: //. constructor
comment: //----------------------------------------------------------------------------------------------
comment: //opt: UID - UID of a UserIndex object [string]
comment: // initialise table schema
comment: // try load an object from the database
comment: // check if we did
comment: // make new object
comment: // initialize
comment: //----------------------------------------------------------------------------------------------
comment: //. load an object from the database given its UID
comment: //----------------------------------------------------------------------------------------------
comment: //arg: UID - UID of a UserIndex object [string]
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //. load UserIndex object serialized as an associative array
comment: //----------------------------------------------------------------------------------------------
comment: //arg: ary - associative array of members and values [array]
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //. save the current object to database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string on success, html report of errors on failure [string]
comment: //: $db-&gt;save(...) will raise an object_updated event if successful
comment: //----------------------------------------------------------------------------------------------
comment: //. check that object is correct before allowing it to be stored in database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string if object passes, warning message if not [string]
comment: //----------------------------------------------------------------------------------------------
comment: //. database table definition and content versioning
comment: //----------------------------------------------------------------------------------------------
comment: //returns: information for constructing SQL queries [array]
comment: //table columns
comment: //these fields will be indexed
comment: //revision history will be kept for these fields
comment: //----------------------------------------------------------------------------------------------
comment: //. serialize this object to an array
comment: //----------------------------------------------------------------------------------------------
comment: //returns: associative array of all members which define this instance [array]
comment: //----------------------------------------------------------------------------------------------
comment: //. serialize this object to xml
comment: //----------------------------------------------------------------------------------------------
comment: //arg: xmlDec - include xml declaration? [bool]
comment: //arg: indent - string with which to indent lines [bool]
comment: //returns: xml serialization of this object [string]
comment: //NOTE: any members which are not XML clean should be marked up before sending
comment: //----------------------------------------------------------------------------------------------
comment: //. make an extended array of data views may need
comment: //----------------------------------------------------------------------------------------------
comment: //returns: associative array of members, metadata and partial views [array]
comment: //% extended array of properties [array:string]
comment: //------------------------------------------------------------------------------------------
comment: //	links
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	javascript
comment: //------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //. delete current object from the database
comment: //----------------------------------------------------------------------------------------------
comment: //: $db-&gt;delete(...) will raise an object_deleted event on success [bool]
comment: //returns: true on success, false on failure [bool]
comment: // nothing to do
string: ''
string: ''
string: 'UID'
string: 'userUID'
string: 'badgeUID'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: ''
string: "Database error.&lt;br/&gt;\n"
string: ''
string: ''
string: ''
string: "No UID.&lt;br/&gt;\n"
string: 'module'
string: 'badges'
string: 'model'
string: 'Badges_UserIndex'
string: 'archive'
string: 'yes'
string: 'fields'
string: 'UID'
string: 'VARCHAR(33)'
string: 'userUID'
string: 'VARCHAR(33)'
string: 'badgeUID'
string: 'VARCHAR(33)'
string: 'createdOn'
string: 'DATETIME'
string: 'createdBy'
string: 'VARCHAR(33)'
string: 'editedOn'
string: 'DATETIME'
string: 'editedBy'
string: 'VARCHAR(33)'
string: 'indices'
string: 'UID'
string: '10'
string: 'userUID'
string: '10'
string: 'badgeUID'
string: '10'
string: 'createdOn'
string: ''
string: 'createdBy'
string: '10'
string: 'editedOn'
string: ''
string: 'editedBy'
string: '10'
string: 'diff'
string: 'userUID'
string: 'badgeUID'
string: 'UID'
string: 'userUID'
string: 'badgeUID'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: ''
string: "&lt;kobject type='Badges_UserIndex'&gt;\n"
string: "    &lt;UID&gt;"
string: "&lt;/UID&gt;\n"
string: "    &lt;userUID&gt;"
string: "&lt;/userUID&gt;\n"
string: "    &lt;badgeUID&gt;"
string: "&lt;/badgeUID&gt;\n"
string: "    &lt;createdOn&gt;"
string: "&lt;/createdOn&gt;\n"
string: "    &lt;createdBy&gt;"
string: "&lt;/createdBy&gt;\n"
string: "    &lt;editedOn&gt;"
string: "&lt;/editedOn&gt;\n"
string: "    &lt;editedBy&gt;"
string: "&lt;/editedBy&gt;\n"
string: "&lt;/kobject&gt;\n"
string: "&lt;?xml version='1.0' encoding='UTF-8' ?&gt;\n"
string: 'viewUrl'
string: ''
string: 'viewLink'
string: ''
string: 'editUrl'
string: ''
string: 'editLink'
string: ''
string: 'delUrl'
string: ''
string: 'delLink'
string: ''
string: 'newUrl'
string: ''
string: 'newLink'
string: ''
string: 'badges'
string: 'Badges_UserIndex'
string: 'show'
string: 'viewUrl'
string: '%%serverPath%%Badges/showuserindex/'
string: 'UID'
string: 'viewLink'
string: "&lt;a href='"
string: 'viewUrl'
string: "'&gt;[ more &amp;gt;gt; ]&lt;/a&gt;"
string: 'badges'
string: 'Badges_UserIndex'
string: 'edit'
string: 'edit'
string: 'editUrl'
string: '%%serverPath%%Badges/edituserindex/'
string: 'UID'
string: 'editLink'
string: "&lt;a href='"
string: 'editUrl'
string: "'&gt;[ edit ]&lt;/a&gt;"
string: 'badges'
string: 'Badges_UserIndex'
string: 'edit'
string: 'delete'
string: 'delUrl'
string: '%%serverPath%%Badges/deluserindex/'
string: 'UID'
string: 'delLink'
string: "&lt;a href='"
string: 'delUrl'
string: "'&gt;[ delete ]&lt;/a&gt;"
string: 'UIDJsClean'
string: 'UID'

<b>scanning file: /var/www/an2google/trunk/modules/badges/models/badge.mod.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	A placeholder object for the badge itself.
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //member variables
comment: //----------------------------------------------------------------------------------------------
comment: //_	currently loaded database record [array]
comment: //_	database table definition [array]
comment: //_	set to true when an object has been loaded [bool]
comment: //_ UID [string]
comment: //_ title [string]
comment: //_ wyswyg [string]
comment: //_ datetime [string]
comment: //_ ref:Users_User [string]
comment: //_ datetime [string]
comment: //_ ref:Users_User [string]
comment: //_ alias [string]
comment: //----------------------------------------------------------------------------------------------
comment: //. constructor
comment: //----------------------------------------------------------------------------------------------
comment: //opt: raUID - UID or alias of a Badge object [string]
comment: // initialise table schema
comment: // try load an object from the database
comment: // check if we did
comment: // make new object
comment: // initialize
comment: // set default name
comment: //----------------------------------------------------------------------------------------------
comment: //. load an object from the database given its UID or an alias
comment: //----------------------------------------------------------------------------------------------
comment: //arg: raUID - UID or alias of a Badge object [string]
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //. load Badge object serialized as an associative array
comment: //----------------------------------------------------------------------------------------------
comment: //arg: ary - associative array of members and values [array]
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //. save the current object to database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string on success, html report of errors on failure [string]
comment: //: $db-&gt;save(...) will raise an object_updated event if successful
comment: //----------------------------------------------------------------------------------------------
comment: //. check that object is correct before allowing it to be stored in database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string if object passes, warning message if not [string]
comment: //----------------------------------------------------------------------------------------------
comment: //. database table definition and content versioning
comment: //----------------------------------------------------------------------------------------------
comment: //returns: information for constructing SQL queries [array]
comment: //table columns
comment: //these fields will be indexed
comment: //revision history will be kept for these fields
comment: //----------------------------------------------------------------------------------------------
comment: //. serialize this object to an array
comment: //----------------------------------------------------------------------------------------------
comment: //returns: associative array of all members which define this instance [array]
comment: //----------------------------------------------------------------------------------------------
comment: //. serialize this object to xml
comment: //----------------------------------------------------------------------------------------------
comment: //arg: xmlDec - include xml declaration? [bool]
comment: //arg: indent - string with which to indent lines [bool]
comment: //returns: xml serialization of this object [string]
comment: //NOTE: any members which are not XML clean should be marked up before sending
comment: //----------------------------------------------------------------------------------------------
comment: //. make an extended array of data views may need
comment: //----------------------------------------------------------------------------------------------
comment: //returns: associative array of members, metadata and partial views [array]
comment: //% extended array of properties [array:string]
comment: //------------------------------------------------------------------------------------------
comment: //	links
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	javascript
comment: //------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //. delete current object from the database
comment: //----------------------------------------------------------------------------------------------
comment: //: $db-&gt;delete(...) will raise an object_deleted event on success [bool]
comment: //returns: true on success, false on failure [bool]
comment: // nothing to do
comment: //==============================================================================================
comment: //	UserIndex methods
comment: //==============================================================================================
comment: //----------------------------------------------------------------------------------------------
comment: //. award this badge to a user
comment: //----------------------------------------------------------------------------------------------
comment: //arg: userUID - UID of a Users_User object [string]
comment: //returns: empty string on success, error message on failure [string]
comment: //----------------------------------------------------------------------------------------------
comment: //. discover if a user has been awarded this badge
comment: //----------------------------------------------------------------------------------------------
comment: //arg: userUID - UID of a Users_User object [string]
comment: //returns: true on success, false on failure [bool]	
string: 'modules/badges/models/userindex.mod.php'
string: ''
string: ''
string: 'New Badge '
string: 'UID'
string: 'name'
string: 'description'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: 'alias'
string: ''
string: 'badges'
string: 'badges_badge'
string: "Database error.&lt;br/&gt;\n"
string: ''
string: ''
string: ''
string: "No UID.&lt;br/&gt;\n"
string: 'module'
string: 'badges'
string: 'model'
string: 'badges_badge'
string: 'archive'
string: 'yes'
string: 'fields'
string: 'UID'
string: 'VARCHAR(33)'
string: 'name'
string: 'VARCHAR(255)'
string: 'description'
string: 'MEDIUMTEXT'
string: 'createdOn'
string: 'DATETIME'
string: 'createdBy'
string: 'VARCHAR(33)'
string: 'editedOn'
string: 'DATETIME'
string: 'editedBy'
string: 'VARCHAR(33)'
string: 'alias'
string: 'TEXT'
string: 'indices'
string: 'UID'
string: '10'
string: 'name'
string: '10'
string: 'createdOn'
string: ''
string: 'createdBy'
string: '10'
string: 'editedOn'
string: ''
string: 'editedBy'
string: '10'
string: 'alias'
string: '10'
string: 'nodiff'
string: 'UID'
string: 'name'
string: 'description'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: 'alias'
string: ''
string: "&lt;kobject type='badges_badge'&gt;\n"
string: "    &lt;UID&gt;"
string: "&lt;/UID&gt;\n"
string: "    &lt;name&gt;"
string: "&lt;/name&gt;\n"
string: "    &lt;description&gt;&lt;![CDATA["
string: "]]&gt;&lt;/description&gt;\n"
string: "    &lt;createdOn&gt;"
string: "&lt;/createdOn&gt;\n"
string: "    &lt;createdBy&gt;"
string: "&lt;/createdBy&gt;\n"
string: "    &lt;editedOn&gt;"
string: "&lt;/editedOn&gt;\n"
string: "    &lt;editedBy&gt;"
string: "&lt;/editedBy&gt;\n"
string: "    &lt;alias&gt;"
string: "&lt;/alias&gt;\n"
string: "&lt;/kobject&gt;\n"
string: "&lt;?xml version='1.0' encoding='UTF-8' ?&gt;\n"
string: 'viewUrl'
string: ''
string: 'viewLink'
string: ''
string: 'editUrl'
string: ''
string: 'editLink'
string: ''
string: 'delUrl'
string: ''
string: 'delLink'
string: ''
string: 'newUrl'
string: ''
string: 'newLink'
string: ''
string: 'badges'
string: 'badges_badge'
string: 'show'
string: 'viewUrl'
string: '%%serverPath%%Badges/show/'
string: 'alias'
string: 'viewLink'
string: "&lt;a href='"
string: 'viewUrl'
string: "'&gt;[ more &amp;gt;gt; ]&lt;/a&gt;"
string: 'nameLink'
string: "&lt;a href='"
string: 'viewUrl'
string: "'&gt;"
string: 'name'
string: "&lt;/a&gt;"
string: 'badges'
string: 'badges_badge'
string: 'edit'
string: 'edit'
string: 'editUrl'
string: '%%serverPath%%Badges/edit/'
string: 'alias'
string: 'editLink'
string: "&lt;a href='"
string: 'editUrl'
string: "'&gt;[ edit ]&lt;/a&gt;"
string: 'badges'
string: 'badges_badge'
string: 'edit'
string: 'delete'
string: 'delUrl'
string: '%%serverPath%%Badges/confirmdelete/'
string: 'alias'
string: 'delLink'
string: "&lt;a href='"
string: 'delUrl'
string: "'&gt;[ delete ]&lt;/a&gt;"
string: 'UIDJsClean'
string: 'UID'
string: 'descriptionJsVar64'
string: 'description'
string: 'UID'
string: 'Js64'
string: 'descriptionJs64'
string: 'descriptionJsVar64'
string: 'description'
string: 'descriptionSummary'
string: 'description'
string: 'users_user'
string: 'Unkown user.'
string: 'Badge already awarded.'
string: "userUID='"
string: "'"
string: "badgeUID='"
string: "'"
string: 'badges_userindex'
string: '*'

<b>scanning file: /var/www/an2google/trunk/modules/badges/inc/maintenance.inc.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	maintenance script for Badges module
comment: //--------------------------------------------------------------------------------------------------
comment: //+	reports are human-readable HTML, with script-readable HTML comments
comment: //--------------------------------------------------------------------------------------------------
comment: //|	install the Badges module
comment: //--------------------------------------------------------------------------------------------------
comment: //returns: html report or false if not authorized [string][bool]
comment: //----------------------------------------------------------------------------------------------
comment: //	check all Badge objects
comment: //----------------------------------------------------------------------------------------------
comment: // remove database markup
comment: // load into model
comment: //------------------------------------------------------------------------------------------
comment: //	checking alias
comment: //------------------------------------------------------------------------------------------
comment: // should reset alias
comment: //------------------------------------------------------------------------------------------
comment: //	check references to other objects
comment: //------------------------------------------------------------------------------------------
comment: // TODO: take action here, if possibe assign valid reference to a Users_User
comment: // TODO: take action here, if possibe assign valid reference to a Users_User
comment: // end while Badges_Badge
comment: //----------------------------------------------------------------------------------------------
comment: //	add Badge objects to report
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check all UserIndex objects
comment: //----------------------------------------------------------------------------------------------
comment: // remove database markup
comment: // load into model
comment: //------------------------------------------------------------------------------------------
comment: //	check references to other objects
comment: //------------------------------------------------------------------------------------------
comment: // TODO: take action here, if possibe assign valid reference to a Users_User
comment: // TODO: take action here, if possibe assign valid reference to a Badges_Badge
comment: // TODO: take action here, if possibe assign valid reference to a Users_User
comment: // TODO: take action here, if possibe assign valid reference to a Users_User
comment: // end while Badges_UserIndex
comment: //----------------------------------------------------------------------------------------------
comment: //	add UserIndex objects to report
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	done
comment: //----------------------------------------------------------------------------------------------
string: 'modules/badges/models/badge.mod.php'
string: 'modules/badges/models/userindex.mod.php'
string: 'admin'
string: ''
string: 'UID'
string: 'name'
string: 'error'
string: "select * from Badges_Badge"
string: 'badges_badge'
string: 'UID'
string: 'non defualt alias'
string: 'users_user'
string: 'invalid reference (createdBy:Users_User)'
string: 'users_user'
string: 'invalid reference (editedBy:Users_User)'
string: 'UID'
string: 'UID'
string: 'error'
string: "select * from Badges_UserIndex"
string: 'users_user'
string: 'invalid reference (userUID:Users_User)'
string: 'badges_badge'
string: 'invalid reference (badgeUID:Badges_Badge)'
string: 'users_user'
string: 'invalid reference (createdBy:Users_User)'
string: 'users_user'
string: 'invalid reference (editedBy:Users_User)'

<b>scanning file: /var/www/an2google/trunk/modules/badges/inc/install.inc.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	install script for Badges module
comment: //--------------------------------------------------------------------------------------------------
comment: //+	reports are human-readable HTML, with script-readable HTML comments
comment: //--------------------------------------------------------------------------------------------------
comment: //|	install the Badges module
comment: //--------------------------------------------------------------------------------------------------
comment: //returns: html report or false if not authorized [string][bool]
comment: //----------------------------------------------------------------------------------------------
comment: //	create or upgrade Badges_Badge table
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	create or upgrade Badges_UserIndex table
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	done
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
comment: //|	discover if this module is installed
comment: //--------------------------------------------------------------------------------------------------
comment: //:	if installed correctly report will contain HTML comment &lt;!-- installed correctly --&gt;
comment: //returns: HTML installation status report [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	ensure the table which stores Badge objects exists and is correct
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	ensure the table which stores UserIndex objects exists and is correct
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	done
comment: //----------------------------------------------------------------------------------------------
string: 'core/dbdriver/mysqladmin.dbd.php'
string: 'modules/badges/models/badge.mod.php'
string: 'modules/badges/models/userindex.mod.php'
string: 'admin'
string: ''
string: 'admin'
string: ''
string: '&lt;!-- table installed correctly --&gt;'
string: '&lt;!-- module installed correctly --&gt;'

<b>scanning file: /var/www/an2google/trunk/modules/badges/actions/show.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	show a Badge 
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	authentication (no public users)
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------	
comment: //	check reference
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------	
comment: //	load the model
comment: //----------------------------------------------------------------------------------------------	
comment: //if (true == $model-&gt;hasEditAuth($user-&gt;UID)) 
comment: //	{ $editUrl = '%%serverPath%%badges/edit/' . $model-&gt;alias; }
comment: //----------------------------------------------------------------------------------------------	
comment: //	render the page
comment: //----------------------------------------------------------------------------------------------	
string: 'modules/badges/models/badge.mod.php'
string: 'public'
string: 'banned'
string: ''
string: 'badges_badge'
string: ''
string: 'modules/badges/actions/show.page.php'
string: 'raUID'
string: 'UID'
string: 'badgeName'
string: 'editBadgeUrl'

<b>scanning file: /var/www/an2google/trunk/modules/badges/actions/save.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	save changes to an Badge object
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check permissions and POST variables
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	load and update the object
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: sanitize description
comment: //----------------------------------------------------------------------------------------------
comment: //	check that object was saved and redirect
comment: //----------------------------------------------------------------------------------------------
string: 'modules/badges/models/badge.mod.php'
string: 'action'
string: 'action not specified'
string: 'saveBadge'
string: 'action'
string: 'action not supported'
string: 'UID'
string: 'UID not POSTed'
string: 'UID'
string: 'badges'
string: 'badges_badge'
string: 'edit'
string: 'You are not authorized to edit this Badge.'
string: "could not load Badge $UID"
string: 'name'
string: 'description'
string: ''
string: 'Saved changes to Badge'
string: 'ok'
string: 'Could not save Badge:&lt;br/&gt;'
string: 'bad'
string: 'return'
string: 'return'
string: 'badges/show/'

<b>scanning file: /var/www/an2google/trunk/modules/badges/actions/revoke.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	strip a user of a badge
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check reference and user permissions
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: use a permission for this
comment: //----------------------------------------------------------------------------------------------
comment: //	delete the award and redirect back to badge page
comment: //----------------------------------------------------------------------------------------------
string: 'modules/badges/models/userindex.mod.php'
string: 'admin'
string: ''
string: 'Badge award not specified.'
string: 'Award not found.'
string: '[[:users::namelink::userUID='
string: ':]]'
string: 'Removed award of this badge from '
string: 'badges/show/'

<b>scanning file: /var/www/an2google/trunk/modules/badges/actions/new.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	create a new Badge object
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //*	check permissions and any POST variables
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //*	create the object
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //*	check that object was created and redirect
comment: //----------------------------------------------------------------------------------------------
string: 'modules/badges/models/badge.mod.php'
string: 'badges'
string: 'badges_badge'
string: 'new'
string: 'You are not authorized to create new Badges.'
string: 'name'
string: 'description'
string: 'alias'
string: ''
string: 'Created New Badge&lt;br/&gt;'
string: '/badges/edit/'
string: 'Could not create new Badge:&lt;br/&gt;'
string: 'badges/'

<b>scanning file: /var/www/an2google/trunk/modules/badges/actions/list.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	list all Badge objects
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check permissions and any POST variables
comment: //----------------------------------------------------------------------------------------------
comment: //%	first page if not specified [int]
comment: //%	default number of items per page [int]
comment: //%	default list order [string]
comment: // users may list by these fields
comment: //----------------------------------------------------------------------------------------------
comment: //	render the page
comment: //----------------------------------------------------------------------------------------------
string: 'modules/badges/models/badge.mod.php'
string: 'badges'
string: 'badges_badge'
string: 'show'
string: 'You are not authorized to see the list of badges.'
string: 'createdOn'
string: 'page'
string: 'page'
string: 'num'
string: 'num'
string: 'by'
string: 'by'
string: 'createdon'
string: 'createdOn'
string: 'editedon'
string: 'editedOn'
string: 'modules/badges/actions/list.page.php'
string: 'pageNo'
string: 'pageSize'
string: 'orderBy'

<b>scanning file: /var/www/an2google/trunk/modules/badges/actions/edit.act.php</b>
comment: //require_once($kapenta-&gt;installPath . 'modules/badges/models/badge.mod.php');
comment: // ^ sometimes needed for breadcrumbs, etc
comment: //--------------------------------------------------------------------------------------------------
comment: //*	show form to edit a Badge object
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	render the page
comment: //----------------------------------------------------------------------------------------------
string: 'badges_badge'
string: 'badges'
string: 'badges_badge'
string: 'edit'
string: 'You are not authorized to edit this Badges.'
string: 'modules/badges/actions/edit.page.php'
string: 'UID'
string: 'badgeUID'
string: 'raUID'

<b>scanning file: /var/www/an2google/trunk/modules/badges/actions/default.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	default action for badges module (ie, no action specified in URL)
comment: //--------------------------------------------------------------------------------------------------
comment: // no recordAlias/UID given in URL, list all groups in current users school
comment: // recordAlias/UID given in URL, show single group
string: ''
string: 'modules/badges/actions/list.act.php'
string: 'modules/badges/actions/show.act.php'

<b>scanning file: /var/www/an2google/trunk/modules/badges/actions/award.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	associate a user with a badge
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check permissions and POST vars
comment: //----------------------------------------------------------------------------------------------
comment: // only admins can do this at present
comment: //----------------------------------------------------------------------------------------------
comment: //	make the award and redirect back to user profile
comment: //----------------------------------------------------------------------------------------------
string: 'modules/badges/models/badge.mod.php'
string: 'admin'
string: 'action'
string: 'Action not specified'
string: 'awardBadge'
string: 'action'
string: 'Action not supported.'
string: 'badgeUID'
string: 'badgeUID not supplied.'
string: 'userUID'
string: 'userUID not supplied.'
string: 'badgeUID'
string: 'Badge not found.'
string: 'userUID'
string: ''
string: 'Awarded badge.'
string: 'ok'
string: 'users/profile/'
string: 'userUID'
string: 'bad'
string: 'users/profile/'
string: 'userUID'

<b>scanning file: /var/www/an2google/trunk/modules/announcements/views/summarynav.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	small summary, formatted for nav (300px or so wide)
comment: //--------------------------------------------------------------------------------------------------
comment: //args: raUID - alias or UID of an Announcements_Announcement object [string]
comment: //opt: UID - overrides raUID [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/announcements/models/announcement.mod.php'
string: ''
string: 'UID'
string: 'raUID'
string: 'UID'
string: 'raUID'
string: ''
string: 'raUID'
string: 'announcements'
string: 'announcements_announcement'
string: 'show'
string: ''
string: 'rawblock64'
string: 'rawblock'
string: 'modules/announcements/views/summarynav.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/announcements/views/summarylist.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	summary list
comment: //--------------------------------------------------------------------------------------------------
comment: //opt: page - page no to display (default is 0) [string]
comment: //opt: num - number of records per page (default is 30) [string]
comment: //%	number of items per page [int]
comment: //%	starts from 1 [int]
comment: //%	position in SQL results [int]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	query database
comment: //----------------------------------------------------------------------------------------------
comment: //$model = new Announcements_Announcement();			// removed, but consider
comment: //$model-&gt;loadArray($row);								// doing it this way for efficiency
comment: //$labels = $model-&gt;extArray();
comment: //$labels['rawblock64'] = base64_encode($rawBlock);
comment: //$html .= $theme-&gt;replaceLabels($labels, $block);
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/announcements/models/announcement.mod.php'
string: ''
string: 'announcements'
string: 'announcements_announcement'
string: 'show'
string: ''
string: 'num'
string: 'num'
string: 'page'
string: 'page'
string: 'announcements_announcement'
string: '*'
string: ''
string: 'createdOn'
string: 'modules/announcements/views/summary.block.php'
string: '[[:announcements::summary::UID='
string: 'UID'
string: ':]]'
string: 'rawblock'
string: "&lt;div id='blockAnnouncementsSL"
string: "'&gt;\n"
string: "&lt;/div&gt;"
string: "&lt;! REGISTERBLOCK:blockAnnouncementsSL"
string: ":"
string: " --&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/announcements/views/summary.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	summary
comment: //--------------------------------------------------------------------------------------------------
comment: //args: raUID - alias or UID of an Announcements_Announcement object [string]
comment: //opt: UID - overrides raUID [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	set AJAX triggers
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/announcements/models/announcement.mod.php'
string: ''
string: 'UID'
string: 'raUID'
string: 'UID'
string: 'raUID'
string: ''
string: 'raUID'
string: ''
string: 'announcements'
string: 'announcements_announcement'
string: 'show'
string: ''
string: 'rawblock64'
string: 'rawblock'
string: 'modules/announcements/views/summary.block.php'
string: 'announcement-'
string: 'announcements'
string: 'rawblock'

<b>scanning file: /var/www/an2google/trunk/modules/announcements/views/show.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	show
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - recordAlias or UID of post to edit [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	set AJAX triggers
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/announcements/models/announcement.mod.php'
string: ''
string: 'raUID'
string: ''
string: 'raUID'
string: ''
string: 'announcements'
string: 'announcements_announcement'
string: 'show'
string: ''
string: 'rawblock64'
string: 'rawblock'
string: 'modules/announcements/views/show.block.php'
string: 'announcement-'
string: 'announcements'
string: 'rawblock'

<b>scanning file: /var/www/an2google/trunk/modules/announcements/views/newlink.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	create a link to add a new announcement to something
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: refModule - the module that will own the new announcement [string]
comment: //arg: refModel - the module that will own the new announcement [string]
comment: //arg: refUID - the record that will own the new announcment [string]
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/announcements/models/announcement.mod.php'
string: 'refModule'
string: '(no refModule)'
string: 'refModel'
string: '(no refModel)'
string: 'refUID'
string: '(no refUID)'
string: 'refModule'
string: 'refModel'
string: 'refUID'
string: 'add-announcement'
string: ''
string: "&lt;a href='/announcements/new/"
string: "refModule_"
string: "/"
string: "refModel_"
string: "/"
string: "refUID_"
string: "/'&gt;[add a new announcement]&lt;/a&gt;"

<b>scanning file: /var/www/an2google/trunk/modules/announcements/views/menunewpost.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	creates a submenu item for adding new announcements, deprecated.  TODO: get rid of this
comment: //--------------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/announcements/models/announcement.mod.php'
string: 'announcements'
string: 'announcements_announcement'
string: 'edit'
string: 'TODO:UIDHERE'
string: '[[:theme::submenu::label=New Post::link=/announcements/new/:]]'

<b>scanning file: /var/www/an2google/trunk/modules/announcements/views/menu.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	announcements module menu
comment: //--------------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/announcements/models/announcement.mod.php'
string: 'modules/announcements/menu.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/announcements/views/listnav.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	list all most recent x announcments owned by a particular record on a given module in the nav
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: refUID - record which owns the announcements [string]
comment: //arg: refModule - module which owns the record [string]
comment: //opt: num - number of records per page (default is 10) [string]
comment: //%	number of items per page [int]
comment: //%	return value [html]
comment: //----------------------------------------------------------------------------------------------
comment: //	check aruments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	query database
comment: //----------------------------------------------------------------------------------------------
comment: //$sql = "select * from Announcements_Announcement "
comment: //	 . "where refModule='" . $db-&gt;addMarkup($args['refModule']) . "' "
comment: //	 . "and refUID='" . $db-&gt;addMarkup($args['refUID']) . "' "
comment: //	 . "order by createdOn DESC limit " . $db-&gt;addMarkup($num) . "";
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	set AJAX triggers
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/announcements/models/announcement.mod.php'
string: ''
string: 'announcements'
string: 'announcements_announcement'
string: 'show'
string: ''
string: 'refModule'
string: ''
string: 'refUID'
string: ''
string: 'num'
string: 'num'
string: "refUID='"
string: 'refUID'
string: "'"
string: "refModule='"
string: 'refModule'
string: "'"
string: 'announcements_announcement'
string: '*'
string: 'createdOn DESC'
string: 'modules/announcements/views/summarynav.block.php'
string: "(no announcements at present)"
string: 'announcements'
string: 'announcement-any'
string: 'rawblock'
string: 'rawblock'
string: "&lt;div id='blockAnnouncementsLN'&gt;\n"
string: "&lt;!-- REGISTERBLOCK:blockAnnouncementsLN:"
string: " --&gt;"
string: "&lt;/div&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/announcements/views/list.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	list all most recent x announcments owned by a particular record on a given module
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: refModule - module which owns the record [string]
comment: //arg: refModel - record which owns the announcements [string]
comment: //arg: refUID - record which owns the announcements [string]
comment: //opt: num - number of records per page (default is 10) [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	load recent announcements from the database
comment: //----------------------------------------------------------------------------------------------
comment: //	$sql = "select * from Announcements_Annoucement "
comment: //		 . "where refModule='" . $db-&gt;addMarkup($args['refModule']) . "' "
comment: //		 . "and refUID='" . $db-&gt;addMarkup($args['refUID']) . "' "
comment: //		 . "order by createdOn DESC limit " . $db-&gt;addMarkup($num) . "";
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
comment: //NOTE: the following was removd for brevity, consider re-adding for efficiency sake
comment: //$model = new Announcements_Announcement();
comment: //$model-&gt;loadArray($row);
comment: //$html .= $theme-&gt;replaceLabels($model-&gt;extArray(), $theme-&gt;loadBlock($blockFile));
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/announcements/models/announcement.mod.php'
string: ''
string: 'public'
string: '[[:users::pleaselogin:]]'
string: 'refModule'
string: '(no refModule)'
string: 'refModel'
string: '(no refModel)'
string: 'refUID'
string: '(no refUID)'
string: 'refModule'
string: 'refModel'
string: 'refUID'
string: '(no such module)'
string: '(no owner)'
string: 'announcements-show'
string: ''
string: 'num'
string: 'num'
string: "refModule='"
string: 'refModule'
string: "'"
string: "refUID='"
string: 'refUID'
string: "'"
string: 'announcements_announcement'
string: '*'
string: 'createdOn DESC'
string: 'modules/announcements/views/summary.block.php'
string: "(no announcements at present)"
string: "[[:announcements::summary::UID="
string: 'UID'
string: ":]]\n"

<b>scanning file: /var/www/an2google/trunk/modules/announcements/views/image.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	find the first picture on the announcement (if there is one) or return info icon
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - alias or UID of an Announcements_Announcement object [string]
comment: //arg: size - 100, 200, 300, 570, thumb or thumb90 [string]
comment: //opt: announcementUID - overrides raUID [string]
comment: //opt: link - link to larger image (yes|no) [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: setup default 'fail' image
string: 'modules/announcements/models/announcement.mod.php'
string: 'width300'
string: 'yes'
string: ''
string: 'announcementUID'
string: 'raUID'
string: 'announcementUID'
string: 'raUID'
string: 'link'
string: 'no'
string: 'no'
string: 'size'
string: 'size'
string: 'thumb'
string: 'thumb'
string: 'size'
string: 'thumbsm'
string: 'thumbsm'
string: 'size'
string: 'thumb90'
string: 'thumb90'
string: 'size'
string: 'width100'
string: 'width100'
string: 'size'
string: 'width200'
string: 'width200'
string: 'size'
string: 'width300'
string: 'width300'
string: 'size'
string: 'width570'
string: 'width570'
string: 'raUID'
string: ''
string: "[[:images::default::link=no::size="
string: "::refModule=announcements::refModel=Announcements_Annoucement"
string: "::refUID="
string: "::altUser="
string: ":]]"
string: 'yes'
string: "&lt;a href='/images/show/"
string: 'alias'
string: "'&gt;$html&lt;/a&gt;"

<b>scanning file: /var/www/an2google/trunk/modules/announcements/views/editform.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	create form for editing an announcement record
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: raUID - recordAlias or UID of post to edit [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: further auth permutations
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'modules/announcements/models/announcement.mod.php'
string: 'raUID'
string: ''
string: 'raUID'
string: ''
string: 'announcements-edit'
string: ''
string: 'contentJs64'
string: 'contentJs64'
string: 'content'
string: 'modules/announcements/views/editform.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/announcements/models/announcement.mod.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	object for managing records of announcements
comment: //--------------------------------------------------------------------------------------------------
comment: //+	announcements are owned by a record on another module (schools/groups) and notifications
comment: //+	are sent when they are produced.  
comment: //----------------------------------------------------------------------------------------------
comment: //	member variables (as retieved from database)
comment: //----------------------------------------------------------------------------------------------
comment: //_	currently loaded database record [array]
comment: //_	database table definition [array]
comment: //_	set to true when an object has been loaded [bool]
comment: //_ UID [string]
comment: //_ module [string]
comment: //_ model [string]
comment: //_ ref:*-* [string]
comment: //_ title [string]
comment: //_ wyswyg [string]
comment: //_ datetime [string]
comment: //_ ref:Users_User [string]
comment: //_ datetime [string]
comment: //_ ref:Users_User [string]
comment: //_ alias [string]
comment: //----------------------------------------------------------------------------------------------
comment: //. constructor
comment: //----------------------------------------------------------------------------------------------
comment: //opt: raUID - UID or alias of an Announcement object [string]
comment: // initialise table schema
comment: // try load an object from the database
comment: // check if we did
comment: // make new object
comment: // initialize
comment: //----------------------------------------------------------------------------------------------
comment: //.	load a record by UID or recordAlias
comment: //----------------------------------------------------------------------------------------------
comment: //arg: raUID - UID or recordAlias of an announcement record [string]
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //. load an object from the database given its UID or an alias
comment: //----------------------------------------------------------------------------------------------
comment: //arg: raUID - UID or alias of a Announcement object [string]
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //. load Announcement object serialized as an associative array
comment: //----------------------------------------------------------------------------------------------
comment: //arg: ary - associative array of members and values [array]
comment: //----------------------------------------------------------------------------------------------
comment: //. save the current object to database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string on success, html report of errors on failure [string]
comment: //: $db-&gt;save(...) will raise an object_updated event if successful
comment: //----------------------------------------------------------------------------------------------
comment: //.	verify - check that a record is correct before allowing it to be stored in the database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string if object passes, warning message if not [string]
comment: //----------------------------------------------------------------------------------------------
comment: //. database table definition and content versioning
comment: //----------------------------------------------------------------------------------------------
comment: //returns: information for constructing SQL queries [array]
comment: //table columns
comment: //these fields will be indexed
comment: //revision history will be kept for these fields
comment: //----------------------------------------------------------------------------------------------
comment: //. serialize this object to an array
comment: //----------------------------------------------------------------------------------------------
comment: //returns: associative array of all members which define this instance [array]
comment: //----------------------------------------------------------------------------------------------
comment: //.	make an extended array of all data a view will need
comment: //----------------------------------------------------------------------------------------------
comment: //returns: extended array of member variables and metadata [array]
comment: //------------------------------------------------------------------------------------------
comment: //	links
comment: //------------------------------------------------------------------------------------------
comment: //$hasEditAuth = $this-&gt;hasEditAuth($user-&gt;UID);
comment: //------------------------------------------------------------------------------------------
comment: //	namespace collision
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	time
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	summary 
comment: //------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //. delete current object from the database
comment: //----------------------------------------------------------------------------------------------
comment: //: $db-&gt;delete(...) will raise an object_deleted event on success [bool]
comment: //returns: true on success, false on failure [bool]
comment: // nothing to do
comment: //----------------------------------------------------------------------------------------------
comment: //.	check if a user is authorised to edit this document  TODO: upgrade this, permission
comment: //----------------------------------------------------------------------------------------------
comment: //arg: userUID - UID of a user [string]
comment: //returns: true if current user is authorized to edit this record, else false [bool]
string: ''
string: ''
string: "New Announcement "
string: ''
string: 'UID'
string: 'refModule'
string: 'refModel'
string: 'refUID'
string: 'title'
string: 'content'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: 'alias'
string: ''
string: 'announcements'
string: 'announcements_announcement'
string: "Database error.&lt;br/&gt;\n"
string: ''
string: ''
string: "UID not present.\n"
string: 'module'
string: 'announcements'
string: 'model'
string: 'announcements_announcement'
string: 'archive'
string: 'yes'
string: 'fields'
string: 'UID'
string: 'VARCHAR(33)'
string: 'refModule'
string: 'VARCHAR(50)'
string: 'refModel'
string: 'VARCHAR(50)'
string: 'refUID'
string: 'VARCHAR(33)'
string: 'title'
string: 'VARCHAR(255)'
string: 'content'
string: 'TEXT'
string: 'createdOn'
string: 'DATETIME'
string: 'createdBy'
string: 'VARCHAR(33)'
string: 'editedOn'
string: 'DATETIME'
string: 'editedBy'
string: 'VARCHAR(33)'
string: 'alias'
string: 'VARCHAR(255)'
string: 'indices'
string: 'UID'
string: '10'
string: 'refModule'
string: '10'
string: 'refModel'
string: '10'
string: 'refUID'
string: '10'
string: 'createdOn'
string: ''
string: 'createdBy'
string: '10'
string: 'editedOn'
string: ''
string: 'editedBy'
string: '10'
string: 'alias'
string: '10'
string: 'nodiff'
string: 'UID'
string: 'refModule'
string: 'refModel'
string: 'refUID'
string: 'title'
string: 'content'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: 'alias'
string: 'editUrl'
string: ''
string: 'editLink'
string: ''
string: 'viewUrl'
string: ''
string: 'viewLink'
string: ''
string: 'delUrl'
string: ''
string: 'delLink'
string: ''
string: 'newUrl'
string: ''
string: 'newLink'
string: ''
string: 'announcements'
string: 'announcements_announcement'
string: 'show'
string: 'viewUrl'
string: '%%serverPath%%announcements/'
string: 'viewLink'
string: "&lt;a href='"
string: 'viewUrl'
string: "'&gt;[read on &amp;gt;&amp;gt;]&lt;/a&gt;"
string: 'announcements'
string: 'announcements_announcement'
string: 'edit'
string: 'editUrl'
string: '%%serverPath%%announcements/edit/'
string: 'editLink'
string: "&lt;a href='"
string: 'editUrl'
string: "'&gt;[edit]&lt;/a&gt;"
string: 'announcements'
string: 'announcements_announcement'
string: 'delete'
string: 'delUrl'
string: '%%serverPath%%announcements/confirmdelete/UID_'
string: '/'
string: 'delLink'
string: "&lt;a href='"
string: 'delUrl'
string: "'&gt;[delete]&lt;/a&gt;"
string: 'announcements'
string: 'announcements_announcement'
string: 'new'
string: 'newUrl'
string: "%%serverPath%%announcements/new/"
string: 'newLink'
string: "&lt;a href='"
string: 'newUrl'
string: "'&gt;[add new announcement]&lt;/a&gt;"
string: 'createdBy'
string: 'userUrl'
string: '/users/profile/'
string: 'userName'
string: ' '
string: 'userLink'
string: "&lt;a href='"
string: 'userUrl'
string: "'&gt;"
string: 'userName'
string: "&lt;/a&gt;"
string: 'anTitle'
string: 'title'
string: 'time'
string: 'createdOn'
string: 'contentHtml'
string: "&gt;\n"
string: "&gt;"
string: 'content'
string: 'contentHtml'
string: "\n"
string: "&lt;br/&gt;\n"
string: 'contentHtml'
string: 'summary'
string: 'content'
string: 'summarynav'
string: 'content'
string: "[[:"
string: "::haseditauth::refUID="
string: ":]]"
string: ''
string: 'yes'

<b>scanning file: /var/www/an2google/trunk/modules/announcements/inc/relationships.inc.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	relationships between announcements and users
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: refModel - type of object [string]
comment: //arg: UID - UID of a Announcements_Announcement object [string]
comment: //arg: relationship - between this object and a user [string]
comment: //arg: userUID - UID of the user related to this object [string]
comment: //returns: true if the given relationship exists, otherwise false [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //	get the user we want to know about
comment: //----------------------------------------------------------------------------------------------	
comment: //----------------------------------------------------------------------------------------------
comment: //	relationships of Announcements_Announcement object
comment: //----------------------------------------------------------------------------------------------
comment: // try load the object
comment: // check that we did
comment: //TODO: other relationships here
string: 'modules/announcements/models/announcement.mod.php'
string: 'announcements_announcement'
string: 'creator'
string: 'Unknown model: '
string: 'bug'

<b>scanning file: /var/www/an2google/trunk/modules/announcements/inc/install.inc.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	install script for Announcements module
comment: //--------------------------------------------------------------------------------------------------
comment: //+	reports are human-readable HTML, with script-readable HTML comments
comment: //--------------------------------------------------------------------------------------------------
comment: //|	install the Announcements module
comment: //--------------------------------------------------------------------------------------------------
comment: //returns: html report or false if not authorized [string][bool]
comment: //----------------------------------------------------------------------------------------------
comment: //	create or upgrade Announcements_Announcement table
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	copy all records from previous table
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	done
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
comment: //|	discover if this module is installed
comment: //--------------------------------------------------------------------------------------------------
comment: //:	if installed correctly report will contain HTML comment &lt;!-- installed correctly --&gt;
comment: //returns: HTML installation status report [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	ensure the table which stores Announcement objects exists and is correct
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	done
comment: //----------------------------------------------------------------------------------------------
string: 'core/dbdriver/mysqladmin.dbd.php'
string: 'modules/announcements/models/announcement.mod.php'
string: 'admin'
string: ''
string: 'recordAlias'
string: 'alias'
string: 'announcements'
string: "&lt;b&gt;moved $count records from 'announcements' table.&lt;/b&gt;&lt;br/&gt;"
string: 'admin'
string: ''
string: '&lt;!-- table installed correctly --&gt;'
string: '&lt;!-- module installed correctly --&gt;'

<b>scanning file: /var/www/an2google/trunk/modules/announcements/events/object_updated.on.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //|	fired when an object is saved to database
comment: //-------------------------------------------------------------------------------------------------
comment: //arg: module - module which owned the deleted object [string]
comment: //arg: model - type of deleted object [string]
comment: //arg: UID - UID of deleted object [string]
comment: //---------------------------------------------------------------------------------------------
comment: //	pull triggers
comment: //---------------------------------------------------------------------------------------------
comment: //-------------------------------------------------------------------------------------------------
string: 'modules/announcements/models/announcement.mod.php'
string: 'module'
string: 'model'
string: 'UID'
string: 'data'
string: 'announcements'
string: 'module'
string: 'announcements'
string: 'announcement-any'
string: 'announcements'
string: 'announcement-'
string: 'UID'
string: 'refUID'
string: 'data'
string: 'firing: '
string: 'announcements-refUID-'
string: 'data'
string: 'refUID'
string: 'announcements'
string: 'announcements-refUID-'
string: 'data'
string: 'refUID'

<b>scanning file: /var/www/an2google/trunk/modules/announcements/events/object_deleted.on.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //|	fired when an object is deleted
comment: //-------------------------------------------------------------------------------------------------
comment: //arg: module - module which owned the deleted object [string]
comment: //arg: model - type of deleted object [string]
comment: //arg: UID - UID of deleted object [string]
comment: //---------------------------------------------------------------------------------------------
comment: //	delete any announcements owned by this record
comment: //---------------------------------------------------------------------------------------------
comment: //-------------------------------------------------------------------------------------------------
string: 'modules/announcements/models/announcement.mod.php'
string: 'module'
string: 'UID'
string: "refUID='"
string: 'UID'
string: "'"
string: "refModule='"
string: 'module'
string: "'"
string: 'announcements_announcement'
string: '*'
string: ''
string: ''
string: ''

<b>scanning file: /var/www/an2google/trunk/modules/announcements/actions/show.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	show an announcement
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	get name of announcement owner
comment: //----------------------------------------------------------------------------------------------	
comment: //----------------------------------------------------------------------------------------------
comment: //	get name of announcement owner	//TODO: get rid of this
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	render the page
comment: //----------------------------------------------------------------------------------------------
string: 'modules/announcements/models/announcement.mod.php'
string: ''
string: 'announcements_announcement'
string: 'announcements'
string: 'announcements_announcement'
string: 'show'
string: '[[:'
string: '::name::raUID='
string: '::link=no:]]'
string: ''
string: 'modules/announcements/actions/show.page.php'
string: 'raUID'
string: 'UID'
string: 'refUID'
string: 'refModule'
string: 'announceLink'
string: 'announcementOwner'
string: 'announcementTitle'

<b>scanning file: /var/www/an2google/trunk/modules/announcements/actions/save.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	save an Announcements_Announcement object
comment: //--------------------------------------------------------------------------------------------------
comment: //TODO: update this with more generic (GENERATED) code
comment: //	group admins have the ability to post announcements from that group
comment: //if (('groups' == $refModule) &amp;&amp; (true == $user-&gt;isGroupAdmin($refUID))) { $authorised = true; }
comment: //	other auth methods (admins can make any announcement they please)
comment: //----------------------------------------------------------------------------------------------
comment: //	save the object
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: sanitize this
comment: //----------------------------------------------------------------------------------------------
comment: //	prepare notification
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: this shoud be handled by an event	
comment: //----------------------------------------------------------------------------------------------
comment: //	add appropriate users and redirect back
comment: //----------------------------------------------------------------------------------------------
string: 'modules/announcements/models/announcement.mod.php'
string: 'action'
string: 'Action not specified.'
string: 'saveRecord'
string: 'action'
string: 'Action not supported.'
string: 'UID'
string: 'Announcement not specified (UID)'
string: 'UID'
string: 'Announcement not found.'
string: 'announcements-new'
string: 'You are not authorized to make announcements.'
string: 'title'
string: 'content'
string: ''
string: 'The announement could not be saved: '
string: 'bad'
string: 'announcements/'
string: 'announcements_announcement'
string: "Announcement: "
string: 'title'
string: 'summary'
string: 'viewUrl'
string: 'announcements'
string: "Announcement has been changed.&lt;br/&gt;\n"
string: 'announcements'
string: 'schools'
string: 'groups'
string: 'announcements/'

<b>scanning file: /var/www/an2google/trunk/modules/announcements/actions/new.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	add a new announcement
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check request args and user permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	OK then, create it
comment: //----------------------------------------------------------------------------------------------
string: 'modules/announcements/models/announcement.mod.php'
string: 'refModule'
string: 'refModule not given'
string: 'refModel'
string: 'refModel not given'
string: 'refUID'
string: 'refUID not given.'
string: 'refModule'
string: 'refModel'
string: 'refUID'
string: 'Unkonwn module.'
string: 'Unkonwn module.'
string: 'announcements-add'
string: 'You are not aothorized to make new announcements.'
string: 'Announcement '
string: 'New announcement created.  Please complete the following form:'
string: 'ok'
string: 'announcements/edit/'

<b>scanning file: /var/www/an2google/trunk/modules/announcements/actions/list.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	list all announcements
comment: //--------------------------------------------------------------------------------------------------
string: 'announcements'
string: 'announcements_announcement'
string: 'show'
string: 'TODO:UIDHERE'
string: 'sc'
string: 'sc'
string: 'modules/announcements/actions/list.page.php'
string: 'schoolUID'

<b>scanning file: /var/www/an2google/trunk/modules/announcements/actions/edit.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	edit an announcement and associated files/images
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permisisons
comment: //----------------------------------------------------------------------------------------------
comment: //$cb = "[[:". $model-&gt;refModule ."::haseditauth::raUID=".  $model-&gt;refUID .":]]";
comment: //$result = expandBlocks($cb, '');
comment: //if ('yes' != $result) { $page-&gt;do403(); }
comment: //----------------------------------------------------------------------------------------------
comment: //	render the page
comment: //----------------------------------------------------------------------------------------------
string: 'modules/announcements/models/announcement.mod.php'
string: ''
string: 'announcements'
string: 'announcements_announcement'
string: 'edit'
string: 'You are not authorized to edit this announcement.'
string: 'modules/announcements/actions/edit.page.php'
string: 'raUID'

<b>scanning file: /var/www/an2google/trunk/modules/announcements/actions/delete.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	delete an Announcements_Announcement object
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check POST vars and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	delete the announcement and redirect
comment: //----------------------------------------------------------------------------------------------
string: 'modules/announcements/models/announcement.mod.php'
string: 'action'
string: 'Action not specified.'
string: 'deleteRecord'
string: 'action'
string: 'Action not supported.'
string: 'UID'
string: 'Announcement not specified (UID).'
string: 'UID'
string: 'announcements'
string: 'announcements_announcement'
string: 'delete'
string: 'You are not authorzed to delete this announcement.'
string: "Deleted announcement: "
string: 'announcements/'

<b>scanning file: /var/www/an2google/trunk/modules/announcements/actions/default.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	default action for announcements module (ie, no action specified in URL)
comment: //--------------------------------------------------------------------------------------------------
comment: // no recordAlias/UID given in URL, list all announcements in current users school
comment: // recordAlias/UID given in URL, show single group
string: ''
string: 'modules/announcements/actions/list.act.php'
string: 'modules/announcements/actions/show.act.php'

<b>scanning file: /var/www/an2google/trunk/modules/announcements/actions/confirmdelete.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	confirm deletion of a Announcements_Announcement object
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------		
comment: //----------------------------------------------------------------------------------------------
comment: //	make the confirmation block
comment: //----------------------------------------------------------------------------------------------		
string: 'modules/announcements/models/announcement.mod.php'
string: 'uid'
string: 'uid'
string: 'Announcement not found.'
string: 'announcements'
string: 'announcements_announcement'
string: 'delete'
string: 'You are not authorized to delete this announcement.'
string: 'UID'
string: 'raUID'
string: 'modules/announcements/views/confirmdelete.block.php'
string: 'warn'
string: 'announcements/'

<b>scanning file: /var/www/an2google/trunk/modules/aliases/views/show.fn.php</b>

<b>scanning file: /var/www/an2google/trunk/modules/aliases/models/alias.mod.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	this object represents aliases
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //member variables
comment: //----------------------------------------------------------------------------------------------
comment: //_	currently loaded database object [array]
comment: //_	database table definition [array]
comment: //_	records whether object was loaded from database [bool]
comment: //_	UID
comment: //_	module
comment: //_	model
comment: //_	ref:*-*
comment: //_	varchar(255)
comment: //_	varchar(255)
comment: //_	datetime
comment: //_	ref:users-user
comment: //_	datetime
comment: //_	ref:users-user
comment: //----------------------------------------------------------------------------------------------
comment: //. constructor
comment: //----------------------------------------------------------------------------------------------
comment: //opt: UID - UID of a Alias object [string]
comment: // initialise table schema
comment: // try load an object, if given
comment: //----------------------------------------------------------------------------------------------
comment: //. load an object from the db given its UID
comment: //----------------------------------------------------------------------------------------------
comment: //arg: UID - UID of a Alias object [string]
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //. load Alias object serialized as an associative array
comment: //----------------------------------------------------------------------------------------------
comment: //arg: ary - associative array of members and values [array]
comment: //----------------------------------------------------------------------------------------------
comment: //. save the current object to database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string on success, html report of errors on failure [string]
comment: //----------------------------------------------------------------------------------------------
comment: //. check that object is correct before allowing it to be stored in database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string if object passes, warning message if not [string]
comment: //----------------------------------------------------------------------------------------------
comment: //. database table definition and content versioning
comment: //----------------------------------------------------------------------------------------------
comment: //returns: information for constructing SQL queries [array]
comment: //table columns
comment: //these fields will be indexed
comment: //revision history will be kept for these fields
comment: //----------------------------------------------------------------------------------------------
comment: //. serialize this object to an array
comment: //----------------------------------------------------------------------------------------------
comment: //returns: associative array of all members which define this instance [array]
comment: //----------------------------------------------------------------------------------------------
comment: //. make an extended arry of data views may need
comment: //----------------------------------------------------------------------------------------------
comment: //returns: associative array of members, metadata and partial views [array]
comment: //------------------------------------------------------------------------------------------
comment: //	links
comment: //------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //. delete current object from the database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: true on success, false on failure [bool]
string: ''
string: ''
string: 'UID'
string: 'refModule'
string: 'refModel'
string: 'refUID'
string: 'aliaslc'
string: 'alias'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: ''
string: ''
string: ''
string: "No UID.\n"
string: ''
string: "No alias.\n"
string: 'module'
string: 'aliases'
string: 'model'
string: 'aliases_alias'
string: 'fields'
string: 'UID'
string: 'VARCHAR(33)'
string: 'refModule'
string: 'VARCHAR(50)'
string: 'refModel'
string: 'VARCHAR(50)'
string: 'refUID'
string: 'VARCHAR(30)'
string: 'aliaslc'
string: 'VARCHAR(255)'
string: 'alias'
string: 'VARCHAR(255)'
string: 'createdOn'
string: 'DATETIME'
string: 'createdBy'
string: 'VARCHAR(33)'
string: 'editedOn'
string: 'DATETIME'
string: 'editedBy'
string: 'VARCHAR(33)'
string: 'indices'
string: 'UID'
string: '10'
string: 'refModule'
string: '10'
string: 'refModel'
string: '10'
string: 'refUID'
string: '10'
string: 'createdOn'
string: ''
string: 'createdBy'
string: '10'
string: 'editedOn'
string: ''
string: 'editedBy'
string: '10'
string: 'nodiff'
string: 'UID'
string: 'refModule'
string: 'refModel'
string: 'refUID'
string: 'aliaslc'
string: 'alias'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: 'viewUrl'
string: ''
string: 'viewLink'
string: ''
string: 'editUrl'
string: ''
string: 'editLink'
string: ''
string: 'delUrl'
string: ''
string: 'delLink'
string: ''
string: 'newUrl'
string: ''
string: 'newLink'
string: ''
string: 'aliases'
string: 'aliases_alias'
string: 'show'
string: 'UID'
string: 'viewUrl'
string: '%%serverPath%%alias/showalias/'
string: 'UID'
string: 'viewLink'
string: "&lt;a href='"
string: 'viewUrl'
string: "'&gt;[ more &gt;gt; ]&lt;/a&gt;"
string: 'aliases'
string: 'aliases_alias'
string: 'edit'
string: 'UID'
string: 'editUrl'
string: '%%serverPath%%alias/editalias/'
string: 'UID'
string: 'editLink'
string: "&lt;a href='"
string: 'editUrl'
string: "'&gt;[ edit ]&lt;/a&gt;"
string: 'aliases'
string: 'Aliases_Alais'
string: 'delete'
string: 'UID'
string: 'delUrl'
string: '%%serverPath%%alias/delalias/'
string: 'UID'
string: 'delLink'
string: "&lt;a href='"
string: 'delUrl'
string: "'&gt;[ delete ]&lt;/a&gt;"

<b>scanning file: /var/www/an2google/trunk/modules/aliases/inc/maintenance.inc.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //	maintain the recordAlias table
comment: //-------------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	check that all recordaliases are for an existing record
comment: //---------------------------------------------------------------------------------------------
comment: //-----------------------------------------------------------------------------------------
comment: //	check that refTable and refUID exist
comment: //-----------------------------------------------------------------------------------------
comment: //-----------------------------------------------------------------------------------------
comment: //	delete dud records
comment: //-----------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	compile report
comment: //---------------------------------------------------------------------------------------------
string: 'modules/aliases/models/aliad.mod.php'
string: "&lt;h2&gt;Checking Aliases_Alias table...&lt;/h2&gt;"
string: 'UID'
string: 'refTable'
string: 'refUID'
string: 'alias'
string: 'error'
string: "select * from aliases_alias"
string: 'refTable'
string: 'refTable'
string: 'refUID'
string: "nosuch"
string: 'UID'
string: 'refTable'
string: 'refUID'
string: 'alias'
string: "&lt;b&gt;Records Checked:&lt;/b&gt; $recordCount&lt;br/&gt;\n"
string: "&lt;b&gt;Errors Found:&lt;/b&gt; $errorCount&lt;br/&gt;\n"
string: "&lt;b&gt;Errors Fixed:&lt;/b&gt; $fixCount&lt;br/&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/aliases/inc/install.inc.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	install script for alias module
comment: //--------------------------------------------------------------------------------------------------
comment: //+	reports are human-readable HTML, with script-readable HTML comments
comment: //--------------------------------------------------------------------------------------------------
comment: //|	install the alias module
comment: //--------------------------------------------------------------------------------------------------
comment: //returns: html report or false if not authorized [string][bool]
comment: //----------------------------------------------------------------------------------------------
comment: //	create or upgrade alias-aliass table
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	import any records from previous table
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	done
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
comment: //|	discover if this module is installed
comment: //--------------------------------------------------------------------------------------------------
comment: //:	if installed correctly report will contain HTML comment &lt;!-- installed correctly --&gt;
comment: //returns: HTML installation status report [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	ensure the table which stores Alias objects exists and is correct
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	done
comment: //----------------------------------------------------------------------------------------------
string: 'core/dbdriver/mysqladmin.dbd.php'
string: 'modules/aliases/models/alias.mod.php'
string: 'admin'
string: ''
string: 'refTable'
string: 'refModule'
string: 'recordalias'
string: "&lt;b&gt;moved $count records from 'recordalias' table.&lt;/b&gt;&lt;br/&gt;"
string: 'admin'
string: ''
string: '&lt;!-- table installed correctly --&gt;'
string: '&lt;!-- module installed correctly --&gt;'

<b>scanning file: /var/www/an2google/trunk/modules/aliases/actions/test.act.php</b>
comment: //$model-&gt;save();
string: 'modules/alias/models/alias.mod.php'
string: "saving new alias...&lt;br/&gt;"
string: 'scaffold'
string: 'Scaffold_ModuleDefinition'
string: '157150205620517929'
string: 'Scaffold'
string: 'scaffold'
string: "saved new alias {$model-&gt;UID} &lt;br/&gt;"

<b>scanning file: /var/www/an2google/trunk/modules/aliases/actions/newalias.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	create a new Alias object
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check permissions and any POST variables
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	create the object
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: use a switch
comment: //----------------------------------------------------------------------------------------------
comment: //	check that object was created and redirect
comment: //----------------------------------------------------------------------------------------------
comment: //$session-&gt;msg('New Alias.');
string: 'modules/alias/models/alias.mod.php'
string: 'aliases'
string: 'aliases_alias'
string: 'new'
string: 'You are not authorized to create new aliases.'
string: 'module'
string: 'reference module not specified'
string: 'model'
string: 'reference model not specified'
string: 'UID'
string: 'reference object UID not specified'
string: 'module'
string: 'model'
string: 'UID'
string: 'no model specified'
string: 'refModule'
string: 'refModule'
string: 'refModel'
string: 'refModel'
string: 'refUID'
string: 'refUID'
string: 'aliaslc'
string: 'aliaslc'
string: 'alias'
string: 'alias'
string: ''
string: '/alias/editalias/'
string: 'Could not create new Alias:&lt;br/&gt;'

<b>scanning file: /var/www/an2google/trunk/modules/admin/views/svnadd.fn.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //|	find all files in this project which should be tracked by subversion
comment: //-------------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	define which files should not be tracked by SVN
comment: //---------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	find all files in this project
comment: //---------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	save to svnadd installPath
comment: //---------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	make explicit list of files which should not be tacked by svn
comment: //---------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	done
comment: //---------------------------------------------------------------------------------------------
comment: //-------------------------------------------------------------------------------------------------
string: 'admin'
string: 'setup.inc.php'
string: 'uploader/'
string: 'data/images/'
string: 'data/files/'
string: 'data/log/'
string: 'data/temp/'
string: '.log.php'
string: 'svnadd.sh'
string: 'svndelete.sh'
string: '/drawcache/'
string: '~'
string: '.svn'
string: 'install/'
string: 'tmp.xml'
string: ''
string: ''
string: ''
string: "find $installPath"
string: "\n"
string: ''
string: ' '
string: ''
string: 'svn add '
string: "\n"
string: ''
string: '.svn'
string: 'svn delete '
string: "\n"
string: 'svnadd.sh'
string: 'w+'
string: "The following files should be managed by subversion:&lt;br/&gt;"
string: "&lt;small&gt;This list has been saved to $scriptFile&lt;/small&gt;&lt;br/&gt;"
string: "&lt;textarea rows='17' cols='80'&gt;"
string: "&lt;/textarea&gt;"
string: "&lt;br/&gt;&lt;br/&gt;"
string: 'svndelete.sh'
string: 'w+'
string: "The following files should not be managed by SVN:&lt;br/&gt;"
string: "&lt;small&gt;This list has been saved to $scriptFile&lt;/small&gt;&lt;br/&gt;"
string: "&lt;textarea rows='17' cols='80'&gt;"
string: "&lt;/textarea&gt;"
string: "&lt;br/&gt;&lt;br/&gt;"

<b>scanning file: /var/www/an2google/trunk/modules/admin/views/subnav.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	nav bar (perm:administer)
comment: //--------------------------------------------------------------------------------------------------
string: 'admin'
string: ''
string: 'modules/admin/views/subnav.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/admin/views/selectpermission.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: module - a kapenta module [string]
comment: //arg: model - a type of object [string]
comment: //opt: varname - form varibale name, default is 'permission' [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: error checking for HTML/js inclusion
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
comment: // add all permissions inherent to the model
comment: // add all permissions exported by other models
string: 'core/kmodule.class.php'
string: 'core/kmodel.class.php'
string: ''
string: 'permission'
string: 'admin'
string: ''
string: 'module'
string: '(no module)'
string: 'model'
string: '(no module)'
string: 'module'
string: '(no such module)'
string: 'model'
string: '(no such model)'
string: 'model'
string: 'varname'
string: 'varname'
string: "&lt;select name='$varname'&gt;\n"
string: "  &lt;option&gt;$permission&lt;/option&gt;\n"
string: 'model'
string: "  &lt;option&gt;$expperm&lt;/option&gt;\n"
string: "&lt;/select&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/admin/views/runmaintenance.fn.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //|	run a maintenance script and return the report (as html)
comment: //-------------------------------------------------------------------------------------------------
comment: //arg: modName - name of a kapenta module [string]
comment: //role: admin - only administrators may use this
comment: //TODO: move this to the core, probably on the $kapenta object
comment: //% return value [string]
comment: //---------------------------------------------------------------------------------------------
comment: //	check user role and argument
comment: //---------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	include the maintenance script and check that maintenance function exists
comment: //---------------------------------------------------------------------------------------------
string: ''
string: 'admin'
string: ''
string: 'modName'
string: ''
string: 'modName'
string: "(no such module)"
string: 'modules/'
string: 'modName'
string: '/inc/maintenance.inc.php'
string: '(no such maintenance script: '
string: ')'
string: 'modName'
string: '_maintenance'
string: '(invalid maintenance script)'

<b>scanning file: /var/www/an2google/trunk/modules/admin/views/modulexml.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	display module XML
comment: //--------------------------------------------------------------------------------------------------
string: 'core/kmodule.class.php'

<b>scanning file: /var/www/an2google/trunk/modules/admin/views/moduleinstallbutton.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	button for re/installing modules
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: modulename - name of a module [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
string: 'core/kmodule.class.php'
string: ''
string: 'admin'
string: ''
string: 'modulename'
string: ''
string: 'modulename'
string: ''
string: 'modules/admin/views/moduleinstallbutton.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/admin/views/moduleconsole.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	display admin controls for all modules which provide them
comment: //--------------------------------------------------------------------------------------------------
comment: //role: admin - only administrators may use this
comment: //	NOTE: modules may implement an 'adminconsole' block, but it's not compulsory
comment: //----------------------------------------------------------------------------------------------
comment: //	check user role
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
string: ''
string: 'admin'
string: ''
string: "[[:"
string: "::adminconsole:]]"
string: ''
string: ''
string: "&lt;h2&gt;$moduleName&lt;/h2&gt;\n$block\n&lt;hr/&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/admin/views/module.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	display module details, as read from module.xml.php
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: modulename - name of a kapenta module [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
string: 'core/kmodule.class.php'
string: 'core/kmodel.class.php'
string: ''
string: 'admin'
string: ''
string: 'modulename'
string: '(modulename not given)'
string: 'modulename'
string: '(no such module)'
string: "&lt;p&gt;&lt;b&gt;Description: &lt;/b&gt;"
string: "&lt;/p&gt;\n"
string: "&lt;h2&gt;"
string: 'name'
string: "&lt;/h2&gt;"
string: ""

<b>scanning file: /var/www/an2google/trunk/modules/admin/views/modanchorlist.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	anchor list of modules (perm:manage)
comment: //--------------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'core/kmodule.class.php'
string: "\n&lt;a href='#modList"
string: "'&gt;$module&lt;/a&gt;"
string: ', '
string: ".\n"

<b>scanning file: /var/www/an2google/trunk/modules/admin/views/menu.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	admin menu (perm:administer)
comment: //--------------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: 'admin'
string: ''
string: 'modules/admin/views/menu.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/admin/views/maintenancelist.fn.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //|	find all files in this project which should be tracked by subversion
comment: //-------------------------------------------------------------------------------------------------
comment: //role: admin - only administrators may use this
comment: //---------------------------------------------------------------------------------------------
comment: //	check user role
comment: //---------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	go through all modules and look for maintenance script file (assume it contains function)
comment: //---------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	make html list
comment: //---------------------------------------------------------------------------------------------
string: ''
string: 'admin'
string: ''
string: 'modules/'
string: '/inc/maintenance.inc.php'
string: "&lt;h2&gt;Module Maintenance Scripts&lt;/h2&gt;\n"
string: '%%serverPath%%admin/maintenance/'
string: "&lt;a href='"
string: "'&gt;[ Maintance: $modName module &amp;gt;&amp;gt; ]&lt;/a&gt;&lt;br/&gt;"

<b>scanning file: /var/www/an2google/trunk/modules/admin/views/listmodulesnav.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	list all modules
comment: //--------------------------------------------------------------------------------------------------
comment: //role: admin - only administrators may use this
comment: //---------------------------------------------------------------------------------------------
comment: //	cjeck user role
comment: //---------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	load each module and generate report
comment: //---------------------------------------------------------------------------------------------
comment: //$report;
comment: //--------------------------------------------------------------------------------------------------
string: 'core/kmodule.class.php'
string: ''
string: 'admin'
string: ''
string: 'Module'
string: '[x]'
string: 'modulename'
string: 'report'
string: ''
string: 'status'
string: "&lt;span class='ajaxinactive'&gt;:-(&lt;/span&gt;"
string: "&lt;!-- installed correctly --&gt;"
string: 'status'
string: "&lt;span class='ajaxmsg'&gt;:-)&lt;/span&gt;"
string: "&lt;!-- module installed correctly --&gt;"
string: 'status'
string: "&lt;span class='ajaxmsg'&gt;:-)&lt;/span&gt;"
string: "&lt;a href='"
string: 'editUrl'
string: "'&gt;"
string: "&lt;/a&gt;"
string: 'status'

<b>scanning file: /var/www/an2google/trunk/modules/admin/views/listmodules.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	list all modules
comment: //--------------------------------------------------------------------------------------------------
comment: //role: admin - only administrators may do this
comment: //---------------------------------------------------------------------------------------------
comment: //	check user role
comment: //---------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	load each module and generate report
comment: //---------------------------------------------------------------------------------------------
comment: //$report;
comment: //--------------------------------------------------------------------------------------------------
string: 'core/kmodule.class.php'
string: ''
string: 'admin'
string: ''
string: "modules/admin/views/moduleinstallstatus.block.php"
string: 'modulename'
string: 'report'
string: ''
string: 'status'
string: "&lt;span class='ajaxerror'&gt;not installed&lt;/span&gt;"
string: "&lt;!-- installed correctly --&gt;"
string: 'status'
string: "&lt;span class='ajaxmsg'&gt;installed&lt;/span&gt;"
string: "&lt;a href='%%serverPath%%mods/"
string: "'&gt;$modName&lt;/a&gt;"
string: 'status'

<b>scanning file: /var/www/an2google/trunk/modules/admin/views/listmodulepages.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	list all pages on a module
comment: //--------------------------------------------------------------------------------------------------
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: ''
string: 'admin'
string: ''
string: 'module'
string: '(module not speicified)'
string: 'module'
string: '(no such module)'
string: 'module'
string: '%%serverPath%%admin/editpage/module_'
string: 'module'
string: '/'
string: "\t\t&lt;a href='"
string: "'&gt;$pg&lt;/a&gt;&lt;br/&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/admin/views/listmoduleblocks.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	make a list of blocks on a given module
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: module - name of a kapenta module [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: ''
string: 'admin'
string: ''
string: 'module'
string: '(module not given)'
string: 'module'
string: '(no such module)'
string: 'module'
string: '.block.php'
string: ''
string: '%%serverPath%%admin/editblock/module_'
string: 'module'
string: '/'
string: "\t\t&lt;a href='"
string: "'&gt;$block&lt;/a&gt;&lt;br/&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/admin/views/listallpages.fn.php</b>
comment: //require_once($kapenta-&gt;installPath . 'modules/pages/models/page.mod.php');
comment: //--------------------------------------------------------------------------------------------------
comment: //|	list all pages (and blocks) on all modules
comment: //--------------------------------------------------------------------------------------------------
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check user is admin and load modules
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	list pages and blocks on this module
comment: //------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: ''
string: 'admin'
string: ''
string: 'modules/admin/views/pagesummary.block.php'
string: 'moduleName'

<b>scanning file: /var/www/an2google/trunk/modules/admin/views/installstatusreport.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	display the installation status report for a givne module
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: modulename - name of a module [string]
string: 'core/kmodule.class.php'
string: ''
string: 'admin'
string: ''
string: 'modulename'
string: 'modulename'
string: '(no such module)'

<b>scanning file: /var/www/an2google/trunk/modules/admin/views/editpageform.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	form for editing pages
comment: //--------------------------------------------------------------------------------------------------
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	load the page
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
comment: // sanitize content (prevent blocks running, &lt;/textarea&gt;)
comment: // for loading via javascript
comment: // load form
string: 'core/kpage.class.php'
string: ''
string: 'admin'
string: ''
string: 'xmodule'
string: '(xmodule not specified)'
string: 'xpage'
string: '(xpage not specified)'
string: 'modules/'
string: 'xmodule'
string: '/actions/'
string: 'xpage'
string: ''
string: '(could not load page)'
string: 'moduleName'
string: 'xmodule'
string: 'pageName'
string: 'xpage'
string: 'Js64'
string: 'Js64'
string: '['
string: '&amp;#91;'
string: ']'
string: '&amp;#93;'
string: '&lt;'
string: '&amp;lt;'
string: '&gt;'
string: '&amp;gt;'
string: 'modules/admin/views/editpageform.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/admin/views/editblockform.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	form for editing a block template
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: module - name of a kapenta module [string]
comment: //arg: block - name of a block [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	load the block
comment: //----------------------------------------------------------------------------------------------
comment: // legacy, remove
comment: // TODO: above
comment: //----------------------------------------------------------------------------------------------
comment: //	make html/js edit form
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
string: ''
string: 'admin'
string: ''
string: 'module'
string: '(module not given)'
string: 'block'
string: '(block not given)'
string: 'refModuleName'
string: 'module'
string: 'refBlockName'
string: 'block'
string: 'modules/'
string: 'module'
string: '/views/'
string: 'block'
string: '.block.php'
string: '(no such block)'
string: "\n"
string: '%%serverPath%%'
string: 'http://kapenta.com'
string: '%%serverPath%%'
string: 'http://kapenta.org.uk'
string: '%%serverPath%%'
string: 'http://awarenet.co.za'
string: '%%serverPath%%'
string: 'http://awarenet.eu'
string: '%%serverPath%%'
string: 'http://mothsorchid.com'
string: '%%serverPath%%'
string: 'blockContent'
string: 'blockContentJs64'
string: 'blockContentJs64'
string: 'modules/admin/views/editblockform.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/admin/views/channelauth.fn.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //|	
comment: //-------------------------------------------------------------------------------------------------
comment: //arg: channel - ID of channel on this module [string]
comment: //-------------------------------------------------------------------------------------------------
string: 'channel'
string: ''
string: 'channel'
string: 'syspagelog'
string: 'admin'
string: 'yes'
string: 'syspagelogsimple'
string: 'admin'
string: 'yes'
string: 'no'

<b>scanning file: /var/www/an2google/trunk/modules/admin/views/adminconsole.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	the admin module's own admin console
comment: //--------------------------------------------------------------------------------------------------
string: 'admin'
string: ''
string: 'modules/admin/views/adminconsole.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/admin/models/repository.mod.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	object for interacting with repository
comment: //--------------------------------------------------------------------------------------------------
comment: //+ TODO: this could use some tightening up.
comment: //----------------------------------------------------------------------------------------------
comment: //	member variables
comment: //----------------------------------------------------------------------------------------------
comment: // location of list of objects [string]
comment: // location to post objects to [string]
comment: // location to post objects to [string]
comment: // authorises post  [string]
comment: // array of locations which are not uploaded/updated [array]
comment: // list of local files which will not be uploaded [array]
comment: //----------------------------------------------------------------------------------------------
comment: //.	constructor
comment: //----------------------------------------------------------------------------------------------
comment: //arg: url - location of a code repository module [string]
comment: //arg: raUID - alias or UID of a project in the repository [string]
comment: //----------------------------------------------------------------------------------------------
comment: //.	add an exemption
comment: //----------------------------------------------------------------------------------------------
comment: //arg: match - filenames matching this will be dropped [string] 
comment: //----------------------------------------------------------------------------------------------
comment: //.	get exemptions array
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //.	clear the exemptions array
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //.	is file an exception which should not be updated for security reasons (eg, install.php)
comment: //----------------------------------------------------------------------------------------------
comment: //arg: relFile - file location relative to installPath [string]
comment: //returns: true if file is exempt, false if not [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //.	download repository list and convert into an array
comment: //----------------------------------------------------------------------------------------------
comment: //returns: array of file metadata - uid, hash, type and relfile [array]
comment: //----------------------------------------------------------------------------------------------
comment: //.	examine local files and create list - same format as $this-&gt;getRepositoryList()
comment: //----------------------------------------------------------------------------------------------
comment: //arg: repositoryList - list of files as returned by the repository [array]
comment: //,	any exemptions should be set up before this is called
comment: //------------------------------------------------------------------------------------------
comment: //	list all files and folders from local installPath
comment: //------------------------------------------------------------------------------------------
comment: //TODO: platform independant
comment: //--------------------------------------------------------------------------------------
comment: //	decide which ones to skip
comment: //--------------------------------------------------------------------------------------
comment: // must not be blank	
comment: // relative position
comment: // get filename
comment: // search for exemptions
comment: //--------------------------------------------------------------------------------------
comment: //	is a valid file, add to local list
comment: //--------------------------------------------------------------------------------------
comment: // not set at this stage
comment: //----------------------------------------------------------------------------------
comment: //	add trailing slash to folders
comment: //----------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------
comment: //	compare to repository list, find UID if present
comment: //----------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------
comment: //	add new item to list of local files
comment: //----------------------------------------------------------------------------------				
comment: //			if ($skip == false) {
comment: //				$itemUID = ''; 
comment: //				$sha1 = sha1(implode(file($installPath . $line)));
comment: //
comment: //				//----------------------------------------------------------------------------------
comment: //				//	compare to repository
comment: //				//----------------------------------------------------------------------------------
comment: //				foreach($rList as $rUID =&gt; $item) 
comment: //					{ if ($item['relfile'] == $line) { $itemUID = $rUID; } }
comment: //
comment: //				if ($itemUID == false) {
comment: //					//------------------------------------------------------------------------------
comment: //					//	is not in repository, add it
comment: //					//------------------------------------------------------------------------------
comment: //					echo "[&gt;] adding $line to repository (new file)&lt;br/&gt;\n"; flush();
comment: //					storeNewFile($postfile, $line, $respoitorykey);
comment: //
comment: //				} else {
comment: //					if ($sha1 != $rList[$itemUID]['sha1']) {
comment: //						//--------------------------------------------------------------------------
comment: //						//	is different to version in repository, update it
comment: //						//--------------------------------------------------------------------------
comment: //
comment: //					} else {
comment: //						//--------------------------------------------------------------------------
comment: //						//	files match
comment: //						//--------------------------------------------------------------------------
comment: //					}
comment: //
comment: //				}	// end if itemUID == false		
comment: //	
comment: //			} else { $skipList[] = $line; }
comment: // end foreach line
comment: //		echo "&lt;h1&gt;Skipped Files&lt;/h1&gt;\n";
comment: //		foreach ($skipList as $path) { echo $path . "&lt;br/&gt;\n"; }
comment: //----------------------------------------------------------------------------------------------
comment: //.	compare local and repository lists to create a list of files to be updated
comment: //----------------------------------------------------------------------------------------------
comment: //arg: repositoryList - list of files from the repository [array]
comment: //arg: localList - list of local files [array]
comment: //returns: list of files to be uploaded to the repository [array]	
comment: //----------------------------------------------------------------------------------
comment: // new items
comment: //----------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------
comment: // updated items (hash does hot match)
comment: //----------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //.	perform uploads
comment: //----------------------------------------------------------------------------------------------
comment: //arg: uploadList - list of files to upload, see makeUploadList [array]
comment: //----------------------------------------------------------------------------------------------
comment: //.	save a new file to the repository
comment: //----------------------------------------------------------------------------------------------
comment: //arg: path - relative to $installPath [string]
comment: //arg: type - file type [string]
comment: //arg: hash - sha1 file hash [string]
comment: //------------------------------------------------------------------------------------------
comment: //	load the file
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	binary files are attached
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	assemble postvars
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	do it
comment: //------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //.	get the sha1 hash of a file or folder
comment: //----------------------------------------------------------------------------------------------
comment: //, give location relative to installPath
comment: //arg: relFile - file location relative to $installPath [string]
comment: //returns: sha1 hash of a file or path [string]
comment: //----------------------------------------------------------------------------------------------
comment: //.	decide which type a file is
comment: //----------------------------------------------------------------------------------------------
comment: //arg: path - path including filename [string]
comment: //returns: file type or false if it can't guess [string][bool]
comment: //----------------------------------------------------------------------------------------------
comment: //.	return a list of objects as an html table
comment: //----------------------------------------------------------------------------------------------
comment: //arg: list - a set of file locations and metadata [array]
comment: //returns: html [string]
string: ''
string: ''
string: ''
string: ''
string: "projectlist/"
string: '/'
string: 'commit/'
string: 'projectfile/'
string: ' '
string: "\n"
string: "\t"
string: 'uid'
string: 'hash'
string: 'type'
string: 'relfile'
string: 'uid'
string: "find "
string: "\n"
string: ''
string: '/'
string: ' '
string: 'uid'
string: ''
string: 'hash'
string: 'type'
string: 'relfile'
string: 'type'
string: 'folder'
string: 'relfile'
string: '//'
string: '/'
string: 'relfile'
string: '/'
string: 'relfile'
string: 'relfile'
string: 'uid'
string: 'uid'
string: 'uid'
string: ''
string: 'uid'
string: 'hash'
string: 'hash'
string: 'relFile'
string: 'type'
string: 'hash'
string: "[i] storing file - path: $path type: $type &lt;br/&gt;\n"
string: "\\"
string: ''
string: '/'
string: '(automatically uploaded '
string: ')'
string: 'no'
string: ''
string: ''
string: 'jpeg'
string: 'png'
string: 'gif'
string: 'ttf'
string: 'yes'
string: '(binary file attached)'
string: 'action'
string: 'storeNode'
string: 'key'
string: 'path'
string: 'type'
string: 'title'
string: 'description'
string: 'content'
string: 'isbinary'
string: 'binary'
string: 'hash'
string: "[i] server responds: &lt;small&gt; $response &lt;/small&gt; &lt;br/&gt;\n"
string: '//'
string: '/'
string: '.'
string: 'folder'
string: 'xxxxxxxxxxxxxx'
string: '.txt'
string: 'txt'
string: '.js'
string: 'txt'
string: '.css'
string: 'txt'
string: '.html'
string: 'txt'
string: '.htm'
string: 'txt'
string: '.jpeg'
string: 'jpeg'
string: '.jpg'
string: 'jpeg'
string: '.png'
string: 'png'
string: '.gif'
string: 'gif'
string: '.ttf'
string: 'ttf'
string: '.template.php'
string: 'template'
string: '.page.php'
string: 'page'
string: '.block.php'
string: 'block'
string: '.xml.php'
string: 'xml'
string: '.swf'
string: 'swf'
string: '.php'
string: 'php'
string: "&lt;table&gt;\n"
string: "\t&lt;tr&gt;\n"
string: "\t\t&lt;td&gt;&lt;b&gt;UID&lt;/b&gt;&lt;/td&gt;\n"
string: "\t\t&lt;td&gt;&lt;b&gt;HASH&lt;/b&gt;&lt;/td&gt;\n"
string: "\t\t&lt;td&gt;&lt;b&gt;TYPE&lt;/b&gt;&lt;/td&gt;\n"
string: "\t\t&lt;td&gt;&lt;b&gt;RELFILE&lt;/b&gt;&lt;/td&gt;\n"
string: "\t&lt;/tr&gt;\n"
string: 'uid'
string: ''
string: 'hash'
string: ''
string: "\t&lt;tr&gt;\n"
string: "\t\t&lt;td&gt;&lt;small&gt;"
string: 'uid'
string: "&lt;/small&gt;&lt;/td&gt;\n"
string: "\t\t&lt;td&gt;&lt;small&gt;"
string: 'hash'
string: "&lt;/small&gt;&lt;/td&gt;\n"
string: "\t\t&lt;td&gt;&lt;small&gt;"
string: 'type'
string: "&lt;/small&gt;&lt;/td&gt;\n"
string: "\t\t&lt;td&gt;&lt;small&gt;"
string: 'relfile'
string: "&lt;/small&gt;&lt;/td&gt;\n"
string: "\t&lt;/tr&gt;\n"
string: "&lt;/table&gt;&lt;br/&gt;\n"
string: "$newCount files are new to the repository and will be assigned UIDs.&lt;br/&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/admin/inc/install.inc.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	install scripts for admin module
comment: //--------------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
comment: //	install the admin module
comment: //--------------------------------------------------------------------------------------------------
comment: //returns: html report [string]
comment: // only admins can do this
comment: //------------------------------------------------------------------------------------------
comment: //	admin module has no database presence at now
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	done
comment: //------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
comment: //	discover if this module is installed
comment: //--------------------------------------------------------------------------------------------------
comment: //returns: HTML installation report [string]
comment: // if installed correctly report will contain HTML comment &lt;!-- installed correctly --&gt;
comment: // only admins can do this
string: 'admin'
string: "&lt;h3&gt;Installing Admin Module&lt;/h3&gt;\n"
string: "Admin module has no objects serialized to the database."
string: 'admin'
string: "&lt;p&gt;Admin module requires no further configuration.&lt;/p&gt;"
string: "&lt;!-- installed correctly --&gt;"

<b>scanning file: /var/www/an2google/trunk/modules/admin/inc/cron.inc.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	processes run regularly to keep things tidy
comment: //--------------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
comment: //|	admin daily cron
comment: //--------------------------------------------------------------------------------------------------
comment: //returns: HTML report of any actions taken [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	rotate the cron log
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	done
comment: //----------------------------------------------------------------------------------------------
string: "&lt;h2&gt;admin_cron_daily&lt;/h2&gt;\n"
string: 'data/cronlog.old.html'
string: 'data/cronlog.old.html'
string: "[i] Removed yesterday's cron log.&lt;br/&gt;\n"
string: 'data/cronlog.html'
string: 'data/cronlog.html'
string: 'data/cronlog.old.html'
string: "[i] Backed up and cleared today's cron log.&lt;br/&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/admin/actions/update.act.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //*	update local installation from repository on kapenta.org.uk
comment: //-------------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	set up repository access
comment: //---------------------------------------------------------------------------------------------
comment: // dynamically generated on install
comment: // security risk
comment: // security risk
comment: // security risk
comment: // security risk
comment: // security risk
comment: // this module (CONTAINS KEY)
comment: // defunct
comment: // sybversion files and directories
comment: // ?
comment: // ?
comment: //$repository-&gt;addExemption("data/log/");				// logs
comment: // not part of awareNet
comment: // development SVN script
comment: // development SVN script
comment: // ?
comment: // log files
comment: // gedit revision files
comment: // dynamically generated images
comment: // user images
comment: // user files
comment: //---------------------------------------------------------------------------------------------
comment: //	get list of files from respoitory
comment: //---------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	check that all files in repository exist on local server
comment: //---------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	get local list
comment: //---------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	list local files, compare to repository
comment: //---------------------------------------------------------------------------------------------
comment: //-----------------------------------------------------------------------------------------
comment: //	decide which ones to skip
comment: //-----------------------------------------------------------------------------------------
comment: // must not be blank	
comment: // relative position
comment: // get filename
comment: // filename must contain .
comment: // search for exemptions
comment: //echo "[i] Skipping: $line (security exemption) &lt;br/&gt;\n";
comment: //-----------------------------------------------------------------------------------------
comment: //	compare hash with local file
comment: //-----------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------
comment: //	compare to repository
comment: //--------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------
comment: //	is not in repository, note this to user
comment: //----------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------
comment: //	is different to version in repository, update it
comment: //------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------
comment: //	files match
comment: //------------------------------------------------------------------------------
comment: //echo "[&gt;] hashes match: " . $rList[$itemUID]['relfile'] . " &lt;br/&gt;\n";
comment: // end if itemUID == false		
comment: // end foreach line
comment: //==================================================================================================
comment: //	utility functions
comment: //==================================================================================================
comment: //--------------------------------------------------------------------------------------------------
comment: // download a single file from the repository
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	create all folders
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	download the file
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	download from repository door
comment: //----------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	content is base64 encoded
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	save it :-)
comment: //------------------------------------------------------------------------------------------
comment: // end if cant write
comment: // end if bad download
string: 'modules/admin/models/repository.mod.php'
string: 'admin'
string: '210833480571475984'
string: 'http://kapenta.org.uk/code/'
string: ''
string: "setup.inc.php"
string: "install.php"
string: "___install.php"
string: "ainstall.php"
string: "phpinfo.php"
string: "todo.txt"
string: "uploader/"
string: "install/"
string: ".svn"
string: "some.txt"
string: "GlobalFunctions.txt"
string: "/chan/"
string: 'svnadd.sh'
string: 'svndelete.sh'
string: 'data/log/e'
string: '.log.php'
string: '~'
string: '/drawcache/'
string: "data/images/"
string: "data/files/"
string: "[i] getting repository list: "
string: "... "
string: "done &lt;br/&gt;\n"
string: '//'
string: '/'
string: 'relfile'
string: "[*] $absFile is missing.&lt;br/&gt;\n"
string: 'relFile'
string: "find $installPath"
string: "\n"
string: ''
string: '/'
string: ' '
string: '.'
string: ' '
string: ''
string: 'relfile'
string: '/data/'
string: "[&gt;] not in repository: $line &lt;br/&gt;\n"
string: 'hash'
string: 'relfile'
string: "[i] this file should be updated: "
string: " &lt;br/&gt;\n"
string: "&lt;h1&gt;Skipped Files&lt;/h1&gt;\n"
string: "&lt;br/&gt;\n"
string: 'relfile'
string: '//'
string: '/'
string: 'folder'
string: 'type'
string: "[i] Creating directory $outFile &lt;br/&gt;\n"
string: "[|] Replacing $outFile (already present)&lt;br/&gt;\n"
string: "[|] Downloading $outFile (not present in local installation)&lt;br/&gt;\n"
string: 'uid'
string: ''
string: "[*] Error: could not download $outFile (UID:"
string: 'uid'
string: ")&lt;br/&gt;\n"
string: 'w+'
string: "[*] Error: could not open $outFile for writing.&lt;br/&gt;\n"
string: "[&gt;] Saving $outFile (UID:"
string: 'uid'
string: ") "
string: "(type:"
string: 'type'
string: ")&lt;br/&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/admin/actions/txtedit.act.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //	for editing text files on the server
comment: //-------------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	authorization
comment: //---------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	handle submissions
comment: //---------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	working directory
comment: //---------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	confirm file deletion (if specified)
comment: //---------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	delete a file (if specified)
comment: //---------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	load file (if specified)
comment: //---------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	make the edit form
comment: //---------------------------------------------------------------------------------------------
comment: // TODO: use $kapenta
comment: //---------------------------------------------------------------------------------------------
comment: //	render the page
comment: //---------------------------------------------------------------------------------------------
comment: //$page-&gt;blockArgs['editorList'] = $editorList;
string: 'admin'
string: 'action'
string: 'saveFile'
string: 'action'
string: 'fileName'
string: '..'
string: ''
string: '//'
string: '/'
string: 'fileContents'
string: ''
string: 'path'
string: 'path_'
string: 'path'
string: 'action'
string: 'confirmDeleteFile'
string: 'action'
string: 'delfile'
string: "&lt;b&gt;Confirm: you wish to delete "
string: 'delfile'
string: "?&lt;/b&gt;&lt;br/&gt;
					&lt;p&gt;Note that this action cannot be undone and may affect the functioning of this website.&lt;/p&gt;
					&lt;table noborder&gt;
					  &lt;tr&gt;
					    &lt;td valign='top'&gt;
					    &lt;form name='confirmDelete' method='POST' action='%%serverPath%%admin/txtedit/'&gt;
					    &lt;input type='hidden' name='action' value='deleteFile' /&gt;
					    &lt;input type='hidden' name='delfile' value='"
string: 'delfile'
string: "' /&gt;
					    &lt;input type='submit' value='Yes: Delete it' /&gt;
					    &lt;/form&gt;
					    &lt;/td&gt;
					    &lt;td valign='top'&gt;
					    &lt;form name='cancelDelete' method='POST' action='%%serverPath%%admin/txtedit/'&gt;
					    &lt;input type='submit' value='No: Cancel' /&gt;
					    &lt;/form&gt;
					    &lt;/td&gt;
					  &lt;/tr&gt;
					&lt;/table&gt;\n"
string: 'warn'
string: 'action'
string: 'deleteFile'
string: 'action'
string: 'delfile'
string: 'delfile'
string: '/'
string: "Deleted: "
string: 'ok'
string: "Could not delete: "
string: 'bad'
string: "Could not delete: "
string: 'bad'
string: ''
string: 'file'
string: 'file'
string: 'sMessage'
string: "file '"
string: "' does not exist.&lt;br/&gt;\n"
string: ''
string: ''
string: ''
string: 'admin/txtedit/file_'
string: '/'
string: 'contentJs'
string: "&lt;form name='editTxtFile' method='POST' action='"
string: "'&gt;
			&lt;input type='hidden' name='action' value='saveFile' /&gt;
			&lt;b&gt;File:&lt;/b&gt;
			&lt;input type='text' name='fileName' size='63' value='"
string: "' /&gt;&lt;br/&gt;
			&lt;textarea name='fileContents' id='taFileContents' rows='30' cols='78'&gt;&lt;/textarea&gt;
			&lt;input type='submit' value='save' /&gt;
			&lt;/form&gt;&lt;br/&gt;

			&lt;script language='javascript'&gt;
			$rawJs
			base64_loadTextArea('taFileContents', contentJs);
			&lt;/script&gt;\n

			&lt;hr/&gt;
			&lt;form name='delTxtFile' method='POST' action='"
string: "'&gt;
			&lt;input type='hidden' name='action' value='confirmDeleteFile' /&gt;
			&lt;input type='hidden' name='delfile' value='"
string: "' /&gt;
			&lt;input type='submit' value='Delete this file' /&gt;
			&lt;/form&gt;
			"
string: 'modules/admin/actions/txtedit.page.php'
string: 'editFile'
string: 'editorForm'
string: 'browsePath'

<b>scanning file: /var/www/an2google/trunk/modules/admin/actions/test-kmodule.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	TEST core KModule object
comment: //--------------------------------------------------------------------------------------------------
comment: //role: admin - only administrators may use this
comment: //--------------------------------------------------------------------------------------------
comment: //	check user role
comment: //--------------------------------------------------------------------------------------------
comment: //if ('admin' != $user-&gt;role) { $page-&gt;do403(); }
comment: //--------------------------------------------------------------------------------------------
comment: //	make a dummy kmodel object
comment: //--------------------------------------------------------------------------------------------
comment: //$fileName = 'modules/users/module.xml.php';
comment: //$testXml = $kapenta-&gt;fileGetContents($fileName);
comment: //$xml = str_replace("\n", "&lt;br/&gt;\n", $xml);
string: 'core/kmodule.class.php'
string: 'core/kmodel.class.php'
string: 'forums'
string: "name: {$module-&gt;modulename}&lt;br/&gt;\n"
string: "description: {$module-&gt;description}&lt;br/&gt;\n"
string: "permision: "
string: "&lt;br/&gt;\n"
string: '&lt;'
string: '&amp;lt;'
string: '&gt;'
string: '&amp;gt;'
string: "&lt;pre&gt;$xml&lt;/pre&gt;"

<b>scanning file: /var/www/an2google/trunk/modules/admin/actions/test-kmodel.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	TEST core KModule object
comment: //--------------------------------------------------------------------------------------------------
comment: //role: admin - only administrators may use this
comment: //--------------------------------------------------------------------------------------------
comment: //	check user role
comment: //--------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------
comment: //	make a dummy kmodel object
comment: //--------------------------------------------------------------------------------------------
string: 'core/kmodel.class.php'
string: 'admin'
string: "&lt;model&gt;
		&lt;name&gt;Projects_Project&lt;/name&gt;
		&lt;name&gt;This model represents user projects.&lt;/name&gt;
		&lt;permissions&gt;
			&lt;permission&gt;show&lt;/permission&gt;
			&lt;permission&gt;edit&lt;/permission&gt;
			&lt;permission&gt;delete&lt;/permission&gt;
			&lt;permission&gt;new&lt;/permission&gt;
			&lt;export&gt;deleteproject&lt;/export&gt;
			&lt;export&gt;newproject&lt;/export&gt;
		&lt;/permissions&gt;
		&lt;relationships&gt;
			&lt;relationship&gt;member&lt;/relationship&gt;
			&lt;relationship&gt;admin&lt;/relationship&gt;
			&lt;relationship&gt;creator&lt;/relationship&gt;
		&lt;/relationships&gt;
	&lt;/model&gt;"
string: "name: $name&lt;br/&gt;\n"
string: "description: $description &lt;br/&gt;\n"
string: "permission: $permission &lt;br/&gt;\n"
string: "export: $export &lt;br/&gt;\n"
string: "relationship: $relationship &lt;br/&gt;\n"
string: "&lt;"
string: '&amp;lt;'
string: " "
string: '&amp;nbsp;'
string: "\n"
string: "&lt;br/&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/admin/actions/test-cleantemp.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	test the temp dir cleaner
comment: //--------------------------------------------------------------------------------------------------
string: 'admin'

<b>scanning file: /var/www/an2google/trunk/modules/admin/actions/temp.act.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //	look for dead images (those with a record but not file on any peer)
comment: //-------------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	admins only
comment: //---------------------------------------------------------------------------------------------
string: 'modules/comments/events/object_updated.on.php'
string: 'admin'
string: 'module'
string: 'comments'
string: 'model'
string: 'comments_comment'
string: 'UID'
string: '1234'
string: 'data'

<b>scanning file: /var/www/an2google/trunk/modules/admin/actions/svn.act.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //	go through the project and create a list of all files SVN should be watching
comment: //-------------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	check permissions
comment: //---------------------------------------------------------------------------------------------
comment: // only admins can do this
comment: //---------------------------------------------------------------------------------------------
comment: //	render the page
comment: //---------------------------------------------------------------------------------------------
string: 'admin'
string: 'modules/admin/actions/svn.page.php'

<b>scanning file: /var/www/an2google/trunk/modules/admin/actions/settings.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	action for viewing/editing module settings
comment: //--------------------------------------------------------------------------------------------------
comment: //role: admin - only administrators may do this
comment: //----------------------------------------------------------------------------------------------
comment: //	check user role
comment: //----------------------------------------------------------------------------------------------	
comment: //----------------------------------------------------------------------------------------------
comment: //	check that the module is known to the system (protect against directory traversal, etc)
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	show the page (or bounce to /)
comment: //----------------------------------------------------------------------------------------------
string: 'you are not authorized to edit module settings'
string: "Invalid module name."
string: 'bad'
string: 'admin/listmodules/'
string: 'modules/admin/actions/settings.page.php'
string: 'showModule'

<b>scanning file: /var/www/an2google/trunk/modules/admin/actions/setdefaultpermissions.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	this action will load all default permissions from module.xml.php files and apply them to roles
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check that the current user is an admin
comment: //----------------------------------------------------------------------------------------------
comment: //if ('admin' != $user-&gt;role) { $page-&gt;do403(); }
comment: //----------------------------------------------------------------------------------------------
comment: //	ensure default roles exists and clear existing permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	load default permissions specified by modules
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------		
comment: //	
comment: //--------------------------------------------------------------------------------------
string: 'modules/users/models/role.mod.php'
string: 'core/kmodule.class.php'
string: 'public'
string: 'student'
string: 'teacher'
string: 'admin'
string: 'banned'
string: ''
string: "created role $name... &lt;br/&gt;\n"
string: "could not create role $name: &lt;br/&gt;\n$report &lt;br/&gt;\n"
string: "role exists: $name&lt;br/&gt;\n"
string: "&lt;hr/&gt;\n"
string: "Could not load module: $modName&lt;br/&gt;\n"
string: "module: $modName &lt;br/&gt;\n"
string: "description: "
string: "&lt;br/&gt;\n"
string: "Default permissions: "
string: "&lt;br/&gt;\n"
string: ':'
string: '|'
string: '|||||||'
string: "added permission: {$parts[1]} ({$parts[0]}) &lt;br/&gt;\n"
string: "could not add default permission: $defperm&lt;br/&gt;\n"
string: "could not load role: "
string: "&lt;br/&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/admin/actions/savepage.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	save a page template and redirect to /admin/listpages/
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check POST vars and user role
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	save the changes
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	redirect back to list
comment: //----------------------------------------------------------------------------------------------
string: 'admin'
string: 'action'
string: 'Action not specified.'
string: 'savePage'
string: 'action'
string: 'Action not supported.'
string: 'module'
string: 'Module not specified.'
string: 'page'
string: 'Module not specified.'
string: 'modules/'
string: 'module'
string: '/actions/'
string: 'page'
string: 'No such template.'
string: 'Could not load template.'
string: 'template'
string: 'title'
string: 'content'
string: 'nav1'
string: 'nav2'
string: 'script'
string: 'jsinit'
string: 'banner'
string: 'head'
string: 'menu1'
string: 'menu2'
string: 'section'
string: 'subsection'
string: 'breadcrumb'
string: 'admin/listpages/'

<b>scanning file: /var/www/an2google/trunk/modules/admin/actions/saveblock.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	save submitted block, return user to to /pages/list
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check POST vars and user role
comment: //----------------------------------------------------------------------------------------------
comment: // admins only
comment: //TODO: sanitize
comment: //----------------------------------------------------------------------------------------------
comment: //	save the block
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: enable editing of theme blocks
string: 'admin'
string: 'action'
string: 'Action not specified.'
string: 'saveBlock'
string: 'action'
string: 'Action not supported.'
string: 'module'
string: 'Module not specified.'
string: 'block'
string: 'Block not specified'
string: 'blockContent'
string: 'No content.'
string: 'module'
string: 'block'
string: 'No such module.'
string: 'modules/'
string: '/views/'
string: '.block.php'
string: 'blockContent'
string: 'admin/listpages/#modList'
string: 'module'

<b>scanning file: /var/www/an2google/trunk/modules/admin/actions/renamealltables.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	upgrade script to rename database tables to lowercase (windows compatable)
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	admins only
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	do it
comment: //----------------------------------------------------------------------------------------------
comment: //$sql = "RENAME TABLE $table TO " . strtolower($table);
comment: //echo $sql . "&lt;br/&gt;\n";
comment: //$db-&gt;query($sql);
comment: //if ('tmp_' == substr($table, 0, 4)) {
comment: //	$sql = "drop table $table;";
comment: //	echo $sql . "&lt;br/&gt;\n";
comment: //}
string: 'admin'
string: '_'
string: '_'
string: '_'
string: "'$oldName'|'$table'&lt;br/&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/admin/actions/orphan2.act.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //	process second set of orphan files from other peer
comment: //-------------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	auth 
comment: //---------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	do it
comment: //---------------------------------------------------------------------------------------------
string: 'admin'
string: 'ls '
string: 'gui/orphan/*.*'
string: "\n"
string: 'data/images/'
string: '/'
string: '/'
string: '/'
string: ' =&gt; '
string: "&lt;br/&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/admin/actions/orphan.act.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //	search the sync logs for orphan images
comment: //-------------------------------------------------------------------------------------------------
comment: //if ('admin' != $user-&gt;role) { $page-&gt;do403(); }
comment: //---------------------------------------------------------------------------------------------
comment: //	make list of all sync logs
comment: //---------------------------------------------------------------------------------------------
comment: //echo "&lt;h2&gt;" . $line . "&lt;/h2&gt;\n";
comment: //-------------------------------------------------------------------------------------------------
comment: //	find image xml
comment: //-------------------------------------------------------------------------------------------------
comment: //echo "image found &lt;br/&gt;\n"; 
comment: //echo "startPos: $startPos &lt;br/&gt;\n";
comment: // end while
comment: //echo "&lt;textarea rows=10 cols=80&gt;$xml&lt;/textarea&gt;\n&lt;br/&gt;";
comment: //echo "&lt;textarea rows=10 cols=80&gt;";
comment: //print_r($data);
comment: //echo "&lt;/textarea&gt;\n&lt;br/&gt;";
comment: //echo "&lt;img src='http://awarenet.org.za/" . $data['fields']['fileName'] . "' /&gt;";
comment: //echo "wget http://awarenet.org.za/" . $data['fields']['fileName'] . "&lt;br/&gt;\n";
string: 'modules/images/models/image.mod.php'
string: "ls "
string: "data/log/*c.log.php"
string: "\n"
string: "&lt;table&gt;images"
string: "&lt;/fields&gt;"
string: "&lt;update&gt;\n"
string: "\n"
string: "&lt;/update&gt;"
string: 'images'
string: 'fields'
string: 'UID'
string: 'fields'
string: 'UID'
string: 'fields'
string: 'UID'
string: 'fields'
string: 'fileName'
string: 'fields'
string: "saved "
string: " &lt;br/&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/admin/actions/module.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	displays a form for managing a given module (install, change settings, etc)
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check permissions and module
comment: //----------------------------------------------------------------------------------------------
comment: // only admins can do this
comment: //----------------------------------------------------------------------------------------------
comment: //	show the page
comment: //----------------------------------------------------------------------------------------------
string: 'admin'
string: ''
string: 'no module specified'
string: 'no such module'
string: 'modules/admin/actions/module.page.php'
string: 'modulename'

<b>scanning file: /var/www/an2google/trunk/modules/admin/actions/mkinstall.php</b>
string: "

-- MySQL dump 10.13  Distrib 5.1.41, for debian-linux-gnu (i486)
--
-- Host: localhost    Database: awarenet
-- ------------------------------------------------------
-- Server version	5.1.41-3ubuntu12.6

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8 */;
/*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */;
/*!40103 SET TIME_ZONE='+00:00' */;
/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;

--
-- Table structure for table `Aliases_Alias`
--

USE awarenet;

/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Aliases_Alias` (
  `UID` varchar(33) DEFAULT NULL,
  `refModule` varchar(50) DEFAULT NULL,
  `refModel` varchar(50) DEFAULT NULL,
  `refUID` varchar(30) DEFAULT NULL,
  `aliaslc` varchar(255) DEFAULT NULL,
  `alias` varchar(255) DEFAULT NULL,
  `createdOn` datetime DEFAULT NULL,
  `createdBy` varchar(33) DEFAULT NULL,
  `editedOn` datetime DEFAULT NULL,
  `editedBy` varchar(33) DEFAULT NULL,
  KEY `idxAliases_AliasUID` (`UID`(10)),
  KEY `idxAliases_AliasrefModule` (`refModule`(10)),
  KEY `idxAliases_AliasrefModel` (`refModel`(10)),
  KEY `idxAliases_AliasrefUID` (`refUID`(10)),
  KEY `idxAliases_AliascreatedOn` (`createdOn`),
  KEY `idxAliases_AliascreatedBy` (`createdBy`(10)),
  KEY `idxAliases_AliaseditedOn` (`editedOn`),
  KEY `idxAliases_AliaseditedBy` (`editedBy`(10))
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `Announcements_Announcement`
--

/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Announcements_Announcement` (
  `UID` varchar(33) DEFAULT NULL,
  `refModule` varchar(50) DEFAULT NULL,
  `refModel` varchar(50) DEFAULT NULL,
  `refUID` varchar(33) DEFAULT NULL,
  `title` varchar(255) DEFAULT NULL,
  `content` text,
  `createdOn` datetime DEFAULT NULL,
  `createdBy` varchar(33) DEFAULT NULL,
  `editedOn` datetime DEFAULT NULL,
  `editedBy` varchar(33) DEFAULT NULL,
  `alias` varchar(255) DEFAULT NULL,
  KEY `idxAnnouncements_AnnouncementUID` (`UID`(10)),
  KEY `idxAnnouncements_AnnouncementrefModule` (`refModule`(10)),
  KEY `idxAnnouncements_AnnouncementrefModel` (`refModel`(10)),
  KEY `idxAnnouncements_AnnouncementrefUID` (`refUID`(10)),
  KEY `idxAnnouncements_AnnouncementcreatedOn` (`createdOn`),
  KEY `idxAnnouncements_AnnouncementcreatedBy` (`createdBy`(10)),
  KEY `idxAnnouncements_AnnouncementeditedOn` (`editedOn`),
  KEY `idxAnnouncements_AnnouncementeditedBy` (`editedBy`(10)),
  KEY `idxAnnouncements_Announcementalias` (`alias`(10))
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `Announcements_AnnouncementAnnouncements_Announcement`
--

/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Announcements_AnnouncementAnnouncements_Announcement` (
  `UID` varchar(30) DEFAULT NULL,
  `refModule` varchar(50) DEFAULT NULL,
  `refModel` varchar(50) DEFAULT NULL,
  `refUID` varchar(30) DEFAULT NULL,
  `title` varchar(255) DEFAULT NULL,
  `content` text,
  `createdOn` datetime DEFAULT NULL,
  `createdBy` varchar(30) DEFAULT NULL,
  `editedOn` datetime DEFAULT NULL,
  `editedBy` datetime DEFAULT NULL,
  `alias` varchar(255) DEFAULT NULL
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `Calendar_Entry`
--


/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Calendar_Entry` (
  `UID` varchar(33) DEFAULT NULL,
  `title` varchar(255) DEFAULT NULL,
  `category` varchar(100) DEFAULT NULL,
  `venue` varchar(255) DEFAULT NULL,
  `content` text,
  `year` varchar(10) DEFAULT NULL,
  `month` varchar(10) DEFAULT NULL,
  `day` varchar(10) DEFAULT NULL,
  `eventStart` varchar(50) DEFAULT NULL,
  `eventEnd` varchar(50) DEFAULT NULL,
  `published` varchar(30) DEFAULT NULL,
  `createdOn` datetime DEFAULT NULL,
  `createdBy` varchar(33) DEFAULT NULL,
  `editedOn` datetime DEFAULT NULL,
  `editedBy` varchar(33) DEFAULT NULL,
  `alias` varchar(255) DEFAULT NULL,
  KEY `idxCalendar_EntryUID` (`UID`(10)),
  KEY `idxCalendar_EntrycreatedOn` (`createdOn`),
  KEY `idxCalendar_EntrycreatedBy` (`createdBy`(10)),
  KEY `idxCalendar_EntryeditedOn` (`editedOn`),
  KEY `idxCalendar_EntryeditedBy` (`editedBy`(10)),
  KEY `idxCalendar_Entryalias` (`alias`(10))
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `Chat_Discussion`
--


/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Chat_Discussion` (
  `UID` varchar(33) DEFAULT NULL,
  `user` varchar(33) DEFAULT NULL,
  `queue` mediumtext,
  `createdOn` datetime DEFAULT NULL,
  `createdBy` varchar(33) DEFAULT NULL,
  `editedOn` datetime DEFAULT NULL,
  `editedBy` varchar(33) DEFAULT NULL
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `Comments_Comment`
--


/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Comments_Comment` (
  `UID` varchar(33) DEFAULT NULL,
  `refModule` varchar(50) DEFAULT NULL,
  `refModel` varchar(50) DEFAULT NULL,
  `refUID` varchar(33) DEFAULT NULL,
  `comment` text,
  `createdOn` datetime DEFAULT NULL,
  `createdBy` varchar(33) DEFAULT NULL,
  `editedOn` datetime DEFAULT NULL,
  `editedBy` varchar(33) DEFAULT NULL,
  KEY `idxComments_CommentUID` (`UID`(10)),
  KEY `idxComments_CommentrefModule` (`refModule`(10)),
  KEY `idxComments_CommentrefModel` (`refModel`(10)),
  KEY `idxComments_CommentrefUID` (`refUID`(10)),
  KEY `idxComments_CommentcreatedOn` (`createdOn`),
  KEY `idxComments_CommentcreatedBy` (`createdBy`(10)),
  KEY `idxComments_CommenteditedOn` (`editedOn`),
  KEY `idxComments_CommenteditedBy` (`editedBy`(10))
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `Files_File`
--


/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Files_File` (
  `UID` varchar(33) DEFAULT NULL,
  `refModule` varchar(50) DEFAULT NULL,
  `refModel` varchar(50) DEFAULT NULL,
  `refUID` varchar(33) DEFAULT NULL,
  `title` varchar(255) DEFAULT NULL,
  `licence` varchar(100) DEFAULT NULL,
  `attribName` varchar(255) DEFAULT NULL,
  `attribUrl` varchar(255) DEFAULT NULL,
  `fileName` varchar(255) DEFAULT NULL,
  `format` varchar(255) DEFAULT NULL,
  `transforms` text,
  `caption` text,
  `weight` text,
  `createdOn` datetime DEFAULT NULL,
  `createdBy` varchar(33) DEFAULT NULL,
  `editedOn` datetime DEFAULT NULL,
  `editedBy` varchar(33) DEFAULT NULL,
  `alias` varchar(255) DEFAULT NULL,
  KEY `idxFiles_FileUID` (`UID`(10)),
  KEY `idxFiles_FilerefModule` (`refModule`(10)),
  KEY `idxFiles_FilerefModel` (`refModel`(10)),
  KEY `idxFiles_FilerefUID` (`refUID`(10)),
  KEY `idxFiles_FilecreatedOn` (`createdOn`),
  KEY `idxFiles_FilecreatedBy` (`createdBy`(10)),
  KEY `idxFiles_FileeditedOn` (`editedOn`),
  KEY `idxFiles_FileeditedBy` (`editedBy`(10)),
  KEY `idxFiles_Filealias` (`alias`(10))
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `Files_Folder`
--


/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Files_Folder` (
  `UID` varchar(33) DEFAULT NULL,
  `parent` text,
  `title` varchar(255) DEFAULT NULL,
  `children` varchar(255) DEFAULT NULL,
  `createdOn` datetime DEFAULT NULL,
  `createdBy` varchar(33) DEFAULT NULL,
  `editedOn` datetime DEFAULT NULL,
  `editedBy` varchar(33) DEFAULT NULL,
  `alias` varchar(255) DEFAULT NULL,
  KEY `idxFiles_FolderUID` (`UID`(10)),
  KEY `idxFiles_Folderparent` (`parent`(10)),
  KEY `idxFiles_FoldercreatedOn` (`createdOn`),
  KEY `idxFiles_FoldercreatedBy` (`createdBy`(10)),
  KEY `idxFiles_FoldereditedOn` (`editedOn`),
  KEY `idxFiles_FoldereditedBy` (`editedBy`(10)),
  KEY `idxFiles_Folderalias` (`alias`(10))
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `Forums_Board`
--


/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Forums_Board` (
  `UID` varchar(33) DEFAULT NULL,
  `school` varchar(33) DEFAULT NULL,
  `title` varchar(255) DEFAULT NULL,
  `description` text,
  `weight` varchar(10) DEFAULT NULL,
  `threads` varchar(30) DEFAULT NULL,
  `replies` varchar(30) DEFAULT NULL,
  `createdOn` datetime DEFAULT NULL,
  `createdBy` varchar(33) DEFAULT NULL,
  `editedOn` datetime DEFAULT NULL,
  `editedBy` varchar(33) DEFAULT NULL,
  `alias` varchar(255) DEFAULT NULL,
  KEY `idxForums_BoardUID` (`UID`(10)),
  KEY `idxForums_Boardschool` (`school`(10)),
  KEY `idxForums_BoardcreatedOn` (`createdOn`),
  KEY `idxForums_BoardcreatedBy` (`createdBy`(10)),
  KEY `idxForums_BoardeditedOn` (`editedOn`),
  KEY `idxForums_BoardeditedBy` (`editedBy`(10)),
  KEY `idxForums_Boardalias` (`alias`(10))
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `Forums_Reply`
--


/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Forums_Reply` (
  `UID` varchar(33) DEFAULT NULL,
  `forum` varchar(33) DEFAULT NULL,
  `thread` varchar(33) DEFAULT NULL,
  `content` text,
  `createdOn` datetime DEFAULT NULL,
  `createdBy` varchar(33) DEFAULT NULL,
  `editedOn` datetime DEFAULT NULL,
  `editedBy` varchar(33) DEFAULT NULL,
  KEY `idxForums_ReplyUID` (`UID`(10)),
  KEY `idxForums_Replyforum` (`forum`(10)),
  KEY `idxForums_Replythread` (`thread`(10)),
  KEY `idxForums_ReplycreatedOn` (`createdOn`),
  KEY `idxForums_ReplycreatedBy` (`createdBy`(10)),
  KEY `idxForums_ReplyeditedOn` (`editedOn`),
  KEY `idxForums_ReplyeditedBy` (`editedBy`(10))
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `Forums_Thread`
--


/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Forums_Thread` (
  `UID` varchar(33) DEFAULT NULL,
  `board` text,
  `title` varchar(255) DEFAULT NULL,
  `content` text,
  `sticky` varchar(10) DEFAULT NULL,
  `replies` varchar(10) DEFAULT NULL,
  `updated` text,
  `createdOn` datetime DEFAULT NULL,
  `createdBy` varchar(33) DEFAULT NULL,
  `editedOn` datetime DEFAULT NULL,
  `editedBy` varchar(33) DEFAULT NULL,
  `alias` varchar(255) DEFAULT NULL,
  KEY `idxForums_ThreadUID` (`UID`(10)),
  KEY `idxForums_Threadboard` (`board`(10)),
  KEY `idxForums_Threadsticky` (`sticky`),
  KEY `idxForums_Threadupdated` (`updated`(10)),
  KEY `idxForums_ThreadcreatedOn` (`createdOn`),
  KEY `idxForums_ThreadcreatedBy` (`createdBy`(10)),
  KEY `idxForums_ThreadeditedOn` (`editedOn`),
  KEY `idxForums_ThreadeditedBy` (`editedBy`(10)),
  KEY `idxForums_Threadalias` (`alias`(10))
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `Forums_ThreadForums_Thread`
--


--
-- Table structure for table `Gallery_Gallery`
--


/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Gallery_Gallery` (
  `UID` varchar(33) DEFAULT NULL,
  `parent` varchar(33) DEFAULT NULL,
  `title` varchar(255) DEFAULT NULL,
  `description` mediumtext,
  `imagecount` bigint(20) DEFAULT NULL,
  `createdBy` varchar(33) DEFAULT NULL,
  `createdOn` datetime DEFAULT NULL,
  `editedOn` datetime DEFAULT NULL,
  `editedBy` varchar(33) DEFAULT NULL,
  `alias` varchar(100) DEFAULT NULL
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `Groups_Group`
--


/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Groups_Group` (
  `UID` varchar(33) DEFAULT NULL,
  `school` varchar(33) DEFAULT NULL,
  `name` varchar(255) DEFAULT NULL,
  `type` varchar(30) DEFAULT NULL,
  `description` text,
  `createdOn` datetime DEFAULT NULL,
  `createdBy` varchar(33) DEFAULT NULL,
  `editedOn` datetime DEFAULT NULL,
  `editedBy` varchar(33) DEFAULT NULL,
  `alias` varchar(255) DEFAULT NULL,
  KEY `idxGroups_GroupUID` (`UID`(10)),
  KEY `idxGroups_GroupcreatedOn` (`createdOn`),
  KEY `idxGroups_GroupcreatedBy` (`createdBy`(10)),
  KEY `idxGroups_GroupeditedOn` (`editedOn`),
  KEY `idxGroups_GroupeditedBy` (`editedBy`(10)),
  KEY `idxGroups_Groupalias` (`alias`(10))
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `Groups_Membership`
--


/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Groups_Membership` (
  `UID` varchar(30) DEFAULT NULL,
  `userUID` varchar(33) DEFAULT NULL,
  `groupUID` varchar(33) DEFAULT NULL,
  `position` varchar(30) DEFAULT NULL,
  `admin` varchar(10) DEFAULT NULL,
  `joined` datetime DEFAULT NULL,
  `createdOn` datetime DEFAULT NULL,
  `createdBy` varchar(33) DEFAULT NULL,
  `editedOn` datetime DEFAULT NULL,
  `editedBy` varchar(33) DEFAULT NULL,
  KEY `idxGroups_MembershipUID` (`UID`(10)),
  KEY `idxGroups_MembershipuserUID` (`userUID`(10)),
  KEY `idxGroups_MembershipgroupUID` (`groupUID`(10)),
  KEY `idxGroups_MembershipcreatedOn` (`createdOn`),
  KEY `idxGroups_MembershipcreatedBy` (`createdBy`(10)),
  KEY `idxGroups_MembershipeditedOn` (`editedOn`),
  KEY `idxGroups_MembershipeditedBy` (`editedBy`(10))
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `Home_Static`
--


/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Home_Static` (
  `UID` varchar(33) DEFAULT NULL,
  `title` varchar(255) DEFAULT NULL,
  `template` varchar(30) DEFAULT NULL,
  `content` text,
  `nav1` text,
  `nav2` text,
  `script` text,
  `jsinit` text,
  `banner` varchar(255) DEFAULT NULL,
  `menu1` text,
  `menu2` text,
  `breadcrumb` text,
  `section` varchar(255) DEFAULT NULL,
  `subsection` varchar(255) DEFAULT NULL,
  `createdOn` datetime DEFAULT NULL,
  `createdBy` varchar(33) DEFAULT NULL,
  `editedOn` datetime DEFAULT NULL,
  `editedBy` varchar(33) DEFAULT NULL,
  `alias` varchar(255) DEFAULT NULL,
  KEY `idxHome_StaticUID` (`UID`(10)),
  KEY `idxHome_StaticcreatedOn` (`createdOn`),
  KEY `idxHome_StaticcreatedBy` (`createdBy`(10)),
  KEY `idxHome_StaticeditedOn` (`editedOn`),
  KEY `idxHome_StaticeditedBy` (`editedBy`(10)),
  KEY `idxHome_Staticalias` (`alias`(10))
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `Images_Image`
--


/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Images_Image` (
  `UID` varchar(33) DEFAULT NULL,
  `refModule` varchar(50) DEFAULT NULL,
  `refModel` varchar(50) DEFAULT NULL,
  `refUID` varchar(33) DEFAULT NULL,
  `title` varchar(255) DEFAULT NULL,
  `licence` varchar(30) DEFAULT NULL,
  `attribName` varchar(255) DEFAULT NULL,
  `attribUrl` varchar(255) DEFAULT NULL,
  `fileName` varchar(255) DEFAULT NULL,
  `format` varchar(30) DEFAULT NULL,
  `transforms` text,
  `caption` text,
  `category` varchar(100) DEFAULT NULL,
  `weight` bigint(20) DEFAULT NULL,
  `createdOn` datetime DEFAULT NULL,
  `createdBy` varchar(33) DEFAULT NULL,
  `editedOn` datetime DEFAULT NULL,
  `editedBy` varchar(33) DEFAULT NULL,
  `alias` varchar(255) DEFAULT NULL,
  KEY `idxImages_ImageUID` (`UID`(10)),
  KEY `idxImages_ImagerefModule` (`refModule`(10)),
  KEY `idxImages_ImagerefModel` (`refModel`(10)),
  KEY `idxImages_ImagerefUID` (`refUID`(10)),
  KEY `idxImages_ImagecreatedOn` (`createdOn`),
  KEY `idxImages_ImagecreatedBy` (`createdBy`(10)),
  KEY `idxImages_ImageeditedOn` (`editedOn`),
  KEY `idxImages_ImageeditedBy` (`editedBy`(10)),
  KEY `idxImages_Imagealias` (`alias`(10))
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `Images_ImageImages_Image`
--


/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Images_ImageImages_Image` (
  `UID` varchar(33) DEFAULT NULL,
  `refModule` varchar(50) DEFAULT NULL,
  `refModel` varchar(50) DEFAULT NULL,
  `refUID` varchar(33) DEFAULT NULL,
  `title` varchar(255) DEFAULT NULL,
  `licence` varchar(30) DEFAULT NULL,
  `attribName` varchar(255) DEFAULT NULL,
  `attribUrl` varchar(255) DEFAULT NULL,
  `fileName` varchar(255) DEFAULT NULL,
  `format` varchar(30) DEFAULT NULL,
  `transforms` text,
  `caption` text,
  `category` varchar(100) DEFAULT NULL,
  `weight` text,
  `createdOn` datetime DEFAULT NULL,
  `createdBy` varchar(33) DEFAULT NULL,
  `editedOn` datetime DEFAULT NULL,
  `editedBy` varchar(33) DEFAULT NULL,
  `alias` varchar(255) DEFAULT NULL
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `Messages_Message`
--


/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Messages_Message` (
  `UID` varchar(33) DEFAULT NULL,
  `owner` varchar(33) DEFAULT NULL,
  `folder` varchar(33) DEFAULT NULL,
  `fromUID` varchar(33) DEFAULT NULL,
  `toUID` varchar(33) DEFAULT NULL,
  `cc` text,
  `title` varchar(255) DEFAULT NULL,
  `re` varchar(33) DEFAULT NULL,
  `content` text,
  `status` varchar(10) DEFAULT NULL,
  `createdOn` datetime DEFAULT NULL,
  `createdBy` varchar(33) DEFAULT NULL,
  `editedOn` datetime DEFAULT NULL,
  `editedBy` varchar(33) DEFAULT NULL,
  KEY `idxMessages_MessageUID` (`UID`(10)),
  KEY `idxMessages_MessagecreatedOn` (`createdOn`),
  KEY `idxMessages_MessagecreatedBy` (`createdBy`(10)),
  KEY `idxMessages_MessageeditedOn` (`editedOn`),
  KEY `idxMessages_MessageeditedBy` (`editedBy`(10))
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `Moblog_Post`
--


/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Moblog_Post` (
  `UID` varchar(33) DEFAULT NULL,
  `school` varchar(33) DEFAULT NULL,
  `grade` varchar(30) DEFAULT NULL,
  `title` varchar(255) DEFAULT NULL,
  `content` mediumtext,
  `published` varchar(3) DEFAULT NULL,
  `viewcount` bigint(20) DEFAULT NULL,
  `createdOn` datetime DEFAULT NULL,
  `createdBy` varchar(33) DEFAULT NULL,
  `editedOn` datetime DEFAULT NULL,
  `editedBy` varchar(33) DEFAULT NULL,
  `alias` varchar(255) DEFAULT NULL,
  KEY `idxMoblog_PostUID` (`UID`(10)),
  KEY `idxMoblog_PostcreatedOn` (`createdOn`),
  KEY `idxMoblog_PostcreatedBy` (`createdBy`(10)),
  KEY `idxMoblog_PosteditedOn` (`editedOn`),
  KEY `idxMoblog_PosteditedBy` (`editedBy`(10)),
  KEY `idxMoblog_Postalias` (`alias`(10))
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `Moblog_PostMoblog_Post`
--


/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Moblog_PostMoblog_Post` (
  `UID` varchar(33) DEFAULT NULL,
  `school` varchar(33) DEFAULT NULL,
  `grade` varchar(30) DEFAULT NULL,
  `title` varchar(255) DEFAULT NULL,
  `content` mediumtext,
  `published` varchar(3) DEFAULT NULL,
  `viewcount` bigint(20) DEFAULT NULL,
  `createdOn` datetime DEFAULT NULL,
  `createdBy` varchar(33) DEFAULT NULL,
  `editedOn` datetime DEFAULT NULL,
  `editedBy` varchar(33) DEFAULT NULL,
  `alias` varchar(255) DEFAULT NULL
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `Notifications_Notification`
--


/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Notifications_Notification` (
  `UID` varchar(33) DEFAULT NULL,
  `refModule` text,
  `refModel` text,
  `refUID` varchar(33) DEFAULT NULL,
  `title` varchar(255) DEFAULT NULL,
  `content` mediumtext,
  `refUrl` varchar(255) DEFAULT NULL,
  `createdOn` datetime DEFAULT NULL,
  `createdBy` varchar(33) DEFAULT NULL,
  `editedOn` datetime DEFAULT NULL,
  `editedBy` varchar(33) DEFAULT NULL,
  KEY `idxNotifications_NotificationUID` (`UID`(10)),
  KEY `idxNotifications_NotificationrefModule` (`refModule`(10)),
  KEY `idxNotifications_NotificationrefModel` (`refModel`(10)),
  KEY `idxNotifications_NotificationrefUID` (`refUID`(10)),
  KEY `idxNotifications_NotificationcreatedOn` (`createdOn`),
  KEY `idxNotifications_NotificationcreatedBy` (`createdBy`(10)),
  KEY `idxNotifications_NotificationeditedOn` (`editedOn`),
  KEY `idxNotifications_NotificationeditedBy` (`editedBy`(10))
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `Notifications_UserIndex`
--


/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Notifications_UserIndex` (
  `UID` varchar(33) DEFAULT NULL,
  `userUID` varchar(33) DEFAULT NULL,
  `notificationUID` varchar(33) DEFAULT NULL,
  `status` varchar(20) DEFAULT NULL,
  `createdOn` datetime DEFAULT NULL,
  `createdBy` varchar(33) DEFAULT NULL,
  `editedOn` datetime DEFAULT NULL,
  `editedBy` varchar(33) DEFAULT NULL,
  KEY `idxNotifications_UserIndexUID` (`UID`(10)),
  KEY `idxNotifications_UserIndexuserUID` (`userUID`(10)),
  KEY `idxNotifications_UserIndexnotificationUID` (`notificationUID`(10)),
  KEY `idxNotifications_UserIndexcreatedOn` (`createdOn`),
  KEY `idxNotifications_UserIndexcreatedBy` (`createdBy`(10)),
  KEY `idxNotifications_UserIndexeditedOn` (`editedOn`),
  KEY `idxNotifications_UserIndexeditedBy` (`editedBy`(10))
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `Projects_Membership`
--


/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Projects_Membership` (
  `UID` varchar(33) DEFAULT NULL,
  `projectUID` varchar(33) DEFAULT NULL,
  `userUID` varchar(33) DEFAULT NULL,
  `role` varchar(10) DEFAULT NULL,
  `joined` datetime DEFAULT NULL,
  `createdOn` datetime DEFAULT NULL,
  `createdBy` varchar(33) DEFAULT NULL,
  `editedOn` datetime DEFAULT NULL,
  `editedBy` varchar(33) DEFAULT NULL,
  KEY `idxProjects_MembershipUID` (`UID`(10)),
  KEY `idxProjects_MembershipprojectUID` (`projectUID`(10)),
  KEY `idxProjects_MembershipuserUID` (`userUID`(10)),
  KEY `idxProjects_MembershipcreatedOn` (`createdOn`),
  KEY `idxProjects_MembershipcreatedBy` (`createdBy`(10)),
  KEY `idxProjects_MembershipeditedOn` (`editedOn`),
  KEY `idxProjects_MembershipeditedBy` (`editedBy`(10))
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `Projects_Project`
--


/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Projects_Project` (
  `UID` varchar(33) DEFAULT NULL,
  `title` varchar(255) DEFAULT NULL,
  `abstract` text,
  `content` text,
  `status` varchar(10) DEFAULT NULL,
  `finishedOn` datetime DEFAULT NULL,
  `createdOn` datetime DEFAULT NULL,
  `createdBy` varchar(33) DEFAULT NULL,
  `editedOn` datetime DEFAULT NULL,
  `editedBy` varchar(33) DEFAULT NULL,
  `alias` varchar(255) DEFAULT NULL,
  KEY `idxProjects_ProjectUID` (`UID`(10)),
  KEY `idxProjects_ProjectcreatedOn` (`createdOn`),
  KEY `idxProjects_ProjectcreatedBy` (`createdBy`(10)),
  KEY `idxProjects_ProjecteditedOn` (`editedOn`),
  KEY `idxProjects_ProjecteditedBy` (`editedBy`(10)),
  KEY `idxProjects_Projectalias` (`alias`(10))
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `Projects_Revision`
--


/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Projects_Revision` (
  `UID` varchar(33) DEFAULT NULL,
  `projectUID` varchar(33) DEFAULT NULL,
  `title` varchar(255) DEFAULT NULL,
  `abstract` text,
  `content` text,
  `reason` varchar(255) DEFAULT NULL,
  `createdOn` datetime DEFAULT NULL,
  `createdBy` varchar(33) DEFAULT NULL,
  `editedOn` datetime DEFAULT NULL,
  `editedBy` varchar(33) DEFAULT NULL,
  KEY `idxProjects_RevisionUID` (`UID`(10)),
  KEY `idxProjects_RevisionprojectUID` (`projectUID`(10)),
  KEY `idxProjects_RevisioncreatedOn` (`createdOn`),
  KEY `idxProjects_RevisioncreatedBy` (`createdBy`(10)),
  KEY `idxProjects_RevisioneditedOn` (`editedOn`),
  KEY `idxProjects_RevisioneditedBy` (`editedBy`(10))
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `Revisions_DeletedItem`
--


/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Revisions_DeletedItem` (
  `UID` varchar(33) DEFAULT NULL,
  `refModule` varchar(20) DEFAULT NULL,
  `refModel` varchar(50) DEFAULT NULL,
  `refUID` varchar(33) DEFAULT NULL,
  `timestamp` varchar(20) DEFAULT NULL,
  `createdOn` datetime DEFAULT NULL,
  `createdBy` varchar(33) DEFAULT NULL,
  `editedOn` datetime DEFAULT NULL,
  `editedBy` varchar(33) DEFAULT NULL
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `Revisions_Migrate`
--


/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Revisions_Migrate` (
  `UID` varchar(33) DEFAULT NULL,
  `refModule` varchar(20) DEFAULT NULL,
  `refModel` varchar(50) DEFAULT NULL,
  `fromUrl` varchar(255) DEFAULT NULL,
  `toUrl` varchar(255) DEFAULT NULL,
  `hitCount` bigint(20) DEFAULT NULL,
  `createdOn` datetime DEFAULT NULL,
  `createdBy` varchar(33) DEFAULT NULL,
  `editedOn` datetime DEFAULT NULL,
  `editedBy` varchar(33) DEFAULT NULL
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `Revisions_Revision`
--


/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Revisions_Revision` (
  `UID` varchar(33) DEFAULT NULL,
  `refModule` varchar(20) DEFAULT NULL,
  `refModel` varchar(100) DEFAULT NULL,
  `refUID` varchar(33) DEFAULT NULL,
  `data` mediumtext,
  `changedOn` datetime DEFAULT NULL,
  `changedBy` varchar(33) DEFAULT NULL,
  `createdOn` datetime DEFAULT NULL,
  `createdBy` varchar(33) DEFAULT NULL,
  `editedOn` datetime DEFAULT NULL,
  `editedBy` varchar(33) DEFAULT NULL
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `Schools_School`
--


/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Schools_School` (
  `UID` varchar(33) DEFAULT NULL,
  `name` varchar(255) DEFAULT NULL,
  `description` mediumtext,
  `geocode` varchar(255) DEFAULT NULL,
  `region` varchar(255) DEFAULT NULL,
  `country` varchar(255) DEFAULT NULL,
  `createdOn` datetime DEFAULT NULL,
  `createdBy` varchar(33) DEFAULT NULL,
  `editedOn` datetime DEFAULT NULL,
  `editedBy` varchar(33) DEFAULT NULL,
  `alias` varchar(255) DEFAULT NULL,
  KEY `idxSchools_SchoolUID` (`UID`(10)),
  KEY `idxSchools_SchoolcreatedOn` (`createdOn`),
  KEY `idxSchools_SchoolcreatedBy` (`createdBy`(10)),
  KEY `idxSchools_SchooleditedOn` (`editedOn`),
  KEY `idxSchools_SchooleditedBy` (`editedBy`(10)),
  KEY `idxSchools_Schoolalias` (`alias`(10))
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `Schools_SchoolSchools_School`
--


/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Schools_SchoolSchools_School` (
  `UID` varchar(33) DEFAULT NULL,
  `name` varchar(255) DEFAULT NULL,
  `description` mediumtext,
  `geocode` varchar(255) DEFAULT NULL,
  `region` varchar(255) DEFAULT NULL,
  `country` varchar(255) DEFAULT NULL,
  `createdOn` datetime DEFAULT NULL,
  `createdBy` varchar(30) DEFAULT NULL,
  `editedOn` datetime DEFAULT NULL,
  `editedBy` varchar(33) DEFAULT NULL,
  `alias` varchar(255) DEFAULT NULL
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `Sync_Download`
--


/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Sync_Download` (
  `UID` varchar(33) DEFAULT NULL,
  `filename` varchar(255) DEFAULT NULL,
  `hash` varchar(255) DEFAULT NULL,
  `status` varchar(30) DEFAULT NULL,
  `timestamp` varchar(33) DEFAULT NULL,
  `createdOn` datetime DEFAULT NULL,
  `createdBy` varchar(33) DEFAULT NULL,
  `editedOn` datetime DEFAULT NULL,
  `editedBy` varchar(33) DEFAULT NULL,
  KEY `idxSync_DownloadUID` (`UID`(10)),
  KEY `idxSync_DownloadcreatedOn` (`createdOn`),
  KEY `idxSync_DownloadcreatedBy` (`createdBy`(10)),
  KEY `idxSync_DownloadeditedOn` (`editedOn`),
  KEY `idxSync_DownloadeditedBy` (`editedBy`(10))
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `Sync_Message`
--


/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Sync_Message` (
  `UID` varchar(33) DEFAULT NULL,
  `source` varchar(33) DEFAULT NULL,
  `type` varchar(50) DEFAULT NULL,
  `data` mediumtext,
  `peer` varchar(33) DEFAULT NULL,
  `status` varchar(33) DEFAULT NULL,
  `received` varchar(33) DEFAULT NULL,
  `timestamp` varchar(20) DEFAULT NULL,
  `createdOn` datetime DEFAULT NULL,
  `createdBy` varchar(33) DEFAULT NULL,
  `editedOn` datetime DEFAULT NULL,
  `editedBy` varchar(33) DEFAULT NULL
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `Sync_Notice`
--


/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Sync_Notice` (
  `UID` varchar(33) DEFAULT NULL,
  `source` varchar(33) DEFAULT NULL,
  `type` varchar(50) DEFAULT NULL,
  `ndata` text,
  `peer` varchar(33) DEFAULT NULL,
  `status` varchar(30) DEFAULT NULL,
  `received` varchar(30) DEFAULT NULL,
  `timestamp` varchar(30) DEFAULT NULL,
  `createdOn` datetime DEFAULT NULL,
  `createdBy` varchar(33) DEFAULT NULL,
  `editedOn` datetime DEFAULT NULL,
  `editedBy` varchar(33) DEFAULT NULL,
  KEY `idxSync_NoticeUID` (`UID`(10)),
  KEY `idxSync_Noticesource` (`source`(10)),
  KEY `idxSync_NoticecreatedOn` (`createdOn`),
  KEY `idxSync_NoticecreatedBy` (`createdBy`(10)),
  KEY `idxSync_NoticeeditedOn` (`editedOn`),
  KEY `idxSync_NoticeeditedBy` (`editedBy`(10))
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `Sync_Server`
--


/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Sync_Server` (
  `UID` varchar(33) DEFAULT NULL,
  `servername` varchar(255) DEFAULT NULL,
  `serverurl` varchar(100) DEFAULT NULL,
  `password` varchar(50) DEFAULT NULL,
  `direction` varchar(30) DEFAULT NULL,
  `active` varchar(10) DEFAULT NULL,
  `createdOn` datetime DEFAULT NULL,
  `createdBy` varchar(33) DEFAULT NULL,
  `editedOn` datetime DEFAULT NULL,
  `editedBy` varchar(33) DEFAULT NULL,
  KEY `idxSync_ServerUID` (`UID`(10)),
  KEY `idxSync_ServercreatedOn` (`createdOn`),
  KEY `idxSync_ServercreatedBy` (`createdBy`(10)),
  KEY `idxSync_ServereditedOn` (`editedOn`),
  KEY `idxSync_ServereditedBy` (`editedBy`(10))
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `Users_Friendship`
--


/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Users_Friendship` (
  `UID` varchar(33) DEFAULT NULL,
  `userUID` varchar(33) DEFAULT NULL,
  `friendUID` varchar(33) DEFAULT NULL,
  `relationship` varchar(100) DEFAULT NULL,
  `status` varchar(255) DEFAULT NULL,
  `createdOn` datetime DEFAULT NULL,
  `createdBy` varchar(33) DEFAULT NULL,
  `editedOn` datetime DEFAULT NULL,
  `editedBy` varchar(33) DEFAULT NULL,
  KEY `idxUsers_FriendshipUID` (`UID`(10)),
  KEY `idxUsers_FriendshipcreatedOn` (`createdOn`),
  KEY `idxUsers_FriendshipcreatedBy` (`createdBy`(10)),
  KEY `idxUsers_FriendshipeditedOn` (`editedOn`),
  KEY `idxUsers_FriendshipeditedBy` (`editedBy`(10))
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `Users_FriendshipUsers_Friendship`
--


/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Users_FriendshipUsers_Friendship` (
  `UID` varchar(33) DEFAULT NULL,
  `userUID` varchar(33) DEFAULT NULL,
  `friendUID` varchar(33) DEFAULT NULL,
  `relationship` varchar(100) DEFAULT NULL,
  `status` varchar(255) DEFAULT NULL,
  `createdOn` datetime DEFAULT NULL,
  `createdBy` varchar(33) DEFAULT NULL,
  `editedOn` datetime DEFAULT NULL,
  `editedBy` varchar(33) DEFAULT NULL
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `Users_Notification`
--


/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Users_Notification` (
  `UID` varchar(33) DEFAULT NULL,
  `refModule` varchar(20) DEFAULT NULL,
  `refModel` varchar(50) DEFAULT NULL,
  `user` varchar(33) DEFAULT NULL,
  `notices` mediumtext,
  `editedOn` datetime DEFAULT NULL,
  `editedBy` varchar(33) DEFAULT NULL,
  `createdOn` datetime DEFAULT NULL,
  `createdBy` varchar(33) DEFAULT NULL
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `Users_Role`
--


/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Users_Role` (
  `UID` varchar(33) DEFAULT NULL,
  `name` varchar(255) DEFAULT NULL,
  `description` mediumtext,
  `permissions` mediumtext,
  `createdOn` datetime DEFAULT NULL,
  `createdBy` varchar(33) DEFAULT NULL,
  `editedOn` datetime DEFAULT NULL,
  `editedBy` varchar(33) DEFAULT NULL,
  `alias` varchar(255) DEFAULT NULL,
  KEY `idxUsers_RoleUID` (`UID`(10)),
  KEY `idxUsers_RolecreatedOn` (`createdOn`),
  KEY `idxUsers_RolecreatedBy` (`createdBy`(10)),
  KEY `idxUsers_RoleeditedOn` (`editedOn`),
  KEY `idxUsers_RoleeditedBy` (`editedBy`(10)),
  KEY `idxUsers_Rolealias` (`alias`(10))
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `Users_RoleUsers_Role`
--


/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Users_RoleUsers_Role` (
  `UID` varchar(33) DEFAULT NULL,
  `name` varchar(255) DEFAULT NULL,
  `description` mediumtext,
  `permissions` mediumtext,
  `createdOn` datetime DEFAULT NULL,
  `createdBy` varchar(33) DEFAULT NULL,
  `editedOn` datetime DEFAULT NULL,
  `editedBy` varchar(33) DEFAULT NULL,
  `alias` varchar(255) DEFAULT NULL
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `Users_Session`
--


/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Users_Session` (
  `UID` varchar(33) DEFAULT NULL,
  `userUID` varchar(255) DEFAULT NULL,
  `serverurl` varchar(255) DEFAULT NULL,
  `logintime` datetime DEFAULT NULL,
  `lastseen` varchar(20) DEFAULT NULL,
  `editedOn` datetime DEFAULT NULL,
  `editedBy` varchar(33) DEFAULT NULL,
  `createdOn` datetime DEFAULT NULL,
  `createdBy` varchar(33) DEFAULT NULL
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `Users_User`
--


/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Users_User` (
  `UID` varchar(33) DEFAULT NULL,
  `role` varchar(33) DEFAULT NULL,
  `school` varchar(33) DEFAULT NULL,
  `grade` varchar(30) DEFAULT NULL,
  `firstname` varchar(100) DEFAULT NULL,
  `surname` varchar(100) DEFAULT NULL,
  `username` varchar(50) DEFAULT NULL,
  `password` varchar(50) DEFAULT NULL,
  `lang` varchar(30) DEFAULT NULL,
  `profile` text,
  `permissions` text,
  `lastOnline` text,
  `createdOn` datetime DEFAULT NULL,
  `createdBy` varchar(33) DEFAULT NULL,
  `editedOn` datetime DEFAULT NULL,
  `editedBy` varchar(33) DEFAULT NULL,
  `alias` varchar(255) DEFAULT NULL,
  KEY `idxUsers_UserUID` (`UID`(10)),
  KEY `idxUsers_Userusername` (`username`(10)),
  KEY `idxUsers_UsercreatedOn` (`createdOn`),
  KEY `idxUsers_UsercreatedBy` (`createdBy`(10)),
  KEY `idxUsers_UsereditedOn` (`editedOn`),
  KEY `idxUsers_UsereditedBy` (`editedBy`(10)),
  KEY `idxUsers_Useralias` (`alias`(10))
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `Wiki_Article`
--


/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Wiki_Article` (
  `UID` varchar(33) DEFAULT NULL,
  `title` varchar(255) DEFAULT NULL,
  `content` text,
  `nav` text,
  `locked` varchar(30) DEFAULT NULL,
  `namespace` varchar(33) DEFAULT NULL,
  `createdOn` datetime DEFAULT NULL,
  `createdBy` varchar(33) DEFAULT NULL,
  `editedOn` datetime DEFAULT NULL,
  `editedBy` varchar(33) DEFAULT NULL,
  `alias` varchar(255) DEFAULT NULL,
  KEY `idxWiki_ArticleUID` (`UID`(10)),
  KEY `idxWiki_ArticlecreatedOn` (`createdOn`),
  KEY `idxWiki_ArticlecreatedBy` (`createdBy`(10)),
  KEY `idxWiki_ArticleeditedOn` (`editedOn`),
  KEY `idxWiki_ArticleeditedBy` (`editedBy`(10)),
  KEY `idxWiki_Articlealias` (`alias`(10))
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `Wiki_ArticleWiki_Article`
--

--
-- Table structure for table `Wiki_Category`
--


/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Wiki_Category` (
  `UID` varchar(33) DEFAULT NULL,
  `title` varchar(255) DEFAULT NULL,
  `description` mediumtext,
  `parent` varchar(33) DEFAULT NULL,
  `createdOn` datetime DEFAULT NULL,
  `createdBy` varchar(33) DEFAULT NULL,
  `editedOn` datetime DEFAULT NULL,
  `editedBy` varchar(33) DEFAULT NULL,
  `alias` text,
  KEY `idxWiki_CategoryUID` (`UID`(10)),
  KEY `idxWiki_Categorytitle` (`title`(10)),
  KEY `idxWiki_Categoryparent` (`parent`(10)),
  KEY `idxWiki_CategorycreatedOn` (`createdOn`),
  KEY `idxWiki_CategorycreatedBy` (`createdBy`(10)),
  KEY `idxWiki_CategoryeditedOn` (`editedOn`),
  KEY `idxWiki_CategoryeditedBy` (`editedBy`(10)),
  KEY `idxWiki_Categoryalias` (`alias`(10))
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `Wiki_Revision`
--


/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Wiki_Revision` (
  `UID` varchar(33) DEFAULT NULL,
  `title` varchar(255) DEFAULT NULL,
  `content` text,
  `nav` varchar(255) DEFAULT NULL,
  `locked` varchar(30) DEFAULT NULL,
  `namespace` varchar(255) DEFAULT NULL,
  `articleUID` varchar(33) DEFAULT NULL,
  `reason` text,
  `createdOn` datetime DEFAULT NULL,
  `createdBy` varchar(33) DEFAULT NULL,
  `editedOn` datetime DEFAULT NULL,
  `editedBy` varchar(33) DEFAULT NULL,
  KEY `idxWiki_RevisionUID` (`UID`(10)),
  KEY `idxWiki_RevisioncreatedOn` (`createdOn`),
  KEY `idxWiki_RevisioncreatedBy` (`createdBy`(10)),
  KEY `idxWiki_RevisioneditedOn` (`editedOn`),
  KEY `idxWiki_RevisioneditedBy` (`editedBy`(10))
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `Wiki_Revision`
--


"
string: "\n"
string: ''
string: '--'
string: ''
string: "\$sql = \""
string: ";\"\n\n"
string: ''
string: '/*'
string: ''
string: '--'
string: ''
string: "\n"

<b>scanning file: /var/www/an2google/trunk/modules/admin/actions/mkinstall.act.php</b>
comment: //update Aliases_Alias set refModel='Home[`|us]Static' where refModule='home';
string: "

-- MySQL dump 10.13  Distrib 5.1.41, for debian-linux-gnu (i486)
--
-- Host: localhost    Database: awarenet
-- ------------------------------------------------------
-- Server version	5.1.41-3ubuntu12.6

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8 */;
/*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */;
/*!40103 SET TIME_ZONE='+00:00' */;
/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;

USE awarenet;


--
-- Table structure for table `Aliases_Alias`
--


/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Aliases_Alias` (
  `UID` varchar(33) DEFAULT NULL,
  `refModule` varchar(50) DEFAULT NULL,
  `refModel` varchar(50) DEFAULT NULL,
  `refUID` varchar(30) DEFAULT NULL,
  `aliaslc` varchar(255) DEFAULT NULL,
  `alias` varchar(255) DEFAULT NULL,
  `createdOn` datetime DEFAULT NULL,
  `createdBy` varchar(33) DEFAULT NULL,
  `editedOn` datetime DEFAULT NULL,
  `editedBy` varchar(33) DEFAULT NULL,
  KEY `idxAliases_AliasUID` (`UID`(10)),
  KEY `idxAliases_AliasrefModule` (`refModule`(10)),
  KEY `idxAliases_AliasrefModel` (`refModel`(10)),
  KEY `idxAliases_AliasrefUID` (`refUID`(10)),
  KEY `idxAliases_AliascreatedOn` (`createdOn`),
  KEY `idxAliases_AliascreatedBy` (`createdBy`(10)),
  KEY `idxAliases_AliaseditedOn` (`editedOn`),
  KEY `idxAliases_AliaseditedBy` (`editedBy`(10))
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `Announcements_Announcement`
--

/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Announcements_Announcement` (
  `UID` varchar(33) DEFAULT NULL,
  `refModule` varchar(50) DEFAULT NULL,
  `refModel` varchar(50) DEFAULT NULL,
  `refUID` varchar(33) DEFAULT NULL,
  `title` varchar(255) DEFAULT NULL,
  `content` text,
  `createdOn` datetime DEFAULT NULL,
  `createdBy` varchar(33) DEFAULT NULL,
  `editedOn` datetime DEFAULT NULL,
  `editedBy` varchar(33) DEFAULT NULL,
  `alias` varchar(255) DEFAULT NULL,
  KEY `idxAnnouncements_AnnouncementUID` (`UID`(10)),
  KEY `idxAnnouncements_AnnouncementrefModule` (`refModule`(10)),
  KEY `idxAnnouncements_AnnouncementrefModel` (`refModel`(10)),
  KEY `idxAnnouncements_AnnouncementrefUID` (`refUID`(10)),
  KEY `idxAnnouncements_AnnouncementcreatedOn` (`createdOn`),
  KEY `idxAnnouncements_AnnouncementcreatedBy` (`createdBy`(10)),
  KEY `idxAnnouncements_AnnouncementeditedOn` (`editedOn`),
  KEY `idxAnnouncements_AnnouncementeditedBy` (`editedBy`(10)),
  KEY `idxAnnouncements_Announcementalias` (`alias`(10))
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `Announcements_AnnouncementAnnouncements_Announcement`
--

/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Announcements_AnnouncementAnnouncements_Announcement` (
  `UID` varchar(30) DEFAULT NULL,
  `refModule` varchar(50) DEFAULT NULL,
  `refModel` varchar(50) DEFAULT NULL,
  `refUID` varchar(30) DEFAULT NULL,
  `title` varchar(255) DEFAULT NULL,
  `content` text,
  `createdOn` datetime DEFAULT NULL,
  `createdBy` varchar(30) DEFAULT NULL,
  `editedOn` datetime DEFAULT NULL,
  `editedBy` datetime DEFAULT NULL,
  `alias` varchar(255) DEFAULT NULL
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `Calendar_Entry`
--


/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Calendar_Entry` (
  `UID` varchar(33) DEFAULT NULL,
  `title` varchar(255) DEFAULT NULL,
  `category` varchar(100) DEFAULT NULL,
  `venue` varchar(255) DEFAULT NULL,
  `content` text,
  `year` varchar(10) DEFAULT NULL,
  `month` varchar(10) DEFAULT NULL,
  `day` varchar(10) DEFAULT NULL,
  `eventStart` varchar(50) DEFAULT NULL,
  `eventEnd` varchar(50) DEFAULT NULL,
  `published` varchar(30) DEFAULT NULL,
  `createdOn` datetime DEFAULT NULL,
  `createdBy` varchar(33) DEFAULT NULL,
  `editedOn` datetime DEFAULT NULL,
  `editedBy` varchar(33) DEFAULT NULL,
  `alias` varchar(255) DEFAULT NULL,
  KEY `idxCalendar_EntryUID` (`UID`(10)),
  KEY `idxCalendar_EntrycreatedOn` (`createdOn`),
  KEY `idxCalendar_EntrycreatedBy` (`createdBy`(10)),
  KEY `idxCalendar_EntryeditedOn` (`editedOn`),
  KEY `idxCalendar_EntryeditedBy` (`editedBy`(10)),
  KEY `idxCalendar_Entryalias` (`alias`(10))
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `Chat_Discussion`
--


/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Chat_Discussion` (
  `UID` varchar(33) DEFAULT NULL,
  `user` varchar(33) DEFAULT NULL,
  `queue` mediumtext,
  `createdOn` datetime DEFAULT NULL,
  `createdBy` varchar(33) DEFAULT NULL,
  `editedOn` datetime DEFAULT NULL,
  `editedBy` varchar(33) DEFAULT NULL
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `Comments_Comment`
--


/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Comments_Comment` (
  `UID` varchar(33) DEFAULT NULL,
  `refModule` varchar(50) DEFAULT NULL,
  `refModel` varchar(50) DEFAULT NULL,
  `refUID` varchar(33) DEFAULT NULL,
  `comment` text,
  `createdOn` datetime DEFAULT NULL,
  `createdBy` varchar(33) DEFAULT NULL,
  `editedOn` datetime DEFAULT NULL,
  `editedBy` varchar(33) DEFAULT NULL,
  KEY `idxComments_CommentUID` (`UID`(10)),
  KEY `idxComments_CommentrefModule` (`refModule`(10)),
  KEY `idxComments_CommentrefModel` (`refModel`(10)),
  KEY `idxComments_CommentrefUID` (`refUID`(10)),
  KEY `idxComments_CommentcreatedOn` (`createdOn`),
  KEY `idxComments_CommentcreatedBy` (`createdBy`(10)),
  KEY `idxComments_CommenteditedOn` (`editedOn`),
  KEY `idxComments_CommenteditedBy` (`editedBy`(10))
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `Files_File`
--


/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Files_File` (
  `UID` varchar(33) DEFAULT NULL,
  `refModule` varchar(50) DEFAULT NULL,
  `refModel` varchar(50) DEFAULT NULL,
  `refUID` varchar(33) DEFAULT NULL,
  `title` varchar(255) DEFAULT NULL,
  `licence` varchar(100) DEFAULT NULL,
  `attribName` varchar(255) DEFAULT NULL,
  `attribUrl` varchar(255) DEFAULT NULL,
  `fileName` varchar(255) DEFAULT NULL,
  `format` varchar(255) DEFAULT NULL,
  `transforms` text,
  `caption` text,
  `weight` text,
  `createdOn` datetime DEFAULT NULL,
  `createdBy` varchar(33) DEFAULT NULL,
  `editedOn` datetime DEFAULT NULL,
  `editedBy` varchar(33) DEFAULT NULL,
  `alias` varchar(255) DEFAULT NULL,
  KEY `idxFiles_FileUID` (`UID`(10)),
  KEY `idxFiles_FilerefModule` (`refModule`(10)),
  KEY `idxFiles_FilerefModel` (`refModel`(10)),
  KEY `idxFiles_FilerefUID` (`refUID`(10)),
  KEY `idxFiles_FilecreatedOn` (`createdOn`),
  KEY `idxFiles_FilecreatedBy` (`createdBy`(10)),
  KEY `idxFiles_FileeditedOn` (`editedOn`),
  KEY `idxFiles_FileeditedBy` (`editedBy`(10)),
  KEY `idxFiles_Filealias` (`alias`(10))
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `Files_Folder`
--


/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Files_Folder` (
  `UID` varchar(33) DEFAULT NULL,
  `parent` text,
  `title` varchar(255) DEFAULT NULL,
  `children` varchar(255) DEFAULT NULL,
  `createdOn` datetime DEFAULT NULL,
  `createdBy` varchar(33) DEFAULT NULL,
  `editedOn` datetime DEFAULT NULL,
  `editedBy` varchar(33) DEFAULT NULL,
  `alias` varchar(255) DEFAULT NULL,
  KEY `idxFiles_FolderUID` (`UID`(10)),
  KEY `idxFiles_Folderparent` (`parent`(10)),
  KEY `idxFiles_FoldercreatedOn` (`createdOn`),
  KEY `idxFiles_FoldercreatedBy` (`createdBy`(10)),
  KEY `idxFiles_FoldereditedOn` (`editedOn`),
  KEY `idxFiles_FoldereditedBy` (`editedBy`(10)),
  KEY `idxFiles_Folderalias` (`alias`(10))
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `Forums_Board`
--


/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Forums_Board` (
  `UID` varchar(33) DEFAULT NULL,
  `school` varchar(33) DEFAULT NULL,
  `title` varchar(255) DEFAULT NULL,
  `description` text,
  `weight` varchar(10) DEFAULT NULL,
  `threads` varchar(30) DEFAULT NULL,
  `replies` varchar(30) DEFAULT NULL,
  `createdOn` datetime DEFAULT NULL,
  `createdBy` varchar(33) DEFAULT NULL,
  `editedOn` datetime DEFAULT NULL,
  `editedBy` varchar(33) DEFAULT NULL,
  `alias` varchar(255) DEFAULT NULL,
  KEY `idxForums_BoardUID` (`UID`(10)),
  KEY `idxForums_Boardschool` (`school`(10)),
  KEY `idxForums_BoardcreatedOn` (`createdOn`),
  KEY `idxForums_BoardcreatedBy` (`createdBy`(10)),
  KEY `idxForums_BoardeditedOn` (`editedOn`),
  KEY `idxForums_BoardeditedBy` (`editedBy`(10)),
  KEY `idxForums_Boardalias` (`alias`(10))
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `Forums_Reply`
--


/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Forums_Reply` (
  `UID` varchar(33) DEFAULT NULL,
  `forum` varchar(33) DEFAULT NULL,
  `thread` varchar(33) DEFAULT NULL,
  `content` text,
  `createdOn` datetime DEFAULT NULL,
  `createdBy` varchar(33) DEFAULT NULL,
  `editedOn` datetime DEFAULT NULL,
  `editedBy` varchar(33) DEFAULT NULL,
  KEY `idxForums_ReplyUID` (`UID`(10)),
  KEY `idxForums_Replyforum` (`forum`(10)),
  KEY `idxForums_Replythread` (`thread`(10)),
  KEY `idxForums_ReplycreatedOn` (`createdOn`),
  KEY `idxForums_ReplycreatedBy` (`createdBy`(10)),
  KEY `idxForums_ReplyeditedOn` (`editedOn`),
  KEY `idxForums_ReplyeditedBy` (`editedBy`(10))
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `Forums_Thread`
--


/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Forums_Thread` (
  `UID` varchar(33) DEFAULT NULL,
  `board` text,
  `title` varchar(255) DEFAULT NULL,
  `content` text,
  `sticky` varchar(10) DEFAULT NULL,
  `replies` varchar(10) DEFAULT NULL,
  `updated` text,
  `createdOn` datetime DEFAULT NULL,
  `createdBy` varchar(33) DEFAULT NULL,
  `editedOn` datetime DEFAULT NULL,
  `editedBy` varchar(33) DEFAULT NULL,
  `alias` varchar(255) DEFAULT NULL,
  KEY `idxForums_ThreadUID` (`UID`(10)),
  KEY `idxForums_Threadboard` (`board`(10)),
  KEY `idxForums_Threadsticky` (`sticky`),
  KEY `idxForums_Threadupdated` (`updated`(10)),
  KEY `idxForums_ThreadcreatedOn` (`createdOn`),
  KEY `idxForums_ThreadcreatedBy` (`createdBy`(10)),
  KEY `idxForums_ThreadeditedOn` (`editedOn`),
  KEY `idxForums_ThreadeditedBy` (`editedBy`(10)),
  KEY `idxForums_Threadalias` (`alias`(10))
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `Forums_ThreadForums_Thread`
--


--
-- Table structure for table `Gallery_Gallery`
--


/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Gallery_Gallery` (
  `UID` varchar(33) DEFAULT NULL,
  `parent` varchar(33) DEFAULT NULL,
  `title` varchar(255) DEFAULT NULL,
  `description` mediumtext,
  `imagecount` bigint(20) DEFAULT NULL,
  `createdBy` varchar(33) DEFAULT NULL,
  `createdOn` datetime DEFAULT NULL,
  `editedOn` datetime DEFAULT NULL,
  `editedBy` varchar(33) DEFAULT NULL,
  `alias` varchar(100) DEFAULT NULL
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `Groups_Group`
--


/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Groups_Group` (
  `UID` varchar(33) DEFAULT NULL,
  `school` varchar(33) DEFAULT NULL,
  `name` varchar(255) DEFAULT NULL,
  `type` varchar(30) DEFAULT NULL,
  `description` text,
  `createdOn` datetime DEFAULT NULL,
  `createdBy` varchar(33) DEFAULT NULL,
  `editedOn` datetime DEFAULT NULL,
  `editedBy` varchar(33) DEFAULT NULL,
  `alias` varchar(255) DEFAULT NULL,
  KEY `idxGroups_GroupUID` (`UID`(10)),
  KEY `idxGroups_GroupcreatedOn` (`createdOn`),
  KEY `idxGroups_GroupcreatedBy` (`createdBy`(10)),
  KEY `idxGroups_GroupeditedOn` (`editedOn`),
  KEY `idxGroups_GroupeditedBy` (`editedBy`(10)),
  KEY `idxGroups_Groupalias` (`alias`(10))
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `Groups_Membership`
--


/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Groups_Membership` (
  `UID` varchar(30) DEFAULT NULL,
  `userUID` varchar(33) DEFAULT NULL,
  `groupUID` varchar(33) DEFAULT NULL,
  `position` varchar(30) DEFAULT NULL,
  `admin` varchar(10) DEFAULT NULL,
  `joined` datetime DEFAULT NULL,
  `createdOn` datetime DEFAULT NULL,
  `createdBy` varchar(33) DEFAULT NULL,
  `editedOn` datetime DEFAULT NULL,
  `editedBy` varchar(33) DEFAULT NULL,
  KEY `idxGroups_MembershipUID` (`UID`(10)),
  KEY `idxGroups_MembershipuserUID` (`userUID`(10)),
  KEY `idxGroups_MembershipgroupUID` (`groupUID`(10)),
  KEY `idxGroups_MembershipcreatedOn` (`createdOn`),
  KEY `idxGroups_MembershipcreatedBy` (`createdBy`(10)),
  KEY `idxGroups_MembershipeditedOn` (`editedOn`),
  KEY `idxGroups_MembershipeditedBy` (`editedBy`(10))
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `Home_Static`
--


/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Home_Static` (
  `UID` varchar(33) DEFAULT NULL,
  `title` varchar(255) DEFAULT NULL,
  `template` varchar(30) DEFAULT NULL,
  `content` text,
  `nav1` text,
  `nav2` text,
  `script` text,
  `jsinit` text,
  `banner` varchar(255) DEFAULT NULL,
  `menu1` text,
  `menu2` text,
  `breadcrumb` text,
  `section` varchar(255) DEFAULT NULL,
  `subsection` varchar(255) DEFAULT NULL,
  `createdOn` datetime DEFAULT NULL,
  `createdBy` varchar(33) DEFAULT NULL,
  `editedOn` datetime DEFAULT NULL,
  `editedBy` varchar(33) DEFAULT NULL,
  `alias` varchar(255) DEFAULT NULL,
  KEY `idxHome_StaticUID` (`UID`(10)),
  KEY `idxHome_StaticcreatedOn` (`createdOn`),
  KEY `idxHome_StaticcreatedBy` (`createdBy`(10)),
  KEY `idxHome_StaticeditedOn` (`editedOn`),
  KEY `idxHome_StaticeditedBy` (`editedBy`(10)),
  KEY `idxHome_Staticalias` (`alias`(10))
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `Images_Image`
--


/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Images_Image` (
  `UID` varchar(33) DEFAULT NULL,
  `refModule` varchar(50) DEFAULT NULL,
  `refModel` varchar(50) DEFAULT NULL,
  `refUID` varchar(33) DEFAULT NULL,
  `title` varchar(255) DEFAULT NULL,
  `licence` varchar(30) DEFAULT NULL,
  `attribName` varchar(255) DEFAULT NULL,
  `attribUrl` varchar(255) DEFAULT NULL,
  `fileName` varchar(255) DEFAULT NULL,
  `format` varchar(30) DEFAULT NULL,
  `transforms` text,
  `caption` text,
  `category` varchar(100) DEFAULT NULL,
  `weight` bigint(20) DEFAULT NULL,
  `createdOn` datetime DEFAULT NULL,
  `createdBy` varchar(33) DEFAULT NULL,
  `editedOn` datetime DEFAULT NULL,
  `editedBy` varchar(33) DEFAULT NULL,
  `alias` varchar(255) DEFAULT NULL,
  KEY `idxImages_ImageUID` (`UID`(10)),
  KEY `idxImages_ImagerefModule` (`refModule`(10)),
  KEY `idxImages_ImagerefModel` (`refModel`(10)),
  KEY `idxImages_ImagerefUID` (`refUID`(10)),
  KEY `idxImages_ImagecreatedOn` (`createdOn`),
  KEY `idxImages_ImagecreatedBy` (`createdBy`(10)),
  KEY `idxImages_ImageeditedOn` (`editedOn`),
  KEY `idxImages_ImageeditedBy` (`editedBy`(10)),
  KEY `idxImages_Imagealias` (`alias`(10))
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `Images_ImageImages_Image`
--


/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Images_ImageImages_Image` (
  `UID` varchar(33) DEFAULT NULL,
  `refModule` varchar(50) DEFAULT NULL,
  `refModel` varchar(50) DEFAULT NULL,
  `refUID` varchar(33) DEFAULT NULL,
  `title` varchar(255) DEFAULT NULL,
  `licence` varchar(30) DEFAULT NULL,
  `attribName` varchar(255) DEFAULT NULL,
  `attribUrl` varchar(255) DEFAULT NULL,
  `fileName` varchar(255) DEFAULT NULL,
  `format` varchar(30) DEFAULT NULL,
  `transforms` text,
  `caption` text,
  `category` varchar(100) DEFAULT NULL,
  `weight` text,
  `createdOn` datetime DEFAULT NULL,
  `createdBy` varchar(33) DEFAULT NULL,
  `editedOn` datetime DEFAULT NULL,
  `editedBy` varchar(33) DEFAULT NULL,
  `alias` varchar(255) DEFAULT NULL
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `Messages_Message`
--


/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Messages_Message` (
  `UID` varchar(33) DEFAULT NULL,
  `owner` varchar(33) DEFAULT NULL,
  `folder` varchar(33) DEFAULT NULL,
  `fromUID` varchar(33) DEFAULT NULL,
  `toUID` varchar(33) DEFAULT NULL,
  `cc` text,
  `title` varchar(255) DEFAULT NULL,
  `re` varchar(33) DEFAULT NULL,
  `content` text,
  `status` varchar(10) DEFAULT NULL,
  `createdOn` datetime DEFAULT NULL,
  `createdBy` varchar(33) DEFAULT NULL,
  `editedOn` datetime DEFAULT NULL,
  `editedBy` varchar(33) DEFAULT NULL,
  KEY `idxMessages_MessageUID` (`UID`(10)),
  KEY `idxMessages_MessagecreatedOn` (`createdOn`),
  KEY `idxMessages_MessagecreatedBy` (`createdBy`(10)),
  KEY `idxMessages_MessageeditedOn` (`editedOn`),
  KEY `idxMessages_MessageeditedBy` (`editedBy`(10))
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `Moblog_Post`
--


/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Moblog_Post` (
  `UID` varchar(33) DEFAULT NULL,
  `school` varchar(33) DEFAULT NULL,
  `grade` varchar(30) DEFAULT NULL,
  `title` varchar(255) DEFAULT NULL,
  `content` mediumtext,
  `published` varchar(3) DEFAULT NULL,
  `viewcount` bigint(20) DEFAULT NULL,
  `createdOn` datetime DEFAULT NULL,
  `createdBy` varchar(33) DEFAULT NULL,
  `editedOn` datetime DEFAULT NULL,
  `editedBy` varchar(33) DEFAULT NULL,
  `alias` varchar(255) DEFAULT NULL,
  KEY `idxMoblog_PostUID` (`UID`(10)),
  KEY `idxMoblog_PostcreatedOn` (`createdOn`),
  KEY `idxMoblog_PostcreatedBy` (`createdBy`(10)),
  KEY `idxMoblog_PosteditedOn` (`editedOn`),
  KEY `idxMoblog_PosteditedBy` (`editedBy`(10)),
  KEY `idxMoblog_Postalias` (`alias`(10))
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `Moblog_PostMoblog_Post`
--


/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Moblog_PostMoblog_Post` (
  `UID` varchar(33) DEFAULT NULL,
  `school` varchar(33) DEFAULT NULL,
  `grade` varchar(30) DEFAULT NULL,
  `title` varchar(255) DEFAULT NULL,
  `content` mediumtext,
  `published` varchar(3) DEFAULT NULL,
  `viewcount` bigint(20) DEFAULT NULL,
  `createdOn` datetime DEFAULT NULL,
  `createdBy` varchar(33) DEFAULT NULL,
  `editedOn` datetime DEFAULT NULL,
  `editedBy` varchar(33) DEFAULT NULL,
  `alias` varchar(255) DEFAULT NULL
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `Notifications_Notification`
--


/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Notifications_Notification` (
  `UID` varchar(33) DEFAULT NULL,
  `refModule` text,
  `refModel` text,
  `refUID` varchar(33) DEFAULT NULL,
  `title` varchar(255) DEFAULT NULL,
  `content` mediumtext,
  `refUrl` varchar(255) DEFAULT NULL,
  `createdOn` datetime DEFAULT NULL,
  `createdBy` varchar(33) DEFAULT NULL,
  `editedOn` datetime DEFAULT NULL,
  `editedBy` varchar(33) DEFAULT NULL,
  KEY `idxNotifications_NotificationUID` (`UID`(10)),
  KEY `idxNotifications_NotificationrefModule` (`refModule`(10)),
  KEY `idxNotifications_NotificationrefModel` (`refModel`(10)),
  KEY `idxNotifications_NotificationrefUID` (`refUID`(10)),
  KEY `idxNotifications_NotificationcreatedOn` (`createdOn`),
  KEY `idxNotifications_NotificationcreatedBy` (`createdBy`(10)),
  KEY `idxNotifications_NotificationeditedOn` (`editedOn`),
  KEY `idxNotifications_NotificationeditedBy` (`editedBy`(10))
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `Notifications_UserIndex`
--


/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Notifications_UserIndex` (
  `UID` varchar(33) DEFAULT NULL,
  `userUID` varchar(33) DEFAULT NULL,
  `notificationUID` varchar(33) DEFAULT NULL,
  `status` varchar(20) DEFAULT NULL,
  `createdOn` datetime DEFAULT NULL,
  `createdBy` varchar(33) DEFAULT NULL,
  `editedOn` datetime DEFAULT NULL,
  `editedBy` varchar(33) DEFAULT NULL,
  KEY `idxNotifications_UserIndexUID` (`UID`(10)),
  KEY `idxNotifications_UserIndexuserUID` (`userUID`(10)),
  KEY `idxNotifications_UserIndexnotificationUID` (`notificationUID`(10)),
  KEY `idxNotifications_UserIndexcreatedOn` (`createdOn`),
  KEY `idxNotifications_UserIndexcreatedBy` (`createdBy`(10)),
  KEY `idxNotifications_UserIndexeditedOn` (`editedOn`),
  KEY `idxNotifications_UserIndexeditedBy` (`editedBy`(10))
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `Projects_Membership`
--


/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Projects_Membership` (
  `UID` varchar(33) DEFAULT NULL,
  `projectUID` varchar(33) DEFAULT NULL,
  `userUID` varchar(33) DEFAULT NULL,
  `role` varchar(10) DEFAULT NULL,
  `joined` datetime DEFAULT NULL,
  `createdOn` datetime DEFAULT NULL,
  `createdBy` varchar(33) DEFAULT NULL,
  `editedOn` datetime DEFAULT NULL,
  `editedBy` varchar(33) DEFAULT NULL,
  KEY `idxProjects_MembershipUID` (`UID`(10)),
  KEY `idxProjects_MembershipprojectUID` (`projectUID`(10)),
  KEY `idxProjects_MembershipuserUID` (`userUID`(10)),
  KEY `idxProjects_MembershipcreatedOn` (`createdOn`),
  KEY `idxProjects_MembershipcreatedBy` (`createdBy`(10)),
  KEY `idxProjects_MembershipeditedOn` (`editedOn`),
  KEY `idxProjects_MembershipeditedBy` (`editedBy`(10))
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `Projects_Project`
--


/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Projects_Project` (
  `UID` varchar(33) DEFAULT NULL,
  `title` varchar(255) DEFAULT NULL,
  `abstract` text,
  `content` text,
  `status` varchar(10) DEFAULT NULL,
  `finishedOn` datetime DEFAULT NULL,
  `createdOn` datetime DEFAULT NULL,
  `createdBy` varchar(33) DEFAULT NULL,
  `editedOn` datetime DEFAULT NULL,
  `editedBy` varchar(33) DEFAULT NULL,
  `alias` varchar(255) DEFAULT NULL,
  KEY `idxProjects_ProjectUID` (`UID`(10)),
  KEY `idxProjects_ProjectcreatedOn` (`createdOn`),
  KEY `idxProjects_ProjectcreatedBy` (`createdBy`(10)),
  KEY `idxProjects_ProjecteditedOn` (`editedOn`),
  KEY `idxProjects_ProjecteditedBy` (`editedBy`(10)),
  KEY `idxProjects_Projectalias` (`alias`(10))
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `Projects_Revision`
--


/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Projects_Revision` (
  `UID` varchar(33) DEFAULT NULL,
  `projectUID` varchar(33) DEFAULT NULL,
  `title` varchar(255) DEFAULT NULL,
  `abstract` text,
  `content` text,
  `reason` varchar(255) DEFAULT NULL,
  `createdOn` datetime DEFAULT NULL,
  `createdBy` varchar(33) DEFAULT NULL,
  `editedOn` datetime DEFAULT NULL,
  `editedBy` varchar(33) DEFAULT NULL,
  KEY `idxProjects_RevisionUID` (`UID`(10)),
  KEY `idxProjects_RevisionprojectUID` (`projectUID`(10)),
  KEY `idxProjects_RevisioncreatedOn` (`createdOn`),
  KEY `idxProjects_RevisioncreatedBy` (`createdBy`(10)),
  KEY `idxProjects_RevisioneditedOn` (`editedOn`),
  KEY `idxProjects_RevisioneditedBy` (`editedBy`(10))
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `Revisions_DeletedItem`
--


/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Revisions_DeletedItem` (
  `UID` varchar(33) DEFAULT NULL,
  `refModule` varchar(20) DEFAULT NULL,
  `refModel` varchar(50) DEFAULT NULL,
  `refUID` varchar(33) DEFAULT NULL,
  `timestamp` varchar(20) DEFAULT NULL,
  `createdOn` datetime DEFAULT NULL,
  `createdBy` varchar(33) DEFAULT NULL,
  `editedOn` datetime DEFAULT NULL,
  `editedBy` varchar(33) DEFAULT NULL
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `Revisions_Migrate`
--


/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Revisions_Migrate` (
  `UID` varchar(33) DEFAULT NULL,
  `refModule` varchar(20) DEFAULT NULL,
  `refModel` varchar(50) DEFAULT NULL,
  `fromUrl` varchar(255) DEFAULT NULL,
  `toUrl` varchar(255) DEFAULT NULL,
  `hitCount` bigint(20) DEFAULT NULL,
  `createdOn` datetime DEFAULT NULL,
  `createdBy` varchar(33) DEFAULT NULL,
  `editedOn` datetime DEFAULT NULL,
  `editedBy` varchar(33) DEFAULT NULL
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `Revisions_Revision`
--


/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Revisions_Revision` (
  `UID` varchar(33) DEFAULT NULL,
  `refModule` varchar(20) DEFAULT NULL,
  `refModel` varchar(100) DEFAULT NULL,
  `refUID` varchar(33) DEFAULT NULL,
  `data` mediumtext,
  `changedOn` datetime DEFAULT NULL,
  `changedBy` varchar(33) DEFAULT NULL,
  `createdOn` datetime DEFAULT NULL,
  `createdBy` varchar(33) DEFAULT NULL,
  `editedOn` datetime DEFAULT NULL,
  `editedBy` varchar(33) DEFAULT NULL
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `Schools_School`
--


/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Schools_School` (
  `UID` varchar(33) DEFAULT NULL,
  `name` varchar(255) DEFAULT NULL,
  `description` mediumtext,
  `geocode` varchar(255) DEFAULT NULL,
  `region` varchar(255) DEFAULT NULL,
  `country` varchar(255) DEFAULT NULL,
  `hidden` varchar(3) DEFAULT NULL,
  `createdOn` datetime DEFAULT NULL,
  `createdBy` varchar(33) DEFAULT NULL,
  `editedOn` datetime DEFAULT NULL,
  `editedBy` varchar(33) DEFAULT NULL,
  `alias` varchar(255) DEFAULT NULL,
  KEY `idxSchools_SchoolUID` (`UID`(10)),
  KEY `idxSchools_SchoolcreatedOn` (`createdOn`),
  KEY `idxSchools_SchoolcreatedBy` (`createdBy`(10)),
  KEY `idxSchools_SchooleditedOn` (`editedOn`),
  KEY `idxSchools_SchooleditedBy` (`editedBy`(10)),
  KEY `idxSchools_Schoolalias` (`alias`(10))
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `Sync_Download`
--


/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Sync_Download` (
  `UID` varchar(33) DEFAULT NULL,
  `filename` varchar(255) DEFAULT NULL,
  `hash` varchar(255) DEFAULT NULL,
  `status` varchar(30) DEFAULT NULL,
  `timestamp` varchar(33) DEFAULT NULL,
  `createdOn` datetime DEFAULT NULL,
  `createdBy` varchar(33) DEFAULT NULL,
  `editedOn` datetime DEFAULT NULL,
  `editedBy` varchar(33) DEFAULT NULL,
  KEY `idxSync_DownloadUID` (`UID`(10)),
  KEY `idxSync_DownloadcreatedOn` (`createdOn`),
  KEY `idxSync_DownloadcreatedBy` (`createdBy`(10)),
  KEY `idxSync_DownloadeditedOn` (`editedOn`),
  KEY `idxSync_DownloadeditedBy` (`editedBy`(10))
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `Sync_Message`
--


/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Sync_Message` (
  `UID` varchar(33) DEFAULT NULL,
  `source` varchar(33) DEFAULT NULL,
  `type` varchar(50) DEFAULT NULL,
  `data` mediumtext,
  `peer` varchar(33) DEFAULT NULL,
  `status` varchar(33) DEFAULT NULL,
  `received` varchar(33) DEFAULT NULL,
  `timestamp` varchar(20) DEFAULT NULL,
  `createdOn` datetime DEFAULT NULL,
  `createdBy` varchar(33) DEFAULT NULL,
  `editedOn` datetime DEFAULT NULL,
  `editedBy` varchar(33) DEFAULT NULL
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `Sync_Notice`
--


/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Sync_Notice` (
  `UID` varchar(33) DEFAULT NULL,
  `source` varchar(33) DEFAULT NULL,
  `type` varchar(50) DEFAULT NULL,
  `ndata` text,
  `peer` varchar(33) DEFAULT NULL,
  `status` varchar(30) DEFAULT NULL,
  `received` varchar(30) DEFAULT NULL,
  `timestamp` varchar(30) DEFAULT NULL,
  `createdOn` datetime DEFAULT NULL,
  `createdBy` varchar(33) DEFAULT NULL,
  `editedOn` datetime DEFAULT NULL,
  `editedBy` varchar(33) DEFAULT NULL,
  KEY `idxSync_NoticeUID` (`UID`(10)),
  KEY `idxSync_Noticesource` (`source`(10)),
  KEY `idxSync_NoticecreatedOn` (`createdOn`),
  KEY `idxSync_NoticecreatedBy` (`createdBy`(10)),
  KEY `idxSync_NoticeeditedOn` (`editedOn`),
  KEY `idxSync_NoticeeditedBy` (`editedBy`(10))
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `Sync_Server`
--


/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Sync_Server` (
  `UID` varchar(33) DEFAULT NULL,
  `servername` varchar(255) DEFAULT NULL,
  `serverurl` varchar(100) DEFAULT NULL,
  `password` varchar(50) DEFAULT NULL,
  `direction` varchar(30) DEFAULT NULL,
  `active` varchar(10) DEFAULT NULL,
  `createdOn` datetime DEFAULT NULL,
  `createdBy` varchar(33) DEFAULT NULL,
  `editedOn` datetime DEFAULT NULL,
  `editedBy` varchar(33) DEFAULT NULL,
  KEY `idxSync_ServerUID` (`UID`(10)),
  KEY `idxSync_ServercreatedOn` (`createdOn`),
  KEY `idxSync_ServercreatedBy` (`createdBy`(10)),
  KEY `idxSync_ServereditedOn` (`editedOn`),
  KEY `idxSync_ServereditedBy` (`editedBy`(10))
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `Users_Friendship`
--


/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Users_Friendship` (
  `UID` varchar(33) DEFAULT NULL,
  `userUID` varchar(33) DEFAULT NULL,
  `friendUID` varchar(33) DEFAULT NULL,
  `relationship` varchar(100) DEFAULT NULL,
  `status` varchar(255) DEFAULT NULL,
  `createdOn` datetime DEFAULT NULL,
  `createdBy` varchar(33) DEFAULT NULL,
  `editedOn` datetime DEFAULT NULL,
  `editedBy` varchar(33) DEFAULT NULL,
  KEY `idxUsers_FriendshipUID` (`UID`(10)),
  KEY `idxUsers_FriendshipcreatedOn` (`createdOn`),
  KEY `idxUsers_FriendshipcreatedBy` (`createdBy`(10)),
  KEY `idxUsers_FriendshipeditedOn` (`editedOn`),
  KEY `idxUsers_FriendshipeditedBy` (`editedBy`(10))
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;


--
-- Table structure for table `Users_Notification`
--


/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Users_Notification` (
  `UID` varchar(33) DEFAULT NULL,
  `refModule` varchar(20) DEFAULT NULL,
  `refModel` varchar(50) DEFAULT NULL,
  `user` varchar(33) DEFAULT NULL,
  `notices` mediumtext,
  `editedOn` datetime DEFAULT NULL,
  `editedBy` varchar(33) DEFAULT NULL,
  `createdOn` datetime DEFAULT NULL,
  `createdBy` varchar(33) DEFAULT NULL
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `Users_Role`
--


/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Users_Role` (
  `UID` varchar(33) DEFAULT NULL,
  `name` varchar(255) DEFAULT NULL,
  `description` mediumtext,
  `permissions` mediumtext,
  `createdOn` datetime DEFAULT NULL,
  `createdBy` varchar(33) DEFAULT NULL,
  `editedOn` datetime DEFAULT NULL,
  `editedBy` varchar(33) DEFAULT NULL,
  `alias` varchar(255) DEFAULT NULL,
  KEY `idxUsers_RoleUID` (`UID`(10)),
  KEY `idxUsers_RolecreatedOn` (`createdOn`),
  KEY `idxUsers_RolecreatedBy` (`createdBy`(10)),
  KEY `idxUsers_RoleeditedOn` (`editedOn`),
  KEY `idxUsers_RoleeditedBy` (`editedBy`(10)),
  KEY `idxUsers_Rolealias` (`alias`(10))
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;


--
-- Table structure for table `Users_Session`
--


/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Users_Session` (
  `UID` varchar(33) DEFAULT NULL,
  `userUID` varchar(255) DEFAULT NULL,
  `serverurl` varchar(255) DEFAULT NULL,
  `logintime` datetime DEFAULT NULL,
  `lastseen` varchar(20) DEFAULT NULL,
  `editedOn` datetime DEFAULT NULL,
  `editedBy` varchar(33) DEFAULT NULL,
  `createdOn` datetime DEFAULT NULL,
  `createdBy` varchar(33) DEFAULT NULL
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `Users_User`
--


/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Users_User` (
  `UID` varchar(33) DEFAULT NULL,
  `role` varchar(33) DEFAULT NULL,
  `school` varchar(33) DEFAULT NULL,
  `grade` varchar(30) DEFAULT NULL,
  `firstname` varchar(100) DEFAULT NULL,
  `surname` varchar(100) DEFAULT NULL,
  `username` varchar(50) DEFAULT NULL,
  `password` varchar(50) DEFAULT NULL,
  `lang` varchar(30) DEFAULT NULL,
  `profile` text,
  `permissions` text,
  `lastOnline` text,
  `createdOn` datetime DEFAULT NULL,
  `createdBy` varchar(33) DEFAULT NULL,
  `editedOn` datetime DEFAULT NULL,
  `editedBy` varchar(33) DEFAULT NULL,
  `alias` varchar(255) DEFAULT NULL,
  KEY `idxUsers_UserUID` (`UID`(10)),
  KEY `idxUsers_Userusername` (`username`(10)),
  KEY `idxUsers_UsercreatedOn` (`createdOn`),
  KEY `idxUsers_UsercreatedBy` (`createdBy`(10)),
  KEY `idxUsers_UsereditedOn` (`editedOn`),
  KEY `idxUsers_UsereditedBy` (`editedBy`(10)),
  KEY `idxUsers_Useralias` (`alias`(10))
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `Wiki_Article`
--


/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Wiki_Article` (
  `UID` varchar(33) DEFAULT NULL,
  `title` varchar(255) DEFAULT NULL,
  `content` text,
  `nav` text,
  `locked` varchar(30) DEFAULT NULL,
  `namespace` varchar(33) DEFAULT NULL,
  `createdOn` datetime DEFAULT NULL,
  `createdBy` varchar(33) DEFAULT NULL,
  `editedOn` datetime DEFAULT NULL,
  `editedBy` varchar(33) DEFAULT NULL,
  `alias` varchar(255) DEFAULT NULL,
  KEY `idxWiki_ArticleUID` (`UID`(10)),
  KEY `idxWiki_ArticlecreatedOn` (`createdOn`),
  KEY `idxWiki_ArticlecreatedBy` (`createdBy`(10)),
  KEY `idxWiki_ArticleeditedOn` (`editedOn`),
  KEY `idxWiki_ArticleeditedBy` (`editedBy`(10)),
  KEY `idxWiki_Articlealias` (`alias`(10))
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `Wiki_ArticleWiki_Article`
--

--
-- Table structure for table `Wiki_Category`
--


/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Wiki_Category` (
  `UID` varchar(33) DEFAULT NULL,
  `title` varchar(255) DEFAULT NULL,
  `description` mediumtext,
  `parent` varchar(33) DEFAULT NULL,
  `createdOn` datetime DEFAULT NULL,
  `createdBy` varchar(33) DEFAULT NULL,
  `editedOn` datetime DEFAULT NULL,
  `editedBy` varchar(33) DEFAULT NULL,
  `alias` text,
  KEY `idxWiki_CategoryUID` (`UID`(10)),
  KEY `idxWiki_Categorytitle` (`title`(10)),
  KEY `idxWiki_Categoryparent` (`parent`(10)),
  KEY `idxWiki_CategorycreatedOn` (`createdOn`),
  KEY `idxWiki_CategorycreatedBy` (`createdBy`(10)),
  KEY `idxWiki_CategoryeditedOn` (`editedOn`),
  KEY `idxWiki_CategoryeditedBy` (`editedBy`(10)),
  KEY `idxWiki_Categoryalias` (`alias`(10))
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `Wiki_Revision`
--


/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Wiki_Revision` (
  `UID` varchar(33) DEFAULT NULL,
  `title` varchar(255) DEFAULT NULL,
  `content` text,
  `nav` varchar(255) DEFAULT NULL,
  `locked` varchar(30) DEFAULT NULL,
  `namespace` varchar(255) DEFAULT NULL,
  `articleUID` varchar(33) DEFAULT NULL,
  `reason` text,
  `createdOn` datetime DEFAULT NULL,
  `createdBy` varchar(33) DEFAULT NULL,
  `editedOn` datetime DEFAULT NULL,
  `editedBy` varchar(33) DEFAULT NULL,
  KEY `idxWiki_RevisionUID` (`UID`(10)),
  KEY `idxWiki_RevisioncreatedOn` (`createdOn`),
  KEY `idxWiki_RevisioncreatedBy` (`createdBy`(10)),
  KEY `idxWiki_RevisioneditedOn` (`editedOn`),
  KEY `idxWiki_RevisioneditedBy` (`editedBy`(10))
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `Wiki_Revision`
--


"
string: "\n"
string: ''
string: '--'
string: ''
string: "\$sql = \""
string: "\";\n\n"
string: "dbQuery(\$sql);\n\n"
string: ''
string: '/*'
string: ''
string: '--'
string: ''
string: "\n"

<b>scanning file: /var/www/an2google/trunk/modules/admin/actions/migratetables.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	all tables to K3 layout migrate tables
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	auth
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: this	
comment: //----------------------------------------------------------------------------------------------
comment: //	map of old tables names to new ones
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	the following object types are exported
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	these fields are renamed
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	create new tables
comment: //----------------------------------------------------------------------------------------------
comment: //	original table schema
comment: //	copy on which new table is based
comment: //------------------------------------------------------------------------------------------
comment: //	construct new table schema
comment: //------------------------------------------------------------------------------------------
comment: //	Moving to GUID (32 chars bchex)
comment: //	20 char limit on module name?
comment: //	50 char limit on module name?
comment: // end foreach field
comment: //	
comment: //	change UID size
comment: //	
comment: //	change UID size
comment: //	maximum size of an alias
comment: //	maximum size of an alias
comment: //------------------------------------------------------------------------------------------
comment: //	create the new table
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	copy all records from the old table
comment: //------------------------------------------------------------------------------------------
comment: // make blank record of new type
comment: // fill new record from row
comment: // save it
comment: // end while
comment: // end foreach $tables
string: 'announcements'
string: 'announcements_announcement'
string: 'calendar'
string: 'calendar_entry'
string: 'chat'
string: 'chat_discussion'
string: 'changes'
string: 'revisions_revision'
string: 'comments'
string: 'comments_comment'
string: 'delitems'
string: 'Revisions_DeletedItem'
string: 'downloads'
string: 'sync_download'
string: 'files'
string: 'files_file'
string: 'folders'
string: 'files_folder'
string: 'forumreplies'
string: 'forums_reply'
string: 'forums'
string: 'forums_board'
string: 'forumthreads'
string: 'forums_thread'
string: 'friendships'
string: 'users_friendship'
string: 'gallery'
string: 'gallery_gallery'
string: 'groups_membership'
string: 'groups_membership'
string: 'groups'
string: 'groups_group'
string: 'images'
string: 'images_image'
string: 'messages'
string: 'messages_message'
string: 'migrated'
string: 'revisions_migrate'
string: 'moblog'
string: 'moblog_post'
string: 'notices'
string: 'users_notification'
string: 'projectmembers'
string: 'projects_membership'
string: 'projectrevisions'
string: 'projects_revision'
string: 'projects'
string: 'projects_project'
string: 'recordalias'
string: 'aliases_alias'
string: 'schools'
string: 'schools_school'
string: 'servers'
string: 'sync_server'
string: 'static'
string: 'home_static'
string: 'sync'
string: 'sync_message'
string: 'userlogin'
string: 'users_session'
string: 'users'
string: 'users_user'
string: 'wiki'
string: 'wiki_article'
string: 'wikirevisions'
string: 'wiki_revision'
string: 'announcements'
string: 'announcements_announcement'
string: 'changes'
string: 'revisions_revision'
string: 'comments'
string: 'comments_comment'
string: 'delitems'
string: 'Revisions_DeletedItem'
string: 'files'
string: 'files_file'
string: 'friendships'
string: 'users_friendship'
string: 'images'
string: 'images_image'
string: 'messages'
string: 'messages_message'
string: 'migrated'
string: 'revisions_migrate'
string: 'notices'
string: 'users_notification'
string: 'recordalias'
string: 'aliases_alias'
string: 'role'
string: 'role'
string: 'refTable'
string: 'refModel'
string: 'alias'
string: 'alias'
string: 'model'
string: 'UID'
string: 'VARCHAR(33)'
string: 'refModule'
string: 'VARCHAR(20)'
string: 'refModel'
string: 'VARCHAR(50)'
string: 'fields'
string: 'UID'
string: 'refTable'
string: 'refModule'
string: 'refUID'
string: 'createdBy'
string: 'createdOn'
string: 'editedBy'
string: 'editedOn'
string: 'alias'
string: 'alias'
string: 'varchar(30)'
string: 'VARCHAR(33)'
string: 'text'
string: 'MEDIUMTEXT'
string: 'createdOn'
string: 'DATETIME'
string: 'createdBy'
string: 'VARCHAR(33)'
string: 'editedOn'
string: 'DATETIME'
string: 'editedBy'
string: 'VARCHAR(33)'
string: 'alias'
string: 'fields'
string: 'alias'
string: 'VARCHAR(100)'
string: 'alias'
string: 'fields'
string: 'alias'
string: 'VARCHAR(100)'
string: 'fields'
string: 'model'
string: "drop table "
string: 'model'
string: "&lt;h2&gt;Creating Table {$newSchema['model']}&lt;/h2&gt;\n"
string: "&lt;/b&gt;"
string: "&lt;/b&gt;&lt;br/&gt;&lt;br/&gt;\n"
string: "select * from "
string: 'model'
string: 'fields'
string: ''
string: 'Sync'
string: 'model'
string: "&lt;small&gt;Adding record {$newRecord['UID']} to {$newSchema['model']}&lt;br/&gt;&lt;/small&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/admin/actions/maintenance.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	perform module maintenance (check for dead references, ect)
comment: //--------------------------------------------------------------------------------------------------
comment: //role: admin - only administrators may do this
comment: //----------------------------------------------------------------------------------------------
comment: //	check user role
comment: //----------------------------------------------------------------------------------------------
comment: // only admins may perform these actions
comment: //------------------------------------------------------------------------------------------
comment: //	no specific module referenced, show list of maintenance scripts
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	module referenced, run maintenance script and display report
comment: //------------------------------------------------------------------------------------------
comment: // no such module
string: 'admin'
string: ''
string: 'modules/admin/actions/maintenance.page.php'
string: 'modules/admin/actions/runmaintenance.page.php'
string: 'modName'

<b>scanning file: /var/www/an2google/trunk/modules/admin/actions/livelog.act.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //	displays the page log live
comment: //-------------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	auth - only admins can do this
comment: //---------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	render page
comment: //---------------------------------------------------------------------------------------------
string: 'admin'
string: 'modules/admin/actions/livelog.page.php'
string: "\n\t\tmsgSubscribe('admin-syspagelogsimple', msgh_sysPageLog);\n"

<b>scanning file: /var/www/an2google/trunk/modules/admin/actions/listpages.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	list all pages (admin only)
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check user is an admin
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	render the page
comment: //----------------------------------------------------------------------------------------------
string: 'admin'
string: 'Only admins may do this.'
string: 'modules/admin/actions/listpages.page.php'

<b>scanning file: /var/www/an2google/trunk/modules/admin/actions/listmodules.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	list all Kapenta modules
comment: //--------------------------------------------------------------------------------------------------
comment: //role: admin - only administrators may do this
comment: //----------------------------------------------------------------------------------------------
comment: //	authorization (admins only)
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	show the page
comment: //----------------------------------------------------------------------------------------------
string: 'admin'
string: 'modules/admin/actions/listmodules.page.php'

<b>scanning file: /var/www/an2google/trunk/modules/admin/actions/install.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	re/install a module
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check permissions and form vars
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	install the module
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	render the page
comment: //----------------------------------------------------------------------------------------------
string: 'core/kmodule.class.php'
string: 'admin'
string: 'modulename'
string: 'module not specified'
string: 'modulename'
string: 'module not found: '
string: 'modulename'
string: 'modules/admin/actions/install.page.php'
string: 'report'
string: 'modulename'

<b>scanning file: /var/www/an2google/trunk/modules/admin/actions/fixtables.act.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //	temporary script to reinstall tables
comment: //-------------------------------------------------------------------------------------------------
comment: //if ('admin' != $user-&gt;role) { $page-&gt;do403(); }
comment: //---------------------------------------------------------------------------------------------
comment: //	specify which tables not to add fields to
comment: //---------------------------------------------------------------------------------------------
comment: /*
	if (true == $db-&gt;tableExists('aliases_alias')) { $db-&gt;query("drop table Aliases_Alias"); }
	$html .= aliases_install_module();
	$html .= "&lt;br/&gt;\n";

	if (true == $db-&gt;tableExists('announcements_announcement')) { $db-&gt;query("drop table Announcements_Announcement"); }
	$html .= announcements_install_module();
	$html .= "&lt;br/&gt;\n";

	if (true == $db-&gt;tableExists('calendar_entry')) { $db-&gt;query("drop table Calendar_Entry"); }
	$html .= calendar_install_module();
	$html .= "&lt;br/&gt;\n";

	if (true == $db-&gt;tableExists('comments_comment')) { $db-&gt;query("drop table Comments_Comment"); }
	$html .= comments_install_module();
	$html .= "&lt;br/&gt;\n";

	if (true == $db-&gt;tableExists('files_file')) { $db-&gt;query("drop table Files_File"); }
	if (true == $db-&gt;tableExists('files_folder')) { $db-&gt;query("drop table Files_Folder"); }
	$html .= files_install_module();
	$html .= "&lt;br/&gt;\n";

	if (true == $db-&gt;tableExists('forums_board')) { $db-&gt;query("drop table Forums_Board"); }
	if (true == $db-&gt;tableExists('forums_thread')) { $db-&gt;query("drop table Forums_Thread"); }
	if (true == $db-&gt;tableExists('forums_reply')) { $db-&gt;query("drop table Forums_Reply"); }
	$html .= forums_install_module();
	$html .= "&lt;br/&gt;\n";

	if (true == $db-&gt;tableExists('groups_group')) { $db-&gt;query("drop table Groups_Group"); }
	if (true == $db-&gt;tableExists('groups_membership')) { $db-&gt;query("drop table Groups_Membership"); }
	$html .= groups_install_module();
	$html .= "&lt;br/&gt;\n";

	if (true == $db-&gt;tableExists('home_static')) { $db-&gt;query("drop table Home_Static"); }
	$html .= home_install_module();
	$html .= "&lt;br/&gt;\n";

	if (true == $db-&gt;tableExists('images_image')) { $db-&gt;query("drop table Images_Image"); }
	$html .= images_install_module();
	$html .= "&lt;br/&gt;\n";

	if (true == $db-&gt;tableExists('messages_message')) { $db-&gt;query("drop table Messages_Message"); }
	$html .= messages_install_module();
	$html .= "&lt;br/&gt;\n";

	if (true == $db-&gt;tableExists('moblog_post')) { $db-&gt;query("drop table Moblog_Post"); }
	$html .= moblog_install_module();
	$html .= "&lt;br/&gt;\n";

	if (true == $db-&gt;tableExists('projects_project')) { $db-&gt;query("drop table Projects_Project"); }
	if (true == $db-&gt;tableExists('projects_membership')) { $db-&gt;query("drop table Projects_Membership"); }
	if (true == $db-&gt;tableExists('projects_revision')) { $db-&gt;query("drop table Projects_Revision"); }
	$html .= projects_install_module();
	$html .= "&lt;br/&gt;\n";

	if (true == $db-&gt;tableExists('schools_school')) { $db-&gt;query("drop table Schools_School"); }
	$html .= schools_install_module();
	$html .= "&lt;br/&gt;\n";

	if (true == $db-&gt;tableExists('sync_server')) { $db-&gt;query("drop table Sync_Server"); }
	if (true == $db-&gt;tableExists('sync_notice')) { $db-&gt;query("drop table Sync_Notice"); }
	if (true == $db-&gt;tableExists('sync_download')) { $db-&gt;query("drop table Sync_Download"); }
	$html .= sync_install_module();
	$html .= "&lt;br/&gt;\n";
	
	if (true == $db-&gt;tableExists('users_user')) { $db-&gt;query("drop table Users_User"); }
	if (true == $db-&gt;tableExists('users_role')) { $db-&gt;query("drop table Users_Role"); }
	if (true == $db-&gt;tableExists('users_friendship')) { $db-&gt;query("drop table Users_Friendship"); }
	$html .= users_install_module();
	$html .= "&lt;br/&gt;\n";
	*/
comment: //----------------------------------------------------------------------------------------------
comment: //	patch up 
comment: //----------------------------------------------------------------------------------------------
comment: // end foreach record
comment: // end if table exists
comment: // end foreach
comment: //---------------------------------------------------------------------------------------------
comment: //	render the page
comment: //---------------------------------------------------------------------------------------------
comment: //$page-&gt;data['template'] = str_replace('%%tablesdisplay%%', $html, $page-&gt;data['template']);
string: 'modules/aliases/inc/install.inc.php'
string: 'modules/announcements/inc/install.inc.php'
string: 'modules/calendar/inc/install.inc.php'
string: 'modules/comments/inc/install.inc.php'
string: 'modules/files/inc/install.inc.php'
string: 'modules/forums/inc/install.inc.php'
string: 'modules/groups/inc/install.inc.php'
string: 'modules/home/inc/install.inc.php'
string: 'modules/images/inc/install.inc.php'
string: 'modules/messages/inc/install.inc.php'
string: 'modules/moblog/inc/install.inc.php'
string: 'modules/projects/inc/install.inc.php'
string: 'modules/schools/inc/install.inc.php'
string: 'modules/sync/inc/install.inc.php'
string: 'modules/users/inc/install.inc.php'
string: ''
string: 'announcements'
string: 'announcements_announcement'
string: 'calendar'
string: 'calendar_entry'
string: 'comments'
string: 'comments_comment'
string: 'downloads'
string: 'sync_download'
string: 'files'
string: 'files_file'
string: 'folders'
string: 'files_folder'
string: 'forums'
string: 'forums_board'
string: 'forumreplies'
string: 'forums_reply'
string: 'forumthreads'
string: 'forums_thread'
string: 'friendships'
string: 'users_friendship'
string: 'gallery'
string: 'gallery_gallery'
string: 'groupmembers'
string: 'groups_membership'
string: 'groups'
string: 'groups_group'
string: 'images'
string: 'images_image'
string: 'messages'
string: 'messages_message'
string: 'moblog'
string: 'moblog_post'
string: 'projectmembers'
string: 'projects_membership'
string: 'projectrevisions'
string: 'projects_revision'
string: 'projects'
string: 'projects_project'
string: 'recordalias'
string: 'aliases_alias'
string: 'schools'
string: 'schools_school'
string: 'servers'
string: 'sync_server'
string: 'sync'
string: 'sync_notice'
string: 'users'
string: 'users_user'
string: 'wiki'
string: 'wiki_article'
string: 'wikirevisions'
string: 'wiki_revision'
string: "select * from $newname"
string: 'refModule'
string: 'static'
string: 'refModule'
string: "changing refModule 'static' to 'home' in $newname."
string: 'UID'
string: "&lt;br/&gt;\n"
string: 'refModule'
string: 'home'
string: 'forumthreads'
string: 'refModule'
string: "changing refModule 'forumthreads' to 'forums' in $newname."
string: 'UID'
string: "&lt;br/&gt;\n"
string: 'refModule'
string: 'forums'
string: 'refModel'
string: ''
string: 'refModel'
string: 'refModule'
string: 'refModule'
string: "setting refModel to $newModel in $newname."
string: 'UID'
string: "&lt;br/&gt;\n"
string: 'refModel'
string: "unknown refModule '"
string: 'refModule'
string: "' in $newname."
string: 'UID'
string: "&lt;br/&gt;\n"
string: 'modules/admin/actions/fixtables.page.php'
string: 'tablesdisplay'

<b>scanning file: /var/www/an2google/trunk/modules/admin/actions/fixreferences.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	(temprary) upgrade action to fix references to old tables
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	authentication
comment: //----------------------------------------------------------------------------------------------
string: 'admin'

<b>scanning file: /var/www/an2google/trunk/modules/admin/actions/filebrowser.act.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //	for browsing files
comment: //-------------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	authorization
comment: //---------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	get path (if present)
comment: //---------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	work out parent directory
comment: //---------------------------------------------------------------------------------------------
comment: // in docRoot, or parent is docroot
comment: //---------------------------------------------------------------------------------------------
comment: //	make list of items in this folder
comment: //---------------------------------------------------------------------------------------------
comment: //-------------------------------------------------------------------------------------
comment: //	directories
comment: //-------------------------------------------------------------------------------------
comment: //-------------------------------------------------------------------------------------
comment: //	files
comment: //-------------------------------------------------------------------------------------
comment: // display, but no link			
comment: //---------------------------------------------------------------------------------------------
comment: //	render page
comment: //---------------------------------------------------------------------------------------------
string: 'admin'
string: 'not authorized'
string: 'path'
string: 'path'
string: '//'
string: '/'
string: '..'
string: '.'
string: "/"
string: "/"
string: ''
string: '/'
string: "%%serverPath%%admin/filebrowser/"
string: "&lt;a href='"
string: "'&gt;[ &amp;lt;&amp;lt; parent directory ]&lt;/a&gt;"
string: ''
string: "%%serverPath%%admin/filebrowser/path_"
string: "&lt;a href='"
string: "'&gt;[ &amp;lt;&amp;lt; parent directory ]&lt;/a&gt;"
string: ''
string: 'ls '
string: "\n"
string: '/'
string: ''
string: '/'
string: "admin/filebrowser/path_"
string: "&lt;a href='%%serverPath%%"
string: "'&gt;$line&lt;/a&gt;"
string: 'php'
string: 'txt'
string: 'xml'
string: ' '
string: ''
string: '/'
string: ''
string: '/'
string: '/'
string: 'admin/txtedit/file_'
string: 'admin/txtedit/file_'
string: '/path_'
string: "&lt;a href='%%serverPath%%"
string: "' target='_parent'&gt;$line&lt;/a&gt;"
string: "&lt;br/&gt;\n"
string: 'modules/admin/actions/filebrowser.page.php'
string: 'filePath'
string: '~/'
string: ''
string: 'fileList'
string: 'parentLink'

<b>scanning file: /var/www/an2google/trunk/modules/admin/actions/exptable.act.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //	exports table dbSchemas as php code, for making install script
comment: //-------------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	make the code
comment: //---------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	create dbSchema array
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	add fields
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	add indices
comment: //----------------------------------------------------------------------------------------------
string: 'admin'
string: ''
string: "no table specified"
string: ''
string: "\t//----------------------------------------------------------------------------------------------\n"
string: "\t//\t"
string: " table\n"
string: "\t//----------------------------------------------------------------------------------------------\n\n"
string: "\t\$dbSchema = array();\n"
string: "\t\$dbSchema['model'] = '"
string: "';\n"
string: "\t\$dbSchema['fields'] = array(\n"
string: 'fields'
string: "\t\t'"
string: "' =&gt; '"
string: "',\n"
string: ");\n"
string: ",\n);"
string: " );\n"
string: "&lt;html&gt;
	&lt;body&gt;
	&lt;textarea rows='50' cols='140'&gt;$code&lt;/textarea&gt;
	&lt;/body&gt;
	&lt;/html&gt;
	"
string: 'table'
string: 'fields'
string: 'indices'
string: 'nodiff'
string: "describe "
string: 'fields'
string: 'Field'
string: 'Type'
string: "show indexes from "
string: 'indices'
string: 'Column_name'
string: 'Sub_part'

<b>scanning file: /var/www/an2google/trunk/modules/admin/actions/editpage.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	edit a page
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: // TODO: more error checking here (directory traversal, etc)
comment: //----------------------------------------------------------------------------------------------
string: 'admin'
string: 'module'
string: 'Module not specified.'
string: ''
string: 'Page not specified (reference).'
string: 'modules/'
string: 'module'
string: '/actions/'
string: 'Page file not found.'
string: 'xmodule'
string: 'module'
string: 'xpage'
string: 'modules/admin/actions/editpage.page.php'

<b>scanning file: /var/www/an2google/trunk/modules/admin/actions/editblock.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	edit a block template
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: // check permissions and arguments
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: // check the the block exists
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	render the page
comment: //----------------------------------------------------------------------------------------------
string: 'admin'
string: ''
string: 'no reference given'
string: 'module'
string: 'Module not specified.'
string: 'module'
string: 'modules/'
string: '/views/'
string: '.block.php'
string: 'No such block template.'
string: 'modules/admin/actions/editblock.page.php'
string: 'xmodule'
string: 'module'
string: 'xblock'

<b>scanning file: /var/www/an2google/trunk/modules/admin/actions/default.act.php</b>
string: 'modules/admin/actions/console.act.php'

<b>scanning file: /var/www/an2google/trunk/modules/admin/actions/dblayout.act.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //*	display all database schema
comment: //-------------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	only admins may do this
comment: //---------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	list tables, update and print them
comment: //---------------------------------------------------------------------------------------------
comment: //---------------------------------------------------------------------------------------------
comment: //	render the page
comment: //---------------------------------------------------------------------------------------------
comment: //$page-&gt;data['template'] = str_replace('%%tablesdisplay%%', $html, $page-&gt;data['template']);
string: 'core/dbdriver/mysqladmin.dbd.php'
string: ''
string: 'admin'
string: "&lt;hr/&gt;\n"
string: 'modules/admin/actions/dblayout.page.php'
string: 'tablesdisplay'

<b>scanning file: /var/www/an2google/trunk/modules/admin/actions/cron.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	this should be called every 10 minutes, it is the entry point of global cron
comment: //--------------------------------------------------------------------------------------------------
comment: //TODO: consider adding a bot user to take credit for changes
comment: //----------------------------------------------------------------------------------------------
comment: //	run any outstanding scheduled tasks
comment: //----------------------------------------------------------------------------------------------	
comment: //----------------------------------------------------------------------------------------------
comment: //	display report if user is administrator
comment: //----------------------------------------------------------------------------------------------
string: 'core/kcron.class.php'
string: 'data/log/'
string: "y-m-d"
string: "-cron.log.php"
string: 'a+'
string: 'admin'
string: 'modules/admin/actions/cron.page.php'
string: 'report'

<b>scanning file: /var/www/an2google/trunk/modules/admin/actions/console.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	show the admin console
comment: //--------------------------------------------------------------------------------------------------
comment: // not logged in as admin, deny
string: 'admin'
string: 'modules/admin/actions/console.page.php'

<b>scanning file: /var/www/an2google/trunk/modules/abuse/views/show.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //!	show a single abuse report in its entirety
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: UID - UID of an Abuse_Report object [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and user role
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: permissions check here, to allow for moderator role, etc
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
string: 'modules/abuse/models/report.mod.php'
string: ''
string: 'admin'
string: ''
string: 'UID'
string: ''
string: 'UID'
string: ''
string: 'modules/abuse/views/show.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/abuse/views/listreports.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	list abuse reports
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: pageNo - page number to show (int) [string]
comment: //% return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check argumentss and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: permissions check here to allow moderator role
comment: //----------------------------------------------------------------------------------------------
comment: //	load the reports
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: paginate this
string: 'modules/abuse/models/report.mod.php'
string: ''
string: 'admin'
string: ''
string: "status='open'"
string: 'abuse_report'
string: '*'
string: 'modules/abuse/views/summary.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/abuse/views/listnav.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	show recent abuse reports in formatted
comment: //--------------------------------------------------------------------------------------------------
comment: //opt: num - number of abuse reports to show (int) [string]
comment: //% return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check user roles and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: further permissions check here, perhaps a moderator role	
comment: //----------------------------------------------------------------------------------------------
comment: //	load a page of permissions from the database
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
string: 'modules/abuse/models/report.mod.php'
string: "[[:theme::navtitlebox::label=Abuse Reports:]]\n"
string: 'admin'
string: ''
string: 'num'
string: 'num'
string: "status='open'"
string: 'abuse_report'
string: '*'
string: 'createdOn'
string: ''
string: 'modules/abuse/views/summarynav.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/abuse/views/dismissbutton.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	dismiss an abuse report
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: UID - UID fo an abuse report [string]
string: ''
string: 'admin'
string: ''
string: 'UID'
string: 'UID'
string: 'modules/abuse/views/dismissbutton.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/abuse/views/button.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	shows button for reporting abuse
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: refModule - name of a kapenta module [string]
comment: //arg: refModel - object type [string]
comment: //arg: refUID - UID of object to report [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: permissions check here
comment: // TODO: clean strings
comment: //----------------------------------------------------------------------------------------------
comment: //	make the button
comment: //----------------------------------------------------------------------------------------------
string: ''
string: 'refModule'
string: '(no module)'
string: 'refModel'
string: '(no model)'
string: 'refUID'
string: '(no UID)'
string: 'refModule'
string: 'refModule'
string: 'refModel'
string: 'refModel'
string: 'refUID'
string: 'refUID'
string: 'modules/abuse/views/button.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/abuse/views/annotationform.fn.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //|	form for adding annotations to abuse reports
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: UID - UID of an Abuse_Report object [string]
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: permissions check here, allow for moderator role
comment: //----------------------------------------------------------------------------------------------
comment: //	make the block
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: more labels?
string: ''
string: 'admin'
string: ''
string: 'UID'
string: ''
string: 'UID'
string: ''
string: 'UID'
string: 'modules/abuse/views/annotationform.block.php'

<b>scanning file: /var/www/an2google/trunk/modules/abuse/models/report.mod.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	object to represent abuse reports
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //member variables
comment: //----------------------------------------------------------------------------------------------
comment: //_	currently loaded database record [array]
comment: //_	database table definition [array]
comment: //_	set to true when an object has been loaded [bool]
comment: //_ UID [string]
comment: //_ module [string]
comment: //_ model [string]
comment: //_ ref:*_* [string]
comment: //_ plaintext [string]
comment: //_ plaintext [string]
comment: //_ varchar(50) [string]
comment: //_ title [string]
comment: //_ varchar(255) [string]
comment: //_ datetime [string]
comment: //_ ref:Users_User [string]
comment: //_ datetime [string]
comment: //_ ref:Users_User [string]
comment: //----------------------------------------------------------------------------------------------
comment: //. constructor
comment: //----------------------------------------------------------------------------------------------
comment: //opt: UID - UID of a Report object [string]
comment: // initialise table schema
comment: // try load an object from the database
comment: // check if we did
comment: // make new object
comment: // initialize
comment: //----------------------------------------------------------------------------------------------
comment: //. load an object from the database given its UID
comment: //----------------------------------------------------------------------------------------------
comment: //arg: UID - UID of a Report object [string]
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //. load Report object serialized as an associative array
comment: //----------------------------------------------------------------------------------------------
comment: //arg: ary - associative array of members and values [array]
comment: //returns: true on success, false on failure [bool]
comment: //if (false == $db-&gt;validate($ary, $this-&gt;dbSchema)) { return false; }
comment: //----------------------------------------------------------------------------------------------
comment: //. save the current object to database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string on success, html report of errors on failure [string]
comment: //: $db-&gt;save(...) will raise an object_updated event if successful
comment: //----------------------------------------------------------------------------------------------
comment: //. check that object is correct before allowing it to be stored in database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: null string if object passes, warning message if not [string]
comment: //----------------------------------------------------------------------------------------------
comment: //. database table definition and content versioning
comment: //----------------------------------------------------------------------------------------------
comment: //returns: information for constructing SQL queries [array]
comment: //table columns
comment: //these fields will be indexed
comment: //revision history will be kept for these fields
comment: //revision history will be kept for these fields
comment: //----------------------------------------------------------------------------------------------
comment: //. serialize this object to an array
comment: //----------------------------------------------------------------------------------------------
comment: //returns: associative array of all members which define this instance [array]
comment: //----------------------------------------------------------------------------------------------
comment: //. serialize this object to xml
comment: //----------------------------------------------------------------------------------------------
comment: //arg: xmlDec - include xml declaration? [bool]
comment: //arg: indent - string with which to indent lines [bool]
comment: //returns: xml serialization of this object [string]
comment: //NOTE: any members which are not XML clean should be marked up before sending
comment: //----------------------------------------------------------------------------------------------
comment: //. make an extended array of data views may need
comment: //----------------------------------------------------------------------------------------------
comment: //returns: associative array of members, metadata and partial views [array]
comment: //% extended array of properties [array:string]
comment: //------------------------------------------------------------------------------------------
comment: //	links
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	...
comment: //------------------------------------------------------------------------------------------
comment: //$ext['notesHtml'] = str_replace("\n", "&lt;br/&gt;\n", $ext['notesHtml']);
comment: //------------------------------------------------------------------------------------------
comment: //	javascript
comment: //------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //. delete current object from the database
comment: //----------------------------------------------------------------------------------------------
comment: //: $db-&gt;delete(...) will raise an object_deleted event on success [bool]
comment: //returns: true on success, false on failure [bool]
comment: // nothing to do
comment: //----------------------------------------------------------------------------------------------
comment: //. add an annotation
comment: //----------------------------------------------------------------------------------------------
comment: //arg:
comment: //$session-&gt;msg('Added annotation to Abuse Report.', 'ok');
string: ''
string: ''
string: ''
string: 'UID'
string: 'refModule'
string: 'refModel'
string: 'refUID'
string: 'comment'
string: 'notes'
string: 'status'
string: 'title'
string: 'fromurl'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: ''
string: "Database error.&lt;br/&gt;\n"
string: ''
string: ''
string: ''
string: "No UID.&lt;br/&gt;\n"
string: 'module'
string: 'abuse'
string: 'model'
string: 'abuse_report'
string: 'fields'
string: 'UID'
string: 'VARCHAR(33)'
string: 'refModule'
string: 'TEXT'
string: 'refModel'
string: 'TEXT'
string: 'refUID'
string: 'VARCHAR(33)'
string: 'comment'
string: 'MEDIUMTEXT'
string: 'notes'
string: 'MEDIUMTEXT'
string: 'status'
string: 'VARCHAR(50)'
string: 'title'
string: 'VARCHAR(255)'
string: 'fromurl'
string: 'VARCHAR(255)'
string: 'createdOn'
string: 'DATETIME'
string: 'createdBy'
string: 'VARCHAR(33)'
string: 'editedOn'
string: 'DATETIME'
string: 'editedBy'
string: 'VARCHAR(33)'
string: 'indices'
string: 'UID'
string: '10'
string: 'refModule'
string: '10'
string: 'refModel'
string: '10'
string: 'refUID'
string: '10'
string: 'createdOn'
string: ''
string: 'createdBy'
string: '10'
string: 'editedOn'
string: ''
string: 'editedBy'
string: '10'
string: 'diff'
string: 'comment'
string: 'notes'
string: 'status'
string: 'nodiff'
string: 'UID'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: 'UID'
string: 'refModule'
string: 'refModel'
string: 'refUID'
string: 'comment'
string: 'notes'
string: 'status'
string: 'title'
string: 'fromurl'
string: 'createdOn'
string: 'createdBy'
string: 'editedOn'
string: 'editedBy'
string: ''
string: "&lt;kobject type='abuse_report'&gt;\n"
string: "    &lt;UID&gt;"
string: "&lt;/UID&gt;\n"
string: "    &lt;refModule&gt;"
string: "&lt;/refModule&gt;\n"
string: "    &lt;refModel&gt;"
string: "&lt;/refModel&gt;\n"
string: "    &lt;refUID&gt;"
string: "&lt;/refUID&gt;\n"
string: "    &lt;comment&gt;"
string: "&lt;/comment&gt;\n"
string: "    &lt;notes&gt;"
string: "&lt;/notes&gt;\n"
string: "    &lt;status&gt;"
string: "&lt;/status&gt;\n"
string: "    &lt;title&gt;"
string: "&lt;/title&gt;\n"
string: "    &lt;fromurl&gt;"
string: "&lt;/fromurl&gt;\n"
string: "    &lt;createdOn&gt;"
string: "&lt;/createdOn&gt;\n"
string: "    &lt;createdBy&gt;"
string: "&lt;/createdBy&gt;\n"
string: "    &lt;editedOn&gt;"
string: "&lt;/editedOn&gt;\n"
string: "    &lt;editedBy&gt;"
string: "&lt;/editedBy&gt;\n"
string: "&lt;/kobject&gt;\n"
string: "&lt;?xml version='1.0' encoding='UTF-8' ?&gt;\n"
string: 'viewUrl'
string: ''
string: 'viewLink'
string: ''
string: 'editUrl'
string: ''
string: 'editLink'
string: ''
string: 'delUrl'
string: ''
string: 'delLink'
string: ''
string: 'newUrl'
string: ''
string: 'newLink'
string: ''
string: 'admin'
string: 'viewUrl'
string: '%%serverPath%%Abuse/show/'
string: 'UID'
string: 'viewLink'
string: "&lt;a href='"
string: 'viewUrl'
string: "'&gt;[ more &amp;gt;gt; ]&lt;/a&gt;"
string: 'admin'
string: 'editUrl'
string: '%%serverPath%%Abuse/editreport/'
string: 'UID'
string: 'editLink'
string: "&lt;a href='"
string: 'editUrl'
string: "'&gt;[ edit ]&lt;/a&gt;"
string: 'delUrl'
string: '%%serverPath%%Abuse/delreport/'
string: 'UID'
string: 'delLink'
string: "&lt;a href='"
string: 'delUrl'
string: "'&gt;[ delete ]&lt;/a&gt;"
string: 'commentHtml'
string: 'comment'
string: 'commentHtml'
string: "\n"
string: "&lt;br/&gt;\n"
string: 'commentHtml'
string: 'notesHtml'
string: ''
string: ''
string: 'notes'
string: 'notesHtml'
string: 'notes'
string: 'notesHtml'
string: '(none yet)'
string: 'UIDJsClean'
string: 'UID'
string: ''
string: "&lt;!-- annotation --&gt;\n"
string: "&lt;b&gt;"
string: "&lt;/b&gt;"
string: " (added: "
string: ")&lt;br/&gt;"
string: "\n"
string: "&lt;br/&gt;\n"
string: "&lt;br/&gt;"
string: ""
string: "&lt;hr/&gt;"
string: 'sMessage'
string: "Added annotation to Abuse Report "
string: "&lt;br/&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/abuse/inc/install.inc.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	install script for Abuse module
comment: //--------------------------------------------------------------------------------------------------
comment: //+	reports are human-readable HTML, with script-readable HTML comments
comment: //--------------------------------------------------------------------------------------------------
comment: //|	install the Abuse module
comment: //--------------------------------------------------------------------------------------------------
comment: //returns: html report or false if not authorized [string][bool]
comment: //----------------------------------------------------------------------------------------------
comment: //	create or upgrade Abuse_Report table
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	done
comment: //----------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------------------
comment: //|	discover if this module is installed
comment: //--------------------------------------------------------------------------------------------------
comment: //:	if installed correctly report will contain HTML comment &lt;!-- installed correctly --&gt;
comment: //returns: HTML installation status report [string]
comment: //----------------------------------------------------------------------------------------------
comment: //	ensure the table which stores Report objects exists and is correct
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	done
comment: //----------------------------------------------------------------------------------------------
string: 'core/dbdriver/mysqladmin.dbd.php'
string: 'modules/abuse/models/report.mod.php'
string: 'admin'
string: ''
string: 'admin'
string: ''
string: '&lt;!-- table installed correctly --&gt;'
string: '&lt;!-- module installed correctly --&gt;'

<b>scanning file: /var/www/an2google/trunk/modules/abuse/actions/show.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	display the complete thread fo an abuse report
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check permissions and reference
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	render the page
comment: //----------------------------------------------------------------------------------------------
string: 'modules/abuse/models/report.mod.php'
string: 'admin'
string: ''
string: "Abuse report not speicified (UID)."
string: 'bad'
string: 'abuse/'
string: 'Report not found.'
string: 'modules/abuse/actions/show.page.php'
string: 'UID'

<b>scanning file: /var/www/an2google/trunk/modules/abuse/actions/newreport.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	create a new Report object
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //*	check permissions and any POST variables
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //*	create the object
comment: //----------------------------------------------------------------------------------------------
comment: //case 'notes':		$model-&gt;notes = $utils-&gt;cleanString($value); break;
comment: //case 'status':	$model-&gt;status = $utils-&gt;cleanString($value); break;
comment: //----------------------------------------------------------------------------------------------
comment: //*	check that object was created and redirect
comment: //----------------------------------------------------------------------------------------------
string: 'modules/abuse/models/report.mod.php'
string: 'public'
string: 'refModule'
string: 'reference module not specified'
string: 'refModel'
string: 'reference model not specified'
string: 'refUID'
string: 'reference object UID not specified'
string: 'refModule'
string: 'specified module does not exist'
string: 'refModel'
string: 'refUID'
string: 'specified owner does not exist in database'
string: 'refmodule'
string: 'refmodel'
string: 'refuid'
string: 'comment'
string: 'title'
string: 'fromurl'
string: ''
string: 'open'
string: ''
string: "Report Submitted.&lt;br/&gt;Thank you for letting us know.\n"
string: 'ok'
string: 'Could not create new Report:&lt;br/&gt;'
string: 'bad'

<b>scanning file: /var/www/an2google/trunk/modules/abuse/actions/list.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	list abuse reports
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	authentication (only admins can do this for now)
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	show the page
comment: //----------------------------------------------------------------------------------------------
string: 'admin'
string: 'page'
string: 'args'
string: 'page'
string: 'modules/abuse/actions/list.page.php'
string: 'pageNo'
string: ''

<b>scanning file: /var/www/an2google/trunk/modules/abuse/actions/install.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	temp action to install the abuse module
comment: //--------------------------------------------------------------------------------------------------
comment: //TODO: make standard install script
comment: //----------------------------------------------------------------------------------------------
comment: //	check permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	create the table
comment: //----------------------------------------------------------------------------------------------
string: 'modules/abuse/models/report.mod.php'
string: 'admin'
string: 'abuse_report'
string: "Abuse report module installed.&lt;br/&gt;\n"
string: "Could not create table 'abuse_report'.&lt;br/&gt;\n"

<b>scanning file: /var/www/an2google/trunk/modules/abuse/actions/dismiss.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	dismiss an abuse report
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check arguments and permissions
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	delete the report and redirect back to the abuse list
comment: //----------------------------------------------------------------------------------------------
string: 'modules/abuse/models/report.mod.php'
string: 'admin'
string: 'UID'
string: 'UID'
string: 'abuse/list/'

<b>scanning file: /var/www/an2google/trunk/modules/abuse/actions/default.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	show an abuse report is specified, list them if not
comment: //--------------------------------------------------------------------------------------------------
string: ''
string: 'modules/abuse/actions/list.act.php'
string: 'modules/abuse/actions/show.act.php'

<b>scanning file: /var/www/an2google/trunk/modules/abuse/actions/annotate.act.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	add an annotation to an abuse report
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	check permissions and POST vars
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	annotate
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: sanitize
comment: //----------------------------------------------------------------------------------------------
comment: //	notify other admins and redirect back to abuse report
comment: //----------------------------------------------------------------------------------------------
string: 'modules/abuse/models/report.mod.php'
string: 'admin'
string: 'action'
string: 'annotateReport'
string: 'action'
string: 'Action not supported.'
string: 'UID'
string: 'UID not supplied.'
string: 'UID'
string: 'Abuse report not found.'
string: 'comment'
string: 'No comment added.'
string: 'bad'
string: 'abuse/show/'
string: 'comment'
string: "Abuse report annotated by "
string: '/abuse/show/'
string: 'abuse'
string: 'abuse_report'
string: 'abuse/show/'

<b>scanning file: /var/www/an2google/trunk/data/lastrun.cron.php</b>
comment: /*
tenmins: 1291850906 # 2010-12-8 23:28:26
hourly: 1291849408 # 2010-12-8 23:03:28
daily: 1291849830 # 2010-12-8 23:10:30
*/

<b>scanning file: /var/www/an2google/trunk/core/xmlentity.class.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	HOW XML PARSING WORKS
comment: //--------------------------------------------------------------------------------------------------
comment: //+	an XmlEntity object is passed a string containing XML, the first opening tag is found.
comment: //+	if no other opening tags exist within that first tag is used for this element and the remainder
comment: //+	of the string is passed to this XmlEntity's parent.
comment: //+
comment: //+	If another opening tag is incountered before this entities closing tag, a child XmlEntity object
comment: //+	is created and added to this objects collection of children, and the string, starting from the
comment: //+	end of the opening tag is passed to the child object.  The child object will then
comment: //+	pass back the remainder of the string when it is finished.
comment: //+
comment: //+	The cycle then repeats, if an opening tag is found before this entity's closing tag, another
comment: //+	child is created until there are no more to process.  Any remaining xml after this entities
comment: //+	tag is passed to this entities parent.  If this is the root entity, it is stashed in surplus
comment: //+	for the program using this class to deal with.
comment: //+
comment: //+	CDATA sections are stripped out into a global array before processing and replaced by a 
comment: //+	marker in the XML.  This marker is replaced by the CDATA section after the document tree has
comment: //+	been created.
comment: //+
comment: //+	CDATA sections will set $this-&gt;cdata to true, and wrapping is added back on toString/toXml
comment: //+	
comment: //--------------------------------------------------------------------------------------------------
comment: //+	TO CONSIDER:
comment: //+	- adding a UID to every entity for easy addressing 
comment: //+	- replace globals with values on the root entity passed by reference
comment: //--------------------------------------------------------------------------------------------------
comment: // ugly, but leave for now
comment: //----------------------------------------------------------------------------------------------
comment: //	member variables
comment: //----------------------------------------------------------------------------------------------
comment: // only for the root entity
comment: // comments are stripped out by the root entity
comment: // html, body, p, a, i, b, etc
comment: // text after XML
comment: //----------------------------------------------------------------------------------------------
comment: //.	constructor
comment: //----------------------------------------------------------------------------------------------
comment: //opt: xml - raw XML to parse [string]
comment: //----------------------------------------------------------------------------------------------
comment: //.	convert XML into more XmlEntity objects
comment: //----------------------------------------------------------------------------------------------
comment: //opt: xml - raw XML to parse [string]
comment: //returns: false if XML not parsed [bool]
comment: //: this is in a recursive relationship with childPassBack()
comment: //------------------------------------------------------------------------------------------
comment: //	initialization (only done once)
comment: //------------------------------------------------------------------------------------------
comment: // only filled on first request
comment: // use global after that
comment: // store CDATA in this array
comment: // and ditch the HTML/XML comments
comment: //------------------------------------------------------------------------------------------
comment: //	look for and process any opening tag within the XML  passed
comment: //------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------
comment: //	no XML in string passed, return it to parent if there is one
comment: //--------------------------------------------------------------------------------------
comment: // string to array
comment: // set my type 
comment: // set my attributes
comment: //--------------------------------------------------------------------------------------			
comment: //	self-closing tag, no possibility of child entities
comment: //--------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------			
comment: //	might be child entities, look for them
comment: //--------------------------------------------------------------------------------------
comment: // look for child entities
comment: // done, return to parent
comment: // end loadFromString()
comment: //----------------------------------------------------------------------------------------------
comment: //.	no longer called by children due to stack space issues (consider renaming)
comment: //----------------------------------------------------------------------------------------------
comment: //: this is where the structure of XmlEntity objects get built and linked together, important
comment: //--------------------------------------------------------------------------------------
comment: // find my closing tag (or one of the same type)
comment: //--------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------
comment: //	no closing tag (invalid XML), let parent continue with any other tags
comment: //----------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------
comment: //	check if any opening tags (child entities) exist before closing tag
comment: //---------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------
comment: //	if no opening tag
comment: //--------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------
comment: //	look for any text which needs to be added as a value or inline
comment: //-----------------------------------------------------------------------------------
comment: // add everything up to the
comment: // beginning of the closing tag
comment: // as a new inline element
comment: // expand any CDATA labels in value
comment: // done here, return to parent object
comment: //--------------------------------------------------------------------------------------
comment: //	there is an opening tag, if it is before closing tag then there is child entity
comment: //--------------------------------------------------------------------------------------		
comment: //	there is (at least one) child entitiy
comment: //----------------------------------------------------------------------------------
comment: //	add child element for inline text section (if it actually contains text)
comment: //----------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------
comment: //	create a new XmlEntiy for the nested element
comment: //----------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------
comment: //	and have it load itself
comment: //----------------------------------------------------------------------------------
comment: // continue while loop...
comment: //----------------------------------------------------------------------------------
comment: //	next opening tag is AFTER closing tag, no nested entity
comment: //----------------------------------------------------------------------------------
comment: // add any text remaining in the
comment: // element as a new inline entity
comment: // just a value, not inline
comment: // expand any CDATA labels in value
comment: //----------------------------------------------------------------------------------
comment: //	nothing more in this element, return to parent
comment: //----------------------------------------------------------------------------------
comment: // exit point of loop
comment: // end while
comment: // end childPassBlock
comment: //----------------------------------------------------------------------------------------------
comment: //.	find first &lt;tag&gt; or &lt;tag /&gt; which is not a closing tag starting from a given position
comment: //----------------------------------------------------------------------------------------------
comment: //arg: searchFrom - position to begin searching from in xml_proc_curr
comment: //returns: array of (start, end) or false on failure [array] [bool]
comment: // find &lt;
comment: // no more &lt; to expore
comment: // ignore closing tags
comment: // found
comment: // include &gt; in tag
comment: // no closing brace
comment: //----------------------------------------------------------------------------------------------
comment: //.	find first &lt;/tag&gt; starting from a given position
comment: //----------------------------------------------------------------------------------------------
comment: //arg: tag - entity type to look for [string]
comment: //arg: searchFrom - position within xml_proc_curr [int]
comment: //returns: array of (start, end) or false if not found [array] [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //.	divides an opening tag into its components ( &lt;tag x='2' y='5'&gt; into array [type][attribs] )
comment: //----------------------------------------------------------------------------------------------
comment: //arg: tag - a self-closing XML entity or opening tag [string]
comment: //returns: array of type and nested associative array of attributes [array]
comment: //: test case &lt;something x='223' y=" soe  "&gt;
comment: //------------------------------------------------------------------------------------------
comment: //	first some cleaning
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	get tag name
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	get tag attributes
comment: //------------------------------------------------------------------------------------------
comment: // currently in a quoted string?
comment: // attrubute name buffer
comment: // string buffer
comment: // spaces outside of quoted values are ignored
comment: // values should be quoted
comment: // toggle in-quoted-string
comment: // end of quoted string
comment: // copy to array of attribs
comment: // clear attrib name buffer
comment: // clear quoted string buffer
comment: // add either to attribute name or quoted string
comment: //------------------------------------------------------------------------------------------
comment: //	done
comment: //------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	return the value of the first element of a given type
comment: //----------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	check self first
comment: //------------------------------------------------------------------------------------------
comment: //collape XML and remove indents
comment: //------------------------------------------------------------------------------------------
comment: //	check all children
comment: //------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	return all entities of a given type, say all img from a web page
comment: //----------------------------------------------------------------------------------------------
comment: // check self
comment: // check children
comment: //----------------------------------------------------------------------------------------------
comment: //	make xml string from tree of XmlEntity objects
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	make html string from tree of XmlEntity objects
comment: //----------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	attributes of this tag
comment: //------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------
comment: //	simple tag
comment: //--------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------
comment: //	with nested children
comment: //--------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	remove all elements, leaving only inlines and values
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	add a child element	// TODO - adding attributes
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	save as commented PHP (precludes casual viewing/execution)
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	strip comments from xml ( &lt;! to &gt; )
comment: //----------------------------------------------------------------------------------------------
comment: // no more comments
comment: //----------------------------------------------------------------------------------------------
comment: //	strip CDATA sections from $xml_proc_curr (global) and add to $xml_cdata_set (global, array)
comment: //----------------------------------------------------------------------------------------------
comment: // remove this
comment: // once tested
comment: //echo "next[start]: " . $next['start'] . " (" . substr($xml_proc_curr, $next['start'], 1) . ")&lt;br/&gt;\n";
comment: //echo "next[end]: " . $next['end'] . " (" . substr($xml_proc_curr, $next['end'], 1) . ")&lt;br/&gt;\n";
comment: //echo "next[startd]: " . $next['startd'] . " (" . substr($xml_proc_curr, $next['startd'], 1) . ")&lt;br/&gt;\n";
comment: //echo "next[endd]: " . $next['endd'] . " (" . substr($xml_proc_curr, $next['endd'], 1) . ")&lt;br/&gt;\n";
comment: //echo "xml proc curr: $xml_proc_curr &lt;br/&gt;\n";
comment: //echo "segment: " . substr($xml_proc_curr, $next['start'], $next['end'] - $next['start']) . "&lt;br/&gt;\n";
comment: //echo "content: " . substr($xml_proc_curr, $next['startd'], $next['endd'] - $next['startd']) . "&lt;br/&gt;\n";
comment: //echo "adding section $uid : $section &lt;br/&gt;\n";
comment: // replace /w marker
comment: //echo "xml is now: &lt;textarea rows='5' cols='80'&gt;$xml_proc_curr&lt;/textarea&gt;&lt;br/&gt;\n";
comment: //----------------------------------------------------------------------------------------------
comment: //	find first CDATA section, returns false if none found or array of positions:
comment: //----------------------------------------------------------------------------------------------
comment: //	&lt;![CDATA[protected content not treated as xml]&gt;&gt;
comment: //	^        ^                                  ^  ^
comment: //  start    startd                             endd, end
comment: //----------------------------------------------------------------------------------------------
comment: //	determine whether a string contains a valid cdata label
comment: //----------------------------------------------------------------------------------------------
comment: // note that there should only be one CDATA section per value
comment: // likely?
comment: // yes -&gt; check for each UID in table	
comment: // no cdata label found
comment: //----------------------------------------------------------------------------------------------
comment: //	make html cdata table
comment: //----------------------------------------------------------------------------------------------
string: ''
string: ''
string: ''
string: ''
string: ''
string: ''
string: '&lt;br&gt;'
string: '&lt;br/&gt;'
string: ''
string: ''
string: 'tag'
string: 'type'
string: 'attribs'
string: '/&gt;'
string: 'end'
string: 'end'
string: ''
string: 'start'
string: ''
string: 'inline'
string: 'CDATA:'
string: 'end'
string: 'start'
string: 'start'
string: 'start'
string: ''
string: 'inline'
string: 'start'
string: 'start'
string: ''
string: 'inline'
string: 'CDATA:'
string: 'end'
string: 'start'
string: '&lt;'
string: 'start'
string: 'start'
string: '&lt;/'
string: 'start'
string: 'end'
string: '&gt;'
string: 'start'
string: 'end'
string: 'end'
string: 'tag'
string: 'start'
string: 'end'
string: 'start'
string: 'start'
string: '&lt;/'
string: '&gt;'
string: 'start'
string: 'end'
string: 'start'
string: 'attribs'
string: "'"
string: '&lt;'
string: '/&gt;'
string: '&gt;'
string: "\t"
string: "\r"
string: "\n"
string: "\""
string: ''
string: ''
string: ''
string: ' '
string: ' '
string: ' '
string: ' '
string: 'type'
string: 'type'
string: ''
string: ''
string: ' '
string: '='
string: "\""
string: 'attribs'
string: ''
string: ''
string: ''
string: "&lt;indent&gt;"
string: ''
string: "&lt;/indent&gt;"
string: ''
string: '&lt;indent&gt;'
string: ''
string: '&lt;/indent&gt;'
string: ''
string: '[indent]'
string: ''
string: ''
string: ' '
string: "=\""
string: "\""
string: "&lt;"
string: "&gt;"
string: "&lt;/"
string: "&gt;"
string: '&lt;inline&gt;'
string: ''
string: '&lt;/inline&gt;'
string: ''
string: "&lt;![CDATA["
string: "]]&gt;"
string: ''
string: "[indent]&lt;"
string: "/&gt;\n"
string: "[indent]"
string: "&lt;/"
string: "&gt;\n"
string: "[indent]"
string: "\n"
string: '[indent]'
string: "[indent]\t"
string: "[indent]"
string: "\n"
string: '[indent]'
string: ''
string: ''
string: " &lt;font color='red'&gt;"
string: "&lt;/font&gt;=&lt;font color='blue'&gt;\""
string: "\"&lt;/font&gt;"
string: "&amp;lt;&lt;b&gt;"
string: "&lt;/b&gt;"
string: "&amp;gt;"
string: "&amp;lt;&lt;b&gt;/"
string: "&lt;/b&gt;&amp;gt;"
string: "&lt;font color='green'&gt;"
string: "&lt;/font&gt;"
string: ''
string: "[indent]&amp;lt;&lt;b&gt;"
string: "&lt;/b&gt;"
string: " /&amp;gt;&lt;br/&gt;\n"
string: "[indent]"
string: "&lt;br/&gt;\n"
string: "[indent]"
string: "&lt;br/&gt;\n"
string: '[indent]'
string: "[indent]&amp;nbsp;&amp;nbsp;&amp;nbsp;"
string: "[indent]"
string: "&lt;br/&gt;\n"
string: ' '
string: ''
string: 'w+'
string: "&lt;"
string: "? /"
string: "*\n"
string: "*"
string: "/ ?"
string: "&gt;"
string: 'comment'
string: 'start'
string: 'end'
string: 'start'
string: '&lt;!'
string: 'start'
string: 'end'
string: "&gt;"
string: 'start'
string: 'end'
string: 'end'
string: 'comment'
string: 'start'
string: 'end'
string: 'start'
string: 'startd'
string: 'endd'
string: 'startd'
string: 'start'
string: 'CDATA:'
string: 'end'
string: '&lt;![CDATA['
string: ']]&gt;'
string: 'start'
string: 'end'
string: 'startd'
string: 'endd'
string: 'x'
string: 'CDATA:'
string: 'x'
string: 'CDATA:'
string: "&lt;table&gt;"
string: "\t&lt;tr&gt;\n"
string: "\t\t&lt;td&gt;$uid&lt;/td&gt;\n"
string: "\t\t&lt;td&gt;$value&lt;/td&gt;\n"
string: "\t&lt;/tr&gt;\n"
string: "&lt;/table&gt;"

<b>scanning file: /var/www/an2google/trunk/core/kxmldocument.class.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	a simple XML parser for converting XML documents into other objects
comment: //--------------------------------------------------------------------------------------------------
comment: //+	This parser first finds all &lt;tags&gt; within the raw document, collect them into the tag array
comment: //+	then folds the tag array into a doubly linked tree of XML entities.
comment: //+
comment: //+	Tags array contains the following metadata:
comment: //+	 [start] =&gt; offset within raw document [int]
comment: //+	 [content] =&gt; the tag itself [string]
comment: //+	 [length] =&gt; length of content [int]
comment: //+	 [type] =&gt; name of tag, eg p, img, body, etc [string]
comment: //+	 [attributes] =&gt; associative array [array]
comment: //+	 [category] =&gt; open, close or selfclose [string]
comment: //+	 [entity] =&gt; XML entity this is part of [int]
comment: //+
comment: //+	Entities array contains the following metadata:
comment: //+  [handle] =&gt; handle to this entity [int]
comment: //+  [category] =&gt; pair or single? [bool]
comment: //+  [parent] =&gt; handle to parent, 0 if root [int]
comment: //+  [type] =&gt; entity type [string]
comment: //+  [start] =&gt; offset within raw [int]
comment: //+  [length] =&gt; to end of closing tag [int]
comment: //+  [vstart] =&gt; value offset within raw [int]
comment: //+  [vlength] =&gt; to end of value [int]
comment: //+  [children] =&gt; array of pointers to children [array]
comment: //+  [attributes] =&gt; associative array of attributes ('foo' =&gt; 'bar;) [array]
comment: //+  [tag1] =&gt; array index of first tag [int]
comment: //+  [tag2] =&gt; array index of second tag (if any) [int]
comment: //+
comment: //+	handles to entities are always greater than 0
comment: //+ 
comment: //----------------------------------------------------------------------------------------------
comment: //	member variables
comment: //----------------------------------------------------------------------------------------------
comment: // raw XML document [string]
comment: // XML entities [array]
comment: // &lt;tags&gt;all of them&lt;/tags&gt; [array]
comment: // set to true when an XML document is successfully loaded [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //.	constructor
comment: //----------------------------------------------------------------------------------------------
comment: //opt: raw - a complete XML document or filename [string]
comment: //opt: isFile - set to true raw is a filename [bool]
comment: // try to load XML from file
comment: //----------------------------------------------------------------------------------------------
comment: //.	parse entities into doubly linked tree (also doubly linked list)
comment: //----------------------------------------------------------------------------------------------
comment: //	clear entities array 
comment: //------------------------------------------------------------------------------------------
comment: //	some local variables
comment: //------------------------------------------------------------------------------------------
comment: //%	state of state machine [string]
comment: //%	length or raw document [int]
comment: //%	individual tags [array]
comment: //%	holds current item being read
comment: //%	current tag
comment: //%	array index of current tag
comment: //%	are we currently reading a type name? [bool]
comment: //%	are we currently reading an attribute name? [bool]
comment: //%	are we currently reading a dq string? [bool]
comment: //%	are we currently reading an sq string? [bool]
comment: //------------------------------------------------------------------------------------------
comment: //	first parse for tags (not entities)
comment: //------------------------------------------------------------------------------------------
comment: //%	current char
comment: //--------------------------------------------------------------------------------------
comment: //	outside mode (not within an entity or value)
comment: //--------------------------------------------------------------------------------------
comment: // check this isn't CDATA
comment: // we've discovered a CDATA section, ignore it
comment: // unclosed CDATA
comment: // skip to end of CDATA
comment: // we've discovered a tag, make a new array for it
comment: // don't need this any more, will only confuse other modes
comment: //--------------------------------------------------------------------------------------
comment: //	tag mode (inside a tag, but not any spacific part of one)
comment: //--------------------------------------------------------------------------------------
comment: //	we've reached the end of the tag, add to tag array and process further
comment: //	check it's not a comment or XML typedef
comment: //	add it to the collection
comment: // 	add to tags array
comment: //	extract attributes, etc
comment: // not at end yet, check for state changes to string modes
comment: // don't need this any more, will only confuse other modes
comment: //--------------------------------------------------------------------------------------
comment: //	sq double string mode (inside tag)
comment: //--------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------
comment: //	dq double string mode (inside tag)
comment: //--------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //.	parse a single tag for type, attributes and category
comment: //----------------------------------------------------------------------------------------------
comment: //arg: id - array index of tag we'd like to know more about [int]
comment: //	tag name, eg img, p, body, etc
comment: //	associative array
comment: //	may be changed to close or selfclose
comment: //	claimed by an entity?
comment: // local cache
comment: //------------------------------------------------------------------------------------------
comment: // remove angle brackets, look for opening and closing slashes to guess category
comment: //------------------------------------------------------------------------------------------
comment: //	remove the opening slash
comment: //	set category
comment: //	remove the closing slash
comment: //	set category
comment: //------------------------------------------------------------------------------------------
comment: // parse for pieces of tag
comment: //------------------------------------------------------------------------------------------
comment: //%	is this char some witespace [bool]
comment: //--------------------------------------------------------------------------------------
comment: //	look for tokens, equal signs, single and double quoted strings
comment: //--------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------
comment: //	token mode: continue to end of token (whitespace or '=')
comment: //--------------------------------------------------------------------------------------
comment: // if whitespace then add this token to pieces, we're done
comment: // if eq sign then add this token to pieces, we're done
comment: // if mode is still token
comment: //--------------------------------------------------------------------------------------
comment: //	double quoted string, continue to end of dq string
comment: //--------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------
comment: //	single quoted string, continue to end of sq string
comment: //--------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------
comment: //	equals (always a single character)
comment: //--------------------------------------------------------------------------------------
comment: // clear anything left in the buffer
comment: //------------------------------------------------------------------------------------------
comment: // look for type and attributes
comment: //------------------------------------------------------------------------------------------
comment: // first piece is always type
comment: //----------------------------------------------------------------------------------------------
comment: //.	make entities tree
comment: //----------------------------------------------------------------------------------------------
comment: //arg: parentId - array index of parent entity, initially 0 [int]
comment: //arg: tagId - array index of the first tag, initially 0 [int]
comment: //returns: true on success, false on failure [bool]
comment: //echo "linking tag $tagId to parent $parentId (tt: " . $tag['type'] . ")&lt;br/&gt;\n";
comment: //----------------------------------------------------------------------------------
comment: // add as a new XML entity
comment: //----------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------
comment: // go through tags recursively from this point on until we find the closing tag
comment: //----------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------
comment: //	we've found the closing tag
comment: //--------------------------------------------------------------------------
comment: // link entity and tag
comment: // set value start and length (end of open tag to start of close tag)
comment: // set entity length 
comment: // done with loop
comment: //--------------------------------------------------------------------------
comment: //	we've found some other tag, try add it as a child entity of this one
comment: //--------------------------------------------------------------------------
comment: /* should throw error here */
comment: // and we're done :-)
comment: //----------------------------------------------------------------------------------
comment: // add as a new XML entity
comment: //----------------------------------------------------------------------------------
comment: //	convert to entity
comment: //	link child object
comment: //	and we're done :-)
comment: // shouldn't happen, maybe add error checking here
comment: // shouldn't happen, maybe add error checking here
comment: //----------------------------------------------------------------------------------------------
comment: //.	remove excess data from the tags array once it has been added to entities
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //.	make a new XML entity, add it to entities array and return it
comment: //----------------------------------------------------------------------------------------------
comment: //arg: parentId - array index of parent entity [int]
comment: //arg: tagId - array index of a tag to base this entity on [int]
comment: //returns: xml entity array, or false on failure [array][bool]
comment: //------------------------------------------------------------------------------------------
comment: //	make the entity array
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	link tag and parent to the new entity, add to entities array and return it
comment: //------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //.	get details of entity given handle
comment: //----------------------------------------------------------------------------------------------
comment: //arg: handle - array index of an entity [int]	
comment: //returns: array of handles metadata, or false on failure [array][bool]
comment: //----------------------------------------------------------------------------------------------
comment: //.	get the value of an entity
comment: //----------------------------------------------------------------------------------------------
comment: //arg: handle - array index of an entity [int]
comment: //opt: tags - include tags [bool]
comment: //returns: contents, optionally wrapped in original tags [string]
comment: // self closing tag, no contents
comment: // error condition
comment: // TODO: log this
comment: //----------------------------------------------------------------------------------------------
comment: //.	get array of handles child entities
comment: //----------------------------------------------------------------------------------------------
comment: //opt: handle - array index of an entity [int]	
comment: //returns: array (posibly empty) of handles to children, or false on failure [array][bool]
comment: //----------------------------------------------------------------------------------------------
comment: //.	get array of child entities as associative array (value =&gt; type)
comment: //----------------------------------------------------------------------------------------------
comment: //opt: handle - array index of an entity, default is root [int]
comment: //returns: array (possibly empty) of of child types and values, false on failure [array][bool]
comment: //; Note that there can be only one child of each type and attributes, etc not returned
comment: //----------------------------------------------------------------------------------------------
comment: //.	try to fill a 2d array with children of a given entity
comment: //----------------------------------------------------------------------------------------------
comment: //arg: handle - array index of an entity [int]
comment: //arg: fill - associative array to fill [array]
comment: //returns: array with any values filled in, or false on failure [array][bool]
comment: //;	for example, if the array has a key called foo, then there should be a child of type foo
comment: //;	note that array keys and entity types are case insensitive for this method
comment: //TODO: remove the N^2 loop, lowercase the fill keys into a separate array
comment: //echo "handle: $handle (" . $this-&gt;entities[$handle]['type'] . ")&lt;br/&gt;\n";
comment: //----------------------------------------------------------------------------------------------
comment: //.	print tags for debugging
comment: //----------------------------------------------------------------------------------------------
comment: //returns: html table [string]
comment: //----------------------------------------------------------------------------------------------
comment: //.	print entities for debugging
comment: //----------------------------------------------------------------------------------------------
comment: //returns: html table [string]
comment: //----------------------------------------------------------------------------------------------
comment: //.	remove CDATA wrapper from a value
comment: //----------------------------------------------------------------------------------------------
comment: //arg: txt - string wrapped in CDATA [string]
comment: //returns: string without CDATA [string]
string: ''
string: ''
string: ''
string: ''
string: 'outside'
string: ''
string: 'outside'
string: '&lt;'
string: '&lt;![CDATA['
string: ']]&gt;'
string: 'tag'
string: 'start'
string: 'content'
string: 'length'
string: ''
string: 'tag'
string: "&gt;"
string: 'content'
string: 'length'
string: 'content'
string: '&lt;?xml'
string: 'content'
string: '&lt;!--'
string: 'content'
string: 'outside'
string: "'"
string: 'sqstring'
string: "\""
string: 'dqstring'
string: 'content'
string: ''
string: 'sqstring'
string: 'content'
string: "'"
string: 'tag'
string: 'dqstring'
string: 'content'
string: "\""
string: 'tag'
string: 'type'
string: ''
string: 'attributes'
string: 'category'
string: 'open'
string: 'entity'
string: 'content'
string: 'length'
string: '/'
string: 'category'
string: 'close'
string: '/'
string: 'category'
string: 'selfclose'
string: ''
string: 'inside'
string: ' '
string: "\n"
string: "\r"
string: "\t"
string: 'inside'
string: "\""
string: 'dqstring'
string: "'"
string: 'sqstring'
string: "="
string: 'equals'
string: 'token'
string: 'token'
string: ''
string: 'inside'
string: '='
string: ''
string: 'equals'
string: 'token'
string: 'dqstring'
string: "\""
string: "\""
string: ''
string: 'inside'
string: 'sqstring'
string: "'"
string: "'"
string: ''
string: 'inside'
string: 'equals'
string: '='
string: ''
string: 'inside'
string: ''
string: 'type'
string: ''
string: ''
string: ''
string: '='
string: ''
string: ''
string: 'attributes'
string: 'entity'
string: 'category'
string: 'open'
string: 'type'
string: 'type'
string: 'entity'
string: 'close'
string: 'category'
string: 'entity'
string: 'handle'
string: 'tag2'
string: 'vstart'
string: 'start'
string: 'length'
string: 'vlength'
string: 'start'
string: 'vstart'
string: 'length'
string: 'length'
string: 'vlength'
string: 'handle'
string: 'children'
string: 'handle'
string: 'children'
string: 'handle'
string: 'selfclose'
string: 'entity'
string: 'handle'
string: 'handle'
string: 'close'
string: 'start'
string: 'start'
string: 'length'
string: 'length'
string: 'category'
string: 'category'
string: 'entity'
string: 'entity'
string: 'pair'
string: 'selfclose'
string: 'category'
string: 'single'
string: 'handle'
string: 'category'
string: 'parent'
string: 'type'
string: 'type'
string: 'start'
string: 'start'
string: 'length'
string: 'length'
string: 'valuestart'
string: 'valuelength'
string: 'children'
string: 'attributes'
string: 'attributes'
string: 'tag1'
string: 'tag2'
string: 'entity'
string: 'handle'
string: 'children'
string: 'handle'
string: 'handle'
string: 'value'
string: 'start'
string: 'length'
string: 'single'
string: 'category'
string: ''
string: 'vstart'
string: ''
string: 'vlength'
string: ''
string: 'vstart'
string: 'vlength'
string: 'children'
string: 'children'
string: 'type'
string: 'handle'
string: 'children'
string: 'type'
string: 'handle'
string: 'type'
string: 'cat'
string: 'start'
string: 'content'
string: 'type'
string: 'category'
string: 'start'
string: 'content'
string: 'handle'
string: 'parent'
string: 'cat'
string: 'type'
string: 'tag1'
string: 'tag2'
string: 'children'
string: 'contents'
string: 'handle'
string: 'parent'
string: 'category'
string: 'type'
string: 'tag1'
string: 'tag2'
string: '|'
string: 'children'
string: 'handle'
string: '&lt;![CDATA['
string: ']]&gt;'

<b>scanning file: /var/www/an2google/trunk/core/kutils.class.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	utility object, performs miscellaneous tasks
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //.	make a random number
comment: //----------------------------------------------------------------------------------------------
comment: //opt: min - bottom of range [float]
comment: //opt: max - top of range [float]
comment: //: I don't think this is needed with PHP5
comment: //returns: a random number (0-1) [float]
comment: //----------------------------------------------------------------------------------------------
comment: //.	clean a string of crap (to match searches and try stop SQL included into query)
comment: //----------------------------------------------------------------------------------------------
comment: //arg: toClean - string [string]
comment: //returns: safer version of string to prevent JavaScript, HTML and SQL injection [string]
comment: //: this is a very old function, from first version of Kapenta, deprecated
comment: //$session-&gt;msgAdmin("deprecated: cleanString()", 'bug');
comment: //----------------------------------------------------------------------------------------------
comment: //.	Take tags out of HTML
comment: //----------------------------------------------------------------------------------------------
comment: //arg: someText - text which may contain HTML tags [string]
comment: //returns: text without HTML tags [string]
comment: //----------------------------------------------------------------------------------------------
comment: //.	remove all but alphanumeric characters from a string (allow specified others)
comment: //----------------------------------------------------------------------------------------------
comment: //arg: txt - text to clean [string]
comment: //opt: allow - string of chars to allow [
comment: //returns: only characters 0-9, a-z, A-Z
comment: // loop invariant
comment: // 0-9
comment: // a-z
comment: // A-Z
comment: // specified by caller
comment: // done
comment: //----------------------------------------------------------------------------------------------
comment: //.	convert a 2d array into a simple XML document
comment: //----------------------------------------------------------------------------------------------
comment: //arg: rootType - name of root entity [string]
comment: //arg: members - array of type =&gt; value [array]
comment: //opt: docType - add XML declaration [bool]
comment: //returns: XML document [string]
comment: //----------------------------------------------------------------------------------------------
comment: //.	remove all but alphanumeric characters from a string (allow specified others)
comment: //----------------------------------------------------------------------------------------------
comment: //arg: txt - plain text [string]
comment: //arg: html - html equivalent [string]
comment: //----------------------------------------------------------------------------------------------
comment: // 	convert to base64 (TODO: make this more efficient)
comment: //----------------------------------------------------------------------------------------------
comment: //arg: txt - text which may contain escaped entities [string]
comment: //returns: same string, with entities replaced [string]
comment: //----------------------------------------------------------------------------------------------
comment: // 	convert to base64 (TODO: make this more efficient)
comment: //----------------------------------------------------------------------------------------------
comment: //arg: txt - text which may contain escaped entities [string]
comment: //returns: same string, with entities replaced [string]
comment: //----------------------------------------------------------------------------------------------
comment: // 	convert to base64 (TODO: make this more efficient)
comment: //----------------------------------------------------------------------------------------------
comment: //arg: varName - JavaScript variable name [string]
comment: //arg: text - value of javascript variable [string]
comment: //opt: scriptTags - wrap in html script tags if true [bool]
comment: //returns: code for javascript variable assignment [string]
comment: // encode
comment: // break into lines, 80c
comment: // indent pattern
comment: // apply pattern
comment: // add js varname
comment: // done
comment: //--------------------------------------------------------------------------------------------------
comment: //|	HTTP GET a URL using cURL, respecting kapenta settings for proxy, etc
comment: //--------------------------------------------------------------------------------------------------
comment: //: TODO - attempt other download methods (wget, file wrapper, etc) if curl not present
comment: //: TODO - implement password for systems which use older HTTP authentication methods
comment: //: TODO - handle HTTP error codes
comment: //: TODO - make POST version of this method
comment: //arg: url - a URL [string]
comment: //opt: password - reserved for HTTP/1.x credentials, not implemented [string]
comment: //returns: result of HTTP GET request, false if no cURL [string]
comment: // is cURL installed?
comment: //------------------------------------------------------------------------------------------
comment: //	create baisc cURL HTTP GET request
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	use HTTP proxy if enabled
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	return result
comment: //------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //.	mark up html for injection via javascript (deprecated)
comment: //----------------------------------------------------------------------------------------------
comment: //arg: txt - text to be marked up [string]
comment: //returns: escaped txt [string]
comment: //: this is deprecated in favor of base64 encoding
string: ";"
string: ":"
string: "'"
string: "`"
string: "\""
string: "``"
string: "&lt;"
string: "&lt;."
string: "'&lt;[\/\!]*?[^&lt;&gt;]*?&gt;'si"
string: ""
string: ''
string: ''
string: "&lt;"
string: "&gt;\n"
string: "\t&lt;$type&gt;$value&lt;/$type&gt;\n"
string: "&lt;/"
string: "&gt;\n"
string: "&lt;?xml version=\"1.0\" ?&gt;\n\n"
string: '&lt;'
string: '&amp;lt;'
string: '&gt;'
string: '&amp;gt;'
string: "\r"
string: ''
string: "\n"
string: "&lt;br/&gt;\n"
string: '&amp;'
string: '&amp;amp;'
string: '&lt;'
string: '&amp;lt;'
string: '&gt;'
string: '&amp;gt;'
string: '&amp;lt;'
string: '&lt;'
string: '&amp;gt;'
string: '&gt;'
string: '&amp;amp;'
string: '&amp;'
string: "\n"
string: "\"\n"
string: ' '
string: "+ \""
string: "\n"
string: "var $varName = \""
string: "\";\n"
string: "&lt;script language='Javascript'&gt;\n"
string: "&lt;/script&gt;\n"
string: ''
string: 'curl_init'
string: ''
string: 'yes'
string: ':'
string: ':'
string: "'"
string: '--squote--'
string: "\""
string: '--dquote--'
string: "\n"
string: '--newline--'
string: "\r"
string: ''
string: "[[:"
string: '[[%%delme%%:'

<b>scanning file: /var/www/an2google/trunk/core/ktheme.class.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	object to allow access to the default theme
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	member variables
comment: //----------------------------------------------------------------------------------------------
comment: // name of current theme [string]
comment: // is set to true if a theme is loaded [bool]
comment: // array of style variables, colors, etc [array]
comment: // is set to true when stylesheet is loaded [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //.	constructor
comment: //----------------------------------------------------------------------------------------------
comment: //opt: theme - name of current theme [string]
comment: //----------------------------------------------------------------------------------------------
comment: //.	load a theme
comment: //----------------------------------------------------------------------------------------------
comment: //==============================================================================================
comment: //	BLOCKS
comment: //==============================================================================================
comment: //----------------------------------------------------------------------------------------------
comment: //.	load a block template file
comment: //----------------------------------------------------------------------------------------------
comment: //arg: fileName - relative to installPath [string]
comment: //returns: block template, or false on failure [string][bool]
comment: // special admin option TODO: make this a setting
comment: /*
			if (('admin' == $user-&gt;role) AND (substr($fileName, 0, 8) == 'modules/')) {
			  if ($request['module'] != 'blocks') {
				$parts = explode('/', $fileName);
				$raw .= "&lt;small&gt;&lt;a href='/blocks/edit/module_" . $parts[1] . '/'
				     . $parts[2] . "'&gt;[edit block]&lt;/a&gt;&lt;/small&gt;";
			  }
			}
			*/
comment: //----------------------------------------------------------------------------------------------
comment: //.	substitute an array of values for labels in text
comment: //----------------------------------------------------------------------------------------------
comment: //arg: labels - array of variable names (keys) and values to replace them with [array]
comment: //returns: txt with labels replaced [string]
comment: // no. because no.
comment: //--------------------------------------------------------------------------------------------------
comment: //.	save a block, deprecated
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: fileName - relative to installPath [string]
comment: //arg: raw - file contents [string]
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //.	remove blocks from a string
comment: //----------------------------------------------------------------------------------------------
comment: //arg: txt - text or HTML which may contain blocks [string]
comment: //returns: txt without blocks [string]
comment: //: useful for summaries, text snippets, etc
comment: //----------------------------------------------------------------------------------------------
comment: //.	create a clean, short summary of a section of (x)HTML
comment: //----------------------------------------------------------------------------------------------
comment: //arg: html - source document to be summarized [string]
comment: //opt: length - maximum length, default is 300 [int]
comment: //returns: plaintext [string]
comment: // remove blocks
comment: // remove HTML
comment: // cut down to length
comment: //----------------------------------------------------------------------------------------------
comment: //.	execute a block
comment: //----------------------------------------------------------------------------------------------
comment: //arg: ba - block tag data [array]
comment: //returns: block content, usually html, xml or text [string]
comment: //: this is quite an old function, from before views were separated into their own files
comment: //$session-&gt;msgAdmin("api file does not exist: " . $apiFile);
comment: //----------------------------------------------------------------------------------------------
comment: //.	a get block API's filename
comment: //----------------------------------------------------------------------------------------------
comment: //arg: module - module name [string]
comment: //arg: fn - view name [string]
comment: //returns: filename relative to installPath [string]
comment: //: this is quite an old function, from before views were separated into their own files
comment: //----------------------------------------------------------------------------------------------
comment: //.	extract all blocks from a piece of text and return an array
comment: //----------------------------------------------------------------------------------------------
comment: //arg: txt - text or HTML which may contain block tags [string]
comment: //returns: array of blocks [array:string]
comment: //% return value [array:string]
comment: //	strip newlines
comment: //	place blocks on their own line
comment: //%	[array:string]
comment: //	for each line which might be a block
comment: //--------------------------------------------------------------------------------------
comment: //	if this line begins with [[:: and ends with ::]]
comment: //--------------------------------------------------------------------------------------
comment: // prevent looking up the same thing twice
comment: //----------------------------------------------------------------------------------------------
comment: //.	read block to extract api, method and arguments
comment: //----------------------------------------------------------------------------------------------
comment: //arg: block - a block tag [string]
comment: //returns: block components [array]
comment: //; TODO: overhaul this
comment: //--------------------------------------------------------------------------------------
comment: //	get the api and method
comment: //--------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------
comment: //	add page arguments
comment: //--------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------
comment: //	get any explicit arguments (overrwrites page args)
comment: //--------------------------------------------------------------------------------------
comment: // spacial magic block argument
comment: //$ba['args']['rawblock64'] = base64_encode($original);		// ...
comment: //----------------------------------------------------------------------------------------------
comment: //.	expand all blocks within a string
comment: //----------------------------------------------------------------------------------------------
comment: //arg: txt - text containing block tags to be expanded [string]
comment: //arg: calledBy - newline delimited list of parents, set to empty string [string]
comment: //returns: txt with blocks recusively expanded [string]
comment: //: calledBy is used to prevent infinite recursion, newline delimited list of parents
comment: //------------------------------------------------------------------------------------------
comment: //	filter out any calling blocks - prevent infinite recursion
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	replace each block with result from the appropriate blocks API
comment: //------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------
comment: // 	load the appropriate block API and execute the hook
comment: //--------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------
comment: // 	recurse, expand any blocks that were created by the hook
comment: //--------------------------------------------------------------------------------------
comment: //==============================================================================================
comment: //	UTILITY
comment: //==============================================================================================
comment: //----------------------------------------------------------------------------------------------
comment: //.	render a 2d array as a table
comment: //----------------------------------------------------------------------------------------------
comment: //arg: ary - 2d array of table rows and columns [array]
comment: //opt: wireframe - use kapenta's default wireframe table style [bool]
comment: //opt: firstrowtitle - if column titles in first row to be highlighted [bool]
comment: //returns: HTML table, false on failure [string][bool]
comment: //: TODO: consider moving this to theme
comment: //==============================================================================================
comment: //	TAGS
comment: //==============================================================================================
comment: //----------------------------------------------------------------------------------------------
comment: //.	convert a set of tags from array to HTML representation
comment: //----------------------------------------------------------------------------------------------
comment: //arg: tags - 2d array of name, weight, link [array]
comment: //note: we don't show tags with weight/magnitude less than 1
comment: //%	return value
comment: //==============================================================================================
comment: //	STYLES
comment: //==============================================================================================
comment: //----------------------------------------------------------------------------------------------
comment: //.	load theme style variables into an array (usually attached to page object)
comment: //----------------------------------------------------------------------------------------------
comment: //arg: theme - theme name [string]
comment: //returns: theme stylesheet as associative array, or false on failure [array][bool]
comment: //----------------------------------------------------------------------------------------------
comment: //.	save an array of style variables
comment: //----------------------------------------------------------------------------------------------
comment: //arg: theme - name of theme [string]
comment: //arg: style - theme stylesheet; associative array [array]
comment: //returns: true on success, else false [bool]
comment: //: TODO: use filePutContents
comment: // construct XML
comment: // save to file
string: ''
string: ''
string: 'serverPath'
string: 'websiteName'
string: '%%'
string: '%%'
string: '&lt;'
string: '{{-less-than-}}'
string: '&gt;'
string: '{{-greater-than-}}'
string: '[[:'
string: "&lt;blocktag '"
string: ':]]'
string: "'&gt;"
string: '{{-less-than-}}'
string: '&lt;'
string: '{{-greater-than-}}'
string: '&gt;'
string: "'&lt;[\/\!]*?[^&lt;&gt;]*?&gt;'si"
string: ""
string: '&lt;'
string: '&gt;'
string: '&amp;nbsp;'
string: '&amp;lt;'
string: '&amp;gt;'
string: ' '
string: '...'
string: 'api'
string: 'method'
string: 'api'
string: '_'
string: 'method'
string: 'args'
string: "called function $fnName does not exist in $apiFile"
string: 'blocks'
string: 'runBlock'
string: "api file does not exist: "
string: 'blocks'
string: 'runBlock'
string: ''
string: 'modules/'
string: '/views/'
string: '.fn.php'
string: 'theme'
string: 'themes/'
string: '/views/'
string: '.fn.php'
string: "\r"
string: ''
string: "\n"
string: ''
string: '[[:'
string: "\n[[:"
string: ':]]'
string: ":]]\n"
string: "\n"
string: '[[:'
string: ']]:'
string: "[[:"
string: ''
string: ":]]"
string: ''
string: '::'
string: 'api'
string: 'method'
string: 'args'
string: "\$page-&gt;blockArgs not an array."
string: 'bug'
string: 'args'
string: '='
string: 'args'
string: 'args'
string: 'args'
string: 'rawblock'
string: "\n"
string: ''
string: "\n"
string: "&lt;table noborder width='100%'&gt;"
string: "\t&lt;tr&gt;\n"
string: "\t\t&lt;td&gt;"
string: "&lt;/td&gt;\n"
string: "\t&lt;/tr&gt;\n"
string: "&lt;/table&gt;"
string: "&lt;table class='wireframe' width='100%'&gt;"
string: 'wireframe'
string: 'title'
string: "\t&lt;tr&gt;\n"
string: "\t\t&lt;td class='"
string: "'&gt;"
string: "&lt;/td&gt;\n"
string: "\t&lt;/tr&gt;\n"
string: "&lt;/table&gt;"
string: ''
string: 'weight'
string: 'weight'
string: 'weight'
string: "&lt;a href='"
string: 'link'
string: "' style='color: #444444;'&gt;"
string: "&lt;font size='"
string: "'&gt;"
string: 'name'
string: "&lt;/font&gt;&lt;/a&gt;\n"
string: 'themes/'
string: '/style.xml.php'
string: 'theme'

<b>scanning file: /var/www/an2google/trunk/core/ksystem.class.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	model of kapenta system
comment: //--------------------------------------------------------------------------------------------------
comment: //TODO:	consider adding special permission to allow regular users to write files outside of /data/
comment: //----------------------------------------------------------------------------------------------
comment: //	member variables
comment: //----------------------------------------------------------------------------------------------
comment: //_	location of this kapenta installation on disk [string]
comment: //_	location of this kapenta installation on the network [string]
comment: //_	name of this website [string]
comment: //_	default module [string]
comment: //_	default theme [string]
comment: //_	use the block cache? [bool]
comment: //_	ip address to use when opening sockets [string]
comment: //_ use a web proxy [bool]
comment: //_	proxy address (IP or domain name) [string]
comment: //_	port number [integer]
comment: //_	proxy credentials [string]
comment: //_	proxy credentials [string]
comment: //_	default to 1024 [int]
comment: //_	plain text of this server's public key [string]
comment: //_	plain (clear) text of this server's private key [string]
comment: //_	nested array describing all modules present on system [array]
comment: //_	set to true when module list has been generated
comment: //_	granularity of log (higher numbers for mroe detail [int]
comment: //_	nested array describing all themes present on system [array]
comment: //_	set to true when themes list has been generated
comment: //_	minimum time between cron checks, in seconds [int]
comment: //_	flat array describing all inc files in the kapenta core [array]
comment: //_	flat array describing all class files in the kapenta core [array]
comment: //_	flat array describing all javascript files in the kapenta core [array]
comment: //----------------------------------------------------------------------------------------------
comment: //.	constructor
comment: //----------------------------------------------------------------------------------------------
comment: //==============================================================================================
comment: //	modules and themes
comment: //==============================================================================================
comment: //----------------------------------------------------------------------------------------------
comment: //.	list all modules (enabled/installed or otherwise)
comment: //----------------------------------------------------------------------------------------------
comment: //;	Note that static data chould be used on production sites for a slight performance increase?
comment: //returns: array of modules [array]
comment: // return value [array]
comment: //--------------------------------------------------------------------------------------
comment: //	modules list has not yet been created, create it and cache for future reuse
comment: //--------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	make into flat, alphabetical array and return
comment: //------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //.	list all themes 
comment: //----------------------------------------------------------------------------------------------
comment: //returns: array of modules [array]
comment: // return value [array]
comment: //--------------------------------------------------------------------------------------
comment: //	themes list has not yet been created, create it and cache for future reuse
comment: //--------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	make into flat, alphabetical array and return
comment: //------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //.	list files of a particular extension (usually .act.php, .view.php, .block.php)
comment: //----------------------------------------------------------------------------------------------
comment: //arg: path - path relative to installPath [string]
comment: //arg: ext - file extension	to list, eg '.block.php' [string]
comment: //----------------------------------------------------------------------------------------------
comment: //.	list all actions on a given module
comment: //----------------------------------------------------------------------------------------------
comment: //arg: module - name of a module [string]
comment: //returns: array of actions or false on failure [array][bool]
comment: //----------------------------------------------------------------------------------------------
comment: //.	list all block templates a module provides
comment: //----------------------------------------------------------------------------------------------
comment: //arg: module - name of module [string]
comment: //returns: array of block template files or false on failure [array][bool]
comment: //----------------------------------------------------------------------------------------------
comment: //.	list all pages templates a module provides
comment: //----------------------------------------------------------------------------------------------
comment: //arg: module - name of a module [string]
comment: //returns: array of page template files, or false on failure [array][bool]
comment: //----------------------------------------------------------------------------------------------
comment: //.	list all document templates provided by a theme
comment: //----------------------------------------------------------------------------------------------
comment: //arg: theme - name of a kapenta theme [string]
comment: //returns: array of document templates, or false on failure [array][bool]
comment: //----------------------------------------------------------------------------------------------
comment: //.	discover if a module exists
comment: //----------------------------------------------------------------------------------------------
comment: //arg: module - name of a module [string]
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //.	discover if a theme exists
comment: //----------------------------------------------------------------------------------------------
comment: //arg: theme - name of a theme [string]
comment: //returns: true on success, false on failure [bool]
comment: //==============================================================================================
comment: //	filesystem methods
comment: //==============================================================================================
comment: //----------------------------------------------------------------------------------------------
comment: //.	check whether a file exists
comment: //----------------------------------------------------------------------------------------------
comment: //arg: fileName - relative to installPath [string]
comment: //returns: true if file exists, false if not [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //.	check a fileName (path) before use
comment: //----------------------------------------------------------------------------------------------
comment: //arg: fileName - relative to installPath [string]
comment: //opt: inData - if true, fileName must be inside ../data/ [bool]
comment: //returns: clean fileName, or false on failure [string][bool]
comment: //	Unicode directory traversal, see: http://www.schneier.com/crypto-gram-0007.html
comment: //	Precent encoded
comment: //	Classic directory traversal
comment: //	Make absolute locations relative to installPath, case insentitive
comment: //	Check that location is inside of ../data/ if required
comment: //----------------------------------------------------------------------------------------------
comment: //.	ensure that a directory exists
comment: //----------------------------------------------------------------------------------------------
comment: //arg: fileName - path relative to installPath [string]
comment: //opt: inData - if true the file must be somewhere in ../data/ [bool]
comment: //returns: true on success, false on failure [bool]
comment: // already exists
comment: // doesn't exist, check for and add missing subdirs one at a time
comment: //	note that 'recursive' option for mkdir was only added in PHP 5.0.0
comment: //----------------------------------------------------------------------------------------------
comment: //.	get the contents of a file (entire file returned as string)
comment: //----------------------------------------------------------------------------------------------
comment: //arg: fileName - relative to installPath [string]
comment: //opt: inData - if true the file must be somewhere in ../data/ [bool]
comment: //opt: phpWrap - if true any php wrapper will be removed [bool]
comment: //returns: entire file contents, or false on failure [string][bool]
comment: // note that file_get_contents() was added in PHP 4.3, we do it this way to support PHP 4.x
comment: //	specify binary for Windows
comment: //	check that file was opened
comment: //----------------------------------------------------------------------------------------------
comment: //.	set the contents of a file, will create directories if they do not exist
comment: //----------------------------------------------------------------------------------------------
comment: //arg: fileName - relative to installPath [string]
comment: //arg: contents - new file contents [string]
comment: //opt: inData - if true the file must be somewhere in ../data/ [bool]
comment: //opt: phpWrap - protective wrapper [bool]
comment: //opt: m - file mode [string]
comment: //returns: true on success, false on failure [bool]
comment: // add php wrapper to file
comment: // note that file_put_contents() was added in PHP 5, we do it this way to support PHP 4.x
comment: //	specify binary for Windows
comment: //	can fH ever be 0?
comment: //----------------------------------------------------------------------------------------------
comment: //|	determines if a file/dir exists and is readable + writeable
comment: //----------------------------------------------------------------------------------------------
comment: //arg: fileName - relative to installPath [string]
comment: //returns: true if exists, else false [bool]
comment: // bad file name
comment: //----------------------------------------------------------------------------------------------
comment: //.	remove php wrapper
comment: //----------------------------------------------------------------------------------------------
comment: //arg: content - string to remove wrapper from [string]
comment: //returns: content without wrapper [string]
comment: // too short to be wrapped
comment: //==============================================================================================
comment: //	module events, this is a purely push system
comment: //==============================================================================================
comment: //----------------------------------------------------------------------------------------------
comment: //.	sends an event to a specific module
comment: //----------------------------------------------------------------------------------------------
comment: //arg: module - name of module to notify, or '*' for all [string]
comment: //arg: event - name of event [string]
comment: //arg: args - details of event [array]
comment: //returns: reserved [array]
comment: //--------------------------------------------------------------------------------------
comment: //	sends event to all modules
comment: //--------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------
comment: //	check if there is an event handler for the module 
comment: //--------------------------------------------------------------------------------------
comment: // handles this event?
comment: // do it
comment: //==============================================================================================
comment: //	objects
comment: //==============================================================================================
comment: //----------------------------------------------------------------------------------------------
comment: //.	create a unique ID 
comment: //----------------------------------------------------------------------------------------------
comment: //returns: a new UID, 18 chars long [string]
comment: //	make a seed for rand() ...
comment: //	is only needed for older PHP
comment: //	seed it
comment: //==============================================================================================
comment: //	object relationships
comment: //==============================================================================================
comment: // make available to $relFile
comment: // provides relationship?
comment: // check
comment: // do it
comment: //==============================================================================================
comment: //	logging
comment: //==============================================================================================
comment: //----------------------------------------------------------------------------------------------
comment: //.	record current page view
comment: //----------------------------------------------------------------------------------------------
comment: //TODO: consider adding some of these local variables as members of $kapemta
comment: //notifyChannel('admin-syspagelog', 'add', base64_encode($entry));
comment: //$entry = $db-&gt;datetime() . " - " . $user-&gt;username . ' - ' . $_SERVER['REQUEST_URI'];
comment: //notifyChannel('admin-syspagelogsimple', 'add', base64_encode($entry));
comment: //----------------------------------------------------------------------------------------------
comment: //.	create an empty log file TODO: use filePutContents
comment: //----------------------------------------------------------------------------------------------
comment: //arg: fileName - relative to installPath [string]
comment: //TODO: remove this literal (bad style)
comment: //----------------------------------------------------------------------------------------------
comment: //.	record a system event
comment: //----------------------------------------------------------------------------------------------
comment: //arg: log - log name [string]
comment: //arg: subsystem - subsystem name/label [string]
comment: //arg: fn - function name [string]
comment: //arg: msg - message to log [string]
comment: //returns: true on success or false on failure [bool]
comment: //------------------------------------------------------------------------------------------
comment: //	create new log files as necessary and try get user's IP address
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	add a new entry to the log file
comment: //------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //.	record an ordinary system event
comment: //----------------------------------------------------------------------------------------------
comment: //arg: granularity - level of detail (0-3) [int]
comment: //arg: subsystem - subsystem name/label [string]
comment: //arg: fn - function name [string]
comment: //arg: msg - message to log [string]
comment: //returns: true on success or false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //.	record an error
comment: //----------------------------------------------------------------------------------------------
comment: //arg: subsystem - subsystem name/label [string]
comment: //arg: fn - function name [string]
comment: //arg: msg - message to log [string]
comment: //returns: true on success or false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //.	log sync activity
comment: //----------------------------------------------------------------------------------------------
comment: //arg: msg - message to log [string]
comment: //: this is overused due to development, needs to be trimmed out of a lot of places now
comment: //: that the sync module is pretty stable.
comment: //----------------------------------------------------------------------------------------------
comment: //.	log live activity
comment: //----------------------------------------------------------------------------------------------
comment: //arg: msg - message to log [string]
comment: //: this is overused due to development, needs to be trimmed out of a lot of places now
comment: //: that the sync module is pretty stable.
comment: //$result = $this-&gt;filePutContents($fileName, $msg, true, false, 'a+');
comment: //==============================================================================================
comment: //	processes
comment: //==============================================================================================
comment: //----------------------------------------------------------------------------------------------
comment: //.	start a process in background (*nix only)
comment: //----------------------------------------------------------------------------------------------
comment: //:	source: http://nsaunders.wordpress.com/2007/01/12/running-a-background-process-in-php/
comment: //:	TODO: find equivalent for windows
comment: //: will probably not work in safe mode, forking in PHP is too large a topic to be covered here
comment: //arg: Command - shell command [string]
comment: //arg: Priority - runlevel [int]
comment: //returns: ID of new process (PID) [int]
comment: // TODO: consider removing this
comment: //----------------------------------------------------------------------------------------------
comment: //.	discover if a process is running
comment: //----------------------------------------------------------------------------------------------
comment: //:	source: http://nsaunders.wordpress.com/2007/01/12/running-a-background-process-in-php/
comment: //: *Nix only, might work on windows with Cygwin or GNU tools, probably won't work in safe mode
comment: //arg: PID - process ID [int] [string]
comment: //returns: true if running, otherwise false [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //.	clean up the temp directory
comment: //----------------------------------------------------------------------------------------------
comment: //:	files stored in the temp directory should begin with a timestamp and then a hyphen.
comment: //:	files older than one hour are deleted.	
comment: //returns: html report [string]
comment: //%	return value [string]
comment: // TODO: check for directories
comment: //----------------------------------------------------------------------------------	
comment: // look for old files
comment: //----------------------------------------------------------------------------------
comment: // TODO: make this a setting, remove literal
comment: // end if has hyphen
comment: // end if is file
comment: // end while
string: "&lt;? header('HTTP/1.1 403 Forbidden'); exit('403 - forbidden'); /*\n"
string: 'modules/'
string: '.'
string: '..'
string: '.svn'
string: 'name'
string: 'abs'
string: 'modules/'
string: 'name'
string: '/'
string: 'actions'
string: 'pages'
string: 'views'
string: 'blocks'
string: 'inc'
string: 'actionsLoaded'
string: 'no'
string: 'pagesLoaded'
string: 'no'
string: 'viewsLoaded'
string: 'no'
string: 'incLoaded'
string: 'no'
string: 'blocksLoaded'
string: 'no'
string: 'name'
string: 'name'
string: 'themes/'
string: '.'
string: '..'
string: '.svn'
string: 'name'
string: 'abs'
string: 'themes/'
string: 'name'
string: '/'
string: 'templates'
string: 'blocks'
string: 'templatesLoaded'
string: 'no'
string: 'blocksLoaded'
string: 'no'
string: 'name'
string: 'name'
string: '%%installPath%%'
string: ''
string: ''
string: 'no'
string: 'actionsLoaded'
string: 'modules/'
string: '/actions/'
string: '.act.php'
string: 'actions'
string: 'actionsLoaded'
string: 'yes'
string: 'actions'
string: 'no'
string: 'blocksLoaded'
string: 'modules/'
string: '/views/'
string: '.block.php'
string: 'blocks'
string: 'blocksLoaded'
string: 'yes'
string: 'blocks'
string: 'no'
string: 'pagesLoaded'
string: 'modules/'
string: '/actions/'
string: '.page.php'
string: 'pages'
string: 'pagesLoaded'
string: 'yes'
string: 'pages'
string: 'no'
string: 'templatesLoaded'
string: 'themes/'
string: '/'
string: '.template.php'
string: 'templates'
string: 'templatesLoaded'
string: 'yes'
string: 'themes/'
string: '/'
string: '.template.php'
string: 'name'
string: 'name'
string: '//'
string: '/'
string: "%c0%af"
string: '/'
string: "%c0%9v"
string: '/'
string: "%c1%1c"
string: '/'
string: "%2f"
string: '/'
string: "%5c"
string: '/'
string: "%2e"
string: '.'
string: ' '
string: '../'
string: ' '
string: '..\\'
string: 'data/'
string: '/'
string: '/'
string: '/'
string: 'rb'
string: ''
string: 'wb+'
string: "\n*/ ?&gt;"
string: "\n*/ ?&gt;"
string: "\\n*/ ?&gt;"
string: "&lt;? /*\n"
string: "&lt;? /*\r"
string: '*'
string: ''
string: 'modules/'
string: '/events/'
string: '.on.php'
string: "__cb_"
string: ""
string: ' '
string: ""
string: 'modules/'
string: '/inc/relationships.inc.php'
string: "_relationships"
string: 'data/log/'
string: "y-m-d"
string: "-pageview.log.php"
string: ''
string: 'HTTP_REFERER'
string: 'HTTP_REFERER'
string: "&lt;entry&gt;\n"
string: "\t&lt;timstamp&gt;"
string: "&lt;/timestamp&gt;\n"
string: "\t&lt;mysqltime&gt;"
string: "&lt;/mysqltime&gt;\n"
string: "\t&lt;user&gt;"
string: "&lt;/user&gt;\n"
string: "\t&lt;remotehost&gt;"
string: 'REMOTE_ADDR'
string: "&lt;/remotehost&gt;\n"
string: "\t&lt;remoteip&gt;"
string: 'REMOTE_ADDR'
string: "&lt;/remoteip&gt;\n"
string: "\t&lt;request&gt;"
string: 'REQUEST_URI'
string: "&lt;/request&gt;\n"
string: "\t&lt;referrer&gt;"
string: "&lt;/referrer&gt;\n"
string: "\t&lt;useragent&gt;"
string: 'HTTP_USER_AGENT'
string: "&lt;/useragent&gt;\n"
string: "\t&lt;uid&gt;"
string: "&lt;/uid&gt;\n"
string: "&lt;/entry&gt;\n"
string: 'a+'
string: "&lt;?\n"
string: "\tinclude '../../setup.inc.php';\n"
string: "\tinclude \$installPath . 'core/core.inc.php';\n"
string: "\tlogErr('log', 'eventLog', 'direct access by browser');\n"
string: "\tdo404();\n"
string: "?&gt;\n\n"
string: 'w+'
string: 'data/log/'
string: "y-m-d"
string: '-'
string: '.log.php'
string: ''
string: 'REMOTE_ADDR'
string: 'REMOTE_ADDR'
string: "&lt;event&gt;\n"
string: "\t&lt;datetime&gt;"
string: "&lt;/datetime&gt;\n"
string: "\t&lt;session&gt;"
string: "&lt;/session&gt;\n"
string: "\t&lt;ip&gt;"
string: "&lt;/ip&gt;\n"
string: "\t&lt;system&gt;"
string: "&lt;/system&gt;\n"
string: "\t&lt;user&gt;"
string: "&lt;/user&gt;\n"
string: "\t&lt;function&gt;"
string: "&lt;/function&gt;\n"
string: "\t&lt;msg&gt;$msg&lt;/msg&gt;\n"
string: "&lt;/event&gt;\n"
string: 'a+'
string: 'event'
string: 'error'
string: 'data/log/'
string: "y-m-d"
string: '-sync.log.php'
string: " *******************************************************\n"
string: 'a+'
string: 'data/log/'
string: "y-m-d"
string: '-live.log.php'
string: "\n"
string: "$Command &gt; &gt; /dev/null 2&gt;&amp;1 &amp;"
string: "$Command &gt; /dev/null 2&gt;&amp;1 &amp;"
string: "ps $PID"
string: ''
string: 'data/temp/'
string: 'data/temp/'
string: '.'
string: '..'
string: "temp file: "
string: "&lt;br/&gt;\n"
string: '-'
string: "misnamed file: "
string: " (no hyphen, removed)&lt;br/&gt;\n"
string: 'data/temp/'
string: '-'
string: "old file: "
string: " (removed)&lt;br/&gt;\n"
string: 'data/temp/'

<b>scanning file: /var/www/an2google/trunk/core/ksync.class.php</b>
comment: //-------------------------------------------------------------------------------------------------
comment: //*	synchronize content and broadcast events between servers
comment: //-------------------------------------------------------------------------------------------------
comment: //+	events, such as database updates or file stores are stored in the sync database which acts 
comment: //+	like a queue or outbox.  Once successfully passed to all peers the event is deleted.
comment: //+ TODO: module config file
comment: //----------------------------------------------------------------------------------------------
comment: //	member variables
comment: //----------------------------------------------------------------------------------------------
comment: //_	tables which are not synced [array]
comment: //_	notifications which are not synced [array]
comment: //_	record of self, serialized Sync_Server [array]
comment: //_	set to true when server is loaded [bool]
comment: //_ range of serialized Sync_Server objects [array]
comment: //_	set to true when peers are loaded [bool]
comment: //_	set totrue to enable sync logging [bool]
comment: // maximum age of sync messages on reciept (10 minutes) [int]
comment: //----------------------------------------------------------------------------------------------
comment: //.	constructor
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //.	get this server's password (note: this should not be passed in any blocks, hence sql here)
comment: //----------------------------------------------------------------------------------------------
comment: //returns: peer server record (database makeup removed) or false if not found [array] [bool]
comment: //-------------------------------------------------------------------------------------------------
comment: //.	get this server's list of (active) peers
comment: //-------------------------------------------------------------------------------------------------
comment: //returns: array of serialized Sync_Server objects, or false on failure [array][bool]
comment: //----------------------------------------------------------------------------------------------
comment: //.	create a new sync event and fork a new thread/process to execute it
comment: //----------------------------------------------------------------------------------------------
comment: //arg: source - source of this message [string]
comment: //arg: type - type (dbUpdate|dbDelete|fileCreate|fileDelete|notification) [string]
comment: //arg: data - message data, often base64 encoded XML [string]
comment: //----------------------------------------------------------------------------------
comment: //	create record of data to be synced
comment: //----------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------
comment: //	fork off a new process to action this
comment: //----------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //.	broadcast a database update to peers
comment: //----------------------------------------------------------------------------------------------
comment: //arg: source - source of this message [string]
comment: //arg: table - name of table containing record to be updated [string]
comment: //arg: record - XML with base64 encoded values [string]
comment: //----------------------------------------------------------------------------------------------
comment: //.	when an object is deleted
comment: //----------------------------------------------------------------------------------------------
comment: //arg: source - source of this message [string]
comment: //arg: table - name of database table this record belongs to [string]
comment: //arg: UID - UID of the record being deleted
comment: //----------------------------------------------------------------------------------------------
comment: //.	when a file is uploaded to downloaded into an awareNet server
comment: //----------------------------------------------------------------------------------------------
comment: //arg: source - source of this message [string]
comment: //arg: fileName - relative to installPath [string]
comment: //: not implemented here (files are pulled as needed, implement if you want a pushing system)
comment: // NOT BROADCAST AT PRESENT, FILES ARE PULLED AS NEEDED
comment: //----------------------------------------------------------------------------------------------
comment: //.	when a file is deleted
comment: //----------------------------------------------------------------------------------------------
comment: //arg: source - source of this message [string]
comment: //arg: fileName - relative to installPath [string]
comment: /*
	//----------------------------------------------------------------------------------------------
	//.	broadcast a notification to page clients DEPRECATED
	//----------------------------------------------------------------------------------------------
	//arg: source - source of this message [string]
	//arg: channelID - label identifying a page channel [string]
	//arg: event - as defined by channel [string]
	//arg: data - usually a base64 encoded string [string]

	function syncBroadcastNotification($source, $channelID, $event, $data) {
		global $syncIgnoreChannels;
		logSync("received notification on channel: $channelID event: $event&lt;br/&gt;\n");
		if (in_array($channelID, $syncIgnoreChannels) == true) {
			logSync("ignoring notification, channel: $channelID &lt;br/&gt;\n");
			return false;	
		}

		$data = "&lt;notification&gt;\n"
			  . "\t&lt;channelid&gt;$channelID&lt;/channelid&gt;\n"
			  . "\t&lt;event&gt;$event&lt;/event&gt;\n"
			  . "\t&lt;data&gt;$data&lt;/data&gt;\n"
			  . "&lt;/notification&gt;\n";
	
		return syncCreate($source, 'notification', $data);	
	}
	*/
comment: /*	TODO: replace with either global revisions object, or method on $kapenta
	//----------------------------------------------------------------------------------------------
	//|	note that a record has been deleted
	//----------------------------------------------------------------------------------------------
	//: this is so that is it not resurrected on sync with a server which still has this record
	//arg: refTable - table which contained the deleted record [string]
	//arg: refUID - UID of the deleted record [string]
	//opt: source - peer we heard about this deletion from [string]
	//returns: true on success [bool]

	function syncRecordDeletion($refTable, $refUID, $source = 'self') {
		global $syncIgnoreTables, $kapenta;
		if (in_array($refTable, $syncIgnoreTables) == true) { return false; }

		logSync("syncRecordDeletion: $refTable $refUID \n");

		//------------------------------------------------------------------------------------------
		//	check if we already know that the record was deleted
		//------------------------------------------------------------------------------------------
		if (syncRecordDeleted($refTable, $refUID) == true) { return false; }
	
		syncBroadcastDbDelete($source, $refTable, $refUID);

		//------------------------------------------------------------------------------------------
		//	insert directly into database
		//------------------------------------------------------------------------------------------
		$sql = "insert into delitems values ("
				 . "'" . $kapenta-&gt;createUID() . "', "
				 . "'" . sqlMarkup($refTable) . "', "
				 . "'" . sqlMarkup($refUID) . "', "
				 . "'" . time() . "')";	

		$db-&gt;query($sql);
		return true;
	}
	*/
comment: //----------------------------------------------------------------------------------------------
comment: //.	get schema of sync table	DEPRECATED TODO: remove this
comment: //----------------------------------------------------------------------------------------------
comment: //:	note that this also exists in /modules/sync/sync.mod.php, copy any changes there
comment: //returns: dbSchema, see mysql.inc.php [array]
comment: //----------------------------------------------------------------------------------------------
comment: //.	convert a record to base64_encoded XML
comment: //----------------------------------------------------------------------------------------------
comment: //arg: table - name of database table [string]
comment: //arg: data - associative array of field name =&gt; value pairs [array]
comment: //returns: base64 encoded XML [string]
comment: //----------------------------------------------------------------------------------------------
comment: //.	convert base64_encoded XML to array
comment: //----------------------------------------------------------------------------------------------
comment: //arg: xml - base64 encoded XML representation of a record [string]
comment: //returns: partial dbSchema [array]
comment: //% return value [array]
comment: // get children of root node [array]
comment: // children of 'fields' entity
comment: //----------------------------------------------------------------------------------------------
comment: //.	authenticate a request on the sync API
comment: //----------------------------------------------------------------------------------------------
comment: //:	HTTP header of request should contain a timestamp within 10 minutes of the request being
comment: //:	recieved and an authentication proof; sha1 hash of this server's password and the 
comment: //:	timestamp sha1('password' . 'timestamp')
comment: //:	Sync-timestamp: 12314235
comment: //:	Sync-proof:	69eba3375528ad645d6902792ca36132fc728d73
comment: //:	Sync-source: URL of peer
comment: //returns: true if credentials sent in header by current browser request check out [bool]
comment: //if (($tThen &lt; ($tNow - $this-&gt;timeDiffMax)) || ($tThen &gt; ($tNow + $this-&gt;timeDiffMax))) 
comment: //	{ return false; }	// timestamp too old or too far in future
comment: // all seems in order
comment: //----------------------------------------------------------------------------------------------
comment: //.	get all HTTP headers (getallheaders() only works when PHP is apache module)
comment: //----------------------------------------------------------------------------------------------
comment: //+	source: http://www.rvaidya.com/blog/php/2009/02/25/get-request-headers-sent-by-client-in-php/
comment: //returns: the headers [array]
comment: //foreach($headers as $k =&gt; $v) { logSync("request header: $k - $v &lt;br/&gt;\n"); }
comment: //----------------------------------------------------------------------------------------------
comment: //.	save something to the database, without triggering sync or saving changes to record
comment: //----------------------------------------------------------------------------------------------
comment: //arg: tableName - name of a database table [string]
comment: //arg: data - array fo field name =&gt; value pairs [array]
comment: //returns: true on success, false on failure [bool]
comment: //: TODO: maybe move this into mysql.inc.php
comment: //: TODO: do easy on indices and use SQL update rather than delete/insert
comment: //------------------------------------------------------------------------------------------
comment: //	if this is a notice that something was deleted, delete it
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	if existing object is newer or the same age, then ignore
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	perform a quiet update
comment: //------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //.	delete something (silently) from the databse
comment: //----------------------------------------------------------------------------------------------
comment: //arg: table - name of a database table [string]
comment: //arg:UID - UID of an object stored in table [string]
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //.	HTTP GET something from a peer 
comment: //----------------------------------------------------------------------------------------------
comment: //arg: url - URL of sync API on peer [string]
comment: //arg: password - password for this peer [string]
comment: //returns: result of HTTP request [string]
comment: //TODO: move this to user
comment: //TODO: use these as member variables taken from $kapenta
comment: //------------------------------------------------------------------------------------------
comment: //	load/create data about this peer
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	create baisc cURL HTTP GET request
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	use HTTP proxy if enabled
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	return result
comment: //------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //.	HTTP POST something to a peer 
comment: //----------------------------------------------------------------------------------------------
comment: //arg: url - URL of sync API on peer [string]
comment: //arg: password - password for this peer [string]
comment: //arg: postVars - body of post [array]
comment: //returns: result of HTTP POST, as returned by peer [string]
comment: //TODO: move this to utils
comment: //------------------------------------------------------------------------------------------
comment: //	load/create data about this peer
comment: //------------------------------------------------------------------------------------------
comment: // squid does not completely support HTTP/1.1, see Expect: 100-continue in RFC 2616
comment: //------------------------------------------------------------------------------------------
comment: //	set up basic cURL HTTP POST
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	use HTTP proxy if enabled
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	execute, and return result
comment: //------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //.	request a file, search on peers and download it if found  (DEPRECATED)
comment: //----------------------------------------------------------------------------------------------
comment: //arg: fileName - relative to installPath [string]
comment: //returns: true if requested, distinct from request being filled [bool]
comment: // already trying for this one
comment: //--------------------------------------------------------------------------------------
comment: //	the queue is not full, add it
comment: //--------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //.	get list of objects and when they were last edited
comment: //----------------------------------------------------------------------------------------------
comment: //arg: peerUID - UID of a Sync_Server [string]
comment: //arg: model - name of an object type/table [string]
comment: //returns: array structure [array]
comment: //;
comment: //;  return value is a nested array structure:
comment: //;		'total' =&gt; total number of objects known to peer [int]
comment: //;		'dirty' =&gt; total number of objects this peer should update [int]
comment: //;		'update' =&gt; array of UIDs [array]
comment: //;
comment: //TODO: save to a file and stream from it to avoid potential memory issues at scale
comment: //%	return value [array]
comment: //------------------------------------------------------------------------------------------
comment: // get local database schema
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: // get list from peer server
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: // make array of objects which need updating
comment: //------------------------------------------------------------------------------------------
comment: // don't fetch a new copy if object is deleted
comment: // don't fetch a new copy if local copy is not older than remote copy
string: 'modules/sync/models/download.mod.php'
string: 'modules/sync/models/server.mod.php'
string: 'modules/sync/models/notice.mod.php'
string: 'yes'
string: 'Sync_Notice'
string: 'chat'
string: 'download'
string: 'Sync_Download'
string: 'Sync_Message'
string: 'Sync_Server'
string: 'Live_Mailbox'
string: 'Live_Chat'
string: 'Live_Trigger'
string: 'Users_Session'
string: 'Users_Login'
string: 'admin-syspagelog'
string: 'admin-syspagelogsimple'
string: "active='active'"
string: 'Sync_Server'
string: '*'
string: ''
string: ''
string: ''
string: 'self'
string: 'direction'
string: "syncCreate, source: $source type: $type data:\n$data\n)\n"
string: 'serverurl'
string: 'self'
string: 'direction'
string: 'UID'
string: 'new'
string: "created sync item: $uid type: $type for: "
string: 'serverurl'
string: "&lt;br/&gt;\n"
string: 'data/temp/'
string: '-'
string: '.sync'
string: 'sync/send/'
string: "wget --output-document="
string: " $url"
string: "executing sync item: $shellCmd &lt;br/&gt;\n"
string: "not sending back to source $source\n"
string: "ignoring database update, table: $table &lt;br/&gt;\n"
string: "received database update, table: $table &lt;br/&gt;\n"
string: 'dbUpdate'
string: "ignoring database update, table: $table &lt;br/&gt;\n"
string: "received notice of record deleteion, table: $table uid: $UID &lt;br/&gt;\n"
string: "&lt;deletion&gt;&lt;table&gt;$table&lt;/table&gt;&lt;uid&gt;$UID&lt;/uid&gt;&lt;/deletion&gt;"
string: 'dbDelete'
string: "received notification of file deletion: $file&lt;br/&gt;\n"
string: 'fileDelete'
string: "&lt;update&gt;\n"
string: "\t&lt;table&gt;$table&lt;/table&gt;\n"
string: "\t&lt;fields&gt;\n"
string: "\t\t&lt;"
string: "&gt;"
string: "&lt;/"
string: "&gt;\n"
string: "\t&lt;/fields&gt;\n"
string: "&lt;/update&gt;"
string: "generated:\n"
string: "\n"
string: 'table'
string: ''
string: 'fields'
string: "RECIEVED: "
string: 'table'
string: 'type'
string: 'table'
string: 'value'
string: 'fields'
string: 'type'
string: 'fields'
string: 'type'
string: 'value'
string: 'Sync-Timestamp'
string: 'Sync-Proof'
string: 'Sync-Timestamp'
string: 'password'
string: 'Sync-Proof'
string: "Authenticated: $hash\n"
string: "HTTP_"
string: '_'
string: ' '
string: ' '
string: '-'
string: 'Sync-'
string: "ksync::dbSave($tableName, "
string: 'UID'
string: " [objAry])&lt;br/&gt;"
string: "Invalid data sent to \$sync-&gt;dbSave()&lt;br/&gt;\n"
string: 'UID'
string: 'editedOn'
string: 'UID'
string: "saving record "
string: 'UID'
string: " to table $tableName \n"
string: 'Revisions_Deleted'
string: "Received Deletion Notice: $tableName status: "
string: 'status'
string: "&lt;br/&gt;"
string: 'deleted'
string: 'status'
string: 'refModel'
string: 'refUID'
string: "Received Deletion Notice: $rmTable $rmUID&lt;br/&gt;"
string: "Acting on Deletion Notice: $rmTable $rmUID&lt;br/&gt;"
string: "delete from $rmTable where UID='"
string: "'"
string: "Executing: $sql&lt;br/&gt;"
string: 'UID'
string: 'UID'
string: 'editedOn'
string: 'editedOn'
string: "Ignoring redundant notice: $tableName "
string: 'UID'
string: "&lt;br/&gt;"
string: 'UID'
string: "delete from "
string: " where UID='"
string: "'"
string: 'Sync-timestamp: '
string: 'Sync-proof: '
string: 'Sync-source: '
string: 'serverurl'
string: ''
string: 'yes'
string: ':'
string: ':'
string: 'Sync-timestamp: '
string: 'Sync-proof: '
string: 'Sync-source: '
string: 'serverurl'
string: 'yes'
string: 'Expect:'
string: ''
string: 'yes'
string: ':'
string: ':'
string: 'wait'
string: "syncRequestFile: $fileName download UID: "
string: " \n"
string: "creating new process for download: "
string: " \n"
string: 'data/temp/'
string: '-'
string: '.sync'
string: 'sync/findfile/'
string: 'wget --output-document='
string: ' '
string: "server busy, queing download: "
string: " \n"
string: 'total'
string: 'dirty'
string: 'update'
string: 'sync/tablele/'
string: '_'
string: '-us-'
string: 'url'
string: "\n"
string: ''
string: '|'
string: 'total'
string: '|'
string: 'editedOn'
string: 'update'
string: 'dirty'

<b>scanning file: /var/www/an2google/trunk/core/ksession.class.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	object to maintain session data
comment: //--------------------------------------------------------------------------------------------------
comment: //+	Message icons may be:
comment: //+		info - informational
comment: //+		warn - warning
comment: //+		success - smiley or somesuch
comment: //----------------------------------------------------------------------------------------------
comment: //	member variables
comment: //----------------------------------------------------------------------------------------------
comment: //_ UID of current session [string]
comment: //_ UID of current user [string]
comment: //_ message to user, displayed on next page render [string]
comment: //_ array of captcha solutions (UID =&gt; value) [array]
comment: //_ block template of session messages [string]
comment: //_	set to true to enable live debug (call any page with /debug_on/)
comment: //----------------------------------------------------------------------------------------------
comment: //.	constructor
comment: //----------------------------------------------------------------------------------------------
comment: // sUID - a unique identifier for this session, used for debugging
comment: // sUser - the user UID for the current session (UID=public if not logged in)
comment: // sMessage - this is used for passing information for the user between pages
comment: // sCaptcha - for storing the correct answers to captchas
comment: // sDebug - toggle debug mode
comment: //----------------------------------------------------------------------------------------------
comment: //.	save current state to $_SESSION superglobal
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //.	add a message to be displayed to user on next page view
comment: //----------------------------------------------------------------------------------------------
comment: //arg: message - message to user [string]
comment: //opt: icon - message icon [string]
comment: //----------------------------------------------------------------------------------------------
comment: //.	add a message to be displayed to an admin on next page view
comment: //----------------------------------------------------------------------------------------------
comment: //arg: message - message to user [string]
comment: //opt: icon - message icon [string]
string: ''
string: ''
string: 'public'
string: 'sUID'
string: 'sUID'
string: 'sUser'
string: 'sUser'
string: 'sMessage'
string: 'sMessage'
string: 'sCaptcha'
string: 'sCaptcha'
string: 'sDebug'
string: 'sDebug'
string: 'sUID'
string: 'sUser'
string: 'sMessage'
string: 'sCaptcha'
string: 'sDebug'
string: 'info'
string: ''
string: 'modules/home/views/sessionmsg.block.php'
string: 'msg'
string: 'icon'
string: 'info'
string: 'admin'

<b>scanning file: /var/www/an2google/trunk/core/krevisions.class.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	interface to revisioning system
comment: //--------------------------------------------------------------------------------------------------
comment: //+	This component keeps track of changes to module objects and archives them after deletion from
comment: //+	the live system.  Note that revision control is performed according to the 'nodiff' array
comment: //+	of model's dbSchema, and that objects marked 'archive' =&gt; 'no' are not kept.
comment: //----------------------------------------------------------------------------------------------
comment: //	member variables
comment: //----------------------------------------------------------------------------------------------
comment: // none yet
comment: //----------------------------------------------------------------------------------------------
comment: //.	constructor
comment: //----------------------------------------------------------------------------------------------
comment: // nothing at present, may in future read settings controlling behavior of this object
comment: //----------------------------------------------------------------------------------------------
comment: //.	record changes to an object
comment: //----------------------------------------------------------------------------------------------
comment: //arg: changes - associative array of fields and values [array]
comment: //arg: dbSchema - a database table definition [array]		
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //.	record deleteion of an object
comment: //----------------------------------------------------------------------------------------------
comment: //arg: changes - associative array of fields and values [array]
comment: //arg: dbSchema - a database table definition [array]		
comment: //returns: true on success, false on failure [bool]
comment: // check whether objects of this type are not archived
comment: // check whether objects has already been deleted
comment: //----------------------------------------------------------------------------------------------
comment: //.	discover if an object has been deleted
comment: //----------------------------------------------------------------------------------------------
comment: //arg: model - type of deleted object [string]
comment: //arg: UID - Unique identifier of deleted object [string]
comment: //returns: true if item is in recycle bin, false if not [bool]	
string: 'modules/revisions/models/deleted.mod.php'
string: 'modules/revisions/models/revision.mod.php'
string: 'archive'
string: 'no'
string: 'archive'
string: 'module'
string: 'model'
string: 'fields'
string: 'UID'
string: ''
string: 'revisions-&gt;recordDeletion() BAD SCHEMA'
string: 'bad'
string: 'archive'
string: 'no'
string: 'archive'
string: 'revisions-&gt;recordDeletion() NO ARCHIVE'
string: 'bad'
string: 'model'
string: 'fields'
string: 'UID'
string: 'revisions-&gt;recordDeletion() ALREADY DELETED'
string: 'bad'
string: 'module'
string: 'model'
string: 'UID'
string: ''
string: 'revisions-&gt;recordDeletion() COULD NOT SAVE:'
string: 'bad'
string: "refModel='"
string: "'"
string: "refUID='"
string: "'"
string: 'Revisions_Deleted'

<b>scanning file: /var/www/an2google/trunk/core/krequest.class.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	this object represents the HTTP request made of the web server
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	member variables
comment: //----------------------------------------------------------------------------------------------
comment: // the REQUEST_URI as reported by Apache [string]
comment: // separated by forwardslash [array]
comment: // module requested [string]
comment: // action to take on this module [string]
comment: // object on which the action is taken [string]
comment: // arguments [array]
comment: // module, model, action parts [array]
comment: //----------------------------------------------------------------------------------------------
comment: //	constructor (breaks up request)
comment: //----------------------------------------------------------------------------------------------
comment: // store for future reference
comment: // see setup.inc.php
comment: // they should all have one
comment: // remove leading slash		
comment: // split on forwardslashes
comment: // trim out arguments
comment: // interpret the rest
comment: //----------------------------------------------------------------------------------------------
comment: //.	get arguments from request URL (refences to records, variables, switches, etc)
comment: //----------------------------------------------------------------------------------------------
comment: //;	arguments have form /var_value/ where value may contain underscores, variable names cannot.
comment: // non empty
comment: // contains an underscore
comment: // split at first underscore
comment: // no underscore (module or action)
comment: //----------------------------------------------------------------------------------------------
comment: //.	break a browser request into controller, method, reference and param parts
comment: //----------------------------------------------------------------------------------------------
comment: //;	no information is OK, *wrong* information makes 404
comment: //;
comment: //;	(1) is the first part the name of a module?
comment: //;		(a) yes, set this-&gt;module
comment: //;
comment: //;		(b) no, is the first part an action on the default module?
comment: //;			(i) yes, set this-&gt;module
comment: //;			(ii) no, is the first part a valid reference?
comment: //;
comment: //;	note that this-&gt;getRequestArguments() should have been called first
comment: //; TODO: this could use some tidying / simplification
comment: // number of parts which are not arguments
comment: // nothing to do
comment: // check if the first part names a module
comment: //else continue with the default module
comment: //check if this part is an action
comment: //else continue with default action
comment: //if there are more parts it must be a reference
comment: /*
	function splitRequestURI() {
		global $kapenta;			// may in future be replaced with 'system' object

		$modList = $kapenta-&gt;listModules();
		$mvcCount = count($this-&gt;mvc);	// number of parts which are not arguments

		if (0 == $mvcCount) { return false; }	// nothing to do

		if (in_array($this-&gt;mvc[0], $modList)) {	// is first part a name of a module?
			//--------------------------------------------------------------------------------------
			// module is explicitly named, check next part against actions of that module
			//--------------------------------------------------------------------------------------
			$this-&gt;module = $this-&gt;mvc[0];
			$actList = $kapenta-&gt;listActions($this-&gt;mvc[0]);

			if (($mvcCount &gt; 1) &amp;&amp; (in_array($this-&gt;mvc[1] . '.act.php', $actList))) {
				//----------------------------------------------------------------------------------
				// action is explicitly named, check if there is an alias or UID
				//----------------------------------------------------------------------------------
				$this-&gt;action = $this-&gt;mvc[1];

				if ($mvcCount &gt; 2) {
					//------------------------------------------------------------------------------
					// reference is given (presumed alias, UID, etc)
					//------------------------------------------------------------------------------
					$this-&gt;ref = $this-&gt;mvc[2]; 
				}

			} else {
				//----------------------------------------------------------------------------------
				// action is not explicitly named, use default
				//----------------------------------------------------------------------------------
				if ($mvcCount &gt; 1) { $this-&gt;ref = $this-&gt;mvc[1]; }
			}

		} else {
			//--------------------------------------------------------------------------------------
			// module is not explicitly named, check against actions on default module
			//--------------------------------------------------------------------------------------
			$actList = $kapenta-&gt;listActions($kapenta-&gt;defaultModule);

			if (in_array($this-&gt;mvc[0] . '.act.php', $actList)) {
				//----------------------------------------------------------------------------------
				// method is explicitly named, any remaining part must be a reference to something
				//----------------------------------------------------------------------------------
				$this-&gt;action = $this-&gt;mvc[0];

				if ($mvcCount &gt; 1) {
					//------------------------------------------------------------------------------
					// reference is given
					//------------------------------------------------------------------------------
					$this-&gt;ref = $this-&gt;mvc[1];
				}

			} else {
				//----------------------------------------------------------------------------------
				// assuming default module, default action, request must be a reference
				//----------------------------------------------------------------------------------
				$this-&gt;ref = $this-&gt;mvc[0];
			}
		}		
		
	}
	*/
comment: //----------------------------------------------------------------------------------------------
comment: //.	make array as used by previous Kapenta versions
comment: //----------------------------------------------------------------------------------------------
string: 'default'
string: ''
string: '/'
string: '/'
string: '_'
string: '_'
string: '.act.php'
string: 'module'
string: 'action'
string: 'ref'
string: 'args'

<b>scanning file: /var/www/an2google/trunk/core/kpage.class.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	object for reading, writing and rendering pages and other response documents
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	member variables
comment: //----------------------------------------------------------------------------------------------
comment: //_ the .page.php file being loaded [string]
comment: //_ is set to true when a page is loaded [bool]
comment: //_ UID of the current response document [string]
comment: //_ page components [array]
comment: //_ block arguments [array]
comment: //_	array of debug notices [array]
comment: //_	set to true to capture and display page debug log [bool]
comment: // the parts of a page -------------------------------------------------------------------------
comment: //_	document template - supplies stylesheet, column layout, etc [string]
comment: //_	title of the page/document, if format supports this [string]
comment: //_	main content section of the document [string]
comment: //_	second column of page [string]
comment: //_	third column of page, if any [string]
comment: //_	javascript section (in header) [string]
comment: //_	javascript to be run on page load [string]
comment: //_	page banner graphic (not implemented in awarenet) [string]
comment: //_	optional items in document header (css, linked js, etc) [string]
comment: //_	first (top) level menu [string]
comment: //_	second level menu [string]
comment: //_	for menu highlighting, not used in awarenet [string]
comment: //_ for menu highlighting, not used in awarenet [string]
comment: //_	le sigh [string]
comment: //----------------------------------------------------------------------------------------------
comment: //.	constructor
comment: //----------------------------------------------------------------------------------------------
comment: //opt: fileName - fileName relative to installPath [string]
comment: // current render ID
comment: // default block environment variables
comment: //----------------------------------------------------------------------------------------------
comment: //.	load page template from a file
comment: //----------------------------------------------------------------------------------------------
comment: //arg: fileName - fileName relative to installPath [string]
comment: //returns: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //	save to file
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	serialize to array
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	render (all blocks in all template areas)
comment: //----------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	set some universals
comment: //------------------------------------------------------------------------------------------
comment: //$d['debug'] = '';
comment: //------------------------------------------------------------------------------------------
comment: //	session messages
comment: //------------------------------------------------------------------------------------------
comment: // send message to user once only
comment: //------------------------------------------------------------------------------------------
comment: //	load the template
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	decide on a menu
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	perform the replacements
comment: //------------------------------------------------------------------------------------------
comment: // replace an all page components except template
comment: //------------------------------------------------------------------------------------------
comment: //	execute blocks
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	style 
comment: //------------------------------------------------------------------------------------------		
comment: //------------------------------------------------------------------------------------------
comment: //	special admin option
comment: //------------------------------------------------------------------------------------------
comment: //$fileName = str_replace($installPath, '', $this-&gt;fileName);
comment: //$parts = explode('/', $fileName);
comment: //$editLink = "&lt;a href='/pages/edit/module_" . $parts[1] . "/" . $parts[2] 
comment: //	  . "'&gt;[edit this page]&lt;/a&gt;";
comment: //$template = str_replace('&lt;/body&gt;', $editLink . "\n&lt;/body&gt;", $template);
comment: //------------------------------------------------------------------------------------------
comment: //	include debug report if enabled
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	perform replacements again after blocks
comment: //------------------------------------------------------------------------------------------
comment: // replace an all page components except template
comment: //------------------------------------------------------------------------------------------
comment: //	convert relative URLs to absolute URLs
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	log the page view and send the page
comment: //------------------------------------------------------------------------------------------
comment: // log this page view
comment: // store session state
comment: //----------------------------------------------------------------------------------------------
comment: //.	substitute an array of values for labels in text
comment: //----------------------------------------------------------------------------------------------
comment: //arg: labels - array of 'label' =&gt; 'value' pairs  [array]
comment: //arg: txt - string to perform replacement on [string]
comment: //opt: marker - string delimiting labels, default is %% [string]
comment: //returns: string with labels replaced [string]
comment: //----------------------------------------------------------------------------------------------
comment: //.	copy arguments from $request to $this-&gt;blockArgs ($argNames is a comma separated list)
comment: //----------------------------------------------------------------------------------------------
comment: //==============================================================================================
comment: //	errors and redirects
comment: //==============================================================================================
comment: //----------------------------------------------------------------------------------------------
comment: //.	redirect browser (and search engines) to latest alias for a record
comment: //----------------------------------------------------------------------------------------------
comment: //arg: URI - relative to serverPath [string]	
comment: // store session state
comment: //----------------------------------------------------------------------------------------------
comment: //.	forbidden
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //.	temporary redirect, for shuffling browsers around
comment: //----------------------------------------------------------------------------------------------
comment: //arg: URI - location relative to serverPath;
comment: // store session state
comment: //----------------------------------------------------------------------------------------------
comment: //.	you have died of dysentery
comment: //----------------------------------------------------------------------------------------------
comment: //opt: msg - an error message or response code [string]
comment: //opt: iframe - set to true to use iframe version [bool]
comment: // choose which page template to use
comment: // no message specified, show default 404 message
comment: //TODO: make this is an editable block
comment: //----------------------------------------------------------------------------------------------
comment: //.	xml error
comment: //----------------------------------------------------------------------------------------------
comment: //opt: msg - an error message or response code [string]
comment: // store session state
comment: //==============================================================================================
comment: //	AJAX (live) support
comment: //==============================================================================================
comment: //----------------------------------------------------------------------------------------------
comment: //.	create a trigger for this page
comment: //----------------------------------------------------------------------------------------------	
comment: //arg: module - name of a kapenta module [string]
comment: //arg: name - name of trigger / channel [string]
comment: //arg: block - block to refresh when tripped [string]
comment: //return: true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //.	fire a trigger on any pages listening for it
comment: //----------------------------------------------------------------------------------------------	
comment: //arg: module - module which provides block [string]
comment: //arg: channel - name of channel on which there is a message [string]
comment: //==============================================================================================
comment: //	live debug
comment: //==============================================================================================
comment: //----------------------------------------------------------------------------------------------
comment: //.	set debug notifications
comment: //----------------------------------------------------------------------------------------------
comment: //opt: msg - an error message or response code [string]
comment: //returns true on success, false on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //.	make debug report
comment: //----------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------		
comment: //	add basic environment stuff
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------		
comment: //	add dbLoad
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------		
comment: //	add auth checks
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------		
comment: //	add database queries
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------		
comment: //	substitute into block
comment: //------------------------------------------------------------------------------------------
string: 'modules/live/models/mailbox.mod.php'
string: 'modules/live/models/trigger.mod.php'
string: ''
string: ''
string: ''
string: ''
string: ''
string: ''
string: ''
string: ''
string: ''
string: ''
string: ''
string: ''
string: ''
string: ''
string: ''
string: ''
string: 'KPage'
string: 'load()'
string: 'could not load: '
string: "&lt;br/&gt;could not load $fileName&lt;br/&gt;\n"
string: 'template'
string: 'title'
string: 'content'
string: 'nav1'
string: 'nav2'
string: 'script'
string: 'jsinit'
string: 'banner'
string: 'head'
string: 'menu1'
string: 'menu2'
string: 'section'
string: 'subsection'
string: 'breadcrumb'
string: 'page'
string: 'template'
string: 'title'
string: 'content'
string: 'nav1'
string: 'nav2'
string: 'script'
string: 'jsinit'
string: 'banner'
string: 'head'
string: 'menu1'
string: 'menu2'
string: 'section'
string: 'subsection'
string: 'breadcrumb'
string: 'websiteName'
string: 'serverPath'
string: 'moduleName'
string: 'module'
string: 'defaultTheme'
string: 'pageInstanceUID'
string: 'jsUserUID'
string: 'sMessage'
string: ''
string: ''
string: 'sMessage'
string: "[[:theme::navtitlebox::label=Notice::toggle=divSMessage:]]"
string: "&lt;div id='divSMessage'&gt;"
string: "&lt;/div&gt;&lt;br/&gt;\n"
string: ''
string: 'themes/'
string: '/'
string: 'template'
string: ''
string: 'admin'
string: "&lt;a href='%%serverPath%%admin/' class='menu'&gt;Admin&lt;/a&gt;"
string: 'adminConsoleLink'
string: '/views/usermenu.block.php'
string: 'public'
string: '/views/publicmenu.block.php'
string: 'menu1'
string: '/themes/'
string: 'template'
string: '%%'
string: '%%'
string: ''
string: 'admin'
string: 'debug'
string: 'debug'
string: ''
string: 'template'
string: '%%'
string: '%%'
string: '%%'
string: 'delme%%'
string: ''
string: '|'
string: 'href|src|background|action'
string: "='/"
string: "='"
string: "=/"
string: "="
string: "=\"/"
string: "=\""
string: '%%'
string: 'serverPath'
string: 'websiteName'
string: 'defaultTheme'
string: ','
string: "HTTP/1.1 301 Moved Permanently"
string: "Location: "
string: "The page you requested moved &lt;a href='"
string: "'&gt;here&lt;/a&gt;."
string: ''
string: "HTTP/1.1 403 Forbidden"
string: 'modules/home/actions/403.page.php'
string: 'modules/home/actions/403if.page.php'
string: ''
string: "&lt;span class='ajaxerror'&gt;$message&lt;/span&gt;"
string: 'message'
string: 'loginredirect'
string: 'REQUEST_URI'
string: "HTTP/1.1 302 Moved Temporarily"
string: "Location: "
string: "The page you requested has moved &lt;a href='"
string: "'&gt;here&lt;/a&gt;."
string: ''
string: "HTTP/1.1 404 Not Found"
string: 'modules/home/actions/404.page.php'
string: 'modules/home/actions/404if.page.php'
string: ''
string: "&lt;h1&gt;404 - Not Found&lt;/h1&gt;\n"
string: "&lt;p&gt;The page you requested could not be found.  It may have been removed or "
string: "deleted, check for typos in the link you followed to get here.&lt;/p&gt;\n"
string: "&lt;span class='ajaxerror'&gt;$message&lt;/span&gt;"
string: 'message'
string: ''
string: "HTTP/1.1 404 Not Found"
string: "&lt;?xml version=\"1.0\"?&gt;\n"
string: "&lt;error&gt;$msg&lt;/error&gt;\n"
string: ''
string: "module='"
string: "'"
string: "channel='"
string: "'"
string: 'Live_Trigger'
string: '*'
string: ''
string: 'themes/'
string: '/views/debug.block.php'
string: "[[:theme::navtitlebox::label=Role Permissions::toggle=debugRolePerms:]]\n"
string: "&lt;div id='debugRolePerms'&gt;"
string: "&lt;/div&gt;&lt;br/&gt;\n"
string: 'dbLoad'
string: ''
string: 'dbLoad'
string: "&lt;div class='inlinequote'&gt;$query&lt;/div&gt;\n"
string: "[[:theme::navtitlebox::label=dbLoad calls::toggle=debugDbLoad:]]\n"
string: "&lt;div id='debugDbLoad'&gt;"
string: "&lt;/div&gt;&lt;br/&gt;\n"
string: 'auth'
string: ''
string: 'auth'
string: "&lt;div class='inlinequote'&gt;$query&lt;/div&gt;\n"
string: "[[:theme::navtitlebox::label=Role Permissions::toggle=debugAuthChecks:]]\n"
string: "&lt;div id='debugAuthChecks'&gt;"
string: "&lt;/div&gt;&lt;br/&gt;\n"
string: 'query'
string: ''
string: 'query'
string: "&lt;div class='inlinequote'&gt;$query&lt;/div&gt;\n"
string: "[[:theme::navtitlebox::label=Database Queries::toggle=debugDbQueries:]]\n"
string: "&lt;div id='debugDbQueries'&gt;"
string: "&lt;/div&gt;&lt;br/&gt;\n"
string: '%%report%%'
string: ''

<b>scanning file: /var/www/an2google/trunk/core/knotifications.class.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	object representing the notifications system
comment: //--------------------------------------------------------------------------------------------------
comment: //TODO: try remove as many methods from this as possible
comment: //----------------------------------------------------------------------------------------------
comment: //.	constructor
comment: //----------------------------------------------------------------------------------------------
comment: // do nothing for now
comment: //----------------------------------------------------------------------------------------------
comment: //.	create a new notification
comment: //----------------------------------------------------------------------------------------------
comment: //arg: title - title of notification (html) [string]
comment: //arg: content - body of notification (html) [string]
comment: //arg: url - link to subject of notification [string]
comment: //arg: imgUID - UID of an image for thumbnail [string]
comment: //returns: UID of new notification, or false on failure [string][bool]
comment: //----------------------------------------------------------------------------------------------
comment: //.	count notifications made about some object
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //.	add a user to a notification
comment: //----------------------------------------------------------------------------------------------
comment: //arg: notificationUID - UID of a Notifications_Notification object [string]
comment: //arg: userUID - UID of a Users_User object [string]
comment: //returns: true on success, false on failure [bool]
comment: // already added
comment: //----------------------------------------------------------------------------------------------
comment: //.	add all admin users to a notification
comment: //----------------------------------------------------------------------------------------------
comment: //arg: notificationUID - UID of a Notifications_Notification object [string]
comment: //returns: true on success, false on failure [bool]
comment: //%	return value [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //.	add an entire school to a notification
comment: //----------------------------------------------------------------------------------------------
comment: //arg: notificationUID - UID of a Notifications_Notification object [string]
comment: //arg: schoolUID - UID of a Schools_School object [string]
comment: //----------------------------------------------------------------------------------------------
comment: //.	add all admins of a project
comment: //----------------------------------------------------------------------------------------------
comment: //arg: notificationUID - UID of a Notifications_Notification object [string]
comment: //arg: schoolUID - UID of a Schools_School object [string]
comment: //arg: grade - a school grade [string]
comment: //----------------------------------------------------------------------------------------------
comment: //.	add all members of a group to a notification
comment: //----------------------------------------------------------------------------------------------
comment: //arg: notificationUID - UID of a Notifications_Notification object [string]
comment: //arg: schoolUID - UID of a Groups_Group object [string]
comment: //----------------------------------------------------------------------------------------------
comment: //.	add all friends of a given user
comment: //----------------------------------------------------------------------------------------------
comment: //arg: notificationUID - UID of a Notifications_Notification object [string]
comment: //arg: userUID - UID of a Users_User object [string]
comment: //----------------------------------------------------------------------------------------------
comment: //.	add all confirmed members and admins of a project
comment: //----------------------------------------------------------------------------------------------
comment: //arg: notificationUID - UID of a Notifications_Notification object [string]
comment: //arg: projectUID - UID of a Projects_Project object [string]
comment: //$sql = "select * from Projects_Membership"
comment: //	 . " where projectUID='" . $db-&gt;addMarkup($projectUID) . "'"
comment: //	 . " and (role='admin' OR role='member')";
comment: //----------------------------------------------------------------------------------------------
comment: //.	add all admins of a project
comment: //----------------------------------------------------------------------------------------------
comment: //arg: notificationUID - UID of a Notifications_Notification object [string]
comment: //arg: projectUID - UID of a Projects_Project object [string]
comment: // $sql = "select * from Projects_Membership"
comment: //	 . " where UID='" . $db-&gt;addMarkup($projectUID) . "'"
comment: //	 . " and role='admin'";
comment: //----------------------------------------------------------------------------------------------
comment: //.	add everyone participating in a forum thread
comment: //----------------------------------------------------------------------------------------------
comment: //arg: notificationUID - UID of a Notifications_Notification object [string]
comment: //arg: threadUID - UID of a Forums_Thread object [string]
comment: //TODO
string: 'modules/notifications/models/notification.mod.php'
string: 'modules/notifications/models/userindex.mod.php'
string: ''
string: ''
string: "refModule='"
string: "'"
string: "refModel='"
string: "'"
string: "refUID='"
string: "'"
string: 'Notifications_Notification'
string: ''
string: 'Users_User'
string: '*'
string: "role='admin'"
string: 'UID'
string: "select * from Users_User where school='"
string: "'"
string: 'UID'
string: "select * from Users_User"
string: " where school='"
string: "'"
string: " and grade='"
string: "'"
string: 'UID'
string: "select * from Groups_Membership where groupUID='"
string: "'"
string: 'userUID'
string: "select * from Users_Friendship"
string: " where userUID='"
string: "'"
string: " and status='confirmed'"
string: 'friendUID'
string: "projectUID='"
string: "'"
string: "(role='admin' OR role='member')"
string: 'Projects_Membership'
string: '*'
string: 'userUID'
string: "projectUID='"
string: "'"
string: "role='admin'"
string: 'Projects_Membership'
string: '*'
string: 'userUID'

<b>scanning file: /var/www/an2google/trunk/core/kmodule.class.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	object for working with module data
comment: //--------------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	member variables
comment: //----------------------------------------------------------------------------------------------
comment: //_	location of module.xml.php file if loaded [string]
comment: //_	set to true when a module.xml.php gile is loaded [bool]
comment: //_	name of this module [string]
comment: //_	version number, for comapatability checks [string]
comment: //_	revision number, for compatability checks [string]
comment: //_	description of this module [string]
comment: //_	no longer used, TODO: remove [string]
comment: //_	no longer used, TODO: remove [string]
comment: //_	reserved [bool]
comment: //_	not used in awareNet [bool]
comment: //_	default permission set for this module [array]
comment: //_	array of models (serialized to array) [array]
comment: //_	reserved [array]
comment: //----------------------------------------------------------------------------------------------
comment: //.	constructor
comment: //----------------------------------------------------------------------------------------------
comment: //opt: moduleName - name of a module [string]
comment: //----------------------------------------------------------------------------------------------
comment: //.	load a module.xml.php file
comment: //----------------------------------------------------------------------------------------------
comment: //arg: moduleName - name of a module [string]
comment: //------------------------------------------------------------------------------------------
comment: //	read xml
comment: //------------------------------------------------------------------------------------------
comment: // parse XML document
comment: // try get root entity
comment: // check that we did		
comment: //------------------------------------------------------------------------------------------
comment: //	get basic module fields
comment: //------------------------------------------------------------------------------------------
comment: //......................................................................
comment: //TODO: checks here
comment: //......................................................................
comment: //------------------------------------------------------------------------------------------
comment: //	done
comment: //------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //.	save a module.xml.php file // TODO: improve this, add checks, add bool return value
comment: //----------------------------------------------------------------------------------------------
comment: //echo "fileName: " . $this-&gt;fileName . "&lt;br/&gt;\n";
comment: //echo "&lt;textarea rows='30' cols='50'&gt;" . $xml . "&lt;/textarea&gt;&lt;br/&gt;\n";
comment: //filePutContents takes a filename relative to $installPath
comment: //----------------------------------------------------------------------------------------------
comment: //.	serialize to xml
comment: //----------------------------------------------------------------------------------------------
comment: //returns: XML serialization of this module [string]
comment: //%	return value [string]
comment: //% collects model descriptions [string]
comment: //%	default permission set [string]
comment: //%	module dependencies [string]
comment: //----------------------------------------------------------------------------------------------
comment: //.	serialize to array
comment: //----------------------------------------------------------------------------------------------
comment: //returns: array of module data [array]
comment: //----------------------------------------------------------------------------------------------
comment: //.	make an extended array of all data a view will need
comment: //----------------------------------------------------------------------------------------------
comment: //returns: extended array of member variables and metadata [array]
comment: //TODO: moar
comment: //----------------------------------------------------------------------------------------------
comment: //.	get the current module's installation status
comment: //----------------------------------------------------------------------------------------------
comment: //returns: installation status message [string]
comment: //, this function depends upon a standard install.inc.php
comment: //----------------------------------------------------------------------------------------------
comment: //.	get the current module's installation status
comment: //----------------------------------------------------------------------------------------------
comment: //returns: installation status message [string]
comment: //, this function depends upon a standard install.inc.php
string: 'core/kmodel.class.php'
string: ''
string: ''
string: ''
string: ''
string: ''
string: ''
string: ''
string: ''
string: ''
string: ''
string: ''
string: 'modules/'
string: '/module.xml.php'
string: "echo NSF $fileName"
string: 'children'
string: 'type'
string: 'modulename'
string: 'value'
string: 'version'
string: 'value'
string: 'revision'
string: 'value'
string: 'description'
string: 'value'
string: 'enabled'
string: 'value'
string: 'search'
string: 'value'
string: 'defaultpermissions'
string: "\n"
string: 'value'
string: ''
string: 'models'
string: 'children'
string: 'dependencies'
string: 'children'
string: ''
string: ''
string: ''
string: ''
string: '        '
string: '    '
string: '        '
string: "\n"
string: '        &lt;module&gt;'
string: "&lt;/module&gt;\n"
string: "&lt;module&gt;\n"
string: "    &lt;modulename&gt;"
string: "&lt;/modulename&gt;\n"
string: "    &lt;version&gt;"
string: "&lt;/version&gt;\n"
string: "    &lt;revision&gt;"
string: "&lt;/revision&gt;\n"
string: "    &lt;description&gt;"
string: "&lt;/description&gt;\n"
string: "    &lt;enabled&gt;"
string: "&lt;/enabled&gt;\n"
string: "    &lt;search&gt;"
string: "&lt;/search&gt;\n"
string: "    &lt;models&gt;\n"
string: "    &lt;/models&gt;\n"
string: "    &lt;dependencies&gt;\n"
string: "    &lt;/dependencies&gt;\n"
string: "    &lt;defaultpermissions&gt;\n"
string: "    &lt;/defaultpermissions&gt;\n"
string: "&lt;/module&gt;\n"
string: 'modulename'
string: 'version'
string: 'revision'
string: 'description'
string: 'core'
string: 'models'
string: 'installed'
string: 'enabled'
string: 'search'
string: 'editUrl'
string: ''
string: 'editLink'
string: ''
string: 'installUrl'
string: ''
string: 'installLink'
string: ''
string: 'admin'
string: 'editUrl'
string: '%%serverPath%%admin/module/'
string: 'installUrl'
string: '%%serverPath%%admin/install/'
string: 'modules/'
string: '/inc/install.inc.php'
string: 'no install script'
string: '_install_status_report'
string: 'no status function'
string: 'modules/'
string: '/inc/install.inc.php'
string: 'no install script'
string: '_install_module'
string: 'no install_module function'

<b>scanning file: /var/www/an2google/trunk/core/kmodel.class.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	object representing kapenta models
comment: //--------------------------------------------------------------------------------------------------
comment: //+	As read from module.xml.php files.  This class decribes permissions and relationships the module
comment: //+	exposes for this object type.
comment: //----------------------------------------------------------------------------------------------
comment: //	member variables
comment: //----------------------------------------------------------------------------------------------
comment: //_	set to true when object has been loaded [bool]
comment: //_	name of a model [string]
comment: //_	description of a model [string]
comment: //_	permissions native to this object [array:string]
comment: //_	permissions exported by this object [array:string]
comment: //_	relationships between this object and users [array:string]
comment: //----------------------------------------------------------------------------------------------
comment: //.	constructor
comment: //----------------------------------------------------------------------------------------------
comment: //opt: xml - xml snippet describing a model [string]
comment: //----------------------------------------------------------------------------------------------
comment: //.	load XML
comment: //----------------------------------------------------------------------------------------------
comment: //arg: xml - section of module.xml.php [string]
comment: //returns: true on success, false on failure [bool]
comment: //------------------------------------------------------------------------------------------
comment: //	(re)initialize all members
comment: //------------------------------------------------------------------------------------------
comment: //echo "creating xml document&lt;br/&gt;\n";
comment: // try get root entity
comment: // check that we did		
comment: //----------------------------------------------------------------------------------------------
comment: //.	load object serialized as an array
comment: //----------------------------------------------------------------------------------------------
comment: //arg: ary - kmodel object serialized as array [array]
comment: //returns: true on success, false on failure [bool]
comment: //TODO: checks here, make sure all parts are present and correct
comment: //----------------------------------------------------------------------------------------------
comment: //.	serialize this object to XML
comment: //----------------------------------------------------------------------------------------------
comment: //opt: i - indent, prefix each line with this [string]
comment: //opt: uI - unit of indentation [string]
comment: //returns: XML [string]	
comment: //%	return value [string]
comment: //----------------------------------------------------------------------------------------------
comment: //.	serialize this object to an array
comment: //----------------------------------------------------------------------------------------------
comment: //returns: this object serialized as an array [array]
comment: //%	return value [array]
string: ''
string: ''
string: ''
string: ''
string: ''
string: ''
string: 'model'
string: 'type'
string: 'children'
string: 'type'
string: 'name'
string: 'value'
string: 'description'
string: 'value'
string: 'permissions'
string: 'children'
string: 'permission'
string: 'type'
string: 'value'
string: 'export'
string: 'type'
string: 'value'
string: 'relationships'
string: 'children'
string: 'relationship'
string: 'type'
string: 'value'
string: 'name'
string: 'description'
string: 'permissions'
string: 'export'
string: 'relationships'
string: ''
string: '    '
string: ''
string: "&lt;model&gt;\n"
string: "&lt;name&gt;"
string: "&lt;/name&gt;\n"
string: "&lt;description&gt;"
string: "&lt;/description&gt;\n"
string: "&lt;permissions&gt;\n"
string: "&lt;permission&gt;"
string: "&lt;/permission&gt;\n"
string: "&lt;export&gt;"
string: "&lt;/export&gt;\n"
string: "&lt;/permissions&gt;\n"
string: "&lt;relationships&gt;\n"
string: "&lt;relationship&gt;"
string: "&lt;/relationship&gt;\n"
string: "&lt;/relationships&gt;\n"
string: "&lt;/model&gt;\n"
string: 'name'
string: 'description'
string: 'permissions'
string: 'export'
string: 'relationships'

<b>scanning file: /var/www/an2google/trunk/core/kcron.class.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	global cron object
comment: //--------------------------------------------------------------------------------------------------
comment: //+	This object should be initialized and run at 10 minute intervals by calling:
comment: //+
comment: //+	(serverPath)admin/cron/
comment: //+
comment: //+	On linux, the following crontab entry should accomplish this:
comment: //+
comment: //+	5,15,25,35,45,55 * * * * root wget --output-document="/dev/null" "http://mysite.tld/admin/cron/"
comment: //+
comment: //+	Windows users should set up a Scheduled task
comment: //+
comment: //+	Note that daily jobs are only run sometime after 3am local time (usually a slack period)
comment: //+	TODO: consider adding 'weekly' and 'monthly' options for log rotation
comment: //----------------------------------------------------------------------------------------------
comment: //	member variables
comment: //----------------------------------------------------------------------------------------------
comment: //_	location of lastrun file [string]
comment: //_	timestamp when last tenmins jobs were run [int]
comment: //_	timestamp when last hourly jobs were run [int]
comment: //_	timestamp when last daily jobs were run [int]
comment: //_	true when lastrun.cron.php file is loaded [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //.	constructor
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //.	load the lastrun.cron file (by default it is in /data/)
comment: //----------------------------------------------------------------------------------------------
comment: //returns: true on success, fals on failure [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //.	load the lastrun.cron file (by default it is in /data/
comment: //----------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //.	run any tasks which are now due
comment: //----------------------------------------------------------------------------------------------
comment: //returns: HTML report of actions taken [string]
comment: //%	return value [string]
comment: //%	timestamp when script started [int]
comment: // only between 3 and 4 in the morning
comment: // TODO: make this ^^^ configurable 
comment: //----------------------------------------------------------------------------------------------
comment: //.	run any tasks for a particular interval
comment: //----------------------------------------------------------------------------------------------
comment: //arg: interval - name of interval (tenmins|hourly|weekly) [string]
string: 'data/lastrun.cron.php'
string: "\n"
string: ':'
string: '#'
string: '#'
string: ":"
string: 'tenmins'
string: 'hourly'
string: 'daily'
string: "&lt;? /*\n"
string: "tenmins: "
string: " # "
string: "\n"
string: "hourly: "
string: " # "
string: "\n"
string: "daily: "
string: " # "
string: "\n"
string: "*/ ?&gt;"
string: "&lt;h1&gt;"
string: "&lt;/h1&gt;\n"
string: "running cron: $now #"
string: "&lt;br/&gt;\n"
string: "tenmins: "
string: " #"
string: "&lt;br/&gt;\n"
string: "hourly: "
string: " #"
string: "&lt;br/&gt;\n"
string: "daily: "
string: " #"
string: "&lt;br/&gt;\n"
string: 'tenmins'
string: 'hourly'
string: 'G'
string: 'daily'
string: ''
string: 'running task set: '
string: 'modules/'
string: '/inc/cron.inc.php'
string: '_cron_'
string: 'running task set: '
string: ' ('
string: ')'

<b>scanning file: /var/www/an2google/trunk/core/kaliases.class.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //	aliases are SEO-friendly strings used to identify objects
comment: //--------------------------------------------------------------------------------------------------
comment: //
comment: //	All objects are identified by their UID.  Additionally, objects may have multiple aliases.
comment: //
comment: //	http://mysite.org/widgets/234987023495 -(301)-&gt; http://mysite.org/widgets/Cat-Polishing-Machine
comment: //
comment: //	Objects which cannot use their preferred alias will be assigned another.  The default alias is 
comment: //	the one stored on the object itself. Alternate aliases 302 to the default alias.
comment: //
comment: //	The function findRedirect($model) returns the UID of an object, or redirects to the default
comment: //	alias if a non-default one is used.
comment: //--------------------------------------------------------------------------------------------------
comment: //	decides on an alias for a record and stores it in the recordalias table, returns UID
comment: //--------------------------------------------------------------------------------------------------
comment: //	Note: this is called by save() methods on objects which have an alias field, returns the value 
comment: //	for that field.  $plainText is a title field or the like from which an alias is derived.
comment: //----------------------------------------------------------------------------------------------
comment: //.	member variables TODO: load these from some settings file
comment: //----------------------------------------------------------------------------------------------
comment: // maximum length of an alias [int]
comment: //----------------------------------------------------------------------------------------------
comment: //.	constructor (nothing as yet)
comment: //----------------------------------------------------------------------------------------------
comment: // nothing here yet
comment: //----------------------------------------------------------------------------------------------
comment: //.	create an alias for a given object and identifying string
comment: //----------------------------------------------------------------------------------------------
comment: //arg: refModule - name of a module [string]
comment: //arg: refModel - class of object which will own the alias [string]
comment: //arg: refUID - UID of object which will own the alias [string]
comment: //arg: plainText - from which alias will be dericed [string]
comment: //returns: alias assigned to this object [string]
comment: //------------------------------------------------------------------------------------------
comment: //	get the default recordAlias for this plaintext
comment: //------------------------------------------------------------------------------------------
comment: //echo "Creating alias for $refModule, $refModel, $refUID, $plainText&lt;br/&gt;";
comment: // no plainText
comment: // no refUID
comment: // no service
comment: //------------------------------------------------------------------------------------------
comment: //	check if record (#refUID) already owns its default recordAlias - if so then we're done
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	alias is not owned, it can be assigned to this record
comment: //------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //	the default alias is already owned by another record
comment: //----------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	this record has no alias yet, find an unused record by appending a number
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	the default is owned by another record, return the first alias the record registered
comment: //------------------------------------------------------------------------------------------
comment: // just in case
comment: //----------------------------------------------------------------------------------------------
comment: //	checks that the alias supplied is the (object) default, redirects to the default if not
comment: //----------------------------------------------------------------------------------------------
comment: //arg: model - type of object which owns this alias [string]
comment: //returns: UID of object owning the alias given, or it 404s [string]
comment: //------------------------------------------------------------------------------------------
comment: //	look for this record in the Aliases_Alias table
comment: //------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------
comment: //	we have a record(s), find the default and compare
comment: //--------------------------------------------------------------------------------------
comment: // pop serialized alias of ennd of array
comment: //----------------------------------------------------------------------------------
comment: //	default alias was used, return the UID and we're done
comment: //----------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------
comment: //	alias used is not default or wrong case (mr-smith -(301)-&gt; Mr-Smith)
comment: //----------------------------------------------------------------------------------
comment: //TODO: use $request object to reconstruct URI, include args
comment: //--------------------------------------------------------------------------------------
comment: //	no matches found, but this is a valid UID
comment: //--------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //.	create new Alias object
comment: //----------------------------------------------------------------------------------------------
comment: //arg: refModule - name of a module [string]
comment: //arg: refModel - class of object which will own the alias [string]
comment: //arg: refUID - UID of object which will own the alias [string]
comment: //arg: alias - to be created [string]
comment: //returns: UID of new alias, or false on failure [string][bool]	
comment: //----------------------------------------------------------------------------------------------
comment: //.	get dbSchema for alias table
comment: //----------------------------------------------------------------------------------------------
comment: //returns: dbSchema [array]
comment: //----------------------------------------------------------------------------------------------
comment: //.	make alias froma given string
comment: //----------------------------------------------------------------------------------------------
comment: //arg: plainText - preferably in latin script [string]
comment: //returns: format suitable for including in URLs [string]
comment: //------------------------------------------------------------------------------------------
comment: //	remove any chars which are non-alphanumeric, space, minus or '.'
comment: //------------------------------------------------------------------------------------------
comment: // replace these chars
comment: // ...
comment: // allow these chars
comment: // ...
comment: // 0-9
comment: // a-z
comment: // A-Z
comment: // minus
comment: // allow period
comment: // make sure it's less than 100 chars long
comment: //------------------------------------------------------------------------------------------
comment: //	tidy output, and we're done
comment: //------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //.	delete all aliases for a record
comment: //----------------------------------------------------------------------------------------------
comment: //arg: refModule - module to which owner belongs [string]
comment: //arg: refModel - type of object this is [string]
comment: //arg: refUID - UID of object which owns aliases [string]
comment: //returns: number of aliases deleted [int]
comment: //----------------------------------------------------------------------------------------------
comment: //.	get the default alias of an object (ie, the one recorded by the object itsef)
comment: //----------------------------------------------------------------------------------------------
comment: //arg: model - object type / db table name [string]
comment: //arg: UID - unique identifier of object [string]
comment: //returns: default alias of object, or false on error [string][bool]
comment: //------------------------------------------------------------------------------------------
comment: //	check that model is a valid table
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	try load the object from the database
comment: //------------------------------------------------------------------------------------------
comment: // bad table name
comment: // no such object
comment: // should be only one
comment: // strip db markup
comment: //------------------------------------------------------------------------------------------
comment: //	return the alias, if it has one
comment: //------------------------------------------------------------------------------------------
comment: // no alias field
comment: // alias field blank 
comment: // OK.
comment: //--------------------------------------------------------------------------------------------------
comment: //.	find out which object an alias belongs to, provided we know the module and type
comment: //--------------------------------------------------------------------------------------------------
comment: //arg: refModule - module name [string]
comment: //arg: refModel - model type [string]
comment: //arg: alias - the alias whose owner we'd like to know [string]
comment: //--------------------------------------------------------------------------------------
comment: //	alias is owned by some object, return its UID
comment: //--------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------
comment: //	apparently not owned by an object, check if it's an action on this module
comment: //--------------------------------------------------------------------------------------
comment: //	this prevents action names being claimed by objects, causing ambiguity in URI
comment: // nope, nothing claims this name
comment: //----------------------------------------------------------------------------------------------
comment: //.	get all aliases associated with a particular record
comment: //----------------------------------------------------------------------------------------------
comment: //arg: refModule - module name [string]
comment: //arg: refModel - model name [string]
comment: //arg: refUID - UID of the object which owns aliases [string]
comment: //returns: array of aliases owned by this object [array]
comment: //----------------------------------------------------------------------------------------------
comment: //.	find an unused alias which begins with the one we'd like
comment: //----------------------------------------------------------------------------------------------
comment: //arg: refModule - module name [string]
comment: //arg: refModel - object type [string]
comment: //arg: default - alias we'd like best [string]
comment: //opt: depth - to prevent infinite recursion [int]
comment: //;	$depth is to prevent infinite recusion if table is full
comment: //;	used to resolve collisions (eg, two Mr-Smith records)
string: 'modules/aliases/models/alias.mod.php'
string: ''
string: ''
string: "(aliaslc='"
string: "' OR refUID='"
string: "')"
string: "refModel='"
string: "'"
string: 'aliases_alias'
string: '*'
string: 'refUID'
string: 'refUID'
string: '/'
string: '/'
string: '//'
string: '/'
string: ''
string: ''
string: "&amp;amp;"
string: "-and-"
string: "\r"
string: '-'
string: "\n"
string: '-'
string: "\t"
string: '-'
string: ' '
string: '-'
string: '_'
string: '-'
string: '/'
string: '-fs-'
string: '&amp;'
string: '-and-'
string: ':'
string: '-c-'
string: ';'
string: '-sc-'
string: '#'
string: 'No.'
string: '?'
string: '?'
string: '-'
string: '-'
string: '.'
string: '.'
string: '-'
string: '.'
string: "-and-amp-sc-"
string: "-and-"
string: "---"
string: "-"
string: "---"
string: "-"
string: "---"
string: "-"
string: "--"
string: "-"
string: "refModule='"
string: "'"
string: "refModel='"
string: "'"
string: "refUID='"
string: "'"
string: 'aliases_alias'
string: '*'
string: 'No such table:'
string: 'bad'
string: "select * from $model where UID='"
string: "'"
string: 'alias'
string: ''
string: 'alias'
string: 'alias'
string: "refModule='"
string: "'"
string: "refModel='"
string: "'"
string: "aliaslc='"
string: "'"
string: 'aliases_alias'
string: '*'
string: 'refUID'
string: '(action)'
string: "refModule='"
string: "'"
string: "refModel='"
string: "'"
string: "refUID='"
string: "'"
string: 'aliases_alias'
string: '*'
string: 'UID'
string: 'alias'
string: '-'

<b>scanning file: /var/www/an2google/trunk/core/core.inc.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	default libraries and objects available to all modules
comment: //--------------------------------------------------------------------------------------------------
comment: //+	Default Objects:
comment: //+
comment: //+		$kapenta - abstraction of kapenta installation [class:KSystem]
comment: //+		$req - abstraction of request made by browser [class:KRequest]
comment: //+		$page - abstraction of the response document [class:KPage]
comment: //+		$db - abstraction of the database [class:KDBDriver]
comment: //--------------------------------------------------------------------------------------------------
comment: //	default objects
comment: //--------------------------------------------------------------------------------------------------
comment: // system
comment: // xml parser
comment: // HTTP request interpreter
comment: // HTTP request interpreter
comment: // response document
comment: // interface to theme
comment: // peer-to-peer subsystem
comment: // user notification of events
comment: // object revision history and recycle bin
comment: // miscellaneous utilities
comment: // dbType is a global from setup.inc.php
comment: //--------------------------------------------------------------------------------------------------
comment: //	older library stubs (deprecated)
comment: //--------------------------------------------------------------------------------------------------
comment: //include 'http.inc.php';
comment: //include 'routing.inc.php';
comment: //include 'mysql.inc.php';	
comment: //include 'recordalias.inc.php';
comment: //include 'utils.inc.php';
comment: //include 'session.inc.php';
comment: //include 'xml.inc.php';
comment: //include 'blocks.inc.php';
comment: //include 'log.inc.php';
comment: //include 'theme.inc.php';
comment: //include 'img.inc.php';
comment: //include 'auth.inc.php';
comment: //include 'notifications.inc.php';
comment: //include 'modutils.inc.php';
comment: //include 'events.inc.php';
comment: //include 'sync.inc.php';
string: 'ksystem.class.php'
string: 'kxmldocument.class.php'
string: 'ksession.class.php'
string: 'krequest.class.php'
string: 'kpage.class.php'
string: 'ktheme.class.php'
string: 'ksync.class.php'
string: 'knotifications.class.php'
string: 'krevisions.class.php'
string: 'kutils.class.php'
string: ''
string: 'MySQL'
string: 'core/dbdriver/mysql.dbd.php'
string: 'core/dbdriver/mysql.dbd.php'
string: 'core/dbdriver/mysqladmin.dbd.php'
string: 'core/kaliases.class.php'
string: 'modules/users/models/user.mod.php'
string: 'modules/users/models/role.mod.php'

<b>scanning file: /var/www/an2google/trunk/core/dbdriver/mysqladmin.dbd.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	administrative database functions for mysql
comment: //--------------------------------------------------------------------------------------------------
comment: //+	These are only used by administrative scripts (installation, maintenance, etc) and not loaded
comment: //+	by ordinary actions on modules called by users.
comment: //+
comment: //+ These are wrapper functions to allow the same function names (and thus code) on different DBMS.
comment: //+ Note that % (sql wildcard) is stripped from UIDs from some functions as a security precaution.
comment: //+ Field values are generally escaped to prevent SQL injection by sqlMarkup
comment: //+
comment: //+ Table schema are passed as nested associative arrays:
comment: //+
comment: //+  'table' -&gt; string, name of table
comment: //+  'fields' -&gt; array of fieldname -&gt; type, where type is MySQL type
comment: //+  'indices' -&gt; array of fieldname -&gt; size (index name is derived from fieldname)
comment: //+	 'nodiff' -&gt; array of field names which are not versioned (eg, hitcount)
comment: //----------------------------------------------------------------------------------------------
comment: //.	make a database (consider removing this, live sites should not need this functionality)
comment: //----------------------------------------------------------------------------------------------
comment: //arg: database - name of database [string]
comment: //$connect = mysql_connect($db-&gt;host, $db-&gt;user, $db-&gt;pass) or die("no connect");
comment: //----------------------------------------------------------------------------------------------
comment: //.	make a table + indices given dbSchema
comment: //----------------------------------------------------------------------------------------------
comment: //arg: dbSchema - table schema [array]
comment: //returns: true on success, false on failure [bool]
comment: //------------------------------------------------------------------------------------------
comment: //	checks
comment: //------------------------------------------------------------------------------------------
comment: //if ('admin' != $user-&gt;role) { return false; }						// admins only
comment: // table already exists
comment: //------------------------------------------------------------------------------------------
comment: //	create the table
comment: //------------------------------------------------------------------------------------------
comment: // check it worked
comment: //------------------------------------------------------------------------------------------
comment: //	create indices
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	check that indices were created correctly
comment: //------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //.	get a list of indexes on a table
comment: //----------------------------------------------------------------------------------------------
comment: //arg: tableName - name of a table in the default database [string]
comment: //returns: array of index data, or false on failure [array][bool]
comment: //	return value [array]
comment: //----------------------------------------------------------------------------------------------
comment: //.	copy all records from one table to another
comment: //----------------------------------------------------------------------------------------------
comment: //arg: fromTable - name of database table to copy from [string]
comment: //arg: toSchema - name of database table to copy to [array]
comment: //arg: rename - map of fields to rename (old =&gt; new) [array]
comment: //returns: number of records copied [int]
comment: //%	return value, number of records copied [int]
comment: // default values
comment: // rename fields
comment: //----------------------------------------------------------------------------------------------
comment: //.	make a list of all tables in database
comment: //----------------------------------------------------------------------------------------------
comment: //returns: array of table names [array]
comment: //----------------------------------------------------------------------------------------------
comment: //.	return a dbSchema array as html
comment: //----------------------------------------------------------------------------------------------
comment: //: this is mostly for debugging and administrative display
comment: //arg: dbSchema - a database table schema [array]
comment: //returns: HTML table with kapenta 'scaffold' style [string]
comment: // default title
comment: //----------------------------------------------------------------------------------------------
comment: //.	compare two database table schema
comment: //----------------------------------------------------------------------------------------------
comment: //: this is mostly for debugging and administrative display, and used by updates
comment: //arg: dbSchema1 - a database table schema [array]
comment: //arg: dbSchema2 - a database table schema [array]
comment: //returns: true if they check out, false if they are different
comment: //: nodiff fields are not included, since the database doesn't look after these
comment: //: note that tables may have different names
comment: //------------------------------------------------------------------------------------------
comment: //	fields must be in same order
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	indices need not be in same order
comment: //------------------------------------------------------------------------------------------
comment: // nothing turned out to be incorrect
comment: //----------------------------------------------------------------------------------------------
comment: //.	recreate a table to a given schema
comment: //----------------------------------------------------------------------------------------------
comment: //: this is mostly for debugging and administrative display
comment: //arg: tableName - name of a database table / model name [string]
comment: //arg: dbSchema - a database table schema [array]
comment: //returns: true on success, false if it fails [bool]
comment: // only admins can do this
comment: //------------------------------------------------------------------------------------------
comment: //	create a new, temporary table according to schema without indices and revisioning
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	copy all records into temp table
comment: //------------------------------------------------------------------------------------------
comment: //TODO: more intelligence here
comment: //------------------------------------------------------------------------------------------
comment: //	delete the original table and its indices
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	create new table with indices and copy all records from temporary table
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	delete the temp table
comment: //------------------------------------------------------------------------------------------
comment: //$db-&gt;query('DROP TABLE ' . $tmpSchema['model']);
comment: //$db-&gt;loadTables();
comment: //----------------------------------------------------------------------------------------------
comment: //.	check that a database schema matches the existing table
comment: //----------------------------------------------------------------------------------------------
comment: //arg: tableName - name of a database table [string]
comment: //returns: html report of table status [string]
comment: //: TODO: remove this, redundant test code
comment: //----------------------------------------------------------------------------------------------
comment: //.	create or recreate a table given its schema
comment: //----------------------------------------------------------------------------------------------
comment: //arg: dbSchema - a database table specification [array]
comment: //returns: html report of actions taken, false on failure [string]
comment: // only admins can do this
comment: //--------------------------------------------------------------------------------------
comment: //	no such table, create it
comment: //--------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------
comment: //	table exists, check if its up to date
comment: //--------------------------------------------------------------------------------------
comment: // get specifics of extant table
comment: //----------------------------------------------------------------------------------------------
comment: //.	create a report describing a table's install status
comment: //----------------------------------------------------------------------------------------------
comment: //arg: dbSchema - a database table specification [array]
comment: //returns: html report of actions taken [string]
comment: //--------------------------------------------------------------------------------------
comment: //	table present
comment: //--------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------
comment: // table schemas DO NOT match (fail)
comment: //----------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------
comment: // table schemas match
comment: //----------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------
comment: //	table missing (fail)
comment: //--------------------------------------------------------------------------------------
string: 'admin'
string: 'CREATE DATABASE '
string: "no connect"
string: "&lt;h1&gt;Houston, we have a problem...&lt;/h1&gt;"
string: "&lt;p&gt;"
string: 'model'
string: 'model'
string: 'fields'
string: '  '
string: ' '
string: "CREATE TABLE "
string: " (\n"
string: ",\n"
string: ");\n"
string: 'indices'
string: 'idx'
string: "CREATE INDEX $idxName ON $table ($idxField($idxSize));"
string: ''
string: "CREATE INDEX $idxName ON $table ($idxField);"
string: 'model'
string: 'indices'
string: 'idx'
string: 'model'
string: 'Key_name'
string: 'Could not make index: '
string: 'bad'
string: "SHOW INDEXES FROM "
string: 'model'
string: '*'
string: ''
string: 'model'
string: 'UID'
string: 'fields'
string: 'bigint'
string: '0'
string: 'int'
string: '0'
string: 'float'
string: '0'
string: 'datetime'
string: ''
string: "SHOW TABLES FROM "
string: ''
string: ''
string: 'model'
string: " (dbSchema)"
string: "&lt;h2&gt;"
string: "&lt;/h2&gt;\n"
string: 'Field'
string: 'Type'
string: 'Index'
string: 'fields'
string: ''
string: 'indices'
string: ''
string: 'indices'
string: 'YES'
string: 'YES ('
string: 'indices'
string: ')'
string: 'model'
string: 'model'
string: ''
string: ''
string: 'fields'
string: '|'
string: "\n"
string: 'fields'
string: '|'
string: "\n"
string: 'indices'
string: 'indices'
string: 'indices'
string: 'indices'
string: 'indices'
string: 'indices'
string: 'admin'
string: 'module'
string: ''
string: 'model'
string: 'tmp_'
string: '_'
string: 'fields'
string: 'indices'
string: 'archive'
string: 'no'
string: 'fields'
string: 'fields'
string: 'fields'
string: 'nodiff'
string: "Could not create temp table: "
string: 'model'
string: 'bad'
string: 'SELECT * FROM '
string: "DROP INDEX "
string: 'Key_name'
string: " ON "
string: 'DROP TABLE '
string: "select * from "
string: 'model'
string: ''
string: "[*] Database table '$tableName' is not installed.&lt;br/&gt;\n"
string: "[*] Database table '$tableName' exists.&lt;br/&gt;\n"
string: "[*] Table '$tableName' exists but does not match schema.&lt;br/&gt;\n"
string: "[*] Table '$tableName' and indices match schema.&lt;br/&gt;\n"
string: 'admin'
string: ''
string: 'model'
string: "Creating "
string: 'model'
string: " table and indices... "
string: "&lt;span class='ajaxmsg'&gt;done&lt;/span&gt;&lt;br/&gt;\n"
string: "&lt;span class='ajaxerror'&gt;failed&lt;/span&gt;&lt;br/&gt;\n"
string: 'model'
string: " table already exists..."
string: 'model'
string: "&lt;span class='ajaxmsg'&gt;all correct&lt;/span&gt;&lt;br/&gt;"
string: 'model'
string: "&lt;span class='ajaxmsg'&gt;updated to new schema&lt;/span&gt;&lt;br/&gt;"
string: "&lt;span class='ajaxerr'&gt;could not update&lt;/span&gt;&lt;br/&gt;"
string: 'admin'
string: ''
string: ''
string: 'model'
string: 'model'
string: "&lt;p&gt;A '"
string: 'model'
string: "' table exists, but does not match "
string: "object's schema.&lt;/p&gt;\n"
string: "&lt;b&gt;Object Schema:&lt;/b&gt;&lt;br/&gt;\n"
string: "&lt;br/&gt;\n"
string: "&lt;b&gt;Extant Table:&lt;/b&gt;&lt;br/&gt;\n"
string: "&lt;br/&gt;\n"
string: "&lt;p&gt;'"
string: 'model'
string: "' table exists, "
string: "matches object schema.&lt;/p&gt;\n"
string: "&lt;b&gt;Database Table:&lt;/b&gt;&lt;br/&gt;\n"
string: "&lt;br/&gt;\n"
string: "&lt;p&gt;'"
string: 'model'
string: "' table does not exist in the database.&lt;/p&gt;\n"
string: "&lt;b&gt;Object Schema:&lt;/b&gt;&lt;br/&gt;\n"
string: "&lt;br/&gt;\n"
string: "&lt;!-- table installed correctly --&gt;"

<b>scanning file: /var/www/an2google/trunk/core/dbdriver/mysql.dbd.php</b>
comment: //--------------------------------------------------------------------------------------------------
comment: //*	database driver (abstraction object) for mysql
comment: //--------------------------------------------------------------------------------------------------
comment: //+ These are wrapper functions to allow the same function names (and thus code) on different DBMS.
comment: //+ Note that % (sql wildcard) is stripped from UIDs from some functions as a security precaution.
comment: //+ Field values are generally escaped to prevent SQL injection by sqlMarkup
comment: //+
comment: //+ Table schema are passed as nested associative arrays:
comment: //+
comment: //+  'table' -&gt; string, name of table
comment: //+  'fields' -&gt; array of fieldname -&gt; type, where type is MySQL type
comment: //+  'indices' -&gt; array of fieldname -&gt; size (index name is derived from fieldname)
comment: //+	 'nodiff' -&gt; array of field names which are not versioned (eg, hitcount)
comment: //+
comment: //+ NOTE: additional database functionality is provides in mysqladmin, this functionality was moved
comment: //+	to this file because most user actions will not need it, and it keeps the default loaded
comment: //+ codebase down.
comment: //----------------------------------------------------------------------------------------------
comment: //	member variables
comment: //----------------------------------------------------------------------------------------------
comment: //_	database host [string]
comment: //_ database user name [string]
comment: //_	database password [string]
comment: //_ database name [string]
comment: //_	cache of objects loaded from database [array]
comment: //_	cache of alias =&gt; object mappings [array]
comment: //_	maximum bumber of objects to cache [int]
comment: //_	set of tables in this database [array]
comment: //_	set to true when list of tables has been loaded [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //.	constructor
comment: //----------------------------------------------------------------------------------------------
comment: //opt: dbHost - database host, default is 127.0.0.1 [string]
comment: //opt: dbUser - database user, default is root [string]
comment: //opt: dbPass - database password, no default [string]
comment: //opt: dbName - database name, default is 'kapenta' [string]
comment: // perhaps get these from $kapenta
comment: //----------------------------------------------------------------------------------------------
comment: //.	execute a query, return handle
comment: //----------------------------------------------------------------------------------------------
comment: //arg: query - a SQL query [string]
comment: //returns: handle to query result or false on failure [int][bool]
comment: //------------------------------------------------------------------------------------------
comment: // connect to database server and select database
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: // connect to database server and select database
comment: //------------------------------------------------------------------------------------------
comment: // handle to results
comment: //----------------------------------------------------------------------------------------------
comment: //.	check that a serialized object matches the schema it will fill
comment: //----------------------------------------------------------------------------------------------
comment: //arg: serialized - associative array of fields and values [array]
comment: //arg: UID - UID of record to load
comment: //returns: return associative array of field names and values or false on failure [array] [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //.	load an object given it's type and UID
comment: //----------------------------------------------------------------------------------------------
comment: //arg: UID - UID of record to load [string]
comment: //arg: dbSchema - database table definition [array]
comment: //returns: return associative array of field names and values or false on failure [array][bool]
comment: //------------------------------------------------------------------------------------------
comment: //	check the cache for this object
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	object is not in cache, try load from database
comment: //------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------
comment: // object found - strip database markup, store in cache and return
comment: //--------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //.	load a record from a table supporting recordAliases, return associative array
comment: //----------------------------------------------------------------------------------------------
comment: //arg: raUID - UID or alias of an object [string]
comment: //arg: dbSchema - database table definition [array]
comment: //returns: return associative array of field names and values or false on failure [array] [bool]
comment: //------------------------------------------------------------------------------------------
comment: //	try load from cache by UID
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	try load from cache by Alias
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	not found in cache, try load from database
comment: //------------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------
comment: // object found - strip database markup, store in cache and return
comment: //--------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	not found in table, try other aliases
comment: //------------------------------------------------------------------------------------------
comment: // query failed
comment: // try all 
comment: //------------------------------------------------------------------------------------------
comment: //	out of options
comment: //------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //.	store an object in the cache
comment: //----------------------------------------------------------------------------------------------
comment: //arg: model - type of object being stored [string]
comment: //arg: objAry - associative array of object members [string]
comment: //----------------------------------------------------------------------------------------------
comment: //.	save a record given a dbSchema array and an associative array of fields and values
comment: //----------------------------------------------------------------------------------------------
comment: //arg: data - serialized object [array]
comment: //arg: dbSchema - schema of the database table this record belongs in [array]
comment: //opt: setdefaults - if true will automatically modify editedBy, editedOn, etc [bool]
comment: //opt: broadcast - if true, then pass to other peers [bool]
comment: //opt: revision - if true, then keep any revision data [bool]
comment: //returns: true on success, false on failure [bool]
comment: // must have a UID
comment: // and it must be good
comment: // temporary
comment: //TODO: check schema and consider auto table installation
comment: //------------------------------------------------------------------------------------------
comment: //	set editedBy, editedOn if present in schema
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	try load previous version of this record
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	replace any previously cached version
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	if no previous version exists, save this one // TODO: consider adding revision here
comment: //------------------------------------------------------------------------------------------
comment: // prevent SQL injection
comment: // quote string values
comment: // assemble the query
comment: // run it...
comment: //--------------------------------------------------------------------------------------
comment: //	allow other modules to respond to this event	//TODO: consider expanding args
comment: //--------------------------------------------------------------------------------------
comment: //--------------------------------------------------------------------------------------
comment: //	broadcast to peers
comment: //--------------------------------------------------------------------------------------
comment: // could not save
comment: // OK, saved
comment: //------------------------------------------------------------------------------------------
comment: //	pervious version does exist, find if/where it differs from this one
comment: //------------------------------------------------------------------------------------------
comment: //	this field has changed
comment: // nothing to do
comment: //------------------------------------------------------------------------------------------
comment: //	record revisions to any fields for swhich we track changes
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	make changes to stored record
comment: //------------------------------------------------------------------------------------------
comment: //$session-&gt;msg($sql, 'ok');
comment: //------------------------------------------------------------------------------------------
comment: //	allow other modules to respond to this event	//TODO: consider expanding args
comment: //------------------------------------------------------------------------------------------		
comment: //------------------------------------------------------------------------------------------
comment: //	pass on to peers, and we're done
comment: //------------------------------------------------------------------------------------------		
comment: //----------------------------------------------------------------------------------------------
comment: //.	update a record field without causing resync, strings only
comment: //----------------------------------------------------------------------------------------------
comment: //arg: model - model name / name of database table [string]
comment: //arg: UID - UID of a record [string]
comment: //arg: field - field name [string]
comment: //arg: value - field value [string]
comment: //: this is used where an object should change only locally and changes not sent to peer servers
comment: // temporary
comment: //TODO: improve this
comment: //TODO: update cache
comment: //TODO: process triggers
comment: //----------------------------------------------------------------------------------------------
comment: //|	determine is a field should be quoted in SQL queries, given its type
comment: //----------------------------------------------------------------------------------------------
comment: //arg: dbType - MySQL field type [int]
comment: //returns: true if fields of this type should be quoted [array]
comment: //----------------------------------------------------------------------------------------------
comment: //|	get a row from a recordset,
comment: //----------------------------------------------------------------------------------------------
comment: //arg: handle - handle to a MySQL query result [int]
comment: //returns: associative array of field names and values, database markup not removed [array]
comment: //----------------------------------------------------------------------------------------------
comment: //|	get number of rows in recordset
comment: //----------------------------------------------------------------------------------------------
comment: //arg: handle - handle to a MySQL query result [int]
comment: //returns: number of rows or false on failure [int] [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //.	delete an object (if it exists)
comment: //----------------------------------------------------------------------------------------------
comment: //arg: model - object type / name of database table [string]
comment: //arg: UID - UID of a record [string]
comment: //returns: true on success, false on failure [bool]
comment: // TODO: remove strtolower when safe
comment: // this also checks that table exists:
comment: //	SPECIAL CASE, security
comment: //	SPECIAL CASE, security
comment: //------------------------------------------------------------------------------------------
comment: //	copy to recycle bin (unless set to 'no' archive)
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	remove from original table
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	remove from cache
comment: //------------------------------------------------------------------------------------------
comment: //syncRecordDeletion($model, $UID);
comment: //------------------------------------------------------------------------------------------
comment: //	delete any aliases this item might have
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	send event to any modules which may need to do something about this
comment: //------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //.	create an associative array of a recordset (expects UID for index)
comment: //----------------------------------------------------------------------------------------------
comment: //arg: sql - sql query [string]
comment: //returns: array of associative arrays, database markup not removed [array]
comment: //:	TODO: discover if this is used by anything, if not, remove
comment: //----------------------------------------------------------------------------------------------
comment: //.	check if an object of a given type exists
comment: //----------------------------------------------------------------------------------------------
comment: //arg: model - model name / name of database table [string]
comment: //arg: UID - UID of a record [string]
comment: //returns: true if record exists in the given table, false if not found [bool]
comment: // temporary
comment: //------------------------------------------------------------------------------------------
comment: //	if we already have this object in the cache, assume it exists
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	not in cache, try database
comment: //------------------------------------------------------------------------------------------
comment: // prevent SQL injection
comment: // bad table name?
comment: // no such object
comment: //------------------------------------------------------------------------------------------
comment: // object exists, may as well cache it
comment: //------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //.	make a list of all tables in database and store in $this-&gt;tables
comment: //----------------------------------------------------------------------------------------------
comment: //returns: array of table names [array]
comment: // we don't know the column name in advance, so we do this:
comment: //----------------------------------------------------------------------------------------------
comment: //.	check if a table exists in the database
comment: //----------------------------------------------------------------------------------------------
comment: //arg: model - model name / name of a database table [string]
comment: //returns: true if there exists a table with the name given, false if not found [bool]
comment: //----------------------------------------------------------------------------------------------
comment: //.	create a blank serialized object from schema, with fields unset, magic members filled in
comment: //----------------------------------------------------------------------------------------------
comment: //arg: dbSchema - a table schema, as with dbSchema [array]
comment: //returns: copy of schema with magic fields filled in [array]
comment: //----------------------------------------------------------------------------------------------
comment: //.	get a range of objects
comment: //----------------------------------------------------------------------------------------------
comment: //: if fields is empty string then all fields (*) are assumed
comment: //:	'conditions' is an array of conditions, eg 1 =&gt; role='admin', 2 =&gt; some='thing'
comment: //:	TODO: more security checks for sql inclusion, especially on conditons
comment: //arg: model - type of object / name of database table [string]
comment: //arg: fields - list of fields or empty string (SELECT clause) [string]
comment: //arg: conditions - array of conditions (WHERE clause) [array]
comment: //opt: by - field(s) to order by or empty string [string]
comment: //opt: limit - max record to return [int]
comment: //opt: offset - skip this many records from start [int]
comment: //returns: array of associative arrays (field -&gt; value) with database markup removed [array]
comment: //% return value [array]
comment: //	prevents SQL injection
comment: //------------------------------------------------------------------------------------------
comment: //	basic sql query to select all rows in table
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	conditions to winnow it down by
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	order by a particular field
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	max n results
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	starting from
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	execute the query and return results as associative array
comment: //------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //.	count a subset of objects
comment: //----------------------------------------------------------------------------------------------
comment: //: if fields is empty string then all fields (*) are assumed
comment: //:	'conditions' is an array of conditions, eg 1 =&gt; "ofGroup='admin'", 2 =&gt; "some='thing'"
comment: //:	TODO: more security checks for sql inclusion, especially on conditons
comment: //: TODO: consider returning false on error, why, why not...
comment: //arg: table - name of database table [string]
comment: //opt: conditions - array of conditions (WHERE clause) [array]
comment: //returns: number of records [int]
comment: // temporary
comment: //TODO: throw error?
comment: //------------------------------------------------------------------------------------------
comment: //	basic sql query to count UIDs
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	conditions to winnow it down by
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	execute the query and return results as associative array
comment: //------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //. format a date
comment: //----------------------------------------------------------------------------------------------
comment: //opt: timestamp - timestamp [int]
comment: //returns: same array with values unescaped (database markup removed) [string]
comment: //----------------------------------------------------------------------------------------------
comment: //.	get table schema in Kapenta's dbSchema format (jagged array)
comment: //----------------------------------------------------------------------------------------------
comment: //:note that nodiff is not generated, as this is not known by the DBMS
comment: //arg: tableName - name of a database table / model name [string]
comment: //returns: nested array describing database table [array]
comment: // temporary
comment: //------------------------------------------------------------------------------------------
comment: //	create dbSchema array		TODO: not ideal, more error checking here
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	add fields
comment: //------------------------------------------------------------------------------------------
comment: //------------------------------------------------------------------------------------------
comment: //	add indices
comment: //------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //.	check that a database schema is valid
comment: //----------------------------------------------------------------------------------------------
comment: //arg: dbSchema - a database table definition [array]
comment: //returns: true if valid, false if not [bool]
comment: //TODO: more checks here (allowed field types, additional items, allowed table names, etc)
comment: //----------------------------------------------------------------------------------------------
comment: //.	sanitize a value before using it in sql statement - to prevent SQL injection, etc
comment: //----------------------------------------------------------------------------------------------
comment: //arg: text - string to sanitize [string]
comment: //returns: escaped string [string]
comment: // WHY?
comment: // wildcard characters in SQL
comment: // ... 
comment: // used to construct SQL statements
comment: // ...
comment: // ...
comment: // interference between nested XML
comment: // ...
comment: // can cause mysql errors
comment: // SQL statements  
comment: // ...
comment: // ...
comment: // ...
comment: // ...
comment: // ...
comment: // ...
comment: //----------------------------------------------------------------------------------------------
comment: //.	remove sql markup
comment: //----------------------------------------------------------------------------------------------
comment: //arg: text - escaped string [string]
comment: //returns: unescaped string [string]
comment: //------------------------------------------------------------------------------------------
comment: // legacy markup, from kapenta 1, remove these if not migrating old data
comment: //------------------------------------------------------------------------------------------
comment: //----------------------------------------------------------------------------------------------
comment: //. add sql markup to an array (no nested arrays)
comment: //----------------------------------------------------------------------------------------------
comment: //arg: ary - associative array of field/value pairs [array]
comment: //returns: same array with values escaped (database markup added) [array]
comment: //----------------------------------------------------------------------------------------------
comment: //. remove sql markup from an array (no nested arrays)
comment: //----------------------------------------------------------------------------------------------
comment: //arg: ary - associative array of field/value pairs [array]
comment: //returns: same array with values unescaped (database markup removed) [array]
string: ''
string: ''
string: ''
string: ''
string: 'query'
string: 'Could not connect to database server.'
string: 'bad'
string: "Connected to database server but could not select database: "
string: 'bad'
string: "Could not execute database query:&lt;br/&gt;"
string: "&lt;hr/&gt;&lt;br/&gt;"
string: 'bad'
string: 'fields'
string: 'model'
string: '::'
string: 'dbLoad'
string: 'cache hit: '
string: '::'
string: 'dbLoad'
string: 'cache miss: '
string: '::'
string: "SELECT * FROM "
string: " where UID='"
string: "'"
string: 'dbLoad'
string: 'no such object: '
string: '::'
string: 'model'
string: '::'
string: 'dbLoad'
string: 'cache hit: '
string: '::'
string: ' (loadAlias)'
string: '::'
string: 'dbLoad'
string: 'alias hit: '
string: '::'
string: ' =&gt; '
string: ''
string: 'dbLoad'
string: 'cache miss: '
string: '::'
string: ' (loadAlias)'
string: "SELECT * FROM "
string: " WHERE alias='"
string: "'"
string: " OR UID='"
string: "'"
string: 'aliases_alias'
string: "SELECT * FROM aliases_alias "
string: "WHERE refModel='"
string: "' "
string: "AND aliaslc='"
string: "'"
string: 'refUID'
string: 'refUID'
string: 'dbLoad'
string: 'no such object: '
string: '::'
string: '::'
string: 'UID'
string: 'alias'
string: '::'
string: 'alias'
string: 'UID'
string: 'UID'
string: 'UID'
string: 'model'
string: 'model'
string: 'model'
string: 'editedBy'
string: 'fields'
string: 'editedBy'
string: 'editedOn'
string: 'fields'
string: 'editedOn'
string: 'UID'
string: 'model'
string: 'fields'
string: ''
string: "\""
string: "\""
string: "INSERT INTO "
string: 'model'
string: " values ("
string: ', '
string: ");"
string: 'module'
string: 'module'
string: 'model'
string: 'model'
string: 'UID'
string: 'UID'
string: 'data'
string: '*'
string: 'object_updated'
string: 'self'
string: 'model'
string: 'nodiff'
string: 'nodiff'
string: 'fields'
string: 'fields'
string: "\""
string: "\""
string: "`"
string: "`"
string: '='
string: "UPDATE "
string: 'model'
string: " SET "
string: ', '
string: " WHERE UID='"
string: 'UID'
string: "';"
string: 'could not update record: '
string: 'model'
string: " "
string: 'UID'
string: 'bad'
string: 'module'
string: 'module'
string: 'model'
string: 'model'
string: 'UID'
string: 'UID'
string: 'data'
string: '*'
string: 'object_updated'
string: 'self'
string: 'model'
string: "UPDATE "
string: " "
string: "SET "
string: "='"
string: "' "
string: "WHERE UID='"
string: "'"
string: 'tinyint'
string: 'smallint'
string: 'mediumint'
string: 'int'
string: 'bigint'
string: 'float'
string: 'double'
string: 'real'
string: 'module'
string: 'model'
string: 'users_user'
string: 'schools_school'
string: 'archive'
string: 'no'
string: 'archive'
string: "DELETE FROM "
string: " WHERE UID='"
string: "'"
string: '::'
string: 'alias'
string: '::'
string: 'alias'
string: 'module'
string: 'model'
string: 'UID'
string: 'object_deleted'
string: 'UID'
string: '::'
string: "SELECT * FROM $model WHERE UID='"
string: "'"
string: "SHOW TABLES FROM "
string: 'fields'
string: ''
string: 'DATETIME'
string: 'TINYINT'
string: '0'
string: 'UID'
string: 'createdBy'
string: 'editedBy'
string: 'editedOn'
string: 'createdOn'
string: ''
string: ''
string: ''
string: ''
string: '*'
string: "SELECT $fields FROM "
string: " "
string: 'WHERE '
string: ' AND '
string: ' '
string: "ORDER BY $by "
string: ''
string: "LIMIT $limit "
string: ''
string: "OFFSET $offset "
string: 'UID'
string: '*'
string: ''
string: "SELECT count(UID) as numRows FROM "
string: " "
string: 'WHERE '
string: ' AND '
string: ' '
string: 'numRows'
string: "Y-m-j H:i:s"
string: '_'
string: 'module'
string: 'model'
string: 'fields'
string: 'indices'
string: 'nodiff'
string: "describe "
string: 'fields'
string: 'Field'
string: 'Type'
string: "show indexes from "
string: 'indices'
string: 'Column_name'
string: 'Sub_part'
string: 'module'
string: 'model'
string: 'nodiff'
string: 'fields'
string: 'fields'
string: 'UID'
string: 'fields'
string: '%'
string: "[`|pc]"
string: '_'
string: "[`|us]"
string: ';'
string: "[`|sc]"
string: "'"
string: "[`|sq]"
string: "\""
string: "[`|dq]"
string: '&lt;'
string: "[`|lt]"
string: '&gt;'
string: "[`|gt]"
string: "\t"
string: "[`|tb]"
string: 'select'
string: "[`|select]"
string: 'delete'
string: "[`|delete]"
string: 'create'
string: "[`|create]"
string: 'insert'
string: "[`|insert]"
string: 'update'
string: "[`|update]"
string: 'drop'
string: "[`|drop]"
string: 'table'
string: "[`|table]"
string: "[`|pc]"
string: '%'
string: "[`|us]"
string: '_'
string: "[`|sc]"
string: ';'
string: "[`|sq]"
string: "'"
string: "[`|dq]"
string: "\""
string: "[`|lt]"
string: "&lt;"
string: "[`|gt]"
string: "&gt;"
string: "[`|tb]"
string: "\t"
string: "[`|select]"
string: 'select'
string: "[`|delete]"
string: 'delete'
string: "[`|create]"
string: 'create'
string: "[`|insert]"
string: 'insert'
string: "[`|update]"
string: 'update'
string: "[`|drop]"
string: 'drop'
string: "[`|table]"
string: 'table'
string: "[`|squote]"
string: "'"
string: "[`|quote]"
string: "\""
string: "[`|semicolon]"
string: ";"

</small></pre><small></small></body></html>